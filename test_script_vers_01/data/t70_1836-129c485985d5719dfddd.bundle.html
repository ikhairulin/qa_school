(self.webpackChunk_mail_octavius=self.webpackChunk_mail_octavius||[]).push([[1836],{71836:function(e,n,t){var r,i;r=[t(84131),t(51884),t(86740)],void 0===(i=function(e,n,t){function r(n){var t=[];if(Array.isArray(n)){if(!(n.length>=4&&n[3]))Array.forEach(n[1],(function(r){t.push({name:e.trim(n[0]),email:r,id:n[2],fromInbox:!!n[4]})}))}else if(Object.isObject(n))if(Array.isArray(n.emails)){var r=n.nick||"";if(n.display_name)r=n.display_name;else if(Object.isObject(n.name))if(n.name.first||n.name.last)r=(n.name.first||"")+" "+(n.name.last||"");r=e.trim(r),Array.forEach(n.emails,(function(e){t.push({name:r,email:e})}))}return t}function i(e,n,t){Array.forEach(n,(function(n){Array.forEach(r(n),(function(n){if(!(n.email in t))t[n.email]=null,e.add(n)}))}))}function o(e,n){return e.name===n.name?e.email>n.email?1:-1:e.name>n.name?1:-1}var a,c,f,u=function(e){try{patron.radar("ab_s_v2",e+"=1",1)}catch(e){}},l=(f={stack:[]},function(n,t){function r(){if(r.tid)clearTimeout(r.tid);r.tid=setTimeout((function(){r.tid=c=null}),12e4)}function i(){var e=t.get(":version");if(null==e)return null;if(2!=e)t.remove(":version"),t.remove("");return t.get("")}function o(e){!function(e){var n={name:null,nick:null,emails:null,id:null};Array.forEach(e.body,(function(e){Object.forEach(e,(function(t){if(!(t in n))delete e[t]}))}))}(e);try{t.set(":version",2),t.set("",e)}catch(e){}}function a(){if(c)for(;f.stack.length;)f.stack.shift().resolve(c.body)}return{fetch:function(){var t,u=new e.Deferred,l=new e.Deferred;if(!c)c=i();if(c)r(),t=c.last_modified;if(f.stack.push(l),f.loaded)a();else if(!f.loading)f.loading=!0,u.done((function(e){var n;if(f.loaded=!0,Array.isArray(e.body))n=function(e){var n={body:e.body,last_modified:e.last_modified};return o(n),n}(e);else if(Object.isObject(e.body)&&c)n=function(e,n){var t,r,i=e.body,a=n.body.deleted,c=n.body.modified,f={},u={};if(!a||!a.length)a=null;if(!c||!c.length)c=null;if(a||c){if(a)for(t=a.length;t--;)f[a[t]]=null;if(c)for(t=c.length;t--;)u[c[t].id]=c[t];for(t=i.length;t--;)if((r=i[t].id)in f)i.splice(t,1);else if(r in u)i[t]=u[r],delete u[r];Object.forEach(u,(function(e){i.push(e)})),f=u=a=c=null}else return!1;return e.body=i,(i=e).last_modified=n.last_modified,o(i),i}(c,e);if(n)c=n,a()})),n.getCommonContacts.call(u,t);return l.promise()}}});function s(n){return{fetch:function(){var t=new e.Deferred,r=new e.Deferred;return t.done((function(e){r.resolve(e.body)})),n.getContacts.call(t),r.promise()}}}function d(n){var r=((n=e.extend({},n)).prefix?n.prefix:"")+"|ab/contacts/common",i=function(e){return r+(e?e:"")};return{set:function(e,n){return t.set(i(e),n)},get:function(e){return t.get(i(e))},remove:function(e){return t.remove(i(e))}}}var h=function(){var n,t={stack:[]};return function(r){function i(){if(n)for(;t.stack.length;){t.stack.shift().resolve(n.body)}}return{fetch:function(){var o=new e.Deferred,a=new e.Deferred;if(t.stack.push(a),t.loaded)i();else if(!t.loading)t.loading=!0,o.done((function(e){if(t.loaded=!0,e)n=e,i()})),o.fail((function(){t.loading=!1})),r.getGroups.call(o);return a.promise()}}}}();function m(t,o){var c=new d(o),f=new s(t,c),m=new l(t,c),v=new h(t),p=new n;return{get:function(){var n=new e.Deferred,o={},c={find:function(e){return p.fetch(e)},all:function(){return p.fetch()},getGroup:function(e){return p.getGroup(e)}};p.clear();var l=f.fetch().done((function(f){if(!a&&(!Array.isArray(f)||0===f.length)&&window.patron&&!patron.abjsDataEmpty)a=!0,u("empty_after");i(p,f,o),n.resolve(c);var l=Array.filter(f,(function(e){return 4==e.length&&e[3]&&e[1]}));if(l.length&&t.getGroups)v.fetch().done((function(n){!function(n,t,i,o,a){var c={};t.forEach((function(e){r(e).forEach((function(e){if(!(e.id in c))c[e.id]=[];c[e.id].push(e)}))})),i.forEach((function(t){(t={group:e.trim(t[0]),count:t[1],id:t[2]}).contacts=[];var r=o.find((function(e){return e.id==t.id}));if(r&&Array.isArray(r.contacts))r.contacts.forEach((function(e){if(c[e])t.contacts=t.contacts.concat(c[e])}));if(t.count=t.contacts.length,t.count)n.add(t)}))}(p,f,l,n)})).fail((function(){u("group_fail")}))}));return m.fetch().done((function(e){l.done((function(){i(p,e,o)}))})),n.promise()}}}return m.contactToPlainItems=r,m.addContactsToIndex=i,m.updateContacts=function(e,n,t){var i=[],a=!1;if(Array.forEach(n,(function(n){var o=!1;if(Array.forEach(e,(function(e){Array.forEach(r(e),(function(r){if(r.email===n.email){if(r.name!==n.name){if(t)e[0]=n.name;else e.nick=n.name,delete e.name,delete e.display_name;a=!0}o=!0}}))})),!o)i.push(n)})),i.length)a=!0,i=i.sort(o),Array.prototype.splice.apply(e,[0,0].concat(Array.map(i,(function(e){return t?[e.name,[e.email]]:{nick:e.name,emails:[e.email]}}))));return a},m}.apply(n,r))||(e.exports=i)},95816:function(e,n){var t;void 0===(t=function(){var e={"`":"ё",q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю"};for(_char in e)if(e.hasOwnProperty(_char))if(_value=e[_char],!(_value in e))e[_value]=_char;return function(n){if(!n)return"";for(var t,r=String(n).toLowerCase().split(""),i="",o=0;o<r.length;o++)if(t=r[o],void 0!==e[t])i+=e[t];else i+=t;return i}}.apply(n,[]))||(e.exports=t)},51884:function(e,n,t){var r,i;r=[t(84131),t(95816)],void 0===(i=function(e,n){var t=function(){var t={ru:{"йе":"ye","йо":"yo","йу":"yu","йя":"ya","кс":"x","а":"a","б":"b","в":"v","г":"g","д":"d","е":["je","ye","e"],"ё":["jo","yo"],"ж":"zh","з":["s","z"],"и":"i","й":["jj","g","i","j","y"],"к":["c","k"],"л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":["ph","f"],"х":["kh","h"],"ц":["c","ts"],"ч":"ch","ш":["sch","sh"],"щ":["shch","sch","shh"],"ъ":'"',"ы":["i","y"],"ь":"'","э":"eh","ю":["u","ju","yu"],"я":["ja","ya","y"]},en:{shch:"щ",sch:["ш","щ"],shh:"щ",ch:"ч",ja:["йя","я"],je:"е",jo:"ё",ju:"ю",sh:"ш",ts:"ц",ya:["йя","я"],ye:"е",yo:"ё",yu:"ю",a:"а",b:"б",c:"к",v:"в",g:["г","й"],d:"д",e:"е",f:"ф",i:["и","й","ы"],j:"й",k:"к",l:"л",m:"м",n:"н",o:"о",p:"п",r:"р",s:["з","с"],t:"т",u:["у","ю"],x:"кс",y:["ий","й","ы","я"],z:"з"}};function r(r){var i,o,a,c=t.en[r]||t.ru[r]||(r=r.toLocaleLowerCase(),(i=!0)&&(t.en[r]||t.ru[r])),f=[];if(c)a=n(r),f=f.concat(c,r,a);else if(1===r.length)a=n(r),f=f.concat(r,a);for(o=f.length;o--;)if(r=f[o],e.trim(r)){if(r=f[o]=String.preg_quote(r),i)r=r.charAt(0).toUpperCase()+r.substr(1,r.length),f[o]=r}else f[o]="\\s+";return f}function i(e,n){var t=e.join(n?"":"|");if(e.length>1)t="(?:"+t+")";return t}return{createFindRegExp:function(e){var n=function(e){for(var n,t,o,a="",c=0,f=(e=null==e?"":e+"").length,u=[],l=[];c<f;c++)for(n=f;n>c;n--)if((o=r(e.substring(c,n))).length){if(u.length=0,u.push(i(o,0)),n-c>1){for(l.length=0,t=c;t<n;t++)l.push(i(r(e.charAt(t)),0));u.push(i(l,1)),c+=n-c-1}a+=i(u,0)}return a}(e);return{name:new RegExp("(^|^(.*?[_\\-\\.\\s])?)"+n,"i"),email:new RegExp("(^|^([^@]+[_\\-\\.]|.*?@)?)"+n,"i"),group:new RegExp("(^|^(.*?[_\\-\\.\\s])?)"+n,"i")}},matchSubsetByRegExp:function(e,n){if("string"!=typeof e)return null;else return n.test(e)?{start:RegExp.lastParen.length,end:RegExp.lastMatch.length}:null}}}();return function(){var e=[];return{add:function(n){e.push({data:n})},fetch:function(n){var r=[];if(n){for(var i,o,a,c=t.createFindRegExp(n),f=0,u=e.length;f<u;f++)for(i in c)if(c.hasOwnProperty(i))if(o=t.matchSubsetByRegExp((a=e[f].data)[i],c[i])){r.push({data:a,field:i,position:o});break}}else r=e;return r},clear:function(){e.length=0},getGroup:function(n){return Array.find(e,(function(e){return e.data.id==n}))}}}}.apply(n,r))||(e.exports=i)},86740:function(e,n,t){var r;void 0===(r=function(){function e(e,n){var t,r={},i=e.document,o=n||window.patron&&patron.NoSaveLogin?"sessionStorage":"localStorage";if(r.disabled=!1,r.set=function(e,n){},r.get=function(e){},r.remove=function(e){},r.clear=function(){},r.transact=function(e,n,t){var i=r.get(e);if(null==t)t=n,n=null;if(void 0===i)i=n||{};t(i),r.set(e,i)},r.getAll=function(){},r.forEach=function(){},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(n){return e||void 0}},r.toString=function(){return"store"},function(){try{return o in e&&e[o]}catch(e){return!1}}())t=e[o],r.set=function(e,n){if(void 0===n)return r.remove(e);else return t.setItem(e,r.serialize(n)),n},r.get=function(e){return r.deserialize(t.getItem(e))},r.remove=function(e){t.removeItem(e)},r.clear=function(){t.clear()},r.getAll=function(){var e={};return r.forEach((function(n,t){e[n]=t})),e},r.forEach=function(e){for(var n=0;n<t.length;n++){var i=t.key(n);e(i,r.get(i))}};else if(i.documentElement.addBehavior){var a,c;try{(c=new ActiveXObject("htmlfile")).open(),c.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),c.close(),a=c.w.frames[0].document,t=a.createElement("div")}catch(e){t=i.createElement("div"),a=i.body}function f(e){return function(){try{var n=Array.prototype.slice.call(arguments,0);n.unshift(t),a.appendChild(t),t.addBehavior("#default#userData"),t.load(o);var i=e.apply(r,n);return a.removeChild(t),i}catch(e){}}}var u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function l(e){return e.replace(/^\d/,"___$&").replace(u,"___")}r.set=f((function(e,n,t){if(n=l(n),void 0===t)return r.remove(n);else return e.setAttribute(n,r.serialize(t)),e.save(o),t})),r.get=f((function(e,n){return n=l(n),r.deserialize(e.getAttribute(n))})),r.remove=f((function(e,n){n=l(n),e.removeAttribute(n),e.save(o)})),r.clear=f((function(e){var n=e.XMLDocument.documentElement.attributes;e.load(o);for(var t,r=0;t=n[r];r++)e.removeAttribute(t.name);e.save(o)})),r.getAll=function(e){var n={};return r.forEach((function(e,t){n[e]=t})),n},r.forEach=f((function(e,n){for(var t,i=e.XMLDocument.documentElement.attributes,o=0;t=i[o];++o)n(t.name,r.deserialize(e.getAttribute(t.name)))}))}try{var s="__storejs__";if(r.set(s,s),r.get(s)!=s)r.disabled=!0;r.remove(s)}catch(e){r.disabled=!0}return r.enabled=!r.disabled,r.disabled&&function(e,n){e.get=function(e){return n[e]},e.set=function(e,t){n[e]=t},e.remove=function(e){delete n[e]},e.getAll=function(){return n},e.clear=function(){n={}}}(r,{}),r}var n,t;return t=Function("return this")(),(n=t.store=e(t)).session=e(t,!0),n}.call(n,t,n,e))||(e.exports=r)}}]);