(self.webpackChunk_mail_octavius=self.webpackChunk_mail_octavius||[]).push([[1759],{89498:function(e,r,t){var a,n;a=[t(18440)],void 0===(n=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div/>
`,"./app/ui-block/layer-create-folder/layer-create-folder.html")}.apply(r,a))||(e.exports=n)},41759:function(e,r,t){"use strict";t.r(r);var a=t(21528),n=t(99150),o=t(18440),l=t.n(o),i=t(89498),d=t.n(i),s=t(4872),u=t.n(s),c=t(74456),f=t(50375),v=t(63062),p=t(96384),h=t(41027);r.default=l().Block.extend({name:"layer-create-folder",template:d(),defaults:{mode:"new",model:null,selectMode:!1},registerInMediators:function(){var e=this;return new Promise((function(r){Promise.resolve().then((function(){var a=[t(57147)];(function(t){t.default.register(e),r()}).apply(null,a)})).catch(t.oe)}))},didMount:function(){var e=this,r=this.attrs,t=r.model,o=r.mode;this.registerInMediators().then((function(){if(e.isMounted()){var r,l=!1,i=null;if(!0===(null==(r=t)?void 0:r.moveLetters))l=t.moveLetters,i=t.letterCurrentFolder;var d="edit"===o||l?null:t,s=e.get("selectMode"),v=l?function(r){f.default.invalidateCache(),e.broadcast("move",{id:r.id,selection:s})}:function(){f.default.invalidateCache(),n.default.updateAll()};Promise.all([(0,c.Z)("react"),(0,c.Z)("blitz")]).then((function(r){var n,s=r[0],c=r[1],f=c.CreateFolder,m=c.LayerManager;if(e.isMounted()){var M=e.layerManager||new m;M.setup(e.el,{popup:!1,radarPrefix:"folders-lr"});var y={mode:o,folder:"edit"===o?t:new(u())({name:""}),parentFolder:d,folders:u().all,FEATURES:a.default,onClose:e.onClose.bind(e),onError:e.onError.bind(e),handleFinal:v,isMoveLetters:l,letterCurrentFolder:i,openSecureFolder:p.Z,layerManager:M,isDarkMode:!!(null===(n=h.Z.getSelectedModel())||void 0===n?void 0:n.isDarkMode())},g=M.openLayer(s.createElement(f,y),{noPanelWrap:!0,responsive:"auto"}).id;e.layerManager=M,e.id=g}}))}}))},onError:function(e){v.default.add({type:v.default.types.error,text:i18n("Что-то пошло не так!"),unique:!0})},onClose:function(){if(this.broadcast("layer:close"),this.layerManager)this.layerManager.destroyLayer(this.id)}})}}]);