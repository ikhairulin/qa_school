"use strict";(self.webpackChunk_mail_octavius=self.webpackChunk_mail_octavius||[]).push([[9009],{33018:function(e,t,n){n.r(t),n.d(t,{WidgetHeader:function(){return z},default:function(){return J}});var i=n(81171),r=n(22023),a=n(82646),c=n(28266),o=n.n(c),u=n(21211),l=n(79929),s=n(63745),m=n.n(s),d=n(59333),f=n(52226),E=n(15800),_=n(33722),w=n(19308),I=n(73794),h=n(10476),p=n(74838),g=n(56636),v=n(41692),N=n(37030),y=n(96387),T=n(19275),k="_20rexHkD6ADH5gHpmvn5_u",W="o6yRQqsQbk0_7AkdN6OHF",O=n(13431),D=n(58105),C=n(59482),G=u.WEATHER_PING,b=!G?function(){return!1}:function(){return(0,D.M)((function(){return y.Z.getSlot("t1189").catch((function(){return T.Z.weatherSmall||!1}))}),(function(){return G}),(function(){return T.Z.weatherSmall||!1}))[0]},A=function(){var e=b(),t=(0,C._)(),n=e&&(0,O.p)({colorThemeDark:!0,icon:e.now_icon,status:e.now_status});return(0,s.useMemo)((function(){return{leftIcon:m().createElement("div",{className:o()(g.Z.icon,g.Z.marusia),style:{backgroundImage:"url(".concat(u.MARUSIA_LOGO,")")}}),title:(0,N.kC)(e?(0,N.p6)(t,[["weekday","short"]])+", "+e.now_temp+"°":(0,v.ZW)(t)),rightIcon:n&&m().createElement("div",{className:o()(k,W),style:{backgroundImage:"url(".concat(n,")")}}),analyticContent:e?"weather":"stub"}}),[e,n,t])},R=function(){return(0,s.useMemo)((function(){return{leftIcon:m().createElement("div",{className:g.Z.icon},m().createElement(i.Icon,{icon:l.WIDGET_NOTES_ICON})),title:u.WIDGET_NOTES_HEADER_TEXT,analyticContent:"notes"}}),[])},S=n(29273),Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r];return e}).apply(this,arguments)},H=function(){var e=S.l;if(0===e)return{title:i18n("Нет обновлений"),analyticContent:"stub"};if(1===e)return{title:S.g[0].title,analyticContent:"title_update"};var t={count:e};return{title:i18n.plural(e,[i18n("{count} обновлений",t),i18n("{count} обновление",t),i18n("{count} обновления",t)]),analyticContent:"n_updates"}}(),M=Z({leftIcon:m().createElement("div",{className:o()(g.Z.icon,g.Z.notification)},m().createElement(i.Icon,{icon:l.WIDGET_NOTIFICATION_ICON,sizeX:4}))},H),L=function(){return M},P=n(69763),j=n(94464),X=function(){var e=(0,j.GE)();return(0,s.useMemo)((function(){return!e?{analyticContent:"non-weather"}:{leftIcon:m().createElement("div",{className:o()(g.Z.icon,g.Z.weather),style:{backgroundImage:"url(".concat((0,O.p)({colorThemeDark:!0,status:e.now.iconUrlId}),")")}}),title:"".concat(e.now.temp,"°, ").concat(e.now.descriptionShort),analyticContent:"weather"}}),[e])},Y=n(60033),B=n.n(Y),U={container:"_2o0VlP7GQj5jqfMtCoeizw",mask:"_3yF2Ri8MNZ6-BUBcevXugc",onlyIcon:"_3CrJLV6OXTosVvC5ksskjm",titleWrapper:"_34NBsxP3_k6khIgLG5dDvM",title:"_1p3BD21zryIMZxXy1bO90y",iconWrapper:"_2CwATIsiVdNDLXI_kYt-Gh",sceleton:"_3de9Wi3kDLI0ctF0sLN4Rw",tooltip:"rT_GQo6yjJfYRqkbEnSYi",open:"_36yA7NY49Eb5cDLnsjJTV4"},V=function(){switch(u.WIDGET_HEADER_TYPE){case"todo":return["widget-todo",P.h];case"notification":return["widget-notification",L];case"marusia":return["widget-marusia",A];case"weather":if(u.WIDGET_WEATHER)return["widget-weather",X];break;case"notes":if(u.WIDGET_NOTES)return["widget-notes",R]}return["widget-calendar",v.GX]}(),F=V[0],Q=V[1],q=!r.h||u.HIDE_TOYS===u.BL_PROP_NAME&&(u.WIDGET_COLUMN||u.SHOW_TODO_TOGGLE),x={position:"whiteline_widget"},z=q?function(){return null}:(0,s.memo)((function(e){var t,n,r,c=e.onlyIcon,u=e.className,v=(0,h.C)({name:"WidgetHeader",mediators:["marusia-manager"]})[0].marusiaGetParams,N=Q(),y=N.leftIcon,T=N.title,k=N.rightIcon,W=N.analyticContent,O=(0,s.useRef)(),D=(0,s.useRef)(),C=(0,p.l)(!1),G=C[0],b=C[1],A=(0,s.useState)(!1),R=A[0],S=A[1],Z=(0,s.useState)((function(){if(E.W.some((function(e){return e.widget===F})))return F;else return E.W[0].widget})),H=Z[0],M=Z[1];return(0,s.useEffect)((function(){if(v&&a.MARUSIA_IN_WIDGET)S(!0),M("widget-marusia")}),[v]),(0,s.useEffect)((function(){var e,t;e=W,t=f.GE[F],B().send("show_widget",{p:"whiteline",dwh:{content:e,item:t}})}),[W]),(0,s.useLayoutEffect)((function(){if(!c&&T)b(O.current.clientWidth<D.current.clientWidth)})),m().createElement(_.M.Provider,{value:x},m().createElement("div",{title:G||c?T||void 0:void 0,onClick:function(){var e,t;e=W,t=f.GE[F],B().send("click_widget",{p:"whiteline",dwh:{content:e,item:t}}),S(!R)},className:o()(U.container,u,(0,I.d)("widget-header"),(t={},t[U.hasRightIcon]=k,t[U.onlyIcon]=c,t))},y||m().createElement("div",{className:o()(g.Z.icon,U.sceleton)}),T?m().createElement("div",{className:o()(U.titleWrapper,(n={},n[U.mask]=G,n)),ref:O},m().createElement("div",{className:U.title,ref:D},T)):m().createElement("div",{className:o()(U.titleWrapper,U.sceleton)}),k,m().createElement("div",{className:U.iconWrapper},m().createElement(i.Icon,{icon:l.WIDGET_HEADER_ICON}))),(0,d.createPortal)(m().createElement("div",{className:o()(U.tooltip,(r={},r[U.open]=R,r))},m().createElement(w.y,{open:R,setOpen:S,widget:H,setWidget:M,showList:!0})),document.body))})),J=z}}]);