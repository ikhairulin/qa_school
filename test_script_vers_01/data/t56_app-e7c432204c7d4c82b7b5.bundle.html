/*! For license information please see app-e7c432204c7d4c82b7b5.bundle.js.LICENSE */
require(["@mail/vkui","@mail/vkui/2kit","@mail/xray","mrg-xray","react","react-dom"],(function(e,t,n,r,a,i){return function(){var o,s,l,c,d,u,f={95037:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:choose>
		<fn:when test="attrs['step'] === 2">
			<b:react-async
				component="AdFeedback2step"
				small="{attrs['right-column'] <= 160}"
				indented="{attrs['indented']}"
				onNotInterestingClick="{_this.onNotInterestingClick}"
				onAlreadyPurchasedClick="{_this.onAlreadyPurchasedClick}"
				onOtherClick="{_this.onOtherClick}"
				onCancelClick="{_this.onCancelClick}"
			/>
		</fn:when>
		<fn:otherwise>
			<b:react-async
				component="AdFeedback"
				isFirstVersion="{_this.isFirstVersion()}"
				disabled="{attrs['disabled']}"
				small="{attrs['right-column'] <= 160}"
				indented="{attrs['indented']}"
				title="{_this.getTextData().title}"
				negativeButtonText="{_this.getTextData().negativeButtonText}"
				positiveButtonText="{_this.getTextData().positiveButtonText}"
				unknownButtonText="{_this.getTextData().unknownButtonText}"
				onPositiveClick="{_this.onActionPositiveClick}"
				onNegativeClick="{_this.onActionNegativeClick}"
				onUnknownClick="{_this.onActionUnknownClick}"
			/>
		</fn:otherwise>
	</fn:choose>
</div>
`,"./app/ui-block/ad-feedback/ad-feedback.html")}.apply(t,r))||(e.exports=a)},12028:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="native-scroll" test="attrs['native-scroll']"/>
	<bem:mod name="css-scroll" test="attrs['css-scroll']"/>
	<bem:mod name="indented" test="attrs['indented']"/>
	<bem:mod name="indented-new-letter-list" test="attrs['indented']"/>
	<bem:mod name="ad-feedback" test="attrs['ad-feedback-target']"/>

	<div bem:elem="noads-button-container">
		<b:noads-button
			fn:if="attrs['ads-off-target']"
		/>
	</div>
	<b:ad-feedback
		fn:if="attrs['ad-feedback-target']"
		qa:id="right-column-feedback"
		use:mediator="layout-manager"
		indented="{attrs['indented']}"
	/>
	<b:slot qa:id="right-column-adv" use:mediator="layout-manager advert-manager" />
</div>
`,"./app/ui-block/advert-column/advert-column.html")}.apply(t,r))||(e.exports=a)},1690:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
</div>
`,"./app/ui-block/application-attachment-editor/application-attachment-editor.html")}.apply(t,r))||(e.exports=a)},10073:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- FMAIL-17519 Новый тулбар для кросспроектной навигации -->
	<fn:var name="useNewToolbar" value="{_this.useNewToolbar()}" />
	<fn:var name="useTopLineAdv" value="{_this.useTopLineAdv()}" />
	<bem:mod name="pony-mode" test="attrs.ponymode"/>

	<!-- Отдельный сайдбар и хедер для мобильного вебвью FMAIL-14049 -->
	<fn:var name="webviewMobileMode" value="{_this.isWebviewMobileMode()}" />
	<bem:mod name="webview-mobile" test="webviewMobileMode"/>

	<div bem:elem="overlay" promo:id="{_this.usePromoNewToolbar() ? 'new-toolbar' : ''}">
		<div bem:elem="wrap">

			<!-- Флаг, что письмо не найдено -->
			<fn:var name="letterNotFound" value="{attrs.letter && attrs.letter.isNew() && attrs.letter.is('NoMsg')}" />
			<!-- То сути означает, включен ли новый список писем -->
			<fn:var name="isThreadRounded" value="{_this.isThreadRounded()}" />

			<!-- DON'T REMOVE: <b:layer-window /> -->
			<fn:if test="webviewMobileMode">
				<b:webview-mobile-header
						use:mediator="letters-selection letters-actions layout-manager compose-manager search-manager pony-mode translator-manager filter-manager user-info themes-manager mobile-sidebar-manager vk-overlay"
						model="{attrs.model}"
						folder="{attrs.model.folder}"
						letter="{attrs.model.letter}"
						route="{attrs.route}"
						store="{attrs.store}"
						folderActive="{attrs.route.is('#search #search-letter') ? undefined : attrs.model.folder.id}"
						models="{attrs.model.folders}"
						router="{attrs.router}"
						letterNotFound="{letterNotFound}"
				/>
				<b:mobile-sidebar
						use:mediator="settings-manager mobile-sidebar-manager"
						folder-active="{attrs.route.is('#search #search-letter') ? undefined : attrs.model.folder.id}"
						models="{attrs.model.folders}"
						router="{attrs.router}"
						store="{attrs.store}"
				/>
			</fn:if>

			<fn:if test="!webviewMobileMode">
				<!-- Синий тулбар -->
				<b:portal-menu
						fn:if="!useNewToolbar"
						use:mediator:byname="letters-selection letters-actions layout-manager compose-manager pony-mode filter-manager user-info"
						model="{attrs.model}"
						store="{attrs.store}"

						letter="{attrs.model.letter}"
						folder="{attrs.model.folder}"
						folders="{attrs.model.folders}"
						models="{attrs.model.letters}"
						letterNeighbours="{attrs.model.letterNeighbours}"

						route="{attrs.route}"
						showBackToParentFolder="{attrs.showBackToParentFolder}"
				/>
				<!-- Только поиск от ex. cиниго тулбара -->
				<b:react-async
					fn:if="useNewToolbar && _this.useReactSearchPanel()"
					customNode="{_this.getSearchPlaceholder()}"
					component="SearchPanel"
					componentClass="{this.lazySearchPanel()}"
					blockRadarId="srch"
					useErrorBoundary
					useMediators="{['search-manager','layout-manager','themes-manager','letters-selection', 'pony-mode']}"
					store="{attrs.store}"
					remit:click="search"
				/>
			</fn:if>

			<div bem:elem="layout" bem:mod="main">
				<b:layout
						vertical-fit
						resizable="{attrs['user-resize']}"
						sidebar-resizable="{attrs['user-resize-3pane']}"
						bordered="{_this.showLayoutBorders()}"
						letter="{attrs.model.letter}"
						use:mediator="layout-manager letters-selection thread-scroller search-manager todo-manager"
						id="main"
						group="main"
						qa:id="main"
						store="{attrs.store}"
						ponymode="{attrs.uiLayout.ponyMode}"
						isDragIconShown="{_this.isDragIconShown()}"
				>
					<fn:match name="left-column" args="layout">
						<fn:var name="isSearch" value="{attrs.route.is('#search #search-letter')}"/>
						<!-- Левая колонка -->
						<fn:if test="attrs.route.is('#letters #read-letter #search #search-letter')">
							<b:sidebar-folders
									is-search="{isSearch}"
									use:mediator="themes-manager pony-mode compose-manager layout-manager user-info search-manager"
									router="{attrs.router}"
									folder-active="{attrs.route.is('#search #search-letter') ? undefined : attrs.model.folder.id}"
									models="{attrs.model.folders}"
									store="{attrs.store}"
									billsCount="{attrs.model.billsCount}"
							/>
						</fn:if>
					</fn:match>

					<fn:match name="main-frame-sidebar" args="layout">
						<fn:var name="touch" value="{layout.isLessThen('xs')}"/>
						<fn:var
								name="compact"
								value="{!layout['left-column'] || layout.type === '3pane' || touch}"
						/>
						<fn:var name="isSearch" value="{attrs.route.is('#search #search-letter')}"/>

						<b:letter-list-item-adv
								fn:if="useTopLineAdv"
								router="{attrs.router}"
								compact="{compact}"
								rounded="{isThreadRounded}"
								topline="{true}"
								folder="{attrs.model.folder}"
								key="{_this.getKey(model)}"
								ponymode="{attrs.uiLayout.ponyMode}"
								uid="{model.id}"
								no-delimeter="{true}"
								use:mediator="letter-list-adv-optimizer advert-manager"
						/>

						<b:react-async
							fn:if="useNewToolbar && !webviewMobileMode"
							class-name="only-new-toolbar new-menu"

							hasLetters="{attrs.uiLetters.length}"

							component="ListLetterHeaderActions"
							componentClass="{_this.lazyListLetterHeaderActions()}"
							advTopLine="{useTopLineAdv}"
							blockRadarId="llha"
							useErrorBoundary
							route="{attrs.route}"
							model="{attrs.model}"
							store="{attrs.store}"

							letter="{attrs.model.letter}"
							folder="{attrs.model.folder}"
							folders="{attrs.model.folders}"
							models="{attrs.model.letters}"
							letterNeighbours="{attrs.model.letterNeighbours}"
						/>
						<!-- Список писем -->
						<b:letter-list
								qa:id="letter-list-{isSearch ? 'search' : attrs.model.folder.id}"
								router="{attrs.router}"
								route="{attrs.route}"
								metathreads="{attrs.metathreads}"
								models="{attrs.uiLetters}"
								status="{attrs.status}"
								folders="{attrs.model.folders}"
								folder="{attrs.model.folder}"
								layout="{layout}"
								hidden-payment-dies="{attrs.hiddenPaymentDies}"
								compact="{compact}"
								touch="{touch}"
								unsubscribeList="{attrs.unsubscribeList}"
								showBackToParentFolder="{attrs.showBackToParentFolder}"
								advTopLine="{useTopLineAdv}"
								use:mediator="letters-loader letters-navigation pony-mode"
						/>
						<b:renovator
							use:mediator="routes-manager layout-manager"
						/>
					</fn:match>

					<fn:match name="main-frame-content" args="layout">
						<fn:var name="touch" value="{layout.isLessThen('xs')}"/>
						<fn:var
								name="compact"
								value="{!layout['left-column'] || layout.type === '3pane' || touch}"
						/>
						<!-- Письма выбраны в 3pane -->
						<fn:var
								name="previewSelectedLetters"
								value="{!letterNotFound && _this.checkShowLetterPreview3Pane(layout.selectMode)}"
						/>
						<div bem:elem="letter-content" qa:id="letter-content">
							<bem:mod name="3pane-preview" test="previewSelectedLetters"/>
							<b:react-async
								fn:if="useNewToolbar && !webviewMobileMode"

								class-name="only-new-toolbar new-menu content-header"

								component="LetterHeaderActions"
								componentClass="{_this.lazyLetterHeaderActions()}"
								blockRadarId="lha"
								useErrorBoundary
								route="{attrs.route}"
								model="{attrs.model}"
								store="{attrs.store}"

								letter="{attrs.model.letter}"
								folder="{attrs.model.folder}"
								folders="{attrs.model.folders}"
								models="{attrs.model.letters}"
								letterNeighbours="{attrs.model.letterNeighbours}"
								letterNotFound="{letterNotFound}"
							/>
							<b:letter-list-item-adv
								fn:if="_this.isAdvEnable() && !compact"
								router="{attrs.router}"
								compact="{compact}"
								key="{_this.getKey(model)}"
								ponymode="{attrs.uiLayout.ponyMode}"
								uid="{model.id}"
								use:mediator="letter-list-adv-optimizer advert-manager"
							/>
							<fn:choose>
								<!-- Письма выбраны в 3pane -->
								<fn:when test="previewSelectedLetters">
									<b:panel-with-selected
										use:mediator="letters-selection themes-manager"
										route="{attrs.route}"
										folder="{attrs.model.folder}"
									>
										<fn:match name="empty">
											<fn:if test="!(attrs.route.is('#search-letter #search') && !attrs.model.search.length) && attrs.letters.length">
												<b:octopus
														model="{attrs.model}"
														router="{attrs.router}"
														type="no-select"
														use:mediator="layout-manager letters-actions folders-navigation filter-manager themes-manager pony-mode"
												/>
											</fn:if>
										</fn:match>
									</b:panel-with-selected>
								</fn:when>

								<fn:otherwise>
									<b:scrollable
											name="letter-content"
											emit-onbottom="100"
											substrated="{!isThreadRounded}"
											bright="{!isThreadRounded}"
											use:mediator="thread-scroller advert-manager"
											left-gap="{isThreadRounded}"
											background-transparent="{isThreadRounded}"
											content
									>
										<!-- TODO: нужен рефактиринг условий, избавиться от сложный условий -->
										<!-- Письмо не найдено -->
										<fn:if test="letterNotFound">
											<fn:var name="touch" value="{layout.isLessThen('xs')}"/>
											<fn:var
													name="compact"
													value="{!layout['left-column'] || layout.type === '3pane' || touch}"
											/>

											<fn:if test="(layout.type === '3pane' && !layout.selectMod) && attrs.route.is('#read-letter #search-letter')">
												<b:panel-with-selected
													use:mediator="letters-selection"
													route="{attrs.route}"
													folder="{attrs.model.folder}"
												>
													<fn:match name="empty">
														<b:octopus
																type="no-letter"
																router="{attrs.router}"
																use:mediator="layout-manager themes-manager pony-mode"
														/>
													</fn:match>
												</b:panel-with-selected>
											</fn:if>
											<fn:if test="((layout.type === '2pane' && !layout.selectMod) && attrs.route.is('#read-letter #search-letter'))">
												<b:letter-list
														qa:id="letter-list-{attrs.model.folder.id}"
														layout="{layout}"
														compact="{false}"
														touch="{touch}"
														models="{attrs.uiLetters}"
														folders="{attrs.model.folders}"
														folder="{attrs.model.folder}"
														letter-not-found="{letterNotFound}"
														router="{attrs.router}"
														route="{attrs.route}"
														metathreads="{attrs.metathreads}"
														unsubscribeList="{attrs.unsubscribeList}"
														showBackToParentFolder="{attrs.showBackToParentFolder}"
														use:mediator="letters-loader letters-navigation pony-mode"
												/>
											</fn:if>

										</fn:if>

										<fn:if test="!letterNotFound">
											<fn:var
													name="compact"
													value="{!layout['left-column'] || layout.type === '3pane'}"
											/>

											<fn:if test="!attrs.route.is('#search-letter')">
												<fn:if test="(layout.type !== '3pane' || !layout.selectMode ) && attrs.route.is('#read-letter')">
													<b:thread
														fn:if="!_this.useNewThread()"
														use:mediator="letters-actions thread-manager thread-scroller compose-manager layout-manager pony-mode themes-manager folders-actions"
														rounded="{isThreadRounded}"
														route="{attrs.router['#read-letter']}"
														router="{attrs.router}"
														model="{attrs.letter}"
														folders="{attrs.model.folders}"
														compact="{compact}"
														expand-letter-id="{attrs.request.params.message}"
														isDragIconShown="{layout.type === '3pane' && _this.isDragIconShown()}"
													/>
													<b:react-async
														fn:if="_this.useNewThread()"
														component="Thread"
														useMediators="{['letters-actions', 'thread-manager', 'thread-scroller', 'compose-manager', 'layout-manager', 'pony-mode', 'themes-manager', 'folders-actions']}"
														rounded="{isThreadRounded}"
														route="{attrs.router['#read-letter']}"
														router="{attrs.router}"
														model="{attrs.letter}"
														folders="{attrs.model.folders}"
														compact="{compact}"
														expand-letter-id="{attrs.request.params.message}"
														isDragIconShown="{layout.type === '3pane' && _this.isDragIconShown()}"
													/>
												</fn:if>
											</fn:if>

											<fn:if test="attrs.route.is('#search-letter')">
												<fn:if test="(layout.type !== '3pane' || !layout.selectMode ) && attrs.route.is('#search-letter')">
													<b:thread
														fn:if="!_this.useNewThread()"
														use:mediator="letters-actions search-manager thread-manager thread-scroller compose-manager layout-manager pony-mode themes-manager"
														rounded="{isThreadRounded}"
														route="{attrs.router['#search-letter']}"
														router="{attrs.router}"
														model="{attrs.letter}"
														folders="{attrs.model.folders}"
														compact="{compact}"
														autoread
														expand-letter-id="{attrs.request.params.id}"
													/>
													<b:react-async
														fn:if="_this.useNewThread()"
														component="Thread"
														useMediators="{['letters-actions', 'thread-manager', 'thread-scroller', 'compose-manager', 'layout-manager', 'pony-mode', 'themes-manager', 'folders-actions']}"
														rounded="{isThreadRounded}"
														route="{attrs.router['#search-letter']}"
														router="{attrs.router}"
														model="{attrs.letter}"
														folders="{attrs.model.folders}"
														compact="{compact}"
														autoread
														expand-letter-id="{attrs.request.params.id}"
													/>
												</fn:if>
											</fn:if>
										</fn:if>
									</b:scrollable>
								</fn:otherwise>
							</fn:choose>
						</div>
					</fn:match>

					<fn:match name="right-column" args="layout">
						<fn:var name="isSearch" value="{attrs.route.is('#search') || attrs.route.is('#search-letter') && (layout.type === '3pane')}"/>
						<fn:var name="isAdvertScroll" value="{layout['is-advert-scroll']}"/>

						<div bem:elem="overflow-container" fn:if="!layout['hide-ads']">
							<fn:choose>
								<fn:when test="isAdvertScroll">
									<b:advert-column
										route="{attrs.route}"
										router="{attrs.router}"
										use:mediator="advert-manager"
									/>
								</fn:when>

								<fn:otherwise>
									<b:slot qa:id="right-column-adv" use:mediator="layout-manager"/>
								</fn:otherwise>
							</fn:choose>
						</div>

						<b:react-async
							component="WidgetColumn"
							componentClass="{_this.lazyWidgetColumn()}"
							qa:id="right-column-todo"
							blockRadarId="wid-c"
							useErrorBoundary
							class-name="fill-parent"
							useMediators="{['layout-manager', 'themes-manager', 'todo-manager']}"
						/>
					</fn:match>

					<fn:match name="dimmer" args="layout">
						<fn:if test="layout.dimmer">
							<b:dimmer />
						</fn:if>
					</fn:match>

				</b:layout>
			</div>

			<fn:if test="webviewMobileMode && !attrs['disable-footer-app-toolbar'] && !attrs.route.is('#read-letter #search #search-letter')">
				<b:react-async
					component="WebviewMobileFooter"
					folderActive="{attrs.route.is('#search #search-letter') ? undefined : attrs.model.folder.id}"
					models="{attrs.model.folders}"
					router="{attrs.router}"
				/>
			</fn:if>
			<!-- Контейнер для порталов реакта, для оверлея тултипа -->
			<!-- Тут будем рисовать всякие оверлеи, например использовать как портал для react элементов -->
			<!-- Используется для тултипа, который в дропдауне при нажатии на скрепку, аттачи к письму -->
			<div bem:elem="portal-overlay" id="portal-overlay"></div>
		</div>
	</div>

	<b:shortcut />
	<b:counters/>
	<!-- Скрытый фрейм для загрузки аттачей -->
	<!-- Один на страницу, у него всегда name=download-frame -->
	<b:download-frame/>

	<!-- Прогрессбар -->
	<span bem:elem="progress">
		<b:progress
			use:mediator="progress-bar-manager"
			min="0"
			max="100"
		/>
	</span>

	<!-- Загрузчик vk messenger (покажет, если нужно) -->
	<b:react-async
		component="VkMessengerProvider"
		componentClass="{_this.lazyVkMessengerProvider()}"
	/>

	<b:react-async
		component="VKUIOverlay"
		componentClass="{_this.lazyVKUIOverlay()}"
	/>
</div>
`,"./app/ui-block/application-mail/application-mail.html")}.apply(t,r))||(e.exports=a)},72516:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<div ref="attachment-viewer" qa:id="viewer">
		<!-- renderTo placeholder -->
	</div>
	<div bem:elem="notify-wrapper">
		<b:notify-stack ref="notify-stack" id="notify-stack" fixed/>
	</div>
	<b:counters/>
</div>
`,"./app/ui-block/application-viewer/application-viewer.html")}.apply(t,r))||(e.exports=a)},99720:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="application" style="{_this.getStyle()}">
	<bem:mod name="new-toolbar" test="_this.useNewToolbar()"/>
	<bem:mod name="webview" test="_this.isWebView()"/>
	<bem:mod name="hide-headline" test="_this.isHideHeadline()"/>
	<fn:var name="miniapp" value="{attrs.isVKMiniApp && attrs.route.is('#vk-mini-app')}"/>

	<fn:choose>
		<fn:when test="attrs.route.is('#error')">
			<div class="error">
				<b:react-async
					component="Error"
					errorText="{attrs.request.query.error}"
					actionHref="{attrs.request.query.href}"
					actionText="{attrs.request.query.action}"
					router="attrs.router"
				/>
			</div>
		</fn:when>

		<fn:when test="miniapp">
			<b:react-async
				component="VKMiniApp"
				router="attrs.router"
			/>
		</fn:when>

		<fn:when test="attrs.route.is('#attachment')">
			<b:application-viewer/>
		</fn:when>

		<fn:when test="attrs.route.is('#attachment-temporary')">
			<b:application-viewer
				attachment-temporary
			/>
		</fn:when>

		<fn:when test="attrs.route.is('#attachment-editor')">
			<b:application-attachment-editor/>
		</fn:when>

		<fn:otherwise>
			<b:application-mail
				use:mediator:byname="layout-manager folders-navigation pony-mode"
			/>
		</fn:otherwise>
	</fn:choose>

	<b:settings-dock
		fn:if="!miniapp && !attrs.route.is('#error')"
		use:mediator:byname="settings-manager layout-manager pony-mode themes-manager folders-actions todo-manager letters-actions advert-manager"
		qa:id="settings-dock"
	/>

	<b:notify-stack
		ref="notify-stack"
		id="notify-stack"
		fixed
	/>
</div>
`,"./app/ui-block/application/application.html")}.apply(t,r))||(e.exports=a)},28652:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="attach-list">
	<fn:var name="attachCount" value="{attrs.models.length}" />
	<fn:var name="isSticky" value="{_this.isStickyEnabled()}"/>
	<fn:var name="attachSafetyStatusLocator" value="attach-safety-status:{attrs['safety-status']}"/>

	<bem:mod name="hidden" test="!attrs.showAttachList"/>
	<bem:mod name="mobile" test="attrs.mobile"/>
	<bem:mod name="expanded" test="attrs.expanded && !attrs.mobile || attrs['preview-mode']"/>
	<bem:mod name="preview-mode" test="attrs['preview-mode']"/>

	<div>
		<div bem:elem="container"  ref="container">
			<div bem:elem="thumbs" ref="thumbs" qa:id="thumbs">
				<fn:for data="attrs.models" as="attachment" key="idx">
					<b:attach-thumb
						key="{attachment.id}"
						model="{attachment}"
						full="{attachCount <= _this.fullLimit()}"
						responsive="{attrs.mobile && attachCount === 1}"
						save-to-cloud="{attrs['save-to-cloud'] && !attrs['disable-save-to-cloud'] && !attrs.mobile}"
						dark-mode="{attrs['dark-mode']}"
						remit:download="thumb-download"
						remit:cloud="thumb-cloud"
						remit:open="thumb-open"
						remit:thumb-item-rendered="thumb-rendered"
						remit:toggle-ics="toggle-ics"
						use:mediator="attachments-manager"
					/>
				</fn:for>
			</div>

			<div
				fn:if="attrs.showmore && !attrs.mobile && !attrs.expanded && !attrs['preview-mode']"
				bem:elem="more"
				remit:click="expand"
			>
				<div
					bem:elem="expand"
					bem:mod="gradient"
				>
				</div>
				<div bem:elem="expand-container">
					<div
						bem:elem="expand-center"
						qa:id="more"
					>
						<div bem:elem="attach-icon"><b:ico name="attach"/></div>
						<div bem:elem="all">{i18n(\'все\')}</div>
						<div bem:elem="attach-count" qa:id="attach-count">{attachCount}</div>
					</div>
				</div>
			</div>
		</div>

		<div bem:elem="controls" qa:id="attach-list-controls">
			<div bem:elem="controls-element">
				<bem:mod
					name="type"
					value="info"
					test="attrs.showAttachSafetyStatus && (attrs['attach-safety-status-position'] === 'start')"
				/>
				<span bem:elem="controls-element-count" qa:id="attach-count">
					<fn:value mod="fileCount">attachCount</fn:value>
				</span>

				<div
					bem:elem="controls-element-safety-status"
					qa:id="{attachSafetyStatusLocator}"
					fn:if="attrs.showAttachSafetyStatus && (attrs['attach-safety-status-position'] === 'start')"
					remit:click="attaches-status-click"
					remit:mouseenter="attaches-status-hover"
				>
					<!-- span обёрнут в div, чтобы span перестал быть flex-item-ом.
					Тогда ему можно применить правильное вертикальное выравнивание -->
					<div>
						<span bem:elem="controls-element-spacer">&bullet;&ThinSpace;</span>
					</div>
					<b:react-async
						component="AttachSafetyStatus"
						safetyStatus="{attrs['safety-status']}"
						hasBackground="{attrs['has-attach-safety-status-background']}"
						attachCount="{attachCount}"
						mobile="{attrs.mobile}"
					/>
				</div>
			</div>

			<div
				bem:elem="controls-element"
				fn:if="attrs['download-link'] && !(attachCount > 1 && attrs['disable-save-in-archive'])">
				<a
					bem:elem="controls-element-download"
					data-name="{attachCount === 1 ? 'download-link' : null}"
					href="{attrs['download-link']}"
					qa:id="download-link"
					remit:click="download-link">{attachCount === 1 ? i18n(\'Скачать\') : i18n(\'Скачать одним архивом\')}</a>
				<span
					bem:elem="controls-element-size"
					fn:if="attrs['total-size']">
					(<fn:value mod="fileSize">attrs['total-size']</fn:value>)
				</span>
			</div>

			<div bem:elem="controls-element" fn:if="!attrs['disable-save-to-cloud'] && _this.hasSaveToCloudAll()">
				<span
						bem:elem="controls-element-cloud"
						remit:click="attach-list-cloud"
						qa:id="save-to-cloud-link"
						event:details="attrs.models">
					<fn:if test="attrs.mobile">{i18n(\'В Облако\')}</fn:if>
					<fn:if test="!attrs.mobile">{i18n(\'Сохранить в Облако\')}</fn:if>
				</span>
			</div>

			<div bem:elem="controls-element">
				<div
					bem:elem="controls-element-safety-status"
					qa:id="{attachSafetyStatusLocator}"
					fn:if="attrs.showAttachSafetyStatus && (attrs['attach-safety-status-position'] === 'end')"
					remit:click="attaches-status-click"
					remit:mouseenter="attaches-status-hover"
				>
					<b:react-async
						component="AttachSafetyStatus"
						safetyStatus="{attrs['safety-status']}"
						hasBackground="{attrs['has-attach-safety-status-background']}"
						attachCount="{attachCount}"
						mobile="{attrs.mobile}"
					/>
				</div>
			</div>

		</div>
	</div>

	<div>
		<div
			fn:if="!attrs.mobile && attrs.expanded && !attrs['preview-mode']"
			bem:elem="less"
			remit:click="collapse"
			qa:id="less"
		>
			<bem:mod name="sticky" test="isSticky"/>
			<div bem:elem="collapse-container">
				<div bem:elem="collapse-center">
					<b:ico name="arrow-up"/>
				</div>
			</div>
		</div>
	</div>
</div>
`,"./app/ui-block/attach-list/attach-list.html")}.apply(t,r))||(e.exports=a)},53526:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="{_this.getQaId()}">
	<fn:var name="hasNoTopbar" value="{_this.hasNoTopbar()}"/>
	<fn:var name="canSaveToCloud" value="{_this.canSaveToCloud()}"/>
	<fn:var name="isSquare" value="{!attrs.responsive && !attrs.full && hasNoTopbar}"/>
	<fn:var name="isInfected" value="{_this.isInfected()}" />
	<fn:var name="attachWarningTooltip" value="{attrs['attach-warning-tooltip'] && isInfected}" />

	<fn:attr name="title" value="{attrs.mainTitle}"/>

	<bem:mod name="full" test="attrs.full"/>
	<bem:mod name="responsive" test="attrs.responsive"/>

	<bem:mod name="top-free" test="hasNoTopbar"/>
	<bem:mod name="normal" test="!attrs.responsive && !attrs.full && !hasNoTopbar"/>
	<bem:mod name="square" test="isSquare"/>
	<bem:mod name="hide-link" test="isSquare"/>

	<div bem:elem="thumb-elem" qa:id="{_this.getParams().filename.name}">
		<b:react-async
			component="AttachThumb"
			title="{_this.getParams().filename.name}"
			preview="{_this.getThumbImage()}"
			fullPreview="{_this.isImage() && !attachWarningTooltip}"
			downloadBtnTitle="{_this.getTitles().downloadTitle}"
			uploadBtnTitle="{_this.getTitles().uploadTitle}"
			downloadBtnTooltip="{_this.getTitles().downloadTooltip}"
			uploadBtnTooltip="{_this.getTitles().uploadTooltip}"
			onDownloadClick="{_this.onDownload}"
			disableCloudUpload="{!attrs['save-to-cloud'] || !canSaveToCloud}"
			onCloudUploadClick="{_this.onCloudUpload}"
			onOpenClick="{_this.onOpen}"
			testId="thumb"
			iconType="{_this.getIcon()}"
			isLink="{_this.isBigAttach()}"
			linkTitle="{_this.getTitles().mainTitle}"
			darkMode="{attrs['dark-mode']}"
			link="{_this.getDownloadUrl()}"
			attachWarningTooltip="{attachWarningTooltip}"
		/>
	</div>

</div>
`,"./app/ui-block/attach-thumb/attach-thumb.html")}.apply(t,r))||(e.exports=a)},37095:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="selected:{!!attrs.selected}">
	<bem:mod name="rounded"/>
	<bem:mod name="selectable" test="attrs.selectable"/>
	<bem:mod name="selected" test="attrs.selected"/>
	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="size_{attrs.size}" test="attrs.size"/>
	<bem:mod name="ico" test="!attrs.src" />
	<bem:mod name="anonymous" test="attrs.anonymous" />

	<span bem:elem="img">
		<bem:mod name="ico" test="!attrs.src" />
		<bem:mod name="with-border" test="attrs['with-border']" />
		<fn:if test="attrs.src">
			<fn:attr name="style" value="{_this.getImage()} {_this.getBgColor()} {_this.getIcoColor()}"/>
		</fn:if>
		<fn:if test="!attrs.src">
			<fn:attr name="style" value="{_this.getBgColor()} {_this.getIcoColor()}" />
			<fn:if test="attrs.ico">
				<b:ico name="{attrs.ico}" size="{attrs['ico-size']}" />
			</fn:if>
		</fn:if>
	</span>
</div>
`,"./app/ui-block/avatar/avatar.html")}.apply(t,r))||(e.exports=a)},79598:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div title="{attrs.title}">
	<fn:var name="short" value="{!attrs.text || attrs.short}"/>

	<bem:mod name="size" value="{attrs.size || 'm'}"/>
	<bem:mod name="strong" test="attrs.strong"/>
	<bem:mod name="ico" test="attrs.ico"/>

	<bem:mod name="secondary" test="attrs.secondary"/>
	<bem:mod name="short" test="!attrs.text || attrs.short"/>
	<bem:mod name="square" test="attrs.square === void 0 ? short : short && attrs.square"/>
	<bem:mod name="transparent" test="attrs.transparent"/>

	<span bem:elem="ico" fn:if="attrs.ico">
		<b:ico name="{attrs.ico}"/>
	</span>
	<fn:if test="attrs.text && !attrs.short">
		<span bem:elem="text" qa:id="badge-text">{attrs.text}</span>
	</fn:if>
</div>
`,"./app/ui-block/badge/badge.html")}.apply(t,r))||(e.exports=a)},23132:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	remit:click="click-radar"
>
	<!-- Аттрибуты -->
	<fn:attr
			name="tabindex"
			value="{attrs['tab-index']}"
			test="attrs['tab-index'] !== void 0"
	/>

	<!-- Модификаторы -->
	<bem:mod name="pressed" test="attrs.pressed"/>
	<bem:mod name="disabled" test="attrs.disabled"/>
	<bem:mod name="pony-mode" test="attrs.ponymode"/>

	<bem:mod name="type-{attrs.type}"/>

	<!-- Текст контрола -->
	<div bem:elem="text">{attrs.text}</div>

	<!-- Иконка -->
	<div bem:elem="icon" fn:if="attrs.icon">
		<b:ico name="{attrs.icon}" size="s"/>
	</div>
</div>
`,"./app/ui-block/button-link/button-link.html")}.apply(t,r))||(e.exports=a)},56048:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	qa:id="button:{attrs.ico || attrs.title || attrs.text}"
	qa:state="{attrs.pressed ? 'pressed' : (attrs.disabled ? 'disabled' : 'normal')}"
	promo:id="{attrs.promoId}"
	data-highlighted-class="button2_highlighted"
>
	<fn:var name="title" value="{_this.getAvailableTitle()}"/>
	<fn:attr name="title" value="{title}" test="!!title"/>

	<fn:attr name="data-title-shortcut" value="{attrs['title-shortcut']}" test="!attrs.disabled && attrs['title-shortcut']"/>

	<fn:var name="size" value="{attrs.size || 'm'}"/>

	<bem:mod name="has-ico" test="attrs.ico" />
	<bem:mod name="has-ico-hover" test="attrs['ico-hover']" />
	<bem:mod name="has-ico-{attrs.icoSize}" test="attrs.ico" />
	<bem:mod name="{String(attrs.ico).replace(/:/, '_')}" test="attrs.ico" />
	<bem:mod name="rotate-ico" test="attrs['rotate-ico']" />

	<!-- Тип кнопки -->
	<bem:mod name="base" test="!attrs.badge && !attrs.pure && !attrs.clean" />
	<bem:mod name="badge" test="attrs.badge" />
	<bem:mod name="pure" test="attrs.pure" />
	<bem:mod name="clean" test="attrs.clean" />
	<bem:mod name="invert" test="attrs.invert" />

	<!-- Подвид типа кнопки -->
	<bem:mod name="primary" test="attrs.primary" />
	<bem:mod name="primary-clean" test="attrs['primary-clean']" />
	<bem:mod name="secondary" test="attrs.secondary" />
	<bem:mod name="in-dropmenu" test="attrs.dropmenu" />
	<bem:mod name="only-explanation" test="!attrs.text && attrs.explanation" />

	<bem:mod name="always-bright" test="attrs['always-bright']" />

	<!-- Размер -->
	<bem:mod name="short" test="attrs.short || (!attrs.text && !attrs.explanation)" />
	<bem:mod name="touch" test="attrs.touch" />
	<bem:mod name="compact" test="attrs.compact" />
	<bem:mod name="small" test="attrs.small" />
	<bem:mod name="medium" test="attrs.medium" />
	<bem:mod name="shadowless" test="attrs.shadowless" />
	<bem:mod name="fill" test="attrs.fill" />

	<!-- Выравнивание -->
	<bem:mod name="ico-text-top" test="attrs['ico-text-top']" />
	<bem:mod name="ico-arrow-down" test="attrs['ico-arrow-down']" />

	<bem:mod name="nowrap" test="attrs['nowrap']" />

	<!-- Форма -->
	<bem:mod name="round" test="attrs.round" />
	<bem:mod name="square" test="attrs.square" />
	<bem:mod name="fluid" test="attrs.fluid" />
	<bem:mod name="rounded" test="attrs.rounded" />

	<!-- Шрифт -->
	<bem:mod name="font-size-pony" test="attrs['font-size-pony']" />
	<bem:mod name="text-overflow" test="attrs['text-overflow']" />

	<!-- Состояния -->
	<bem:mod name="hover-support" test="attrs['hover-support']" />
	<bem:mod name="pressed" test="attrs.pressed" />
	<bem:mod name="disabled" test="attrs.disabled" />
	<bem:mod name="highlighted" test="attrs.highlighted" />

	<bem:mod name="safari" test="attrs.safari" />

	<fn:add-class name="js-shortcut" test="!attrs.disabled && attrs.shortcut" />

	<span bem:elem="highlighter" />

	<span
			bem:elem="wrapper"
			qa:id="button:wrapper"
			remit:click="click-radar"
			remit:keydown.enter.prevent.stop="keydown:enter"
			ref="wrapper"
	>
		<bem:mod name="centered" test="attrs.centered || attrs.short" />

		<fn:attr
				name="tabindex"
				value="{attrs.disabled ? -1 : attrs['tab-index']}"
				test="attrs['tab-index'] !== void 0"
		/>

		<span bem:elem="ico" fn:if="attrs.ico" qa:id="button-icon">

			<!-- "Красный прыщик" на иконке кнопки -->
			<b:notification-badge
				fn:if="attrs['notification-badge'] && attrs.ico"
				show="{true}"
				ponymode="{attrs.compact}"
				top="-1"
				right="-2"
				pony-top="2"
				pony-right="1"
				radar-id="{attrs['notification-badge']}"
				size="{attrs['notification-badge-size']}"
				colorMode="{attrs['notification-badge-color']}"
			>
				<fn:match name="content">
					<b:ico name="{attrs.ico}" fn:if="attrs.ico"/>
				</fn:match>
			</b:notification-badge>
			<b:ico name="{attrs.ico}" size="{attrs.icoSize}" fn:if="attrs.ico && !attrs['notification-badge']"/>

			<b:ico name="{attrs['ico-hover']}" size="{size}" fn:if="attrs['ico-hover']"/>
		</span>

		<!-- Контент кнопки: текст или match -->
		<fn:choose>
			<fn:when test="__vmatches['default']">
				<fn:apply-match name="default"/>
			</fn:when>

			<fn:otherwise>
				<div
					bem:elem="txt"
					fn:if="!attrs.short && attrs.text"
					qa:id="button-text"
				>
					<bem:mod name="center" test="attrs.center" />
					{attrs.text}
				</div>
			</fn:otherwise>
		</fn:choose>

		<!-- Элемент "Пояснение" -->
		<span
			bem:elem="explanation"
			fn:if="!attrs.short && attrs.explanation"
			qa:id="button-explanation"
		>
			<bem:mod name="ellipsis"/>
			{attrs.explanation}
		</span>
	</span>
</span>
`,"./app/ui-block/button2/button2.html")}.apply(t,r))||(e.exports=a)},18156:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="{attrs['dates-metadata'] ? 'calendar:metadata:create' : 'calendar:create'}">
    <b:button2
        remit:click="calendar:create"
        event:details="{model: attrs.model, createContent:'web_email_letter_footer'}"
        radar-id="{_this._getRadarPrefix()}"
        text="{!attrs['sticky-reduce-one-text'] && _this._getCalendarButtonText()}"
		ico="calendar-month"
        base
        pure
        touch="{attrs.touch}"
        model="{attrs.model}"
        disabled="{attrs['disable-edit']}"
        centered="{attrs['sticky-reduce-one-text']}"
    />
</div>
`,"./app/ui-block/calendar-button/calendar-button.html")}.apply(t,r))||(e.exports=a)},72785:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<div ref="container"></div>
	<div bem:elem="portal" ref="portal" />
</div>
`,"./app/ui-block/category-feedback/category-feedback.html")}.apply(t,r))||(e.exports=a)},15829:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="checkbox">
	<label bem:elem="label">
		<input
			type="checkbox"
			bem:elem="input"
			remit:change="toggle"
		/>

		<fn:var name="state" value="{attrs.checked ? 'checked' : attrs.disabled ? 'disabled' : 'base'}"/>

		<div
			bem:elem="box"
			qa:id="box:{state}"
		>
			<bem:mod name="checked" test="attrs.checked"/>
			<bem:mod name="disabled" test="attrs.disabled"/>

			<b:ico name="checked"/>
		</div>
		<div
			bem:elem="text"
			fn:if="attrs.label"
		>
			{attrs.label}
		</div>
	</label>
</div>
`,"./app/ui-block/checkbox/checkbox.html")}.apply(t,r))||(e.exports=a)},75163:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a
	title="{attrs.title || attrs.text}"
	href="/compose/"
	data-title-shortcut="{attrs['title-shortcut'] || ''}"
	qa:id="button:{attrs.ico || attrs.title || attrs.text}"
>
	<bem:mod name="white" test="attrs.white"/>
	<bem:mod name="base" test="attrs.base"/>
	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="short" test="attrs.short"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="with-dropdown" test="attrs['with-dropdown']"/>
	<bem:mod name="webview" test="attrs.webview"/>

	<fn:add-class name="js-shortcut" test="attrs.shortcut" />


	<span
		bem:elem="wrapper"
		ref="wrapper"
	>
		<fn:attr
			name="tabindex"
			value="{attrs.disabled ? -1 : attrs['tab-index']}"
			test="attrs['tab-index'] !== void 0"
		/>

		<span bem:elem="ico" fn:if="attrs.short">
			<b:ico name="compose"/>
		</span>

		<span ref="text" bem:elem="txt" fn:if="!attrs.short">{i18n(\'Написать письмо\')}</span>
	</span>
</a>
`,"./app/ui-block/compose-button/compose-button.html")}.apply(t,r))||(e.exports=a)},64571:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="compose-collapsed">
	<fn:var name="messages" value="{_this.getMessages()}"/>

	<bem:mod name="multiple" test="attrs.multiple"/>
	<bem:mod name="empty" test="!attrs.items.length"/>
	<bem:mod name="active-mobile" test="attrs['active-mobile']"/>
	<bem:mod name="mobile" test="_this.isWebviewMobileMode()"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="above-paginator" test="attrs['above-paginator']"/>

	<fn:for data="attrs.items" as="item" key="formKey">
		<div bem:elem="item"
			 key="compose-collapsed-{item.formData.uid}"
			 remit:click="window-expand"
			 event:details="item.formData"
			 qa:id="compose-collapsed-item:{item.formData.uid}">

			<fn:var name="isLast" value="{formKey === attrs.items.length - 1}"/>
			<div bem:elem="content">
				<span
					bem:elem="label"
					promo:id="{isLast ? 'compose-collapsed-label' : ''}"
				>
					<span promo:id="{isLast ? 'compose-collapsed-icon' : ''}">
						<!-- in_viewport не работает на svg, поэтому нужен враппер для плашки -->
						<b:ico
							name="compose"
							size="s"
						/>
					</span>

					<span bem:elem="title" qa:id="subject">
						<fn:value>
							attrs.multiple ?
								i18n(\'Черновики\') :
								(item.formData.get('subject') || messages.draft(Object.fromEntries([['draftId', formKey + 1]])))
						</fn:value>
					</span>
				</span>

				<div bem:elem="ico-close">
					<b:button2
						ico="actions:close"
						size="s"
						secondary
						short
						remit:click="collapsed-item-close"
						event:details="item.formData"
						qa:id="close"
						centered
					/>
				</div>
			</div>
		</div>
	</fn:for>
</div>
`,"./app/ui-block/compose-collapsed/compose-collapsed.html")}.apply(t,r))||(e.exports=a)},11403:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="expanded" test="attrs.expanded"/>
	<bem:mod name="compact" test="attrs.compact"/>

	<b:dropdown
		qa:id="compose-dropdown"
		remit:dropdown-change-state="dropdown:toggle"
		radar-id="cdd"
		ico="navigation:drop_down"
		clean
		rotate-ico
		always-bright
		ponymode="{attrs.compact}"
		touch="{attrs.touch}"
	>
		<fn:match name="items">
			<b:list>
				<b:list-item
					fn:if="!attrs['disabled-tomyself']"
					remit:click="compose:tomyself"
					radar-id="tomyself"
					qa:id="tomyself"
					pure
				>
					<b:avatar
						ico="categories:self_mail"
						ico-size="s"
						size="s"
						bg-color="#00bd93"
						ico-color="#fff"
						with-border="{false}"
					/>
					<span bem:elem="text">{i18n(\'Написать себе\')}</span>
				</b:list-item>
				<b:list-item
					fn:if="_this.needShowButton('note')"
					remit:click="compose:opennote"
					radar-id="note_fake"
					pure
				>
					<b:avatar
						ico="categories:drafts_s"
						ico-size="s"
						size="s"
						bg-color="#CCA7FF"
						ico-color="#fff"
						with-border="{false}"
					/>
					<span bem:elem="text">{i18n(\'Создать заметку\')}</span>
				</b:list-item>
				<b:list-item
					fn:if="_this.needShowButton('task')"
					remit:click="compose:fakedoor"
					radar-id="task_fake"
					pure
				>
					<b:avatar
						ico="status:doneround"
						ico-size="s"
						size="s"
						bg-color="#FA8857"
						ico-color="#fff"
						with-border="{false}"
					/>
					<span bem:elem="text">{i18n(\'Создать задачу\')}</span>
				</b:list-item>
				<b:list-item
					fn:if="_this.needShowButton('board')"
					remit:click="compose:fakedoor"
					radar-id="board_fake"
					pure
				>
					<b:avatar
						ico="navigation:view_pinterest"
						ico-size="s"
						size="s"
						bg-color="#F77272"
						ico-color="#fff"
						with-border="{false}"
					/>
					<span bem:elem="text">{i18n(\'Создать интерактивную доску\')}</span>
				</b:list-item>
				<b:list-item
					fn:if="!attrs['disabled-call']"
					remit:click="calls:invitenew"
					radar-id="call"
					qa:id="call"
					title="{!attrs['disable-calls-tip'] && i18n(\'Участники встречи получат ссылку для видеозвонка и присоединятся, когда перейдут по ней\')}"
					pure
				>
					<b:avatar
						ico="categories:camera"
						ico-size="s"
						size="s"
						bg-color="#38e0a1"
						ico-color="#fff"
						with-border="{false}"
					/>
					<span bem:elem="text">{i18n(\'Предложить звонок\')}</span>
				</b:list-item>
				<b:list-item
					fn:if="!attrs['disabled-calendar']"
					remit:click="calendar:createnew"
					event:details="{createContent:'web_email_select'}"
					radar-id="calendar"
					qa:id="calendar"
					pure
				>
					<b:avatar
						ico="calendar-month"
						ico-size="s"
						size="s"
						bg-color="#005ff9"
						ico-color="#fff"
						with-border="{false}"
					/>
					<span bem:elem="text">{i18n(\'Создать событие\')}</span>
				</b:list-item>
			</b:list>
		</fn:match>
	</b:dropdown>
</div>
`,"./app/ui-block/compose-dropdown/compose-dropdown.html")}.apply(t,r))||(e.exports=a)},66866:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="contextmenu-correspondent">
	<fn:var name="contact" value="{attrs.model}"/>
	<fn:var name="username" value="{_this.getUserName(contact)}" />
	<fn:var name="mobile" value="{attrs.extraDetails.mobile}"/>

	<b:list>
		<b:list-item
			bem:mod="pure"
			remit:click.prevent.stop="dummy:click"
		>
			<div bem:elem="avatar">
				<b:notification-badge
						show="{attrs.isOnline}"
						colorMode="success"
						size="l"
						bottom="-8"
						right="8"
						test-id="{attrs.isOnline && 'online-badge'}"
				>
					<fn:match name="content" bem:block="widget">
						<b:avatar
							qa:id="avatar"
							size="l"
							email="{contact.email}"
							name="{contact.name}"
							src="{_this.getHighResolutionAvatar(contact)}"
						/>
					</fn:match>
				</b:notification-badge>
			</div>
			<div bem:elem="userdata" title="{username}">
				<div qa:id="username" bem:elem="name">{username}</div>
				<div qa:id="email" bem:elem="email">{contact.email}</div>
				<fn:if test="_this.isLastSeenPossible()">
					<b:lastseen
						loading="{attrs.checkingPossession}"
						text="{attrs.lastSeen.status}"
						client="{attrs.lastSeen.client_type}"
						success="{attrs.isOnline}"
					/>
				</fn:if>
			</div>
		</b:list-item>

		<div bem:elem="hr"/>

		<b:list-item qa:id="copy" radar-id="copy" remit:click="copy">
			<span bem:elem="ico" bem:mod="copy">
				<b:ico name="actions:copy" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Копировать адрес\')}</span>
		</b:list-item>

		<b:list-item
			qa:id="compose"
			remit:click="compose:to"
			event:details="contact"
			radar-id="compose"
		>
			<span bem:elem="ico" bem:mod="compose">
				<b:ico name="compose" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Написать письмо\')}</span>
		</b:list-item>

		<b:list-item
			qa:id="call"
			fn:if="_this.canCallTo(contact)"
			remit:click="call:to"
			event:details="contact"
			radar-id="call"
		>
			<span bem:elem="ico" bem:mod="call">
				<b:ico name="categories:camera" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Позвонить\')}</span>
		</b:list-item>

		<fn:if test="!(attrs.hideSearchButton && mobile)">
			<b:list-item
				qa:id="correspondent"
				remit:click="correspondent:search"
				event:details="{email:contact.email,model:contact.messageModel}"
				radar-id="search"
			>
				<span bem:elem="ico" bem:mod="search">
					<b:ico name="search" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Найти все письма\')}</span>
			</b:list-item>
		</fn:if>


		<fn:if test="attrs.isShouldCheckPossession && attrs.checkingPossession">
			<b:list-item
				bem:mod="centering"
				qa:id="add-contact-spinner"
			>
				<b:spinner inline size="xs" color="additional"/>
			</b:list-item>
		</fn:if>

		<fn:if test="attrs.isShouldCheckPossession && !attrs.checkingPossession && !attrs.isInAddressbook">
			<b:list-item
				qa:id="add-contact"
				remit:click="addressbook:addcontact"
				event:details="contact"
				radar-id="add-contact"
			>
				<span bem:elem="ico" bem:mod="navigation_add_user">
					<b:ico name="navigation_add_user" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Добавить в контакты\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="attrs.isShouldCheckPossession && !attrs.checkingPossession && attrs.isInAddressbook && !(attrs.hideAddContactButton && mobile)">
			<b:list-item
				qa:id="open-contact"
				remit:click="addressbook:opencontact"
				event:details="contact"
				radar-id="open-contact"
			>
				<span bem:elem="ico" bem:mod="navigation_users">
					<b:ico name="navigation_users" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'В контактах\')}</span>
			</b:list-item>
		</fn:if>


	</b:list>
</div>
`,"./app/ui-block/contextmenu-correspondent/contextmenu-correspondent.html")}.apply(t,r))||(e.exports=a)},43870:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="contextmenu-correspondents">
	<fn:var name="contacts" value="{attrs.model.contacts || []}"/>
	<fn:var name="isSingle" value="{contacts.length === 1}"/>

	<b:list>
		<b:list-item
			ref="js-copy"
			qa:id="copy"
			radar-id="copy"
		>
			<span bem:elem="ico" bem:mod="copy">
				<b:ico name="actions:copy" size="s"/>
			</span>
			<span bem:elem="text">{isSingle ? i18n(\'Копировать адрес\') : i18n(\'Копировать адреса\')}</span>
		</b:list-item>

		<b:list-item
			qa:id="compose"
			remit:click="compose:to"
			event:details="contacts"
			radar-id="compose"
		>
			<span bem:elem="ico" bem:mod="compose">
				<b:ico name="compose" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Написать письмо\')}</span>
		</b:list-item>

		<b:list-item
			qa:id="call"
			fn:if="_this.canCallTo(contacts)"
			remit:click="call:to"
			event:details="contacts"
			radar-id="call"
		>
			<span bem:elem="ico" bem:mod="call">
				<b:ico name="categories:camera" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Позвонить\')}</span>
		</b:list-item>
	</b:list>
</div>
`,"./app/ui-block/contextmenu-correspondents/contextmenu-correspondents.html")}.apply(t,r))||(e.exports=a)},88412:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="contextmenu">
	<fn:var name="folder" value="{attrs.model}"/>
	<fn:var name="metathreadToMyselfEnabled" value="{attrs['to-myself-enabled']}"/>
	<fn:var name="icomap" value="{_this.folder2icoMap}"/>

	<b:list>
		<fn:if test="attrs['new-tab-available']">
			<b:list-item
				remit:click="newtab"
				qa-id="newtab"
			>
				<span bem:elem="ico">
					<b:ico name="actions:tab_add" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Открыть в новой вкладке\')}</span>
			</b:list-item>

			<div bem:elem="hr"/>
		</fn:if>

		<fn:if test="folder.get('security') && !folder.get('open')">
			<b:list-item
				qa-id="unlock"
				radar-id="unlock"
				remit:click="unlock"
				event:details="{model:folder}"
			>
				<span bem:elem="ico" bem:mod="lock-off">
					<b:ico
						name="{icomap['lock-off_fill']}"
						mod="{icomap['lock-off_fill']}"
					/>
				</span>
				<span bem:elem="text">{i18n(\'Разблокировать\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="folder.get('security') && folder.get('open')">
			<b:list-item
				remit:click="lock"
				event:details="{model:folder}"
				qa-id="lock"
				radar-id="lock"
			>
				<span bem:elem="ico" bem:mod="lock-on">
					<b:ico
						name="{icomap['lock-on_fill']}"
						mod="{icomap['lock-on_fill']}"
					/>
				</span>
				<span bem:elem="text">{i18n(\'Заблокировать\')}</span>
			</b:list-item>
		</fn:if>

		<b:list-item
			remit:click="read"
			event:details="{model:folder}"
			qa-id="read"
			radar-id="read"
		>
			<bem:mod name="disabled" test="folder.get('messages_unread') === 0 || !folder.is('open')"/>

			<span bem:elem="ico" bem:mod="read">
				<b:ico name="status:read" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Пометить все письма прочитанными\')}</span>
		</b:list-item>

		<b:list-item
			remit:click="clear"
			event:details="{model:folder}"
			qa-id="clear"
			radar-id="clear"
		>
			<bem:mod name="disabled" test="!_this.isEnableClear()"/>

			<span bem:elem="ico" bem:mod="clear">
				<b:ico name="navigation:folder_hidden" size="s"/>
			</span>
			<span bem:elem="text">{_this.getRemoveText()}</span>
		</b:list-item>

		<div bem:elem="hr"/>

		<b:list-item
			remit:click="edit"
			event:details="{model:folder}"
			radar-id="edit"
			qa-id="edit"
		>
			<!-- выключаем редактирование на некоторых папках -->
			<bem:mod name="disabled" test="_this.isDisableEdit()"/>

			<span bem:elem="ico" bem:mod="edit">
				<b:ico name="actions:edit" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Редактировать папку\')}</span>
		</b:list-item>

		<b:list-item
			remit:click="remove"
			event:details="{model:folder}"
			radar-id="remove"
			qa-id="delete"
		>
			<bem:mod name="disabled" test="!_this.isEnableRemove()"/>

			<span bem:elem="ico" bem:mod="delete">
				<b:ico name="delete" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Удалить папку\')}</span>
		</b:list-item>

		<b:list-item
			remit:click="add"
			event:details="{model: _this.canAddSubfolder() ? folder : _this.getDisplayParentFolder()}"
			qa-id="create"
		>
			<!-- выключаем создание вложенной папки на некоторых папках -->
			<bem:mod name="disabled" test="_this.isDisableCreate()"/>

			<span bem:elem="ico" bem:mod="newfolder">
				<b:ico name="actions:add_big" size="s"/>
			</span>
			<span bem:elem="text">{_this.getCreateText()}</span>
		</b:list-item>

		<fn:if test="attrs['folders-share-enabled'] && !attrs.mobile">
			<div bem:elem="hr"/>
			<fn:if test="_this.showDenySharedFolder()">
				<b:list-item
						qa-id="deny"
						radar-id="deny"
						remit:click="sharefolders:denysharedfolder"
						event:details="{model:folder}"
				>
					<span bem:elem="ico" bem:mod="deny-share">
						<b:ico name="status:block" size="s"/>
					</span>
					<span bem:elem="text">{i18n(\'Отказаться от папки\')}</span>
				</b:list-item>
			</fn:if>

			<b:list-item
				qa-id="share"
				radar-id="share"
				remit:click="sharefolders:opensharefolders"
				event:details="{model:folder}"
			>
				<!-- некоторыми папками нельзя поделиться -->
				<bem:mod name="disabled" test="_this.isDisableShare()"/>

				<span bem:elem="ico" bem:mod="share">
					<b:ico name="navigation:users" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Настроить доступ к папкам\')}</span>
			</b:list-item>

			<b:list-item
				qa-id="shareOpportunities"
				radar-id="shareOpportunities"
				remit:click="shareopportunities:openshareopportunities"
			>
				<!-- некоторыми папками нельзя поделиться -->
				<bem:mod name="disabled" test="_this.isDisableShareOpportunities()"/>

				<span bem:elem="ico" bem:mod="share">
					<b:ico name="categories:mailings" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Предоставить возможности\')}</span>
			</b:list-item>
		</fn:if>

		<!-- пункт контекстного меню для метатреда "письма себе" -->
		<fn:if test="folder.isToMyself()">
			<div bem:elem="hr"/>

			<b:list-item
				qa-id="tomyself-disable"
				radar-id="tomyself-disable"
				remit:click="disable:tomyself"
				event:details="{model:folder}"
			>
				<!-- дизейблим этот пункт, если метатред уже отключен -->
				<!-- (такое возможно, когда мы паролим папку "Письма себе" и отключаем метатред) -->
				<bem:mod name="disabled" test="!metathreadToMyselfEnabled"/>

				<span bem:elem="ico" bem:mod="share">
					<b:ico name="categories:self_mail" size="s" />
				</span>

				<span bem:elem="text">{i18n(\'Отключить группировку писем себе\')}</span>
			</b:list-item>
		</fn:if>
	</b:list>
</div>
`,"./app/ui-block/contextmenu-folder/contextmenu-folder.html")}.apply(t,r))||(e.exports=a)},31322:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="message" value="{attrs.model}"/>
	<fn:var name="folder" value="{message && message.getFolder()}"/>
	<fn:var name="isMetaThread" value="{message && message.get('flags.metathread')}" />

	<b:list>
		<!-- Условие: "Открыть в новой вкладки" ИЛИ "Выделить все письма" -->
		<fn:if test="_this.isNewTabAvailable() || (!isMetaThread && _this.hasSelectButton())">
			<!-- Открыть в новой вкладке -->
			<fn:if test="_this.isNewTabAvailable()">
				<b:list-item
					qa:id="newtab"
					remit:click="newtab"
				>
					<span bem:elem="ico">
						<b:ico name="actions:tab_add" size="s"/>
					</span>
					<span bem:elem="text">{i18n(\'Открыть в новой вкладке\')}</span>
				</b:list-item>
			</fn:if>

			<!-- Выделить все письма -->
			<fn:if test="!isMetaThread && _this.hasSelectButton()">
				<fn:if test="!attrs.deselectAll">
					<b:list-item
						qa:id="select:all"
						remit:click="select:all"
						radar-id="select-all"
					>

						<span bem:elem="ico" bem:mod="select-all">
							<b:ico name="select-all" size="s"/>
						</span>
						<span bem:elem="text">
							{i18n(\'Выделить все письма\')}
						</span>
					</b:list-item>
				</fn:if>

				<fn:if test="attrs.deselectAll">
					<b:list-item
						qa:id="select:drop"
						remit:click="select:drop"
						radar-id="deselect"
					>
						<span bem:elem="ico" bem:mod="select-all">
							<b:ico name="select-all" size="s"/>
						</span>
						<span bem:elem="text">
							{i18n(\'Снять выделение\')}
						</span>
					</b:list-item>
				</fn:if>
			</fn:if>

			<div bem:elem="hr" />
		</fn:if>

		<fn:if test="_this.isRemoveVisible()">
			<b:list-item
				qa:id="remove"
				remit:click="remove"
				event:details="{model: message, parentThread: _this.getParentThread()}"
				radar-id="remove"
				disabled="{!_this.isEnableRemove()}"
			>

				<span bem:elem="ico" bem:mod="delete">
					<b:ico name="delete" size="s"/>
				</span>
				<span bem:elem="text">
					{folder && folder.isTrashLike() ? i18n(\'Удалить навсегда\') : i18n(\'Удалить\')}
				</span>
			</b:list-item>
		</fn:if>

		<b:list-item
			qa:id="archive"
			remit:click="archive"
			event:details="{model: message, parentThread: _this.getParentThread()}"
			radar-id="archive"

			fn:if="!folder.isArchive() && !attrs['archive-disabled']"
			disabled="{!_this.isEnableMoveToArchive()}"
		>
			<span bem:elem="ico" bem:mod="archive">
				<b:ico name="archive" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'В архив\')}</span>
		</b:list-item>

		<fn:if test="_this.shouldDisplaySpam()">
			<b:list-item
				qa:id="spam"
				remit:click="spam"
				event:details="{model: message, parentThread: _this.getParentThread()}"
				radar-id="spam"
				disabled="{!_this.isEnableMoveToSpam()}"
			>
				<span bem:elem="ico" bem:mod="spam-on">
					<b:ico name="spam-on" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Спам\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="folder.isSpam() && !attrs.deselectAll && !folder.isShareTake()">
			<b:list-item
				qa:id="unspam"
				remit:click="unspam"
				event:details="{model:message}"
				radar-id="unspam"
				disabled="{!_this.isEnableMoveToSpam()}"
			>
				<span bem:elem="ico" bem:mod="spam-off">
					<b:ico name="spam-off" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Не спам\')}</span>
			</b:list-item>
		</fn:if>

		<b:list-item
			qa:id="move"
			id="move-to"
			remit:click.stop.prevent="click:move"
			radar-id="move"
			nested
			disabled="{!_this.isEnableMove()}"
		>
			<span bem:elem="ico">
				<b:ico name="folder-move" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Переместить в папку\')}</span>
			<span bem:elem="nested">
				<b:ico name="navigation:drop_next" size="s"/>
			</span>
		</b:list-item>

		<div bem:elem="hr"/>

		<fn:if test="!message.is('flags.unread')">
			<b:list-item
				qa:id="mark:unread"
				remit:click="mark:unreaded"
				event:details="{model:message}"
				radar-id="unread"
			>
				<span bem:elem="ico" bem:mod="unread">
					<b:ico name="status:unread" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Пометить непрочитанным\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="message.is('flags.unread')">
			<b:list-item
				qa:id="mark:read"
				remit:click="mark:readed"
				event:details="{model:message}"
				radar-id="read"

				data-shortcut="q"
			>
				<span bem:elem="ico" bem:mod="read">
					<b:ico name="status_read" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Пометить прочитанным\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="!message.is('flags.flagged')">
			<b:list-item
				qa:id="mark:flagged"
				remit:click="mark:flagged"
				event:details="{model:message}"
				radar-id="flag"
				disabled="{!_this.isEnableMark()}"
			>
				<span bem:elem="ico" bem:mod="flag">
					<b:ico name="actions:favorite_on" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Пометить флажком\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="message.is('flags.flagged') && _this.isEnableMark()">
			<b:list-item
				qa:id="mark:unflagged"
				remit:click="mark:unflagged"
				event:details="{model: message}"
				radar-id="unflag"
				disabled="{!_this.isEnableMark()}"
			>
				<span bem:elem="ico" bem:mod="unflag">
					<b:ico name="actions:favorite_off" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Снять флажок\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="!attrs.deselectAll && _this.isShowCallsButton()">
			<b:list-item
				qa:id="calls:invite"

				remit:click="calls:invite"
				event:details="{model:message}"
				radar-id="calls-invite"
				disabled="{!_this.isEnableCall()}"
			>
				<span bem:elem="ico">
					<b:ico name="categories:camera" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Предложить звонок\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="!attrs.deselectAll && _this.isShowCallendarButton()">
			<b:list-item
				qa:id="create:calendar-event"
				remit:click="calendar:create"
				event:details="{model:message, createContent:'web_email_letter_context_menu'}"
				radar-id="calendar-create"
			>
				<span bem:elem="ico">
					<b:ico name="calendar-month" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Создать событие\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="_this.shouldDisplayFilter()">
			<b:list-item
				qa:id="create:filter"
				remit:click="settingsfilters:create"
				event:details="{model:message}"
				radar-id="filter-create"

				disabled="{!_this.isEnableFilterCreate()}"
			>
				<span bem:elem="ico" bem:mod="filter">
					<b:ico name="actions:filter" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Создать фильтр\')}</span>
			</b:list-item>
		</fn:if>

		<div bem:elem="hr"/>

		<fn:if test="_this.shouldDisplaySearch()">
			<b:list-item
				qa:id="search:from"
				remit:click="search:from"
				event:details="{model:message}"
				radar-id="search"
			>
				<bem:mod name="disabled" test="attrs.isSearchDisabled"/>

				<span bem:elem="ico" bem:mod="delete">
					<b:ico name="search" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Найти все письма\')}</span>
			</b:list-item>
		</fn:if>
	</b:list>
</div>
`,"./app/ui-block/contextmenu-message/contextmenu-message.html")}.apply(t,r))||(e.exports=a)},15230:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="message" value="{attrs.model}"/>
	<fn:var name="folder" value="{message && message.getFolder()}"/>

	<b:list>
		<fn:if test="_this.isNewTabAvailable()">
			<b:list-item
				qa:id="newtab"
				remit:click="metathreadnewtab"
			>
				<span bem:elem="ico">
					<b:ico name="actions:tab_add" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Открыть в новой вкладке\')}</span>
			</b:list-item>

			<div bem:elem="hr" />
		</fn:if>

		<fn:if test="_this.isRemoveVisible()">
			<b:list-item
				remit:click="remove"
				qa:id="remove"
				event:details="{model:message}"
				radar-id="remove"
				disabled="{!_this.isEnableRemove()}"
			>

				<span bem:elem="ico" bem:mod="delete">
					<b:ico name="{_this.getRemoveButtonIcon()}" size="s"/>
				</span>
				<span bem:elem="text">
					{_this.getRemoveButtonText()}
				</span>
			</b:list-item>
		</fn:if>

		<b:list-item
			qa:id="archive"
			remit:click="archive"
			event:details="{model:message}"
			radar-id="archive"
			disabled="{!_this.isEnableMoveToArchive()}"

			fn:if="!folder.isArchive() && !attrs['archive-disabled']"
		>
			<span bem:elem="ico" bem:mod="archive">
				<b:ico name="archive" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'В архив\')}</span>
		</b:list-item>

		<b:list-item
			qa:id="move"
			id="move-to"
			remit:click.stop.prevent="click:move"
			radar-id="move"
			nested
		>
			<span bem:elem="ico">
				<b:ico name="folder-move" size="s"/>
			</span>
			<span bem:elem="text">{i18n(\'Переместить в папку\')}</span>
			<span bem:elem="nested">
				<b:ico name="navigation:drop_next" size="s"/>
			</span>
		</b:list-item>

		<div bem:elem="hr"/>

		<fn:if test="!message.is('flags.unread')">
			<b:list-item
				qa:id="mark:unread"
				remit:click="metathreadtogglestatus:unread"
				event:details="{model:message}"
				radar-id="unread"
			>
				<span bem:elem="ico" bem:mod="unread">
					<b:ico name="status:unread" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Пометить непрочитанным\')}</span>
			</b:list-item>
		</fn:if>

		<fn:if test="message.is('flags.unread')">
			<b:list-item
				qa:id="mark:read"
				remit:click="metathreadtogglestatus:unread"
				event:details="{model:message}"
				radar-id="read"

				data-shortcut="q"
			>
				<span bem:elem="ico" bem:mod="read">
					<b:ico name="status:read" size="s"/>
				</span>
				<span bem:elem="text">{i18n(\'Пометить прочитанным\')}</span>
			</b:list-item>
		</fn:if>
	</b:list>
</div>
`,"./app/ui-block/contextmenu-metathread/contextmenu-metathread.html")}.apply(t,r))||(e.exports=a)},73057:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="folder" value="{attrs.model && attrs.model.getFolder()}"/>
	<fn:var name="stats" value="{_this.getSelectedStats()}"/>

	<b:list>
		<!-- Выделить все письма -->
		<fn:if test="_this.hasSelectButton() && attrs.selectable">

			<b:list-item
					qa:id="select:all"
					remit:click="select:all"
					radar-id="select-all"
					fn:if="!attrs['if-folder-selected']"
					nested
			>
						<span bem:elem="ico" bem:mod="select-all">
							<b:ico name="select-all" size="s"/>
						</span>
				<span bem:elem="text">
					{i18n(\'Выделить все письма\')}
					<span
							bem:elem="text"
							bem:mod="disabled"
							qa:id="amount-select:all"
					> {stats.all} </span>
				</span>
			</b:list-item>

			<b:list-item
					qa:id="select:drop"
					remit:click="select:drop"
					radar-id="deselect"
					fn:if="attrs['if-folder-selected']"
					nested
			>
						<span bem:elem="ico" bem:mod="select-all">
							<b:ico name="select-all" size="s"/>
						</span>
				<span bem:elem="text">
					{i18n(\'Снять выделение\')}
					<span
							bem:elem="text"
							bem:mod="disabled"
							qa:id="amount-select:drop"
					> {stats.all} </span>
				</span>
			</b:list-item>

			<div bem:elem="hr"/>
		</fn:if>

		<fn:if test="_this.isRemoveVisible()">
			<b:list-item
					qa:id="remove"
					remit:click="remove"
					event:details="{model:attrs.selected, selection:attrs['if-folder-selected']}"
					radar-id="remove"
					disabled="{!_this.isEnableRemove()}"
			>
				<span bem:elem="ico" bem:mod="delete">
					<b:ico name="delete" size="s"/>
				</span>
				<span bem:elem="text">
					{folder && folder.isTrashLike() ? i18n(\'Удалить навсегда\') : i18n(\'Удалить\')}
					<span
							bem:elem="text"
							bem:mod="disabled"
							qa:id="amount-remove"
					> {stats.all} </span>
				</span>
			</b:list-item>
		</fn:if>

		<fn:if test="!folder.isArchive() && !attrs['archive-disabled'] && (!stats || stats.noarchive)">
			<b:list-item
					qa:id="archive"
					remit:click="archive"
					event:details="{model:attrs.selected, selection:attrs['if-folder-selected']}"
					radar-id="archive"
					disabled="{!_this.isEnableMoveToArchive()}"
			>
			<span bem:elem="ico" bem:mod="archive">
				<b:ico name="archive" size="s"/>
			</span>
				<span bem:elem="text">
					{i18n(\'В архив\')}
					<span
							bem:elem="text"
							bem:mod="disabled"
							qa:id="amount-archive"
					> {stats.all} </span>

				</span>
			</b:list-item>
		</fn:if>

		<fn:if test="_this.shouldDisplaySpam(stats)">
			<b:list-item
					qa:id="spam"
					remit:click="spam"
					event:details="{model:attrs.selected}"
					radar-id="spam"
					disabled="{!_this.isEnableMoveToSpam()}"
			>
					<span bem:elem="ico" bem:mod="spam-on">
						<b:ico name="spam-on" size="s"/>
					</span>
				<span bem:elem="text">
					{i18n(\'Спам\')}
					<span
							bem:elem="text"
							fn:if="!attrs['if-folder-selected'] && !stats.metathread"
							bem:mod="disabled"
							qa:id="amount-spam"
					> {stats.nospam} </span>

				</span>
			</b:list-item>
		</fn:if>

		<fn:if test="folder.isSpam() && !folder.isShareTake() && (!stats || !attrs['if-folder-selected'])">
			<b:list-item
					qa:id="unspam"
					remit:click="unspam"
					event:details="{model:attrs.selected}"
					radar-id="unspam"
					disabled="{!_this.isEnableMoveToSpam()}"
			>
				<span bem:elem="ico" bem:mod="spam-off">
					<b:ico name="spam-off" size="s"/>
				</span>
				<span bem:elem="text">
					{i18n(\'Не спам\')}
					<span
							bem:elem="text"
							fn:if="!attrs['if-folder-selected'] && !stats.metathread"
							bem:mod="disabled"
							qa:id="amount-unspam"
					> {stats.spam} </span>
				</span>
			</b:list-item>
		</fn:if>

		<b:list-item
				qa:id="move"
				id="move-to"
				remit:click.stop.prevent="click:move"
				event:details="{selection:attrs['if-folder-selected']}"
				radar-id="move"
				nested
				disabled="{!_this.isEnableMove()}"
		>
			<span bem:elem="ico">
				<b:ico name="folder-move" size="s"/>
			</span>
			<span bem:elem="text">
				{i18n(\'Переместить в папку\')}
				<span
						bem:elem="text"
						bem:mod="disabled"
						qa:id="amount-click:move"
				> {stats.all} </span>

			</span>
			<span bem:elem="nested">
				<b:ico name="navigation:drop_next" size="s"/>
			</span>
		</b:list-item>

		<div bem:elem="hr"/>

		<b:list-item
				qa:id="mark:unread"
				remit:click="mark:unreaded"
				event:details="{model:attrs.selected, selection:attrs['if-folder-selected']}"
				radar-id="unread"
				fn:if="!stats || stats.read > 0"
		>
				<span bem:elem="ico" bem:mod="unread">
					<b:ico name="status:unread" size="s"/>
				</span>
			<span bem:elem="text">
				{i18n(\'Пометить непрочитанным\')}
				<span
						bem:elem="text"
						bem:mod="disabled"
						qa:id="amount-mark:unread"
				> {stats.read} </span>

			</span>
		</b:list-item>

		<b:list-item
				qa:id="mark:read"
				remit:click="mark:readed"
				event:details="{model:attrs.selected, selection:attrs['if-folder-selected']}"
				radar-id="read"
				data-shortcut="q"

				fn:if="!stats || stats.unread > 0"
		>
				<span bem:elem="ico" bem:mod="read">
					<b:ico name="status:read" size="s"/>
				</span>
			<span bem:elem="text">
				{i18n(\'Пометить прочитанным\')}
				<span
						bem:elem="text"
						bem:mod="disabled"
						qa:id="amount-mark:read"
				> {stats.unread} </span>

			</span>
		</b:list-item>

		<b:list-item
				qa:id="mark:flagged"
				remit:click="mark:flagged"
				event:details="{model:attrs.selected, selection:attrs['if-folder-selected']}"
				radar-id="flag"

				fn:if="!stats || stats.noflagged > 0"
				disabled="{!_this.isEnableMark()}"
		>
				<span bem:elem="ico" bem:mod="flag">
					<b:ico name="actions:favorite_on" size="s"/>
				</span>
			<span bem:elem="text">
				{i18n(\'Пометить флажком\')}
				<span
						bem:elem="text"
						bem:mod="disabled"
						qa:id="amount-mark:flagged"
				> {stats.noflagged} </span>
			</span>
		</b:list-item>

		<b:list-item
				qa:id="mark:unflagged"
				remit:click="mark:unflagged"
				event:details="{model: attrs.selected, selection:attrs['if-folder-selected']}"
				radar-id="unflag"

				fn:if="!stats || stats.flagged > 0"
				disabled="{!_this.isEnableMark()}"
		>
				<span bem:elem="ico" bem:mod="unflag">
					<b:ico name="actions:favorite_off" size="s"/>
				</span>
			<span bem:elem="text">
					{i18n(\'Снять флажок\')}
					<span
							bem:elem="text"
							bem:mod="disabled"
							qa:id="amount-mark:unflagged"
					> {stats.flagged} </span>
				</span>
		</b:list-item>

		<fn:if test="_this.shouldDisplayFilter(stats)">
			<b:list-item
					qa:id="create:filter"
					remit:click="settingsfilters:create"
					event:details="{model:attrs.selected}"
					radar-id="filter-create"

					disabled="{!_this._isEnableFilterCreate()}"
			>
				<bem:mod name="disabled" test="attrs['if-folder-selected'] || stats.metathread"/>
				<span bem:elem="ico" bem:mod="filter">
					<b:ico name="actions:filter" size="s"/>
				</span>
				<span bem:elem="text">
					{i18n(\'Создать фильтр\')}
					<span
							bem:elem="text"
							fn:if="!attrs['if-folder-selected'] && !stats.metathread"
							bem:mod="disabled"
							qa:id="amount-create:filter"
					> {stats.all} </span>
				</span>
			</b:list-item>
		</fn:if>
	</b:list>
</div>
`,"./app/ui-block/contextmenu-selection/contextmenu-selection.html")}.apply(t,r))||(e.exports=a)},81903:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="expanded" test="attrs.expanded"/>

	<div
		bem:elem="container"
		style="{_this.setStyle()}"
		remit:click.prevent="menu-toggle"
	>
		<div bem:elem="block" ref="block"/>
	</div>
</div>
`,"./app/ui-block/contextmenu/contextmenu.html")}.apply(t,r))||(e.exports=a)},26436:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div style="position: absolute; left: -100000px; top: -100000px;">
	<fn:if test="attrs.vkcid">
		<script type="text/javascript">
			var _tmr = _tmr || [];
			_tmr.push({
				type: 'setUserParams',
				params: {
					VKConnectID: {attrs.vkcid}
				}
			});
		</script>
	</fn:if>
	<div ref="counter-tns"/>
	<div ref="counter-li"/>
	<div ref="counter-top"/>
	<div ref="counter-top-hit"/>
</div>
`,"./app/ui-block/counters/counters.html")}.apply(t,r))||(e.exports=a)},30098:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="letterNotFound" value="{attrs['letter-not-found']}"/>
	<bem:mod name="select-mode" value="{attrs['select-mode'] ? 'on' : 'off'}"/>

	<fn:if test="!letterNotFound">
		<fn:var name="range" value="{_this.recalculateVisibleRange()}"/>

		<div bem:elem="items" qa:id="dataset-items" ref="items"></div>

		<fn:if test="__vmatches['navigator']">
			<fn:apply-match name="navigator" args="range"/>
		</fn:if>
	</fn:if>

	<fn:if test="letterNotFound || !attrs.models.length">
		<fn:apply-match name="dataset-empty" />
	</fn:if>
</div>
`,"./app/ui-block/dataset/dataset.html")}.apply(t,r))||(e.exports=a)},31973:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="last" test="attrs.last"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="ponymode" test="attrs.ponymode"/>
	<bem:mod name="indent" test="attrs.indent"/>
	<bem:mod name="indentRight" test="attrs.indentRight"/>
	<bem:mod name="full" test="attrs.full"/>
</div>
`,"./app/ui-block/delimeter/delimeter.html")}.apply(t,r))||(e.exports=a)},47713:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="color" value="{attrs.color}" test="attrs.color"/>
	<bem:mod name="new-toolbar" test="_this.useNewToolbar()"/>
</div>
`,"./app/ui-block/dimmer/dimmer.html")}.apply(t,r))||(e.exports=a)},35373:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="width-small" test="attrs['width'] === 'small'" />
	<bem:mod name="3pane" test="attrs['3pane']" />
	<div bem:elem="wrap">
		<bem:mod name="has-hover" test="attrs.href" />
		<a remit:click="discounts-click" bem:elem="inner">
			<fn:var name="hasTagBlock" value="{attrs.value || attrs.endDate}" />
			<fn:var name="promocode" value="{_this.getLastPromocode()}" />
			<fn:var name="salesValue" value="{String(attrs.value.size) + ' ' + attrs.value.currency}" />
			<!-- Цвета для промо-скидок -->
			<fn:var name="promoColors" value="{attrs.promoDiscount && attrs.colors}" />
			<fn:var name="promoColorsThemed"
				value="{attrs['dark-mode'] ? promoColors && promoColors.dark : promoColors && promoColors.light}" />
			<fn:var name="discountBackground" value="{promoColorsThemed && promoColorsThemed.background}" />
			<fn:var name="tagBackground" value="{promoColorsThemed && promoColorsThemed.tag_background}" />
			<fn:var name="tagText" value="{promoColorsThemed && promoColorsThemed.tag_text}" />

			<fn:attr name="href" value="{attrs.href}" fn:if="attrs.href" />

			<bem:mod name="no-text-clamp" test="!hasTagBlock" />

			<fn:attr name="style" value="background-color: {discountBackground};" fn:if="discountBackground" />

			<div bem:elem="cross-container" fn:if="!attrs.system">
				<b:ico name="actions:close_big" size="xs" secondary remit:click.prevent.stop="mark:unpinned"
					event:details="{model:attrs.model}" />
			</div>

			<div bem:elem="header">
				<b:avatar src="{(attrs.system ? _this.getBrandLogo() : attrs.image) || attrs.defaultImage}" size="s"
					with-border="{false}" />

				<div bem:elem="title" data-title-mode="overflow">
					<fn:attr name="title" value="{attrs.title}" />

					{attrs.title}
				</div>

				<div bem:elem="new" fn:if="attrs.new">
					{i18n(\'Новая\')}
				</div>

				<div bem:elem="switch" fn:if="attrs.switch !== undefined">
					<b:react-2kit-async component="Switch" compact checked="{!!attrs.switch}"
						disabled="{!!attrs.disabled}" onChange="{_this.handleSwitch}" use:mediator="themes-manager" />
				</div>
			</div>

			<div bem:elem="tag-block" fn:if="hasTagBlock">
				<span bem:elem="tag" fn:if="attrs.value" ref="tag">
					<fn:attr name="style" value="background-color: {tagBackground};" fn:if="tagBackground" />

					<span bem:elem="value" data-title-mode="overflow">
						<fn:attr name="style" value="color: {tagText};" fn:if="tagText" />
						<fn:attr name="title" value="{salesValue}" />
						{salesValue}
					</span>
				</span>

				<div bem:elem="promocode" remit:click.prevent.stop="promocode-click">
					<bem:mod name="hidden" test="!attrs.promocodes || !attrs.promocodes.length" />
					<bem:mod name="copy-hidden" test="!_this.isCopySupported()" />
					<span bem:elem="text">
						{i18n(\'Промокод\')}
					</span>
					<span bem:elem="promocode-value">
						{promocode}
					</span>
					<span bem:elem="copy" ref="copy-promocode">
						<fn:attr name="style" value="background-color: {tagBackground};" fn:if="tagText" />
						{i18n(\'Копировать промокод\')}
					</span>
				</div>

				<span bem:elem="end-date" ref="end-date" fn:if="!attrs.promocodes || !attrs.promocodes.length">
					<bem:mod name="hidden" test="attrs.endDate.is_default" />
					{attrs.endDate | formatDate}
				</span>
			</div>

			<div bem:elem="text" data-title-mode="overflow">
				<bem:mod name="line-clamp" test="hasTagBlock" />
				<bem:mod name="system" test="attrs.system" />
				<fn:attr name="title" value="{attrs.text}" />

				{attrs.text}
			</div>
		</a>
	</div>
</div>`,"./app/ui-block/discounts-item/discounts-item.html")}.apply(t,r))||(e.exports=a)},78067:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="3pane" test="attrs['3pane']"/>

	<b:gallery
		controls="{_this.getGalleryControls()}"
		remit:scroll-end="gallery:scroll:end"
		remit:all-blocks-visible="all:blocks:visible"
		remit:all-blocks-rendered="gallery:blocks:rendered"
	>
		<fn:for data="attrs.discounts" as="discount" key="i">
			<b:discounts-item
					key="{i}"
					defaultVisible="{i < attrs.visibleItemsCount}"
					title="{discount.shop}"
					value="{discount.sale.discount}"
					text="{discount.description}"
					endDate="{discount.sale.end_date}"
					image="{_this.getThreadImage(discount.message_id)}"
					colors="{_this.getDiscountColors(discount.from)}"
					promocodes="{discount.promocodes}"
					promoDiscount="{discount.is_promo}"
					new="{_this.isNewDiscount(discount.message_id)}"
					href="{_this.getThreadHref(discount.message_id)}"
					3pane="{attrs['3pane']}"
					width="{attrs['width']}"
					model="{_this.getModel(discount.message_id)}"
					use:mediator="letters-actions themes-manager"
			/>
		</fn:for>

		<fn:if test="attrs.discounts.length && !attrs.disableDiscountsBlock">
			<b:discounts-item
					key="settings"
					title="{i18n(\'Скидки\')}"
					text="{i18n(\'Почта находит скидки в рассылках и показывает здесь, чтобы вы их не потеряли.\')}"
					3pane="{attrs['3pane']}"
					switch="{!!attrs.router.model.uiThreadsSettings.discounts}"
					remit:switch="discounts:switch"
					disabled="{attrs['_progress']}"
					width="{attrs['width']}"
					system
			/>
		</fn:if>

		<fn:if test="!attrs.discounts.length">
			<b:discounts-item
					key="settings"
					title="{i18n(\'Нет скидок\')}"
					text="{i18n(\'Возможно, вам не приходили письма со скидками, или скидки перестали действовать\')}"
					3pane="{attrs['3pane']}"
					width="{attrs['width']}"
					system
			/>
		</fn:if>
	</b:gallery>
</div>
`,"./app/ui-block/discounts/discounts.html")}.apply(t,r))||(e.exports=a)},28060:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<iframe name="{attrs.name}"/>
`,"./app/ui-block/download-frame/download-frame.html")}.apply(t,r))||(e.exports=a)},41054:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:apply-match name="default"/>
</div>
`,"./app/ui-block/draggable/draggable.html")}.apply(t,r))||(e.exports=a)},41501:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="message" value="{attrs.model}"/>
	<fn:var name="folder" value="{message && message.getFolder && message.getFolder() || attrs.folder}"/>
	<fn:var name="folders" value="{attrs.folders}"/>
	<fn:var name="parentThread" value="{attrs.parentThread}"/>

	<b:dropdown
			container="{attrs.container}"
			shortcut="{attrs['dropdown-shortcut']}"
			title-shortcut="{attrs['title-shortcut']}"
			title="{attrs.title}"
			text="{attrs.text}"
			ico="{attrs.ico}"
			short
			ponymode="{attrs.ponymode}"
			pure="{attrs.pure}"
			secondary="{attrs.secondary}"
			touch="{attrs.touch}"
			touch-nav="{attrs['touch-nav']}"
			expand-left="{attrs['expand-left']}"
			disable-expand-top="{attrs['disable-expand-top']}"
			disable-expand-center="{attrs['disable-expand-center']}"

			size="{attrs.size}"
			radar-id="ctrl"
			remit:dropdown-change-state="dropdown-change"
		>

		<fn:match name="items" args="dropdownArgs">
			<b:list
				touch="{attrs.touch}"
				shortcut
				ref="list"
			>
				<!-- Блок №1 – "Ответ на письмо" -->
				<fn:if test="attrs.reply">
					<b:list-item
						disabled="{!_this.isEnableReply()}"
						touch="{attrs.touch}"
						qa:id="reply"

						remit:click="compose:reply"
						event:details="message"

						shortcut="r"
					>
						<span bem:elem="ico">
							<b:ico name="reply" size="s"/>
						</span>
						<span bem:elem="text">{i18n(\'Ответить\')}</span>
						<span bem:elem="hint">
							<b:shortcut-hint
								shortcut="r"
							/>
						</span>

					</b:list-item>

					<b:list-item
						disabled="{!_this.isEnableReply()}"
						touch="{attrs.touch}"
						qa:id="replyall"

						remit:click="compose:replyall"
						event:details="message"

						shortcut="shift+r"

						fn:if="attrs.reply == 'all'"
					>
						<span bem:elem="ico">
							<b:ico name="reply-all" size="s"/>
						</span>
						<span bem:elem="text">{i18n(\'Ответить всем\')}</span>
						<span bem:elem="hint">
							<b:shortcut-hint
								shortcut="shift+r"
							/>
						</span>
					</b:list-item>

					<b:list-item
						disabled="{!_this.isEnableForward()}"
						touch="{attrs.touch}"
						qa:id="forward"

						remit:click="compose:forward"
						event:details="message"

						shortcut="f"
					>
						<span bem:elem="ico">
							<b:ico name="forward" size="s"/>
						</span>
						<span bem:elem="text">{i18n(\'Переслать\')}</span>
						<span bem:elem="hint">
							<b:shortcut-hint
								shortcut="f"
							/>
						</span>
					</b:list-item>

					<div bem:elem="hr"/>
				</fn:if>
				<!-- END\ Блок №1 – "Ответ на письмо" -->

				<!-- Блок №2 – "Действия над письмами" -->
				<fn:if test="attrs.remove || attrs.unsubscribe || attrs.archive || attrs.spam || attrs.unspam || attrs.move">
					<fn:if test="attrs.remove && _this.isRemoveVisible()">
						<b:list-item
							disabled="{!_this.isEnableRemove()}"
							touch="{attrs.touch}"
							qa:id="remove"

							remit:click="remove"
							event:details="{model: message,selection: attrs['selection-actions'],parentThread: parentThread}"

							shortcut="del|command+backspace"
						>
							<span bem:elem="ico">
								<b:ico name="delete" size="s"/>
							</span>
							<span bem:elem="text">
								{folder && folder.isTrashLike() ? i18n(\'Удалить навсегда\') : i18n(\'Удалить\')}
							</span>
							<span bem:elem="hint">
								<b:shortcut-hint
									shortcut="del|command+backspace"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.archive && !attrs['archive-force-disabled']">
						<b:list-item
							disabled="{!_this.isEnableMoveToArchive()}"
							touch="{attrs.touch}"
							qa:id="archive"

							remit:click="archive"
							event:details="{model: message,selection: attrs['selection-actions'],parentThread: parentThread}"
							shortcut="e"
						>
							<span bem:elem="ico">
								<b:ico name="archive" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'В архив\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="e"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.spam">
						<b:list-item
							disabled="{!_this.isEnableMoveToSpam()}"
							touch="{attrs.touch}"
							qa:id="spam"

							remit:click="spam"
							event:details="{model: message,selection: attrs['selection-actions'],parentThread: parentThread}"

							shortcut="shift+j"
						>
							<span bem:elem="ico">
								<b:ico name="spam-on" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Спам\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="shift+j"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.unsubscribe">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="unsubscribe"
							remit:click="click:unsubscribe"
							event:details="{selectedLettersIds: attrs.selectedLettersIds}"
						>
							<span bem:elem="ico">
								<b:ico name="spam-on" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Отписаться\')}</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.unspam && !folder.isShareTake()">
						<b:list-item
							disabled="{!_this.isEnableMoveToSpam()}"
							touch="{attrs.touch}"
							qa:id="unspam"

							remit:click="unspam"
							event:details="{model:message, selection:attrs['selection-actions']}"

							shortcut="shift+j"
						>
							<span bem:elem="ico">
								<b:ico name="spam-off" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Не спам\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="shift+j"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<!-- Перемещение в папку -->
					<fn:if test="attrs.move">
						<b:list-item
							disabled="{!_this.isEnableMove()}"
							touch="{attrs.touch}"
							qa:id="folder"

							id="moveto-folder"

							remit:click.stop.prevent="click:move"

							selected="{attrs.expanded}"
							nested
						>
							<span bem:elem="ico">
								<b:ico name="folder-move" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Переместить в папку\')}</span>
							<span bem:elem="nested">
								<b:ico name="navigation:drop_next" size="s"/>
							</span>
						</b:list-item>
					</fn:if>

					<div fn:if="!attrs['disable-shortcuts']" bem:elem="hr"/>
				</fn:if>
				<!-- END\ Блок №2 – "Действия над письмами" -->

				<!-- Блок №3 – "Действия над письмами + \x60мета\x60 действия" -->
				<fn:if test="attrs.superspam || attrs.read || attrs.spamAbovePrint || attrs.unsubscribeAbovePrint || attrs.print || attrs.unread || attrs.flag || attrs.unflag || attrs['create-event'] || attrs['create-filter']">
					<fn:if test="attrs.superspam">
						<b:list-item
							disabled="{!_this.isEnableMoveToSpam()}"
							touch="{attrs.touch}"
							qa:id="superspam"

							remit:click="superspam"
							event:details="{model:message, selection:attrs['selection-actions']}"
						>
							<span bem:elem="ico">
								<b:ico name="spam-on" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Точно спам\')}</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.read">
						<b:list-item
							disabled="{attrs['disable-edit']}"
							touch="{attrs.touch}"
							qa:id="read"

							remit:click="mark:readed"
							event:details="{model:message, selection:attrs['selection-actions']}"

							shortcut="q"
						>
							<span bem:elem="ico" bem:mod="read">
								<b:ico name="status:read" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Пометить прочитанным\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="q"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.unread">
						<b:list-item
							disabled="{attrs['disable-edit']}"
							touch="{attrs.touch}"
							qa:id="unread"

							remit:click="mark:unreaded"
							event:details="{model:message, selection:attrs['selection-actions']}"

							shortcut="u"
						>
							<span bem:elem="ico" bem:mod="unread">
								<b:ico name="status:unread" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Пометить непрочитанным\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="u"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.flag">
						<b:list-item
							disabled="{!_this.isEnableMark()}"
							touch="{attrs.touch}"
							qa:id="flag"

							remit:click="mark:flagged"
							event:details="{model:message, selection:attrs['selection-actions']}"

							shortcut="i"
						>
							<span bem:elem="ico" bem:mod="flag">
								<b:ico name="actions:favorite_on" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Пометить флажком\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="i"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.unflag">
						<b:list-item
							disabled="{!_this.isEnableMark()}"
							touch="{attrs.touch}"
							qa:id="unflag"

							remit:click="mark:unflagged"
							event:details="{model:message, selection:attrs['selection-actions']}"

							shortcut="i"
						>
							<span bem:elem="ico" bem:mod="unflag">
								<b:ico name="actions:favorite_off" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Снять флажок\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="i"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs['invite-call']">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="calls:invite"
							disabled="{!_this.isEnableCall()}"

							remit:click="calls:invite"
							event:details="{model:message}"
						>
							<span bem:elem="ico">
								<b:ico name="categories:camera" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Предложить звонок\')}</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs['create-event']">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="calendar:create"

							remit:click="calendar:create"
							event:details="{model:message, createContent:'web_email_header_select'}"
						>
							<span bem:elem="ico">
								<b:ico name="calendar-month" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Создать событие\')}</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.spamAbovePrint">
						<b:list-item
							disabled="{attrs.spamDisabled}"
							touch="{attrs.touch}"
							qa:id="spam"

							remit:click="spam"
							event:details="{model: message,selection: attrs['selection-actions'],parentThread: parentThread}"

							shortcut="shift+j"
						>
							<span bem:elem="ico">
								<b:ico name="spam-on" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Спам\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="shift+j"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.unsubscribeAbovePrint">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="unsubscribe"
							remit:click="click:unsubscribe"
							event:details="{selectedLettersIds: attrs.selectedLettersIds}"
						>
							<span bem:elem="ico">
								<b:ico name="spam-on" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Отписаться\')}</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.print">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="print"
							event:details="{model: message, selection:attrs['selection-actions']}"
							remit:click="print"
							shortcut="command+p|ctrl+p"
							disabled="{!_this.isEnablePrint()}"
						>
							<span bem:elem="ico">
								<b:ico name="actions:print" size="s" />
							</span>
							<span bem:elem="text">{i18n(\'Распечатать\')}</span>
							<span bem:elem="hint">
								<b:shortcut-hint
									shortcut="ctrl+p"
									shortcut-mac="cmd+p"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs['create-filter'] && !attrs.mobile">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="settingsfilters:create"

							event:details="{model:message, selection:attrs['selection-actions']}"
							remit:click="settingsfilters:create"

							shortcut="shift+l"

							disabled="{!_this.isEnableFilterCreate()}"
						>
							<span bem:elem="ico">
								<b:ico name="filter" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Создать фильтр\')}</span>
							<span fn:if="!attrs['disable-shortcuts']" bem:elem="hint">
								<b:shortcut-hint
									shortcut="shift+l"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs['category-feedback'] && !folder.isShareTake()">
						<fn:var name="category" value="{_this.getCategoryIcon(message, folder)}"/>

						<b:list-item
							disabled="{attrs['disable-edit']}"
							touch="{attrs.touch}"
							qa:id="category-feedback"

							id="category-feedback"

							remit:click.stop.prevent="click:category-feedback"

							selected="{attrs.expanded}"
							nested
						>
							<span bem:elem="ico" bem:mod="{category.name}">
								<b:ico name="{category.icon}" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Категория письма\')}</span>
							<span bem:elem="nested">
								<b:ico name="navigation:drop_next" size="s"/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.translate">
						<b:list-item
							touch="{attrs.touch}"
							qa:id="translate"
							event:details="{model:message}"
							remit:click="translator:show"
							shortcut="shift+t"
						>
							<span bem:elem="ico">
								<b:ico name="wysiwyg:translate" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Перевести письмо\')}</span>
							<span bem:elem="hint">
								<b:shortcut-hint
									shortcut="shift+t"
								/>
							</span>
						</b:list-item>
					</fn:if>

					<fn:if test="attrs.forward">
						<b:list-item
							disabled="{!_this.isEnableForwardAsAttach()}"
							touch="{attrs.touch}"
							qa:id="forward"

							remit:click="forward"
							event:details="{model:message, selection:attrs['selection-actions']}"
						>
							<span bem:elem="ico">
								<b:ico name="status:attach" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Переслать как вложение\')}</span>
						</b:list-item>
					</fn:if>

					<div bem:elem="hr"/>
				</fn:if>
				<!-- END\ Блок №3 – "Действия над письмами + \x60мета\x60 действия" -->

				<!-- Блок №4 – "Поиск по письму" -->
				<fn:if test="attrs.readletter">
					<b:list-item
						touch="{attrs.touch}"
						qa:id="search:from"

						remit:click="search:from"

						shortcut="shift+s"
					>

						<span bem:elem="ico" bem:mod="delete">
							<b:ico name="search" size="s"/>
						</span>

						<span bem:elem="text">{i18n(\'Найти все письма\')}</span>
						<span bem:elem="hint">
							<b:shortcut-hint
								shortcut="shift+s"
							/>
						</span>
					</b:list-item>
				</fn:if>
				<!-- END/ Блок №4 – "Поиск по письму" -->

				<!-- Блок №5 – "Ещё" -->
				<fn:if test="attrs.more">
					<div bem:elem="hr"/>

					<b:list-item
						fn:if="!attrs['more-expanded']"
						touch="{attrs.touch}"
						qa:id="letter-more"

						id="letter-more"

						remit:click.stop.prevent="click:letter-more"
					>
						<span bem:elem="ico">
							<b:ico name="navigation:drop_down_big" size="s"/>
						</span>

						<span bem:elem="text">{i18n(\'Ещё\')}</span>
					</b:list-item>

					<fn:if test="attrs['more-expanded']">
						<b:list-item
							disabled="{!_this.isEnableRedirect()}"
							touch="{attrs.touch}"
							qa:id="redirect"
							event:details="{model: message}"
							remit:click="redirect"
						>
							<span bem:elem="ico">
								<b:ico name="wysiwyg:arrow" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Перенаправить\')}</span>
						</b:list-item>

						<b:list-item
							disabled="{!_this.isEnableForwardAsAttach()}"
							touch="{attrs.touch}"
							qa:id="forward-as-attach"
							event:details="{model: message}"
							remit:click="forward"
						>
							<span bem:elem="ico">
								<b:ico name="status:attach" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Переслать как вложение\')}</span>
						</b:list-item>

						<b:list-item
							touch="{attrs.touch}"
							qa:id="headers"
							event:details="{model: message}"
							remit:click="headers"
							disabled="{!_this.isEnableServiceHeaders()}"
						>
							<span bem:elem="ico">
								<b:ico name="categories:document" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Служебные заголовки\')}</span>
						</b:list-item>

						<b:list-item
							touch="{attrs.touch}"
							qa:id="download"
							event:details="{model: message}"
							remit:click="download"
							disabled="{!_this.isEnableDownload()}"
						>
							<span bem:elem="ico">
								<b:ico name="actions:download_alt" size="s"/>
							</span>
							<span bem:elem="text">{i18n(\'Скачать на компьютер\')}</span>
						</b:list-item>

						<fn:if test="attrs['new-tab-available']">
							<b:list-item
								touch="{attrs.touch}"
								qa:id="newtab"
								event:details="{model: message}"
								remit:click="newtab"
							>
								<span bem:elem="ico">
									<b:ico name="actions:tab_add" size="s"/>
								</span>
								<span bem:elem="text">{i18n(\'Открыть в новой вкладке\')}</span>
							</b:list-item>
						</fn:if>
					</fn:if>
				</fn:if>
				<!-- END/ Блок №5 – "Ещё" -->
			</b:list>
		</fn:match>

	</b:dropdown>
</div>
`,"./app/ui-block/dropdown-actions/dropdown-actions.html")}.apply(t,r))||(e.exports=a)},57450:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:state="{attrs.ponymode && 'pony-mode'}">
	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="touch-nav" test="attrs['touch-nav']"/>
	<bem:mod name="expanded" test="attrs.expanded"/>
	<bem:mod name="collapsed" test="!attrs.expanded"/>
	<bem:mod name="expand-top" test="attrs['expand-top']"/>
	<bem:mod name="expand-left" test="attrs['calculated-expand-left']"/>
	<bem:mod name="expand-center" test="attrs['expand-center']"/>
	<bem:mod name="no-relative" test="attrs['no-relative']"/>
	<bem:mod name="nav-folders" test="attrs['nav-folders']"/>
	<bem:mod name="{attrs.name}" test="attrs.name"/>

	<bem:mod name="scroll-style" value="{attrs['scroll-style']}"/>

	<bem:mod name="hover-support" test="attrs['hover-support']"/>
	<bem:mod name="pony-mode" test="attrs.ponymode"/>

	<fn:match name="ctrl" args="attrs">
		<b:button2
			qa:id="dropdown-button"
			remit:click="ctrl-click"
			promoId="{attrs.promoId}"
			shortcut="{attrs.shortcut}"
			title-shortcut="{attrs['title-shortcut']}"
			title="{attrs.title}"
			annotation="{attrs.annotation}"
			text="{attrs.text}"
			ico="{attrs.ico}"
			rotate-ico="{attrs['rotate-ico']}"
			touch="{attrs.touch}"
			short="{attrs.short}"
			ico-text-top="{attrs['ico-text-top']}"
			pure="{attrs.pure}"
			pressed="{attrs.expanded}"
			secondary="{attrs.secondary}"
			size="{attrs.size}"
			disabled="{attrs.disabled}"
			compact="{attrs.ponymode}"
			clean="{attrs.clean}"
			font-size-pony="{attrs['font-size-pony']}"
			notification-badge="{attrs['notification-badge']}"
			always-bright="{attrs['always-bright']}"
			centered
			highlighted="{attrs.highlighted}"
		/>
	</fn:match>

	<fn:match name="items">
		<div bem:elem="item">Item 1</div>
		<div bem:elem="item">Item 2</div>
		<div bem:elem="hr"/>
		<div bem:elem="item">Item 3</div>
	</fn:match>

	<fn:apply-match name="ctrl" args="attrs"/>

	<div qa:id="dropdown-list" bem:elem="menu" remit:click="list-click" ref="list">
		<fn:apply-match name="items" args="_this"/>
	</div>

	<fn:apply-match name="footer"/>
</div>
`,"./app/ui-block/dropdown/dropdown.html")}.apply(t,r))||(e.exports=a)},24052:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="folder" value="{attrs.folder}" />
	<fn:var name="sortingType" value="{attrs.sortingType}" />
	<fn:var name="folderName" value="{folder.get('name')}" />
	<fn:var name="activeFilters" value="{_this.getActiveFilters()}" />
	<fn:var name="activeFiltersAndSorting" value="{_this.getActiveFiltersAndSorting()}" />
	<fn:var name="controlIcons" value="{_this.getControlIcons()}" />
	<fn:var name="ponyMode" value="{attrs['pony-mode']}" />

	<fn:var name="short" value="{attrs.short}" />
	<fn:var name="full" value="{attrs.full}" />
	<fn:var name="defaultFilter" value="{activeFilters === 'all'}" />
	<fn:var name="combinedMode" value="{full || short && !defaultFilter}" />
	<fn:var name="controlText" value="{_this.getControlText()}" />

	<bem:mod name="short" test="short" />
	<bem:mod name="full" test="full" />
	<bem:mod name="active" test="attrs.active" />
	<bem:mod name="pressed" test="attrs.pressed" />

	<bem:mod name="pure" test="attrs.pure" />
	<bem:mod name="base" test="!attrs.pure" />
	<bem:mod name="pony-mode" test="ponyMode" />
	<bem:mod name="with-folder" test="combinedMode && attrs.combineFilterAndFolderName" />

	<bem:mod name="new-toolbar" test="_this.useNewToolbar()" />

	<fn:attr name="title" value="{controlText}" />

	<!-- Папка -->
	<fn:match name="folder-block">
		<span bem:elem="folder" qa:id="folder-name-filter">
			<fn:value>folderName</fn:value>
		</span>
	</fn:match>

	<!-- Фильтр -->
	<fn:match name="filter-block">
		<span bem:elem="filter">
			<bem:mod name="short" test="short" />
			<bem:mod name="pony-mode" test="ponyMode" />

			<span bem:elem="filter-icon" fn:if="controlIcons.length">
				<fn:for data="controlIcons" as="filterIcon">
					<b:ico
						name="{filterIcon}"
						size="s"
						key="icon-{filterIcon}"
						qa:id="filter-icon-{filterIcon}"
					/>
				</fn:for>
			</span>
			<span
				bem:elem="filter-text"
				qa:id="filter-text"
				promo:id="octavius-tooltip-mailbox-sort"
				qa:state="{activeFiltersAndSorting}"
			>
			<fn:var name="isFixedWidthFilterText" value="{_this.isFixedWidthFilterText()}" />
			<bem:mod name="{isFixedWidthFilterText.width}" fn:if="isFixedWidthFilterText.fixed" />
				<fn:if test="!attrs.iconOnly">{controlText}</fn:if>
				<fn:if test="attrs.iconOnly && defaultFilter"><b:ico name="actions:sort"/></fn:if>
			</span>
		</span>
	</fn:match>

	<!-- Подробный вид -->
	<div bem:elem="text" fn:if="full">
		<bem:mod name="combined" fn:if="combinedMode" />
		<bem:mod name="pony-mode" test="ponyMode" />

		<fn:apply-match name="folder-block" />

		<span bem:elem="filter" fn:if="combinedMode" qa:id="filter-text" promo:id="octavius-tooltip-mailbox-sort">
			<bem:mod name="{_this.isFixedWidthFilterText().width}" fn:if="_this.isFixedWidthFilterText().fixed" />
			<fn:value>controlText</fn:value>
		</span>
	</div>

	<!-- Компактный вид -->
	<div bem:elem="text" fn:if="short">
		<bem:mod name="default-filter" fn:if="activeFilters === 'all'" />

		<fn:apply-match name="filter-block" />
	</div>

	<fn:if test="!attrs.iconOnly">
		<!-- Стрелка -->
		<div bem:elem="arrow-down-icon">
			<b:ico name="navigation:drop_down" size="s" />
		</div>
	</fn:if>
</div>
`,"./app/ui-block/filters-control/filters-control.html")}.apply(t,r))||(e.exports=a)},56020:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div promo:id="portal-menu-filters">
	<fn:var name="folder" value="{attrs.folder}" />
	<fn:var name="filter" value="{_this.getFilter(attrs.filter)}" />
	<fn:var name="filters" value="{_this.filters}" />
	<fn:var name="selectedFilterIndexes" value="{_this.getSelectedFilterIndexes()}"/>
	<fn:var name="settings" value="{_this.getSettings()}" />
	<fn:var name="sortingEnable" value="{_this.isSortingEnable()}" />
	<fn:var name="showResetAll" value="{_this.isShowResetAll()}"/>

	<fn:var name="short" value="{attrs.short}" />
	<fn:var name="full" value="{!attrs.short}" />
	<fn:var name="touch" value="{attrs.touch}" />
	<fn:var name="ponyMode" value="{attrs.ponymode}" />
	<fn:var name="alignRight" value="{_this.isAlignRight()}" />

	<fn:var name="layoutType" value="{attrs.type}" />

	<bem:mod name="short" test="short" />
	<bem:mod name="full" test="full" />
	<bem:mod name="touch" test="touch" />
	<bem:mod name="pony-mode" test="ponyMode" />

	<!-- Шаблон элемента списка - фильтра -->
	<fn:match
		name="item"
		args="item, key, isSelected, isDisabled, text, icon, touch"
	>
		<fn:var name="type" value="{item.type}" />
		<b:list-item
			touch="{touch}"
			disabled="{isDisabled}"
			markable
			marked="{isSelected}"
			qa:id="{type}"
			key="{key}"
			remit:click="item-click"
			event:details="item"
		>
			<span bem:elem="ico" fn:if="icon">
				<b:ico name="{icon}" size="s" />
			</span>

			<span bem:elem="text"> {text} </span>
		</b:list-item>
	</fn:match>

	<fn:match
		name="unselectable-item"
		args="item, key, isSelected, text, icon, helpLink, touch, event"
	>
		<fn:var name="test" value="threads:toggle" />
		<fn:var name="type" value="{item.type}" />
		<b:list-item
			touch="{touch}"
			markable
			marked="{isSelected}"
			qa:id="{type}"
			key="{key}"
			remit:click="filters:unselectable-item-click"
			event:details="item"
		>
			<span bem:elem="ico" fn:if="icon">
				<b:ico name="{icon}" size="s" />
			</span>

			<span bem:elem="text"> {text} </span>
			<!-- Для метатредов при клике открывается попап настроек, где будет ссылка на help, но в дропдауне скрываем	-->
			<fn:if test="helpLink && helpLink!=='metathreads' && !attrs['hide-help']">
				<fn:apply-match
					name="help-link"
					args="helpLink, attrs['help-links'][helpLink]"
				/>
			</fn:if>
		</b:list-item>
	</fn:match>

	<fn:match name="help-link" args="eventName, link">
		<b:settings-help-link
			event-details="{eventName}"
			link="{link}"
			use:mediator="settings-manager pony-mode"
		/>
	</fn:match>

	<!-- Селект "Фильтры" -->
	<b:select
		ref="select"
		id="select"
		remit:item-click="select:item-click"
		remit:toggle="select:list-toggle"
		remit:sorting-open-submenu="select:sorting-open-submenu"
		remit:reset-all="select:reset-all"
		items="{filters}"
		touch="{touch}"
		multiple="{true}"
		selected-index="{selectedFilterIndexes}"
		autochange="{attrs.autochange}"
		align-right="{alignRight}"
	>
		<fn:match name="control" args="_, selectedItem, selectedIndex, expanded">
			<b:filters-control
				filters="{selectedItem}"
				sortingType="{attrs.sortingType}"
				folder="{folder}"
				full="{full}"
				short="{short}"
				active="{attrs.expanded}"
				sidebar-column="{_this.get('sidebar-column')}"
				main-column="{_this.get('main-column')}"
				pure="{attrs.pure}"
				pony-mode="{ponyMode}"
				pressed="{expanded}"
				layoutType="{layoutType}"
				iconOnly="{attrs.iconOnly}"
				default-filter-text="{_this.getDefaultFilterText()}"
				remit:click="control-click"
				combineFilterAndFolderName="{attrs.combineFilterAndFolderName}"
			/>
		</fn:match>

		<fn:match
			name="items"
			args="items, selectedItem, selectedIndex, disabledItem, disabledIndex, touch"
		>
			<!-- Список фильтров -->
			<b:list touch="{touch}" qa:id="filters-dropdown">
				<fn:for data="items" as="item">
					<fn:var name="key" value="{item.text}" />
					<fn:var name="text" value="{item.text}" />
					<fn:var
						name="isSelected"
						value="{selectedItem.filter((element) => element.text === key).length}"
					/>
					<fn:var name="isDisabled" value="{key === disabledItem.text}" />
					<fn:var name="icon" value="{item.icon}" />

					<fn:apply-match
						name="item"
						args="item, key, isSelected, isDisabled, text, icon, touch"
					/>
				</fn:for>

				<fn:if test="sortingEnable">
					<!-- Сортировка -->
					<div bem:elem="hr" />
					<b:list-item
						touch="{touch}"
						id="sorting"
						qa:id="sorting"
						nested
						key="sorting"
						remit:click="sorting-open-submenu"
						markable
					>
						<span bem:elem="text"> {i18n(\'Сортировка\')} </span>

						<span bem:elem="nested">
							<b:ico name="navigation:drop_next" size="s" />
						</span>
					</b:list-item>

					<fn:if test="showResetAll">
						<!-- Сбросить всё -->
						<div bem:elem="hr" />
						<b:list-item
							touch="{touch}"
							qa:id="resetAll"
							key="resetAll"
							remit:click="reset-all"
							markable
						>
							<span bem:elem="text"> {i18n(\'Сбросить всё\')} </span>
						</b:list-item>
					</fn:if>
				</fn:if>

				<!-- Внешний вид -->
				<fn:if test="settings">
					<div bem:elem="hr">
						<bem:mod name="markable" />
					</div>
					<div bem:elem="caption">
						<bem:mod name="markable" />
						{i18n(\'Внешний вид\')}
					</div>
					<fn:for data="settings" as="item">
						<fn:var name="key" value="{item.text}" />
						<fn:var name="text" value="{item.text}" />
						<fn:var name="isSelected" value="{item.isOn}" />
						<fn:var name="icon" value="{item.icon}" />
						<fn:var name="helpLink" value="{item.helpLink}" />
						<fn:var name="event" value="{item.event}" />
						<fn:var name="couldToggle" value="{item.couldToggle}" />

						<fn:if test="couldToggle">
							<fn:apply-match
								name="unselectable-item"
								args="item, key, isSelected, text, icon, helpLink, touch, event"
							/>
						</fn:if>
					</fn:for>
				</fn:if>
			</b:list>
		</fn:match>
	</b:select>
</div>
`,"./app/ui-block/filters/filters.html")}.apply(t,r))||(e.exports=a)},19679:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="hidden" test="!attrs.enabled || !attrs.visible"/>
</div>
`,"./app/ui-block/headline/headline.html")}.apply(t,r))||(e.exports=a)},48703:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span>
	<fn:var name="splitted" value="{_this.splitter(attrs.text, attrs.color)}" />

	<fn:for data="splitted" as="part" key="index">
		<span key="{attrs.text}{part}{index}" bem:elem="item">
			<bem:mod name="light" test="index % 2" />
			<fn:value>part</fn:value>
		</span>
	</fn:for>
</span>`,"./app/ui-block/highlighter/highlighter.html")}.apply(t,r))||(e.exports=a)},43846:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div remit:click="wrapper:click">
	<!-- Modifiers -->
	<bem:mod name="expanded" test="attrs.expanded"/>
	<bem:mod name="collapsed" test="!attrs.expanded"/>
	<bem:mod name="type_{attrs.type}" test="attrs.type"/>

	<!-- Variables -->
	<fn:var name="icoName" value="navigation:zoom_overlay"/>

	<!-- Content -->
	<!-- todo: перенести в отдельный компонент кнопки -->
	<div
		bem:elem="button"
		fn:if="attrs['is-button-visible']"
		remit:click="zoom:click"
		qa:id="expand-button"
	>
		<span bem:elem="icon">
			<b:ico name="{icoName}"/>
		</span>
	</div>

	<!-- Сюда добавится содержимое враппера -->
</div>
`,"./app/ui-block/html-expander-wrapper/html-expander-wrapper.html")}.apply(t,r))||(e.exports=a)},69374:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:apply-match name="default" />
</div>
`,"./app/ui-block/html-expander/html-expander.html")}.apply(t,r))||(e.exports=a)},22219:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:apply-match name="default" />
</div>
`,"./app/ui-block/html-fishing/html-fishing.html")}.apply(t,r))||(e.exports=a)},19855:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="message" value="{attrs['message']}" />

	<b:html-fishing id="fishing" message="{message}">
		<b:html-expander id="expander" dark-mode="{attrs['dark-mode']}">
			<fn:value output="raw">attrs.content</fn:value>
		</b:html-expander>
	</b:html-fishing>
</div>
`,"./app/ui-block/html-parser/html-parser.html")}.apply(t,r))||(e.exports=a)},81782:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div />`,"./app/ui-block/ico-map/ico-map.html")}.apply(t,r))||(e.exports=a)},53993:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<svg
	qa:id="ico:{_this.getSvgName()}">
	<bem:mod name="{_this.getSvgName()}"/>
	<bem:mod name="{attrs.mod}"/>
	<bem:mod name="secondary" test="attrs.secondary"/>
	<bem:mod name="size" value="{attrs.size}" test="attrs.size"/>

	<!--<use xlink:href="#{_this.getSvgURI()}"></use>-->

	<fn:var name="vdom" value="{_this.getSvgVDom()}"/>

	<fn:vdom data="vdom && vdom.children"/>

	<fn:for data="_this.getVDomAttrPairs(vdom)" as="pair" key="key">
		<fn:attr name="{pair.key}" value="{pair.value}"/>
	</fn:for>
</svg>
`,"./app/ui-block/ico/ico.html")}.apply(t,r))||(e.exports=a)},60847:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div bem:elem="container">
	<fn:var name="text" value="{attrs.text}"/>
	<fn:var name="loading" value="{attrs.loading}"/>
	<fn:var name="ico" value="{_this.getIcon()}"/>

	<div fn:if="loading && !text" bem:elem="placeholder-text">
		<div qa:id="lastseen-placeholder" bem:elem="placeholder-string"></div>
	</div>
	<div fn:if="!loading && text" bem:elem="status">
		<span fn:if="ico" bem:elem="ico" bem:mod="lastseen">
			<bem:mod name="success" test="attrs.success"/>
			<b:ico name="{ico}" size="xs"/>
		</span>
		<span qa:id="lastseen-text" bem:elem="email">
			<bem:mod name="success" test="attrs.success"/>
			{text}
		</span>
	</div>
</div>
`,"./app/ui-block/lastseen/lastseen.html")}.apply(t,r))||(e.exports=a)},95655:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="layer-confirm-clear-folder">
	<bem:mod name="touch" test="attrs.mobile"/>
	<bem:mod name="full" test="!attrs.mobile"/>
	<bem:mod name="hidden" test="attrs.hidden"/>

	<b:layer
			remit:close="layer:close"
			model="{attrs.model}"
			error="{attrs.error}"
			mobile="{attrs.mobile}"
			name="confirm-clear-folder"
			close
			header
			footer
			center
			standard
			resolvable
	>

		<fn:match name="header" args="attrs">
			{_this.getText()}
		</fn:match>

		<fn:match name="content" args="attrs">
			<fn:choose>
				<fn:when test="attrs.model.isTrashLike() || attrs.model.isSpam()">
					<span qa:id="remove-forever">
						{i18n(\'Письма удалятся навсегда — восстановить их не получится.\')}
					</span>
				</fn:when>

				<fn:otherwise>
					<span qa:id="remove-to-trash">
						{i18n(\'Все письма будут перенесены в папку «Корзина».\')}
					</span>
				</fn:otherwise>
			</fn:choose>
		</fn:match>

		<fn:match name="footer" args="attrs">
			<div bem:elem="submit-button">
				<b:button2
						qa:id="submit"
						remit:click="layer:resolve"
						event:details="{close: true}"
						text="{i18n(\'Очистить\')}"
						primary
						touch="{attrs.mobile}"
				/>
			</div>

			<div bem:elem="cancel-button">
				<b:button2
						qa:id="cancel"
						remit:click="layer:close"
						text="{i18n(\'Отменить\')}"
						touch="{attrs.mobile}"
				/>
			</div>
		</fn:match>

	</b:layer>
</div>
`,"./app/ui-block/layer-confirm-clear-folder/layer-confirm-clear-folder.html")}.apply(t,r))||(e.exports=a)},49260:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="standard" test="attrs.standard"/>
	<bem:mod name="center" test="attrs.center"/>
	<bem:mod name="media" test="attrs.media"/>
	<bem:mod name="{attrs.name}" test="attrs.name"/>

	<fn:match name="header">
		<span
			bem:elem="back"
			remit:click="layer:close">
			<b:button2 text="{i18n(\'Назад\')}"
				ico="back"
				pure
				touch
				short
				text-center
			/>
		</span>
		<span bem:elem="title">Title</span>
	</fn:match>

	<fn:match name="content">
		<b:nav-folders
				models="{app.model.folders}"
				touch-nav
				counters-off/>
	</fn:match>

	<!-- Здесь нужно вставить кнопку Назад -->
	<div bem:elem="header">
		<fn:apply-match name="header"/>
	</div>

	<div class="layer-mobile__content">
		<fn:apply-match name="content"/>
	</div>

	<div class="layer-mobile__footer">
		<fn:apply-match name="footer"/>
	</div>
</div>
`,"./app/ui-block/layer-mobile/layer-mobile.html")}.apply(t,r))||(e.exports=a)},97485:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:match name="content">
		<div bem:elem="content">
			<b:list-nested-moveto-folder
					model="{attrs.letter}"
					folder="{attrs.folder || attrs.letter.get('folder')}"
					folders="{attrs.folders || app.model.folders}"
					lettersFoldersIds="{attrs.lettersFoldersIds}"
					touch="{attrs.mobile}"
					allow-new-folder
					allow-move="{false}"
					use:mediator="pony-mode folders-actions letters-selections"
					qa:id="list-moveto-folder"
					remit:move="folders:click"
			/>
		</div>
	</fn:match>

	<b:layer
			name="move-to-folder"
			remit:close="layer:close"
			close
			header
			center
			hiddenfooter
			standard
			resolvable
	>
		<fn:match name="header">
			<div bem:elem="title">{i18n(\'Переместить в папку\')}</div>
		</fn:match>

		<fn:match name="content">
			<div bem:elem="row">
				<fn:apply-match name="content"/>
			</div>
		</fn:match>

	</b:layer>
</div>
`,"./app/ui-block/layer-move-to-folder/layer-move-to-folder.html")}.apply(t,r))||(e.exports=a)},10454:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div use:mediator="layout-manager">
	<fn:var name="hideHeadline" value="{attrs['hide-headline']}" />

	<bem:mod name="hidden" test="!attrs.active"/>
<!-- Выглядит так, что это с точки зрения текущего дизайна только лишнее FMAIL-15984 -->
<!--	<bem:mod name="mobile-full" test="attrs.mobile && !attrs.compact"/>-->
	<bem:mod name="mobile-compact" test="attrs.mobile && !!attrs.compact"/>
	<bem:mod name="fullscreen" test="attrs.fullscreen"/>
	<!-- Потому что на планшетах нам не нужен "мобильный" вид, используем десктопный. Но z-index надо переписать -->
	<bem:mod name="foreground" test="attrs.foreground"/>

	<bem:mod name="new-toolbar" test="_this.useNewToolbar()"/>

	<!-- Затемнение на заднем фоне -->
	<div bem:elem="dimmer">
		<b:dimmer
			fn:if="attrs.dimmer && attrs.active"
			color="{attrs['dimmer-color']}"
		/>
	</div>

	<!-- Контейнер, чтобы dimmer не попадал в скролл, он же ловит клики "как бы" по диммеру -->
	<div bem:elem="container" remit:click="dimmer:click" ref="container">
		<bem:mod name="silent" test="attrs.silent"/>
		<bem:mod name="hide-headline" test="hideHeadline"/>
		<!-- Дополнительные отступы -->
		<div bem:elem="spacer" fn:if="!attrs.mobile">
			<bem:mod name="hide-headline" test="hideHeadline"/>
		</div>

		<!-- Место рендера блока -->
		<div bem:elem="block" ref="block" qa:id="layer-window-block"/>

		<!-- Место показа нотификаций поверх лейера -->
		<b:notify-stack id="notify-stack" fixed/>
	</div>
</div>
`,"./app/ui-block/layer-window/layer-window.html")}.apply(t,r))||(e.exports=a)},50959:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="standard" test="attrs.standard"/>
	<bem:mod name="media" test="attrs.media"/>
	<bem:mod name="compose" test="attrs.compose"/>
	<bem:mod name="center" test="attrs.center"/>
	<bem:mod name="size" value="{attrs.size}"/>
	<bem:mod name="wide" test="attrs.wide"/> <!-- OCTAVIUS-1835 -->
	<bem:mod name="{attrs.name}" test="attrs.name"/>

	<div bem:elem="controls" qa:id="controls">
		<b:button2
			fn:if="attrs.collapse"
			remit:click="collapse"
			qa:id="collapse"
			ico="minimize"
			text="{i18n(\'Свернуть\')}"
			size="m"
			pure
			clean
			short
			tab-index="1100"
			centered
		/>

		<b:button2
			fn:if="attrs.close"
			remit:click="close"
			qa:id="close"
			ico="close"
			text="{i18n(\'Закрыть\')}"
			size="m"
			pure
			short
			always-bright="{this.isIframe()}"
			radar-id="close"
			tab-index="1000"
			centered
		/>
	</div>

	<div bem:elem="header" fn:if="attrs.header" qa:id="header">
		<fn:apply-match name="header"/>
	</div>

	<div bem:elem="content" qa:id="content">
		<fn:apply-match name="content"/>
	</div>

	<div bem:elem="footer" fn:if="!attrs.hiddenfooter" qa:id="footer">
		<fn:apply-match name="footer"/>
	</div>
</div>
`,"./app/ui-block/layer/layer.html")}.apply(t,r))||(e.exports=a)},86669:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span qa:state="{attrs.type}" xmlns:fn="http://www.w3.org/1999/html">
	<fn:var name="isDragIconShown" value="{attrs.isDragIconShown}"/>
	<fn:var name="ponyMode" value="{attrs.ponymode}"/>

	<bem:mod name="size" value="{attrs.size}"/>
	<bem:mod name="type" value="{attrs.type}"/>
	<bem:mod name="vertical-fit" test="attrs['vertical-fit']"/>
	<bem:mod name="bordered" test="attrs.bordered"/>
	<bem:mod name="letter" test="attrs.letter"/>
	<bem:mod name="mobile" test="attrs.mobile"/>
	<bem:mod name="right-padded" test="attrs['hide-ads']"/>

	<!-- Костыль исключительно для IE11/Edge 14. НЕ ИСПОЛЬЗОВАТЬ ДЛЯ НОРМАЛЬНОЙ ЛОГИКИ (тк потом отпилим) -->
	<bem:mod name="left_shortcut" test="attrs['is-shortcut-left']"/>
	<bem:mod name="right_shortcut" test="attrs['right-column'] < 60"/>

	<fn:attr name="style" value="{_this._getInlineStyle()}"/>

	<fn:match name="main-frame" args="layout">
		<div bem:elem="search-placeholder" fn:if="attrs['hide-headline'] && attrs['new-toolbar']" class="header-container" ref="no-headline-search"/>
		<div bem:elem="content-column">
			<fn:if test="layout.type === '3pane' || app.route.is('#letters #search')">
				<div bem:elem="sidebar" ref="sidebar-column" bem:mod="size-{attrs['sidebar-column']}">
					<div bem:elem="column" bem:mod="sidebar">
						<div bem:elem="column-wrapper">
							<fn:apply-match name="main-frame-sidebar" attrs="layout"/>
						</div>
						<div
								fn:if="attrs['sidebar-resizable'] && layout.type == '3pane'"
								bem:elem="resizer"
								bem:mod="sidebar"
								ref="sidebar-column-resizer"
								promo:id="{isDragIconShown ? 'sidebar-column-resizer-wrapper' : 'sidebar-column-resizer'}"
								qa:id="resizer-3pane"
						>
							<bem:mod name="with-icon" test="isDragIconShown"/>

							<div
								bem:elem="icon-wrapper"
								bem:mod="sidebar-column"
								fn:if="isDragIconShown"
								promo:id="{isDragIconShown ? 'sidebar-column-resizer' : ''}"
							>
								<bem:mod name="compact" test="ponyMode"/>

								<b:ico
									name="navigation_drag_indicator"
									fn:if="isDragIconShown"
								/>
							</div>
						</div>
					</div>
				</div>
			</fn:if>

			<fn:if test="layout.type === '3pane' || app.route.is('#read-letter #search-letter')">
				<div bem:elem="content">
					<fn:apply-match name="main-frame-content" args="layout"/>
				</div>
			</fn:if>
		</div>
	</fn:match>

	<fn:apply-match name="head"/>

	<fn:if test="attrs['left-column']">
		<div bem:elem="column" bem:mod="left" qa:id="sidebar" ref="left-column">
			<div bem:elem="column-wrapper">
				<fn:apply-match name="left-column"/>
			</div>
			<div
				bem:elem="resizer"
				bem:mod="left"
				ref="left-column-resizer"
				fn:if="attrs.resizable"
				qa:id="resizer"
				promo:id="{isDragIconShown ? 'left-column-resizer-wrapper': 'left-column-resizer'}"
			>
				<bem:mod name="with-icon" test="isDragIconShown"/>

				<div
					bem:elem="icon-wrapper"
					promo:id="{isDragIconShown ? 'left-column-resizer' : ''}"
				>
					<bem:mod name="compact" test="ponyMode"/>

					<b:ico
						name="navigation_drag_indicator"
						fn:if="isDragIconShown"
					/>
				</div>
			</div>
		</div>
	</fn:if>

	<div bem:elem="main-frame" ref="main-frame">
		<fn:apply-match name="main-frame"/>
	</div>

	<fn:var name="showRightColumn" value="{!!(__vmatches['right-column'] && attrs['right-column'])}"/>

	<fn:if test="showRightColumn || _this.useWidgetColumn()">
		<div bem:elem="column" bem:mod="right" qa:id="advert-column">
			<bem:mod name="right-indented" test="attrs['right-column-indented']"/>
			<bem:mod name="right-todo" test="attrs.showWidget"/>
			<bem:mod name="right-widget" test="attrs.showWidgetColumn"/>
			<bem:mod name="right-hidden" test="!showRightColumn && !attrs.showWidgetColumn"/>
			<fn:apply-match name="right-column"/>
		</div>
	</fn:if>

	<fn:apply-match name="foot"/>
	<fn:apply-match name="dimmer"/>
</span>
`,"./app/ui-block/layout/layout.html")}.apply(t,r))||(e.exports=a)},55935:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="letter-blockquote">
	<bem:mod name="first" test="attrs.index === 0"/>
	<bem:mod name="ponymode" test="attrs.ponymode"/>

	<fn:var name="message" value="{attrs['message']}" />
	<fn:var name="blockquote" value="{attrs.blockquote}"/>
	<fn:var name="letterShowEmail" value="{attrs.letterShowEmail}"/>

	<fn:if test="blockquote.isSenderFully">
		<div bem:elem="header">
			<b:avatar
				size="s"
				src="{blockquote.avatar}"
				anonymous="{blockquote.anonymous}"
			/>
			<fn:if test="letterShowEmail">
				<span
					qa:id="name"
					bem:elem="name"
					fn:if="blockquote.email"
				>
					{blockquote.email}
				</span>
				<span
					qa:id="name"
					bem:elem="email"
					fn:if="blockquote.name"
				>
					(<bem:mod name="anonymous" test="blockquote.anonymous"/>{blockquote.name})
				</span>
			</fn:if>
			<fn:if test="!letterShowEmail">
				<span
					qa:id="name"
					bem:elem="name"
					fn:if="blockquote.name"
				>
					<bem:mod name="anonymous" test="blockquote.anonymous"/>{blockquote.name}
				</span>
				<span
					qa:id="email"
					bem:elem="email"
					fn:if="blockquote.email"
				>
					<fn:value mod="addBrackets">blockquote.email</fn:value>
				</span>
			</fn:if>
			<time bem:elem="time" qa:id="time">
				<fn:value mod="letterAttachLinkDate">blockquote.timestamp</fn:value>
			</time>
		</div>
	</fn:if>

	<div bem:elem="body" qa:id="body">
		<b:html-parser
			id="parser"
			content="{blockquote.body}"
			darkosha="{attrs.darkosha}"
			message="{message}"
			remit:zoom="blockquote-zoom"
		/>
	</div>

	<!-- Бордер -->
	<b:delimeter/>
</div>
`,"./app/ui-block/letter-blockquote/letter-blockquote.html")}.apply(t,r))||(e.exports=a)},6889:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div/>
`,"./app/ui-block/letter-body-amp/letter-body-amp.html")}.apply(t,r))||(e.exports=a)},88285:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="letter-body">
	<!-- Переменные -->
	<fn:var
		name="hasQuotes"
		value="{!!(attrs['quotes-raw'] || attrs['quotes-formatted'].length)}"
	/>

	<fn:var
		name="bodyRaw"
		value="{attrs['body-raw']}"
	/>

	<fn:var
		name="darkMode"
		value="{attrs['dark-mode']}"
	/>

	<fn:var
		name="message"
		value="{attrs['message']}"
	/>

	<!-- Модификаторы -->
	<bem:mod name="mobile" test="attrs.mobile"/>

	<bem:mod
		name="formatted-quotes"
		test="!attrs['quotes-mode-raw'] && attrs['quotes-formatted'].length"
	/>

	<bem:mod
		name="raw-quotes"
		test="attrs['quotes-mode-raw'] && attrs['quotes-raw']"
	/>

	<bem:mod
		name="quotes"
		test="hasQuotes"
	/>

	<bem:mod name="dark-mode" test="darkMode"/>

	<!-- Содержимое -->
	<div bem:elem="body" qa:id="body">
		<bem:mod name="no-scroll" test="attrs['preview-mode']"/>
		<div bem:elem="body-wrapper" ref="body">
			<div bem:elem="body-content" tabindex="-1" ref="js-body">
				<!-- отрисовка письма всего один раз и навсегда -->
				<b:html-parser
					id="body-parser"
					fn:if="bodyRaw"
					content="{bodyRaw}"
					darkosha="{_this.getOrCreateDarkosha()}"
					message="{message}"
					dark-mode="{darkMode}"
					remit:zoom="letter:zoom"
				/>
			</div>
		</div>
	</div>

	<!-- Есть цитаты? -->
	<fn:if test="hasQuotes">
		<!-- Тоглер сворачивания цитат -->
		<fn:if test="attrs.collapsable">
			<div bem:elem="badge">
				<b:button2
					badge
					secondary
					ico="navigation:more"
					remit:click="blockquote:toggle"
					qa:id="blockquote-toggler"
					centered
				/>
			</div>
		</fn:if>

		<!-- Когда свернуть нельзя, просто подписываем -->
		<fn:if test="!attrs.collapsable">
			<div
				bem:elem="title"
				qa:id="blockquote-title"
			>{i18n(\'вся переписка\')}</div>
		</fn:if>

		<!-- Тело цитат -->
		<div
			ref="blockquotes"
			bem:elem="blockquotes"
			qa:id="blockquotes">
			<!-- Если цитаты развернуты -->
			<fn:if test="!attrs.collapsable || !_this.isCollapsed()">
				<!-- Старые цитаты -->
				<fn:if test="attrs['quotes-mode-raw']">
					<div bem:elem="blockquotes-raw" qa:id="raw">
						<b:html-parser
							id="quote-parser"
							content="{attrs['quotes-raw']}"
							darkosha="{_this.getOrCreateDarkosha()}"
							message="{message}"
						/>
					</div>
				</fn:if>

				<!-- Новые цитаты -->
				<fn:if test="!attrs['quotes-mode-raw']">
					<fn:for data="attrs['quotes-formatted']" as="blockquote" key="key">
						<b:letter-blockquote
							key="{key}"
							index="{key}"
							blockquote="{blockquote}"
							ponymode="{attrs.ponymode}"
							message="{message}"
							darkosha="{_this.getOrCreateDarkosha()}"
							remit:blockquote-zoom="letter:zoom"
						/>
					</fn:for>
				</fn:if>
			</fn:if>
		</div>
	</fn:if>
</div>
`,"./app/ui-block/letter-body/letter-body.html")}.apply(t,r))||(e.exports=a)},96284:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="letter-calendar">
	<fn:var
		name="darkMode"
		value="{attrs['dark-mode']}"
	/>

	<fn:value output="raw">attrs.html</fn:value>
</div>
`,"./app/ui-block/letter-calendar/letter-calendar.html")}.apply(t,r))||(e.exports=a)},43148:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	qa:id="category:{attrs.name}"
	promo:id="{attrs.promoid || ''}"
>
	<bem:mod name="{attrs.name}"/>

	<b:badge
		transparent="{attrs.flat}"
		text="{_this.getText()}"
		title="{_this.getTitle()}"
		ico="{_this.getIco()}"
		short="{attrs.short}"
		size="{attrs.size || 'l'}"/>
</div>
`,"./app/ui-block/letter-category/letter-category.html")}.apply(t,r))||(e.exports=a)},62593:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="confirm-receipt">

	<bem:mod name="mobile" test="attrs.mobile"/>

	<div bem:elem="icon">
		<b:ico name="categories:mail" size="s" />
	</div>

	<div bem:elem="icon-touch">
		<div bem:elem="icon-touch-wrapper">
			<b:ico name="categories:mail" size="s" />
		</div>
	</div>

	<div bem:elem="wrapper">
		<div bem:elem="info">
			{i18n(\'Отправитель письма запросил подтверждение о прочтении.\')}
			<b:link
				fn:if="!attrs['hide-help-link']"
				href="{attrs['help-link']}"
				text="{i18n(\'Что это?\')}"
				target="_blank"
				secondary
				qa:id="help-link"
			/>
		</div>

		<div fn:if="!attrs.mobile" bem:elem="confirm">
			<b:button-link
				remit:click="confirm"
				text="{i18n(\'Подтвердить, что прочитано\')}"
				qa:id="confirm-button"
			/>
		</div>

		<div fn:if="attrs.mobile" bem:elem="confirm-touch">
			<b:button2
					remit:click="confirm"
					text="{i18n(\'Подтвердить прочтение\')}"
					primary
					nowrap
					text-overflow
					qa:id="confirm-button"
			/>
		</div>
	</div>
</div>
`,"./app/ui-block/letter-confirm-receipt/letter-confirm-receipt.html")}.apply(t,r))||(e.exports=a)},96319:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	qa:id="{attrs.dir}"
	qa:state="active:{attrs.active},dangerous:{!!attrs.dangerous}"
	title="{attrs.contact.email}"
	remit:contextmenu="rightclick"
>
	<bem:mod name="active" test="attrs.active"/>
	<bem:mod name="dangerous" test="attrs.dangerous && attrs.dir === 'from'"/>
	<bem:mod name="pony-mode" test="attrs['pony-mode']"/>

	<fn:choose>
		<fn:when test="_this.isNameWithEmailMode()">
			{attrs.contact.name ? attrs.contact.name : attrs.contact.email}
			<span class="letter-contact__email">
				{attrs.contact.email}
			</span>
		</fn:when>

		<fn:otherwise>
			<fn:value>_this.getContact()</fn:value>
		</fn:otherwise>
	</fn:choose>
	<fn:value>attrs.isLast ? '' : ','</fn:value>
</span>
`,"./app/ui-block/letter-contact/letter-contact.html")}.apply(t,r))||(e.exports=a)},52875:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:if test="!_this.needAnimate()">
		<bem:mod name="compact" test="attrs.compact" />

		<fn:choose>
			<fn:when test="attrs.compact">
				<div bem:elem="avatar-container">
					<fn:choose>
						<fn:when test="_this.is3PaneRedesignV3()">
							<div bem:elem="avatar-3pane-v3">
								<bem:mod name="compact" test="attrs.ponymode" />
							</div>
						</fn:when>
						<fn:otherwise>
							<div bem:elem="avatar-3pane">
								<bem:mod name="compact" test="attrs.ponymode" />
							</div>
						</fn:otherwise>
					</fn:choose>
				</div>
				<div bem:elem="text">
					<div bem:elem="string" bem:mod="1"></div>
					<div bem:elem="string" bem:mod="2"></div>
					<div bem:elem="string" bem:mod="3"></div>
				</div>
			</fn:when>
			<fn:otherwise>
				<div bem:elem="avatar-container">
					<div bem:elem="avatar-2pane">
                        <bem:mod name="compact" test="attrs.ponymode" />
                    </div>
				</div>
				<div bem:elem="text">
					<div bem:elem="string" bem:mod="1"></div>
					<div bem:elem="string" bem:mod="2"></div>
				</div>
			</fn:otherwise>
		</fn:choose>
	</fn:if>
</div>
`,"./app/ui-block/letter-list-item-adv-placeholder/letter-list-item-adv-placeholder.html")}.apply(t,r))||(e.exports=a)},514:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="native-adv">
	<bem:mod name="rounded" test="attrs.rounded"/>
	<bem:mod name="topline" test="attrs.topline"/>

	<fn:choose>

			<fn:when test="attrs.compact">
				<!-- 3pane -->
				<bem:mod name="compact-indent" test="attrs.indent"/>
				<fn:choose>

					<fn:when test="attrs.ponymode || attrs.indent">
						<!-- 3pane && (ponymode || inMetathread) -->
						<div bem:elem="container" bem:mod="compact_compressed">
							<b:letter-list-item-adv-placeholder compact="{attrs.compact}" ponymode="{attrs.ponymode}"></b:letter-list-item-adv-placeholder>
							<div bem:elem="adv-content" ref="adv-content"></div>
						</div>
					</fn:when>

					<fn:otherwise>
						<!-- 3pane && !(ponymode || inMetathread) -->
						<div bem:elem="container" bem:mod="compact">
							<b:letter-list-item-adv-placeholder compact="{attrs.compact}" ponymode="{attrs.ponymode}"></b:letter-list-item-adv-placeholder>
							<div bem:elem="adv-content" ref="adv-content"></div>
						</div>
					</fn:otherwise>

				</fn:choose>

			</fn:when>

			<fn:otherwise>
				<!-- 2pane -->
				<bem:mod name="indent" test="attrs.indent"/>
				<fn:choose>
					<fn:when test="attrs.ponymode">
						<!-- 2pane && ponymode -->
						<div bem:elem="container" bem:mod="compressed">
							<b:letter-list-item-adv-placeholder compact="{attrs.compact}" ponymode="{attrs.ponymode}"></b:letter-list-item-adv-placeholder>
							<div bem:elem="adv-content" ref="adv-content"></div>
						</div>
					</fn:when>

					<fn:otherwise>
						<!-- 2pane && !ponymode -->
						<div bem:elem="container">
							<b:letter-list-item-adv-placeholder compact="{attrs.compact}" ponymode="{attrs.ponymode}"></b:letter-list-item-adv-placeholder>
							<div bem:elem="adv-content" ref="adv-content"></div>
						</div>
					</fn:otherwise>
				</fn:choose>
			</fn:otherwise>

	</fn:choose>

	<fn:if test="!attrs['no-delimeter']">
		<b:delimeter full/>
		<b:delimeter last/>
	</fn:if>
</div>
`,"./app/ui-block/letter-list-item-adv/letter-list-item-adv.html")}.apply(t,r))||(e.exports=a)},35038:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<b:letter-list-item
		compact="{attrs.compact}"
		touch="{attrs.touch}"
		disabled
		draft
		disable-select
		disable-subject
		disable-category
	/>
</div>
`,"./app/ui-block/letter-list-item-placeholder/letter-list-item-placeholder.html")}.apply(t,r))||(e.exports=a)},23142:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a
	remit:click="clickletter"
	qa:id="letter-item:subject:{attrs.model.get('subject') || i18n(\'<Без темы>\')}"
>

	<fn:var name="compressed" value="{attrs.compressed}"/>
	<fn:var name="message" value="{attrs.model}"/>
	<fn:var name="messageFolder" value="{message.getFolder()}"/>
	<fn:var name="messageSubject" value="{message.get('subject') || i18n(\'<Без темы>\')}" />

	<fn:var name="selectMode" value="{attrs['select-mode']}"/>
	<fn:var name="selectable" value="{!attrs['disable-select']}"/>
	<fn:var name="isDraft" value="{attrs.draft}"/>

	<fn:if test="message.isHigh()">
		<fn:var name="category" value="important"/>
	</fn:if>

	<fn:if test="!attrs['disable-category'] && message.get('transaction_category') && !messageFolder.isSpam()">
		<fn:var name="category" value="{message.get('transaction_category')}"/>
	</fn:if>

	<!-- Особый случай, когда у компактного письма без темы приоритет склеивается с папкой -->
	<fn:var name="specialCase"
			value="{attrs.compact && attrs['disable-subject'] && category}"/>

	<fn:attr name="data-shortcut" value="list-letter"/>
	<fn:attr name="active" test="attrs.selected"/>
	<fn:attr name="tabindex" value="-1"/>
	<fn:attr name="data-id" value="{message.get('id')}"/>
	<fn:attr name="data-draggable-id" value="{message.get('id')}"/>
	<fn:attr name="data-uidl-id" value="{message.get('last')}"/>

	<bem:mod name="unread_{message.is('flags.unread')}"/>
	<bem:mod name="flagged_{message.is('flags.flagged')}"/>
	<bem:mod name="attach_{message.is('flags.attach')}"/>

	<bem:mod name="active" test="attrs.active"/>
	<bem:mod name="showfolder" test="attrs.showfolder || specialCase || isDraft"/>
	<bem:mod name="selected" test="attrs.selected"/>
	<bem:mod name="first" test="attrs.first" />
	<bem:mod name="last" test="attrs.last" />
	<bem:mod name="select-mode" test="selectMode"/>
	<bem:mod name="draft" test="isDraft"/>
	<bem:mod name="disabled" test="attrs.disabled"/>

	<bem:mod name="disable-user-select" value="{attrs['disable-user-select'] ? 'on' : 'off'}"/>
	<bem:mod name="disable-subject" value="{attrs['disable-subject'] ? 'on' : 'off'}"/>

	<bem:mod name="compressed" test="compressed"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="fluid" test="!attrs.compact"/>
	<bem:mod name="touch" test="attrs.touch" />
	<bem:mod name="swipe-actions-touched" test="attrs['swipe-actions-touched']"/>
	<bem:mod name="swipe-actions-visible" test="attrs['swipe-actions-visible']"/>
	<bem:mod name="swipe-actions-animated" test="attrs['swipe-actions-animated']"/>

	<bem:mod name="hover-support" test="attrs['hover-support']"/>
	<bem:mod name="indent" test="attrs.indent"/>

	<!-- Пометка прочитанным -->
	<fn:match name="status-unread">
		<div bem:elem="unread" remit:click.prevent="togglestatus:unread" qa:id="unread">
			<bem:mod name="plain" test="!(message.is('flags.forward') || message.is('flags.reply'))"/>
			<b:letter-status2
				name="unread"
				small
				forward="{message.is('flags.forward')}"
				reply="{message.is('flags.reply')}"
				state="{message.is('flags.unread')}"/>
		</div>
	</fn:match>

	<!-- Пометка важным -->
	<fn:match name="status-flag">
		<div bem:elem="flag" remit:click.prevent="togglestatus:flagged" qa:id="flagged">
			<b:letter-status2
				name="flagged"
				small
				state="{message.is('flags.flagged')}"/>
		</div>
	</fn:match>

	<!-- Бейдж папки -->
	<fn:match name="folder">
		<fn:choose>
			<fn:when test="isDraft">
				<div bem:elem="folder">
					<b:badge text="{i18n(\'Черновик\')}" size="l"/>
				</div>
			</fn:when>
			<fn:when test="specialCase">
				<b:letter-category
					name="{category}"
					short="{attrs.showfolder}"
				/>

				<b:badge
					fn:if="attrs.showfolder"
					text="{messageFolder.get('name')}"
					size="l"
				/>
			</fn:when>
			<fn:when test="attrs.showfolder">
				<fn:choose>
					<fn:when test="message.isSchedule()">
						<!-- Отложенная отправка (когда показываем имя папки) -->
						<div bem:elem="folder">
							<b:badge title="{message.get('send_date') | scheduleDate}" text="{messageFolder.get('name')}" size="l"/>
						</div>
					</fn:when>
					<fn:otherwise>
						<div bem:elem="folder">
							<b:badge text="{messageFolder.get('name')}" size="l"/>
						</div>
					</fn:otherwise>
				</fn:choose>
			</fn:when>
		</fn:choose>
	</fn:match>

	<!-- Бейдж треда -->
	<fn:match name="thread-badge">
		<fn:var
			name="text"
			value="{message.get('length') > 99 ? '99+' : message.get('length')}"
			test="message.get('length') > 1"/>

		<div
			bem:elem="thread-count"
			fn:if="!(attrs['disable-subject'] && attrs.compact) && (text || category)">
			<bem:mod name="1" test="message.get('length') > 1"/>
			<bem:mod name="2" test="message.get('length') > 9"/>
			<bem:mod name="3" test="message.get('length') > 99"/>
			<b:letter-category name="{category}" text="{text}" short="{!text}"/>
		</div>
	</fn:match>

	<!-- Отложенная отправка (когда не показываем имя папки) -->
	<fn:match name="schedule">
		<fn:if test="!attrs.showfolder">
			<div bem:elem="schedule">
				<b:letter-status2
					title="{message.get('send_date') | scheduleDate}"
					name="schedule"
					small/>
			</div>
		</fn:if>
	</fn:match>

	<!-- Иконка вложений -->
	<fn:match name="attach">
		<div bem:elem="attach">
			<b:letter-status2
				name="attach"
				small
				state="{true}"/>
		</div>
	</fn:match>

	<!-- Время отправки письма -->
	<fn:match name="date">
		<div bem:elem="date">
			<fn:value mod="letterDate">message.get('date')</fn:value>
		</div>
	</fn:match>

	<!-- Тема письма -->
	<fn:match name="subject">
		<div
			bem:elem="subject"
			qa:id="subject"
		>
			<fn:if test="!attrs.search">
				{messageSubject}
			</fn:if>

			<fn:if test="attrs.search">
				<b:highlighter
					text="{messageSubject}"
					color="{message.meta('search_subject.color')}"
				/>
				<!-- распорка -->
				<fn:value>' '</fn:value>
			</fn:if>
		</div>
	</fn:match>

	<!-- Сниппет -->
	<fn:match name="snippet">
		<div bem:elem="snippet" qa:id="snippet">
			<fn:if test="!attrs.search">
				{message.get('snippet')}
			</fn:if>

			<fn:if test="attrs.search">
				<b:highlighter
					text="{message.meta('search_snippet.value')}"
					color="{message.meta('search_snippet.color')}"
				/>
			</fn:if>
		</div>
	</fn:match>

	<!-- Отправитель -->
	<fn:match name="addrs">
		<div bem:elem="addrs">
			<fn:value mod="correspondent">_this.getCorrespondents()</fn:value>
		</div>
	</fn:match>

	<!-- Аватарка -->
	<fn:match name="avatar-wrap">
		<div bem:elem="avatar-wrap">
			<fn:apply-match name="status-unread" fn:if="!attrs.compact"/>
			<div bem:elem="avatar" remit:click="clickavatar" qa:id="avatar">
				<b:avatar
						size="{attrs.compact && !compressed ? 'm' : 's'}"
						src="{_this.getAvatar()}"
						selectable="{selectable}"
						selected="{attrs.selected}"
						touch="{!attrs['hover-support']}"/>
			</div>
			<fn:apply-match name="status-unread" fn:if="attrs.compact"/>
		</div>
	</fn:match>

	<!-- Наконец то сам контейнер -->
	<b:swipeable use:mediator="swipe-manager"
				 remit:underlay-changed="underlay:changed"
				 remit:animation-changed="animation:changed"
				 remit:pan-changed="pan:changed"

				 max-offset="{attrs.compact ? null : '170'}"
				 disabled="{selectMode}"
				 id="swipeable">
		<fn:match name="swipe-underlay">
			<!-- Подложка контейнера -->
			<b:letter-swipe-actions model="{message}"
									touch="{attrs.touch}"
									compact="{attrs.compact}"
									remit:action-unread="togglestatus:unread"
									remit:action-flagged="togglestatus:flagged"
									remit:action-remove="remove"
									remit:action-spam="spam"
									remit:action-unspam="unspam"
									use:mediator="layout-manager"/>
		</fn:match>

		<fn:match name="swipe-header" bem:block="letter-list-item">
			<!-- Аватарка -->
			<fn:apply-match name="avatar-wrap"/>
		</fn:match>

		<fn:match name="swipe-content" bem:block="letter-list-item">
			<div bem:elem="info">

				<fn:if test="attrs.compact">
					<div bem:elem="content">
						<div bem:elem="column" bem:mod="1">
							<fn:apply-match name="addrs"/>
							<fn:apply-match name="subject" fn:if="!attrs['disable-subject']"/>
							<fn:apply-match name="snippet"/>
						</div>

						<div bem:elem="column" bem:mod="2">
							<fn:apply-match name="date"/>
							<fn:apply-match name="thread-badge" fn:if="!compressed"/>
						</div>
					</div>

					<div bem:elem="footer">
						<fn:apply-match name="folder" fn:if="!attrs['disable-letter-item-folder']"/>
						<fn:apply-match name="schedule" fn:if="message.isSchedule()"/>
						<fn:apply-match name="attach" fn:if="message.is('flags.attach')"/>
						<fn:apply-match name="status-flag"/>
						<fn:apply-match name="thread-badge" fn:if="compressed"/>
					</div>
				</fn:if>

				<fn:if test="!attrs.compact">
					<fn:apply-match name="addrs"/>
					<fn:apply-match name="status-flag"/>
					<fn:apply-match name="thread-badge"/>

					<div bem:elem="subject-wrapper">
						<fn:apply-match name="subject" fn:if="!attrs['disable-subject']"/>
						<fn:apply-match name="snippet"/>
					</div>

					<div bem:elem="info-wrapper">
						<fn:apply-match name="folder" fn:if="!attrs['disable-letter-item-folder']"/>
						<fn:apply-match name="schedule" fn:if="message.isSchedule()"/>
						<fn:apply-match name="attach" fn:if="message.is('flags.attach')"/>
						<fn:apply-match name="date"/>
					</div>
				</fn:if>
			</div>
		</fn:match>
	</b:swipeable>
</a>
`,"./app/ui-block/letter-list-item/letter-list-item.html")}.apply(t,r))||(e.exports=a)},99931:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="layout" value="{attrs.layout}"/>
	<fn:var name="route" value="{attrs.route}"/>
	<fn:var name="router" value="{attrs.router}"/>
	<fn:var name="models" value="{attrs.models}"/>
	<fn:var name="status" value="{attrs.status}"/>
	<fn:var name="metathreads" value="{attrs.metathreads}"/>
	<!-- Вынести страницу с ошибкой в отдельный блок -->
	<fn:var name="letterNotFound" value="{attrs['letter-not-found']}" />
	<fn:var name="transparent" value="{attrs.transparent && layout.isLessThen('xs')}"/>
	<fn:var name="empty" value="{!models.length || letterNotFound}"/>
	<fn:var name="touch" value="{attrs.touch}"/>
	<fn:var name="compact" value="{attrs.compact}"/>
	<fn:var name="folders" value="{attrs.folders}"/>
	<fn:var name="folder" value="{attrs.folder}"/>
	<fn:var name="ponyMode" value="{attrs.ponymode}"/>
	<fn:var name="unsubscribeList" value="{attrs.unsubscribeList}"/>
	<fn:var name="advTopLine" value="{attrs.advTopLine}"/>
	<fn:var name="hideAds" value="{attrs['hide-ads']}"/>
	<fn:var name="search" value="{route.is('#search #search-letter')}"/>

	<bem:mod name="has-letters" test="!empty"/>
	<bem:mod name="touch" test="touch"/>
	<bem:mod name="transparent" test="transparent"/>
	<bem:mod name="empty-touch" test="empty && touch"/>

	<bem:mod test="!hideAds && advTopLine && !compact && !ponyMode" name="top-line-adv-2pane"/>
	<bem:mod test="!hideAds && advTopLine && !compact && ponyMode" name="top-line-adv-2pane_pony-mode"/>
	<bem:mod test="!hideAds && advTopLine && compact && !ponyMode" name="top-line-adv-3pane"/>
	<bem:mod test="!hideAds && advTopLine && compact && ponyMode" name="top-line-adv-3pane_pony-mode"/>

	<b:draggable
		enabled="{!_this.isTouchDevice()}"
		remit:preparedragelement="preparedragelement"
		use:mediator="todo-manager"
	>
		<!-- TODO: завернуть class-name в selector() -->
		<b:react-async
			class-name="letter-list__react"
			id="reactList"
			blockRadarId="llist"
			useErrorBoundary
			componentClass="{_this.component}"
			component="DatasetLetters"
			qaEnabled="{attrs['qa-enabled']}"
			useMediators="{['letters-shortcut', 'letters-selection', 'letters-actions', 'letters-loader', 'compose-manager', 'flags', 'search-manager', 'paginator-manager', 'welcome-block-manager', 'unsubscribe-actions', 'themes-manager', 'folders-navigation']}"
			models="{models}"
			onScrollToBottom="{_this.onScrollToBottom}"
			onScroll="{_this.onScroll}"
			router="{router}"
			folder="{folder}"
			thread="{route.is('#search #search-letter') ? route.params.id : route.params.letter}"
			folders="{folders}"
			status="{status}"
			metathreads="{metathreads}"
			compact="{compact}"
			touch="{touch}"
			pony-mode="{ponyMode}"
			select-mode="{layout.selectMode}"
			letter-not-found="{letterNotFound}"
			search="{search}"
			search-letter="{route.is('#search-letter')}"
			hidden-payment-dies="{attrs['hidden-payment-dies']}"
			unsubscribeList="{unsubscribeList}"
			showBackToParentFolder="{attrs['showBackToParentFolder']}"
		/>
		<b:paginator-container
			visible="{attrs['nav-up']}"
			nav-up="{attrs['nav-up-enabled']}"

			use:mediator="layout-manager compose-manager"
		>
			<fn:match name="nav-up">
				<b:button2
					ico="navigation:arrow_up"
					title="{i18n(\'Наверх\')}"
					pure
					disabled="{!attrs['nav-up']}"
					qa:id="paginator-button-up"
					remit:click="paginator:up"
					centered
				/>
			</fn:match>
		</b:paginator-container>
	</b:draggable>
</div>
`,"./app/ui-block/letter-list/letter-list.html")}.apply(t,r))||(e.exports=a)},7005:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
    <fn:if test="attrs.showSkeleton">
        <div ref="skeleton" class="skeleton">
            <b:react-async
                component="LetterMetaSkeleton"
                darkMode="{attrs['dark-mode']}"
                animateContent="{attrs['start-animation']}"
                onMount="{_this.onSkeletonMount}"
            />
        </div>
    </fn:if>
    <div ref="container" class="letter-meta-container">
        <fn:add-class name="letter-meta-container-with-skeleton" test="attrs.showSkeleton"/>
    </div>
</div>
`,"./app/ui-block/letter-meta/letter-meta.html")}.apply(t,r))||(e.exports=a)},21828:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="{attrs.name}:{attrs.state}">
	<fn:var name="data" value="{_this.getData()}"/>

	<bem:mod name="{attrs.name}"/>
	<bem:mod name="{attrs.state}"/>
	<bem:mod name="disabled" test="attrs.disabled"/>

	<b:button2
			ico="{data.ico}"
			ico-hover="{data.icoHover}"
			title="{data.title}"
			disabled="{attrs.disabled}"
			size="{attrs.size}"
			touch="{attrs.touch}"
			compact="{attrs.compact}"
			small="{attrs.small}"
			remit:click="button-click"
			secondary
			centered
	/>
</div>
`,"./app/ui-block/letter-status2/letter-status2.html")}.apply(t,r))||(e.exports=a)},76534:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div remit:click.prevent>
	<fn:var name="message" value="{attrs.model}" />
	<fn:var name="messageFolder" value="{message.getFolder()}" />

	<bem:mod name="touch" test="attrs.touch" />
	<bem:mod name="compact" test="attrs.compact" />

	<!-- Непрочитанность -->
	<div bem:elem="swipe-actions-element">
		<b:button2
			ico="point"
			touch
			pure
			remit:mousedown.prevent="action-unread"
			centered
		/>
	</div>

	<!-- Пометить флажком -->
	<div bem:elem="swipe-actions-element">
		<b:button2
			ico="flag"
			touch
			pure
			remit:mousedown.prevent="action-flagged"
			centered
		/>
	</div>

	<div bem:elem="swipe-actions-element">
		<div bem:elem="swipe-actions-element">
			<b:button2
				ico="folder-move"
				touch
				pure
				remit:mousedown.prevent="click:move"
				centered
			/>
		</div>
	</div>

	<!-- Удалить -->
	<div bem:elem="swipe-actions-element">
		<b:button2
			ico="delete"
			touch
			pure
			remit:mousedown.prevent="action-remove"
			centered
		/>
	</div>

	<!-- Спам/не спам -->
	<div bem:elem="swipe-actions-element">
		<b:button2
			ico="spam-on"
			touch
			pure
			remit:mousedown.prevent="action-spam"
			fn:if="!messageFolder.isSpam()"
			centered
		/>
		<b:button2
			ico="spam-off"
			touch
			pure
			remit:mousedown.prevent="action-unspam"
			fn:if="messageFolder.isSpam()"
			centered
		/>
	</div>
</div>
`,"./app/ui-block/letter-swipe-actions/letter-swipe-actions.html")}.apply(t,r))||(e.exports=a)},48254:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="letter-tooltip:{attrs.type}">
	<!-- Переменные -->
	<fn:var name="disabled" value="{attrs.loading}"/>
	<fn:var name="ponymode" value="{attrs.ponymode}"/>

	<!-- Модификаторы -->
	<bem:mod name="pony-mode" test="ponymode" />
	<bem:mod name="disabled" test="disabled" />

	<div bem:elem="wrapper">
		<div bem:elem="title">
			<fn:value>attrs['title-text']</fn:value>
		</div>

		<!-- Правый край -->
		<div bem:elem="right">
			<!-- Кнопка действия (ссылка) -->
			<div bem:elem="action">
				<b:button-link
					qa:id="action"
					remit:click="action"
					disabled="{disabled}"
					ponymode="{ponymode}"
					text="{attrs['action-text']}"
				/>
			</div>

			<!-- Кнопка закрыть (крестик) -->
			<div bem:elem="close">
				<b:button2
					qa:id="close"
					remit:click="close"

					compact="{attrs.ponymode}"
					ico="actions:close"
					secondary
					short
					size="s"
					centered
				/>
			</div>
		</div>
	</div>
</div>
`,"./app/ui-block/letter-tooltip/letter-tooltip.html")}.apply(t,r))||(e.exports=a)},75320:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Переменные -->
	<fn:var name="message" value="{attrs.model}"/>
	<fn:var name="messageFolder" value="{message.getFolder()}"/>
	<fn:var name="hasAttach" value="{attrs.model.is('attaches.list.length') && _this.isEnableAttach()}"/>
	<fn:var name="hasReplyAll" value="{_this.hasReplyAll(message)}"/>

	<fn:var name="draftReply" value="{message.get('drafts.reply')}"/>
	<fn:var name="draftReplyAll" value="{message.get('drafts.replyall')}"/>
	<fn:var name="draftForward" value="{message.get('drafts.forward')}"/>

	<fn:var name="folders" value="{attrs.folders}"/>
	<fn:var name="ponyMode" value="{attrs.ponymode}"/>

	<!-- Есть ли AMP-контент? -->
	<fn:var name="hasAmp" value="{_this.isAMPLetter()}"/>

	<!-- Есть ли ошибки в AMP-письме? -->
	<fn:var name="hasAmpErrors" value="{attrs['amp-error']}"/>

	<fn:var name="letterMetaType" value="{_this.getLetterMetaHeaderType(message)}" />
	<fn:var name="showPhishingDie" value="{message.get('flags.maybe_phishing')}" />

	<fn:var name="enableFakeCreateTodo" value="{_this.isShowFakeCreateTodo()}" />
	<fn:var name="showAttachList" value="{attrs.showAttachList}" />

	<!-- Модификаторы -->
	<bem:mod name="priority" value="{attrs.model.get('priority')}"/>
	<bem:mod name="unread" value="{attrs.model.get('flags.unread')}"/>
	<bem:mod name="attach" value="{hasAttach}"/>
	<bem:mod name="single" test="attrs.single"/>
	<bem:mod name="first" test="attrs.first"/>
	<bem:mod name="last" test="attrs.last"/>

	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="fluid" test="!attrs.compact"/>
	<bem:mod name="sticky" test="attrs.sticky"/>
	<bem:mod name="native-sticky" test="attrs['native-sticky']"/>

	<bem:mod name="hover-support" test="attrs['hover-support']" />
	<bem:mod name="expanded-next" test="attrs['expanded-next']" />

	<bem:mod name="light-mode" test="!_this.isDarkMode()" />

	<bem:mod name="mobile" test="attrs.mobile" />

	<!-- Иконка AMP -->
	<fn:match name="amp-icon">
		<span bem:elem="amp-icon" qa:id="amp-icon">
			<b:ico name="status:breaking" size="s"/>

			<bem:mod name="error" test="hasAmpErrors"/>

			<fn:attr name="title" value="{i18n(\'Это письмо поддерживает динамический контент\')}" fn:if="!hasAmpErrors"/>
			<fn:attr name="title" value="{i18n(\'При отображении динамического контента письма возникли ошибки\')}" fn:if="hasAmpErrors"/>
		</span>
	</fn:match>

	<!-- Поле "Кому" -->
	<fn:match name="correspondents" args="contacts, dir, limit, mode">
		<fn:var name="contactList" value="{limit ? contacts.slice(0, limit) : contacts}"/>

		<fn:for data="contactList" as="contact" key="contactKey">
			<fn:var name="isCurrent" value="{contact.email == attrs['current-user'].getEmail()}"/>
			<fn:var name="isLast" value="{contactKey + 1 === contactList.length}"/>
			<b:letter-contact
				folder="{messageFolder}"
				key="{'contact-' + contactKey}"
				remit:click.prevent.stop="contact:click"
				event:details="contact"
				use:mediator="contact-selection"
				contact="{contact}"
				dir="{dir}"
				isCurrent="{isCurrent}"
				dangerous="{dir === 'from' && _this.isProbablyPhishing()}"
				pony-mode="{ponyMode}"
				isLast="{isLast}"
				mode="{mode}"
			/>
		</fn:for>
	</fn:match>

	<!-- Дропдаун меток -->
	<fn:match name="add-tag">
		<div bem:elem="tags">
			<b:dropdown
					fn:if="!attrs['preview-mode']"
					title="{i18n(\'Добавить метку\')}"
					ico="status:tag"
					qa:id="add-tag"
					secondary
					short
					expand-left
					touch="{attrs.touch && !attrs.mobile}"
			>
				<fn:match name="items">
					<b:react-async
							component="TagsPicker"
							model="{attrs.model}"
							tags="{attrs.model.get('flags.tags')}"
							xrayFrom="message_icon_menu"
					/>
				</fn:match>
			</b:dropdown>
		</div>
	</fn:match>

	<!-- Пометка прочитанным -->
	<fn:match name="status-unread">
		<div bem:elem="unread" qa:id="unread">
			<bem:mod name="plain" test="!(message.is('flags.forward') || message.is('flags.reply'))"/>
			<b:letter-status2
					remit:button-click.prevent="togglestatus:unread"
					event:details="{model: attrs.model, state: message.is('flags.unread')}"

					disabled="{attrs['disable-edit']}"
					name="unread"
					compact="{!attrs.compact}"
					small="{attrs.compact}"
					forward="{message.is('flags.forward')}"
					reply="{message.is('flags.reply')}"
					state="{message.is('flags.unread')}"/>
		</div>
	</fn:match>

	<!-- Переключение тёмного/светлого режима -->
	<fn:match name="dark-mode-toggle">
		<div bem:elem="dark-mode-toggle" qa:id="dark-mode-toggle">
			<b:letter-status2
				fn:if="!attrs['preview-mode']"
				remit:button-click.prevent="dark-mode:toggle"
				name="dark-mode"
				state="{attrs['dark-mode-enabled']}"
			/>
		</div>
	</fn:match>

	<fn:match name="print">
		<div bem:elem="print" qa:id="print-btn">
			<b:button2
					event:details="{model: attrs.model}"
					remit:click.prevent="print"
					radar-id="head-print"
					title="{i18n(\'Распечатать\')}"
					ico="actions:print"
					base
					secondary
					touch="{attrs.touch}"
					model="{attrs.model}"
					disabled="{!_this.isEnableCall()}"
					centered
			/>
		</div>
	</fn:match>

	<!-- Пометка важным -->
	<fn:match name="status-flag">
		<div bem:elem="flag" qa:id="flag">
			<b:letter-status2
					fn:if="!attrs['preview-mode']"
					remit:button-click.prevent="togglestatus:flagged"
					event:details="{model: attrs.model, state: message.is('flags.flagged')}"
					disabled="{!_this.isEnableMark()}"
					name="flagged"
					state="{message.is('flags.flagged')}"/>
		</div>
	</fn:match>

	<!-- Предложить звонок -->
	<fn:match name="invite-call">
		<div bem:elem="flag" qa:id="calls:invite" promo:id="letter-head-calls-button">
			<b:button2
				fn:if="!attrs['preview-mode']"
				remit:click.prevent="calls:invite"
				event:details="attrs.model"
				radar-id="head-call"
				title="{i18n(\'Предложить звонок\')}"
				ico="categories:camera"
				base
				secondary
				touch="{attrs.touch && !attrs.mobile}"
				model="{attrs.model}"
				disabled="{!_this.isEnableCall()}"
				centered
			/>
		</div>
	</fn:match>

	<!-- Создать событие -->
	<fn:match name="calendar-create">
		<div bem:elem="flag" qa:id="calendar:create" promo:id="letter-head-calendar-button">
			<b:button2
				fn:if="!attrs['preview-mode']"
				remit:click.prevent="calendar:create"
				event:details="{model:attrs.model, createContent:'web_email_letter_header'}"
				radar-id="head-calendar"
				title="{i18n(\'Создать событие\')}"
				ico="calendar-month"
				base
				secondary
				touch="{attrs.touch && !attrs.mobile}"
				model="{attrs.model}"
				disabled="{attrs['disable-edit']}"
				centered
			/>
		</div>
	</fn:match>

	<!-- Аватарка -->
	<fn:match name="avatar-wrap">
		<fn:var name="contact" value="{message.get('correspondents.from.0')}"/>
		<div bem:elem="avatar-wrap">
			<fn:apply-match name="status-unread" fn:if="!attrs.compact"/>
			<div bem:elem="avatar"
				 qa:id="avatar"
				 remit:click.prevent.stop="clickavatar"
				 event:details="contact">
				<b:notification-badge
						show="{attrs.isOnline}"
						colorMode="success"
						bottom="4"
						right="4"
						test-id="{attrs.isOnline && 'online-badge'}"
				>
					<fn:match name="content" bem:block="widget">
								<b:avatar
										size="{attrs.compact ? 'm' : 's'}"
										src="{message.get('correspondents.from.0.avatars.default')}"
										touch="{attrs.touch}"/>
					</fn:match>
				</b:notification-badge>
			</div>
			<fn:apply-match name="status-unread" fn:if="attrs.compact"/>
		</div>
	</fn:match>

	<!-- Бейдж папки -->
	<fn:match name="folder">
		<fn:if test="message.isHigh()">
			<fn:var name="name" value="important"/>
		</fn:if>

		<fn:if test="!attrs['disable-category'] && message.get('transaction_category') && !messageFolder.isSpam()">
			<fn:var name="name" value="{message.get('transaction_category')}"/>
		</fn:if>

		<fn:if test="attrs.showfolder">
			<fn:var name="text" value="{messageFolder.get('name')}"/>
		</fn:if>

		<div bem:elem="folder" bem:mod="{!!(text || name)}">
			<b:letter-category
				short="{!text}"
				name="{name}"
				text="{text}"
				size="l"/>
		</div>
	</fn:match>

	<!-- Время отправки письма -->
	<fn:match name="date">
		<div bem:elem="date" qa:id="date">
			<fn:value mod="getLocaleDateFull">message.get('date')</fn:value>
		</div>
	</fn:match>

	<!-- Поле Кому -->
	<fn:match name="recipients">
		<div bem:elem="recipients" bem:mod="short" qa:id="recipients:short"
			 fn:if="!attrs['details-expanded']">
			<fn:var name="recipients" value="{_this.getMessageCorrespondents()}"/>
			<fn:var name="showNames" value="{recipients.length > 3 ? 2 : recipients.length}"/>
			<fn:var name="moreCount" value="{recipients.length - showNames}"/>

			<span bem:elem="recipient-type">{i18n(\'Кому\')}:</span><fn:apply-match name="correspondents" args="recipients, 'to', showNames"/>
			<a bem:elem="recipients-short-expand" fn:if="recipients.length > 3" remit:click.prevent="details:expand"
				qa:id="recipients:short-expand">{i18n(\'и ещё\')}
				<fn:value fn:if="attrs.touch">moreCount</fn:value>
				<fn:value fn:if="!attrs.touch" mod="correspondentsCount">moreCount</fn:value>
			</a>
		</div>

		<div bem:elem="recipients" bem:mod="expanded" qa:id="recipients:expanded"
			 fn:if="attrs['details-expanded']"
		>
		<!-- remit:click.prevent="details:collapse" для поля выше ^ -->
			<fn:var name="hasBcc" value="{attrs.model.get('correspondents.bcc.length')}"/>
			<fn:var name="hasCc" value="{attrs.model.get('correspondents.cc.length')}"/>

			<div bem:elem="header-details-recipient">
				<span bem:elem="recipient-type">{i18n(\'Кому\')}:</span><fn:apply-match name="correspondents" args="message.get('correspondents.to'), 'to'"/>

				<a bem:elem="recipients-short-collapse" remit:click.prevent="details:collapse" fn:if="!hasCc && !hasBcc"
				   qa:id="recipients:short-collapse">{i18n(\'Скрыть список\')}</a>
			</div>

			<div bem:elem="header-details-recipient" fn:if="hasCc">
				<span bem:elem="recipient-type">{i18n(\'Копия\')}:</span><fn:apply-match name="correspondents" args="message.get('correspondents.cc'), 'cc'"/>

				<a bem:elem="recipients-short-collapse" remit:click.prevent="details:collapse" fn:if="!hasBcc"
				   qa:id="recipients:short-collapse">{i18n(\'Скрыть список\')}</a>
			</div>

			<div bem:elem="header-details-recipient" fn:if="hasBcc">
				<span bem:elem="recipient-type">{i18n(\'Скрытая\')}:</span><fn:apply-match name="correspondents" args="message.get('correspondents.bcc'), 'bcc'"/>

				<a bem:elem="recipients-short-expand" remit:click.prevent="details:collapse"
				   qa:id="recipients:short-collapse">{i18n(\'Скрыть список\')}</a>
			</div>
		</div>
	</fn:match>

	<!-- Меню Ещё -->
	<fn:match name="more">
		<fn:if test="!attrs.mobile">
			<div bem:elem="more" qa:id="more">
				<b:dropdown-actions
						fn:if="!attrs.readonly"
						text="{i18n(\'Ещё\')}"
						ico="more-hor"
						secondary
						expand-left

						disable-edit="{attrs['disable-edit']}"

						model="{message}"
						parentThread="{attrs.parentThread}"
						folders="{folders}"
						folder="{messageFolder}"
						read="{message.is('flags.unread') ? true : null}"
						unread="{!message.is('flags.unread') ? true : null}"
						flag="{!message.is('flags.flagged') ? true : null}"
						unflag="{message.is('flags.flagged') ? true : null}"
						archive="{!messageFolder.isArchive()}"
						spam="{_this._showSpam()}"
						selectedLettersIds="{[message.get('id')]}"
						unsubscribe="{_this._showUnsubscribeInMoreMenu()}"
						unspam="{messageFolder.isSpam()}"
						dark-mode="{_this.isDarkMode()}"
						metathreads="{attrs.metathreads}"

						create-event="{_this._showDropdownCalendarButton()}"
						invite-call="{_this._showDropdownCallButton()}"
						create-filter="{_this._showFilterButton()}"
						category-feedback="{attrs['category-feedback'] && !attrs.touch}"
						translate="{!attrs['disable-translate']}"

						more
						remove
						move
						readletter
						print
						reply="{hasReplyAll?'all':true}"
						radar-id="more"
						use:mediator="layout-manager letters-selection unsubscribe-actions"
				/>
			</div>
		</fn:if>
	</fn:match>

	<!-- Отписка из письма -->
	<fn:match name="unsubscribe">
		<div bem:elem="footer-button" qa:id="unsubscribe">
			<fn:var name="letterId" value="{message.get('id')}"/>
			<fn:var name="senderFrom" value="{message.get('correspondents.from')[0].email}"/>
			<b:unsubscribe
					use:mediator="unsubscribe-actions themes-manager"
					touch="{attrs.touch}"
					senderFrom="{senderFrom}"
					letterId="{letterId}"
					position-right
					short="{hasReplyAll}"
					promoId="octavius-tooltip-unsubscribe-button"
			/>
		</div>
	</fn:match>

	<!-- Шапка письма -->
	<div bem:elem="head" remit:click="clickhead" qa:id="head">
		<bem:mod name="sticky" test="attrs['sticky-head']"/>
		<bem:mod name="sticky-fade" test="attrs['sticky-head-fade']"/>

		<div bem:elem="header-row">
			<fn:apply-match name="avatar-wrap"/>

			<div bem:elem="header-details" qa:id="head:details">
				<div bem:elem="author">
					<fn:apply-match name="correspondents" args="message.get('correspondents.from'), 'from', '', 'name-with-email'"/>
					<fn:apply-match name="date" fn:if="!attrs.compact"/>
					<fn:apply-match name="folder" fn:if="!attrs.compact"/>
					<fn:apply-match name="amp-icon" fn:if="(hasAmp && !attrs['preview-mode'] || hasAmpErrors) && !attrs.compact"/>
				</div>

				<fn:apply-match name="recipients" fn:if="_this.getMessageCorrespondents().length"/>
				<fn:apply-match name="folder" fn:if="attrs.compact"/>
				<fn:apply-match name="date" fn:if="attrs.compact"/>
				<fn:apply-match name="amp-icon" fn:if="(hasAmp && !attrs['preview-mode'] || hasAmpErrors) && attrs.compact"/>
			</div>

			<div bem:elem="controls" qa:id="controls">
				<fn:apply-match name="status-flag" />
				<fn:apply-match name="dark-mode-toggle" fn:if="_this.isDarkModePossible()" />
				<fn:apply-match name="invite-call" fn:if="_this._showHeadCallButton()" />
				<fn:apply-match name="calendar-create" fn:if="_this._showHeadCalendarButton()" />
				<fn:apply-match name="print" fn:if="!attrs['disable-head-print'] && !attrs.selectMode"/>
				<fn:apply-match name="add-tag" fn:if="attrs['enable-tags']"/>
				<fn:apply-match name="more" />
			</div>
		</div>
	</div>

	<div bem:elem="before-letter-body">
		<!-- FMAIL-16605: Метки -->
		<fn:if test="attrs['enable-tags']">
			<b:react-async
					component="LetterTags"
					tags="{attrs.model.get('flags.tags')}"
					model="{attrs.model}"
			/>
		</fn:if>
		<!-- FMAIL-6259: плашка о возможном фишинге -->
		<!-- FMAIL-11501: Плашка о протухаемых аттачах -->
		<div bem:elem="letter-meta-container" fn:if="letterMetaType">
			<bem:mod name="phishing" test="showPhishingDie" />
			<b:letter-meta
				type="{letterMetaType}"
				model="{message}"
				remit:attaches-cloud-save="attaches:cloud:all"
				use:mediator="letters-actions"
			/>
		</div>

		<div bem:elem="confirm-receipt" fn:if="_this.isEnableConfirmationReceipt()">
			<b:letter-confirm-receipt
				id="confirm-receipt"
				model="{message}"
				mobile="{attrs.mobile}"
				remit:confirm="confirmreceipt"
			/>
		</div>
		<!-- Кнопка подтверждение прочтение письма -->

		<!-- Переводчик -->
		<div bem:elem="translator" fn:if="_this.isTranslatorVisible()">
			<b:translator
				id="translator"
				remit:hide="translator:hide:click"
				remit:close="translator:close:click"
				remit:original="translator:original:click"
				remit:retry="translator:retry:click"
				remit:translate="translator:translate:click"

				letterId="{message.id}"
				error="{attrs['is-translator-error']}"
				compact="{attrs.compactTranslator}"
				from-default-selected="{attrs['translator-default-from']}"
				loading="{attrs['is-translator-loading']}"
				ponymode="{ponyMode}"
				to-default-selected="{attrs['translator-default-to']}"
				is-translator-visible="{attrs['is-translator-visible']}"
				translated="{_this.isLetterTranslated()}"
			/>
		</div>
	</div>

	<!-- Блок-подсказка под шапкой письма -->
	<div bem:elem="tooltip" fn:if="!_this.isTranslatorVisible() && _this.isTooltipVisible()">
		<!-- Подсказка об отключенных картинках в папке "Спам" (с возможностью включить для письма) -->
		<fn:if test="_this.isImagesHiddenTooltipVisible()">
			<b:letter-tooltip
				type="images-hidden-tooltip"
				ponymode="{ponyMode}"
				title-text="{i18n(\'Мы скрыли изображения в письме, чтобы защитить аккаунт\')}"
				action-text="{i18n(\'Показать изображения\')}"
				remit:action="letter-tooltip:show-images:click"
				remit:close="letter-tooltip:close"
			/>
		</fn:if>
	</div>

	<!-- Панель вложений -->
	<fn:if test="hasAttach">
		<div bem:elem="attach-list">
			<bem:mod name="hidden" test="!showAttachList"/>
			<b:attach-list
				letter-length="{attrs.model.get('body.text').length}"
				models="{attrs.model.get('attaches.list')}"
				total-size="{attrs.model.getAttachmentsTotalSize()}"
				download-link="{_this.getAttachmentsDowloadLink()}"
				preview-mode="{attrs['preview-mode']}"
				use:mediator="layout-manager attachments-manager"
				dark-mode="{_this.isDarkMode()}"
				showAttachList="{showAttachList}"
				showAttachSafetyStatus="{attrs['show-attach-safety-status'] && _this.getAttachSafetyStatus() && !messageFolder.isSpam()}"
				safety-status="{_this.getAttachSafetyStatus()}"
				has-attach-safety-status-background="{attrs['has-attach-safety-status-background']}"
				attach-safety-status-position="{attrs['attach-safety-status-position']}"
				remit:attach-list-expanded="attaches:expanded"
				remit:attach-list-collapsed="attaches:collapsed"
				remit:attach-list-cloud="attaches:cloud:all"
				remit:thumb-open="attaches:open"
				remit:thumb-cloud="attaches:cloud:one"
			/>
		</div>
	</fn:if>

	<!-- Тело письма -->
	<div bem:elem="body" qa:id="body">
		<!-- Показ приглашения если есть ics -->
		<!-- Скрываем приглашение, если есть плашка адреса мероприятия -->
		<b:letter-calendar
			key="{_this.isDarkMode()}"
			dark-mode="{_this.isDarkMode()}"
			fn:if="!(attrs['address-header-calendar'] && message.getJsonLdEvent() || attrs['smart-card-ics'] && _this.hasSmartCardIcsMeta(message))"
			calendars="{message.getCalendarFromAttach()}"
		/>

		<fn:choose>
			<fn:when test="hasAmp && !attrs['preview-mode']">
				<b:letter-body-amp
						ref="letter-body"
						dark-mode="{_this.isDarkMode()}"
						model="{message}"
						remit:error="amp:error"
						remit:force-recalc="letter-force-recalc"
						remit:change-css-selector-theme="amp:change-css-selector-theme"
				/>
			</fn:when>
			<fn:otherwise>
				<!-- Содержимое письма -->
				<b:letter-body
						ref="letter-body"
						key="{_this.getLetterBodyKey()}"
						id="{_this.getLetterBodyKey()}"
						bodyHtml="{_this.getLetterBody()}"
						collapsed-default="{attrs['quotes-collapsed-default']}"
						ponymode="{ponyMode}"
						dark-mode="{_this.isDarkMode()}"
						message="{message}"
						preview-mode="{attrs['preview-mode']}"
						current-user="{attrs['current-user']}"

						remit:resize="resize"
						remit:blockquote="blockquote"
						remit:allowedattrclick="letter:body:allowedattrclick"
						remit:data-attr-click="letter:body:data-attr:click"
						remit:finepayment="letter:body:finepayment"
						remit:finepaymentright="letter:body:finepaymentright"
						remit:monetapayment="letter:body:monetapayment"
						remit:tomyselfclick="letter:body:tomyself"
						remit:force-recalc="letter-force-recalc"
						use:mediator="layout-manager features flags"
				/>
			</fn:otherwise>
		</fn:choose>
	</div>

	<!-- Подвал-->
	<div bem:elem="footer" qa:id="footer" fn:if="!attrs.readonly && _this.isShowFooter()">
		<bem:mod name="sticky" test="attrs['sticky-footer']"/>
		<bem:mod name="sticky-fade" test="attrs['sticky-footer-fade']"/>
		<bem:mod name="new-toolbar" test="_this.useNewToolbar()" />

		<div bem:elem="footer-background">
			<!-- Кнопки ответа на письмо -->
			<div bem:elem="footer-buttons">
				<div bem:elem="footer-left">
					<div bem:elem="footer-button" fn:if="hasReplyAll">
						<fn:choose>
							<fn:when test="draftReplyAll">
								<b:dropdown
										use:mixin="shortcut-title"
										shortcut="shift+r"
										radar-id="replyall"
										text="{i18n(\'Ответить всем\')}"
										ico="reply-all"
										base
										pure
										touch="{attrs.touch && !attrs.mobile}"
										disabled="{!_this.isEnableReply()}"
								>
									<fn:match name="items">
										<b:list>
											<b:list-item
													event:details="{model: attrs.model, draftId: draftReplyAll}"
													remit:click="letter:draft:replyall"
											>
												{i18n(\'Есть черновик, продолжить с ним\')}
											</b:list-item>
											<b:list-item
													event:details="attrs.model"
													remit:click="compose:replyall">
												{i18n(\'Новое письмо\')}
											</b:list-item>
										</b:list>
									</fn:match>
								</b:dropdown>
							</fn:when>
							<fn:otherwise>
								<b:button2
										use:mixin="shortcut-title"
										shortcut="shift+r"
										remit:click="compose:replyall"
										event:details="attrs.model"
										radar-id="replyall"
										text="{i18n(\'Ответить всем\')}"
										ico="reply-all"
										base
										pure
										touch="{attrs.touch && !attrs.mobile}"
										model="{attrs.model}"
										disabled="{!_this.isEnableReply()}"
								/>
							</fn:otherwise>
						</fn:choose>
					</div>

					<div bem:elem="footer-button">
						<fn:var name="shortReply" value="{hasReplyAll && attrs['sticky-reduce-reply']}"/>

						<fn:choose>
							<fn:when test="draftReply">
								<b:dropdown
										use:mixin="shortcut-title"
										shortcut="r"
										radar-id="reply"
										text="{i18n(\'Ответить\')}"
										ico="reply"
										base
										pure
										touch="{attrs.touch && !attrs.mobile}"
										disabled="{!_this.isEnableReply()}"
										short="{shortReply}"
								>
									<fn:match name="items">
										<b:list>
											<b:list-item
													event:details="{model: attrs.model, draftId: draftReply}"
													remit:click="letter:draft:reply"
											>
												{i18n(\'Есть черновик, продолжить с ним\')}
											</b:list-item>
											<b:list-item
													event:details="attrs.model"
													remit:click="compose:reply">
												{i18n(\'Новое письмо\')}
											</b:list-item>
										</b:list>
									</fn:match>
								</b:dropdown>
							</fn:when>
							<fn:otherwise>
								<b:button2
										use:mixin="shortcut-title"
										shortcut="r"
										remit:click="compose:reply"
										event:details="attrs.model"
										radar-id="reply"
										text="{i18n(\'Ответить\')}"
										ico="reply"
										base
										pure
										touch="{attrs.touch && !attrs.mobile}"
										model="{attrs.model}"
										disabled="{!_this.isEnableReply()}"
										short="{shortReply}"
								/>
							</fn:otherwise>
						</fn:choose>
					</div>

					<div bem:elem="footer-button">
						<fn:choose>
							<fn:when test="draftForward">
								<b:dropdown
										use:mixin="shortcut-title"
										shortcut="f"
										event:details="attrs.model"
										radar-id="forward"
										text="{i18n(\'Переслать\')}"
										ico="forward"
										base
										pure
										touch="{attrs.touch && !attrs.mobile}"
										disabled="{!_this.isEnableForward()}"
								>
									<fn:match name="items">
										<b:list>
											<b:list-item
													event:details="{model: attrs.model, draftId: draftForward}"
													remit:click="letter:draft:forward"
											>
												{i18n(\'Есть черновик, продолжить с ним\')}
											</b:list-item>
											<b:list-item
													event:details="attrs.model"
													remit:click="compose:forward">
												{i18n(\'Новое письмо\')}
											</b:list-item>
										</b:list>
									</fn:match>
								</b:dropdown>
							</fn:when>
							<fn:otherwise>
								<b:button2
										remit:click="compose:forward"
										use:mixin="shortcut-title"
										shortcut="f"
										event:details="attrs.model"
										radar-id="forward"
										text="{i18n(\'Переслать\')}"
										ico="forward"
										base
										pure
										touch="{attrs.touch && !attrs.mobile}"
										model="{attrs.model}"
										disabled="{!_this.isEnableForward()}"
								/>
							</fn:otherwise>
						</fn:choose>
					</div>
				</div>

				<div bem:elem="footer-right">
					<fn:if test="!_this._showUnsubscribeButton() && !_this.isDatesMetadataEnabled()">
						<div
								bem:elem="footer-button"
								qa:id="calls-dropdown"
								promo:id="footer-calls-dropdown"
								fn:if="attrs['invite-call'] && !attrs['disable-call'] && !attrs['disable-footer-call'] && _this.canCallTo(attrs.model) && !enableFakeCreateTodo"
						>
							<b:dropdown
									disable-expand-center
									expand-left
									ico="categories:camera"
									text="{i18n(\'Позвонить\')}"
									title="{i18n(\'Позвонить\')}"
									annotation="{!attrs['disable-calls-tip'] && i18n(\'Отправьте ссылку на звонок или позвоните сейчас — если ваши собеседники онлайн, они увидят вызов\')}"
									ponymode="{attrs['pony-mode']}"
									pure
									short="{attrs['sticky-reduce-all-texts']}"
									radar-id="footer-call-dropdown"
									disabled="{!_this.isEnableCall()}"
									remit:dropdown-change-state="dropdown-change"
									centered="{attrs['sticky-reduce-one-text']}"
							>
								<fn:match name="items" args="dropdownArgs">
									<b:list>
										<b:list-item
												qa:id="calls:call"
												remit:click="calls:groupcall"
												event:details="attrs.model"
												radar-id="footer-calls-groupcall"
												disabled="{!_this.isEnableCall()}"
												title="{!attrs['disable-calls-tip'] && i18n(\'Если собеседники онлайн на сайте Mail.ru, они увидят вызов и смогут ответить сразу\')}"
										>
										<span bem:elem="ico">
											<b:ico name="categories:camera"/>
										</span>
											<span bem:elem="text">{i18n(\'Позвонить сейчас\')}</span>
										</b:list-item>
										<b:list-item
												qa:id="calls:invite"
												remit:click="calls:invite"
												event:details="attrs.model"
												radar-id="footer-calls-invite"
												disabled="{!_this.isEnableCall()}"
												title="{!attrs['disable-calls-tip'] && i18n(\'Собеседники получат ссылку для видеозвонка и присоединятся, когда перейдут по ней\')}"
										>
										<span bem:elem="ico">
											<b:ico name="status:link"/>
										</span>
											<span bem:elem="text">{i18n(\'Отправить ссылку на звонок\')}</span>
										</b:list-item>
									</b:list>
								</fn:match>
							</b:dropdown>
						</div>

						<div
								bem:elem="footer-button"
								promo:id="footer-calls-button"
								fn:if="attrs['invite-call'] && !attrs['disable-call'] && !attrs['disable-footer-call'] && !_this.canCallTo(attrs.model) && !enableFakeCreateTodo"
						>
							<b:button2
									qa:id="calls:invite"
									remit:click="calls:invite"
									event:details="attrs.model"
									radar-id="footer-call"
									text="{!attrs['sticky-reduce-all-texts'] && i18n(\'Предложить звонок\')}"
									title="{i18n(\'Предложить звонок\')}"
									annotation="{!attrs['disable-calls-tip'] && i18n(\'Участники встречи получат ссылку для видеозвонка и присоединятся, когда перейдут по ней\')}"
									ico="categories:camera"
									base
									clean
									touch="{attrs.touch && !attrs.mobile}"
									model="{attrs.model}"
									disabled="{!_this.isEnableCall()}"
									centered="{attrs['sticky-reduce-one-text']}"
							/>
						</div>

						<fn:if test="enableFakeCreateTodo">
							<div class="letter__footer-button">
								<b:react-async
										component="CreateTodo"
										compact="{attrs['sticky-reduce-one-text']}"
										letterId="{message.get('id')}"
										ponyMode="{ponyMode}"
								/>
							</div>
						</fn:if>

						<!-- Кнопки Предложить звонок и Создать событие показываем только, если нет кнопки рассылки и метадаты для кнопки календаря -->
						<div bem:elem="footer-button" fn:if="!attrs['disable-create-event'] && !attrs['disable-footer-calendar']">
							<b:calendar-button
									model="{attrs.model}"
									sticky-reduce-one-text="{attrs['sticky-reduce-one-text']}"
									use:mediator="calendar-manager"
							/>
						</div>
					</fn:if>
					<fn:if test="_this._showVkMessengerButton()">
						<div bem:elem="vk-chat-button" promo:id="toolbar-vk-chat">
							<fn:var name="vkMessengerParams" value="{_this._getVkMessengerParams()}" />
							<b:button2
								qa:id="vk-messenger:open"
								remit:click="vk-messenger:open"
								event:details="vkMessengerParams.href"
								radar-id="footer-vk"
								text="{!attrs['sticky-reduce-one-text'] && vkMessengerParams.text}"
								title="{vkMessengerParams.text}"
								ico="social:vk"
								base
								clean
								touch="{attrs.touch && !attrs.mobile}"
								model="{attrs.model}"
								centered="{attrs['sticky-reduce-one-text']}"
							/>
						</div>
					</fn:if>

					<!-- Отписка из письма справа -->
					<fn:if test="_this._showUnsubscribeButton() && !_this.isDatesMetadataEnabled()">
						<fn:apply-match name="unsubscribe"/>
					</fn:if>

					<!-- Если есть дата для письма - приоритизируем кнопку создания события -->
					<fn:if test="this.isDatesMetadataEnabled()">
						<div bem:elem="footer-button" fn:if="!attrs['disable-create-event'] && !attrs['disable-footer-calendar']">
							<b:calendar-button
									model="{attrs.model}"
									dates-metadata="{attrs['dates-metadata']}"
									sticky-reduce-one-text="{attrs['sticky-reduce-one-text']}"
									use:mediator="calendar-manager"
							/>
						</div>
					</fn:if>
				</div>
			</div>

			<fn:var name="isMarusiaEnabled" value="{attrs['marusia-portal-enabled'] && _this.isMarusiaReadLetterEnabled()}" />
			<fn:var name="isMarusiaAllEnabled" value="{attrs['marusia-portal-enabled'] && attrs['marusia-read-all-letters']}" />
			<fn:var name="marusiaRadarPrefix" value="{_this.getMarusiaReadLetterRadarPrefix()}" />

			<fn:var name="isSmartReplyEnabled" value="{attrs.smart_replies && _this.isEnableReply()}" />

			<div bem:elem="footer-controls" fn:if="(isMarusiaAllEnabled || isSmartReplyEnabled) && _this.isShowSmartReplyAndMarusia()">
				<span bem:elem="marusia-rl" fn:if="isMarusiaEnabled || isMarusiaAllEnabled">
					<fn:add-class name="ready" test="attrs.smart_replies_ready || isMarusiaAllEnabled"/>
					<b:marusia-rl-button
						model="{attrs.model}"
						ponymode="{attrs.ponymode}"
						use:mediator="marusia-manager"
						radar-prefix="{marusiaRadarPrefix}"
					/>
				</span>

				<fn:if test="isSmartReplyEnabled">
					<fn:for data="attrs.smart_replies" as="value" key="key">
						<span bem:elem="smart-reply" key="{key}" qa:id="smart-reply">
							<fn:add-class name="ready" test="attrs.smart_replies_ready"/>
							<bem:mod name="ponymode" test="attrs.ponymode"/>
							<b:button2
								remit:click="compose:smartreply"
								event:details="{model: attrs.model, key: key}"
								text="{value}"
								compact="{attrs.ponymode}"
								medium="{!attrs.ponymode}"
								shadowless
								invert
								radar-id="smart-reply{message.is('flags.smart_reply_stage') ? '_stage' : ''}"
							/>
						</span>
					</fn:for>
				</fn:if>
			</div>
		</div>
	</div>
</div>
`,"./app/ui-block/letter/letter.html")}.apply(t,r))||(e.exports=a)},64077:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a remit:click="click-radar">
	<fn:attr name="href" value="{attrs.href}" test="attrs.href"/>
	<fn:attr name="target" value="{attrs.target}" test="attrs.target"/>
	<fn:attr name="rel" value="noopener noreferer" test="!attrs.unsafe"/>

	<bem:mod name="contrast" test="attrs.contrast" />
	<bem:mod name="hovered" test="attrs.hovered" />
	<bem:mod name="disabled" test="attrs.disabled" />
	<bem:mod name="secondary" test="attrs.secondary" />
	{attrs.text}</a>
`,"./app/ui-block/link/link.html")}.apply(t,r))||(e.exports=a)},5898:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div remit:click="click-radar" data-qa-id="{attrs['qa-id']}">
	<bem:mod name="hover-support" test="attrs['hover-support']"/>
	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="nested" test="attrs.nested"/>
	<bem:mod name="selected" test="attrs.selected"/>
	<bem:mod name="markable" test="attrs.markable"/>
	<bem:mod name="shortcut" test="attrs.shortcut"/>
	<bem:mod name="paddingless" test="attrs.paddingless"/>
	<bem:mod name="pure" test="attrs.pure"/>
	<bem:mod name="disabled" test="attrs.disabled"/>

	<fn:attr name="title" value="{attrs.title}" test="!!attrs.title"/>

	<fn:add-class name="js-shortcut" test="!attrs.disabled && attrs.shortcut"/>

	<fn:match name="default">Item 1</fn:match>

	<!-- Галочка -->
	<fn:if test="attrs.markable">
		<div bem:elem="mark" qa:id="mark" qa:state="{attrs.marked ? 'marked' : 'hidden'}">
			<bem:mod name="hidden" test="!attrs.marked"/>

			<b:ico name="status:done"/>
		</div>
	</fn:if>

	<fn:apply-match name="default"/>
</div>
`,"./app/ui-block/list-item/list-item.html")}.apply(t,r))||(e.exports=a)},75293:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	title="{_this.getAttachTitle()}"
	qa:id="attach:true"
>
	<fn:choose>
				<fn:when test="attrs.model.isAttachmentsLoaded()">
					<fn:var name="attachments"
							value="{attrs.model.getAttachmentsList()}"/>


					<b:react-async
						remit:contextmenu.stop
						remit:click.prevent

						component="AttachmentDropdown"
						componentClass="{_this.lazyAttachmentDropdown()}"

						onChange="{_this.attachmentDropdownChange.bind(_this)}"
						overlayContainer="{document.getElementById('portal-overlay')}"
						items="{_this.getAttachmentItems()}"
						open="{attrs['expand-attachment-dropdown']}"
						buttonSize="{attrs.small ? 'small' : null}"
						ponyMode="{attrs.ponymode}"
						use:mediator="themes-manager"
					/>

				</fn:when>

				<fn:otherwise>
					<b:react-async
						remit:contextmenu.stop
						remit:click="attachment-button:expanded"
						component="AttachmentButton"
						componentClass="{_this.lazyAttachmentButton()}"
						ponyMode="{attrs.ponymode}"
						small="{attrs.small}"
					/>
				</fn:otherwise>
			</fn:choose>
</span>

`,"./app/ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview.html")}.apply(t,r))||(e.exports=a)},31330:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	title="{_this.getAttachTitle()}"
	qa:id="attach:true"
>
	<bem:mod name="compact" test="attrs['compact']"/>

	<b:ico name="attach"/>
</span>

`,"./app/ui-block/list-letter-attach-status/list-letter-attach-status.html")}.apply(t,r))||(e.exports=a)},35521:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<button remit:click="click:btn" qa:id="selected:{!!attrs.state}">
	<!-- не заменять button на span, он нужен чтобы фокус попадал в него и при снятии выделения с письма - фокус тоже уходил -->

	<bem:mod name="is-active" test="attrs.state" />
	<bem:mod name="size_{attrs.size}" />
	<bem:mod name="disabled-hover" test="attrs['disable-hover']" />
	<bem:mod name="disabled" test="attrs['disable-select']" />
	<bem:mod name="centered" test="attrs.centered" />
	<bem:mod name="priority" test="attrs.priority" />
	<bem:mod name="light-priority" test="attrs['light-priority']" />

	<div bem:elem="container" qa:id="touch:{!!attrs.touch}">
		<!-- Чекбокс на тач устройствах -->
		<bem:mod name="touch" test="attrs['touch']" />

		<fn:var name="checked" value="{attrs.state}" />
		<span bem:elem="checkbox" fn:if="!attrs['touch']">
			<!-- disabled в чекбоксе потому что рулим его состоянием сверху -->
			<b:checkbox checked="{checked}" disabled />
		</span>

		<div bem:elem="img-container">
			<span bem:elem="img" style="{_this.getImgSrc()}" />
			<fn:if test="_this.checkReliable(attrs.model) && attrs.isThreadWithReliableMark">
				<span bem:elem="reliable-icon" bem:mod="size_common">
					<b:ico
						name="{attrs['dark-mode'] ? 'STATUS_RELIABLE_SENDER_DARK' : 'STATUS_RELIABLE_SENDER_LIGHT'}"
						data-test-id="reliable-icon"
						remove-fill="{false}"
						size="original"
					/>
				</span>
			</fn:if>
			<fn:if test="_this.checkOfficial(attrs.model) && attrs.isThreadWithReliableMark">
				<span bem:elem="official-icon" bem:mod="size_common">
					<b:ico
						name="{attrs['dark-mode'] ? 'STATUS_OFFICIAL_SENDER_DARK' : 'STATUS_OFFICIAL_SENDER_LIGHT'}"
						data-test-id="official-icon"
						remove-fill="{false}"
						size="original"
					/>
				</span>
			</fn:if>
		</div>
	</div>
</button>
`,"./app/ui-block/list-letter-avatar/list-letter-avatar.html")}.apply(t,r))||(e.exports=a)},47471:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="unread" test="attrs.unread"/>
	<fn:var
		name="text"
		value="{attrs.counter | formatCounter}"
		test="attrs.counter > 1"
	/>
	<fn:choose>
		<fn:when test="attrs.compact">
			<fn:if test="attrs.important">
				<b:letter-category
					name="important"
					short
				/>
			</fn:if>
			<fn:if test="attrs.category || text">
				<b:letter-category
					name="{attrs.category}"
					short="{!text}"
					text="{text}"
					promoid="{text ? 'thread-badge' : ''}"
				/>
			</fn:if>
		</fn:when>
		<fn:otherwise>
			<fn:if test="attrs.category || text">
				<b:letter-category
					name="{attrs.category}"
					short="{!text}"
					text="{text}"
					promoid="{text ? 'thread-badge' : ''}"
				/>
			</fn:if>
			<fn:if test="attrs.important">
				<b:letter-category
					name="important"
					short
				/>
			</fn:if>
		</fn:otherwise>
	</fn:choose>
</div>
`,"./app/ui-block/list-letter-badge/list-letter-badge.html")}.apply(t,r))||(e.exports=a)},95579:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a></a>
`,"./app/ui-block/list-letter-bait/list-letter-bait.html")}.apply(t,r))||(e.exports=a)},55752:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a
	qa:id="{_this.rootQaId()}"
	remit:dragstart.prevent
	a11y:tooltip-direction="letter-bottom"
>

	<!-- Variables -->
	<fn:var name="data" value="{attrs.model}"/>
	<fn:var name="subject" value="{_this.getSubject()}"/>
	<fn:var name="folder" value="{data.getFolder()}"/>
	<fn:var name="showFolderFeature" value="{attrs.showfolder && !attrs['disable-letter-item-folder']}"/>
	<fn:var name="paymentDieDisplayMode" value="{_this.getPaymentDieDisplayMode()}" />
	<fn:var name="ponyMode" value="{attrs['pony-mode']}"/>

	<fn:var name="metadata" value="{_this.getTransactionMetadata()}" />
	<fn:var name="showOrder" value="{_this.showOrder(attrs.model, metadata)}" />
	<fn:var name="unsubscribeSender" value="{_this.getUnsubscribeSender()}" />
	<fn:var name="showUniversalDie" value="{_this.shouldShowUniversalPaymentDie()}" />
	<fn:var name="showUnsubscribe" value="{unsubscribeSender && !showUniversalDie && !showOrder && !metadata && (paymentDieDisplayMode === 'none')}" />
	<fn:var name="hasTags" value="{attrs['enable-tags'] && data.is('flags.tags') && !!data.get('flags.tags').length}" />
	<fn:var name="isTaggable" value="{attrs['enable-tags'] && !_this.getCounter()}"/>

	<!-- Attributes -->
	<fn:attr name="href" value="{attrs.href}" test="attrs.href"/>
	<fn:attr name="tabindex" value="-1"/>
	<fn:attr name="data-id" value="{data.get('id')}"/>
	<fn:attr name="data-draggable-id" value="{data.get('id')}"/>
	<fn:attr name="data-uidl-id" value="{data.get('last')}"/>
	<!-- TODO: выяснить зачем это нужно, в dom этого нет -->
	<fn:attr name="active" test="attrs.selected"/>

	<!-- Класс для переходов стрелками и общих стилей для всех элементов списка писем -->
	<fn:add-class name="js-letter-list-item"/>

	<!-- Modificators -->
	<bem:mod
		name="enable-user-select"
		test="attrs['enable-user-select']"
	/>

	<bem:mod
		name="pony-mode"
		test="ponyMode"
	/>

	<bem:mod
		name="has-indent"
		test="attrs['indent']"
	/>

	<bem:mod
		name="normal"
		test="!attrs['indent']"
	/>

	<bem:mod
		name="active"
		test="attrs.selected"
	/>

	<bem:mod name="first" test="attrs.first"/>
	<bem:mod name="last" test="attrs.last"/>

	<bem:mod name="reliable" test="_this.checkOfficialGreen(attrs.model) && attrs.isThreadWithReliableMark"/>
	<bem:mod name="official" test="_this.checkImportantReliable(attrs.model) && attrs.isThreadWithReliableMark"/>

	<div bem:elem="background">
		<bem:mod name="active" test="attrs.selected"/>
	</div>

	<!-- Read status:Start -->
	<div bem:elem="read-status" qa:id="unread">
		<bem:mod name="pony-mode" test="ponyMode" />

		<b:read-status
			state="{data.is('flags.unread')}"
			is-forwarded="{data.is('flags.forward')}"
			is-replied="{data.is('flags.reply')}"
			model="{data}"
			remit:toggle.prevent="togglestatus:unread"
		/>
	</div>
	<!-- Read status:End -->

	<!-- Avatar:Start -->
	<div bem:elem="avatar" qa:id="avatar">
		<bem:mod name="pony-mode" test="ponyMode" />
		<bem:mod name="unread" test="data.is('flags.unread')"/>

		<b:avatar
				centered
				img-src="{_this.getImageSrc()}"
				disable-hover="{attrs['disable-avatar-hover']}"
				disable-select="{attrs['disable-select']}"
				model="{data}"
				state="{attrs.selected}"
				remit:toggle.prevent="clickavatar"
				priority="{attrs['priority']}"
				light-priority="{attrs['priority'] && ponyMode}"
				dark-mode="{attrs['dark-mode']}"
		/>
	</div>
	<!-- Avatar:End -->

	<!-- Container:Start -->
	<div bem:elem="container">

		<!-- Content:Start -->
		<div bem:elem="content">
			<bem:mod name="pony-mode" test="ponyMode" />

			<!-- Correspondent:Start -->
			<div bem:elem="item">
				<bem:mod name="correspondent"/>
				<bem:mod name="unread" test="data.is('flags.unread')"/>

				<b:correspondent
					qa:id="correspondent"
					state="{_this.getCorrespondent()}"
					title="{_this.getCorrespondentTooltip()}"
					dangerous="{_this.isCorrespondentDangerous()}"
				/>

			</div>
			<!-- Correspondent:End -->

			<!-- Flag:Start -->
			<div bem:elem="item" qa:id="flagged">
				<bem:mod name="flag"/>

				<b:flag-status
					state="{data.is('flags.flagged')}"
					model="{data}"
					remit:toggle.prevent="togglestatus:flagged"
				/>

			</div>
			<!-- Flag:End -->

			<!-- Badge:Start -->
			<div
				bem:elem="item"
				fn:if="_this.hasBadge()"
				qa:id="letter:badge"
			>
				<bem:mod name="badge"/>

				<b:badge
					category="{_this.getCategory()}"
					counter="{_this.getCounter()}"
					important="{_this.isImportant()}"
					unread="{data.is('flags.unread')}"
				/>
			</div>
			<!-- Badge:End -->

			<!-- Title:Start -->
			<div bem:elem="item" ref="title">
				<bem:mod name="title"/>

				<!-- Subject:Start -->
				<span
					bem:elem="subject"
					fn:if="!attrs['disable-subject']"
				>
					<bem:mod name="unread" test="data.is('flags.unread')"/>

					<b:subject
						subject="{subject}"
						color="{attrs.search ? data.meta('search_subject.color') : null}"
						search="{attrs.search}"
					/>

				</span>
				<!-- Subject:End -->

				<!-- Snippet:Start -->
				<span
					bem:elem="snippet"
					qa:id="snippet"
				>

					<b:snippet
						value="{_this.getSnippetValue()}"
						color="{attrs.search ? data.meta('search_snippet.color') : null}"
						search="{attrs.search}"
					/>

				</span>
				<!-- Snippet:End -->

				<!-- Это, чтобы не показывать тултип в Safari -->
				<div></div>
			</div>
			<!-- Title:End -->

			<!-- Tags:Start -->
			<div bem:elem="item" fn:if="hasTags || isTaggable">
				<bem:mod name="tags"/>

				<b:react-async
					component="ListLetterTags"
					model="{attrs.model}"
					tags="{attrs.model.get('flags.tags')}"
					folder="{showFolderFeature && folder.get('name')}"
					readonly="{!isTaggable}"
				/>
			</div>
			<!-- Tags:End -->

			<!-- PaymentButton:Start -->
			<div bem:elem="item" fn:if="paymentDieDisplayMode === 'compact'">
				<b:payment-button
					model="{attrs.model}"
					standalone
					layout-mode="2pane"
					pony-mode="{attrs['pony-mode']}"
				/>
			</div>
			<!-- PaymentButton:End -->

			<!--- Unsubscribe: Start -->
			<b:unsubscribe
				fn:if="showUnsubscribe"
				layout-mode="2pane"
				pony-mode="{ponyMode}"
				unsubscribeSender="{unsubscribeSender}"
				model="{data}"
				use:mediator="unsubscribe-actions themes-manager"
			/>
			<!--- Unsubscribe: End -->

			<!-- Folder:Start -->
			<div
				fn:if="showFolderFeature && !hasTags"
				bem:elem="item"
				bem:mod="folder"
			>
				<bem:mod name="hide-on-hover" test="isTaggable"/>

			<fn:choose>
				<fn:when test="data.isSchedule()">
					<!-- Отложенная отправка (когда показываем имя папки) -->
					<b:folder
						title="{data.get('send_date') | scheduleDate}"
						text="{folder.get('name')}"
						qa:id="folder"
					/>
				</fn:when>
				<fn:otherwise>
					<b:folder
						title="{folder.get('name')}"
						text="{folder.get('name')}"
						qa:id="folder"
					/>
				</fn:otherwise>
			</fn:choose>

			</div>
			<!-- Folder:End -->

			<!-- Attach:Start -->
			<fn:if test="!attrs['disable-attach']">
				<div bem:elem="item">
					<bem:mod name="attach-status"/>

					<b:attach-status
						model="{attrs.model}"
						fn:if="data.is('flags.attach')"
						use:mediator="attachments-manager pony-mode"
					/>
				</div>
			</fn:if>
			<!-- Attach:End -->

			<!-- Schedule:Start -->
			<div bem:elem="item" fn:if="!showFolderFeature && data.isSchedule()">
				<b:schedule-status
						date="{data.get('send_date')}"
				/>
			</div>
			<!-- Schedule:End -->

			<!-- Date:Start -->
			<fn:var name="isSchedule" value="{!!data.isSchedule()}" />
			<fn:var name="letterDate" value="{_this.letterDate(data.get('date'), isSchedule)}" />
			<div bem:elem="item" title="{_this.getDateTooltip(isSchedule)}" qa:id="time:{letterDate}">
				<bem:mod name="date" />
				{letterDate}
			</div>
			<!-- Date:End -->
		</div>
		<!-- Content:End -->

		<!-- PaymentDie:Start -->
		<div bem:elem="payment-die-container" fn:if="paymentDieDisplayMode === 'full'">
			<b:payment-die
				model="{attrs.model}"
				layout-mode="2pane"
			/>
		</div>
		<!-- PaymentDie:End -->

		<!-- SearchAttaches:Start -->
		<fn:var name="searchAttaches" value="{_this.getSearchAttaches()}"/>
		<fn:var name="allAttaches" value="{_this.getAllAttaches()}"/>
		<fn:var
			name="attachesModes"
			value="{_this.getAttachesModes(false, allAttaches, searchAttaches)}"
		/>
		<fn:var
			name="attachesList"
			value="{_this.getAttaches(attachesModes, allAttaches, searchAttaches).attachesList}"
		/>

		<fn:var
			name="moreAttachesList"
			value="{_this.getAttaches(attachesModes, allAttaches, searchAttaches).moreAttachesList}"
		/>

		<b:preview-attaches
			fn:if="attachesList && allAttaches"
			remit:attach="previewattach"
			remit:more="previewattach"
			remit:moreinvalid="openletter"
			model="{attrs.model}"
			attaches-list="{attachesList}"
			more-attaches-list="{moreAttachesList}"
			layout-mode="2pane"
			all-count="{allAttaches.length}"
			vertical="{attachesModes.vertical}"
			pony-mode="{ponyMode}"
		/>
		<!-- SearchAttaches:End -->

		<!-- AttachesPreview:Start -->
		<fn:var name="messagesAttaches" value="{attrs.messagesAttaches}"/>
		<fn:var name="showAttaches" value="{attrs['show-attaches'] && _this.getAttachesPreviewCondition()}"/>

		<fn:var
			name="attachesModes"
			value="{_this.getAttachesModes(false, messagesAttaches)}"
		/>

		<fn:var
			name="attachesForRender"
			value="{_this.getAttaches(attachesModes, messagesAttaches)}"
		/>

		<fn:if test="showAttaches">
			<fn:choose>
				<fn:when test="messagesAttaches">
					<b:preview-attaches
						fn:if="messagesAttaches"
						remit:attach="previewattach"
						remit:more="previewattach"
						remit:moreinvalid="openletter"
						model="{attrs.model}"
						attaches-list="{attachesForRender.attachesList}"
						more-attaches-list="{attachesForRender.moreAttachesList}"
						layout-mode="2pane"
						all-count="{messagesAttaches.length}"
						vertical="{attachesModes.vertical}"
						pony-mode="{ponyMode}"
					/>
				</fn:when>
				<fn:otherwise>
					<!-- Заглушка, пока аттачи не загрузились -->
					<b:stub
						attachesCount="{data.get('attachments_count')}"
						isCompact="{false}"
						pony-mode="{ponyMode}"
					/>
				</fn:otherwise>
			</fn:choose>
		</fn:if>
		<!-- AttachesPreview:End -->

		<!-- ListLetterOrder:Start -->
		<b:order
			fn:if="metadata && showOrder"
			use:mediator="orders-manager"
			metadata="{metadata}"
			pony-mode="{ponyMode}"
		/>
		<!-- ListLetterOrder:End -->

		<!-- ListLetterPaymentUniversalDie:Start -->
		<b:payment-universal-die
			fn:if="showUniversalDie"
			model="{attrs.model}"
			layout-type="{attrs['layout-type']}"
			pony-mode="{ponyMode}"
		/>
		<!-- ListLetterPaymentUniversalDie:End -->
	</div>
	<!-- Container:End -->

	<!-- Border:Start -->
	<b:delimeter full="{attrs['full-delimiter']}" ponymode="{ponyMode}" indent="{attrs.indent}"/>
	<b:delimeter ponymode="{ponyMode}" indent="{attrs.indent}" last/>
	<!-- Border:End -->
</a>
`,"./app/ui-block/list-letter-common/list-letter-common.html")}.apply(t,r))||(e.exports=a)},98086:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	title="{attrs.title}"
	qa:state="{attrs.dangerous ? 'dangerous' : ''}"
	qa:id="{attrs['qa-id']}"
>
	<bem:mod name="dangerous" test="attrs.dangerous"/>

	{attrs.state | correspondent}
</span>
`,"./app/ui-block/list-letter-correspondent/list-letter-correspondent.html")}.apply(t,r))||(e.exports=a)},7242:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:value mod="letterDate">attrs.date</fn:value>
</div>
`,"./app/ui-block/list-letter-date/list-letter-date.html")}.apply(t,r))||(e.exports=a)},62216:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<button
	type="button"
	remit:click.stop="toggle"
	qa:id="flagged:{attrs.state}"
	title="{_this.getTitle()}"
	disabled="{attrs['disable-hover']}"
>
	<bem:mod name="is-active" test="attrs.state"/>
	<bem:mod name="disabled-hover" test="attrs['disable-hover']"/>

	<span bem:elem="icon">
		<b:ico name="{attrs.state ? 'actions:favorite_on' : 'actions:favorite_off'}"/>
	</span>
</button>
`,"./app/ui-block/list-letter-flag-status/list-letter-flag-status.html")}.apply(t,r))||(e.exports=a)},11395:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div title="{attrs.title}">
	{attrs.text}
</div>

`,"./app/ui-block/list-letter-folder/list-letter-folder.html")}.apply(t,r))||(e.exports=a)},18108:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div style="height: {attrs.height}px;"></div>
`,"./app/ui-block/list-letter-height-compensation/list-letter-height-compensation.html")}.apply(t,r))||(e.exports=a)},48488:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="ll-orders">
	<fn:var name="linkValue" value="{_this.getOrderLink()}"/>
	<fn:var name="linkText" value="{linkValue && _this.getLinkText()}"/>

	<bem:mod name="pony-mode" test="attrs['pony-mode']"/>

	<span bem:elem="items">
		{_this.getItems()}
	</span>

	<b:link
		qa:id="ll-orders-link"
		fn:if="linkValue"
		remit:click.prevent="clicklink"
		event:details="{url: linkValue}"
		use:mediator="orders-manager"
		text="{linkText}"
		href="{linkValue}"
		target="_blank"
	/>
</div>
`,"./app/ui-block/list-letter-order/list-letter-order.html")}.apply(t,r))||(e.exports=a)},17720:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div on-click="_this.handleClick(evt)" qa:id="{_this.getQaId()}">
	<fn:var name="meta" value="{attrs.model.getPaymentMeta()}" />
	<bem:mod name="default-size" test="attrs.standalone && (attrs['layout-mode'] === '2pane') && !attrs['pony-mode']" />

	<bem:mod name="{meta.status}" test="meta && meta.status" />
	<bem:mod name="oneline" test="attrs.oneline" />

	<span>
		{_this.getTitle()}
	</span>
</div>
`,"./app/ui-block/list-letter-payment-button/list-letter-payment-button.html")}.apply(t,r))||(e.exports=a)},59448:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="{_this.getQaId()}">
	<!-- Variables -->
	<fn:var name="titleArray" value="{_this.getTitle()}" />
	<fn:var name="subtitleArray" value="{_this.getSubtitle()}" />
	<fn:var name="iconData" value="{_this.getIconData()}" />
	<fn:var name="hasPicture" value="{_this.hasPicture()}" />
	<fn:var name="showImg" value="{attrs['show-img']}" />
	<fn:var name="imgSrc" value="{attrs['img-src']}" />
	<fn:var name="shouldShowCross" value="{_this.shouldShowCross()}" />

	<bem:mod name="{attrs['layout-mode']}" />
	<bem:mod name="closeable" test="shouldShowCross" />

	<!-- Image:Start -->
	<div
		bem:elem="img-container"
		fn:if="hasPicture"
	>
		<bem:mod name="hidden" test="!showImg" />

		<img
			src="{imgSrc}"
			bem:elem="img"
			remit:load="load-img"
			remit:error="error-img"
			qa:id="img:{_this.meta.skin}"
		>
			<bem:mod name="{_this.meta.skin}" />
		</img>
	</div>
	<!-- Image:End -->

	<!-- Icon:Start -->
	<div bem:elem="icon-container" fn:if="!showImg" qa:id="icon:{iconData.name}">
		<bem:mod name="{attrs['icon-container-mode']}" test="!hasPicture" />
		<bem:mod name="{iconData.category}" test="iconData.category" />
		<bem:mod name="placeholder" test="hasPicture" />

		<fn:choose>
			<fn:when test="iconData.url">
				<img bem:elem="img-icon" src="{iconData.url}" />
			</fn:when>

			<fn:otherwise>
				<b:ico name="{iconData.name}" />
			</fn:otherwise>
		</fn:choose>
	</div>
	<!-- Icon:End -->

	<!-- Content:Start -->
	<div bem:elem="content-container">

		<!-- Title:Start -->
		<div bem:elem="text-container" qa:id="title">
			<bem:mod name="title" />

			<fn:for data="titleArray" as="titleElement">
				<span bem:elem="text" key="{titleElement.text}" qa:id="{titleElement.id}">
					<bem:mod name="title" />
					{titleElement.text}
				</span>
			</fn:for>
		</div>
		<!-- Title:End -->

		<!-- Subtitle:Start -->
		<div bem:elem="text-container" fn:if="subtitleArray && subtitleArray.length" qa:id="subtitle">
			<bem:mod name="subtitle" />

			<fn:for data="subtitleArray" as="subtitleElement">
				<span
					fn:if="subtitleElement.description"
					bem:elem="text"
					key="{subtitleElement.description}"
					qa:id="{subtitleElement.id}:description"
				>
					<bem:mod name="subtitle" />
					<bem:mod name="description" />

					{subtitleElement.description}&nbsp;
				</span>

				<span bem:elem="text" key="{subtitleElement.text}" qa:id="{subtitleElement.id}">
					<fn:var name="isCarNumber" value="{subtitleElement.id === 'car_number'}" />

					<bem:mod name="subtitle" />
					<bem:mod name="car-number" test="isCarNumber" />

					<fn:choose>
						<fn:when test="isCarNumber">
							<fn:value mod="lowerCase">subtitleElement.text</fn:value>
						</fn:when>

						<fn:when test="subtitleElement.id === 'date_violation'">
							<fn:value mod="letterMonthYearDate">subtitleElement.text</fn:value>
						</fn:when>

						<fn:otherwise>
							{subtitleElement.text}
						</fn:otherwise>
					</fn:choose>
				</span>
			</fn:for>
		</div>
		<!-- Subtitle:End -->

		<!-- PaymentButton:Start -->
		<div bem:elem="button-container">
			<b:payment-button
				oneline
				model="{attrs.model}"
				layout-mode="{attrs['layout-mode']}"
			/>
		</div>
		<!-- PaymentButton:End -->

	</div>
	<!-- Content:End -->

	<div bem:elem="cross-container" fn:if="shouldShowCross">
		<b:ico
			name="actions:close"
			secondary
			remit:click="cross-click"
		/>
	</div>
</div>
`,"./app/ui-block/list-letter-payment-die/list-letter-payment-die.html")}.apply(t,r))||(e.exports=a)},14871:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	remit:click="payment-button:click"
	qa:id="{_this.getTestId()}"
>
	<fn:var name="meta" value="{attrs.model.getPaymentMeta()}" />
	<fn:var name="status" value="{meta.status}" />
	<fn:var name="shouldShowButton" value="{_this.shouldShowButton()}" />

	<bem:mod name="{status}" test="!shouldShowButton" />
	<bem:mod name="default" test="shouldShowButton" />

	<span>
		{_this.getTitle()}
	</span>
</div>
`,"./app/ui-block/list-letter-payment-universal-button/list-letter-payment-universal-button.html")}.apply(t,r))||(e.exports=a)},88431:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="{_this.getTestId()}">
	<fn:var name="description" value="{_this.getDescription()}" />
	<fn:var name="ponyMode" value="{attrs['pony-mode']}" />
	<fn:var name="hideDescription" value="{attrs['hide-description']}" />

	<bem:mod name="column" test="attrs['layout-type'] === '3pane'" />
	<bem:mod name="row" test="attrs['layout-type'] === '2pane'" />
	<bem:mod name="fluid" test="attrs['pud-fluid']" />

	<span
		fn:if="!(hideDescription || (ponyMode && attrs['layout-type'] === '3pane'))"
		bem:elem="description"
		qa:id="description"
	>
		{description}
	</span>
	<b:payment-button
		model="{attrs.model}"
	/>
</div>
`,"./app/ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die.html")}.apply(t,r))||(e.exports=a)},48317:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-letter-preview-action">
	<fn:var name="compact" value="{attrs.compact}"/>
	<fn:var name="folder" value="{attrs.folder}"/>

	<fn:var
		name="i18nContext"
		value="По запросу «заказч» ничего не найдено, мы показали похожие результаты по «заказчик»"
	/>

	<bem:mod name="compact" test="compact"/>

	<fn:var name="queries" value="{attrs.queries}"/>
	<fn:var name="hasQuery" value="{queries && queries.baseQuery && queries.suggestQuery}"/>

	<fn:choose>
		<fn:when test="attrs.model.get('type') === 'suggestSeparator'">
			<div
					fn:if="hasQuery"
					bem:elem="item"
			>
				<bem:mod name="compact"/>

				{i18n(\'Поиск по похожим запросам\')}
				<b>
					{_this.getFormattedSuggestQueries(queries.suggestQuery)}
				</b>
			</div>
		</fn:when>
		<fn:otherwise>
			<!-- Показываем текст саджестов в первом хедере, -->
			<!-- только если вообще нет писем в основной выдаче -->
			<fn:if test="attrs.model.get('type') === 'suggestHeader' && hasQuery">

				<!-- Формируем текст строки в разных i18n -->
				<!-- с передачей контекста вторым аргументом (пример для переводчиков) -->
				<!-- чтобы не использовать <fn:value output="raw"> и unsafe -->
				<div>
					{i18n(\'По запросу\', i18nContext)}

					<b bem:elem="query">
						{queries.baseQuery}
					</b>

					{i18n(\'ничего не найдено, мы показали похожие результаты по\', i18nContext)}

					<b>
						{_this.getFormattedSuggestQueries(queries.suggestQuery)}
					</b>
				</div>
			</fn:if>

			<a
					fn:if="_this.shouldSuggestSearchInExcludedFolders()"
					bem:elem="message"
					remit:click.prevent="search:set-in-excluded-folders"
					event:details="true"
					qa:id="search-action-enable-in-excluded-folders"
					href="{attrs.href}"
			>
				{i18n(\'Искать в папках «Спам» и «Корзина»\')}
			</a>
		</fn:otherwise>
	</fn:choose>

	<b:delimeter last full/>
</div>
`,"./app/ui-block/list-letter-preview-action/list-letter-preview-action.html")}.apply(t,r))||(e.exports=a)},64800:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span qa:id="ll-preview-attaches-item">
	<fn:var name="last" value="{attrs['last-attach']}"/>
	<fn:var name="vertical" value="{attrs['vertical']}"/>
	<fn:var name="formName" value="{attrs['attach'].formName}"/>
	<fn:var name="snippet" value="{attrs['attach'].snippet}"/>
	<fn:var name="showMoreButton" value="{attrs.hasMore}"/>
	<fn:var name="iconName" value="{_this.getAttachmentIcon(formName)}"/>
	<fn:var name="isCompact" value="{attrs.isCompact}"/>

	<bem:mod name="vertical" test="vertical"/>
	<bem:mod name="vertical-more" test="vertical && showMoreButton"/>
	<bem:mod name="not-last-vertical" test="!last && vertical"/>
	<bem:mod name="horizontal" test="!vertical"/>
	<bem:mod name="last-without-more" test="last && !showMoreButton"/>
	<bem:mod name="mode" value="{isCompact ? 'compact' : 'incompact'}"/>

	<div bem:elem="icon">
		<bem:mod name="grey"/>
		<bem:mod name="doc" test="iconName === 'ATTACH_DOC'"/>
		<bem:mod name="pdf" test="iconName === 'ATTACH_PDF'"/>
		<bem:mod name="presentation" test="iconName === 'ATTACH_PRESENTATION'"/>
		<bem:mod name="spreadsheet" test="iconName === 'ATTACH_SPREADSHEET'"/>

		<b:ico name="{iconName}"/>
	</div>

	<fn:if test="formName">
		<div bem:elem="content" qa:id="{_this.getQaId()}">
			<b:highlighter
				text="{formName.value}"
				color="{formName.color}"
			/>

			<div
				bem:elem="snippet"
				fn:if="vertical && snippet.value"
				qa:id="ll-preview-attaches-snippet"
			>
				<b:highlighter
					text="{snippet.value}"
					color="{snippet.color}"
				/>
			</div>
		</div>
	</fn:if>
</span>
`,"./app/ui-block/list-letter-preview-attaches-item/list-letter-preview-attaches-item.html")}.apply(t,r))||(e.exports=a)},2694:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span>
	<fn:var name="count" value="{attrs['more-count']}"/>
	<fn:var name="vertical" value="{attrs['vertical']}"/>

	<bem:mod name="vertical" test="vertical"/>

	<b:react-async
		remit:contextmenu.stop
		remit:click.prevent
		qa:id="ll-preview-attaches-more"

		component="AttachmentDropdown"

		onChange="{_this.attachmentDropdownChange.bind(_this)}"
		overlayContainer="{document.getElementById('portal-overlay')}"
		items="{_this.getAttachmentItems()}"
		open="{attrs['dropdown-open']}"
		ponyMode="{attrs['pony-mode']}"
		mode="search"
		buttonSize="{vertical && 'large'}"
		moreCount="{count}"
		use:mediator="themes-manager"
	/>
</span>
`,"./app/ui-block/list-letter-preview-attaches-more/list-letter-preview-attaches-more.html")}.apply(t,r))||(e.exports=a)},68818:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="ll-preview-attaches">
	<!-- Variables -->
	<fn:var name="allCount" value="{attrs['all-count']}"/>
	<fn:var name="model" value="{attrs['model']}"/>
	<fn:var name="attachesList" value="{attrs['attaches-list']}"/>
	<fn:var name="moreAttachesList" value="{attrs['more-attaches-list']}"/>
	<fn:var name="isCompact" value="{attrs['layout-mode'] === '3pane'}"/>
	<fn:var name="compactMode" value="{isCompact ? 'compact' : 'incompact'}"/>
	<fn:var name="pony" value="{attrs['pony-mode'] ? 'pony' : 'normal'}"/>
	<fn:var name="location" value="{attrs['metathread'] ? 'meta' : 'folder'}"/>

	<fn:var name="vertical" value="{attrs.vertical}"/>

	<bem:mod name="vertical" test="vertical"/>
	<bem:mod name="horizontal" test="!vertical"/>
	<bem:mod name="pony-mode" test="attrs['pony-mode']"/>
	<bem:mod name="mode" value="{compactMode + '_' + pony + '_' + location}"/>

	<!-- Аттач с кнопкой ЕЩЕ -->
	<fn:match name="attachWithMore" args="moreCount">
		<fn:var name="attach" value="{attachesList[attachesList.length - 1]}"/>
		<fn:var name="extension" value="{_this.getAttachmentExtension(attach.name.value)}"/>

		<b:preview-attaches-item
				model="{model}"
				last-attach="true"
				attach="{attach}"
				vertical="{vertical}"
				hasMore="{moreCount}"
				isCompact="{isCompact}"
				remit:click="attach"
				event:details="{hasSnippet: vertical, ext: extension}"
				use:mediator="attachments-manager"
		/>

		<b:preview-attaches-more
				fn:if="moreCount"
				model="{model}"
				more-count="{moreCount}"
				items="{moreAttachesList}"
				vertical="{vertical}"
				pony-mode="{attrs['pony-mode']}"
				remit:click="more"
				remit:moreinvalid="moreinvalid"
				use:mediator="attachments-manager"
				event:details="{hasSnippet: vertical}"
		/>
	</fn:match>

	<fn:if test="attachesList && attachesList.length">
		<fn:var name="moreCount" value="{allCount - attachesList.length}"/>

		<!-- Если аттачей > 1, то сначала в цикле рисуем n-1 аттач -->
		<fn:for data="attachesList" as="attach" key="key">
			<fn:var name="lastItem" value="{(attachesList.length - 1) === key}"/>

			<b:preview-attaches-item
				fn:if="!lastItem"
				key="{key}"
				model="{model}"
				attach="{attach}"
				vertical="{vertical}"
				isCompact="{isCompact}"
				remit:click="attach"
				event:details="{hasSnippet: vertical, ext: extension}"
				use:mediator="attachments-manager"
			/>
		</fn:for>

		<fn:choose>
			<fn:when test="vertical && moreCount">
				<!-- Если последний (или единственный) аттач - это большой аттач с ЕЩЕ, -->
				<!-- то рисуем его в контейнере для flex-direction: raw -->
				<div bem:elem="container">
					<fn:apply-match
							name="attachWithMore"
							args="moreCount"
					/>
				</div>
			</fn:when>

			<fn:otherwise>
				<fn:apply-match
						name="attachWithMore"
						args="moreCount"
				/>
			</fn:otherwise>
		</fn:choose>
	</fn:if>
</div>
`,"./app/ui-block/list-letter-preview-attaches/list-letter-preview-attaches.html")}.apply(t,r))||(e.exports=a)},70958:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="ll-preview-stub">
	<fn:var name="attachesStubs" value="{_this.getArrayOfAttachesStubs()}"/>
	<fn:var name="compactMode" value="{attrs.isCompact ? 'compact' : 'incompact'}"/>
	<fn:var name="pony" value="{attrs['pony-mode'] ? 'pony' : 'normal'}"/>
	<fn:var name="location" value="{attrs['metathread'] ? 'meta' : 'folder'}"/>

	<bem:mod name="layoutMode" value="{compactMode + '_' + pony + '_' + location}"/>

	<fn:for data="attachesStubs" as="stub">
		<div key="{stub.key}" bem:elem="item">
			<bem:mod name="mode" value="{compactMode + '_' + stub.type}"/>
		</div>
	</fn:for>
</div>
`,"./app/ui-block/list-letter-preview-stub/list-letter-preview-stub.html")}.apply(t,r))||(e.exports=a)},90056:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	remit:click.stop="toggle"
	qa:id="unread:{attrs.state}"
	title="{_this.getTitle()}"
	disabled="{attrs['disable-hover']}"
>
	<bem:mod name="is-active" test="attrs.state"/>
	<bem:mod name="disabled-hover" test="attrs['disable-hover']"/>
	<bem:mod name="shift" test="attrs.shift"/>
	<bem:mod name="dotSize" value="{attrs.dotSize}" test="attrs.dotSize"/>

	<span bem:elem="ico" fn:if="_this.getIconName()">
		<b:ico name="{_this.getIconName()}"/>
	</span>
</span>
`,"./app/ui-block/list-letter-read-status/list-letter-read-status.html")}.apply(t,r))||(e.exports=a)},85128:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span
	title="{_this.getFormattedDate(attrs.date)}"
>
	<bem:mod name="disabled-hover" test="attrs['disable-hover']"/>

	<span bem:elem="icon">
		<b:ico name="status:time"/>
	</span>
</span>
`,"./app/ui-block/list-letter-schedule-status/list-letter-schedule-status.html")}.apply(t,r))||(e.exports=a)},56313:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Прикидываемся письмом на списке, чтобы заполучить сладенькие стили -->
	<fn:add-class name="llct"/>

	<fn:var name="isCompactPonyMode" value="{attrs.compact && attrs['pony-mode']}"/>

	<bem:mod name="compact" test="attrs.compact && !isCompactPonyMode"/>
	<bem:mod name="pony-mode" test="attrs['pony-mode'] && !isCompactPonyMode"/>
	<bem:mod name="compact-pony-mode" test="isCompactPonyMode"/>

	<div bem:elem="row-avatar">
		<span bem:elem="avatar"/>
	</div>

	<div bem:elem="row-from">
		<fn:choose>
			<!-- 2pane -->
			<fn:when test="!attrs.compact">
				<span bem:elem="line">
					<bem:mod name="width-s-{_this.getRandomSize(1)}"/>
				</span>
			</fn:when>

			<!-- 3pane -->
			<fn:otherwise>
				<span bem:elem="multiline">
					<span bem:elem="line">
						<bem:mod name="width-s-{_this.getRandomSize(3)}"/>
					</span>

					<span bem:elem="line">
						<bem:mod name="width-s-{_this.getRandomSize(4)}"/>
					</span>

					<span bem:elem="line">
						<bem:mod name="width-s-{_this.getRandomSize(5)}"/>
					</span>
				</span>
			</fn:otherwise>
		</fn:choose>
	</div>

	<div bem:elem="row-subject" fn:if="!attrs.compact">
		<span bem:elem="line">
			<bem:mod name="width-l-{_this.getRandomSize(2)}"/>
		</span>
	</div>
</div>
`,"./app/ui-block/list-letter-skeleton/list-letter-skeleton.html")}.apply(t,r))||(e.exports=a)},24112:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<fn:choose>
	<fn:when test="!attrs.search">
		<span bem:elem="normal">
			{attrs.value}
		</span>
	</fn:when>

	<fn:otherwise>
		<span bem:elem="search">
			<b:highlighter
				text="{attrs.value}"
				color="{attrs.color}"
			/>
		</span>
	</fn:otherwise>
</fn:choose>
`,"./app/ui-block/list-letter-snippet/list-letter-snippet.html")}.apply(t,r))||(e.exports=a)},97216:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a qa:id="letter-spinner" qa:state="visible:{!attrs.hidden}">
	<!-- Прикидываемся письмом на списке, чтобы заполучить вожделенные стили -->
	<fn:add-class name="llct"/>

	<!-- Стили запишем тут, чтобы перебить стили из  -->
	<bem:mod name="default"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="ponyMode" test="attrs['pony-mode']"/>
	<bem:mod name="compactAndPonyMode" test="attrs.compact && attrs['pony-mode']"/>
	<bem:mod name="hidden" test="attrs.hidden"/>

	<b:spinner small color="additional"/>
</a>
`,"./app/ui-block/list-letter-spinner/list-letter-spinner.html")}.apply(t,r))||(e.exports=a)},8730:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<fn:choose>
	<fn:when test="!attrs.search">
		<span bem:elem="normal">
			{attrs.subject}
		</span>
	</fn:when>

	<fn:otherwise>
		<span bem:elem="search">
			<b:highlighter
				text="{attrs.subject}"
				color="{attrs.color}"
			/>
		</span>
	</fn:otherwise>
</fn:choose>
`,"./app/ui-block/list-letter-subject/list-letter-subject.html")}.apply(t,r))||(e.exports=a)},98626:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-letter-tip">
	<fn:var name="compact" value="{attrs.compact}"/>
	<fn:var name="folder" value="{attrs.folder}"/>

	<bem:mod name="rounded" test="attrs.rounded" />
	<bem:mod name="next-selected" test="attrs.isNextSelected"/>
	<bem:mod name="pony-mode" test="attrs['pony-mode']"/>
	<bem:mod name="compact" test="compact"/>

	<fn:choose>
		<fn:when test="attrs.type === 'spam:cleanup'">
			<!-- Плашка об очистке папки Спам -->
			<fn:var name="message"
					value="{i18n(\'Письма, перемещённые в Спам более месяца назад, будут автоматически удаляться.\')}"/>
			<fn:var name="primaryText" value="{i18n(\'Очистить папку\')}"/>
			<fn:var name="secondaryLink" value="{attrs['spam:cleanup:secondary-link']}"/>
			<fn:var name="secondaryText" value="{i18n(\'Подробнее\')}"/>

			<fn:choose>
				<fn:when test="compact">
					<!-- 3pane -->
					<div bem:elem="message">{message}</div>
					<div bem:elem="controls">
						<b:link remit:click.prevent="clear"
								event:details="{model:folder}"
								text="{primaryText}"
								qa:id="controls-cleanup"
						/>
						<b:link href="{secondaryLink}"
								text="{secondaryText}"
								target="_blank"
								secondary
								fn:if="!attrs['help-disabled'] && !attrs.mobile"
								qa:id="controls-more"
						/>
					</div>
				</fn:when>
				<fn:otherwise>
					<!-- 2pane -->
					<div bem:elem="message">
						{message}
						<b:link text="{secondaryText}"
								href="{secondaryLink}"
								target="_blank"
								secondary
								fn:if="!attrs['help-disabled'] && !attrs.mobile"
								qa:id="controls-more"
						/>
					</div>
					<div bem:elem="controls">
						<b:link remit:click.prevent="clear"
								event:details="{model:folder}"
								text="{primaryText}"
								qa:id="controls-cleanup"
						/>
					</div>
				</fn:otherwise>
			</fn:choose>
		</fn:when>

		<fn:when test="attrs.type === 'trash:cleanup'">
			<!-- Плашка об очистке папки Корзина -->
			<fn:var name="message"
					value="{i18n(\'Письма, перемещённые в Корзину более месяца назад, будут автоматически удаляться.\')}"/>
			<fn:var name="primaryText" value="{i18n(\'Очистить папку\')}"/>

			<fn:choose>
				<!-- 3pane -->
				<fn:when test="compact">
					<div bem:elem="message">{message}</div>
					<fn:if test="_this.isRemoveVisible()">
						<div bem:elem="controls">
							<b:link remit:click.prevent="clear"
									event:details="{model:folder}"
									text="{primaryText}"
									qa:id="controls-cleanup"
							/>
						</div>
					</fn:if>
				</fn:when>
				<fn:otherwise>
					<!-- 2pane -->
					<div bem:elem="message">{message}</div>
					<fn:if test="_this.isRemoveVisible()">
						<div bem:elem="controls">
							<b:link remit:click.prevent="clear"
									event:details="{model:folder}"
									text="{primaryText}"
									qa:id="controls-cleanup"
							/>
						</div>
					</fn:if>
				</fn:otherwise>
			</fn:choose>
		</fn:when>
	</fn:choose>

	<b:delimeter last full fn:if="!attrs.borderless"/>
</div>
`,"./app/ui-block/list-letter-tip/list-letter-tip.html")}.apply(t,r))||(e.exports=a)},72967:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="ll-unsubscribe"
	 bem:elem="button"
	 remit:click.prevent.stop="unsubscribe:ll:click"
	 event:details="{sender: attrs.unsubscribeSender}"
>
	<bem:mod name="3pane" test="attrs['layout-mode'] === '3pane'"/>
	<span promo:id="ll-unsubscribe">
		{i18n(\'Отписаться\')}
	</span>
</div>
`,"./app/ui-block/list-letter-unsubscribe/list-letter-unsubscribe.html")}.apply(t,r))||(e.exports=a)},79737:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Variables -->

	<!-- Modificators -->
	<bem:mod name="compact" test="attrs.compact"/>

	<!-- Content -->
	<b:dropdown
		disable-expand-center
		expand-left
		ico="navigation:more_vertical"
		ponymode="{attrs['pony-mode']}"
		pure
		short
		radar-id="more"
		remit:dropdown-change-state="dropdown-change"
	>
		<fn:match name="items" args="dropdownArgs">
			<b:list>
				<!-- Закрепить -->
				<b:list-item
					fn:if="attrs.pin"
					qa:id="pin"
					radar-id="pin"
					remit:click="welcomeblock:pin"
				>
					<span bem:elem="text">{i18n(\'Закрепить\')}</span>
				</b:list-item>

				<!-- Выбрать город -->
				<b:list-item
					fn:if="attrs.selectGeo"
					qa:id="selectGeo"
					radar-id="geo"
					remit:click="welcomeblock:selectgeo"
				>
					<span bem:elem="text">{i18n(\'Выбрать город\')}</span>
				</b:list-item>

				<!-- Скрыть до завтра -->
				<b:list-item
					fn:if="attrs.snooze"
					qa:id="snooze"
					radar-id="snooze"
					remit:click="welcomeblock:snooze"
				>
					<span bem:elem="text">{i18n(\'Скрыть до завтра\')}</span>
				</b:list-item>
			</b:list>
		</fn:match>
	</b:dropdown>
</div>
`,"./app/ui-block/list-letter-welcome-dropdown-actions/list-letter-welcome-dropdown-actions.html")}.apply(t,r))||(e.exports=a)},59172:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="ponymode" test="attrs.ponyMode"/>

	<fn:match name="item" args="item, index">
		<span
			bem:elem="item"
			key="{index}"
			remit:click="suggestion:click"
			event:details="item"
		>
			<span bem:elem="item-icon">
				<img src="{item.icon}"/>
			</span>
			<span bem:elem="item-content">
				<span bem:elem="item-title">
					<fn:value>item.title</fn:value>
				</span>
				<span bem:elem="item-text">
					<fn:value>item.text</fn:value>
				</span>
			</span>
		</span>
	</fn:match>

	<div bem:elem="container">
		<fn:for data="attrs.items" as="item" key="index">
			<fn:apply-match name="item" args="item, index"/>
		</fn:for>
	</div>

	<div bem:elem="arrow" style="left: 8px;">
		<b:ico name="navigation:arrow_list_previous" size="s"/>
	</div>

	<div bem:elem="arrow" style="right: 8px;">
		<b:ico name="navigation:arrow_list_next" size="s"/>
	</div>

</div>
`,"./app/ui-block/list-letter-welcome-suggestions/list-letter-welcome-suggestions.html")}.apply(t,r))||(e.exports=a)},17723:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-letter-welcome">
	<fn:var name="is3pane" value="{attrs.type === '3pane'}"/>
	<fn:var name="weatherData" value="{_this.getWeatherData()}"/>
	<fn:var name="withGreeting" value="{attrs.model && attrs.model.get('withGreeting')}"/>

	<bem:mod name="{attrs.type}"/>
	<bem:mod name="ponymode" test="attrs.ponyMode"/>
	<bem:mod name="hidden" test="!attrs.model || !attrs.model.is('visible')"/>

	<fn:if test="!is3pane">
		<div bem:elem="mainline">
			<a bem:elem="logo" href="{attrs.marusiaUrl}" target="_blank" remit:click="logo" qa:id="logo">
				<fn:attr name="style" value="{_this.getImage()}"/>
			</a>

			<span bem:elem="header">{_this.getHeader()}</span>

			<span bem:elem="secondary">
				<span bem:elem="date" fn:if="withGreeting">
					{_this.getDate()}
				</span>

				<a
					fn:if="weatherData"
					href="{weatherData.link}"
					target="_blank"
					bem:elem="weather"
					remit:click="weather"
					qa:id="weather"
				>
					<img
						bem:elem="weather-icon"
						src="{attrs.weatherUrl}{weatherData.now_pict}.svg"
						title="{weatherData.now_description}"
					/>
					{weatherData.now_temp}°
				</a>
			</span>

			<span
				bem:elem="expand"
				fn:if="attrs.skillsEnabled"
				remit:click="expand"
			>
				{i18n(\'Подробнее\')}
			</span>

			<span bem:elem="more">
				<b:list-letter-welcome-dropdown-actions
					use:mediator="welcome-block-manager"
				/>
			</span>
		</div>
	</fn:if>

	<fn:if test="is3pane">
		<div bem:elem="mainline">
			<a bem:elem="logo" href="{attrs.marusiaUrl}" target="_blank" remit:click="logo" qa:id="logo">
				<fn:attr name="style" value="{_this.getImage()}"/>
			</a>

			<span bem:elem="mainline-content">
				<span bem:elem="content-row">
					<span bem:elem="header">
						<bem:mod name="compact" test="!withGreeting"/>
						{_this.getHeader()}
					</span>

					<a
						fn:if="weatherData && !withGreeting"
						href="{weatherData.link}"
						target="_blank"
						bem:elem="weather"
						bem:mod="in-header"
						remit:click="weather"
						qa:id="weather"
					>
						<img
							bem:elem="weather-icon"
							src="{attrs.weatherUrl}{weatherData.now_pict}.svg"
							title="{weatherData.now_description}"
						/>
						{weatherData.now_temp}°
					</a>

					<span bem:elem="more">
						<b:list-letter-welcome-dropdown-actions
							use:mediator="welcome-block-manager"
						/>
					</span>
				</span>

				<span bem:elem="secondary" fn:if="withGreeting">
					<span bem:elem="date">
						{_this.getDate(true)}
					</span>
					<a
						fn:if="weatherData && withGreeting"
						href="{weatherData.link}"
						target="_blank"
						bem:elem="weather"
						remit:click="weather"
						qa:id="weather"
					>
						<img
							bem:elem="weather-icon"
							src="{attrs.weatherUrl}{weatherData.now_pict}.svg"
							title="{weatherData.now_description}"
						/>
						{weatherData.now_temp}°
					</a>
				</span>
			</span>
		</div>
	</fn:if>

	<div bem:elem="suggestions">
		<bem:mod name="expanded" test="attrs.expanded"/>

		<b:list-letter-welcome-suggestions
			use:mediator="welcome-block-manager layout-manager"
			items="{_this.getSuggestions()}"
		/>
	</div>

	<fn:if test="is3pane">
		<span
			bem:elem="expand"
			fn:if="attrs.skillsEnabled"
			remit:click="onExpandClick"
		>
			{i18n(\'Показать больше\')}
		</span>
	</fn:if>
</div>
`,"./app/ui-block/list-letter-welcome/list-letter-welcome.html")}.apply(t,r))||(e.exports=a)},14614:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-nested-moveto-folder">
	<b:list ref="list">
		<div/>
	</b:list>
</div>
`,"./app/ui-block/list-nested-category-feedback/list-nested-category-feedback.html")}.apply(t,r))||(e.exports=a)},48218:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-nested-moveto-folder">
	<fn:var name="model" value="{attrs.model}" />
	<fn:var name="lettersFoldersIds" value="{attrs.lettersFoldersIds}" />
	<fn:var name="folder" value="{model && model.getFolder()}"/>
	<fn:var name="folders" value="{attrs.folders}" />
	<fn:var name="icomap" value="{_this.folder2icoMap}"/>

	<b:list>
		<fn:if test="_this.showMyFoldersContainer()">
			<b:list-item
				touch="{attrs.touch}"
				qa:id="{_this.getMyFoldersContainerId()}"
				key="{_this.getMyFoldersContainerId()}"
			>
				<bem:mod name="child-level" value="0"/>
				<bem:mod name="disabled"/>

				<fn:attr name="title" value="{_this.getMyFoldersContainerName()}"/>

				<div bem:elem="avatar" qa:id="avatar">
					<b:avatar
						src="{_this.getMyFoldersContainerAvatar()}"
						size="xs"/>
				</div>

				<!-- Название папки -->
				<div bem:elem="text">
					<div bem:elem="text-txt">
						<fn:value>_this.getMyFoldersContainerName()</fn:value>
					</div>
				</div>
			</b:list-item>
		</fn:if>


		<fn:for data="folders" as="f" key="idx">
			<fn:var name="showFolder" value="{_this.showFolder(f)}"/>

			<fn:if test="showFolder">

				<fn:var name="id" value="{f.get('id')}"/>

				<b:list-item
					touch="{attrs.touch}"
					qa:id="{f.get('id')}"

					remit:click="move"
					event:details="{'model': attrs.model, 'id': id, 'selection': attrs.selection, 'parentThread': attrs.parentThread}"

					key="{id}"
				>
					<bem:mod name="child-level" value="{_this.getLimitedFolderLevel(f)}"/>
					<bem:mod name="disabled" test="_this.isDisabled(f)"/>

					<fn:attr name="title" value="{f.get('name')}"/>

					<fn:var name="isSharedVirtualDir" value="{f.isShareTake() && f.isRoot()}"/>

					<fn:if test="isSharedVirtualDir">
						<div bem:elem="avatar" qa:id="avatar">
							<b:avatar
								src="{_this.getSharedTakeDirAvatar(f)}"
								size="xs"/>
						</div>
					</fn:if>

					<fn:if test="!isSharedVirtualDir">
						<span bem:elem="ico">
							<fn:var name="ico" value="{_this.getFolderIco(f)}"/>

							<b:ico
								name="{ico}"
								mod="{ico}"
							/>
						</span>
					</fn:if>


					<!-- Название папки -->
					<div bem:elem="text">
						<bem:mod name="ico" test="f.get('security')"/>

						<div bem:elem="text-txt">
							<fn:value>f.get('name')</fn:value>
						</div>

						<fn:if test="f.get('security')">
							<div bem:elem="text-ico">
								<!-- Замок если папка запаролена -->
								<fn:if test="!f.get('open')">
									<b:ico
										name="{icomap['lock-on_fill']}"
										mod="{icomap['lock-on_fill']}"
									/>
								</fn:if>

								<!-- Замок если папка распаролена -->
								<fn:if test="f.get('open')">
									<b:ico
										name="{icomap['lock-off_fill']}"
										mod="{icomap['lock-off_fill']}"
									/>
								</fn:if>
							</div>
						</fn:if>

						<fn:if test="f.isSharedGive()">
							<div bem:elem="text-ico">
								<!-- Значок расшаренной папки -->
								<b:ico
									name="{icomap['shared']}"
									mod="{icomap['shared']}"
								/>
							</div>
						</fn:if>
					</div>
				</b:list-item>
			</fn:if>
		</fn:for>

		<!-- Кнопка "Новая папка" -->
		<fn:if test="attrs['allow-new-folder']">
			<div bem:elem="hr"/>

			<b:list-item
				touch="{attrs.touch}"
				qa:id="new-folder-btn"
				remit:click="add"
				event:details="{model: {moveLetters: true, letterCurrentFolder: _this.getMessagesFolders()[0]}}"
			>
				<bem:mod name="disabled" test="_this.disableCreateFolder()"/>

				<span bem:elem="ico">
					<b:ico name="{attrs.ponymode ? 'actions:add' : 'actions:add_big'}"/>
				</span>

				<!-- Текст кнопки -->
				<div bem:elem="text">
					<div bem:elem="text-txt">
						<fn:value>i18n(\'Новая папка\')</fn:value>
					</div>
				</div>
			</b:list-item>
		</fn:if>
	</b:list>
</div>
`,"./app/ui-block/list-nested-moveto-folder/list-nested-moveto-folder.html")}.apply(t,r))||(e.exports=a)},33833:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-nested-sorting">
	<fn:var name="sortings" value="{_this.sortings}" />
	<fn:var name="touch" value="{attrs.touch}" />
	<fn:var name="ponyMode" value="{attrs.ponymode}" />

	<bem:mod name="touch" test="touch" />
	<bem:mod name="pony-mode" test="ponyMode" />

	<fn:match name="item" args="item, key, isSelected, text, touch">
		<fn:var name="type" value="{item.type}" />
		<b:list-item
			touch="{touch}"
			disabled="{isDisabled}"
			markable
			marked="{isSelected}"
			qa:id="{type}"
			key="{key}"
			remit:click="item-click"
			event:details="item"
		>
			<span bem:elem="text"> {text} </span>
		</b:list-item>
	</fn:match>

	<b:list
		touch="{touch}"
		qa:id="sortings-dropdown"
		remit:item-click="list:item-click"
	>
		<fn:for data="sortings" as="item">
			<fn:var name="key" value="{item.text}" />
			<fn:var name="text" value="{item.text}" />
			<fn:var name="isSelected" value="{attrs.sortingType === item.type}" />
			<fn:apply-match name="item" args="item, key, isSelected, text, touch" />
		</fn:for>
	</b:list>
</div>
`,"./app/ui-block/list-nested-sorting/list-nested-sorting.html")}.apply(t,r))||(e.exports=a)},37432:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="list-nested">
	<bem:mod name="hover-support" test="attrs['hover-support']"/>
	<bem:mod name="expanded" test="attrs.expanded"/>
	<bem:mod name="touch" test="attrs.touch"/>

	<div bem:elem="content" ref="block"></div>
</div>
`,"./app/ui-block/list-nested/list-nested.html")}.apply(t,r))||(e.exports=a)},6657:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="hover-support" test="attrs['hover-support']"/>
	<bem:mod name="shortcut" test="attrs.shortcut"/>
	<bem:mod name="touch" test="attrs.touch"/>

	<fn:match name="default">
		<div bem:elem="item">Item 1</div>
		<div bem:elem="item">Item 2</div>
		<div bem:elem="hr"/>
		<div bem:elem="item">Item 3</div>
	</fn:match>

	<fn:apply-match name="default"/>
</div>
`,"./app/ui-block/list/list.html")}.apply(t,r))||(e.exports=a)},6073:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<img
		bem:elem="img" src="{_this.getLogoSrc()}"
		remit:click="marusia:rl:button:click"
		event:details="{model: attrs.model}"
	/>
	<div bem:elem="button">
        <bem:mod name="ponymode" test="attrs.ponymode"/>
		<b:button2
			text="{i18n(\'Прочитать письмо\')}"
			ico="actions:play"
			icoSize="xs"
			shadowless
			invert
			remit:click="marusia:rl:button:click"
			event:details="{model: attrs.model}"
			centered
            compact="{attrs.ponymode}"
            medium="{!attrs.ponymode}"
		/>
	</div>
</div>
`,"./app/ui-block/marusia-read-letter-button/marusia-read-letter-button.html")}.apply(t,r))||(e.exports=a)},37947:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<button
	type="button"
	remit:click.stop="toggle"
	qa:id="selected:{!!attrs.state}"
>
	<bem:mod name="is-active" test="attrs.state"/>
	<bem:mod name="size_{attrs.size}"/>
	<bem:mod name="type_{attrs.type}"/>
	<bem:mod name="disabled-hover" test="attrs['disable-hover']"/>
	<bem:mod name="disabled" test="attrs['disable-select']"/>
	<bem:mod name="centered" test="attrs.centered"/>

	<div
		bem:elem="container"
		title="{_this.getTitle()}"
		promo:id="{_this.getPromoIcoId()}"
	>
		<!-- Чекбокс на тач устройствах -->
		<bem:mod name="touch" test="attrs['touch']"/>

		<span
			bem:elem="checkbox"
			fn:if="!attrs['touch']"
		>
			<b:checkbox checked="{attrs.state}"/>
		</span>

		<span bem:elem="img">
			<b:ico
				name="{_this.getIco()}"
				size="{_this.getIcoSize()}"/>
		</span>
	</div>
</button>
`,"./app/ui-block/metathread-avatar/metathread-avatar.html")}.apply(t,r))||(e.exports=a)},94715:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var
		name="text"
		value="New"
		test="attrs.counter > 0"/>

	<b:letter-category text="{text}" fn:if="text"/>
</div>
`,"./app/ui-block/metathread-badge/metathread-badge.html")}.apply(t,r))||(e.exports=a)},77515:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Variables -->
	<fn:var name="data" value="{attrs.model}"/>

	<!-- Modificators -->
	<bem:mod name="compact" test="attrs.compact"/>

	<!-- Content -->
	<b:dropdown
		disable-expand-center
		expand-left
		ico="navigation:more_vertical"
		ponymode="{attrs['pony-mode']}"
		pure
		short
		radar-id="ctrl"
		remit:dropdown-change-state="dropdown-change"
	>
		<fn:match name="items" args="dropdownArgs" remit:click.prevent>
			<b:list>
				<!-- Удалить все письма из папки -->
				<b:list-item
					fn:if="attrs.deleteall"
					qa:id="deleteall"
					remit:click="deleteall"
					event:details="data"
				>
					<span bem:elem="ico">
						<b:ico name="actions:delete"/>
					</span>
					<span bem:elem="text">{_this.getRemoveButtonText()}</span>
				</b:list-item>

				<!-- Пометить все письма прочитанным -->
				<b:list-item
					fn:if="attrs.readall"
					qa:id="readall"
					remit:click="readall"
					event:details="data"
				>
					<span bem:elem="ico">
						<b:ico name="status:read"/>
					</span>
					<span bem:elem="text">{_this.getMarkAllReadText()}</span>
				</b:list-item>

				<!-- Настроить Рассылки -->
				<b:list-item
					qa:id="cleanmaster"
					remit:click.prevent="cleanmaster"
					event:details="data"
					fn:if="attrs.cleanmaster"
				>
					<span bem:elem="ico">
						<b:ico name="navigation:settings"/>
					</span>
					<span bem:elem="text">{_this.getCleanmasterText()}</span>
				</b:list-item>

				<!-- Перейти в папку метатреда -->
				<b:list-item
					qa:id="navigate"
					remit:click.prevent="navigate"
					event:details="data"
				>
					<span bem:elem="ico">
						<b:ico name="navigation:folder"/>
					</span>
					<span bem:elem="text">{_this.getNavigationText()}</span>
				</b:list-item>

				<!-- Отключить метатред -->
				<b:list-item
					qa:id="disable"
					remit:click.prevent="disable"
					event:details="data"
					fn:if="attrs.disable"
				>
					<span bem:elem="ico">
						<b:ico name="navigation:settings"/>
					</span>
					<span bem:elem="text">{_this.getDisableText()}</span>
				</b:list-item>
			</b:list>
		</fn:match>
	</b:dropdown>
</div>
`,"./app/ui-block/metathread-dropdown-actions/metathread-dropdown-actions.html")}.apply(t,r))||(e.exports=a)},38791:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Variables -->
	<fn:var name="metathread" value="{attrs.model.get('metathread')}"/>
	<fn:var name="folderId" value="{metathread.getMetathreadFolder()}"/>
	<fn:var name="folderName" value="{metathread.getMetathreadFolderName()}"/>
	<!-- Поддержана ли "Загрузить ещё"? -->
	<fn:var name="canLoadMore" value="{_this.canLoadMore()}"/>

	<!-- Content -->
	<div bem:elem="folder">
		<bem:mod name="ponymode" test="attrs.ponymode"/>

		<fn:choose>
			<fn:when test="canLoadMore">
				<b:link
						qa:id="more-link"
						text="{i18n(\'Загрузить ещё\')}"
						remit:click.prevent="more-link-click"
				/>
			</fn:when>

			<fn:otherwise>
				<b:link
						qa:id="folder-link"
						href="{_this.getLinkHref()}"
						text="{_this.getGoToFolderText()}"
						unsafe
						remit:click="folder-link-click"
				/>
			</fn:otherwise>
		</fn:choose>
	</div>

	<!-- Разделитель между футером метатреда и списком писем под ним -->
	<div bem:elem="spacer"
		 qa:id="metathread-spacer-after:folder:{folderId}"
		 fn:if="!attrs['hide-footer-spacer']">
	</div>

	<!-- Верхний бордер -->
	<b:delimeter ponymode="{ponymode}" compact="{attrs.compact}" indent/>
</div>
`,"./app/ui-block/metathread-footer/metathread-footer.html")}.apply(t,r))||(e.exports=a)},78877:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a qa:id="{_this.rootQaId()}" qa:state="{_this.rootQaState()}">

	<!-- Variables -->
	<fn:var name="data" value="{attrs.model}"/>
	<fn:var name="type" value="{_this.getType()}"/>
	<fn:var name="title" value="{_this.getName()}"/>
	<fn:var name="new_cnt" value="{_this.getNewCount()}"/>
	<fn:var name="isunread" value="{_this.hasUnread()}"/>
	<fn:var name="senders" value="{_this.getSenders()}"/>
	<fn:var name="ponymode" value="{attrs['pony-mode']}"/>
	<fn:var name="sticky" value="{attrs.sticky}"/>

	<!-- Класс для переходов стрелками и общих стилей для всех элементов списка писем -->
	<fn:add-class name="js-letter-list-item"/>

	<fn:attr name="href" value="{attrs.redirectUrl}" test="attrs.redirectUrl"/>

	<!-- Mods  -->
	<bem:mod name="first" test="attrs.first"/>
	<bem:mod name="last" test="attrs.last"/>
	<bem:mod name="expanded" test="attrs.expanded"/>
	<bem:mod name="collapsed" test="!attrs.expanded"/>
	<bem:mod name="pony-mode" test="ponymode"/>
	<bem:mod name="sticky" test="sticky"/>
	<bem:mod name="not-sticky" test="!sticky"/>
	<bem:mod name="new-selection" test="attrs.newSelection"/>
	<bem:mod name="firstSelected" test="attrs.isFirstSelected"/>
	<bem:mod name="lastSelected" test="attrs.isLastSelected"/>
	<bem:mod name="active" test="attrs.selected"/>

	<!-- Блок, погнали! -->
	<div bem:elem="background">
		<bem:mod name="active" test="attrs.selected"/>
	</div>

	<!-- Значок непрочитанности -->
	<!-- Read status:Start -->
	<div bem:elem="read-status" qa:id="unread">
		<b:read-status
			state="{isunread}"
			is-forwarded="{false}"
			is-replied="{false}"
			dotSize="{attrs.smallUnreadBtn ? 'small' : 'normal'}"
			model="{data}"
			remit:toggle.prevent.stop="metathreadtogglestatus:unread"
		/>
	</div>
	<!-- Read status:End -->

	<!-- Иконка метатреда -->
	<!-- Avatar:Start -->
	<div bem:elem="avatar" qa:id="avatar">
		<b:metathread-avatar
			centered
			model="{data}"
			size="common"
			state="{attrs.selected}"
			type="{type}"
			touch="{attrs.touch}"
			remit:toggle="avatar"
		/>
	</div>
	<!-- Avatar:End -->

	<!-- Содержимое элемента -->
	<!-- Content:Start -->
	<div bem:elem="content">

		<!-- Название папки метатреда -->
		<!-- Title:Start -->
		<div
			bem:elem="item"
			bem:mod="title"
			qa:id="title">
			<b:metathread-title
				title="{title}"
				type="{type}"
				unread="{isunread}"
				pony-mode="{ponymode}"
			/>
		</div>

		<!-- Toolbar: Start -->
		<fn:choose>
			<!-- Свёрнут -->
			<!-- Collapsed:Start -->
			<fn:when test="!attrs.expanded">
				<!-- Количество новых писем в треде: NEW -->
				<!-- Badge:Start -->
				<div
					fn:if="new_cnt"
					bem:elem="item"
					bem:mod="new_cnt"
					qa:id="new_cnt">
					<b:metathread-badge counter="{new_cnt}"/>
				</div>
				<!-- Badge:End -->

				<div
					bem:elem="item"
					bem:mod="snippet"
					qa:id="snippet"
				>
					<fn:choose>
						<fn:when test="data.isToMyself()">
							<b:metathread-snippet-tomyself senders="{senders}" />
						</fn:when>
						<fn:otherwise>
							<b:metathread-snippet senders="{senders}" />
						</fn:otherwise>
					</fn:choose>
				</div>

				<!-- Время отправки последнего письма в папке -->
				<!-- Date:Start -->
				<div
					bem:elem="item"
					bem:mod="date"
					qa:id="date">
					<b:letter-date date="{data.get('date')}"/>
				</div>
				<!-- Date:End -->
			</fn:when>
			<!-- Collapsed:End -->

			<!-- Развёрнут -->
			<!-- Expanded: Start -->
			<fn:otherwise>
				<!-- Удалить все письма из папки -->
				<!-- Не показываем эту кнопку для метатреда "Письма себе" -->
				<div
					fn:if="!attrs['has-selected']"
					bem:elem="item"
					bem:mod="button"
					qa:id="delete"
					fn:if="!data.isToMyself()"
				>
					<b:button2
						compact="{ponymode}"
						ico="actions:delete"
						pure
						text="{_this.getRemoveButtonText()}"
						remit:click.prevent.stop="metathread:deleteall"
					/>
				</div>
				<!-- Пометить все письма прочитанным -->
				<div
					fn:if="isunread && !attrs['has-selected']"
					bem:elem="item"
					bem:mod="button"
					qa:id="read-all">
					<b:button2
						compact="{ponymode}"
						ico="status:read"
						pure
						text="{_this.getMarkAllReadText()}"
						remit:click.prevent.stop="metathread:readall"
					/>
				</div>
				<!-- Ещё -->
				<div
					bem:elem="item"
					bem:mod="more"
					qa:id="more"
					remit:click.prevent.stop
				>
					<b:metathread-dropdown-actions
						model="{data}"
						pony-mode="{ponymode}"
						cleanmaster="{!data.isToMyself()}"
						disable="{data.isToMyself() && !attrs['hide-disable-to-myself-metathread']}"

						remit:cleanmaster="cleanmaster"
						remit:navigate="link"
						remit:disable="disable"
					/>
				</div>
				<!-- Expanded: End -->
			</fn:otherwise>
		</fn:choose>
		<!-- Toolbar: End -->
	</div>
	<!-- Content:End -->
</a>
`,"./app/ui-block/metathread-head-common/metathread-head-common.html")}.apply(t,r))||(e.exports=a)},97624:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a qa:id="{_this.rootQaId()}" qa:state="expanded">

	<!-- Variables -->
	<fn:var name="data" value="{attrs.model}"/>
	<fn:var name="type" value="{_this.getType()}"/>
	<fn:var name="title" value="{_this.getName()}"/>
	<fn:var name="isunread" value="{_this.hasUnread()}"/>
	<fn:var name="ponymode" value="{attrs['pony-mode']}"/>
	<fn:var name="sticky" value="{attrs.sticky}"/>
	<fn:var name="isShortDropdown" value="{attrs['short-dropdown']}"/>

	<!-- Класс для переходов стрелками и общих стилей для всех элементов списка писем -->
	<fn:add-class name="js-letter-list-item"/>

	<fn:attr name="href" value="{attrs.redirectUrl}" test="attrs.redirectUrl"/>

	<!-- Mods  -->
	<bem:mod name="first" test="attrs.first"/>
	<bem:mod name="pony-mode" test="ponymode"/>
	<bem:mod name="sticky" test="sticky"/>
	<bem:mod name="not-sticky" test="!sticky"/>

	<bem:mod name="new-selection" test="attrs.newSelection"/>
	<bem:mod name="firstSelected" test="attrs.isFirstSelected"/>
	<bem:mod name="lastSelected" test="attrs.isLastSelected"/>
	<bem:mod name="active" test="attrs.selected"/>

	<!-- Блок, погнали! -->
	<div bem:elem="background">
		<bem:mod name="active" test="attrs.selected"/>
	</div>

	<!-- Значок непрочитанности -->
	<!-- Read status:Start -->
	<div bem:elem="read-status" qa:id="unread">
		<b:read-status
			dotSize="{attrs.smallUnreadBtn ? 'small' : 'normal'}"
			state="{isunread}"
			is-forwarded="{false}"
			is-replied="{false}"
			model="{data}"
			shift="{ponymode}"
			remit:toggle.prevent.stop="metathreadtogglestatus:unread"
		/>
	</div>
	<!-- Read status:End -->

	<!-- Иконка метатреда -->
	<!-- Avatar:Start -->
	<div bem:elem="avatar" qa:id="avatar">
		<b:metathread-avatar
			centered
			model="{data}"
			size="common"
			state="{attrs.selected}"
			type="{type}"
			touch="{attrs.touch}"
			remit:toggle="avatar"
		/>
	</div>
	<!-- Avatar:End -->

	<div bem:elem="content">
		<!-- Название папки метатреда -->
		<!-- Title:Start -->
		<div
			bem:elem="item"
			bem:mode="title"
			qa:id="title">
			<b:metathread-title
				title="{title}"
				type="{type}"
				unread="{isunread}"
				pony-mode="{ponymode}"
			/>
		</div>
		<!-- Title:End -->

		<!-- Ещё -->
		<!-- More:Start -->
		<div
			bem:elem="item"
			bem:mod="more"
			qa:id="more"
			remit:click.prevent.stop
		>

			<b:metathread-dropdown-actions
				compact="{isShortDropdown}"
				deleteall="{!data.isToMyself() && !attrs['has-selected']}"
				model="{data}"
				pony-mode="{ponymode}"
				readall="{isunread && !attrs['has-selected']}"
				cleanmaster="{!data.isToMyself() && !attrs.mobile}"
				disable="{data.isToMyself() && !attrs['hide-disable-to-myself-metathread']}"

				remit:cleanmaster="cleanmaster"
				remit:deleteall="metathread:deleteall"
				remit:navigate="link"
				remit:readall="metathread:readall"
				remit:disable="disable"
			/>
		</div>
		<!-- More:End -->
	</div>
</a>
`,"./app/ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded.html")}.apply(t,r))||(e.exports=a)},76792:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<a qa:id="{_this.rootQaId()}" qa:state="collapsed">

	<!-- Variables -->
	<fn:var name="data" value="{attrs.model}"/>
	<fn:var name="type" value="{_this.getType()}"/>
	<fn:var name="title" value="{_this.getName()}"/>
	<fn:var name="new_cnt" value="{_this.getNewCount()}"/>
	<fn:var name="isunread" value="{_this.hasUnread()}"/>
	<fn:var name="senders" value="{_this.getSenders()}"/>
	<fn:var name="ponymode" value="{attrs['pony-mode']}"/>
	<fn:var name="avatar_size" value="{_this.getAvatarSize()}"/>
	<fn:var name="redesign" value="{attrs.redesign}"/>

	<!-- Класс для переходов стрелками и общих стилей для всех элементов списка писем -->
	<fn:add-class name="js-letter-list-item"/>

	<fn:attr name="href" value="{attrs.redirectUrl}" test="attrs.redirectUrl"/>

	<!-- Mods  -->
	<bem:mod name="first" test="attrs.first"/>
	<bem:mod name="pony-mode" test="ponymode"/>
	<bem:mod name="pony-mode-active" test="ponymode && attrs.selected"/>

	<bem:mod name="new-selection" test="attrs.newSelection"/>
	<bem:mod name="firstSelected" test="attrs.isFirstSelected"/>
	<bem:mod name="lastSelected" test="attrs.isLastSelected"/>
	<bem:mod name="active" test="attrs.selected"/>
	<bem:mod name="redesign" test="attrs.redesign"/>

	<!-- Блок, погнали! -->
	<div bem:elem="background">
		<bem:mod name="active" test="attrs.selected"/>
	</div>

	<!-- Левая колонка элемента -->
	<div bem:elem="header">
		<!-- Значок непрочитанности -->
		<!-- Read status:Start -->
		<div bem:elem="read-status" qa:id="unread" fn:if="!redesign">
			<b:read-status
				dotSize="{attrs.smallUnreadBtn ? 'small' : 'normal'}"
				state="{isunread}"
				is-forwarded="{false}"
				is-replied="{false}"
				model="{data}"
				shift="{ponymode}"
				remit:toggle.prevent.stop="metathreadtogglestatus:unread"
			/>
		</div>
		<!-- Read status:End -->

		<!-- Иконка метатреда -->
		<!-- Avatar:Start -->
		<div bem:elem="avatar" qa:id="avatar">
			<b:metathread-avatar
				model="{data}"
				size="{avatar_size}"
				state="{attrs.selected}"
				type="{type}"
				touch="{attrs.touch}"
				disable-hover="{attrs.touch}"
				remit:toggle="avatar"
			/>
		</div>
		<!-- Avatar:End -->
	</div>

	<!-- Содержимое элемента -->
	<!-- Content:Start -->
	<div bem:elem="content" ref="content">
		<!-- Row:Start -->
		<div bem:elem="row" bem:mod="1">
			<div bem:elem="read-status" qa:id="unread" fn:if="redesign">
				<b:read-status
						dotSize="{attrs.smallUnreadBtn ? 'small' : 'normal'}"
						state="{isunread}"
						is-forwarded="{false}"
						is-replied="{false}"
						model="{data}"
						shift="{ponymode}"
						remit:toggle.prevent.stop=""
				/>
			</div>
			<!-- Название папки метатреда -->
			<!-- Title:Start -->
			<div
				bem:elem="item"
				bem:mod="title"
				qa:id="title">
				<b:metathread-title
					title="{title}"
					type="{type}"
					unread="{isunread}"
					pony-mode="{ponymode}"
				/>
			</div>

			<!-- Время отправки последнего письма в папке -->
			<!-- Date:Start -->
			<div
				bem:elem="item"
				bem:mod="date"
				qa:id="date">
				<b:letter-date date="{data.get('date')}"/>
			</div>
			<!-- Date:End -->
		</div>
		<!-- Row:End -->

		<!-- Row:Start -->
		<div bem:elem="row" bem:mod="2">
			<!-- Список отправителей последних писем -->
			<!-- Snippet:Start -->
			<div
				bem:elem="item"
				bem:mod="snippet"
				qa:id="snippet"
				title="{_this.getSendersTooltip(senders, data.isToMyself() ? 'subject' : 'name')}"
			>
				<fn:choose>
					<fn:when test="data.isToMyself()">
						<b:metathread-snippet-tomyself senders="{senders}" compact />
					</fn:when>
					<fn:otherwise>
						<b:metathread-snippet senders="{senders}" />
					</fn:otherwise>
				</fn:choose>
			</div>
			<!-- Snippet:End -->

			<!-- Количество новых писем в треде: NEW -->
			<!-- Badge:Start -->
			<div
				fn:if="new_cnt"
				bem:elem="item"
				bem:mod="new_cnt"
				qa:id="new_cnt">
				<b:metathread-badge counter="{new_cnt}"/>
			</div>
			<!-- Badge:End -->
		</div>
		<!-- Row:End -->
		<!-- Toolbar: End -->
	</div>
	<!-- Content:End -->
</a>
`,"./app/ui-block/metathread-head-compact/metathread-head-compact.html")}.apply(t,r))||(e.exports=a)},97702:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="metathread-preview">
	<fn:var name="message" value="{attrs.model}" />
	<fn:var name="ponymode" value="{attrs.ponymode}"/>

	<fn:var name="metathreadData" value="{_this.getMetathreadData()}"/>
	<fn:var name="title" value="{metathreadData.folder_name}"/>
	<fn:var name="type" value="{metathreadData.category}"/>
	<fn:var name="unread" value="{metathreadData.flags.unread}"/>

	<div
		bem:elem="selected-count"
		fn:if="attrs.selectedLetterCountText"
	>
		<b:badge text="{attrs.selectedLetterCountText}" size="l"/>
	</div>

	<div bem:elem="header">
		<div bem:elem="avatar" qa:id="metathread-avatar">
			<b:metathread-avatar
				indent="{ponymode ? 'right' : false}"
				model="{message}"
				size="common"
				disable-select
				disable-hover
				type="{type}"
			/>
		</div>

		<div bem:elem="title" qa:id="metathread-title">
			<b:metathread-title
				title="{title}"
				type="{type}"
				unread="{unread}"
				pony-mode="{ponymode}"
			/>
		</div>
	</div>

	<div bem:elem="snippet">
		<fn:choose>
			<fn:when test="message.isToMyself()">
				<b:metathread-snippet-tomyself senders="{metathreadData.last_senders}" preview />
			</fn:when>
			<fn:otherwise>
				<b:metathread-snippet senders="{metathreadData.last_senders}" />
			</fn:otherwise>
		</fn:choose>
	</div>
</div>
`,"./app/ui-block/metathread-preview/metathread-preview.html")}.apply(t,r))||(e.exports=a)},43655:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="metathread-snippet">
	<fn:var name="senders" value="{_this.getSenders()}" />
	<fn:var name="lastIdx" value="{senders.length - 1}" />

	<bem:mod name="preview" test="attrs.preview" />
	<bem:mod name="compact" test="attrs.compact" />

	<fn:for data="senders" as="sender" key="idx">
		<span bem:elem="subject" key="{attrs.id + ':' + idx}">
			<bem:mod name="unread" test="sender.unread" />
			<bem:mod name="compact" test="attrs.compact" />
			<bem:mod name="preview" test="attrs.preview" />

			<span bem:elem="subject-value">
				<bem:mod name="preview" test="attrs.preview" />
				<fn:value>sender.subject || _this.getEmptySubject()</fn:value>
			</span>

			<span fn:if="idx !== lastIdx">,&nbsp;</span>
		</span>
	</fn:for>
</div>
`,"./app/ui-block/metathread-snippet-tomyself/metathread-snippet-tomyself.html")}.apply(t,r))||(e.exports=a)},94571:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="metathread-snippet">
	<fn:var name="lastIdx" value="{attrs.senders.length - 1}"/>

	<fn:for
		data="attrs.senders"
		as="sender"
		key="idx">
		<span bem:elem="sender" key="{attrs.id + ':' + idx}">
			<bem:mod name="unread" test="sender.unread"/>
			<fn:value>sender.name</fn:value>
			<fn:value>idx !== lastIdx ? ', ' : ''</fn:value>
		</span>
	</fn:for>
</div>
`,"./app/ui-block/metathread-snippet/metathread-snippet.html")}.apply(t,r))||(e.exports=a)},11832:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span qa:id="metathread-title">
	<bem:mod name="{attrs.type}"/>
	<bem:mod name="unread" test="attrs.unread"/>
	<bem:mod name="ponymode" test="attrs['pony-mode']"/>
	<bem:mod name="no-caps" test="attrs['disable-metathread-caps']"/>
	{attrs.title}
</span>
`,"./app/ui-block/metathread-title/metathread-title.html")}.apply(t,r))||(e.exports=a)},14142:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Переменные -->
	<fn:var name="model" value="{attrs.model}"/>
	<fn:var name="folderId" value="{model.get('metathread_data.folder')}" />
	<fn:var name="folderName" value="{model.get('metathread_data.folder_name')}" />
	<!-- Метатред первый в списке писем -->
	<fn:var name="isFirst" value="{attrs.first}"/>
	<!-- Метатред без отступа? -->
	<fn:var name="disableSpacer" value="{attrs['disable-spacer']}"/>
	<!-- Метатред последний в списке писем -->
	<fn:var name="isLast" value="{attrs.last}"/>
	<!-- Метатред раскрыт, если model.isExpanded -->
	<fn:var name="isExpanded" value="{model.isExpanded()}"/>
	<!-- 3pane -->
	<fn:var name="isCompact" value="{attrs.compact}"/>
	<!-- Компактный вид -->
	<fn:var name="ponymode" value="{attrs.ponymode}"/>
	<!-- Укороченный дропдаун -->
	<fn:var name="isShortDropdown" value="{attrs['short-dropdown']}"/>
	<!-- Укороченный текст -->
	<fn:var name="isShortText" value="{attrs['short-text']}"/>
	<!-- Выбран галкой -->
	<fn:var name="isSelected" value="{attrs.selected}"/>
	<!-- Прилип -->
	<fn:var name="isSticky" value="{_this.isStickyEnabled() && isExpanded && attrs.sticky}"/>

	<!-- Модификаторы -->
	<bem:mod name="first" test="isFirst" />
	<bem:mod name="last" test="isLast" />
	<bem:mod name="expanded" test="isExpanded" />
	<bem:mod name="collapsed" test="!isExpanded" />
	<bem:mod name="sticky" test="isSticky" />
	<bem:mod name="first-sticky" test="isFirst && isSticky"/>
	<bem:mod name="active" test="isSelected"/>
	<bem:mod name="new-selection" test="attrs.newSelection"/>
	<bem:mod name="firstSelected" test="attrs.isFirstSelected"/>
	<bem:mod name="lastSelected" test="attrs.isLastSelected"/>

	<!-- Содержимое -->
	<div bem:elem="spacer" fn:if="!isFirst && !disableSpacer">
		<!-- <bem:mod name="before" /> -->
	</div>

	<div bem:elem="contain">
		<fn:choose>
			<fn:when test="!isCompact">
				<b:metathread-head-common
					expanded="{isExpanded}"
					first="{isFirst}"
					last="{isLast}"
					model="{model}"
					pony-mode="{ponymode}"
					selected="{isSelected}"
					isFirstSelected="{attrs.isFirstSelected}"
					isLastSelected="{attrs.isLastSelected}"
					has-selected="{attrs['has-selected']}"
					short-text="{isShortText}"
					sticky="{isSticky}"
					touch="{attrs.touch}"
					newSelection="{attrs.newSelection}"
					smallUnreadBtn="{attrs.smallUnreadBtn}"
					redirectUrl="{attrs.redirectExp && _this.getUrl()}"

					event:details="model"
					remit:click="click:metathread-item"
					remit:contextmenu="rightclick"
					remit:avatar="click:metathreadavatar"
					remit:link="click:metathread-link"
					remit:cleanmaster="click:cleanmaster"
					remit:scrollintoself="scrollintoself"
					remit:disable="click:disable"
					use:mediator="letters-actions folders-actions"
				/>
			</fn:when>
			<fn:when test="isCompact && isExpanded">
				<b:metathread-head-compact-expanded
					first="{isFirst}"
					last="{isLast}"
					model="{model}"
					pony-mode="{ponymode}"
					selected="{isSelected}"
					has-selected="{attrs['has-selected']}"
					short-dropdown="{isShortDropdown}"
					sticky="{isSticky}"
					touch="{attrs.touch}"
					redirectUrl="{attrs.redirectExp && _this.getUrl()}"

					event:details="model"
					remit:click="click:metathread-item"
					remit:contextmenu="rightclick"
					remit:avatar="click:metathreadavatar"
					remit:link="click:metathread-link"
					remit:cleanmaster="click:cleanmaster"
					remit:scrollintoself="scrollintoself"
					remit:disable="click:disable"
					use:mediator="letters-actions folders-actions layout-manager"
				/>
			</fn:when>
			<fn:otherwise>
				<b:metathread-head-compact
					first="{isFirst}"
					last="{isLast}"
					model="{model}"
					pony-mode="{ponymode}"
					selected="{isSelected}"
					short-dropdown="{isShortDropdown}"
					touch="{attrs.touch}"
					redirectUrl="{attrs.redirectExp && _this.getUrl()}"

					event:details="model"
					remit:click="click:metathread-item"
					remit:contextmenu="rightclick"
					remit:avatar="click:metathreadavatar"
					remit:link="click:metathread-link"
					remit:cleanmaster="click:cleanmaster"
					remit:scrollintoself="scrollintoself"
					use:mediator="letters-actions folders-actions"
				/>
			</fn:otherwise>
		</fn:choose>

		<!-- Разделители вокруг расхлопнутого метатреда -->
		<b:delimeter compact="{isCompact}" ponymode="{ponymode}" qa:id="qqq1" indentRight="{attrs.newSelection}" />
		<b:delimeter last compact="{isCompact}" ponymode="{ponymode}" qa:id="qqq2" indentRight="{attrs.newSelection}" />
	</div>

	<!-- Разделитель для предыдущего письма в открытом и закрытом состоянии -->
	<b:delimeter full="{isExpanded}" compact="{isCompact}" ponymode="{ponymode}" qa:id="qqq3" indentRight="{attrs.newSelection}"/>
</div>
`,"./app/ui-block/metathread/metathread.html")}.apply(t,r))||(e.exports=a)},81596:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:match name="sidebar-content">
		<b:nav-folders
			ref="navFolders"
			use:mediator="letters-actions folders-actions user-info letters-loader pony-mode folders-navigation"
			remit:folderclick="folder:click"
			active="{attrs['folder-active']}"
			handle-drop
			models="{attrs.models}"
			router="{attrs.router}"
			sidebar
			with-clear
		/>

		<div bem:elem="divider" />

		<div bem:elem="footer" qa:id="mobile-sidebar-footer">
			<fn:if test="!attrs['hide-settings-button']">
				<b:button2
					qa:id="settings-button"
					ico="navigation:settings"
					remit:click="settings:click"
					text="Настройки"
					fluid
					pure
				/>
			</fn:if>
			<b:button2
				qa:id="contacts-button"
				ico="categories:addressbook_webview"
				remit:click="contacts:open"
				text="Контакты"
				fluid
				pure
			/>
			<fn:if test="attrs.showUnsubscribeButton">
				<b:react-async
					use:mediator="themes-manager"
					component="SidebarUnsubscribeButton"
					ponyMode
					mobile
					showTitle
				/>
			</fn:if>

			<fn:if test="attrs['show-reload-button']">
				<b:button2
					qa:id="reload-button"
					ico="actions:postpone_alt"
					remit:click="reload:click"
					text="Обновить страницу"
					fluid
					pure
				/>
			</fn:if>
		</div>
	</fn:match>

	<fn:if test="_this.isOpen()" animated>
		<div bem:elem="wrapper" remit:click="mobilesidebar:close">
			<div bem:elem="content" qa:id="mobile-sidebar" remit:click.prevent.stop>
				<bem:mod name="open" test="attrs.open" />

				<div bem:elem="header">
					<b:button2
						qa:id="close"
						ico="navigation:arrow_list_previous"
						remit:click="mobilesidebar:close"
						text="Свернуть"
						pure
					/>
				</div>

				<b:scrollable
					id="scrollShort"
					ref="scrollShort"
					scroll-style="{attrs['short-scroll-style']}"
					ponymode="{ponyMode}"
					disable-horizontal-scroll
				>
					<fn:apply-match name="sidebar-content" />
				</b:scrollable>
			</div>
		</div>
	</fn:if>
</div>
`,"./app/ui-block/mobile-sidebar/mobile-sidebar.html")}.apply(t,r))||(e.exports=a)},25918:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="folders">

	<b:nav
		models="{attrs.models}"
		short="{attrs.short}"
		clean="{attrs.clean}"
		touch="{attrs.touch}"
		touch-nav="{attrs['touch-nav']}"
		pony-mode="{attrs.ponymode}"
		has-parent-private-folders="{attrs['has-parent-private-folders']}"
	>

		<fn:match name="nav-head"></fn:match>

		<fn:match name="nav-item" args="folder">
			<fn:var name="level" value="{_this.getLimitedFolderLevel(folder)}"/>
			<fn:var name="expanded" value="{_this.isFolderExpanded(folder)}"/>
			<fn:var name="url" value="{_this.getFolderUrl(folder)}"/>
			<fn:var name="title" value="{_this.getTitle(folder)}"/>

			<fn:var name="shortcut" value="{_this.folder2shortcutMap[folder.get('type')]}" test="attrs.sidebar && _this.isShortcut(folder)"/>

			<fn:if test="this.isOtherUserFoldersContainer(folder) && !attrs.short">
				<hr bem:elem="hr"/>
			</fn:if>

			<b:immutable-virtual-block
				key="{folder.id}"
				name="nav-item-folder"
				model="{folder}"
				title="{title}"
				data-title="{_this.getFolderTitle(folder)}"
				active="{attrs.active}"
				system="{attrs.system}"
				shortcut="{shortcut}"
				highlight="{attrs.highlight}"
				icomap="{_this.getFolder2IcoMap()}"
				isShortcut="{_this.isShortcut(folder)}"
				folder-ico="{_this.getFolderIco(folder)}"
				show-clear="{_this.isClearBtnVisible(folder)}"
				child-level="{level}"
				is-expand-controls-visible="{_this.isFolderExpandControlsVisible(folder)}"
				expanded="{expanded}"
				is-parents-expanded="{_this.isFolderParentsExpanded(folder)}"
				nav-short="{attrs.short}"
				counters-off="{attrs['counters-off']}"
				url="{url}"
				unread="{(expanded && !attrs.short || folder.isDrafts() && attrs.short) ? _this.getUnreadCount(folder) : _this.unreadWithChild(folder)}"
				touch-nav="{attrs['touch-nav']}"
				avatarSrc="{_this.getAvatar(folder)}"
				has-parent-private-folders="{attrs['has-parent-private-folders']}"
				has-virtual-containers="{attrs['has-virtual-containers']}"
			>
				<a
					bem:elem="item"
					qa:id="{attrs.model.id}"
					data-folder-link-id="{attrs.model.id}"
					qa:state="level:{attrs['child-level']}"
					remit:mousedown="folderclickstart"
					remit:touchstart="folderclickstart"
					remit:mouseenter="folderhover"
					remit:click="folderclick"
					remit:contextmenu="rightclick"
					event:details="attrs.model">

					<fn:add-class name="js-shortcut" test="attrs.shortcut" />

					<fn:attr name="href" value="{attrs.url}" test="attrs.url"/>
					<fn:attr name="title" value="{attrs['data-title']}" test="attrs['data-title']"/>
					<fn:attr name="data-title" value="{attrs['data-title']}" test="attrs['data-title']"/>

					<fn:var name="folder" value="{attrs.model}"/>
					<fn:var name="active" value="{attrs.active == attrs.model.id}"/>

					<bem:mod name="active" test="active" />
					<bem:mod name="shortcut" test="attrs.isShortcut" />
					<bem:mod name="highlight" test="attrs.highlight == attrs.model.id" />
					<bem:mod name="expanded" test="!(attrs['is-parents-expanded'] && attrs.model.get('children'))" value="{attrs.expanded}"/>
					<bem:mod name="child-level" value="{attrs['child-level']}"/>


					<div
						bem:elem="folder"
						qa:id="selected:{active ? 'true' :'false'}"
					>
						<!-- класс для стилей, дата атрибут для тестов -->
						<bem:mod name="parent" test="attrs.model.get('children')" />
						<fn:attr name="data-parent" value="{attrs.model.get('children') ? 'true' : 'false'}"/>

						<fn:choose>
							<!-- Разворот папок --> // TODO: here
							<fn:when test="attrs['is-expand-controls-visible']">
								<div bem:elem="folder-ico" qa:id="folder-arrow">
									<fn:if test="attrs.expanded">
										<b:button2
											remit:click.prevent.stop="foldertoggle"
											ico="navigation:drop_down_big"
											qa:id="arrow-up"
											badge
											title="{i18n(\'Свернуть\')}"
										/>
									</fn:if>

									<fn:if test="!attrs.expanded">
										<b:button2
											remit:click.prevent.stop="foldertoggle"
											ico="navigation:drop_next_big"
											qa:id="arrow-down"
											badge
											ico-arrow-down
											title="{i18n(\'Развернуть\')}"
										/>
									</fn:if>
								</div>
							</fn:when>

							<!-- Иконка папок -->
							<fn:otherwise>
								<div bem:elem="folder-ico" qa:id="folder-ico">
									<b:ico
										name="{attrs['folder-ico']}"
										mod="{attrs['folder-ico']}"
									/>
								</div>
							</fn:otherwise>
						</fn:choose>

						<fn:if test="attrs['has-virtual-containers'] && attrs['child-level'] === 0 && attrs.avatarSrc">
							<div bem:elem="avatar" qa:id="avatar">
								<b:avatar
									src="{attrs.avatarSrc}"
									size="xs"/>
							</div>
						</fn:if>

						<fn:if test="folder.id === attrs['parent-private-folders-container-id']">
							<div bem:elem="hidden-folders-icon" qa:id="hidden-folders-icon">
								<b:avatar
									ico="status:lock_on_small"
									ico-size="s"
									size="xs"
									with-border="{false}"
								/>
							</div>
						</fn:if>

						<!-- Название папки -->
						<div bem:elem="folder-name" qa:id="folder-name:name:{attrs.model.get('name')}">
							<bem:mod name="secure" test="attrs.model.get('security')"/>
							<bem:mod name="shared" test="attrs.model.isShared()"/>
							<bem:mod name="shared-give" test="attrs.model.isShareGive()"/>

							<div bem:elem="folder-name__txt" qa:id="folder-name">
								<fn:value>attrs.title</fn:value>
							</div>

							<fn:if test="attrs.model.isSecure()">
								<div bem:elem="folder-name__lock">
									<!-- Замок если папка запаролена -->
									<fn:if test="!attrs.model.isSecureOpen()">
										<b:ico
											name="{attrs.icomap['lock-on_fill']}"
											mod="{attrs.icomap['lock-on_fill']}"
										/>
									</fn:if>

									<!-- Замок если папка распаролена -->
									<fn:if test="attrs.model.isSecureOpen()">
										<b:ico
											name="{attrs.icomap['lock-off_fill']}"
											mod="{attrs.icomap['lock-off_fill']}"
										/>
									</fn:if>
								</div>
							</fn:if>

							<fn:if test="attrs.model.isShareGive()">
								<div bem:elem="folder-name__shared">
									<!-- Значок расшаренной папки -->
									<b:ico
										name="{attrs.icomap['shared']}"
										mod="{attrs.icomap['shared']}"
									/>
								</div>
							</fn:if>
						</div>

						<!-- Кнопка Очистить для корзины и спама, если там есть письма -->
						<fn:if test="attrs['show-clear']">
							<div
								bem:elem="folder-clear"
								qa:id="folder-clear"
							>
								<b:button2
									radar-id="clear-{folder.isTrashLike() ? 'trash' : 'spam'}"
									remit:click.prevent="clear"
									event:details="{model:folder}"
									text="{i18n(\'Очистить\')}"
									badge
								/>
							</div>
						</fn:if>

						<!-- Счетчик непрочитанных -->
						<fn:if test="!attrs['counters-off'] && attrs.unread && !folder.isTrashLike() && !folder.isSpam() && !folder.isArchive()">
							<div bem:elem="folder-badge" data-folder-id="{folder.id}">
								<fn:var name="unreadLimit" value="{attrs['nav-short'] ? 99 : 999}"/>
								<b:badge
										text="{attrs.unread > unreadLimit ? unreadLimit + '+' : attrs.unread}"
										size="{attrs['nav-short'] ? attrs.ponymode ? 'xxs_alt' : 's_alt' : 'm'}"
										transparent="{attrs.short}"
								/>
							</div>
						</fn:if>
					</div>
				</a>
			</b:immutable-virtual-block>
			<fn:if test="!attrs['hide-add-folder'] && !attrs.short && attrs['has-virtual-containers'] && _this.isMyFoldersContainerExpanded() && _this.isLastOfMyFolders(folder)">
				<div
					bem:elem="new-folder-btn-wrapper"
				>
					<bem:mod name="pony-mode" test="attrs.ponymode" />
					<b:new-folder-btn
						key="{folder.id}"
						isSidebar="{!!attrs.sidebar}"
						ponymode="{attrs.ponymode}"
					/>
				</div>
			</fn:if>
		</fn:match>

		<fn:match name="nav-foot">
			<fn:if test="!attrs['hide-add-folder'] && !attrs.short && !attrs['has-virtual-containers']">
				<fn:if test="!attrs['show-unsubscribe-button']">
					<hr bem:elem="hr"/>
				</fn:if>

				<b:new-folder-btn
					isSidebar="{!!attrs.sidebar}"
					ponymode="{attrs.ponymode}"
				/>
			</fn:if>
			<fn:if test="attrs['touch'] && attrs['touch-nav']">
				<a bem:elem="item" remit:click.prevent.stop="settings:click" href="/settings/">
					<table bem:elem="folder">
						<tr>
							<td bem:elem="folder-ico">
								<b:ico
									name="setting"
									mod="setting"
								/>
							</td>
							<td bem:elem="folder-name">
								<div bem:elem="folder-name__txt">
									<fn:value>i18n(\'Настройки\')</fn:value>
								</div>
							</td>
						</tr>
					</table>
				</a>
			</fn:if>
			<fn:if test="attrs['show-unsubscribe-button']">
				<hr bem:elem="hr"/>
				<b:react-async
							component="SidebarUnsubscribeButton"
							showTitle
						/>
			</fn:if>
		</fn:match>
	</b:nav>
</div>
`,"./app/ui-block/nav-folders/nav-folders.html")}.apply(t,r))||(e.exports=a)},60532:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<nav>
	<bem:mod name="short" test="attrs.short"/>
	<bem:mod name="expanded" test="!attrs.short"/>
	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="clean" test="attrs.clean"/>
	<bem:mod name="touch-nav" test="attrs['touch-nav']"/>
	<bem:mod name="hover-support" test="attrs['hover-support']"/>
	<bem:mod name="pony-mode" test="attrs['pony-mode']"/>

	<!-- Для nav.spec.js-->
	<fn:match name="nav-item" args="item">
		<span
			bem:elem="item"
			key="{item.id}">

			<bem:mod name="active" test="item.active" />
			<bem:mod name="shortcut" test="attrs.short" />

			<table bem:elem="folder">
				<tr>
					<td bem:elem="folder-ico">
						<b:ico
							name="{item.icon}"
							size="s"
						/>
					</td>
					<fn:if test="!attrs.short">
						<td bem:elem="folder-name">
							<div bem:elem="folder-name__txt">
								<fn:value>item.title</fn:value>
							</div>
						</td>
					</fn:if>
				</tr>
			</table>
		</span>
	</fn:match>

	<fn:apply-match name="nav-head"/>


	<fn:var name="myFoldersItem" value="{_this.getMyFoldersItem(attrs.models)}"/>

	<fn:if test="attrs['has-parent-private-folders']">
		<fn:apply-match name="nav-item" args="_this.getParentPrivateFoldersItem()" />
		<fn:for data="_this.getParentPrivateFolders(attrs.models)" as="item">
			<fn:if test="!item.hidden">
				<fn:apply-match name="nav-item" args="item" />
			</fn:if>
		</fn:for>
		<hr bem:elem="hr"/>
	</fn:if>

	<fn:if test="!!myFoldersItem">
		<fn:apply-match name="nav-item" args="myFoldersItem"/>
	</fn:if>
	<fn:for data="_this.getCommonFolders(attrs.models)" as="item">
		<fn:if test="!item.hidden">
			<fn:apply-match name="nav-item" args="item" myFoldersItem="myFoldersItem"/>
		</fn:if>
	</fn:for>

	<fn:apply-match name="nav-foot"/>
</nav>
`,"./app/ui-block/nav/nav.html")}.apply(t,r))||(e.exports=a)},22350:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div data-qa-id="new-folder-btn">
	<bem:mod name="in-sidebar" test="attrs.isSidebar"/>
	<bem:mod name="ponymode" test="attrs.ponymode"/>

	<div bem:elem="button-wrapper">
		<b:button2
			bem:elem="btn"
			remit:click="openPopup"
			short="{attrs.short}"
			compact="{attrs.ponymode}"
			dropmenu="{!attrs.isSidebar}"
			nowrap
			text-overflow
			fluid="{!_this.useNewToolbar()}"
			fill="{_this.useNewToolbar()}"
			pure
			ico="{attrs.ponymode ? 'actions:add' : 'actions:add_big'}"
			text="{i18n(\'Новая папка\')}"
		/>
	</div>
</div>
`,"./app/ui-block/new-folder-btn/new-folder-btn.html")}.apply(t,r))||(e.exports=a)},31263:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	qa:id="right-column-noads"
	promo:id="right-column-noads"
>
	<div fn:if="!attrs.hide" bem:elem="button">
		<b:react-async
			component="NoadsButton"
			text="{_this.getButtonContent()}"
			isLight="{_this.isButtonLight()}"
			isDarkMode="{attrs['isDarkMode']}"
			onClick="{_this.onActionClick}"
			onCloseClick="{_this.onCloseClick}"
		/>
	</div>
</div>
`,"./app/ui-block/noads-button/noads-button.html")}.apply(t,r))||(e.exports=a)},63645:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<div bem:elem="badge" fn:if="attrs.show" qa:id="{attrs['test-id']}" style="{attrs.placementStyles}">
		<bem:mod name="color_{attrs['colorMode']}" test="attrs['colorMode']"/>
		<bem:mod name="size_{attrs.size}" test="attrs.size"/>
	</div>
	<fn:apply-match name="content"/>
</div>
`,"./app/ui-block/notification-badge/notification-badge.html")}.apply(t,r))||(e.exports=a)},90945:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="notify">
	<bem:mod name="touch" test="_this.isTouch()"/>
	<bem:mod name="fixed" test="attrs.fixed"/>
	<bem:mod name="mobile-footer" test="attrs['mobile-footer']"/>

    <fn:add-class name="slide-in" test="attrs.animated"/>

	<fn:if test="attrs.items">
		<fn:for data="attrs.items" as="data">
			<fn:if test="data">
				<fn:choose>
					<fn:when test="data.item">
						<div key="notify-{data['_key']}" ref="{data['_key']}" style="margin: 8px 0;"/>
					</fn:when>
					<fn:otherwise>
						<b:notify
								key="notify-{data['_key']}"
								ref="{data['_key']}"
								type="{data.type}"
								text="{data.text}"
								secondary-text="{data.secondaryText}"
								icon="{data.icon}"
								icon-size="{data.iconSize}"
								qa:id="{data.qa}"
								duration="{data.duration}"
								actions="{data.actions}"
								secondary-actions="{data.secondaryActions}"
								touch="{attrs.touch}"
								inline="{data.inline}"
								direction="{data.direction}"
								shortcut="{data.shortcut}"
								animated
						/>
					</fn:otherwise>
				</fn:choose>
			</fn:if>
		</fn:for>
	</fn:if>
</div>
`,"./app/ui-block/notify-stack/notify-stack.html")}.apply(t,r))||(e.exports=a)},795:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="type" value="{attrs.type}" test="attrs.type"/>
	<bem:mod name="inline" test="attrs.inline"/>
	<bem:mod name="touch" test="attrs.touch || _this.isOctaviusMobile()"/>
	<bem:mod name="direction" value="{attrs.direction}" test="attrs.direction"/>
	<bem:mod name="hasntactions" test="!attrs.actions || !attrs.actions.length"/>

	<fn:add-class name="js-shortcut" test="attrs.shortcut" />

	<fn:var name="secondaryActions" value="{attrs['secondary-actions']}"/>
	<fn:var name="hasSecondaryActions" value="{secondaryActions && secondaryActions.length}"/>
	<fn:var name="multiline" value="{!!attrs['secondary-text'] || hasSecondaryActions}"/>

	<fn:if test="!attrs.closed" animated>
		<div bem:elem="body">
			<div
				bem:elem="icon"
				fn:if="attrs.icon"
			>
				<b:ico name="{attrs.icon}" size="{attrs['icon-size'] || 's'}"/>
			</div>
			<div bem:elem="content">
				<span bem:elem="message">
					<span bem:elem="message__text" qa:id="message">
						<!--<bem:mod name="center" test="attrs.touch && !hasAction"/>-->
						<fn:value>attrs.text</fn:value>
					</span>
				</span>

				<span bem:elem="actions">
					<span bem:elem="actions-sub">
						<fn:for data="attrs.actions" test="attrs.actions" as="item"
								key="index">
							<a bem:elem="action" remit:click="action" qa:id="action"
							   event:details="item.event"
							   key="{index}">
								<fn:if test="item.link">
									<fn:attr name="href" value="{item.link}"/>
									<fn:attr name="target" value="_blank"/>
								</fn:if>

								<span bem:elem="{item.text}" qa:id="action-text">
								<fn:value>item.text</fn:value>
							</span>
							</a>
						</fn:for>
					</span>
				</span>
				<div
					bem:elem="secondary"
					fn:if="attrs['secondary-text'] && !hasSecondaryActions"
				>
					{attrs['secondary-text']}
				</div>

				<div
					bem:elem="secondary"
					fn:if="hasSecondaryActions"
				>
					<span bem:elem="actions">
						<span bem:elem="actions-sub">
							<fn:for data="secondaryActions"
									test="hasSecondaryActions"
									as="item"
									key="index"
							>
								<a bem:elem="action"
								   remit:click="action:secondary"
								   qa:id="action:secondary:{index}"
								   event:details="item.event"
								   key="{index}"
								>
									<fn:if test="item.link">
										<fn:attr name="href" value="{item.link}"/>
										<fn:attr name="target" value="_blank"/>
									</fn:if>

									<span bem:elem="{item.text}" qa:id="secondary-action-text">
										{item.text}
									</span>
								</a>
							</fn:for>
						</span>
					</span>
				</div>
			</div>
			<fn:if test="!attrs['hide-close-button']">
				<div bem:elem="ico-close">
					<bem:mod name="multiline" test="multiline"/>
					<b:button2
							ico="actions:close"
							size="s"
							secondary
							short
							remit:click="notify-close"
							centered
					/>
				</div>
			</fn:if>
		</div>
	</fn:if>
</div>
`,"./app/ui-block/notify/notify.html")}.apply(t,r))||(e.exports=a)},1109:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="octopus">
	<bem:mod name="mobile" test="attrs.mobile"/>
	<bem:mod name="isHorizontal" test="attrs.isHorizontal"/>
	<fn:var name="type" value="{_this.getType()}"/>
	<fn:var name="messages" value="{_this.getMessages()}"/>
	<fn:var name="noSearchMessages" value="{_this.getNoSearchMessages()}"/>
	<fn:var name="placeholder" value="{_this.getCurrentPlaceholder()}" />
	<fn:var name="isLoadedTheme" value="{attrs.isLoadedTheme}" />
	<fn:var name="folderId" value="{isNoSelect ? attrs.model.folder.id : attrs.folder.id}" />
	<fn:var name="wasClickedSearchInExcludedFoldersButton" value="{attrs['show-search-in-excluded-folders'] && attrs['search-has-operands']}" />

	<fn:var name="isNewDesign" value="{_this.isNewDesign()}" />
	<fn:var name="is3Pane" value="{attrs.is3Pane}" />
	<fn:var name="isPonyMode" value="{attrs.ponymode}" />
	<fn:var name="isDefaultTheme" value="{_this.isDefaultTheme()}" />
	<fn:var name="isLightColorTheme" value="{attrs.isLightColorTheme}" />
	<fn:var name="isVK" value="{_this.isVK()}" />

	<fn:var name="isShareTake" value="{_this.isShareTake()}" />
	<fn:var name="isShareGive" value="{_this.isShareGive()}" />

	<fn:var name="emptyStateType" value="{_this.getEmptyStateType()}" />
	<fn:var name="isInboxFolder" value="{attrs.model.folder.id === '0'}" />
	<fn:var name="isEmptyFolder" value="{type === 'empty-folder'}" />
	<fn:var name="isEmptyInboxFolder" value="{type === 'empty-inbox-folder'}" />
	<fn:var name="isTrashFolder" value="{type === 'trash'}" />
	<fn:var name="isSpamFolder" value="{type === 'spam'}" />
	<fn:var name="isNoDraftsFolder" value="{type === 'no-drafts'}" />
	<fn:var name="isNoTemplatesFolder" value="{type === 'no-templates'}" />
	<fn:var name="isNoSearch" value="{type === 'no-search'}" />
	<fn:var name="isNoSelect" value="{type === 'no-select'}" />
	<fn:var name="isSecureFolder" value="{type === 'secure-folder'}" />
	<fn:var name="isSecureSearch" value="{type === 'secure-search'}" />
	<fn:var name="isNoLetter" value="{type === 'no-letter'}" />

	<fn:var name="isOldPlaceholder" value="{placeholder === 'old'}" />
	<fn:var name="isOldTwoBtnPlaceholder" value="{placeholder === 'oldTwoBtn'}" />
	<fn:var name="isNewPlaceholder" value="{placeholder === 'new'}" />
	<fn:var name="isNewTwoBtnPlaceholder" value="{placeholder === 'newTwoBtn'}" />

	<fn:match name="newGoToInbox">
		<b:button2
			touch="{attrs.mobile}"
			center
			remit:click.prevent="goToInbox"
			event:details="{folderId: folderId}"
			text="{i18n(\'Перейти во входящие\')}"
			nowrap
			text-overflow
		/>
	</fn:match>
	<fn:match name="oldGoToInbox">
		<b:link
			contrast
			remit:click.prevent="goToInbox"
			event:details="{folderId: folderId}"
			text="{i18n(\'Перейти во входящие\')}"
		/>
	</fn:match>


	<bem:mod name="compact" test="isNoSelect"/>
	<bem:mod name="full" test="!isNoSelect"/>
	<bem:mod name="full-height" test="attrs['full-height']"/>
	<bem:mod name="transparent" test="attrs.transparent"/>
	<bem:mod name="fixed" test="attrs.fixed"/>

	<fn:if test="!attrs.mobile || !attrs.isHorizontal">
		<div bem:elem="icon" qa:id="{type}:icon">
			<bem:mod name="{type}"/>
			<bem:mod name="default-theme" test="isNewDesign && isDefaultTheme"/>
			<bem:mod name="color-theme" test="isNewDesign && !isDefaultTheme"/>
			<bem:mod name="new-design" test="isNewDesign"/>
			<fn:attr name="style" value="background-image: url({_this.getIcon()});"
					 test="isLoadedTheme && !isNewDesign"/>
			<fn:if test="isLoadedTheme && !isVK && isNewDesign && isDefaultTheme">
				<fn:attr name="style" value="background-image: url({_this.getIcon()});"/>
			</fn:if>
			<fn:if test="isLoadedTheme && !isVK && isNewDesign && !isDefaultTheme">
				<b:react-async
					component="OctopusLogo"
					emptyStateType="{emptyStateType}"
				/>
			</fn:if>
		</div>
	</fn:if>

	<div bem:elem="text" qa:id="{type}:text">
		<bem:mod name="new-design" test="isNewDesign"/>
		<bem:mod name="color-theme" test="!isDefaultTheme"/>
		<bem:mod name="default-theme" test="isDefaultTheme"/>
		<bem:mod name="light-color-theme" test="isLightColorTheme"/>
		<bem:mod name="old-two-btn" test="isOldTwoBtnPlaceholder"/>
		<bem:mod name="3pane" test="is3Pane"/>
		<bem:mod name="pony-mode" test="isPonyMode"/>
		<bem:mod name="share-take" test="isNewDesign && isShareTake"/>
		<fn:choose>
			<fn:when test="isEmptyInboxFolder">
				<fn:if test="isOldPlaceholder || isOldTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'Писем нет\')}
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder || isNewTwoBtnPlaceholder">
					<span bem:elem="title">
					{i18n(\'Писем нет\')}
				</span>
				</fn:if>
			</fn:when>

			<fn:when test="isEmptyFolder">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
						<bem:mod name="new-design" test="isNewDesign"/>
						{i18n(\'В папке нет писем\')}
					</span>
					</span>
					<span bem:elem="line">
						<b:link
							contrast
							fn:if="_this.shouldDisplayFilter()"
							remit:click.prevent="settingsfilters:create"
							event:details="{models: [], folder: attrs.folder.id}"
							text="{i18n(\'Создать фильтр\')}"
							qa:id="create-filter"
						/>
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
						<bem:mod name="new-design" test="isNewDesign"/>
						{i18n(\'В папке нет писем\')}
					</span>
					</span>
					<span bem:elem="line">
						<bem:mod name="old-design-two-buttons"/>
						<fn:apply-match name="oldGoToInbox"/>
						<b:link
							contrast
							fn:if="_this.shouldDisplayFilter()"
							remit:click.prevent="settingsfilters:create"
							event:details="{models: [], folder: attrs.folder.id}"
							text="{i18n(\'Создать фильтр\')}"
							qa:id="create-filter"
						/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
						<bem:mod name="new-design" test="isNewDesign"/>
						{i18n(\'В папке нет писем\')}
					</span>
					</span>
					<span bem:elem="line">
						<b:button2
							touch="{attrs.mobile}"
							center
							fn:if="_this.shouldDisplayFilter()"
							remit:click.prevent="settingsfilters:create"
							event:details="{models: [], folder: attrs.folder.id}"
							text="{i18n(\'Создать фильтр\')}"
							qa:id="create-filter"
							nowrap
							text-overflow
						/>
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
						<bem:mod name="new-design" test="isNewDesign"/>
						{i18n(\'В папке нет писем\')}
					</span>
					</span>
					<span bem:elem="line">
						<span bem:elem="multi-items-line">
							<bem:mod name="center" test="!_this.shouldDisplayFilter()"/>
							<fn:apply-match name="newGoToInbox"/>
							<b:button2
								touch="{attrs.mobile}"
								center
								fn:if="_this.shouldDisplayFilter()"
								remit:click.prevent="settingsfilters:create"
								event:details="{models: [], folder: attrs.folder.id}"
								text="{i18n(\'Создать фильтр\')}"
								qa:id="create-filter"
								nowrap
								text-overflow
							/>
						</span>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isTrashFolder">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="title">
						{i18n(\'В корзине пусто\')}
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'В корзине пусто\')}
					</span>
					<span bem:elem="line">
						<fn:apply-match name="oldGoToInbox"/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="title">
						{i18n(\'В корзине пусто\')}
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'В корзине пусто\')}
					</span>
					<span bem:elem="line">
						<fn:apply-match name="newGoToInbox"/>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isSpamFolder">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="title">
						<fn:value output="raw">messages.noSpam</fn:value>
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="title">
						<fn:value output="raw">messages.noSpam</fn:value>
					</span>
					<span bem:elem="line">
						<fn:apply-match name="oldGoToInbox"/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="title">
						<fn:value output="raw">i18n(\'В почте нет спама\')</fn:value>
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="title">
						<fn:value output="raw">i18n(\'В почте нет спама\')</fn:value>
					</span>
					<span bem:elem="line">
						<fn:apply-match name="newGoToInbox"/>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isNoDraftsFolder">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							<fn:value output="raw">messages.noDrafts</fn:value>
						</span>
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							<fn:value output="raw">messages.noDrafts</fn:value>
						</span>
					</span>
					<span bem:elem="line">
						<fn:apply-match name="oldGoToInbox"/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'Папка «Черновики» пуста\')}
						</span>
					</span>
					<span bem:elem="line">
						<span bem:elem="subtitle">
							{i18n(\'У вас нет незаконченных или неотправленных писем\')}
						</span>
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							<bem:mod name="with-subtitle" />
							{i18n(\'Папка «Черновики» пуста\')}
						</span>
					</span>
					<span bem:elem="line">
						<span bem:elem="subtitle">

							{i18n(\'У вас нет незаконченных или неотправленных писем\')}
						</span>
					</span>
					<fn:apply-match name="newGoToInbox"/>
				</fn:if>
			</fn:when>

			<fn:when test="isNoTemplatesFolder">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'У вас нет шаблонов писем\')}
						</span>
					</span>
					<span bem:elem="line">
						<b:link
							contrast
							remit:click.prevent="compose:new"
							text="{i18n(\'Создать шаблон\')}"
						/>
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'У вас нет шаблонов писем\')}
						</span>
					</span>
					<span bem:elem="line">
						<bem:mod name="old-design-two-buttons"/>
						<fn:apply-match name="oldGoToInbox"/>
						<b:link
							contrast
							remit:click.prevent="compose:new"
							text="{i18n(\'Создать шаблон\')}"
						/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'У вас нет шаблонов писем\')}
						</span>
					</span>
					<span bem:elem="line">
						<b:button2
							touch="{attrs.mobile}"
							center
							remit:click.prevent="compose:new"
							text="{i18n(\'Создать шаблон\')}"
							nowrap
							text-overflow
						/>
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'У вас нет шаблонов писем\')}
						</span>
					</span>
					<span bem:elem="line">
						<span bem:elem="multi-items-line">
							<fn:apply-match name="newGoToInbox"/>
							<b:button2
								touch="{attrs.mobile}"
								center
								remit:click.prevent="compose:new"
								text="{i18n(\'Создать шаблон\')}"
								nowrap
								text-overflow
							/>
						</span>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isNoSearch">
				<fn:if test="isOldPlaceholder || isOldTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'По вашему запросу ничего не найдено\')}
						</span>
					</span>
					<fn:if test="wasClickedSearchInExcludedFoldersButton">
						<div>
							<b:link
								contrast
								remit:click.prevent="search:set-in-excluded-folders"
								event:details="true"
								text="{i18n(\'Искать в папках «Спам» и «Корзина»\')}"
								qa:id="search-octopus-enable-in-excluded-folders"
								href="{attrs['search-in-excluded-folders-url']}"
							/>
						</div>
					</fn:if>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							<bem:mod name="with-subtitle" test="wasClickedSearchInExcludedFoldersButton"/>
							<fn:value output="raw">noSearchMessages.title</fn:value>
						</span>
					</span>
					<fn:if test="wasClickedSearchInExcludedFoldersButton">
						<span bem:elem="line">
							<span bem:elem="subtitle">
								<fn:value output="raw">noSearchMessages.subtitle</fn:value>
							</span>
						</span>
						<b:button2
							touch="{attrs.mobile}"
							center
							remit:click.prevent="search:set-in-excluded-folders"
							event:details="true"
							text="{i18n(\'Искать\')}"
							qa:id="search-octopus-enable-in-excluded-folders"
							href="{attrs['search-in-excluded-folders-url']}"
							nowrap
							text-overflow
						/>
					</fn:if>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							<bem:mod name="with-subtitle" test="wasClickedSearchInExcludedFoldersButton"/>
							<fn:value output="raw">noSearchMessages.title</fn:value>
						</span>
					</span>
					<span bem:elem="line">
						<fn:if test="wasClickedSearchInExcludedFoldersButton">
							<span bem:elem="subtitle">
								<fn:value output="raw">noSearchMessages.subtitle</fn:value>
							</span>
						</fn:if>
					</span>
					<span bem:elem="multi-items-line">
						<bem:mod name="center" test="!wasClickedSearchInExcludedFoldersButton"/>
						<fn:apply-match name="newGoToInbox"/>
						<fn:if test="wasClickedSearchInExcludedFoldersButton">
							<b:button2
								touch="{attrs.mobile}"
								center
								remit:click.prevent="search:set-in-excluded-folders"
								event:details="true"
								text="{i18n(\'Искать\')}"
								qa:id="search-octopus-enable-in-excluded-folders"
								href="{attrs['search-in-excluded-folders-url']}"
								nowrap
								text-overflow
							/>
						</fn:if>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isNoSelect">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письма не выбраны\')}
					</span>
					<fn:if
						test="_this.isAllreadButtonVisible()  && !attrs['read-all-in-progress']">
						<span bem:elem="line">
							<b:link
								contrast
								remit:click.prevent="mark:allreaded"
								text="{i18n(\'Отметить все письма прочитанными\')}"
								qa:id="mark-all-readed"
							/>
						</span>
					</fn:if>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письма не выбраны\')}
					</span>
					<span bem:elem="line">
						<bem:mod name="old-design-two-buttons"/>
						<fn:if test="!isInboxFolder">
							<fn:apply-match name="oldGoToInbox"/>
						</fn:if>
						<fn:if
							test="_this.isAllreadButtonVisible()  && !attrs['read-all-in-progress']">
							<span bem:elem="line">
								<b:link
									contrast
									remit:click.prevent="mark:allreaded"
									text="{i18n(\'Отметить все письма прочитанными\')}"
									qa:id="mark-all-readed"
								/>
							</span>
						</fn:if>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письма не выбраны\')}
					</span>
					<fn:if
						test="_this.isAllreadButtonVisible()  && !attrs['read-all-in-progress']">
						<span bem:elem="line">
							<b:button2
								touch="{attrs.mobile}"
								center
								remit:click.prevent="mark:allreaded"
								text="{i18n(\'Отметить все письма прочитанными\')}"
								qa:id="mark-all-readed"
								nowrap
								text-overflow
							/>
						</span>
					</fn:if>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письма не выбраны\')}
					</span>
					<span bem:elem="line">
						<span bem:elem="multi-items-line">
							<fn:if test="!isInboxFolder">
								<fn:apply-match name="newGoToInbox"/>
							</fn:if>
							<fn:if
							test="_this.isAllreadButtonVisible()  && !attrs['read-all-in-progress']">
								<span bem:elem="line">
									<b:button2
										touch="{attrs.mobile}"
										center
										remit:click.prevent="mark:allreaded"
										text="{i18n(\'Отметить все письма прочитанными\')}"
										qa:id="mark-all-readed"
										nowrap
										text-overflow
									/>
								</span>
							</fn:if>
						</span>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isSecureFolder">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'Доступ в папку запрещён\')}
						</span>
					</span>
					<span bem:elem="line">
						<b:link
							contrast
							remit:click.prevent="secure:opencurrent"
							text="{i18n(\'Ввести пароль\')}"
						/>
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'Доступ в папку запрещён\')}
						</span>
					</span>
					<span bem:elem="line">
						<bem:mod name="old-design-two-buttons"/>
						<fn:apply-match name="oldGoToInbox"/>
						<b:link
							contrast
							remit:click.prevent="secure:opencurrent"
							text="{i18n(\'Ввести пароль\')}"
						/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'Доступ в папку запрещён\')}
						</span>
					</span>
					<span bem:elem="line">
						<b:button2
							touch="{attrs.mobile}"
							center
							remit:click.prevent="secure:opencurrent"
							text="{i18n(\'Ввести пароль\')}"
							nowrap
							text-overflow
						/>
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{i18n(\'Доступ в папку запрещён\')}
						</span>
					</span>
					<span bem:elem="line">
						<span bem:elem="multi-items-line">
							<fn:apply-match name="newGoToInbox"/>
							<b:button2
								touch="{attrs.mobile}"
								center
								remit:click.prevent="secure:opencurrent"
								text="{i18n(\'Ввести пароль\')}"
								nowrap
								text-overflow
							/>
						</span>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isSecureSearch">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{messages.secureSearch}
						</span>
					</span>
					<span bem:elem="line">
						<b:link
								contrast
								remit:click.prevent="secure:open"
								event:details="_this.getSearchSecureTargetFolderId()"
								text="{i18n(\'Ввести пароль\')}"
						/>
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{messages.secureSearch}
						</span>
					</span>
					<span bem:elem="line">
						<bem:mod name="old-design-two-buttons"/>
						<fn:apply-match name="oldGoToInbox"/>
						<b:link
							contrast
							remit:click.prevent="secure:open"
							event:details="_this.getSearchSecureTargetFolderId()"
							text="{i18n(\'Ввести пароль\')}"
						/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{messages.secureSearch}
						</span>
					</span>
					<span bem:elem="line">
						<b:button2
							touch="{attrs.mobile}"
							center
							remit:click.prevent="secure:open"
							event:details="_this.getSearchSecureTargetFolderId()"
							text="{i18n(\'Ввести пароль\')}"
							nowrap
							text-overflow
						/>
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="line">
						<span bem:elem="title">
							{messages.secureSearch}
						</span>
					</span>
					<span bem:elem="line">
						<span bem:elem="multi-items-line">
							<fn:apply-match name="newGoToInbox"/>
							<b:button2
								touch="{attrs.mobile}"
								center
								remit:click.prevent="secure:open"
								event:details="_this.getSearchSecureTargetFolderId()"
								text="{i18n(\'Ввести пароль\')}"
								nowrap
								text-overflow
							/>
						</span>
					</span>
				</fn:if>
			</fn:when>

			<fn:when test="isNoLetter">
				<fn:if test="isOldPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письмо не найдено\')}
					</span>
				</fn:if>
				<fn:if test="isOldTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письмо не найдено\')}
					</span>
					<span bem:elem="line">
						<fn:apply-match name="oldGoToInbox"/>
					</span>
				</fn:if>
				<fn:if test="isNewPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письмо не найдено\')}
					</span>
				</fn:if>
				<fn:if test="isNewTwoBtnPlaceholder">
					<span bem:elem="title">
						{i18n(\'Письмо не найдено\')}
					</span>
					<span bem:elem="line">
						<fn:apply-match name="newGoToInbox"/>
					</span>
				</fn:if>
			</fn:when>
		</fn:choose>
	</div>
</div>
`,"./app/ui-block/octopus/octopus.html")}.apply(t,r))||(e.exports=a)},59511:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span>
	<fn:match name="paginator-text" args="text">
		<span bem:elem="text">
			{text}
		</span>
	</fn:match>

	<b:button2
		ico="{attrs.ico}"
		title="{attrs.title}"
		pressed="{attrs.pressed}"
		disabled="{attrs.disabled}"
		pure
		short
		small
		remit:click="action"
		event:details="{page: attrs.index, type: attrs.action || 'click'}"
		centered
	>
		<fn:apply-match name="paginator-text" args="attrs.text"/>
	</b:button2>
</span>
`,"./app/ui-block/paginator-button/paginator-button.html")}.apply(t,r))||(e.exports=a)},46982:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span qa:id="paginator-container">
	<!-- Формула для вычисления смещения блока на 2pane -->
	<fn:var name="offset2Pane" value="{attrs['right-column'] + attrs['right-offset']}"/>
	<!-- Формула для вычисления смещения блока на 3pane -->
	<fn:var name="offset3Pane" value="var(--left-column-width) + {(attrs['sidebar-column'] - 60)}px"/>

	<fn:choose>
		<!-- Пагинатор, большой экран -->
		<fn:when test="attrs.type === '2pane' && attrs['max-breakpoint']">
			<fn:attr name="style" value="right: calc((100% - {_this.getMaxLayoutWidth()}px) / 2 + {offset2Pane}px);"/>
		</fn:when>

		<!-- Пагинатор, все остальные брейкпоинты -->
		<fn:when test="attrs.type === '2pane' && !attrs['max-breakpoint']">
			<fn:attr name="style" value="right: {offset2Pane}px;"/>
		</fn:when>

		<!-- Кнопка "Наверх", большой экран -->
		<fn:when test="attrs.type === '3pane' && attrs['max-breakpoint']">
			<bem:mod name="offset" value="3pane_max" />
		</fn:when>

		<!-- Кнопка "Наверх", все остальные брейкпоинты -->
		<fn:when test="attrs.type === '3pane' && !attrs['max-breakpoint']">
			<bem:mod name="offset" value="3pane_common" />
		</fn:when>
	</fn:choose>

	<bem:mod name="visible" test="attrs.visible"/>
	<bem:mod name="hidden" test="!attrs.visible"/>
	<bem:mod name="mobile" test="attrs['mobile-view']"/>

	<span
		fn:if="attrs.paginator && (attrs.type === '2pane')"
		bem:elem="block"
	>
		<fn:apply-match name="paginator"/>
	</span>

	<span bem:elem="block" fn:if="attrs['nav-up']">
		<fn:apply-match name="nav-up"/>
	</span>
</span>
`,"./app/ui-block/paginator-container/paginator-container.html")}.apply(t,r))||(e.exports=a)},24895:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span qa:id="paginator">
	<fn:var name="pages" value="{_this.getPages()}"/>

	<b:paginator-button
		ico="navigation:drop_previous"
		title="Предыдущая страница"
		action="prev"
		disabled="{attrs.disabled || attrs.current == 1}"
		remit:action="button-action"
		qa:id="paginator-button-prev"
	/>

	<b:paginator-button
		ico="navigation:drop_next"
		title="Следующая страница"
		action="next"
		disabled="{attrs.disabled || attrs.current == pages[pages.length - 1] || !attrs.length}"
		remit:action="button-action"
		qa:id="paginator-button-next"
	/>

	<fn:for data="_this.getPages()" as="index">
		<b:paginator-button
			key="{index}"
			text="{index}"
			index="{index}"
			pressed="{index == attrs.current}"
			disabled="{attrs.disabled}"
			remit:action="button-action"
			qa:id="paginator-button-page_{index}"
		/>
	</fn:for>
</span>
`,"./app/ui-block/paginator/paginator.html")}.apply(t,r))||(e.exports=a)},84661:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="active" test="attrs.selected.length" />
	<bem:mod name="one" test="attrs.selected.length == 1" />
	<bem:mod name="two" test="attrs.selected.length == 2" />
	<bem:mod name="more" test="attrs.selected.length > 2" />

	<div bem:elem="empty" fn:if="!attrs.selected.length">
		<fn:apply-match name="empty" />
	</div>

	<fn:if test="attrs.selected.length && attrs['selected-last-thread']">
		<fn:choose>
			<fn:when test="attrs['is-metathread']">
				<b:metathread-preview
					model="{attrs['selected-last-thread']}"
					selectedLetterCountText="{this.getSelectedLetterCountText()}"
				/>
			</fn:when>
			<fn:otherwise>
				<b:thread
					fn:if="!_this.useNewThread()"
					use:mediator="themes-manager"
					model="{attrs['selected-last-thread']}"
					expand-letter-id="{attrs['expand-letter-id']}"
					selectedLetterCountText="{this.getSelectedLetterCountText()}"
					preview-mode
				/>
				<b:react-async
					fn:if="_this.useNewThread()"
					component="Thread"
					useMediators="{['themes-manager']}"
					model="{attrs['selected-last-thread']}"
					expand-letter-id="{attrs['expand-letter-id']}"
					preview-mode
				/>
				<fn:if test="!attrs['dark-mode']">
					<div bem:elem="gradient"></div>
				</fn:if>
			</fn:otherwise>
		</fn:choose>
	</fn:if>
</div>
`,"./app/ui-block/panel-with-selected/panel-with-selected.html")}.apply(t,r))||(e.exports=a)},65474:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="size" value="m"/>
	<fn:var name="type" value="{attrs.type}"/>
	<fn:var name="short" value="{attrs.short}"/>
	<fn:var name="theme" value="{attrs.theme}"/>
	<fn:var name="touch" value="{attrs['touch-nav']}"/>

	<bem:mod name="{type}" test="type" />
	<bem:mod name="short" test="short" />
	<bem:mod name="expanded" test="!short" />
	<bem:mod name="touch" test="touch" />
	<bem:mod name="not-touch" test="!touch" />
	<bem:mod name="hidden" test="attrs.hidden" />
	<bem:mod name="pony-mode" test="attrs.ponymode" />

	<bem:mod name="folder-overflow" test="attrs['folder-overflow']"/>

	<div fn:if="type === 'title' && !attrs.disabled" bem:elem="text"
			title="{attrs.text}">
		{attrs.text}
	</div>

	<b:button2 fn:if="type === 'removeAll'"
			remit:click="clearActiveFolder"
			use:mixin="shortcut-title"
			text="{_this.getClearActiveFolderLabel()}"
			title="{_this.getClearActiveFolderLabel()}"
			ico="actions:delete"
			qa:id="removeAll"
			disabled="{attrs.disabled}"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'delete'"
			remit:click="remove"
			event:details="{selection:true}"
			text="{i18n(\'Удалить\')}"
			ico="delete"
			qa:id="delete"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'reply'"
			remit:click="compose:reply"
			use:mixin="shortcut-title"
			shortcut="r"
			text="{i18n(\'Ответить\')}"
			ico="reply"
			qa:id="reply"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableReply()}"
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'reply-all'"
			remit:click="compose:replyall"
			use:mixin="shortcut-title"
			shortcut="shift+r"
			text="{i18n(\'Ответить всем\')}"
			ico="reply-all"
			qa:id="reply-all"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableReply()}"
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'forward'"
			remit:click="compose:forward"
			use:mixin="shortcut-title"
			shortcut="f"
			text="{i18n(\'Переслать\')}"
			ico="forward"
			qa:id="forward"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableForward()}"
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'remove'"
			remit:click="remove"
			event:details="{selection:true}"
			use:mixin="shortcut-title"
			shortcut="del|command+backspace"
			text="{i18n(\'Удалить\')}"
			ico="delete"
			qa:id="delete"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableRemove()}"
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'archive'"
			remit:click="archive"
			event:details="{selection:true}"
			use:mixin="shortcut-title"
			shortcut="e"
			text="{i18n(\'В архив\')}"
			ico="archive"
			qa:id="archive"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableMoveToArchive()}"
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'spam'"
			remit:click="spam"
			event:details="{selection:true}"
			use:mixin="shortcut-title"
			shortcut="shift+j"
			text="{i18n(\'Спам\')}"
			ico="spam-on"
			qa:id="spam-on"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableMoveToSpam()}"
			centered="{short}"
	/>

	<b:unsubscribe fn:if="type === 'unsubscribe'"
			use:mediator="unsubscribe-actions themes-manager"
			touch="{attrs.touch}"
			ponymode="{attrs.ponymode}"
			insteadSpamButton
			qa:id="unsubscribe"
			senderFrom="{attrs.selectedLettersSenders}"
			letterId="{attrs.selectedLettersIds}"
			short
			withoutText="{attrs.short}"
	/>

	<b:button2 fn:if="type === 'unspam' && !attrs.store.folder.isShareTake()"
			remit:click="unspam"
			event:details="{selection:true}"
			use:mixin="shortcut-title"
			shortcut="shift+j"
			text="{i18n(\'Не спам\')}"
			ico="spam-off"
			qa:id="spam-off"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			disabled="{!_this.isEnableMoveToSpam()}"
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'all-read'"
			   event:details="{selection:true}"
			   use:mixin="shortcut-title"
			   remit:click="mark:allreaded"
			   text="{attrs.shortText ? i18n(\'Прочитать все\') : i18n(\'Отметить все прочитанными\')}"
			   compact="{attrs.ponymode}"
			   pure
			   ico="status:read"
			   qa:id="all-read"
			   touch="{touch}"
			   size="{size}"
			   short="{short}"
			   disabled="{attrs.disabled}"
			   centered="{short}"
	/>

	<b:button2 fn:if="type === 'read'"
			remit:click="mark:readed"
			event:details="{selection:true}"
			use:mixin="shortcut-title"
			shortcut="q"
			text="{i18n(\'Прочитать\')}"
			ico="status:read"
			qa:id="to-read"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'select'"
			remit:click="select:all"
			use:mixin="shortcut-title"
			shortcut="ctrl+a|command+a"
			title="{i18n(\'Выделить все\')}"
			text="{attrs.text}"
			explanation="{attrs['has-explanation'] ? i18n(\'Выделить все\'): ''}"
			disabled="{attrs.disabled}"
			ico="select-all"
			qa:id="select-all"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'deselect'"
			remit:click="select:drop"
			use:mixin="shortcut-title"
			shortcut="ctrl+a|command+a"
			title="{i18n(\'Снять выделение\')}"
			text="{attrs.text}"
			explanation="{attrs['has-explanation'] ? i18n(\'Снять выделение\'): ''}"
			map="toolbar"
			ico="select-all"
			qa:id="deselect-all"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			size="{size}"
			short="{short}"
			ico-text-top
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'deselect-back'"
			remit:click="select:drop"
			use:mixin="shortcut-title"
			shortcut="esc"
			title="{attrs.deselectLabelReset ? i18n(\'Сбросить\') : i18n(\'Вернуться\')}"
			text="{attrs.deselectLabelReset ? i18n(\'Сбросить\') : i18n(\'Вернуться\')}"
			map="toolbar"
		    ico="{(!attrs.deselectLabelReset || short) && _this.getBackIcon()}"
			qa:id="deselect-arrow"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			text-center="{short}"
			size="{size}"
			short="{short}"
			nowrap="{attrs.nowrap}"
			ico-text-top
			centered="{short}"
	/>

	<b:button2 fn:if="type === 'prev'"
			remit:click="letter:prev"
			use:mixin="shortcut-title"
			shortcut="ctrl+up|ctrl+j"
			shortcut-mac="ctrl+j"
			text="{i18n(\'Предыдущее\')}"
			map="toolbar"
			ico="arrow-up"
			qa:id="letter_prev"
			compact="{attrs.ponymode}"
			short
			ico-text-top
			pure
			touch="{touch}"
			size="{size}"
			disabled="{attrs.disabled}"
			role="prev"
			use:mediator="thread-manager"
			centered
	/>

	<b:button2 fn:if="type === 'next'"
			remit:click="letter:next"
			use:mixin="shortcut-title"
			shortcut="ctrl+down|ctrl+k"
			shortcut-mac="ctrl+k"
			text="{i18n(\'Следующее\')}"
			ico="arrow-down"
			qa:id="letter_next"
			map="toolbar"
			compact="{attrs.ponymode}"
			short
			ico-text-top
			pure
			touch="{touch}"
			size="{size}"
			disabled="{attrs.disabled}"
			role="next"
			use:mediator="thread-manager"
			centered
	/>

	<b:button2 fn:if="type === 'back'"
			remit:click="letter:back"
			use:mixin="shortcut-title"
			shortcut="esc"
			text="{i18n(\'Вернуться\')}"
			ico="{_this.getBackIcon()}"
			qa:id="letter_back"
			compact="{attrs.ponymode}"
			pure
			touch="{touch}"
			short="{short}"
			ico-text-top
			size="{size}"
			nowrap="{attrs.nowrap}"
			centered="{short}"
			use:mediator="thread-manager"
	/>

	<fn:if test="type === 'backToParentFolder'">
		<b:button2 fn:if="_this.needBackToParentShortcut()"
				event:details="{pos:'logo'}"
				remit:click="back:to:parent:folder"
				use:mixin="shortcut-title"
				shortcut="esc"
				text="{_this.getParentFolderName()}"
				ico="{_this.getBackIcon()}"
				qa:id="letter_back_to_parent_folder"
				compact="{attrs.ponymode}"
				pure
				touch="{touch}"
				short="{short}"
				ico-text-top
				size="{size}"
				nowrap="{attrs.nowrap}"
				centered="{short}"
				use:mediator="folders-navigation"
				disabled="{attrs.disabled}"
		/>
		<b:button2 fn:if="!_this.needBackToParentShortcut()"
				event:details="{pos:'logo'}"
				remit:click="back:to:parent:folder"
				text="{_this.getParentFolderName()}"
				ico="{_this.getBackIcon()}"
				qa:id="letter_back_to_parent_folder"
				compact="{attrs.ponymode}"
				pure
				touch="{touch}"
				short="{short}"
				ico-text-top
				size="{size}"
				nowrap="{attrs.nowrap}"
				centered="{short}"
				use:mediator="folders-navigation"
				disabled="{attrs.disabled}"
		/>
	</fn:if>

	<b:dropdown fn:if="type === 'moreLettersActions'"
				ico="more-hor"
				pure
				text="{i18n(\'Ещё\')}"
				short
				ponymode="{attrs.ponymode}"
				qa:id="more_letters_actions"
	>
		<fn:match name="items" args="dropdownArgs">
			<b:list>
				<fn:if test="attrs.allRead">
					<b:list-item
						remit:click="mark:allreaded:before"
						qa:id="allRead"
					>
						<span bem:elem="ico">
							<b:ico name="status:read" size="s"/>
						</span>
						<span bem:elem="text">{i18n(\'Отметить все прочитанными\')}</span>
					</b:list-item>
				</fn:if>
				<fn:if test="attrs.removeAll">
					<b:list-item
						remit:click="clearActiveFolder"
						qa:id="removeAll"
					>
						<span bem:elem="ico">
							<b:ico name="actions:delete" size="s"/>
						</span>
						<span bem:elem="text">{_this.getClearActiveFolderLabel()}</span>
					</b:list-item>
				</fn:if>
			</b:list>
		</fn:match>
	</b:dropdown>

	<b:dropdown fn:if="type === 'move' && !touch"
			use:mixin="shortcut-title"
			shortcut="v"
			text="{i18n(\'В папку\')}"
			ico="folder-move"
			qa:id="move-to-folder"
			pure
			ponymode="{attrs.ponymode}"
			disable-expand-top
			disable-expand-center
			disabled="{!_this.isEnableMove()}"
			size="{size}"
			short="{short}"
			ico-text-top
	>

		<fn:match name="items">
			<b:list-nested-moveto-folder
				model="{attrs.store.letter}"
				folder="{attrs.store.folder}"
				folders="{attrs.folders}"
				lettersFoldersIds="{attrs.lettersFoldersIds}"
				allow-new-folder
				allow-move="{false}"
				remit:move="folder:click"
				use:mediator="pony-mode folders-actions letters-selection"
				qa:id="list-moveto-folder"
			/>
		</fn:match>
	</b:dropdown>

	<b:button2 fn:if="type === 'move' && touch"
				remit:click="move:click"
				text="{i18n(\'В папку\')}"
				ico="folder-move"
				qa:id="move-to-folder"
				compact="{attrs.ponymode}"
				pure
				touch="{touch}"
				touch-nav="{touch}"
				disabled="{!_this.isEnableMove()}"
				size="{size}"
				short="{short}"
				ico-text-top
				centered="{short}"
	/>

	<b:dropdown fn:if="type === 'folders'"
			pure
			short
			nav-folders
			touch="{touch}"
			touch-nav="{touch}"
			remit:dropdown-change-state="folders-toggle">

		<fn:match name="ctrl" args="attrs">
			<b:button2
					qa:id="burger-button"
					remit:click="ctrl-click"
					ico="{attrs.ponymode ? 'navigation:menu_s' : 'navigation:menu'}"
					compact="{attrs.ponymode}"
					short
					touch="{attrs.touch}"
					pure="{attrs.pure}"
					secondary="{attrs.secondary}"
					size="{attrs.size}"
					centered="{short}"
			/>

			<b:button2
					qa:id="hide"
					remit:click="ctrl-click"
					text="{i18n(\'Скрыть\')}"
					ico="arrow-back"
					compact="{attrs.ponymode}"
					touch="{attrs.touch}"
					pure="{attrs.pure}"
					secondary="{attrs.secondary}"
					size="{attrs.size}"
					centered="{short}"
			/>
		</fn:match>

		<fn:match name="items">
			<b:list-nested-moveto-folder
				model="{attrs.store.letter}"
				folder="{attrs.store.folder}"
				folders="{attrs.folders}"
				lettersFoldersIds="{attrs.lettersFoldersIds}"
				allow-new-folder
				use:mediator="pony-mode folders-actions letters-selections"
				qa:id="list-moveto-folder"
			/>
		</fn:match>
	</b:dropdown>

	<b:dropdown-actions fn:if="type === 'more'"
			use:mixin="shortcut-title"
			use:mediator="layout-manager settings-filters-manager unsubscribe-actions calendar-manager translator-manager calls-manager letters-selection"
			qa:id="more"
			model="{attrs.store.letter}"
			selectedLettersIds="{attrs.selectedLettersIds}"
			folder="{attrs.store.folder}"
			dropdown-shortcut="."
			text="{i18n(\'Ещё\')}"
			ico="more-hor"
			container="{_this.getMainFrame()}"

			disable-edit="{attrs['disable-edit']}"

			read="{attrs.read}"
			unread="{attrs.unread}"
			flag="{attrs.flag}"
			unflag="{attrs.unflag}"
			archive="{attrs.archive}"
			invite-call="{attrs['invite-call']}"
			create-event="{attrs['create-event']}"
			create-filter="{attrs['create-filter']}"
			translate="{attrs.translate}"
			print="{attrs.print}"

			readletter="{attrs.readletter}"
			forward="{attrs.forward}"
			spam="{attrs.spam}"
			spamAbovePrint="{attrs.spamAbovePrint}"
			spamDisabled="{attrs.spamDisabled}"
			unsubscribeAbovePrint="{attrs.unsubscribeAbovePrint}"
			unspam="{attrs.unspam}"
			move="{attrs.move}"
			superspam="{attrs.superspam}"

			more="{attrs.readletter}"

			disable-expand-top
			disable-expand-center
			ponymode="{attrs.ponymode}"
			pure
			short
			ico-text-top
			selection-actions
			touch="{touch}"
			size="{size}"
	/>

	<b:filters fn:if="(type === 'filters')"
			qa:id="filters"
			use:mediator="filter-manager layout-manager settings-manager pony-mode advert-manager todo-manager"
			folder="{attrs.folder}"
			short="{attrs.short}"
			touch="{attrs.touch}"
			autochange="{false}"
			pure
			has-metathreads-settings="{attrs['has-metathreads-settings']}"
            combineFilterAndFolderName="{attrs.combineFilterAndFolderName}"
	/>
</div>
`,"./app/ui-block/portal-menu-element/portal-menu-element.html")}.apply(t,r))||(e.exports=a)},21074:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="portal-menu-logo">
	<fn:var name="readMode" value="{attrs.readMode}"/>
	<fn:var name="selectMode" value="{attrs.selectMode}"/>
	<fn:var name="searchRoute" value="{attrs.route.is('#search #search-letter')}"/>
	<fn:var name="filterRoute" value="{attrs.route.is('#letters #read-letter') && attrs.route.filterQuery.has()}"/>
	<fn:var name="layoutType" value="{attrs.layoutType}"/>
	<fn:var name="ponyMode" value="{attrs.ponyMode}"/>
	<fn:var name="hideLogo" value="{_this.hideLogo}"/>

	<fn:var name="isShortcutLogo" value="{attrs.compact}"/>

	<!-- То же условие что и для лого, но в перспективе может поменяться и по смыслу не то же, так что разделяем -->
	<fn:var name="isShortcutButton" value="{isShortcutLogo}"/>

	<fn:var name="showBackToListButton" value="{layoutType === '2pane' && readMode}"/>
	<fn:var name="showBackToParentFolderButtonAtAll" value="{attrs.needBackToParentFolder}"/>
	<fn:var name="showBackToParentFolderButtonAtLogo" value="{_this.needBackToParentFolderButton()}"/>

	<fn:var name="activeLogoKey" value="{_this.getActiveLogoKey(isShortcutLogo)}" />
	<fn:var name="activeLogoSrc" value="{_this.getLogoSrcFromKey(activeLogoKey)}" />
	<fn:var name="isActiveLogoAdaptive" value="{_this.isActiveLogoAdaptive(activeLogoKey)}" />

	<bem:mod name="pony-mode" test="attrs.ponyMode"/>
	<bem:mod name="short" test="isShortcutLogo"/>

	<div bem:elem="content">
		<bem:mod name="adaptive" test="isActiveLogoAdaptive && !searchRoute && !selectMode && !showBackToListButton" />

		<fn:choose>
			<fn:when test="selectMode">
				<span>
					<fn:var name="marginLeft" value="{'margin-left: 4px'}"/>

					<!-- TODO: костыль, перепилить с инлайн стилей на классы -->
					<fn:attr test="isShortcutButton && ponyMode"
								name="style"
								value="{marginLeft};"
						/>

					<b:portal-menu-element
							use:mediator="letters-selection"
							type="deselect-back"
							ponymode="{ponyMode}"
							short="{isShortcutButton}"
							nowrap
					/>
				</span>
			</fn:when>
			<fn:when test="searchRoute">
				<span>
					<fn:var name="marginLeft" value="{'margin-left: 8px'}"/>

					<fn:attr test="isShortcutButton && ponyMode"
							name="style"
							value="{marginLeft};"
					/>
					<b:portal-menu-element
							use:mediator="letters-selection"
							type="back"
							ponymode="{ponyMode}"
							short="{isShortcutButton}"
							nowrap
					/>
				</span>
			</fn:when>
			<fn:otherwise>
				<span fn:if="showBackToListButton || readMode && layoutType === '3pane' && attrs.ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE">
					<!-- TODO: костыль, перепилить с инлайн стилей на классы -->
					<fn:var name="marginLeft" value="{'margin-left: 4px'}"/>

					<fn:attr test="isShortcutButton && ponyMode && showBackToListButton"
							name="style"
							value="{marginLeft};"
					/>
					<b:portal-menu-element
									type="back"
									ponymode="{ponyMode}"
									use:mediator="letters-selection"
									short="{isShortcutButton}"
									nowrap
									hidden="{!showBackToListButton}"
					/>
				</span>

				<span fn:if="(showBackToParentFolderButtonAtLogo || showBackToParentFolderButtonAtAll && attrs.enableBackToParentShortcut) && !showBackToListButton">
					<fn:var name="parentFolder" value="{_this.findParentFolder()}"/>
					<b:portal-menu-element
						type="backToParentFolder"
						ponymode="{ponyMode}"
						short="{isShortcutButton}"
						nowrap
						hidden="{!showBackToParentFolderButtonAtLogo}"
						parentFolder="{parentFolder}"
						folder="{folder}"
						folders="{folders}"
					/>
				</span>

				<fn:var name="logo" value="{_this.getLogo()}"/>
				<fn:var name="logoWidth" value="{_this.getLogoWidth(logo, isShortcutLogo, ponyMode)}"/>
				<fn:var name="logoHeight" value="{_this.getLogoHeight(logo, isShortcutLogo, ponyMode)}"/>
				<fn:var name="logoImageWidth" value="{logo.scale ? logoWidth : 'auto'}"/>
				<fn:var name="adaptiveLogoSrc" value="{_this.getAdaptiveLogo(logo)}" />
				<fn:var name="rebrandingMedium" value="{_this.isMediumRebrandingLogo(logo, isShortcutLogo)}"/>
				<a
					fn:if="!showBackToListButton && !hideLogo && !showBackToParentFolderButtonAtLogo"
					bem:elem="logo"
					bem:mod="{_this.getLogoMod(logo, isShortcutLogo, ponyMode)}"
					height="{logoHeight}"
					style="width: {logoWidth}px;"
					remit:click="logo-click"
					qa:id="{isShortcutLogo ? 'short-logo' : 'logo'}"
				>
					<bem:mod name="compact" test="isShortcutLogo"/>
					<bem:mod name="pony-mode" test="ponyMode"/>
					<bem:mod name="hidden" test="!logoWidth"/>
					<bem:mod name="scale" test="logo.scale"/>
					<bem:mod name="bg_logo" test="_this.getLogoKind() === 'bg'"/>
					<bem:mod name="load_err" test="attrs['logo-load-err']"/>
					<bem:mod name="load_err_pony" test="ponyMode && attrs['logo-load-err']"/>
					<bem:mod name="load_err_compact" test="isShortcutLogo && attrs['logo-load-err']"/>
					<bem:mod name="rebranding-medium" test="rebrandingMedium"/>

					<a
						bem:elem="container"
						title="{_this.getLogoTitle(logo)}"
						target="{_this.getLogoTarget(logo)}"
						href="{_this.getLogoHref(logo)}"
						alt="{logo.alt}"
					>
						<div bem:elem="image-wrapper">
							<img
								fn:if="activeLogoSrc"
								bem:block="portal-menu-logo__logo__img"
								src="{activeLogoSrc}"
								height="{logoHeight}"
								width="{logoImageWidth}"
								remit:error="logo-load-error"
								remit:load="logo-load-success"
							>
								<fn:add-class name="hide" test="isActiveLogoAdaptive"/>
							</img>

							<!--- Вторая картирка нужна для адаптивного лого, чтобы во время переходного этапа между шорткатами
							и норм видом никакая картинка не отображалась.
							Если так не сделать, во время загрузки новой картинки будет отображаться старая, а стили уже обновятся
							@see https://jira.mail.ru/browse/FMAIL-11793
							--->
							<img
								fn:if="adaptiveLogoSrc"
								bem:block="portal-menu-logo__logo__img"
								src="{adaptiveLogoSrc}"
								height="{logoHeight}"
								width="{logoImageWidth}"
								remit:error="logo-load-error"
								remit:load="logo-load-success"
							>
								<fn:add-class name="hide" test="!isActiveLogoAdaptive"/>
							</img>
						</div>
					</a>
					<a
						bem:elem="container"
						title="{_this.getLogoTitleBrand(logo)}"
						target="{_this.getLogoTargetBrand(logo)}"
						href="{_this.getLogoHrefBrand(logo)}"
					    alt="{logo.altBrand}"
					>
						<bem:mod name="vk_rebranding-medium" test="rebrandingMedium"/>

						<fn:var name="rebranding" value="{_this.isRebranding(logo)}"/>
						<div
							fn:if="!isShortcutLogo && rebranding"
							bem:elem="vk"
						>
							<fn:var name="vkSrc" value="{_this.getVkSrc(logo, rebrandingMedium)}"/>

							<img
								src="{vkSrc}"
							>
								<fn:add-class name="hide" test="isActiveLogoAdaptive"/>
							</img>
							<img
								src="{vkSrc}"
							>
								<fn:add-class name="hide" test="!isActiveLogoAdaptive"/>
							</img>
						</div>
					</a>
				</a>
			</fn:otherwise>
		</fn:choose>
	</div>
</div>
`,"./app/ui-block/portal-menu-logo/portal-menu-logo.html")}.apply(t,r))||(e.exports=a)},16007:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="portal">
	<!-- TODO: разделить тулбар на обычный и notFound и выбирать его еще на уровне application-mail -->
	<fn:var name="current" value="{_this.getCurrentBreakpoint()}" />
	<fn:var name="globals" value="{current.globals}"/>
	<fn:var name="selectedLettersInfo" value="{_this.getSelectedLettersIdsAndSenders(globals, _this.getAttrs())}"/>
	<fn:var name="selectedLettersIds" value="{selectedLettersInfo.ids}"/>
	<fn:var name="selectedLettersSenders" value="{selectedLettersInfo.senders}"/>

	<fn:var name="letterNotFound" value="{attrs['letter-not-found']}" />
	<fn:var name="readMode" value="{globals.readMode}"/>
	<fn:var name="selectMode" value="{attrs.selectMode}"/>
	<fn:var name="isDisableEdit" value="{globals.isDisableEdit}" />

	<fn:var name="searchRoute" value="{attrs.route.is('#search #search-letter')}"/>
	<fn:var name="filterRoute" value="{attrs.route.is('#letters #read-letter') && attrs.route.filterQuery.has()}"/>
	<fn:var name="layoutType" value="{attrs.layoutType}"/>
	<fn:var name="ponyMode" value="{attrs.ponyMode}"/>

	<fn:var name="letterCount" value="{_this.hasLetterCount()}"/>

	<fn:var name="theme" value="portal-menu"/>
	<fn:var name="theme" value="{theme}_mobile" test="attrs.mobile"/>

	<fn:var name="mobile" value="{attrs.mobile}"/>

	<bem:mod name="mobile" test="mobile"/>
	<bem:mod name="pony-mode" test="ponyMode"/>

	<fn:add-class name="js-shortcut" test="attrs.shortcut" />

	<fn:match name="actions-list" args="layout, attrs, readMode">
		<fn:var name="letter" value="{globals.letter}" />
		<fn:var name="letterId" value="{letter && letter.id}"/>

		<fn:if test="readMode || selectMode">
			<fn:for data="current.actionsList" as="item">
				<!--TODO: возможно, добавить spread в feast? -->
				<b:portal-menu-element
						fn:if="!item.hasOwnProperty('if') || item.if"
						key="{item.type}"
						type="{item.type}"
						short="{item.short}"
						ponymode="{ponyMode}"
						touch-nav="{mobile}"
						disabled="{item.disabled ? true : item.disabled !== false && isDisableEdit}"
						letter-id="{letterId}"
						letter="{letter}"
						selectedLettersIds="{selectedLettersIds}"
						selectedLettersSenders="{selectedLettersSenders}"
						radar-id="item.hasOwnProperty('radar-id') ? item['radar-id'] : null"
						read="{item.read}"
						unread="{item.unread}"
						flag="{item.flag}"
						unflag="{item.unflag}"
						archive="{item.archive}"
						spam="{item.spam}"
						spamAbovePrint="{item.spamAbovePrint}"
						spamDisabled="{item.spamDisabled}"
						unsubscribeAbovePrint="{item.unsubscribeAbovePrint}"
						unspam="{item.unspam}"
						superspam="{item.superspam}"
						forward="{item.forward}"
						folders="{item.folders}"
						create-filter="{item['create-filter']}"
						invite-call="{item['invite-call']}"
						create-event="{item['create-event']}"
						translate="{item['translate']}"
						disable-edit="{item['disable-edit']}"
						readletter="{item.readletter}"
						store="{globals.store}"
						print="{item.print}"
						use:mediator="letters-selection"
				/>
			</fn:for>
		</fn:if>
	</fn:match>


	<fn:match name="selectall-button" args="layout,disabled">
		<fn:var name="selectedCount" value="{_this.getSelectedCount() || ''}" />

		<fn:var name="isShort" value="{_this.isShortButtonSelectAll(layout, selectedCount, attrs.filter, attrs.sortingType)}"/>
		<fn:var name="marginLeft" value="{_this.getPaddingLeft(layoutType, isShort, ponyMode)}"/>

		<fn:var name="paddingRight" value="{_this.getPaddingRight(layout, isShort, ponyMode)}"/>

		<span style="margin-left: {marginLeft}px; padding-right: {paddingRight}px;">

			<b:portal-menu-element fn:if="!attrs.deselectAll"
									use:mediator="letters-selection"
									disabled="{disabled}"
									ponymode="{ponyMode}"
									type="select"
									touch-nav="{mobile}"
									short="{isShort}"
									has-explanation
									text="{selectedCount ? selectedCount : ''}"/>

			<b:portal-menu-element fn:if="attrs.deselectAll"
									use:mediator="letters-selection"
									disabled="{disabled}"
									touch-nav="{mobile}"
									ponymode="{ponyMode}"
									type="deselect"
									has-explanation="{selectedCount}"
									text="{selectedCount}"/>
		</span>
	</fn:match>

	<b:layout use:mediator="layout-manager" id="portal" group="main">
		<fn:match name="foot">
			<b:search-panel
					fn:if="!_this.useReactSearchPanel()"
					use:mediator="search-manager layout-manager themes-manager letters-selection"
					store="{attrs.store}"
					remit:click="search"
					ponyMode="{ponyMode}"
			/>
			<b:react-async
					fn:if="_this.useReactSearchPanel()"
					customNode="{_this.usePortalSearchPanel() ? __PH.getSearchPlaceholder() : null}"
					component="SearchPanel"
					useMediators="{['search-manager','layout-manager','themes-manager','letters-selection']}"
					store="{attrs.store}"
					remit:click="search"
					ponyMode="{ponyMode}"
			/>
		</fn:match>

		<fn:match name="left-column" args="layout">
			<b:portal-menu-logo
				use:mediator="themes-manager"
				route="{attrs.route}"
				selectMode="{attrs.selectMode}"
				readMode="{readMode}"
				layoutType="{layoutType}"
				ponyMode="{ponyMode}"
				needBackToParentFolder="{_this.needBackToParentFolder()}"
				folder="{attrs.folder}"
				folders="{attrs.folders}"
			/>
		</fn:match>

		<fn:match name="main-frame" args="layout">
			<table width="100%" style="table-layout: fixed">
				<tbody>
				<tr style="display: flex; width: 100%">
					<fn:var name="is3Pane" value="{layout.type === '3pane'}"/>
					<fn:var name="is2Pane" value="{layout.type === '2pane'}"/>
					<fn:var name="isLeftColumnCollapsed" value="{layout['is-shortcut-left']}"/>

					<fn:var name="combineFilterAndFolderName" value="{is3Pane && isLeftColumnCollapsed}"/>
					<fn:var name="showFolderName" value="{isLeftColumnCollapsed}"/>

					<!-- Сайдбар -->
					<fn:if
						test="!readMode || is3Pane"
					>
						<td bem:elem="sidebar">
							<bem:mod name="nowrap"/>
							<bem:mod name="2pane" test="is2Pane"/>
							<bem:mod name="3pane" test="is3Pane"/>
							<bem:mod name="size-{layout['sidebar-column']}"
									 test="layout['sidebar-column'] && is3Pane"/>

							<!-- Мы не в режиме выделения -->
							<fn:if test="!selectMode">
								<!-- Выбрать все -->
								<fn:apply-match name="selectall-button" args="layout, !letterCount"/>

								<!-- Просто название папки когда не 3пане и левая колонка скрыта -->
								<fn:if test="is2Pane && showFolderName">
									<div bem:elem="folder-name" qa:id="folder-name-portal">
										<b:portal-menu-element
											use:mediator="letters-selection"
											ponymode="{ponyMode}"
											type="title"
											text="{attrs.folder.get('name')}"
										/>
									</div>
								</fn:if>

								<!-- Совмещенный контрол имени папки и фильтров на 3пане, когда скрыта левая колонка -->
								<fn:if test="combineFilterAndFolderName">
									<span>
											<b:portal-menu-element type="filters"
																   folder="{attrs.folder}"
																   combineFilterAndFolderName="{combineFilterAndFolderName}"
																   use:mediator="letters-selection"
											/>
									</span>
								</fn:if>

								<fn:if test="_this.isAllReadVisible()">
									<!-- Отметить все прочитанным везде где не 3пане -->
									<fn:if test="is2Pane">
										<span>
											<b:portal-menu-element ponymode="{ponyMode}"
																   type="all-read"
																   shortText="{_this.isShortTextAllRead()}"
																   touch-nav="{mobile}"
																   use:mediator="letters-selection"
											/>
										</span>
									</fn:if>
								</fn:if>
							</fn:if>

							<fn:if test="is2Pane && !selectMode && _this.isRemoveAllVisible()">
								<fn:var name="selectedCount" value="{_this.getSelectedCount() || ''}" />
								<fn:var name="isSelectAllShort" value="{_this.isShortButtonSelectAll(layout, selectedCount, attrs.filter, attrs.sortingType)}"/>
								<fn:var name="isRemoveAllShort" value="{_this.isRemoveAllButtonShort(layout)}"/>

								<span>
									<b:portal-menu-element ponymode="{ponyMode}"
										use:mediator="letters-selection folders-actions"
										type="removeAll"
										touch-nav="{mobile}"
										store="{globals.store}"
										short="{isRemoveAllShort}"
									/>
								</span>
							</fn:if>

							<!-- 3pane: фильтры без имени папки -->
							<fn:if test="is3Pane && !selectMode && !showFolderName">
								<div bem:block="portal-menu__group" bem:mod="right" fn:if="!searchRoute">
									<bem:mod name="mobile" test="mobile"/>
									<b:portal-menu-element
											type="filters"
											short
											folder="{attrs.folder}"
											ponymode="{ponyMode}"
											use:mediator="letters-selection"
									/>
								</div>
							</fn:if>

							<!-- 3pane: Кебаб с "отметить прочитанным" и "удалить все письма" -->
							<fn:if bem:block="portal-menu__group" test="_this.needMoreLettersActions()">
								<span style="float: right">
									<bem:mod name="right" test="isLeftColumnCollapsed"/>
									<b:portal-menu-element
										ponymode="{ponyMode}"
										type="moreLettersActions"
										allRead="{_this.isAllReadVisible()}"
										removeAll="{_this.isRemoveAllVisible()}"
										store="{globals.store}"
										use:mediator="folders-actions"
									/>
								</span>
							</fn:if>

							<!-- Выбрать все -->
							<fn:apply-match fn:if="selectMode" name="selectall-button" args="layout"/>

							<!-- Действия с письмами -->
							<fn:if test="is2Pane">
								<fn:var name="style" value="{'flex: 1 1 0; -ms-flex: 1 1 0px; min-width: 0;'}"/>
								<fn:var name="style" value="{style + 'margin-left:12px; margin-right:4px;'}"/>

								<span style="{style}" ref="actions-list">
									<fn:apply-match name="actions-list" args="layout, attrs, readMode"/>
								</span>
							</fn:if>
						</td>
					</fn:if>

					<!-- 3pane, чтение письма -->
					<fn:if test="readMode || is3Pane">
						<!-- Инлайн стили, потому что мы в fn:match :( -->
						<td bem:elem="content" style="display: -ms-flexbox; display: flex; flex: 1 1 0; -ms-flex: 1 1 0px; min-width: 0;">
							<div ref="actions-list" style="display: flex; align-items: center; flex: 1 1 0; -ms-flex: 1 1 0px; min-width: 0;">
								<!-- Действия с письмами -->
								<fn:apply-match name="actions-list" args="layout, attrs, readMode"/>
							</div>

							<!-- Вперед / Назад -->
							<fn:if test="readMode">
								<div bem:block="portal-menu__group">
									<bem:mod name="padded" test="layout.isLessThen('s')"/>
									<fn:var name="hasPrev" value="{!!attrs.letterNeighbours.prev}"/>
									<fn:var name="hasNext" value="{!!attrs.letterNeighbours.next}"/>

									<b:portal-menu-element
											type="prev"
											touch-nav="{mobile}"
											letter="{attrs.letter}"
											is-search="{searchRoute}"
											is-filter="{filterRoute}"
											id="search_button_prev"
											hidden="{is3Pane}"
											disabled="{isDisableEdit || !hasPrev}"
											ponymode="{ponyMode}"
											use:mediator="letters-selection"
									/>
									<b:portal-menu-element
											type="next"
											touch-nav="{mobile}"
											letter="{attrs.letter}"
											is-search="{searchRoute}"
											is-filter="{filterRoute}"
											id="search_button_next"
											hidden="{is3Pane}"
											disabled="{isDisableEdit || !hasNext}"
											ponymode="{ponyMode}"
											use:mediator="letters-selection"
									/>
								</div>
							</fn:if>
						</td>
					</fn:if>

					<!-- 2pane: список писем -->
					<fn:if test="!readMode && !selectMode && !searchRoute && is2Pane">
						<fn:var name="groupStyle" value="{''}"/>
						<fn:var name="groupStyle"
								value="{groupStyle + 'padding-right:56px;'}"
								test="attrs['small-search']"
						/>
						<td bem:elem="content">
								<div
									bem:block="portal-menu__group" bem:mod="float"
									style="{groupStyle}"
								>
									<b:portal-menu-element
										ponymode="{ponyMode}"
										type="filters"
										short
										folder="{attrs.folder}"
										use:mediator="letters-selection"
									/>
								</div>
						</td>
					</fn:if>
				</tr>
				</tbody>
			</table>
		</fn:match>

		<fn:match name="right-column"
				  test="globals.shouldShowSearch"/>

	</b:layout>
</div>
`,"./app/ui-block/portal-menu/portal-menu.html")}.apply(t,r))||(e.exports=a)},68421:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span>
	<bem:mod name="hidden" test="!attrs.visible"/>
	<bem:mod name="inanimate" test="attrs.inanimate"/>

	<span
		bem:elem="value"
		style="width: {_this.getProgressWidth_()};"
	/>

</span>
`,"./app/ui-block/progress/progress.html")}.apply(t,r))||(e.exports=a)},53107:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="no-margin-collapse" test="attrs['no-margin-collapse']"/>

	<div
		class="promo-block-letter-wrapper"
		bem:elem="container"
		ref="container"
		qa:id="promo-block-letter-wrapper"
	/>
</div>
`,"./app/ui-block/promo-block-letter/promo-block-letter.html")}.apply(t,r))||(e.exports=a)},12947:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:if test="_this.checkPromoDomainPlate()">
		<b:letter-meta
			model="{attrs.model}"
			promoDomainPlate="{attrs.promoDomainPlate}"
			dark-mode="{attrs['dark-mode']}"
			remit:promodomainclose="letter-meta:promodomainclose"
			use:mediator="themes-manager"
		/>
	</fn:if>
</div>
`,"./app/ui-block/promo-domain-die/promo-domain-die.html")}.apply(t,r))||(e.exports=a)},57833:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:attr name="class" value="{attrs['class-name']}" test="!!attrs['class-name']"/>
</div>
`,"./app/ui-block/react-2kit-async/react-2kit-async.html")}.apply(t,r))||(e.exports=a)},61271:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:attr name="class" value="{attrs['class-name']}" test="!!attrs['class-name']"/>
</div>
`,"./app/ui-block/react-async/react-async.html")}.apply(t,r))||(e.exports=a)},41035:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div ref="container">
	<bem:mod name="visible" test="attrs.isLettersRoute"/>
	<bem:mod name="{attrs.type}"/>
</div>
`,"./app/ui-block/renovator/renovator.html")}.apply(t,r))||(e.exports=a)},98370:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="scrollable">
	<!-- Костыль, конечно.. Но верстка сайдбара не оставляет большого выбора. Используется в sidebar-folders -->
	<bem:mod name="id" test="attrs.id" value="{attrs.id}"/>

	<bem:mod name="opaque" test="attrs.opaque"/>
	<bem:mod name="substrated" test="attrs.substrated"/>
	<bem:mod name="footer" test="attrs.footer"/>
	<bem:mod name="bright" test="attrs.bright"/>
	<bem:mod name="content" test="attrs.content"/>
	<bem:mod name="sidebar" test="attrs.sidebar"/>
	<bem:mod name="ponymode" test="attrs.ponymode"/>
	<bem:mod name="full-height" test="attrs['full-height']" />
	<bem:mod name="styled" />
	<bem:mod name="background-transparent" test="attrs['background-transparent']" />

	<bem:mod name="disable-horizontal-scroll" test="attrs['disable-horizontal-scroll']"/>

	<bem:mod name="scroll-style" value="{attrs['scroll-style']}"/>

	<div bem:elem="container" ref="container">
		<bem:mod name="left-gap" test="attrs['left-gap']" />
		<fn:apply-match name="default"/>

		<div bem:elem="footer" fn:if="attrs.footer"/>
	</div>
</div>
`,"./app/ui-block/scrollable/scrollable.html")}.apply(t,r))||(e.exports=a)},65860:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div type="button">
	<fn:add-class name="js-shortcut" test="attrs.shortcut" />

	<span bem:elem="text" qa:id="{attrs.short ? 'button-short-text' : 'button-text'}">
		<fn:if test="attrs.short">
			{i18n(\'Поиск\')}
		</fn:if>
		<fn:if test="!attrs.short">
			{i18n(\'Поиск по почте\')}
		</fn:if>
	</span>

	<span bem:elem="icon" qa:id="button-icon">
    <b:ico name="{attrs.compact ? 'navigation:search:s' : 'navigation:search'}"/>
	</span>
</div>

`,"./app/ui-block/search-panel-button/search-panel-button.html")}.apply(t,r))||(e.exports=a)},19658:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="ponyMode" value="{attrs.ponyMode}"/>
	<fn:var name="columnWidth" value="{attrs.rightColumn}"/>
	<!-- Если активная панель - во всю ширину, если у нас только кнопка - шириной с кнопку, если поле - шириной с колонку -->
	<fn:var name="searchColumnWidth" value="{attrs.active ? '100%' : attrs.onlyIcon ? 'auto' : columnWidth + 'px'}"/>

	<bem:mod name="active" test="attrs.active" />
	<bem:mod name="only-icon" test="attrs.onlyIcon" />
	<bem:mod name="hide" test="attrs.hide" />
	<bem:mod name="size_{attrs.size}" />
	<bem:mod name="type" value="{attrs.layoutType}"/>
	<bem:mod name="pony-mode" test="ponyMode" />
	<fn:attr name="style" value="max-width:{attrs.maxWidth}px;"/>

	<div
		bem:elem="wrapper"
		qa:id="search-panel{attrs.active ? ':active' : ''}"
		style="width: {searchColumnWidth};"
	>
		<bem:mod name="active" test="attrs.active" />
		<bem:mod name="inactive" test="!attrs.active" />

		<fn:if test="attrs.active">
			<div bem:elem="left-col" ref="left-col">
				<b:button2
						remit:mousedown="back"
						nowrap
						radar-id="back"
						text="{i18n(\'Сбросить поиск\')}"
						ico="arrow-back"
						compact="{ponyMode}"
						pure
						short="{attrs.leftColumn <= 50}"
						centered
				/>
			</div>
		</fn:if>

		<div bem:elem="right-col" ref="right-col">
			<fn:if test="!attrs.onlyIcon">
				<b:search-panel-button
					remit:click.stop="expandSearchPanel"
					shortcut="/"
					use:mixin="shortcut-title"
					short="{columnWidth < 240}"
					compact="{ponyMode}"
				/>
			</fn:if>

			<fn:if test="attrs.onlyIcon">
				<b:button2
					remit:click.stop="expandSearchPanel"
					ico="search"
					compact="{ponyMode}"
					pure
					centered
				/>
			</fn:if>
		</div>

		<b:react-async
				id="search-panel"
				active="{attrs.active}"
				class-name="search-panel__layer"
				component="SearchPanelInput"
				onBlur="{_this.handleSearchPanelBlur}"
				search="{attrs.store.search}"
				size="{attrs.size}"
				ponyMode="{ponyMode}"
				categories="{attrs.categories}"
				colorTags="{attrs.colorTags}"
				use:mediator="themes-manager"
		/>
	</div>
</div>
`,"./app/ui-block/search-panel/search-panel.html")}.apply(t,r))||(e.exports=a)},78091:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="expanded" value="{attrs.expanded}"/>
	<fn:var name="touch" value="{attrs.touch}" />
	<fn:var name="userToggled" value="{_this.userToggled}"/>
	<fn:var name="items" value="{attrs.items}"/>
	<fn:var name="selectedIndex" value="{_this.getSelectedIndex()}"/>
	<fn:var name="selectedItem" value="{_this.getSelectedItem()}"/>
	<fn:var name="disabledIndex" value="{attrs['disabled-index']}"/>
	<fn:var name="disabledItem" value="{_this.getItem(disabledIndex)}" />
	<fn:var name="alignRight" value="{attrs['align-right']}" />
	<!-- Для передачи массива selectedIndex -->
	<fn:var name="multiple" value="{attrs.multiple}"/>

	<bem:mod name="touch" test="touch"/>
	<bem:mod name="hover-support" test="attrs['hover-support']"/>


	<!-- Контрол -->
	<fn:match name="control" args="selectedText, selectedItem, selectedIndex, expanded">
		<b:button2
			text="{selectedText}"
			pressed="{expanded}"
			remit:click="control-click"
		/>
	</fn:match>

	<!-- Элемент -->
	<fn:match name="item" args="item, key, isSelected, isDisabled, text, icon, touch">
		<b:list-item
			touch="{touch}"
			disabled="{isDisabled}"
			markable
			marked="{isSelected}"

			qa:id="{key}"
			key="{key}"
			remit:click="item-click"
			event:details="item"
		>
			<span bem:elem="ico" fn:if="icon">
				<b:ico name="{icon}" size="s" />
			</span>

			<span bem:elem="text">
				<fn:value>text</fn:value>
			</span>
		</b:list-item>
	</fn:match>

	<!-- Список элементов -->
	<fn:match name="items" args="items, selectedItem, selectedIndex, disabledItem, disabledIndex, touch">
		<b:list
			touch="{touch}"
		>
			<fn:for data="items" as="item">
				<fn:var name="key" value="{_this.getItemAttr(item, 'key')}"/>
				<fn:var name="text" value="{_this.getItemAttr(item, 'text')}"/>
				<fn:var name="isSelected" value="{key === _this.getItemAttr(selectedItem, 'key')}"/>
				<fn:var name="isDisabled" value="{key === _this.getItemAttr(disabledItem, 'key')}" />
				<fn:var name="icon" value="{_this.getItemAttr(item, 'icon')}"/>

				<!-- Элемент -->
				<fn:apply-match name="item" args="item, key, isSelected, isDisabled, text, icon, touch"/>
			</fn:for>
		</b:list>
	</fn:match>

	<!-- Кнопка выбора -->
	<div bem:elem="control">
		<fn:var name="selectedText" value="{_this.getItemAttr(selectedItem, 'text')}"/>
		<fn:apply-match name="control"
						args="selectedText, selectedItem, selectedIndex, expanded"/>
	</div>

	<!-- Выпадающий список -->
	<div bem:elem="items">
		<bem:mod name="expanded" test="expanded"/>
		<bem:mod name="collapsed" test="!expanded && userToggled"/>
		<bem:mod name="align-right" test="alignRight" />

		<fn:apply-match name="items" args="items, selectedItem, selectedIndex, disabledItem, disabledIndex, touch"/>
	</div>
</div>
`,"./app/ui-block/select/select.html")}.apply(t,r))||(e.exports=a)},92784:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<b:react-async
		component="SettingsDock"
		componentClass="{_this.lazySettingsDock()}"
		show="{attrs.show}"
		startSection="{attrs.startSection}"
		applicationElement="{_this.getApplicationElement()}"
		onEvent="{_this.handleEvent}"
		darkMode="{attrs.darkMode}"
		userLang="{attrs.userLang}"
		thirtyFiftyMode="{attrs.thirtyFiftyMode}"
		disableExpand="{attrs.disableExpand}"
		disableAutoExpand="{attrs.disableAutoExpand}"
		startFullscreen="{attrs.startFullscreen}"
		support3pane="{attrs.support3pane}"
		layoutType="{attrs.type}"
		canTogglePonymode="{attrs['can-toggle-ponymode']}"
		ponymode="{attrs.ponymode}"
		canToggleShortcuts="{attrs['can-toggle-shortcuts']}"
		manualShortcuts="{attrs['manual-shortcuts']}"
		threads="{attrs.threads}"
		themes="{_this.getThemes()}"
		metathreadsData="{attrs.metathreadsData}"
		onMetathreadsSettingsEdit="{_this.onMetathreadsSettingsEdit}"
		onMetathreadsHelpClick="{_this.onMetathreadsHelpClick}"
		metathreadsFiltersCount="{attrs.metathreadsFiltersCount}"
		metathreadsFiltersCountLoading="{attrs.metathreadsFiltersCountLoading}"
		canToggleTodo="{attrs.canToggleTodo}"
		todo="{attrs.todo}"
		lettersDividersEnabled="{attrs['letters-dividers-enabled']}"
		canToggleLettersDividers="{attrs['can-toggle-letters-dividers']}"
	/>
</div>
`,"./app/ui-block/settings-dock/settings-dock.html")}.apply(t,r))||(e.exports=a)},68385:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	remit:click.prevent.stop="help:open"
	event:details="attrs['event-details']"
	qa:id="help-link"
>
	<bem:mod name="pony-mode" test="attrs.ponymode" />
	<a bem:elem="link" href="{attrs.link}" target="_blank" qa:id="settings-help-link">
		<b:ico name="{'navigation:tip_round'}"/>
	</a>
	<div bem:elem="empty" />
</div>
`,"./app/ui-block/settings-help-link/settings-help-link.html")}.apply(t,r))||(e.exports=a)},12241:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div promo:id="settings">
	<b:button2
		qa:id="settings"
		remit:click.prevent="settings-icon:click"
		radar-id="s-btn"
		shortcut="{attrs.shortcut}"
		title-shortcut="{attrs['title-shortcut']}"
		title="{attrs.title}"
		annotation="{attrs.annotation}"
		text="{i18n(\'Настройки\')}"
		ico="{attrs.ponymode ? 'navigation:settings_s' : 'navigation:settings'}"
		rotate-ico="{attrs['rotate-ico']}"
		touch="{attrs.touch}"
		short="{!attrs.showTitle}"
		ico-text-top="{attrs['ico-text-top']}"
		pure
		secondary="{attrs.secondary}"
		size="{attrs.size}"
		disabled="{attrs.disabled}"
		compact="{attrs.ponymode}"
		clean="{attrs.clean}"
		font-size-pony="{attrs['font-size-pony']}"
		notification-badge="{attrs['notification-badge']}"
		notification-badge-size="m"
		notification-badge-color="accent"
		always-bright="{attrs['always-bright']}"
		centered="{!attrs.showTitle}"
		fill="{attrs.fill}"
		text-overflow="{attrs['text-overflow']}"
	/>
</div>
`,"./app/ui-block/settings/settings.html")}.apply(t,r))||(e.exports=a)},21827:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:value>_this.getShortcut()</fn:value>
</div>
`,"./app/ui-block/shortcut-hint/shortcut-hint.html")}.apply(t,r))||(e.exports=a)},91531:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:add-class name="js-shortcut" />
</div>
`,"./app/ui-block/shortcut/shortcut.html")}.apply(t,r))||(e.exports=a)},6349:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div a11y:tooltip-direction="right">
	<!-- Variables -->
	<fn:var name="short" value="{attrs.short}" />
	<fn:var name="ponyMode" value="{attrs.ponymode}" />
	<fn:var name="widget" value="{attrs['widget-enabled']}" />
	<fn:var name="isSearch" value="{attrs['is-search']}" />
	<fn:var name="widgetsMinHeight" value="{_this.getWidgetsMinHeight()}" />

	<bem:mod name="css-vars-fallback" test="attrs['css-vars-fallback']" />

	<!-- Сайдбар -->
	<b:sidebar
		id="sidebar"
		ponymode="{ponyMode}"
		settings
		short="{short}"
		widget="{widget}"
		ref="sidebar"
		short-scroll-style="{isSearch ? 'thin' : 'minimal'}"
		isSearch="{isSearch}"
		remit:resize-full="sidebar-resize-full"
		remit:resize-short="sidebar-resize-short"
		footer-min-height="{widgetsMinHeight.full}"
		short-footer-min-height="{widgetsMinHeight.short}"
	>
		<fn:match name="sidebar-top-menu" args="isShort, isOpen">
			<!-- Кнопка звонков основная, остальное второстепенное, так что без неё можно и не показывать дропдаун -->
			<fn:var name="withDropdown" value="{attrs['invite-calls'] && !isShort}" />
			<fn:var name="webview" value="{attrs.webview}" />
			<fn:var name="hideComposeBtn" value="{attrs.hideComposeBtn}" />

			<!-- Шапка сайдбара -->
			<div bem:elem="header" ref="sideBarHeader">
				<!-- Кнопка Написать письмо (есть всегда) -->
				<div bem:elem="compose-btn-box">
					<bem:mod name="hide" test="hideComposeBtn" />
					<bem:mod name="with-dropdown" test="withDropdown" />
					<b:compose-button
						remit:click="compose:new"
						remit:mouseenter="compose:preload"
						remit:mousedown="compose:preload"
						use:mixin="shortcut-title"
						qa:id="compose"
						base="{!isShort}"
						compact="{ponyMode}"
						shortcut="n"
						title="{i18n(\'Написать письмо\')}"
						white="{!isOpen}"
						with-dropdown="{withDropdown}"
						webview="{webview}"
					/>
					<b:compose-dropdown
						fn:if="withDropdown"
						qa:id="compose-dropdown"
						use:mediator="compose-manager calendar-manager calls-manager"
						compact="{ponyMode}"
					/>
				</div>

				<!-- Бургер/Скрыть -->
				<a
					fn:if="isShort || isOpen"
					bem:elem="menu-item"
					remit:click="sidebar:toggle"
					qa:id="burger-button"
					title="{!isOpen && !isSearch ? i18n(\'Все папки\') : i18n(\'Все фильтры\')}"
				>
					<div bem:elem="unread-badge">
						<fn:var name="unreadLimit" value="99" />
						<fn:var name="unread" value="{_this.getTotalUnread()}" />
						<b:badge
							text="{unread > unreadLimit ? unreadLimit + '+' : unread}"
							size="{ponyMode ? 'xxs_alt' : 's_alt'}"
							strong
							transparent="{short}"
						/>
					</div>

					<span bem:elem="menu-ico">
						<b:ico
							name="{attrs.ponymode ? 'navigation:menu_s' : 'navigation:menu'}"
							size="m"
						/>
					</span>
					<span bem:elem="menu-text">{i18n(\'Скрыть\')}</span>
				</a>

				<fn:if test="isSearch">
					<div bem:elem="filter-inbox-container" fn:if="!_this.useNewToolbar()">
						<bem:mod name="ponymode" test="ponyMode" />
						<a
							bem:elem="menu-item"
							href="{_this.getInboxUrl()}"
							remit:click="search:inbox:click"
							qa:id="search-sidebar-inbox"
							title="{isShort && i18n(\'Перейти во входящие\')}"
						>
							<div bem:elem="filter-inbox-item">
								<bem:mod name="ponymode" test="!isShort && ponyMode" />
								<span bem:elem="menu-ico">
									<div bem:elem="filter-icon">
										<bem:mod name="short" test="isShort" />
										<bem:mod name="full" test="!isShort" />
										<b:ico
											class="filter-inbox-icon"
											name="{attrs.ponymode ? 'categories:mail_s' : 'categories:mail'}"
											size="m"
										/>
									</div>
								</span>
								<div fn:if="!isShort || isOpen" bem:elem="filter-inbox">
									<bem:mod name="ponymode" test="ponyMode" />
									<bem:mod name="normal" test="!ponyMode" />
									<fn:add-class name="r-text" />
									{i18n(\'Перейти во входящие\')}
								</div>
							</div>
						</a>
					</div>
					<fn:if test="!isShort || isOpen">
						<div bem:elem="filter-txt" qa:id="search-sidebar-filters">
							<fn:add-class name="r-text" />
							{i18n(\'Фильтры поиска\')}
						</div>
						<hr bem:elem="hr" />
					</fn:if>
				</fn:if>
			</div>
		</fn:match>

		<fn:match name="sidebar-content" args="isShort, isOpen">
			<!-- Контент: список папок на шорткатах-->
			<div ref="sideBarContent" id="sideBarContent">
				<fn:choose>
					<fn:when test="isSearch">
						<b:react-async
							ref="reactAsync"
							class-name="sidebar__layer"
							use:mediator="letters-actions user-info letters-loader pony-mode"
							component="SearchSidebar"
							onSearchPanelFocus="{_this.handleSearchPanelFocus}"
							ponyMode="{ponyMode}"
							nanoMode="{ponyMode}"
							search="{attrs.store.search}"
							shortcut="{isShort}"
							categories="{attrs.categories}"
							colorTags="{attrs.colorTags}"
						/>
					</fn:when>
					<fn:otherwise>
						<b:nav-folders
							ref="navFolders"
							use:mediator="letters-actions folders-actions letters-loader pony-mode folders-navigation"
							remit:folderclick="folder:click"
							active="{attrs['folder-active']}"
							handle-drop
							models="{attrs.models}"
							router="{attrs.router}"
							short="{isShort}"
							sidebar
							with-clear="{!isShort}"
						/>
					</fn:otherwise>
				</fn:choose>
			</div>
		</fn:match>

		<fn:match name="sidebar-bottom-menu" args="isShort, isOpen">
			<b:sidebar-widgets
				fn:if="!_this.useNewToolbar()"
				use:mediator="sidebar-menu"
				ref="sideBarFooter"
				billsCount="{attrs.billsCount}"
				short="{isShort}"
				open="{isOpen}"
				pony-mode="{ponyMode}"
			/>

			<fn:if test="attrs.showUnsubscribeButton">
				<b:react-async
					use:mediator="themes-manager"
					component="SidebarUnsubscribeButton"
					ponyMode="{ponyMode}"
					showTitle="{!isShort || isOpen}"
					shortOpenedSidebar="{isShort || isOpen}"
				/>
			</fn:if>

			<b:widget fn:if="_this.isHideHeadline() && _this.useNewToolbar() && _this.isWebView()"
					use:mediator="addressbook-manager"
					use:mixin="shortcut-title"
					remit:click-on-link="menu-item:click"
					shortcut="g,c"
					type="contacts"
					pony-mode="{ponyMode}"
					showTitle="{!isShort || isOpen}"
					qa:id="footer-widget"
			/>

			<b:settings
				fn:if="_this.useNewToolbar()"
				font-size-pony="{ponyMode}"
				showTitle="{!isShort || isOpen}"
				remit:click="menu-settings:click"
				use:mediator="layout-manager themes-manager settings-manager pony-mode advert-manager todo-manager"
				radar-id="st"
				fill
				text-overflow
			/>

			<b:button2 fn:if="attrs['show-reload-button'] && _this.useNewToolbar() && _this.isHideHeadline() && _this.isWebView()"
					   qa:id="reload-button"
					   title="{i18n(\'Обновить страницу\')}"
					   text="{i18n(\'Обновить\')}"
					   short="{isShort && !isOpen}"
					   shortcut="ctrl+r|command+r"
					   pure
					   ico="actions:postpone_alt"
					   remit:click="reload:click"
					   fill
			/>
		</fn:match>

		<fn:match name="sidebar-bottom-widget" args="isShort">
			<!-- Виджет тем -->
			<b:themes-widget ref="themesWidget" use:mediator="themes-manager" />
		</fn:match>
	</b:sidebar>
</div>
`,"./app/ui-block/sidebar-folders/sidebar-folders.html")}.apply(t,r))||(e.exports=a)},75600:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	qa:id="sidebar-search"
	a11y:tooltip-direction="left"
>
	<!-- Variables -->
	<fn:var name="short" value="{attrs.short}" />
	<fn:var name="ponyMode" value="{attrs.ponymode}"/>

	<b:sidebar
		id="sidebar"
		open-left
		ponymode="{ponyMode}"
		short="{short}"
	>
		<fn:match name="sidebar-top-menu" args="isShort, isOpen">
			<!-- Шапка сайдбара -->
			<div bem:elem="header">
				<!-- Бургер/Скрыть -->
				<a
					fn:if="isShort || isOpen"
					bem:elem="menu-item"
					remit:click="sidebar:toggle"
					qa:id="burger-button"
					title="{!isOpen && i18n(\'Все фильтры\')}"
				>
					<span bem:elem="menu-ico">
						<b:ico name="{attrs.ponymode ? 'navigation:menu_s' : 'navigation:menu'}" size="m"/>
					</span>
					<span bem:elem="menu-text">{i18n(\'Скрыть\')}</span>
				</a>
			</div>
		</fn:match>

		<fn:match name="sidebar-content" args="isShort, isOpen">
			<b:react-async
				class-name="search-sidebar__layer"
				component="SearchSidebar"

				folders="{attrs.folders}"
				onSearchPanelFocus="{_this.handleSearchPanelFocus}"
				ponyMode="{ponyMode}"
				nanoMode="{ponyMode}"
				search="{attrs.store.search}"
				shortcut="{isShort}"
				categories="{attrs.categories}"
				colorTags="{attrs.colorTags}"
			/>
		</fn:match>
	</b:sidebar>
</div>

`,"./app/ui-block/sidebar-search/sidebar-search.html")}.apply(t,r))||(e.exports=a)},93026:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<fn:var name="short" value="{attrs.short}" />
	<fn:var name="isOpen" value="{attrs.open}" />

	<fn:var name="showTitle" value="{attrs['vertical-list'] && (!short || isOpen)}" />
	<fn:var name="position" value="{showTitle || short && !isOpen  ? 'vertical' : 'horizontal'}" />

	<fn:var name="ponyMode" value="{attrs['pony-mode']}" />

	<bem:mod name="pony-mode" test="attrs['pony-mode']" />
	<bem:mod name="short" test="attrs['short']" />
	<bem:mod name="full" test="!attrs['short']" />
	<bem:mod name="wide-settings-button" test="attrs['menu-widget-list'].length === 0 && ponyMode" />

	<fn:var name="isPayWidgetInDropdown" value="_this.isPayWidgetInDropdown()"/>

	<!-- Футер сайдбара: виджеты -->
	<div bem:elem="footer"
			qa:id="sidebar-footer-{position}"
			promo:id="sidebar-widgets-position-{position}"
			data-position="{position}"
			ref="sidebarFooter"
			a11y:tooltip-direction="{position === 'horizontal' ? 'top' : 'right'}"
	>
		<bem:mod name="vertical" test="attrs['vertical-list']"/>
		<bem:mod name="centered" test="attrs['short']"/>

		<fn:for data="attrs['menu-widget-list']" as="menuItem" key="menuItemKey">
			<div bem:elem="footer__item" key="{menuItemKey}" promo:id="sidebar-widgets-item{showTitle ? '-full' : ''}">
				<fn:var name="menuItemType" value="{(menuItem.type === 'bonus' && attrs['is-pdd-user']) ? 'club' : menuItem.type}" />
				<fn:var name="isPayBadgeActive" value="{attrs['is-pay-widget-helper-active']}" />
				<fn:var name="isPayWidget" value="{menuItem.type === 'pay'}" />

				<fn:choose>
					<fn:when test="menuItem.type === 'contacts'">
						<b:widget
								use:mediator="addressbook-manager"
								use:mixin="shortcut-title"
								remit:click-on-link="menu-item:click"
								shortcut="g,c"
								type="{menuItemType}"
								pony-mode="{ponyMode}"
								showTitle="{showTitle}"
								qa:id="footer-widget"
						/>
					</fn:when>
					<fn:otherwise>
						<b:widget
								remit:click-on-link="menu-item:click"
								type="{menuItemType}"
								pony-mode="{ponyMode}"
								showTitle="{showTitle}"
								notification-badge="{isPayWidget && isPayBadgeActive && 'sidebar_pay_notif_show'}"
								qa:id="footer-widget"
								billsCount="{attrs.billsCount}"
						/>
					</fn:otherwise>
				</fn:choose>
			</div>
		</fn:for>
		<fn:if test="attrs['menu-dropdown-list'].length > 0">
			<div
					bem:elem="footer__item"
					promo:id="{isPayWidgetInDropdown && 'menu-item_pay'}"
			>
				<b:dropdown
						qa:id="dropdown-menu"
						ico="more-hor"
						pure
						short
						ponymode="{ponyMode}"
						radar-id="dropdown_menu"
						type="dropdown_menu"
						remit:ctrl-click="menu-item:click"
						auto-close="{false}"
						disable-expand-center
						disable-expand-bottom
						scroll-style="minimal"
				>
					<fn:match name="items">
						<b:list>
							<fn:for data="attrs['menu-dropdown-list']" as="menuItem" key="menuItemKey">
								<b:list-item key="{menuItemKey}" qa:id="menu-dropdown-item" paddingless a11y:tooltip-direction="right">
									<fn:var name="menuItemType" value="{(menuItem.type === 'bonus' && attrs['is-pdd-user']) ? 'club' : menuItem.type}" />
									<fn:var name="isPayBadgeActive" value="{attrs['is-pay-widget-helper-active'] && menuItem.type === 'pay'}" />

									<bem:mod name="pony-mode-dropdown" test="ponyMode"/>
									<fn:choose>
										<fn:when test="menuItemType === 'contacts'">
											<b:widget
													remit:click-on-link="menu-item:click"
													use:mediator="addressbook-manager"
													use:mixin="shortcut-title"
													shortcut="g,c"
													type="{menuItemType}"
													pony-mode="{ponyMode}"
													dropDownMode="{true}"
											/>
										</fn:when>
										<fn:otherwise>
											<b:widget
													remit:click-on-link="menu-item:click"
													type="{menuItemType}"
													pony-mode="{ponyMode}"
													dropDownMode="{true}"
													isList="{attrs['vertical-list']}"
													notification-badge="{isPayBadgeActive && 'sidebar_pay_notif_show_dropd'}"
													billsCount="{attrs.billsCount}"
											/>
										</fn:otherwise>
									</fn:choose>
								</b:list-item>
							</fn:for>
						</b:list>
					</fn:match>
				</b:dropdown>
			</div>
		</fn:if>
		<div bem:elem="footer__item" ref="settingsMenu" promo:id="menu-item_settings">
			<b:settings
					font-size-pony="{ponyMode}"
					showTitle="{_this.useNewToolbar() ? !short || isOpen : showTitle}"
					remit:click="menu-settings:click"
					use:mediator="layout-manager themes-manager settings-manager pony-mode advert-manager todo-manager"
					radar-id="st"
			/>
		</div>
		<div bem:elem="footer__item" fn:if="attrs['show-reload-button']">
			<b:button2
				qa:id="reload-button"
				title="{i18n(\'Обновить страницу\')}"
				text="{i18n(\'Обновить\')}"
				short="{!showTitle}"
				shortcut="ctrl+r|command+r"
				pure
				ico="actions:postpone_alt"
				remit:click="reload:click"
			/>
		</div>
	</div>
</div>
`,"./app/ui-block/sidebar-widgets/sidebar-widgets.html")}.apply(t,r))||(e.exports=a)},51828:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<!-- Variables -->
	<fn:var name="short" value="{attrs.short}" />
	<fn:var name="open" value="{short && attrs.open}" />
	<fn:var name="shortcut" value="{short && !attrs.open}"/>
	<fn:var name="ponyMode" value="{attrs.ponymode}"/>
	<fn:var name="widget" value="{attrs.widget}"/>
	<fn:var name="isSearch" value="{attrs.isSearch}"/>

	<!-- Modificators -->
	<bem:mod name="short" test="short"/>
	<bem:mod name="open" test="open"/>
	<bem:mod name="closed" test="!open"/>
	<bem:mod name="pony-mode" test="ponyMode"/>
	<bem:mod name="widget" test="widget"/>
	<bem:mod name="search" test="isSearch"/>

	<!-- Список папок компактный (шорткаты) -->
	<div
		fn:if="_this.hasShortMenu()"
		bem:elem="short"
		qa:id="short"
		ref="short"
	>
		<bem:mod name="fixed"/>

		<div ref="top-menu-short">
			<fn:apply-match name="sidebar-top-menu" args="true, open"/>
		</div>

		<b:scrollable
			id="scrollShort"
			ref="scrollShort"
			scroll-style="{attrs['short-scroll-style']}"
			ponymode="{ponyMode}"
			disable-horizontal-scroll
		>
			<div ref="content-short">
				<fn:apply-match name="sidebar-content" args="true, open"/>
			</div>
		</b:scrollable>

		<div ref="bottom-menu-short" bem:elem="bottom-menu">
			<bem:mod name="css-vars-fallback" test="attrs['css-vars-fallback']"/>

			<fn:apply-match name="sidebar-bottom-menu" args="true"/>
		</div>
	</div>

	<!-- Список полный или раскрытый -->
	<fn:if test="_this.hasFullMenu()" animated>
		<div
			ref="full"
			bem:elem="full"
			qa:id="full"
		>
			<bem:mod name="fixed" test="!open"/>
			<bem:mod name="left" test="attrs['open-left']"/>

			<div ref="top-menu-full">
				<fn:apply-match name="sidebar-top-menu" args="false, open"/>
			</div>

			<b:scrollable
				id="scrollFull"
				ref="scrollFull"
				ponymode="{ponyMode}"
				sidebar
			>
				<div ref="content-full">
					<fn:apply-match name="sidebar-content" args="false, open"/>
				</div>
			</b:scrollable>

			<div ref="bottom-menu-full" bem:elem="bottom-menu" qa:id="sidebar-footer-vertical">
				<bem:mod name="css-vars-fallback" test="attrs['css-vars-fallback']"/>

				<fn:apply-match name="sidebar-bottom-menu" args="false, open"/>
			</div>
		</div>
	</fn:if>

	<fn:apply-match name="sidebar-bottom-widget" args="shortcut" fn:if="widget"/>
</div>
`,"./app/ui-block/sidebar/sidebar.html")}.apply(t,r))||(e.exports=a)},10794:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div
	style="width: {attrs['right-column']}px"
>
	<div ref="el"/>
</div>
`,"./app/ui-block/slot/slot.html")}.apply(t,r))||(e.exports=a)},91072:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<div
		ref="spec-project-letter"
		qa:id="spec-project-letter"
	/>
	<b:delimeter last fn:if="!attrs['no-delimeter']"/>
</div>
`,"./app/ui-block/spec-project-letter/spec-project-letter.html")}.apply(t,r))||(e.exports=a)},96741:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="inline" test="attrs.inline"/>
	<bem:mod name="small" test="attrs.small"/>

	<div bem:elem="icon">
		<fn:if test="attrs.size">
			<bem:mod name="size-{attrs.size}" test="attrs.size"/>
		</fn:if>
		<fn:if test="attrs.color">
			<bem:mod name="color-{attrs.color}" test="attrs.color"/>
		</fn:if>

		<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 64 64">
			<defs>
				<path id="spinner-path" d="M0 0h32v32H0z"></path>
				<mask id="spinner-mask">
					<path fill="#fff" d="M0 0h64v64H0z"></path>
					<use fill="#020202" xlink:href="#spinner-path" transform="rotate(-146 32 32)"></use>
					<use fill="#040404" xlink:href="#spinner-path" transform="rotate(-144 32 32)"></use>
					<use fill="#060606" xlink:href="#spinner-path" transform="rotate(-142 32 32)"></use>
					<use fill="#080808" xlink:href="#spinner-path" transform="rotate(-140 32 32)"></use>
					<use fill="#0A0A0A" xlink:href="#spinner-path" transform="rotate(-138 32 32)"></use>
					<use fill="#0C0C0C" xlink:href="#spinner-path" transform="rotate(-136 32 32)"></use>
					<use fill="#0E0E0E" xlink:href="#spinner-path" transform="rotate(-134 32 32)"></use>
					<use fill="#101010" xlink:href="#spinner-path" transform="rotate(-132 32 32)"></use>
					<use fill="#131313" xlink:href="#spinner-path" transform="rotate(-130 32 32)"></use>
					<use fill="#151515" xlink:href="#spinner-path" transform="rotate(-128 32 32)"></use>
					<use fill="#171717" xlink:href="#spinner-path" transform="rotate(-126 32 32)"></use>
					<use fill="#191919" xlink:href="#spinner-path" transform="rotate(-124 32 32)"></use>
					<use fill="#1B1B1B" xlink:href="#spinner-path" transform="rotate(-122 32 32)"></use>
					<use fill="#1D1D1D" xlink:href="#spinner-path" transform="rotate(-120 32 32)"></use>
					<use fill="#1F1F1F" xlink:href="#spinner-path" transform="rotate(-118 32 32)"></use>
					<use fill="#212121" xlink:href="#spinner-path" transform="rotate(-116 32 32)"></use>
					<use fill="#242424" xlink:href="#spinner-path" transform="rotate(-114 32 32)"></use>
					<use fill="#262626" xlink:href="#spinner-path" transform="rotate(-112 32 32)"></use>
					<use fill="#282828" xlink:href="#spinner-path" transform="rotate(-110 32 32)"></use>
					<use fill="#2A2A2A" xlink:href="#spinner-path" transform="rotate(-108 32 32)"></use>
					<use fill="#2C2C2C" xlink:href="#spinner-path" transform="rotate(-106 32 32)"></use>
					<use fill="#2E2E2E" xlink:href="#spinner-path" transform="rotate(-104 32 32)"></use>
					<use fill="#303030" xlink:href="#spinner-path" transform="rotate(-102 32 32)"></use>
					<use fill="#323232" xlink:href="#spinner-path" transform="rotate(-100 32 32)"></use>
					<use fill="#353535" xlink:href="#spinner-path" transform="rotate(-98 32 32)"></use>
					<use fill="#373737" xlink:href="#spinner-path" transform="rotate(-96 32 32)"></use>
					<use fill="#393939" xlink:href="#spinner-path" transform="rotate(-94 32 32)"></use>
					<use fill="#3B3B3B" xlink:href="#spinner-path" transform="rotate(-92 32 32)"></use>
					<use fill="#3D3D3D" xlink:href="#spinner-path" transform="rotate(-90 32 32)"></use>
					<use fill="#3F3F3F" xlink:href="#spinner-path" transform="rotate(-88 32 32)"></use>
					<use fill="#414141" xlink:href="#spinner-path" transform="rotate(-86 32 32)"></use>
					<use fill="#434343" xlink:href="#spinner-path" transform="rotate(-84 32 32)"></use>
					<use fill="#464646" xlink:href="#spinner-path" transform="rotate(-82 32 32)"></use>
					<use fill="#484848" xlink:href="#spinner-path" transform="rotate(-80 32 32)"></use>
					<use fill="#4A4A4A" xlink:href="#spinner-path" transform="rotate(-78 32 32)"></use>
					<use fill="#4C4C4C" xlink:href="#spinner-path" transform="rotate(-76 32 32)"></use>
					<use fill="#4E4E4E" xlink:href="#spinner-path" transform="rotate(-74 32 32)"></use>
					<use fill="#505050" xlink:href="#spinner-path" transform="rotate(-72 32 32)"></use>
					<use fill="#525252" xlink:href="#spinner-path" transform="rotate(-70 32 32)"></use>
					<use fill="#545454" xlink:href="#spinner-path" transform="rotate(-68 32 32)"></use>
					<use fill="#575757" xlink:href="#spinner-path" transform="rotate(-66 32 32)"></use>
					<use fill="#595959" xlink:href="#spinner-path" transform="rotate(-64 32 32)"></use>
					<use fill="#5B5B5B" xlink:href="#spinner-path" transform="rotate(-62 32 32)"></use>
					<use fill="#5D5D5D" xlink:href="#spinner-path" transform="rotate(-60 32 32)"></use>
					<use fill="#5F5F5F" xlink:href="#spinner-path" transform="rotate(-58 32 32)"></use>
					<use fill="#616161" xlink:href="#spinner-path" transform="rotate(-56 32 32)"></use>
					<use fill="#636363" xlink:href="#spinner-path" transform="rotate(-54 32 32)"></use>
					<use fill="#656565" xlink:href="#spinner-path" transform="rotate(-52 32 32)"></use>
					<use fill="#686868" xlink:href="#spinner-path" transform="rotate(-50 32 32)"></use>
					<use fill="#6A6A6A" xlink:href="#spinner-path" transform="rotate(-48 32 32)"></use>
					<use fill="#6C6C6C" xlink:href="#spinner-path" transform="rotate(-46 32 32)"></use>
					<use fill="#6E6E6E" xlink:href="#spinner-path" transform="rotate(-44 32 32)"></use>
					<use fill="#707070" xlink:href="#spinner-path" transform="rotate(-42 32 32)"></use>
					<use fill="#727272" xlink:href="#spinner-path" transform="rotate(-40 32 32)"></use>
					<use fill="#747474" xlink:href="#spinner-path" transform="rotate(-38 32 32)"></use>
					<use fill="#767676" xlink:href="#spinner-path" transform="rotate(-36 32 32)"></use>
					<use fill="#797979" xlink:href="#spinner-path" transform="rotate(-34 32 32)"></use>
					<use fill="#7B7B7B" xlink:href="#spinner-path" transform="rotate(-32 32 32)"></use>
					<use fill="#7D7D7D" xlink:href="#spinner-path" transform="rotate(-30 32 32)"></use>
					<use fill="#7F7F7F" xlink:href="#spinner-path" transform="rotate(-28 32 32)"></use>
					<use fill="#818181" xlink:href="#spinner-path" transform="rotate(-26 32 32)"></use>
					<use fill="#838383" xlink:href="#spinner-path" transform="rotate(-24 32 32)"></use>
					<use fill="#858585" xlink:href="#spinner-path" transform="rotate(-22 32 32)"></use>
					<use fill="#878787" xlink:href="#spinner-path" transform="rotate(-20 32 32)"></use>
					<use fill="#8A8A8A" xlink:href="#spinner-path" transform="rotate(-18 32 32)"></use>
					<use fill="#8C8C8C" xlink:href="#spinner-path" transform="rotate(-16 32 32)"></use>
					<use fill="#8E8E8E" xlink:href="#spinner-path" transform="rotate(-14 32 32)"></use>
					<use fill="#909090" xlink:href="#spinner-path" transform="rotate(-12 32 32)"></use>
					<use fill="#929292" xlink:href="#spinner-path" transform="rotate(-10 32 32)"></use>
					<use fill="#949494" xlink:href="#spinner-path" transform="rotate(-8 32 32)"></use>
					<use fill="#969696" xlink:href="#spinner-path" transform="rotate(-6 32 32)"></use>
					<use fill="#989898" xlink:href="#spinner-path" transform="rotate(-4 32 32)"></use>
					<use fill="#9B9B9B" xlink:href="#spinner-path" transform="rotate(-2 32 32)"></use>
					<use fill="#9D9D9D" xlink:href="#spinner-path"></use>
					<use fill="#9F9F9F" xlink:href="#spinner-path" transform="rotate(2 32 32)"></use>
					<use fill="#A1A1A1" xlink:href="#spinner-path" transform="rotate(4 32 32)"></use>
					<use fill="#A3A3A3" xlink:href="#spinner-path" transform="rotate(6 32 32)"></use>
					<use fill="#A5A5A5" xlink:href="#spinner-path" transform="rotate(8 32 32)"></use>
					<use fill="#A7A7A7" xlink:href="#spinner-path" transform="rotate(10 32 32)"></use>
					<use fill="#A9A9A9" xlink:href="#spinner-path" transform="rotate(12 32 32)"></use>
					<use fill="#ACACAC" xlink:href="#spinner-path" transform="rotate(14 32 32)"></use>
					<use fill="#AEAEAE" xlink:href="#spinner-path" transform="rotate(16 32 32)"></use>
					<use fill="#B0B0B0" xlink:href="#spinner-path" transform="rotate(18 32 32)"></use>
					<use fill="#B2B2B2" xlink:href="#spinner-path" transform="rotate(20 32 32)"></use>
					<use fill="#B4B4B4" xlink:href="#spinner-path" transform="rotate(22 32 32)"></use>
					<use fill="#B6B6B6" xlink:href="#spinner-path" transform="rotate(24 32 32)"></use>
					<use fill="#B8B8B8" xlink:href="#spinner-path" transform="rotate(26 32 32)"></use>
					<use fill="#BABABA" xlink:href="#spinner-path" transform="rotate(28 32 32)"></use>
					<use fill="#BDBDBD" xlink:href="#spinner-path" transform="rotate(30 32 32)"></use>
					<use fill="#BFBFBF" xlink:href="#spinner-path" transform="rotate(32 32 32)"></use>
					<use fill="#C1C1C1" xlink:href="#spinner-path" transform="rotate(34 32 32)"></use>
					<use fill="#C3C3C3" xlink:href="#spinner-path" transform="rotate(36 32 32)"></use>
					<use fill="#C5C5C5" xlink:href="#spinner-path" transform="rotate(38 32 32)"></use>
					<use fill="#C7C7C7" xlink:href="#spinner-path" transform="rotate(40 32 32)"></use>
					<use fill="#C9C9C9" xlink:href="#spinner-path" transform="rotate(42 32 32)"></use>
					<use fill="#CBCBCB" xlink:href="#spinner-path" transform="rotate(44 32 32)"></use>
					<use fill="#CECECE" xlink:href="#spinner-path" transform="rotate(46 32 32)"></use>
					<use fill="#D0D0D0" xlink:href="#spinner-path" transform="rotate(48 32 32)"></use>
					<use fill="#D2D2D2" xlink:href="#spinner-path" transform="rotate(50 32 32)"></use>
					<use fill="#D4D4D4" xlink:href="#spinner-path" transform="rotate(52 32 32)"></use>
					<use fill="#D6D6D6" xlink:href="#spinner-path" transform="rotate(54 32 32)"></use>
					<use fill="#D8D8D8" xlink:href="#spinner-path" transform="rotate(56 32 32)"></use>
					<use fill="#DADADA" xlink:href="#spinner-path" transform="rotate(58 32 32)"></use>
					<use fill="#DCDCDC" xlink:href="#spinner-path" transform="rotate(60 32 32)"></use>
					<use fill="#DFDFDF" xlink:href="#spinner-path" transform="rotate(62 32 32)"></use>
					<use fill="#E1E1E1" xlink:href="#spinner-path" transform="rotate(64 32 32)"></use>
					<use fill="#E3E3E3" xlink:href="#spinner-path" transform="rotate(66 32 32)"></use>
					<use fill="#E5E5E5" xlink:href="#spinner-path" transform="rotate(68 32 32)"></use>
					<use fill="#E7E7E7" xlink:href="#spinner-path" transform="rotate(70 32 32)"></use>
					<use fill="#E9E9E9" xlink:href="#spinner-path" transform="rotate(72 32 32)"></use>
					<use fill="#EBEBEB" xlink:href="#spinner-path" transform="rotate(74 32 32)"></use>
					<use fill="#EDEDED" xlink:href="#spinner-path" transform="rotate(76 32 32)"></use>
					<use fill="#F0F0F0" xlink:href="#spinner-path" transform="rotate(78 32 32)"></use>
					<use fill="#F2F2F2" xlink:href="#spinner-path" transform="rotate(80 32 32)"></use>
					<use fill="#F4F4F4" xlink:href="#spinner-path" transform="rotate(82 32 32)"></use>
					<use fill="#F6F6F6" xlink:href="#spinner-path" transform="rotate(84 32 32)"></use>
					<use fill="#F8F8F8" xlink:href="#spinner-path" transform="rotate(86 32 32)"></use>
					<use fill="#FAFAFA" xlink:href="#spinner-path" transform="rotate(88 32 32)"></use>
					<use fill="#FCFCFC" xlink:href="#spinner-path" transform="rotate(90 32 32)"></use>
					<use fill="#FEFEFE" xlink:href="#spinner-path" transform="rotate(92 32 32)"></use>
				</mask>
			</defs>
			<path d="M54.6 47.6c-1.98-1.98-5.09-1.98-7.07 0-8.56 8.56-22.6 8.56-31.1 0-8.56-8.56-8.56-22.6 0-31.1 4.54-5.58-3.25-10.7-7.07-7.07-12.4 12.4-12.4 32.8 0 45.3 12.4 12.4 32.8 12.4 45.3 0 1.98-1.98 1.98-5.09 0-7.07zM32 54c-12.1 0-22-9.9-22-22s9.9-22 22-22c2.8 0 5-2.2 5-5s-2.2-5-5-5C14.4 0 0 14.4 0 32s14.4 32 32 32c7.16-.736 5.26-9.84 0-10z" mask="url(#spinner-mask)"></path>
		</svg>
	</div>
</div>
`,"./app/ui-block/spinner/spinner.html")}.apply(t,r))||(e.exports=a)},85776:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="animated" test="attrs.animated"/>
	<bem:mod name="swiped" test="attrs.underlay"/>

	<fn:if test="attrs.underlay">
		<div bem:elem="underlay" ref="underlay">
			<fn:apply-match name="swipe-underlay"/>
		</div>
		<div bem:elem="underlay-right" ref="underlayRight">
			<fn:apply-match name="swipe-underlay-right"/>
		</div>
	</fn:if>

	<div bem:elem="content-wrapper">
		<div bem:elem="content" ref="content">
			<div bem:elem="header">
				<fn:apply-match name="swipe-header"/>
			</div>
			<div bem:elem="content-element">
				<fn:apply-match name="swipe-content"/>
			</div>
		</div>
	</div>
</div>
`,"./app/ui-block/swipeable/swipeable.html")}.apply(t,r))||(e.exports=a)},34975:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<h2 bem:elem="subject" qa:id="subject">
    <bem:mod name="pony-mode" test="attrs.ponymode"/>
    <fn:value>attrs.subject</fn:value>
</h2>`,"./app/ui-block/thread-subject/thread-subject.html")}.apply(t,r))||(e.exports=a)},16288:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="thread" data-transaction-category="{attrs.model.get('transaction_category')}">
	<fn:var name="message" value="{attrs.model}" />
	<fn:var name="messageSubject" value="{message.get('subject') || i18n(\'<Без темы>\')}" />
	<fn:var name="folders" value="{attrs.folders}" />
	<fn:var name="isDisableEdit" value="{attrs.route.params.part}" />
	<fn:var name="compressed" value="{attrs.ponymode}"/>
	<fn:var name="metadata" value="{message.get('transaction_metadata')}" />
	<fn:var name="actualLettersEnabled" value="{_this.actualLettersEnabled()}"/>
	<fn:var name="reliableSender" value="{message.get('messages.0.headers.X-Mailru-Bimi-Organization')}"/>
	<fn:var name="showAttachList" value="{_this.needHideAttachList() ? attrs.showAttachList : true}"/>
	<bem:mod name="preview" test="attrs['preview-mode']"/>
	<bem:mod name="fluid" test="!attrs.compact"/>
	<bem:mod name="compact" test="attrs.compact"/>
	<bem:mod name="rounded" test="attrs.rounded"/>
	<bem:mod name="touch" test="attrs.touch"/>
	<bem:mod name="no-divider" test="attrs.noDivider"/>
	<bem:mod name="compressed" test="attrs.ponymode"/>

	<div bem:elem="header">
		<div
			bem:elem="selected-count"
			fn:if="attrs.selectedLetterCountText"
		>
			<b:badge text="{attrs.selectedLetterCountText}" size="l"/>
		</div>

		<fn:if test="!attrs['preview-mode']">
			<div bem:elem="meta-header">
				<fn:choose>
					<fn:when test="_this.parentalControlDieEnabled()">
						<b:letter-meta
							type="parent-filter"
							model="{message}"
							use:mediator="letters-actions themes-manager"
						/>
					</fn:when>
					<fn:when test="_this.getMessageFolder().isSpam() && message.get('messages.0.flags.blacklist_spam')">
						<b:letter-meta
							type="spam-blacklist"
							model="{message}"
							use:mediator="letters-actions themes-manager"
						/>
					</fn:when>
					<fn:when test="message.meta('unread-on-open') && _this.isShowPromoPush()">
						<b:letter-meta
							type="promo-push-header"
							model="{message}"
							use:mediator="letters-actions themes-manager"
						/>
					</fn:when>
					<fn:when test="message.meta('unread-on-open') && actualLettersEnabled && this.get('actualReasonFeedback') && message.get('actual_reason')">
						<b:letter-meta
							type="actual-reason-feedback"
							model="{message}"
							use:mediator="letters-actions themes-manager"
						/>
					</fn:when>
					<fn:when test="_this.isShowCategoryFeedbackPlate() && message.meta('unread-on-open')">
						<b:letter-meta
							type="category-feedback"
							model="{message}"
							use:mediator="themes-manager"
							onShowCategoryFeedbackPlate="{_this.onShowCategoryFeedbackPlate.bind(this)}"
						/>
					</fn:when>
					<fn:when test="attrs.showOfficialSender && _this.isOfficialSender(message) && !_this.isTrackingStatusPlate()">
						<b:letter-meta
							type="official-sender"
							model="{message}"
							sender="{reliableSender}"
							use:mediator="themes-manager"
							data-test-id="official-sender-promo"
						/>
					</fn:when>
					<fn:when test="_this.isShowPlateMailingSubscribe() && message.meta('unread-on-open')">
						<b:letter-meta
							type="newsletter-mailing-subscribe"
							model="{message}"
							use:mediator="letters-actions themes-manager"
						/>
					</fn:when>
					<fn:when test="attrs.showReliableSender && _this.isReliableSender(message) && !_this.isTrackingStatusPlate()">
						<b:letter-meta
							type="reliable-sender"
							model="{message}"
							sender="{reliableSender}"
							use:mediator="themes-manager"
							data-test-id="reliable-sender-promo"
						/>
					</fn:when>
					<fn:when test="_this.isFakeDoorFmail18333Visible(message)">
						<b:letter-meta
							type="fake-door-header-fmail-18333"
							model="{message}"
						/>
					</fn:when>
				</fn:choose>
			</div>

			<!-- FMAIL-7550: плашка над письмом для отправителей выбранных доменов -->
			<fn:if test="!_this.isTrackingStatusPlate()">
				<b:promo-domain-die
					model="{message}"
					senderEmail="{_this.getSenderEmail(message)}"
					receivers="{_this.getReceivers(message)}"
					dark-mode="{attrs['dark-mode']}"
				/>
			</fn:if>
		</fn:if>

		<div bem:elem="subject-line">
			<b:thread-subject
				key="{messageSubject}"
				ponymode="{attrs.ponymode}"
				subject="{messageSubject}"
			/>

			<fn:if test="!attrs['disable-category'] && !message.getFolder().isSpam() && !attrs.mobile && !attrs.selectedLetterCountText">
				<fn:if test="message.get('transaction_category')">
					<fn:var name="category" value="{message.get('transaction_category')}"/>
				</fn:if>

				<!-- OCTAVIUS-3672 -->
				<!-- Скрываем категорию event или fees, если есть соответствующая плашка -->
				<fn:var name="hideCategory" value="{_this.isHideCategory(message)}"/>

				<fn:choose>
					<fn:when test="attrs['category-feedback'] && !message.getFolder().isShareTake()">
						<div
							bem:elem="category"
							fn:if="_this.hasCategory(message) && !hideCategory"
						>
							<!-- Смена категории письма, включая письма в метатредах -->
							<b:category-feedback
								model="{message}"
								use:mediator="settings-manager themes-manager"
							/>
						</div>
					</fn:when>
					<fn:otherwise>
						<div
							bem:elem="category"
							fn:if="category && !hideCategory"
						>
							<!-- Плашка категории в письме -->
							<b:letter-category name="{category}" short="{attrs.touch}"/>
						</div>
					</fn:otherwise>
				</fn:choose>
			</fn:if>
		</div>

		<fn:var name="resendData" value="{_this.getResendData()}" />

		<fn:if test="!attrs.isResendDropdownDisabled && resendData">
			<b:react-async
				component="ResendDropdown"
				class-name="thread__resend-dropdown"
				resendFrom="{resendData.from}"
				resendTo="{resendData.to}"
				resendDate="{resendData.date}"
				receivedDate="{resendData.receivedDate}"
				darkMode="{attrs['dark-mode']}"
			/>
		</fn:if>

		<fn:if test="_this.needLetterMeta()">
			<b:letter-meta
				model="{message}"
				metadata="{metadata}"
				ponymode="{attrs.ponymode}"
				calendar="{_this.getFirstCalendarAttach()}"
				needSkeleton="{_this.needLetterMetaSkeleton()}"
				needHideAttach="{_this.needHideAttachList()}"
				remit:render="letter-meta:render"
				remit:letterclick="letter-meta:letterclick"
				remit:toggle-ics="letter-meta:toggle-ics"
				use:mediator="themes-manager layout-manager"
			/>
		</fn:if>
	</div>

	<fn:if test="attrs.hasDraft">
		<fn:var name="draft" value="{attrs.draft}" />
		<div bem:elem="letter">
			<bem:mod name="first"/>
			<bem:mod name="expanded"/>
			<fn:choose>
				<fn:when test="draft">
					<b:letter-list-item
						model="{draft}"
						touch="{attrs.touch}"
						disabled
						draft
						disable-select
						disable-subject
						disable-category
						remit:click="draft:open"
						compressed="{compressed}"
					/>
				</fn:when>
				<fn:otherwise>
					<b:letter-list-item-placeholder
						touch="{attrs.touch}"
						compressed="{compressed}"
					/>
				</fn:otherwise>
			</fn:choose>
		</div>
	</fn:if>

	<fn:for data="attrs.model.get('messages')" as="letter" key="idx">
		<div bem:elem="letter" key="{letter.id}" data-id="{letter.id}" qa:id="thread-letter:{idx + 1}" qa:state="open:{!_this.isCollapsed(letter.id)}"
			 fn:if="!attrs['preview-mode'] || !_this.isCollapsed(letter.id)"
		>
			<fn:var name="isFirst" value="{idx == 0}"/>
			<fn:var name="isLast" value="{attrs.model.get('length') == idx + 1}"/>
			<fn:var name="isSingle" value="{attrs.model.get('length') == 1}"/>
			<fn:var name="isDefaultCollapsed" value="{!attrs.model.canUnfoldMessage(letter)}"/>
			<fn:var name="isPrevCollapsed" value="{_this.isPrevCollapsed(idx)}"/>
			<fn:var name="isNextCollapsed" value="{_this.isNextCollapsed(idx)}"/>
			<fn:var name="isSticky" value="{_this.isSticky(letter.id)}"/>
			<fn:var name="isExpanded" value="{!_this.isCollapsed(letter.id)}"/>
			<fn:var name="datesMetadata" value="{_this._formDatesMetadata()}"/>

			<bem:mod name="expanded" test="isExpanded"/>
			<bem:mod name="expanded-next" test="!isNextCollapsed"/>
			<bem:mod name="expanded-prev" test="!isFirst && !isPrevCollapsed"/>
			<bem:mod name="collapsed" test="_this.isCollapsed(letter.id) && !attrs['preview-mode']"/>
			<bem:mod name="collapsed-next" test="isNextCollapsed"/>
			<bem:mod name="first" test="isFirst"/>
			<bem:mod name="last" test="isLast"/>
			<bem:mod name="single" test="isSingle"/>

			<fn:if test="!_this.isCollapsed(letter.id)">
				<b:letter
					route="{attrs.route}"
					router="{attrs.router}"
					model="{letter}"
					parentThread="{attrs.model}"
					folders="{folders}"
					autoread="{letter.isDataFully() && !attrs['preview-mode']}"
					allow-collapse="{attrs.model.get('length') > 1 && !attrs['preview-mode']}"
					readonly="{attrs['preview-mode']}"
					single="{isSingle}"
					collapsed-default="{isDefaultCollapsed}"
					first="{isFirst}"
					last="{isLast}"
					touch="{attrs.touch}"
					sticky="{_this.isStickyEnabled() && isSticky && attrs.sticky}"
					showfolder="{attrs.model.get('folder') != letter.get('folder')}"
					quotes-collapsed-default="{!isLast}"
					disable-category
					disable-edit="{isDisableEdit}"
					compactTranslator="{attrs.compact}"
					ponymode="{compressed}"
					dark-mode="{attrs['dark-mode']}"
					expanded-next="{!isNextCollapsed}"
					selectMode="{!!attrs.selectedLetterCountText}"
					preview-mode="{attrs['preview-mode']}"
					dates-metadata="{datesMetadata}"
					transaction-metadata="{metadata}"
					showAttachList="{showAttachList}"

					use:mediator="user-info layout-manager settings-filters-manager attachments-manager calendar-manager translator-manager addressbook-manager share-folders-manager settings-manager calls-manager marusia-manager thread-scroller"

					remit:clickhead="letter:close"
					remit:attaches:expanded="letter:expand:attaches"
					remit:attaches:collapsed="letter:collapsed:attaches"
					remit:resize="letter:resize"
					remit:letter-force-recalc="force:recalc"
					remit:translator:scrollto="translator:scrollto"
					event:details="letter"
				/>
			</fn:if>
			<fn:if test="_this.isCollapsed(letter.id) && !attrs['preview-mode']">
				<div
					remit:click="letter:open"
					event:details="letter"
				>
				<fn:choose>
					<fn:when test="attrs.touch">
						<!-- touch 2pane -->
						<b:react-async
								component="ListLetterCommonTouch"
								in-thread
								disable-subject
								disable-select
								key="{letter.id}"
								first="{isFirst || !isPrevCollapsed}"
								last="{isLast || !isNextCollapsed}"
								pony-mode="{compressed}"
								model="{letter}"
								main-field="from"
								showfolder="{attrs.model.get('folder') != letter.get('folder')}"
								welter="{false}"
								remit:contextmenu="letter:rightclick"
								event:details="letter"
								use:mediator="letters-actions"
						/>
					</fn:when>

					<fn:otherwise>
						<!-- desktop 2pane  -->
						<b:list-letter-common
								in-thread
								disable-subject
								disable-select
								disable-avatar-hover
								enable-user-select
								key="{letter.id}"
								first="{isFirst || !isPrevCollapsed}"
								last="{isLast || !isNextCollapsed}"
								pony-mode="{compressed}"
								model="{letter}"
								main-field="from"
								showfolder="{attrs.model.get('folder') != letter.get('folder')}"
								welter="{false}"
								remit:contextmenu="letter:rightclick"
								event:details="letter"
								use:mediator="letters-actions layout-manager"
								layout-mode="2pane"
								dark-mode="{attrs['dark-mode']}"
						/>
					</fn:otherwise>
				</fn:choose>
				</div>
			</fn:if>

			<!-- Широкий разделитель только вокруг раскрытого треда -->
			<b:delimeter fn:if="!attrs['preview-mode']" full="{isExpanded || !isPrevCollapsed}"/>
		</div>
	</fn:for>

	<div bem:elem="rounding-footer wrapper">
		<div bem:elem="rounding-footer" fn:if="_this.usePortalSearchPanel()"></div>
	</div>

	<fn:choose>
		<fn:when test="attrs.kaspersky && !attrs['preview-mode']">
			<div bem:elem="footer">
				<div bem:elem="kaspersky">
					<b:react-async
						component="KasperskyLogo"
						isEngLogo="{_this.isEngKasperskyLogo()}"
						onLogoLinkClick="{_this.onKasperskyLogoClick}"
						contrast="{!(attrs.isDarkDefaultMode || attrs.isLightDefaultMode)}"
					/>
				</div>
			</div>
		</fn:when>

		<fn:otherwise>
			<div bem:elem="footer" bem:mod="empty"/>
		</fn:otherwise>
	</fn:choose>

	<b:react-async
		fn:if="!attrs.mobile && (attrs.showSelectionContextMenuIntegration || attrs.sendSelectionTextIntegrationRadar)"
		component="ContextMenuPositionManager"
		letterModel="{_this.get('model').get('messages.0')}"
	/>
</div>
`,"./app/ui-block/thread/thread.html")}.apply(t,r))||(e.exports=a)},9972:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<bem:mod name="hidden" test="attrs.hidden"/>
	<bem:mod name="break-word" test="attrs['break-word']"/>

	<div bem:elem="content">
		{attrs.content}
	</div>
	<div fn:if="attrs.hint" bem:elem="hint">
		{attrs.hint}
	</div>
</div>
`,"./app/ui-block/tooltip-overlay/tooltip-overlay.html")}.apply(t,r))||(e.exports=a)},71654:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="tooltip" data-container-id="tooltip-container">
	<b:tooltip-overlay
		content="{attrs.content}"
		hint="{attrs.hint}"
		hidden="{attrs.hidden}"
		quick-switch="{attrs['quick-switch']}"
		target="{attrs.target}"
	/>
</div>
`,"./app/ui-block/tooltip/tooltip.html")}.apply(t,r))||(e.exports=a)},70045:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div>
	<b:select
		remit:item-click="language-change"
		selected-index="{_this.getSelectedIndex()}"
		disabled-index="{_this.getDisabledIndex()}"
		items="{_this.getItems()}"
	>
		<fn:match
			name="control"
			args="selectedText, selectedItem, selectedIndex, expanded"
		>
			<div
				bem:elem="custom_control"
				remit:click="control-click"
				disabled="{attrs.disabled}"
			>
				<bem:mod name="pressed" test="expanded" />
				<bem:mod name="pony-mode" test="attrs.ponymode" />
				<bem:mod name="compact" test="attrs.compact" />

				<span bem:elem="text" qa:id="folder-name-filter">
					<fn:value>_this.getText(selectedText)</fn:value>
				</span>

				<!-- Стрелка -->
				<div bem:elem="icon">
					<b:ico name="navigation:drop_down_small" size="s" />
				</div>
			</div>
		</fn:match>
	</b:select>
</div>
`,"./app/ui-block/translator-select/translator-select.html")}.apply(t,r))||(e.exports=a)},93798:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="translator" xmlns:b="http://www.w3.org/1999/html" ref="translator">
	<!-- Переменные -->
	<fn:var name="disabled" value="{attrs.loading}" />
	<fn:var name="ponymode" value="{attrs.ponymode}" />
	<fn:var
		name="enableHideTranslator"
		value="{_this.getEnableHideTranslator()}"
	/>

	<!-- Модификаторы -->
	<bem:mod name="pony-mode" test="ponymode" />
	<bem:mod name="disabled" test="disabled" />

	<fn:if test="!attrs.promtLogoWithAdDropdown">
		<div bem:elem="icon">
			<bem:mod name="pony-mode" test="ponymode" />
			<b:react-async component="PromtTooltip" />
		</div>
	</fn:if>

	<div bem:elem="wrapper">
		<!-- Ошибка -->
		<fn:if test="attrs.error">
			<div bem:elem="error">{i18n(\'Не удалось перевести текст\')}</div>
		</fn:if>

		<!-- Выбор языка перевода -->
		<fn:if test="!attrs.error">
			<div bem:elem="title">{i18n(\'Перевод\')}:</div>

			<b:translator-select
				remit:language-change="from:change"
				selected="{attrs['from-selected']}"
				disabled="{disabled}"
				disabled-item="{_this.getTo()}"
				compact="{attrs.compact}"
				containerRef="{_this.refs.translator}"
				id="from"
				qa:id="from"
				ponymode="{ponymode}"
			/>

			<b:button2
				remit:click="reverse:click"
				qa:id="swap"
				ico="navigation:arrow_swipe"
				ponymode="{ponymode}"
				pure
				disabled="{disabled}"
				centered
				compact
			/>

			<b:translator-select
				remit:language-change="to:change"
				selected="{attrs['to-selected']}"
				disabled="{disabled}"
				disabled-item="{_this.getFrom()}"
				compact="{attrs.compact}"
				containerRef="{_this.refs.translator}"
				id="to"
				qa:id="to"
				ponymode="{ponymode}"
			/>

			<fn:if test="attrs.promtLogoWithAdDropdown">
				<div bem:elem="spinner">
					<bem:mod name="hidden" test="!disabled" />
					<b:spinner size="xxs" color="primary" />
				</div>

				<div bem:elem="translate">
					<b:button-link
						remit:click="translate:click"
						disabled="{disabled}"
						ponymode="{ponymode}"
						qa:id="translate"
						text="{_this.getText()}"
					/>
				</div>
			</fn:if>
		</fn:if>

		<!-- Правый край -->
		<div bem:elem="right">
			<fn:if test="!attrs.promtLogoWithAdDropdown">
				<div bem:elem="spinner" fn:if="disabled">
					<b:spinner size="xxs" color="primary" />
				</div>

				<div bem:elem="translate">
					<b:button-link
						remit:click="translate:click"
						disabled="{disabled}"
						ponymode="{ponymode}"
						qa:id="translate"
						text="{_this.getText()}"
					/>
				</div>
			</fn:if>
			<fn:if test="attrs.promtLogoWithAdDropdown">
				<div bem:elem="icon">
					<bem:mod name="pony-mode" test="ponymode" />
					<bem:mod name="withAdDropdown" test="attrs.promtLogoWithAdDropdown" />
					<b:react-async component="PromtTooltip" />
				</div>
			</fn:if>

			<div bem:elem="close">
				<bem:mod name="nearAdDropdown" test="attrs.promtLogoWithAdDropdown" />
				<b:button2
					fn:if="!enableHideTranslator"
					qa:id="close"
					remit:click="button-close:click"
					ponymode="{ponymode}"
					ico="actions:close"
					centered
					compact
					pure
				/>
				<b:dropdown
					fn:if="enableHideTranslator"
					qa:id="dropdown"
					ico="actions:close"
					ponymode
					pure
					remit:dropdown-change-state="dropdown-change"
				>
					<fn:match name="items">
						<b:list qa:id="translator-hide-list">
							<b:list-item qa:id="hide" remit:click="hide:click">
								{i18n(\'Не предлагать перевод\')}
							</b:list-item>
							<b:list-item qa:id="close" remit:click="dropdown-close:click">
								{i18n(\'Закрыть\')}
							</b:list-item>
						</b:list>
					</fn:match>
				</b:dropdown>
			</div>
		</div>
	</div>
</div>
`,"./app/ui-block/translator/translator.html")}.apply(t,r))||(e.exports=a)},95250:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<div qa:id="webview-mobile-header">
	<fn:var name="selectMode" value="{attrs.selectMode}" />
	<fn:var name="searchMode" value="{attrs.searchMode}" />
	<fn:var
		name="readMode"
		value="{attrs.route.is('#read-letter #search-letter') && !selectMode && !attrs.letterNotFound}"
	/>

	<fn:var name="readActions" value="{_this.getReadActions()}" />
	<fn:var name="unreadCount" value="{_this.getUnreadCount()}" />
	<fn:var name="selectedCount" value="{_this.getSelectedCount()}" />
	<fn:var name="selectedStats" value="{_this.getSelectedStats()}" />
	<fn:var name="letterId" value="{attrs.letter && attrs.letter.id}" />
	<bem:mod
		name="enable-footer-app-toolbar"
		test="!attrs['disable-footer-app-toolbar']"
	/>

	<div fn:if="attrs['disable-footer-app-toolbar']" bem:elem="element">
		<b:button2
			qa:id="open-sidebar"
			ico="navigation:menu"
			remit:click.prevent="folders:open"
			centered
			pure
		/>

		<fn:if test="!attrs['hide-webview-title']">
			<span bem:elem="title">{i18n(\'Почта\')}</span>
		</fn:if>

		<b:button2
			qa:id="open-compose"
			ico="actions:add_big"
			remit:click="compose:new"
			centered
			pure
		/>
	</div>

	<div bem:elem="controls">
		<bem:mod name="searchMode" test="searchMode"/>
		<bem:mod name="selectMode" test="selectMode"/>

		<fn:if test="!selectMode && !readMode && !searchMode">
			<div bem:elem="filters">
				<span
					bem:elem="folder-name"
					qa:id="folder-name:name:{attrs.folder.get('name')}"
				>
					{attrs.folder.get('name')}
					<fn:if test="unreadCount > 0">
						<span bem:elem="unread-count"> {unreadCount} </span>
					</fn:if>
				</span>

				<b:filters
						qa:id="filters"
						use:mediator="filter-manager layout-manager settings-manager advert-manager todo-manager"
						folder="{attrs.folder}"
						short
						touch
						autochange="{false}"
						pure
						iconOnly
						alignLeft
						has-metathreads-settings="{attrs['has-metathreads-settings']}"
				/>
			</div>

			<fn:if test="attrs['enable-mobile-search-button']">
				<b:button2
						remit:click="search"
						ico="search"
						qa:id="search"
						compact
						pure
						size="m"
						short
						ico-text-top
						centered
				/>
			</fn:if>
		</fn:if>
		<fn:if test="selectMode">
			<span bem:elem="select-button">
				<b:button2
					remit:click="select:drop"
					use:mixin="shortcut-title"
					map="toolbar"
					ico="close"
					qa:id="deselect-all-close"
					short
					pure
					size="m"
				/>

				<b:button2
					fn:if="!attrs.deselectAll"
					remit:click="select:all"
					explanation="{i18n(\'Выделить все\')}"
					disabled="{attrs.disabled}"
					ico="select-all"
					qa:id="select-all"
					pure
					size="m"
					centered
					has-explanation="{selectedCount}"
					text="{selectedCount}"
				/>

				<b:button2
					fn:if="attrs.deselectAll"
					remit:click="select:drop"
					use:mixin="shortcut-title"
					explanation="{i18n(\'Снять выделение\')}"
					map="toolbar"
					ico="select-all"
					qa:id="deselect-all"
					pure
					size="m"
					has-explanation="{selectedCount}"
					text="{selectedCount}"
				/>
			</span>

			<div bem:elem="select-actions">
				<b:button2
					remit:click="remove"
					event:details="{selection:true}"
					ico="delete"
					qa:id="delete"
					compact
					pure
					size="m"
					short
					ico-text-top
					centered
				/>

				<b:button2
					remit:click="move:click"
					ico="folder-move"
					qa:id="move-to-folder"
					compact
					pure
					touch-nav
					disabled="{!_this.isEnableMove()}"
					size="m"
					short
					ico-text-top
					centered
				/>

				<b:button2
					fn:if="attrs.folder.isSpam()"
					remit:click="unspam"
					event:details="{selection:true}"
					ico="spam-off"
					qa:id="spam-off"
					compact
					pure
					size="m"
					short
					ico-text-top
					centered
				/>

				<b:dropdown-actions
					use:mixin="shortcut-title"
					use:mediator="layout-manager settings-filters-manager calendar-manager translator-manager calls-manager letters-selection"
					qa:id="more"
					model="{attrs.letter}"
					folder="{attrs.folder}"
					ico="more-hor"
					read="{selectedStats.unread > 0}"
					unread="{selectedStats.read > 0}"
					flag="{selectedStats.noflagged > 0}"
					unflag="{selectedStats.flagged > 0}"
					forward="{!selectedStats.metathread}"
					spam="{!selectedStats.metathread && ((readMode && !attrs.folder.isSpam()) || selectedStats.nospam > 0)}"
					unspam="{attrs.folder.isSpam()}"
					archive="{!attrs.folder.isArchive()}"
					create-filter
					disable-expand-top
					disable-expand-center
					pure
					short
					ico-text-top
					selection-actions
					size="m"
					touch
				/>
			</div>
		</fn:if>

		<fn:if test="readMode">
			<b:button2
				remit:click="letter:back"
				text="{i18n(\'Вернуться\')}"
				ico="arrow-back"
				qa:id="letter_back"
				pure
				use:mediator="thread-manager"
				short
			/>

			<div>
				<fn:for data="readActions" as="item">
					<b:portal-menu-element
						fn:if="!item.hasOwnProperty('if') || item.if"
						key="{item.type}"
						type="{item.type}"
						short="{item.short}"
						disabled="{item.disabled ? true : item.disabled !== false && isDisableEdit}"
						letter-id="{letterId}"
						letter="{attrs.letter}"
						read="{item.read}"
						unread="{item.unread}"
						flag="{item.flag}"
						unflag="{item.unflag}"
						archive="{item.archive}"
						spam="{item.spam}"
						unspam="{item.unspam}"
						move="{item.move}"
						forward="{item.forward}"
						create-filter="{item['create-filter']}"
						store="{attrs.model}"
						use:mediator="letters-selection"
						touch-nav
						touch
					/>
				</fn:for>
			</div>
		</fn:if>
	</div>
	<div bem:elem="search">
		<bem:mod name="searchMode" test="searchMode"/>
		<b:react-async
			component="SearchMobilePanel"
			search="{attrs.store.search}"
			setSearchMode="{_this.setSearchMode}"
			searchMode="{searchMode}"
		/>
	</div>
</div>
`,"./app/ui-block/webview-mobile-header/webview-mobile-header.html")}.apply(t,r))||(e.exports=a)},96937:function(e,t,n){var r,a;r=[n(18440)],void 0===(a=function(e){return e.smartParse(e.__FEAST_TEMPLATE__`<span qa:state="{attrs['pony-mode'] && 'pony-mode'}"
	  xmlns:fn="http://www.w3.org/1999/html">
	<!-- Variables -->
	<fn:var name="title" value="{_this.getTitleByType(attrs.type)}" />
	<fn:var name="dataTitleShortcut" value="{attrs['title-shortcut']}" fn:if="!attrs.dropDownMode && attrs['title-shortcut']"/>
	<fn:var name="showTitle" value="{attrs.dropDownMode || attrs.showTitle}" />
	<fn:var name="hasPayBadge" value="{attrs.billsCount && attrs.billsCount.total && showTitle && attrs.type === 'pay'}" />
	<fn:var name="tooltipTitle" value="{_this.getTooltipTitle(attrs.type, showTitle)}" />
	<fn:var name="widgetIco" value="{_this.getIcoByType(attrs.type)}" />

	<bem:mod name="pony-mode" test="attrs['pony-mode']"/>
	<bem:mod name="dropdown" test="attrs.dropDownMode"/>
	<bem:mod name="list" test="attrs.showTitle"/>

	<fn:match name="block" args="type">
		<a bem:elem="link" target="{_this.getTargetByType(type)}" rel="noopener"
		   remit:click="click-on-link" data-qa-id="{_this.getQaIdByType(type)}"
		   promo:id="{_this.getPromoIdByType(type)}">
			<bem:mod name="dropdown" test="attrs.dropDownMode"/>
			<fn:attr name="href" value="{_this.getLinkByType(type)}"/>

			<fn:attr name="data-shortcut" value="{_this.getShortcutByType(type)}" test="_this.getShortcutByType(type)" />
			<fn:add-class name="js-shortcut" test="_this.getShortcutByType(type)" />

			<!-- TODO: переписать два bem:elem="ico" в один -->
			<!-- "Красный прыщик" на иконке виджета -->
			<b:notification-badge
				fn:if="attrs['notification-badge']"
				show="{true}"
				ponymode="{attrs['pony-mode']}"
				top="2"
				right="3"
				radar-id="{attrs['notification-badge']}"
			>
				<fn:match name="content" bem:block="widget">
					<span bem:elem="ico" qa:id="widget-icon-{attrs.type}">
						<bem:mod name="{type}{_this.getImageVariantByType(type)}" test="!widgetIco"/>
						<b:ico fn:if="widgetIco" name="{widgetIco}"/>
					</span>
				</fn:match>
			</b:notification-badge>

			<span bem:elem="ico" fn:if="!attrs['notification-badge']" qa:id="widget-icon-{attrs.type}">
				<bem:mod name="{type}{_this.getImageVariantByType(type)}" test="!widgetIco"/>
				<b:ico fn:if="widgetIco" name="{widgetIco}"/>
			</span>

			<fn:if test="showTitle">
				<span qa:id="widget-title-{attrs.type}" class="widget__title">{title}</span>
			</fn:if>
			<b:badge
				fn:if="hasPayBadge"
				text="{_this.getTotalBillsCount()}"
				size="{attrs['nav-short'] ? attrs.ponymode ? 'xs' : 's' : 'l'}"
				transparent
				qa:id="widget-badge"
			/>
		</a>
	</fn:match>
	<fn:attr name="title" value="{tooltipTitle}" fn:if="tooltipTitle" />
	<fn:choose>
		<fn:when test="attrs.type === 'calendar'">
			<b:widget-calendar
				title="{showTitle ? title : ''}"
				pony-mode="{attrs['pony-mode']}"
				dropdown-mode="{attrs.dropDownMode}"
				variant="{_this.getImageVariantByType(attrs.type)}"
				remit:click="click-on-link"
			/>
		</fn:when>

		<fn:otherwise>
			<fn:apply-match name="block" args="attrs.type"/>

			<fn:attr name="data-title-shortcut" value="{dataTitleShortcut}" test="dataTitleShortcut"/>
		</fn:otherwise>
	</fn:choose>
</span>
`,"./app/ui-block/widget/widget.html")}.apply(t,r))||(e.exports=a)},20919:function(e,t,n){var r={"./layer-addressbook/layer-addressbook":[56195,6195],"./layer-addressbook/layer-addressbook.js":[56195,6195],"./layer-attach-violated-file-name/layer-attach-violated-file-name":[30222,222],"./layer-attach-violated-file-name/layer-attach-violated-file-name.ts":[30222,222],"./layer-captcha/layer-captcha":[15841,5841],"./layer-captcha/layer-captcha.js":[15841,5841],"./layer-change-language/layer-change-language":[54143,4143],"./layer-change-language/layer-change-language.js":[54143,4143],"./layer-choose-save-folder/layer-choose-save-folder":[12375,2375],"./layer-choose-save-folder/layer-choose-save-folder.ts":[12375,2375],"./layer-cleanmaster-modal/layer-cleanmaster-modal":[42790,2790],"./layer-cleanmaster-modal/layer-cleanmaster-modal.ts":[42790,2790],"./layer-cloud-create-folder/layer-cloud-create-folder":[3567,3567],"./layer-cloud-create-folder/layer-cloud-create-folder.js":[3567,3567],"./layer-cloud-license/layer-cloud-license":[11616,1616],"./layer-cloud-license/layer-cloud-license.js":[11616,1616],"./layer-cloud-unavailable/layer-cloud-unavailable":[38061,8061],"./layer-cloud-unavailable/layer-cloud-unavailable.js":[38061,8061],"./layer-compose-template-select/layer-compose-template-select":[14794,4794],"./layer-compose-template-select/layer-compose-template-select.ts":[14794,4794],"./layer-confirm-clear-folder/layer-confirm-clear-folder":[13944],"./layer-confirm-clear-folder/layer-confirm-clear-folder.js":[13944],"./layer-confirm-delete-folder/layer-confirm-delete-folder":[63225,3225],"./layer-confirm-delete-folder/layer-confirm-delete-folder.ts":[63225,3225],"./layer-confirm-folder-clear/layer-confirm-folder-clear":[76090,6090],"./layer-confirm-folder-clear/layer-confirm-folder-clear.js":[76090,6090],"./layer-confirm-folder-readed/layer-confirm-folder-readed":[27714,7714],"./layer-confirm-folder-readed/layer-confirm-folder-readed.js":[27714,7714],"./layer-confirm-move-to-spam/layer-confirm-move-to-spam":[47477,7477],"./layer-confirm-move-to-spam/layer-confirm-move-to-spam.ts":[47477,7477],"./layer-confirm-set-theme/layer-confirm-set-theme":[50097,97],"./layer-confirm-set-theme/layer-confirm-set-theme.js":[50097,97],"./layer-confirm-tomyself-enable/layer-confirm-tomyself-enable":[31580,1580],"./layer-confirm-tomyself-enable/layer-confirm-tomyself-enable.ts":[31580,1580],"./layer-create-folder/layer-create-folder":[41759,1759],"./layer-create-folder/layer-create-folder.ts":[41759,1759],"./layer-deny-shared-folder/layer-deny-shared-folder":[25205,5205],"./layer-deny-shared-folder/layer-deny-shared-folder.ts":[25205,5205],"./layer-disable-metathread/layer-disable-metathread":[69583,9583],"./layer-disable-metathread/layer-disable-metathread.js":[69583,9583],"./layer-edit-settings-filter/layer-edit-settings-filter":[15048,5048],"./layer-edit-settings-filter/layer-edit-settings-filter.ts":[15048,5048],"./layer-explorer-from-cloud/layer-explorer-from-cloud":[86157,4131,1937,2464,2106,6157],"./layer-explorer-from-cloud/layer-explorer-from-cloud.js":[86157,4131,1937,2464,2106,6157],"./layer-explorer-from-filesearch/layer-explorer-from-filesearch":[23386,4131,1937,2464,2106,3386],"./layer-explorer-from-filesearch/layer-explorer-from-filesearch.js":[23386,4131,1937,2464,2106,3386],"./layer-explorer-to-cloud/layer-explorer-to-cloud":[1321,4131,1937,2464,2106,1321],"./layer-explorer-to-cloud/layer-explorer-to-cloud.ts":[1321,4131,1937,2464,2106,1321],"./layer-feedback-nps/layer-feedback-nps":[42929,2929],"./layer-feedback-nps/layer-feedback-nps.ts":[42929,2929],"./layer-html-viewer/layer-html-viewer":[2070,2070],"./layer-html-viewer/layer-html-viewer.js":[2070,2070],"./layer-iframe/layer-iframe":[39899,9899],"./layer-iframe/layer-iframe.ts":[39899,9899],"./layer-letter-redirect/layer-letter-redirect":[48642,8642],"./layer-letter-redirect/layer-letter-redirect.ts":[48642,8642],"./layer-max-attach-count/layer-max-attach-count":[50336,336],"./layer-max-attach-count/layer-max-attach-count.js":[50336,336],"./layer-metathreads-settings/layer-metathreads-settings":[45043,5043],"./layer-metathreads-settings/layer-metathreads-settings.ts":[45043,5043],"./layer-missing-attach/layer-missing-attach":[65786,5786],"./layer-missing-attach/layer-missing-attach.js":[65786,5786],"./layer-mobile/layer-mobile":[80178],"./layer-mobile/layer-mobile.js":[80178],"./layer-moneta/layer-moneta":[86318,6318],"./layer-moneta/layer-moneta.ts":[86318,6318],"./layer-move-to-folder/layer-move-to-folder":[23712],"./layer-move-to-folder/layer-move-to-folder.js":[23712],"./layer-oversize-attach-cancel/layer-oversize-attach-cancel":[92826,2826],"./layer-oversize-attach-cancel/layer-oversize-attach-cancel.ts":[92826,2826],"./layer-promo-enabled-push/layer-promo-enabled-push":[33390,3390],"./layer-promo-enabled-push/layer-promo-enabled-push.ts":[33390,3390],"./layer-reattach-to-reply/layer-reattach-to-reply":[30108,108],"./layer-reattach-to-reply/layer-reattach-to-reply.js":[30108,108],"./layer-secure-folder/layer-secure-folder":[50319,319],"./layer-secure-folder/layer-secure-folder.ts":[50319,319],"./layer-sent-page/layer-sent-page":[72387,2387],"./layer-sent-page/layer-sent-page.ts":[72387,2387],"./layer-share-folder-action/layer-share-folder-action":[18783,8783],"./layer-share-folder-action/layer-share-folder-action.ts":[18783,8783],"./layer-share-folder/layer-share-folder":[27877,7877],"./layer-share-folder/layer-share-folder.ts":[27877,7877],"./layer-share-opportunities/layer-share-opportunities":[65061,5061],"./layer-share-opportunities/layer-share-opportunities.ts":[65061,5061],"./layer-shortcut/layer-shortcut":[80976,976],"./layer-shortcut/layer-shortcut.ts":[80976,976],"./layer-unsafe-attach/layer-unsafe-attach":[56181,6181],"./layer-unsafe-attach/layer-unsafe-attach.js":[56181,6181],"./layer-window/layer-window":[55220],"./layer-window/layer-window.ts":[55220]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=20919,e.exports=a},75063:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return es}});var r={};n.r(r),n.d(r,{default:function(){return Fe}});var a={};n.r(a),n.d(a,{default:function(){return Ue}});var i={};n.r(i),n.d(i,{default:function(){return Be}});var o={};n.r(o),n.d(o,{DateFormat:function(){return Ze},DateHelper:function(){return je}});var s={};n.r(s),n.d(s,{default:function(){return Ve}});var l={};n.r(l),n.d(l,{default:function(){return ze}});var c={};n.r(c),n.d(c,{createScopeStorage:function(){return Ye.Vq},createSessionStorage:function(){return Ye.fo},default:function(){return Ke}});var d={};n.r(d),n.d(d,{default:function(){return tt}});var u={};n.r(u),n.d(u,{default:function(){return at}});var f={};n.r(f),n.d(f,{default:function(){return ot}});var m={};n.r(m),n.d(m,{default:function(){return vt}});var h={};n.r(h),n.d(h,{default:function(){return bt}});var p={};n.r(p),n.d(p,{default:function(){return Tt}});n(25377),n(16655),n(32845),n(8751),n(45970),n(50863),n(40055),n(56995),n(53242),n(53523),n(25299),n(46101),n(29074),n(15911),n(19942),n(23253),n(91709),n(432),n(40979),n(98820),n(48953),n(66668),n(26433),n(74443),n(39181),n(36189),n(9851),n(82145),n(93034),n(97378),n(94963),n(62874),n(58503),n(69816),n(21250),n(15857),n(93484),n(96564),n(76294),n(27803),n(41017),n(45934),n(26850),n(44750),n(27253),n(65129),n(5123),n(56785),n(72282),n(44552),n(26486),n(56252),n(72380),n(17625),n(97448),n(21292),n(90803),n(69165),n(69151),n(69547),n(58482),n(76642),n(17325),n(33739),n(8872),n(85603),n(29282),n(89869),n(22071),n(88513),n(87492),n(30144),n(73357),n(44261),n(6408),n(90760),n(48902),n(23920),n(7498),n(33419),n(19945),n(24522),n(37692),n(11035),n(97740),n(85021),n(51174),n(52560),n(12660),n(79055),n(37039),n(19371),n(18923),n(4631),n(18599),n(29001),n(8264),n(25227),n(47678),n(35160),n(25612),n(40986),n(9904),n(60742),n(25259),n(69608),n(50481),n(94343),n(86063),n(90483),n(86897),n(20619),n(88780),n(19523),n(19070),n(14677),n(55789),n(10924),n(97240),n(64219),n(60531),n(2977),n(32461),n(9575),n(89164),n(8838),n(32965),n(76554),n(62031),n(11054),n(33460),n(7983),n(31715),n(29056),n(34551),n(66683),n(95828),n(2820),n(90033),n(50239),n(42434),n(47870),n(2786),n(12641),n(86046),n(33876),n(26705),n(70853),n(21844),n(94006),n(82504),n(75096),n(31631),n(43564),n(15423),n(42421),n(99577),n(96423),n(70927),n(92560),n(48097),n(9475),n(58276),n(75562),n(81685),n(90195),n(7609),n(23184),n(30501),n(54731),n(27049),n(53306),n(63842),n(76528),n(89042),n(84375),n(93731),n(23458),n(53840),n(51930),n(28645),n(77345),n(91758),n(54792),n(58902),n(13667),n(39367),n(6187),n(17774),n(31949),n(8008),n(94863),n(29149),n(64894),n(98764),n(64806),n(52820),n(76713),n(12596),n(7292),n(44813),n(59640),n(83585),n(56501),n(84221),n(64792),n(3991),n(12035),n(25695),n(16035),n(94495),n(42824),n(32222),n(6883),n(85381),n(89232),n(95257),n(43709),n(16904),n(86964),n(2162),n(53653),n(45185),n(26025),n(32897),n(34451),n(58083),n(18551),n(46172),n(67246),n(72190),n(55438),n(57011),n(91363),n(75624),n(41439),n(7545),n(83395),n(26356),n(61361),n(76125),n(6956),n(79595),n(70046),n(25647),n(46349),n(83845),n(32004),n(69511),n(29956),n(93970),n(78187),n(91834),n(81010),n(81877),n(51587),n(12516),n(33204),n(57881),n(29369),n(55955),n(95530),n(14474),n(75236),n(50530),n(79171),n(94033),n(39354),n(56548),n(96919),n(81075),n(59930),n(57267),n(87854),n(4759),n(90504),n(81845),n(34764),n(86558),n(9478),n(27031),n(2074),n(73903),n(81620),n(16141),n(75706),n(78524),n(74781),n(82996),n(56573),n(27273),n(33380),n(28294),n(74589),n(59445),n(72781),n(26253),n(47302),n(83076);var g=n(17717),v=n.n(g);v().import(window.sotaConfig.flags);var _=n(19275),b=n(50987),E=n(66423),y=n.n(E);b.Z.get("api").forEach((function(e){if(y().mock.once(e.method,e.data),"/api/v1/helpers"===e.method)v().add(e.data&&e.data.body);if("/api/v1/user/short"===e.method)_.Z.themeId=e.data.body.theme}));var T,A,S=n(18440),O=n.n(S);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}if(O().set({renderRefAttributes:!1,useTryCatch:!(null===(T=window.features)||void 0===T?void 0:T.has("disable-feast-try-catch"))}),null===(A=window.__cfgOptions)||void 0===A?void 0:A.qa)!function(e){function t(e,t){return function(n,r,a,i){if(0===i.name.indexOf("b:"))return function(e,t,n){if(e.parent&&e.parent.name===t)e.parent.attrs=n(e.parent.attrs);else e.wrap(t,n({}))}(i,"qa-wrapper",t=>w(w({},t),{},{[e]:r})),-1;else return a[t]=r,!1}}e.tags["@qa:id"]=t("id","data-qa-id"),e.tags["@qa:state"]=t("state","data-qa-state"),e.tags["@qa:index"]=t("index","data-qa-index"),e.tags["qa-wrapper"]={scope:!0,toCode:()=>["var __nsId = $id, __nsState = $state, __nsIndex = $index, __nsIdx = @@.children.length;",'(__nsId !== undefined) && __vdom.nsIdSetDomAttr(@@.children[__nsIdx], "'.concat("data-qa-id",'", __nsId) || ')+'(__nsState !== undefined) && __vdom.nsIdSetDomAttr(@@.children[__nsIdx], "'.concat("data-qa-state",'", __nsState) || ')+'(__nsIndex !== undefined) && __vdom.nsIdSetDomAttr(@@.children[__nsIdx], "'.concat("data-qa-index",'", __nsIndex);')]},e.vdom.nsIdSetDomAttr=function(e,t,n){if(e){if(!e.events)e.events={};var r=e.events.$created||[],a=e.events.$subtreeModified||[];e.events.$created=[].concat(r,e=>{e.target.setAttribute(t,n)}),e.events.$subtreeModified=[].concat(a,e=>{e.target.setAttribute(t,n)})}}}(O());else O().vdom.tags["@qa:id"]=function(){return!1},O().vdom.tags["@qa:state"]=function(){return!1};var k=n(43197),I=n(68399),R=n(332),D=n.n(R),M=n(21528),P=n(18199),N=n.n(P),x=n(50),F=n.n(x),U=n(4872),H=n.n(U),B=n(50241),Z=n.n(B),G=n(57463),q=n.n(G),j=n(25709),W=n.n(j),V=n(39939),z=n(36889),Y=n.n(z),K=n(94389),X=n(21211),Q=n(50542),J=n(63062),$=n(47759),ee=n(50375),te=n(98448),ne=n(78267),re=n(5339),ae=n(31744),ie=n(24583),oe=n(57147),se=n(15907),le=n(19352),ce=n(88570),de=n(82646),ue=n(99150),fe=n(96387),me=n(4183),he=n(47596),pe=n.n(he),ge=n(64854),ve=n.n(ge),_e=n(91777),be=n.n(_e),Ee=n(97683),ye=n.n(Ee),Te=n(43572),Ae=n.n(Te),Se=n(96911),Oe=n.n(Se),Ce=n(33440),we=n.n(Ce),Le=n(83260),ke=n.n(Le),Ie=n(89629),Re=n.n(Ie),De=n(57123),Me=n.n(De),Pe=n(39783),Ne=n.n(Pe),xe=n(25191);function Fe(){return(0,xe.p)().model.swBox}function Ue(){return(0,xe.p)().model.pushManager}var He=n(90557);function Be(){(0,He.jU)().then((function(e){e.onSettingsMetathreadsOpen()}))}var Ze,Ge=n(44438);function qe(e,t){var n=String(e);if("number"==typeof t)if(n.length>t)return n.slice(Math.max(0,n.length-t));else return"0".repeat(t-n.length)+n;return n}!function(e){e[e.DayMonthYear=0]="DayMonthYear",e[e.DayMonthYearFull=1]="DayMonthYearFull"}(Ze||(Ze={}));var je=function(){function e(e){if(e&&"object"==typeof e)this._date=e;else this._date=new Date(e)}return e.fromServerDate=function(t){var n;switch(typeof t){case"number":n=new Date(1e3*t);break;case"string":n=new Date(t);break;case"object":n=t}return new e(new Date((0,Ge.YX)(n.getTime())))},e.fromClientDate=function(t){return new e(t)},e.getDaysFromMSeconds=function(e){return Math.ceil(e/1e3/60/60/24)},e.prototype.getClientDate=function(){return this._date},e.prototype.getFormattedDate=function(e){var t=this._date;switch(e){case Ze.DayMonthYear:return qe(t.getDate(),2)+"."+qe(t.getMonth()+1,2)+"."+qe(t.getFullYear(),2);case Ze.DayMonthYearFull:return qe(t.getDate(),2)+"."+qe(t.getMonth()+1,2)+"."+qe(t.getFullYear())}},e}(),We=n(84627);function Ve(){return le.default.onSettingsDockCleanmailboxOpen()}var ze=function(){return le.default.onSettingsDockBrowserSettingsOpen()},Ye=n(57045),Ke=Ye.ZP,Xe=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Qe=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Je=i18n("Поздравляю!"),$e={open:function(e){return Xe(void 0,void 0,void 0,(function(){var t,n,r,a;return Qe(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,$e.fetchTemplate(e)];case 1:return t=i.sent(),n=null!==(a=X.COMPOSE_TEMPLATES_SUBJECTS[e])&&void 0!==a?a:Je,[4,$e.saveDraft({subject:n,body:{html:t,text:void 0}})];case 2:return r=i.sent(),$e.compose(r,e),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},openFromGetParameter:function(e){if(X.COMPOSE_ALLOWED_TEMPLATES.includes(e))return $e.open(e)},fetchTemplate:function(e){return fetch("".concat(X.COMPOSE_TEMPLATES_URL,"/").concat(e,".html"),{mode:"cors"}).then((function(e){return e.text()}))},saveDraft:function(e){return Xe(this,void 0,Promise,(function(){var t;return Qe(this,(function(r){switch(r.label){case 0:return[4,n.e(8524).then(n.t.bind(n,68524,23))];case 1:return t=r.sent().default,[2,new t(e).save().then((function(e){var t;return null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.id}))]}}))}))},getRouter:xe.p,compose:function(e,t){$e.getRouter().nav("/compose/".concat(e,"/drafts?template-name=").concat(t))}},et=$e,tt=et,nt=n(11532),rt=n(73704),at=new(function(){function e(){}return e.prototype.getCurrentLetterId=function(){return nt.Z.getModel().id},e.prototype.getCurrentLetterSenderEmail=function(){try{var e=nt.Z.getModel().get("correspondents.from.0");return(null==e?void 0:e.email)||""}catch(e){return""}},e.prototype.isCurrentSenderUnread=function(){try{return rt.Z.get("router.model.unsubscribeList").list.includes(this.getCurrentLetterSenderEmail())}catch(e){return!1}},e}()),it=n(41027);function ot(){return it.Z.getSelectedModel().id}var st=n(51955),lt=n(60033),ct=n.n(lt),dt=n(54498);var ut=n(13624),ft=n.n(ut),mt=n(93286),ht=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},pt=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},gt=function(){function e(e){this.target=e,this.request=e.activeRequest,this.route=e.activeRoute}return e.prototype.handleToggleMetathreads=function(){var e=this.request.query.metathreads,t={on:!0,off:!1};if(t.hasOwnProperty(e)){var n=t[e];(0,me.default)({type:dt.CHANGE_METATHREADS_SETTING,state:n,uid:void 0}),this._eliminateQueryParam("metathreads")}},e.prototype.handleToggleToMyselfMetathread=function(){var e=this;if("on"===this.request.query.tomyself)ne.default.open("confirm-tomyself-enable",{},{compact:!0,dimmer:!0,resolvable:!0,"close-on-dimmer":!1,"close-on-esc":!1,"reject-on-close":!0}).then((function(){if(!v().get("to-myself").isActive())(0,me.default)({type:dt.TOGGLE_TO_MYSELF_METATHREAD,state:!0,uid:void 0}),(0,mt.ZP)("query_myself_on")})).catch((function(e){if(e)throw(0,mt.ZP)("quer_mslf_open_err_".concat(e)),e})).finally((function(){e._eliminateQueryParam("tomyself")}))},e.prototype.handleToggleLayout=function(){var e=this.request.query.layout;if("2pane"===e||"3pane"===e)se.default.setLayout(e),this._eliminateQueryParam("layout")},e.prototype.handleEnableOctavius=function(){var e=this;if("on"===this.request.query.octavius)(function(e){try{if(window.__PH.cookie.s.setGlobal("m_oct",e?1:0),"e.mail.ru"===window.location.host)window.__PH.cookie.s.setGlobal("octavius",e?1:0)}catch(e){}var t=v().get("octavius"),n=Promise.resolve();if(!t.state){n=v().get("octavius-on-register-enabled").save({state:!1,time:!0})}var r=t.state==e?Promise.resolve():t.save({state:e,time:!0,hit:!0});return Promise.all([r,n])})(!0).then((function(){window.sendLoadlogRadar("loadflow_step-21a","octavius_force_enabled_success"),window.appStarted("redirect");var t=Object.assign({},e.request.query);delete t.octavius;var n=ft().queryString.stringify(t),r=_.Z.get("urls.rootUrl");window.location.replace("".concat(r,"?").concat(n))})).catch((function(){window.sendLoadlogRadar("loadflow_step-21b","octavius_force_enabled_fail")}))},e.prototype.handleSetTheme=function(){return ht(this,void 0,void 0,(function(){var e,t,n;return pt(this,(function(r){switch(r.label){case 0:if(!(e=this.request.query.theme))return[2];else return this._eliminateQueryParam("theme"),(0,mt.ZP)({type:"direct-link-theme",intervals:[[e,1]]}),[4,it.Z.load()];case 1:if(r.sent(),t=it.Z.getSelectedModel(),!(n=it.Z.getModel(e)))ct().send("direct-link-unknown-theme",{intervals:[[e,1]]});if(t.id===n.id)return[2];else return[4,ne.default.open("confirm-set-theme",{model:n},{dimmer:!0,compact:!0,resolvable:!0,"reject-on-close":!0,"close-on-dimmer":!1})];case 2:return r.sent(),[4,it.Z.setTheme(n,!0)];case 3:return r.sent(),[2]}}))}))},e.prototype._lazyCallSettingsManagerMethod=function(e){(0,He.jU)().then((function(t){t[e]()}))},e.prototype.handleOpenThemesPanel=function(){if(void 0!==this.request.query.themes)this._eliminateQueryParam("themes"),this._lazyCallSettingsManagerMethod("onSettingsDockAppearanceOpen")},e.prototype.handleOpenCleanMaster=function(){var e,t,n,r,a,i,o=this.request.query.cleanmaster;if(void 0!==o){if(this._eliminateQueryParam("cleanmaster"),o.length>0){var s=decodeURIComponent(o).split(":"),l=s[0],c=s[1];if((0,mt.ZP)({type:"cleanmaster-query-action",i:(e={},e[l]=1,e)}),X.CLEANMASTER_MODAL_ACTIONS_DISABLED)return(0,mt.ZP)({type:"cleanmaster-query-action-fail",i:(t={},t[l]=1,t["feature-disabled"]=1,t)}),!1;if(!["remove","unsubscribe"].includes(l))return(0,mt.ZP)({type:"cleanmaster-query-action-fail",i:(n={},n[l]=1,n["unknown-action"]=1,n)}),!1;if(""===c)return(0,mt.ZP)({type:"cleanmaster-query-action-fail",i:(r={},r[l]=1,r["emails-empty"]=1,r)}),!1;var d=c.split(","),u=d.length;if(0===(d=d.filter((function(e){return(0,st.checkTextValidity)(e).valid}))).length)return(0,mt.ZP)({type:"cleanmaster-query-action-fail",i:(a={},a[l]=1,a["filtered-emails-empty"]=1,a)}),!1;ne.default.open("cleanmaster-modal",{action:l,from:d},{}),(0,mt.ZP)({type:"cleanmaster-query-action-success",i:(i={},i[l]=1,i.validEmailsCount=d.length,i.initialEmailsCount=u,i)})}else{if(!X.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED)this._lazyCallSettingsManagerMethod("onSettingsDockCleanmasterOpen");else this._lazyCallSettingsManagerMethod("onCleanmasterClick");(0,mt.ZP)({type:"cleanmaster-page_open",dwh:{from:"get_cleanmaster"}})}return!0}},e.prototype.handleQueryAction=function(){var e=this,t={"open-metathreads-settings":function(){var t=!X.HIDE_METATHREADS;if(t)e._lazyCallSettingsManagerMethod("onSettingsMetathreadsOpen");return t},"open-cleanmailbox":function(){var t=!X.SETTINGS_DOCK_HIDE_CLEANMAILBOX;if(t)e._lazyCallSettingsManagerMethod("onSettingsDockCleanmailboxOpen");return t},"open-browser-notifications":function(){if(X.SETTINGS_DOCK_BROWSERSETTINGS_ENABLED)e._lazyCallSettingsManagerMethod("onSettingsDockBrowserSettingsOpen");return X.SETTINGS_DOCK_BROWSERSETTINGS_ENABLED}},n=this.request.query.action;if(t.hasOwnProperty(n)&&t[n]())this._eliminateQueryParam("action")},e.prototype.handleOpenComposeTemplate=function(){var e=this.request.query.compose_template;if(void 0!==e)this._eliminateQueryParam("compose_template"),et.openFromGetParameter(e)},e.prototype.handleOpenFromExtension=function(){if(void 0!==this.request.query.opening_from_extension){(0,mt.ZP)({type:"opening-from-extension"});var e=v().get("octavius-notify-checker-promo");if(!e.state)e.save({state:!0});this._eliminateQueryParam("opening_from_extension")}},e.prototype._eliminateQueryParam=function(e){var t=this.request.query[e],n=Object.assign({},this.request.query);delete n[e],this.target.go(this.route.id,this.route.params,n),(0,mt.ZP)({type:"query-check_".concat(e),intervals:[[t,1]]})},e}(),vt=gt,_t=n(32161);function bt(e){return(0,_t.hasServiceWorkerTag)(e)}var Et=n(76024),yt=n(72727),Tt=yt.default,At=n(69832),St=n(29434),Ot=n(28266),Ct=n(96404),wt=n.n(Ct),Lt=n(96596),kt=n.n(Lt),It=n(45730),Rt=n.n(It),Dt=n(2335),Mt={request:W(),RPC:y(),config:D(),cfg:_.Z,uuid:Oe(),features:M.default,"@mail/features":M.default,flags:v(),"@mail/flags":v(),cfgUser:b.Z,"service/auth":V.default,"mail/Attachment":F(),"mail/Folder":H(),"mail/SharedMailbox":Z(),"mail/UserSecurity":q(),"mail/actions/ContactSuggests":N(),"@mail/radars-decorator/dist/index-react":I,"mail/User":Y(),"ui-block/noads-button/noads-button":K,"default-values":X,"service/compose":Q,"service/notify":J,"service/promo":$,"service/mailbox/loader":ee,"service/captcha":te,"service/layer":ne,"service/cloud":re,"service/todo":ae,"mediator/folders-actions":ie,"mediator/letters-selection":oe,"mediator/layout-manager":se,"mediator/settings-manager":le,"mediator/addressbook-manager":ce,"mediator/marusia-manager":de,"data-source/index":ue.default,"helpers/rb":fe.Z,"helpers/data-source-dispatch":me,Transaction:pe(),"mail/actions/MoveTo":ve(),"mail/actions/MoveToAll":be(),Model:Ae(),RPCModel:ye(),"mail/getters/MessageMeta":we(),classnames:Ot,"utils/util":Le,Emitter:Re(),Action:Me(),"mail/Message":Ne(),"service/dimmer":Et,"helpers/opener":yt,"filters/Filter":At,"data-source/actions":dt,"utils/extension":St,"RPC/statuses/sdc":Ct,logger:Lt,"octavius-public/sw-box/get":r,"octavius-public/push-manager/get":a,"octavius-public/metathreads/open-metathreads":i,"octavius-public/helpers/date-helper":o,"octavius-public/service/vkMessengerLoader":We,"octavius-public/cleanmailbox/open-cleanmailbox":s,"octavius-public/browsersettings/open-browsersettings":l,"octavius-public/service/storage":c,"octavius-public/service/compose-template":d,"octavius-public/unsubscribe/unsubscribe-helper":u,"octavius-public/themes/getCurrentThemeId":f,"octavius-public/service/query-checker":m,"octavius-public/sw-box/hasSWBoxTag":h,"octavius-public/helpers/opener":p,"@instant-messengers/vk-teams-bridge":It,"service/adv/index":Dt};window.__definesExternals=Mt,Object.entries(Mt).forEach((function(e){var t=e[0],n=e[1];(0,k.t)(t,n)}));var Pt=n(28692),Nt=n(76493),xt=n(38945);var Ft=n(85271);var Ut,Ht,Bt=n(31931),Zt=n(43845),Gt=(0,Zt.pn)((function(){var e=document.getElementById("headline"),t=new Bt.Z({visible:!1});if(e.childNodes.length)t.renderTo(e);else t.didMount();return t})),qt=n(72595),jt=n(63876),Wt=n.n(jt),Vt=n(12028),zt=n.n(Vt),Yt=n(45209),Kt=n(52935),Xt=n(84561),Qt=O().Block.extend({name:"advert-column",defaults:{"ads-off-target":X.NOADS_BUTTON_SHOW_FORCE,"ad-feedback-target":!(0,Yt.h7)()&&Dt.default.showAdFeedback(),indented:X.ADVERT_SIDEBAR_ROUNDED},template:zt(),blocks:{slot:Xt.Z,"noads-button":K.default,"ad-feedback":Kt.Z},didMount:function(){this.broadcast("adcolumn:mount")},didUnmount:function(){this.broadcast("adcolumn:unmount")}}),Jt=n(21963),$t=n(58049),en=n(15045),tn=n(59193),nn=n(13209),rn=0,an=0,on=0,sn=0,ln=O().Mediator.create("advert-manager",{components:{router:{class:ft()},"settings-dock":{events:["ponymode:toggle"]},settings:{class:tn.Z,events:["ponymode:toggle"]},"advert-column":{class:Qt,events:["adcolumn:mount","adcolumn:unmount"]},slot:{class:Xt.Z},"spec-project-letter":{class:nn.Z,events:["specline:error","specline:render"]},"promo-block-letter":{class:$t.Z,events:["promoblockletter:render"]},"letter-list-item-adv":{class:Jt.Z,events:["native:render"]},scrollable:{class:en.Z,events:["scrollable:mount","scrollable:unmount","scrollable:advontop"]}},defaults(){this.isSpeclineReqPending=!1,this.renderNative=()=>{},this.onAdvBlockMouseEnter=this.onAdvBlockMouseEnter.bind(this),this.onAdvBlockMouseLeave=this.onAdvBlockMouseLeave.bind(this)},handleEvent(e){var t=e.type,n=e.details;switch(t){case"adcolumn:mount":this.didAdColumnMount();break;case"adcolumn:unmount":this.didAdColumnUnmount();break;case"scrollable:mount":this.didScrollableMount(n);break;case"scrollable:unmount":this.didScrollableUnmount(n);break;case"native:render":this.renderNativeHandler(n);break;case"specline:render":this.renderSpeclineHandler(n);break;case"specline:error":this.hideNotEmptyBlock("letter-list-item-adv");break;case"scrollable:advontop":if("2pane"===se.default.getType())this.renderListAdv("list2pane");break;case"ponymode:toggle":if(this.clearAdvCache(),"2pane"===se.default.getType())this.renderListAdv("list2pane");else this.renderListAdv("list3pane");break;case"promoblockletter:render":this.hideEmptyBlock("spec-project-letter")}},clearAdvCache(){Wt().clearCache()},renderNativeHandler(e){var t=this.getBlock("spec-project-letter"),n=e.placement,r=e.placementRender;if(this.renderNative=()=>{if(n.isForceFail())r();else n.getBanner(!0).then(e=>{var t=this.getBlock("letter-list-item-adv");if(e&&t)r(e)}).catch(e=>{console.log(e)})},!this.isSpeclineReqPending&&!t||!t.el.offsetHeight)this.renderNative()},renderSpeclineHandler(e){var t=e.placement,n=e.placementRender;if(!t.isForceFail())this.isSpeclineReqPending=!0,t.getBanner(!1).then(e=>{this.isSpeclineReqPending=!1;var r=this.getBlock("spec-project-letter");if(e&&e.html){this.hideNotEmptyBlock("letter-list-item-adv"),this.hideEmptyBlock("promo-block-letter");var a=r.refs["spec-project-letter"];t.attachToContainer(a),t.wakeUp(),n(e)}else this.renderNative()}).catch(e=>{this.isSpeclineReqPending=!1,console.log(e)})},renderListAdv(e){var t=this.getBlock("letter-list-item-adv");if(t)t.renderPlacement(e)},getBlock(e){var t=this.components[e].length;return this.components[e][t-1]},hideEmptyBlock(e){var t=this.getBlock(e);if(t&&!t.el.offsetHeight)t.el.style.display="none"},hideNotEmptyBlock(e){var t=this.getBlock(e);if(t)t.el.style.display="none"},didAdColumnMount(){if(this.setInitialConf(),X.ADVERT_SIDEBAR_SLEEP)this.setSleepEvent()},didAdColumnUnmount(){this.unsetSleepEvent()},didScrollableMount(e){var t=e.scrollableElement,n=e.name;this.scrollableName=n;var r=ke().debounce(e=>{this.handleScroll(e,n)},4),a=ke().debounce(()=>{this.setInitialConf()},100);if(this.scrollUnsubscribe=()=>{if(t)t.removeEventListener("scroll",r)},this.initialSetterUnsubscribe=()=>{window.removeEventListener("resize",a)},X.ADVERT_SCROLL&&t)t.addEventListener("scroll",r),window.addEventListener("resize",a),this.setInitialConf()},didScrollableUnmount(){this.scrollUnsubscribe(),this.initialSetterUnsubscribe()},handleScroll(e,t){var n=e.target.scrollTop,r=this.get("router").request.route;if("3pane"===se.default.getType()){if(!X.ADVERT_SCROLL_CONF[2]&&(r&&r.is&&!r.is("#read-letter #search-letter")||"dataset-letters"!==t))this.executeScroll(n)}else this.executeScroll(n)},executeScroll(e){if(e>=0&&this.advBlock&&this.advBlock.el){var t=this.getScrollDelta(e),n=this.getScrollDirection(e);this.scrollMethod({direction:n,scrollDelta:t})}},nativeScroll(e){var t=e.direction,n=e.scrollDelta;this.advBlock.el.scrollBy(0,t*n*(X.ADVERT_SCROLL_CONF[0]/10))},cssScroll(e){var t=e.direction,n=e.scrollDelta,r=sn+t*n*(X.ADVERT_SCROLL_CONF[0]/10);1===t?this.scrollToTop(r):this.scrollToBottom(r)},scrollToTop(e){var t=this.getHeightDelta();if(!(sn>=t))sn=e<t?e:t,this.advBlock.el.style.top="-".concat(sn,"px")},scrollToBottom(e){if(!(sn<=0))sn=e>0?e:0,this.advBlock.el.style.top="-".concat(sn,"px")},getScrollDirection(){if(rn>an&&1===on)on=-1;else if(rn<an&&-1===on)on=1;else if(!on)on=1;return on},getScrollDelta:e=>(rn=an,an=e,Math.abs(an-rn)),getHeightDelta(){return this.get("slot").el.offsetHeight-this.advBlock.el.offsetHeight},setInitialConf(){if(this.advBlock=this.get("advert-column"),this.advBlock&&this.advBlock.el)sn=0,this.advBlock.el.style.top="0",this.useCssScroll=X.ADVERT_SCROLL_CONF[2]&&"letter-content"===this.scrollableName||!this.advBlock.el.scrollBy,this.advBlock.set({"native-scroll":!this.useCssScroll,"css-scroll":this.useCssScroll}),this.scrollMethod=this.useCssScroll?this.cssScroll:this.nativeScroll},onAdvBlockMouseEnter(){Wt().sleep(["sidebar","sidebar-small"],!0)},onAdvBlockMouseLeave(){Wt().wakeUp(["sidebar","sidebar-small"],!0)},setSleepEvent(){var e=this.get("advert-column"),t=e&&e.el;if(t)t.addEventListener("mouseenter",this.onAdvBlockMouseEnter),t.addEventListener("mouseleave",this.onAdvBlockMouseLeave)},unsetSleepEvent(){var e=this.get("advert-column"),t=e&&e.el;if(t)t.removeEventListener("mouseenter",this.onAdvBlockMouseEnter),t.removeEventListener("mouseleave",this.onAdvBlockMouseLeave)}}),cn=n(68275),dn=n(8387),un=n(79087),fn=n(7974),mn=n(34734),hn=n(62161),pn=n(14334),gn=(Ut=function(e,t){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),vn=["attachments:tocloud"],_n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gn(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:ft()},letter:{lazy:He.FV,events:vn},viewer:{class:null,events:vn},"list-letter-attach-status-active":{class:mn.Z,events:["attachments:openviewer"]},"list-letter-preview-attaches-item":{class:hn.Z,events:["attachments:openviewer"]},"list-letter-preview-attaches-more":{class:pn.Z,events:["attachments:openviewer"]},"attach-list":{class:un.Z,events:["attachment:analytics"]},"attach-thumb":{class:fn.Z,events:["attachment:analytics"]}}},t.prototype.handleEvent=function(e){var t=e.type.split(":").pop();if("tocloud"===t)this.onAttachmentsCloud(e);if("openviewer"===t){var n=this.get("router"),r=e.details,a=r.message,i=r.attachment,o=r.attachmentId,s=r.msgId,l=r.from,c=void 0===l?"ll":l;if(dn.Z.open({attachment:i,message:a,router:n,newWindow:!0,attachmentId:o,msgId:s}),i)this.onSendAnalytics([i],"open_".concat(c))}if("analytics"===t){var d=e.details,u=d.models,f=d.event;this.onSendAnalytics(u,f)}},t.prototype.onAttachmentsCloud=function(e){var t=e.details,n=t.message,r=t.attachments;ne.default.open("explorer-to-cloud",{attachments:r,message:n},{dimmer:!0})},t.prototype.onSendAnalytics=function(e,t){if(void 0===e)e=[];if(!X.ATTACH_ANALYTICS_EXT_DISABLED){var n=[],r=[];e.forEach((function(e){var t,a,i,o,s;if(e)if(e.getExtension&&e.getPrimitiveType)n.push(null===(t=e.getExtension())||void 0===t?void 0:t.toLowerCase()),r.push(null===(a=e.getPrimitiveType())||void 0===a?void 0:a.toLowerCase());else{var l=(null===(i=e.formName)||void 0===i?void 0:i.value)||(null===(o=e.name)||void 0===o?void 0:o.value)||e.name;if("string"==typeof l)n.push(null===(s=(0,cn.a_)(l))||void 0===s?void 0:s.toLowerCase())}})),ct().send("attach_thmb_".concat(t),{i:n.length>1?"mltpl":n[0],dwh:{ext:n,extType:r}})}},t}(O().Mediator),bn=O().Mediator.createFromClass("attachments-manager",_n),En=n(22737),yn=n(19008),Tn=n(66225),An=n(77917),Sn=n(37240),On=O().Mediator.create("contact-selection",{components:{router:{class:ft(),events:["routeend"]},"letter-contact":{class:Sn.Z,events:["rightclick"]}},defaults:function(){if(!X.TOUCH_MODE)this.onKeyboardCopy=this.onKeyboardCopy.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.selectionRange=null,this.copyEl=document.createElement("input"),this.copyEl.setAttribute("type","text"),this.copyEl.setAttribute("tabindex","-1"),this.copyEl.style.position="absolute",this.copyEl.style.overflow="hidden",this.copyEl.style.bottom="0",this.copyEl.style.marginLeft="-10000px",this.copyEl.style.width="auto",document.body.appendChild(this.copyEl)},toggleListeners:function(e){var t=this,n="command+c,ctrl+c";(0,He.BA)().then((0,He.qh)(this,(function(r){if(e)r(n,t.onKeyboardCopy),document.addEventListener("selectionchange",t.onSelectionChange);else r.unbind(n,t.onKeyboardCopy),document.removeEventListener("selectionchange",t.onSelectionChange)})))},onKeyUp:function(){document.removeEventListener("keyup",this.onKeyUp);var e=document.getSelection();e.removeAllRanges(),e.addRange(this.selectionRange),this.selectionRange=null},handleEvent:function(e){if(!X.TOUCH_MODE){var t=e.type,n=this.get("router"),r=n.request;if(n.route){switch(t){case"routeend":var a=r.route;if(a&&a.is&&a.is("#read-letter #search-letter"))this.toggleListeners(!0);else this.toggleListeners(!1);break;case"rightclick":this.onRightClick(e)}return!1}}},onSelectionChange:function(){var e=this.getList("letter-contact"),t=e.length;if(0!==t)if(!this.selectionRange)for(var n=document.getSelection(),r=0;r<t;r++){var a=e[r].el;if(a&&a.firstChild){var i=!n.isCollapsed&&n.containsNode(a,!0);if(e[r].get("active")!=i)e[r].set("active",i)}}},onKeyboardCopy:function(){var e=document.getSelection(),t=this.getSelectedBlocks();if(0!==t.length&&t[0]&&t[0].el){var n=t[0].el.closest((0,An.selector)(".letter__head")),r=e.anchorNode,a=e.focusNode;if(r.nodeType===Node.TEXT_NODE)r=r.parentNode;if(a.nodeType===Node.TEXT_NODE)a=a.parentNode;if(n.contains(r)&&n.contains(a)){var i=this.getText(t);this.selectionRange=e.getRangeAt(0),this.copyEl.value=i,this.copyEl.focus(),this.copyEl.select(),document.addEventListener("keyup",this.onKeyUp)}}},onRightClick:function(e){var t=e.details;if(t.is("active")){var n=this.getSelectedBlocks();if(0!==n.length&&n[0]&&n[0].el)this.showContextMenu(e,n)}else this.showContextMenu(e,[t])},showContextMenu:function(e,t){var n=this.getText(t),r=this.getContacts(t);e.details={type:"correspondents",clipboardText:n,contacts:r},Tn.Z.show(e)},getText:function(e){return(0,yn.R0)(e.map((function(e){return e.get("contact")}))).join(", ")},getContacts:function(e){return e.map((function(e){return e.get("contact")}))},getSelectedBlocks:function(){var e=this.getList("letter-contact");if(0===e.length)return[];else return e.filter((function(e){return e.is("active")}))}}),Cn=n(17914),wn=O().Mediator.create("features",{defaults(){},components:{"letter-body":{class:Cn.Z,attrs:{"features-blockquote":()=>M.default.has("blockquote"),"features-blockquote-threads":()=>M.default.has("blockquote-threads")}}}}),Ln=n(14198),kn=O().Mediator.create("flags",{defaults(){},components:{router:{class:ft()},"letter-body":{class:Cn.Z,attrs:{"flags-threads":e=>e.get("router.model.uiThreadsSettings").threads}},"dataset-letters":{attrs:{threadsEnabled:e=>e.get("router.model.uiThreadsSettings").threads}}}}),In=n(70614),Rn=n(96384),Dn=n(45114),Mn=n(37874),Pn=n(82609),Nn=n(53485),xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)if(t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a]))n[r[a]]=e[r[a]]}return n},Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xn(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:ft(),events:["route"]},button:{class:Dn.Z,events:["back:to:parent:folder"]},"application-mail":{attrs:{showBackToParentFolder:function(e){return e.isBackToParentEnabled()}}},"portal-menu":{class:Nn.ZP,attrs:{showBackToParentFolder:function(e){return e.isBackToParentEnabled()}}},"nav-folders":{class:Mn.Z,attrs:{showBackToParentFolder:function(e){return e.isBackToParentEnabled()}}},octopus:{class:Pn.Z,attrs:{transparent:function(e){return e.isDatasetTransparent}},events:["secure:opencurrent","secure:open"]},"dataset-letters":{events:["back:to:parent:folder"]}}},t.prototype.handleEvent=function(e){switch(e.type){case"secure:open":this.secureOpen(e.details);break;case"secure:opencurrent":this.secureOpenCurrent();break;case"route":this.handleBackToParentFolder();break;case"back:to:parent:folder":this.doBackToParentFolder(e)}},t.prototype.doBackToParentFolder=function(e){ct().send("back-to-parent-nav",{dwh:{pos:e.details.pos}});var t=this.get("router"),n=t.model,r=n.folder,a=n.folders,i=(0,In.g)(r,a);if(i)t.nav(t.getUrl("#letters",{folder:i.id}),{initiator:"popstate"})},t.prototype.secureOpenCurrent=function(){var e=this.get("router");this.secureOpen(e.model.folder)},t.prototype.secureOpen=function(e){var t=this.get("router"),n=H().all.get(e);n&&(0,Rn.Z)(n).then((function(){if(t.route.is("#search #search-letter"))return ue.default.dispatch({type:dt.UPDATE_SEARCH});else return ue.default.updateAll()}))},t.prototype.isBackToParentEnabled=function(){if(!X.METATHREAD_BACK_TO_INBOX)return!1;else return!!this.get("router").request.query["to-parent-button"]},t.prototype.handleBackToParentFolder=function(){if(X.METATHREAD_BACK_TO_INBOX){var e=this.get("router"),t=e.activeRoute,n=e.previousRoute;if(n){var r=t.params.folder,a=n.params.folder,i=e.model.folders;if(i){var o=i.find((function(e){return e.id==r})),s=i.find((function(e){return e.id==o.get("parent")})),l=(null==s?void 0:s.id)==a;if(!(t.is("#letters #read-letter")&&n.is("#letters #read-letter")&&r===a)&&!l){var c=e.route.id,d=e.request,u=d.params,f=d.query,m=f["to-parent-button"],h=Fn(f,["to-parent-button"]),p=n.request.query["to-parent-button"];if(m&&p)e.nav(e.getUrl(c,u,h),{replaceState:!0})}}}}},t}(O().Mediator),Hn=O().Mediator.createFromClass("folders-navigation",Un),Bn=n(59626),Zn=n(47334),Gn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gn(t,e),t.prototype.getComponentsSpec=function(){return{"list-letter-common":{class:Zn.Z,events:["$mount"]},"list-letter-compact":{events:["$mount"]}}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details;switch(t){case"$mount":this.fetchAttaches(n)}},t.prototype.fetchAttaches=function(e){var t=e.get("show-attaches"),n=e.get("model").get("attachments_count"),r=e.get("fetchAttaches")&&!e.get("messagesAttaches");if(t&&n&&!r)(0,Bn.fy)(e.get("model")).then((function(t){e.set({messagesAttaches:t,fetchAttaches:!0})}))},t}(O().Mediator),jn=O().Mediator.createFromClass("letter-attaches-preview",qn),Wn=O().Mediator.create("letter-list-adv-optimizer",{defaults(){this._queue=[],this._isScrolling=!1},components:{scrollable:{class:en.Z,events:["scroll:change","scroll:end"]},"spec-project-letter":{class:nn.Z,events:["render:adv","render:remove"]},"letter-list-adv":{class:Jt.Z,events:["render:adv","render:remove"]}},handleEvent(e){var t=e.type,n=e.details;switch(t){case"scroll:change":this._isScrolling=!0;break;case"scroll:end":this._isScrolling=!1,this.progressQueue();break;case"render:adv":var r=n.advRender;if(this._isScrolling)return void this._queue.push(n);r();break;case"render:remove":var a=n;this._queue=this._queue.filter(e=>e.advName!==a)}return!1},progressQueue(){for(;this._queue.length;)this._queue.pop().advRender()}}),Vn=n(95437),zn=n(97899),Yn=n(46655),Kn=n(74456),Xn=n(99105),Qn=n(54415),Jn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$n=function(e){function t(){var t=e.call(this)||this;return t._needUpdate={},t._lastThrottledKey=null,t._throttlingTimerId=null,t._isLoading=!1,H().all.on("change",(function(e,n){if(e.changes.includes("messages_total")&&n!==(0,xe.p)().model.folder)t._needUpdate[n.id]=!0})),t}return Jn(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:ft()},scrollable:{class:en.Z,events:[Yn.G.onBottom]},"letters-list":{class:Xn.Z,events:[Yn.G.onBottom,Yn.G.loadMore]},"nav-folders":{class:Mn.Z,events:["folderclickstart","folderhover"]},"list-letter-spinner":{class:Qn.Z,attrs:{hidden:function(e){return!e._isLoading}}}}},t.prototype.handleEvent=function(e){var t,n=e.type,r=e.details;switch(n){case Yn.G.onBottom:this.loadLetters();break;case Yn.G.loadMore:this.loadLetters(r);break;case"folderhover":if((t=r)&&this._needUpdate[t.id])ee.default.emit("any:reload"),delete this._needUpdate[t.id]}},t.prototype.getThrottleKey=function(e){var t=this.get("router");if(!t||!t.url)return":"+e;else return t.url.href+":"+e},t.prototype.setupThrottling=function(e){var t=this;this._lastThrottledKey=e,this._throttlingTimerId=window.setTimeout((function(){t._throttlingTimerId=null}),1e3)},t.prototype.clearThrottling=function(){window.clearTimeout(this._throttlingTimerId),this._throttlingTimerId=null},t.prototype.loadLettersThrottled=function(e){var t=this;if(!this._isLoading){var n=this.getThrottleKey(e);if(this._throttlingTimerId)if(this._lastThrottledKey!==n)this.clearThrottling();else return;return this.setupThrottling(n),this._isLoading=!0,this.updateAll(),ue.default.dispatch({type:dt.LOAD_MORE,priority:ft().Loader.PRIORITY_LOW}).then((function(n){if(n&&n.uiLetters.length!==e){(0,mt.ZP)(["on_next_page_letters",e]);var r=t.get("router").model.folder.id;(0,mt.ZP)({chain:["letters_next_load",r],dwh:{offset:e}})}t._isLoading=!1})).catch((function(e){if(t._isLoading=!1,e&&!e.body)(0,Kn.Z)("trackJS").then((function(t){return t.addErrorFromApp(e,"octavius_smth_wrong")})),J.default.error({unique:!0})})).then((function(){t.updateAll()}))}},t.prototype.loadLetters=function(e){var t=this.get("router"),n=t.route,r=t&&t.model&&t.model.uiLetters,a=r&&r.length;if(!(e&&e.startIndex<X.LIST_LIMIT))if(!(0,zn.Mn)(t)||n&&(n.is("#search")||n.is("#search-letter")))this.loadLettersThrottled(a)},t}(O().Mediator),er=O().Mediator.createFromClass("letters-loader",$n),tr=n(70757),nr=O().Mediator.create("letters-navigation",{components:{router:{class:ft()},"portal-menu-element":{class:tr.Z,events:["folders-toggle"]},"letter-list":{class:Xn.Z,attrs:{transparent:e=>e.isDatasetTransparent}}},defaults(){this.isDatasetTransparent=!1},handleEvent(e){var t=e.type,n=e.details;switch(t){case"folderstoggle":this.isDatasetTransparent=n.state,this.updateAll()}}}),rr=n(86145),ar=n(24013),ir=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),or=function(e){function t(){var t=e.call(this)||this;return t.onKeydown=t.onKeydown.bind(t),t}return ir(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:ft(),events:["routeend"],handleEvent:"onRouteEnd"},"dataset-letters":{events:["$mount"],handleEvent:"onLettersMount"},dataSource:{class:rr.Z,events:["actionend"],handleEvent:"onDataSourceActionEnd"}}},t.prototype.onRouteEnd=function(){this.toggleKeydownHandler(!1)},t.prototype.onDataSourceActionEnd=function(e){var t=e.details,n=this.get("router.route");if(t.action.type!==dt.NAVIGATE)return!1;var r=n.is("#letters #search"),a=n.is("#read-letter #search-letter");if(r||a){if(this.dataset=this.get("dataset-letters"),a)this.letterId=n.params.letter;if(this.getDatasetParentElement())this.onLettersMount()}},t.prototype.onLettersMount=function(){var e=this;this.dataset=this.get("dataset-letters"),this.toggleKeydownHandler(!0),setTimeout((function(){e.focusPrevActiveDatasetElement(),delete e.letterId}),200)},t.prototype.onKeydown=function(e,t){var n=t.shortcut;if(this.validateActiveElement()){if("up"===n||"down"===n)if(e.preventDefault(),"up"===n)this.focusPrevDatasetElement();else this.focusNextDatasetElement();if("enter"===n||this.is3Pane())this.clickActiveDatasetElement()}},t.prototype.is3Pane=function(){return"3pane"===se.default.getType()},t.prototype.getActiveElement=function(){return document.activeElement},t.prototype.getDatasetElement=function(){var e,t;return null===(t=null===(e=this.dataset)||void 0===e?void 0:e.getEl)||void 0===t?void 0:t.call(e)},t.prototype.getDatasetParentElement=function(){var e=this.getDatasetElement();if(e)return e.parentElement},t.prototype.getFirstDatasetElement=function(){var e=this.getDatasetElement();if(e)return e.querySelector((0,An.selector)(".js-letter-list-item"))},t.prototype.getDatasetElementById=function(e){var t=this.getDatasetElement();if(t)return t.querySelector((0,An.selector)('.js-letter-list-item[data-id="'.concat(e,'"]')))},t.prototype.getSelectedDatasetElement=function(){var e=this.getDatasetElement();if(e)return e.querySelector((0,An.selector)(".js-letter-list-item[active]"))},t.prototype.getActiveDatasetElement=function(){var e=this.getActiveElement();if(e)return e.closest((0,An.selector)(".js-letter-list-item"))},t.prototype.getSelectedOrActiveDatasetElement=function(){return this.getSelectedDatasetElement()||this.getActiveDatasetElement()},t.prototype.getActualDatasetElement=function(e){return this.getSelectedOrActiveDatasetElement()||this.getDatasetElementById(e)},t.prototype.getPrevDatasetElement=function(){var e=this.getSelectedOrActiveDatasetElement();if(e){var t=(0,ar.Cf)(e,(0,An.selector)(".dataset__items"));if(t[0])for(var n=t[0].previousElementSibling;n;){var r=n.querySelector((0,An.selector)(".js-letter-list-item"));if(r)return r;n=n.previousElementSibling}return(0,ar.U)(e,(0,An.selector)(".js-letter-list-item"))}return this.getFirstDatasetElement()},t.prototype.getNextDatasetElement=function(){var e=this.getSelectedOrActiveDatasetElement();if(e){var t=(0,ar.Cf)(e,(0,An.selector)(".dataset__items"));if(t[0])for(var n=t[0].nextElementSibling;n;){var r=n.querySelector((0,An.selector)(".js-letter-list-item"));if(r)return r;n=n.nextElementSibling}return(0,ar.d9)(e,(0,An.selector)(".js-letter-list-item"))}return this.getFirstDatasetElement()},t.prototype.validateActiveElement=function(){var e=this.getActiveElement(),t=this.getActiveDatasetElement(),n=e.closest((0,An.selector)(".nav-folders"));return e===document.body||t||n},t.prototype.focusPrevActiveDatasetElement=function(){var e=this.getActualDatasetElement(this.letterId);if(e)e.focus()},t.prototype.focusPrevDatasetElement=function(){if(!this.blurActiveElementTimer)this._activeElement=this.getPrevDatasetElement(),this.fixActiveDatasetElement()},t.prototype.focusNextDatasetElement=function(){if(!this.blurActiveElementTimer)this._activeElement=this.getNextDatasetElement(),this.fixActiveDatasetElement()},t.prototype.fixActiveDatasetElement=function(){var e=this;if(this._activeElement)this._activeElement.focus(),this.blurActiveElementTimer=window.setTimeout((function(){if(e.blurActiveElementTimer=void 0,e._activeElement)e._activeElement.focus()}),40)},t.prototype.clickActiveDatasetElement=function(){var e;null===(e=this.getActiveDatasetElement())||void 0===e||e.click()},t.prototype.toggleKeydownHandler=function(e){var t=this,n="left,up,right,down,enter";(0,He.BA)().then((0,He.qh)(this,(function(r){if(e)r(n,t.onKeydown);else r.unbind(n,t.onKeydown)})))},t}(S.Mediator),sr=S.Mediator.createFromClass("letters-shortcut",or),lr=(n(24737),n(12043)),cr=O().Mediator.create("metathreads-manager",{defaults(){ue.default.one("actionend",()=>{if(X.FORCE_METATHREADS_LETTER||X.FORCE_METATHREADS||X.FORCE_METATHREADS_EXP){var e=v().get("ignore-metathreads-experiment");if(!e||!e.state){var t=this.get("router.model.uiThreadsSettings")||t.defaults;if(!t.metathreads)if(!X.FORCE_METATHREADS_EXP){if(X.FORCE_METATHREADS_LETTER){return v().get("pre-metathread-letter").save({state:!0}),e.save({state:!0}),void(0,mt.ZP)("force_metathreads_letter")}(0,me.default)({type:dt.TOGGLE_METATHREADS_SETTING}),e.save({state:!0}),(0,mt.ZP)("force_metathreads")}else e.save({state:!0});else e.save({state:!0})}}}),ue.default.one("actionend",()=>{if(X.METATHREADS_FORCED_EXP){var e=v().get("metathreads-forced-exp");if(!e||!e.state){var t=this.get("router.model.uiThreadsSettings")||uiThreadsDefaults;if(!t.metathreads){var n=!1,r=t.metathreadsSettings;if(Object.keys(r).forEach(e=>{if(r[e]!==Y().METATHREADS_STATES.OFF)n=!0}),!n){var a=X.METATHREADS_FORCED_EXP.split("|")[0];(0,me.default)({type:dt.TOGGLE_METATHREADS_SETTINGS,state:!0}).then(()=>{e.save({state:!0,time:!0}),$.default.update()}).catch(()=>(0,mt.ZP)("metathreads-exp-error")),(0,mt.ZP)({type:"metathreads-forced-exp",dwh:{group:a}})}}}}})},components:{router:{class:ft()},metathread:{class:lr.Z,events:["click:cleanmaster","click:metathread-link","click:disable"]}},handleEvent(e){switch(e.type){case"click:cleanmaster":this.onCleanmasterClick(e);break;case"click:metathreadlink":this.onMetathreadLinkClick(e);break;case"click:disable":var t=e.details;this.onMetathreadDisable(t)}},onMetathreadLinkClick(e){var t=e.details,n=this.get("router"),r=t.getMetathreadFolder();n.go("#letters",{folder:r}),ct().send("go_to_folder",{i:{id:r},dwh:{id:r,name:t.getMetathreadFolderName()}})},onCleanmasterClick(){(0,yt.default)(X.CLEANMASTER_URL)},onMetathreadDisable(e){var t=()=>{if(e.isToMyself())ue.default.dispatch({type:dt.TOGGLE_TO_MYSELF_METATHREAD,state:!1}),(0,mt.ZP)({type:"tomyself-disable",intervals:[["mt-ctx-menu",1]]})};if(X.LAYER_METATHREAD_DISABLE)ne.default.open("disable-metathread",{model:e},{dimmer:!0,resolvable:!0,"close-on-dimmer":!0,"reject-on-dimmer":!0,"close-on-esc":!1,"reject-on-close":!0}).then(()=>{t()}).catch(e=>{if(e)throw e});else t()}}),dr=n(58730),ur=n(35108),fr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fr(t,e),t.prototype.getComponentsSpec=function(){return{"mobile-sidebar":{class:dr.Z,events:["mobilesidebar:close"],attrs:{open:function(e){return e._isSidebarOpen}}},"webview-mobile-header":{class:ur.Z,events:["mobilesidebar:open"]},"webview-mobile-footer":{events:["mobilesidebar:open"]},"sidebar-unsubscribe-button":{events:["mobilesidebar:close"]}}},t.prototype.handleEvent=function(e){switch(e.type){case"mobilesidebar:open":this._isSidebarOpen=!0;break;case"mobilesidebar:close":this._isSidebarOpen=!1}},t}(O().Mediator),hr=O().Mediator.createFromClass("mobile-sidebar-manager",mr),pr=n(47576),gr="clicklink",vr=O().Mediator.create("orders-manager",{components:{"list-letter-order":{class:pr.Z,events:["clicklink"]}},handleEvent(e){var t=e.type,n=e.details,r=void 0===n?{}:n;if(t===gr&&r.url){var a=r.url;(0,yt.default)(a),(0,mt.ZP)("list_letter_order_click")}}}),_r=n(70235),br=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Er=function(e){function t(){var t=e.call(this)||this;return t._isLoading=!1,t.getPaginatorPage=t.getPaginatorPage.bind(t),t}return br(t,e),t.prototype.getComponentsSpec=function(){return{"data-source":{class:rr.Z},"dataset-letters":{attrs:{"paginator-page-getter":function(e){return e.getPaginatorPage}},events:["save-current-page-height","update-on-scroll"]}}},t.prototype.handleEvent=function(e){switch(e.type){case"savecurrentpageheight":return this.saveCurrentPageHeight(e.details&&e.details.saveOnlyIfExact),!1;case"updateonscroll":return this.updatePaginatorPage(e.details&&e.details.scrollTop),!1}},t.prototype.getPaginatorPage=function(e,t){if(void 0===e)e=void 0;if(void 0===t)t=!1;var n=this.getDatasetLetters(),r=!!e,a=r?e.models:this.getDatasetLetters().getModels(),i=n.getCurrentPageOverride();if(void 0!==i)return i;if(t&&n.isScrolledToBottom())return Math.max(Math.ceil(n.getStatus().lettersTotal/X.LIST_LIMIT),1);for(var o,s,l,c=n.getScrollTop(),d=0;d<a.length;d++)if(l=(s=r?a[d].model:a[d]).meta("_ui-index"),o=n.getBlockMeasuresByModelId(s.id),void 0!==l&&o.offset>c)return Math.floor(l/X.LIST_LIMIT)+1;return 1},t.prototype.saveCurrentPageHeight=function(e){var t,n;if(void 0===e)e=!1;for(var r,a,i,o,s=this.getDatasetLetters().getStatus(),l=s&&s.page,c=this.getDatasetLetters().getModels(),d=(0,_r.U0)(this.getDatasetLetters().is3Pane(),this.getDatasetLetters().isPonyMode()),u=l*X.LIST_LIMIT-1,f=c.length-1;f>=0;f--)if(a=(r=c[f]).meta("_ui-index"),(i=this.getDatasetLetters().getBlockMeasuresByModelId(r.id))&&a===u)return o=i.offset-i.height,(0,zn.q2)(l,o,!0),void this.getDatasetLetters().setPaginatorDebugState((t={},t["page-height_".concat(l)]="=".concat(o),t));if(!e)for(f=c.length-1;f>=0;f--)if(a=(r=c[f]).meta("_ui-index"),(i=this.getDatasetLetters().getBlockMeasuresByModelId(r.id))&&null!=a)return o=i.offset+(u-a)*d-d,(0,zn.q2)(l,o),void this.getDatasetLetters().setPaginatorDebugState((n={},n["page-height_".concat(l)]="~".concat(o),n))},t.prototype.updatePaginatorPage=function(e){var t=this.getDatasetLetters().getRouter(),n=this.getDatasetLetters().getStatus(),r=t.request!==t.activeRequest;if(this.getDatasetLetters().setPaginatorDebugState({"scrollTop > lastPageOffset":!1,"targetPage < currentPage":!1,"status.isLastPage":n.isLastPage,isNavigating:r}),void 0===this.getDatasetLetters().getCurrentPageOverride()&&!r){var a=this.findFirstVisibleModelUIIndex(e),i=a.model,o=a.index;if(void 0!==i){var s=n.page,l=Math.floor(o/X.LIST_LIMIT)+1;if(this.getDatasetLetters().highlightElementForDebug(i),this.getDatasetLetters().setPaginatorDebugState({firstModelUIIndex:o}),l!==s)this.saveCurrentPageHeight(!0),this.runThrottled((function(){return(0,me.dispatchAndWait)({type:dt.LOAD_PAGE,page:l})}))}}},t.prototype.findFirstVisibleModelUIIndex=function(e){for(var t,n,r,a,i,o=this.getDatasetLetters().getLastCalculatedRange(),s=0;s<o.models.length;s++)if(t=o.models[s].model,(n=this.getDatasetLetters().getBlockMeasuresByModelId(t.id))&&n.offset>=e)if(a=t.meta("_ui-index"),void 0!==(i=(r=t.isInMetathread&&t.isInMetathread()&&t.getContainingMetathread())?r.meta("_ui-index"):void 0))return{model:t,index:i};else if(null!=a)return{model:t,index:a};return{}},t.prototype.getDatasetLetters=function(){return this.get("dataset-letters")},t.prototype.runThrottled=function(e){var t=this;if(!this._isLoading)return this._isLoading=!0,e().then((function(){if(t._isLoading=!1,t._updateAfterLoaded)t.updatePaginatorPage(t.getDatasetLetters().getScrollTop())})).catch((function(e){if(t._isLoading=!1,t._updateAfterLoaded)t.updatePaginatorPage(t.getDatasetLetters().getScrollTop());throw e}));else this._updateAfterLoaded=e},t}(O().Mediator),yr=O().Mediator.createFromClass("paginator-manager",Er),Tr=n(63298),Ar=n(24895),Sr=n.n(Ar),Or=n(59511),Cr=n.n(Or),wr=O().Block.extend({name:"paginator-button",template:Cr(),immutable:!0,blocks:{button2:Dn.Z}}),Lr=O().Block.extend({name:"paginator",template:Sr(),immutable:!0,blocks:{"paginator-button":wr},defaults:{length:0,current:1},events:{"button-action":"onButtonAction"},onButtonAction:function(e){var t=e.details,n=this.get("current"),r=t.page,a=t.type,i=this.getPages();if(i.length){var o;switch(a){case"prev":if((o=n-1)<1)return;break;case"next":if((o=n+1)>i[i.length-1])return;break;default:o=r}this.broadcast("navigate",{page:o})}},getPages:function(){var e=this.get("length"),t=this.get("current"),n=Math.ceil(e/X.LIST_LIMIT),r=t,a=Math.floor(2.5),i=r-a,o=r+a;if(o>n)i-=o-n,o-=o-n;if(i<1)o=Math.min(o-i+1,n),i=1;return Array.from({length:o-i+1},(function(e,t){return i+t}))}}),kr=n(68421),Ir=n.n(kr),Rr=O().Block.extend({name:"progress",template:Ir(),immutable:!0,defaults:{visible:!0},getProgressWidth_(){var e=parseInt(this.get("min"),10)||0,t=parseInt(this.get("max"),10)||100,n=parseInt(this.get("value"),10)||0,r=Math.max(t-e,0);return"".concat(Math.round(n/r*100),"%")}}),Dr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mr=X.APPROX_REQUEST_UPLOAD,Pr=X.APPROX_REQUEST_DOWNLOAD,Nr=X.PROGRESS_FAKE_LOAD_FACTOR,xr=X.PROGRESS_FACTOR_LOAD_START,Fr=X.PROGRESS_FACTOR_UPLOAD,Ur=(X.PROGRESS_FACTOR_DOWNLOAD,function(e){function t(){var t=e.call(this)||this;return t.progress_=0,t}return Dr(t,e),Object.defineProperty(t.prototype,"progress",{get:function(){return this.progress_},set:function(e){if((e=Math.round(e))>100)e=100;if(e>=this.progress_)this.progress_=e,this.emit("progress")},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var e=this;Re().getListeners(this,"progress").forEach((function(t){return e.off("progress",t)}))},t}(Re())),Hr=function(e){function t(t,n,r){var a=t.options,i=e.call(this)||this;return i.loadedBytes_=0,i.approxRequestSize_=r,i.fakeUpdateProgress_=i.fakeUpdateProgress_.bind(i),a[n]=function(e){var t=e.lengthComputable&&e.total?e.total:r;if(i.updateProgress_(t,e.loaded),i.progress>=100*Nr)i.stopFaking()},i}return Dr(t,e),t.prototype.updateProgress_=function(e,t){var n=(t-this.loadedBytes_)/e*100;this.loadedBytes_=t,this.progress+=n},t.prototype.fakeUpdateProgress_=function(){if(this.progress<100*Nr)this.updateProgress_(this.approxRequestSize_,this.progress+.05*this.approxRequestSize_);else this.stopFaking()},t.prototype.startFaking=function(){var e=this;this.fakeProgressPid_=window.setTimeout((function(){if(e.isFaking())e.fakeProgressPid_=window.setInterval(e.fakeUpdateProgress_,200)}),600)},t.prototype.stopFaking=function(){window.clearInterval(this.fakeProgressPid_),window.clearTimeout(this.fakeProgressPid_),delete this.fakeProgressPid_},t.prototype.isFaking=function(){return!!this.fakeProgressPid_},t}(Ur),Br=function(e){function t(t){var n=e.call(this)||this,r=new Hr(t,"onUploadProgress",Mr),a=new Hr(t,"onDownloadProgress",Pr),i=100*xr,o=i+100*Fr;return n.progress=i,r.startFaking(),r.on("progress",(function(){if(100===r.progress&&!a.isFaking())a.startFaking();n.progress=i+r.progress})),a.on("progress",(function(){n.progress=o+a.progress})),t.on("end",(function(){n.progress=100})),n}return Dr(t,e),t}(Ur),Zr=function(e){function t(){var t=e.call(this)||this;return t.activeCount_=0,t}return Dr(t,e),t.prototype.addXHR=function(e){var t=this;this.activeCount_++;var n=new Br(e),r=0;n.on("progress",(function(){var e=n.progress-r;r=n.progress,t.progress+=e*(1/t.activeCount_)}))},t}(Ur);W().on("start",(function(e,t){if(Ht)Ht.addXHR(t)}));var Gr=O().Mediator.create("progress-bar-manager",{components:{dataSource:{class:rr.Z,events:["beforeaction","actionend"]},router:{class:ft(),events:["beforeroute"]},progress:{class:Rr,attrs:{value:function(e){return e.progress_},visible:function(e){return e.visible_},inanimate:function(e){return e.inanimate_}}},paginator:{class:Lr,attrs:{disabled:function(e){return e.visible_}}}},defaults:function(){this.progress_=0,this.progressMemoized_=0,this.visible_=!1,this.inanimate_=!1},clearProgressAndShowDebounced_:function(){var e=this;if(this.progress_=0,this.progressMemoized_=0,this.visible_=!1,this.inanimate_=!0,this.updateAll(),this.progressDebouncePid_)window.clearTimeout(this.progressDebouncePid_);this.progressDebouncePid_=window.setTimeout((function(){e.inanimate_=!1,e.visible_=!0,e.progress_=e.progressMemoized_,e.updateAll(),delete e.progressDebouncePid_}),200)},setProgress_:function(e){if(!this.progressDebouncePid_)this.progress_=e,this.inanimate_=!1,this.updateAll();else this.progressMemoized_=e},completeProgressAndHide_:function(){var e=this;if(this.progress_=100,this.progressDebouncePid_)window.clearTimeout(this.progressDebouncePid_);this.progressDebouncePid_=window.setTimeout((function(){e.visible_=!1,e.updateAll(),delete e.progressDebouncePid_}),100),this.updateAll()},handleEvent:function(e){var t=this;switch(e.type){case"beforeroute":case"beforeaction":if(e.details.action&&e.details.action.type!==dt.NAVIGATE&&e.details.action.type!==dt.LOAD_PAGE)return!1;if("initial"===e.details.initiator)return!1;if(this.clearProgressAndShowDebounced_(),Ht)Ht.dispose();(Ht=new Zr).on("progress",(function(){t.setProgress_(Ht.progress)}));break;case"actionend":if(e.details.action.type!==dt.NAVIGATE&&e.details.action.type!==dt.LOAD_PAGE&&e.details.action.type!==dt.LOAD_MORE)return!1;if(this.completeProgressAndHide_(),Ht)Ht.dispose(),Ht=void 0}return!1}}),qr=n(81061),jr=n(16330),Wr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wr(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:ft(),events:["route"],handleEvent:"handleRoute"},renovator:{class:jr.Z,attrs:{isLettersRoute:function(e){return e.is("#letters #search")}}},"compose-collapsed":{class:qr.Z,attrs:{isRouteWithFooter:function(e){return!e.is("#read-letter #search #search-letter")}}},"themes-widget-ok":{lazy:He.AQ},"themes-widget-vk":{lazy:He.HE}}},t.prototype.is=function(e){return this.get("router").route.is(e)},t.prototype.handleRoute=function(){var e=this.get("themes-widget-ok"),t=this.get("themes-widget-vk");if(t)t.updateData();if(e)e.updateData()},t}(O().Mediator),zr=O().Mediator.createFromClass("routes-manager",Vr),Yr=n(15984),Kr=n(93686),Xr=n(55674),Qr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var Jr=kt().getScope("scrollable-manager"),$r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFilterQuery=Xr.Z.get(),t}return Qr(t,e),t.prototype.defaults=function(){this._store={}},t.prototype.getComponentsSpec=function(){return{router:{class:ft(),events:["routeend","beforeroute"]},dataSource:{class:rr.Z,events:["actionend"]},scrollable:{class:en.Z,events:["scroll:change"]}}},t.prototype.getKeyForRequest=function(e){var t=e.route,n=e.router;if(t&&t.is&&t.is("#search #search-letter")){var r=(0,Yr.bh)(),a=r&&r.search;if(a){var i=JSON.stringify(a.query);return{main:"".concat(t.id,":").concat(i),fallback:"#search:".concat(i)}}}var o=e.path;if(X.ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE&&t&&t.is&&t.is("#read-letter")){var s=e.params.folder;o=n.getUrl("#letters",{folder:s})}var l="".concat(e.host,":").concat(o);if(!l.endsWith("/"))l+="/";return{main:l,fallback:l}},t.prototype.handleEvent=function(e){var t=this,n=e.type,r=e.details,a=this.get("router");if(this._lastAdvUpdatePos=this._lastAdvUpdatePos||0,"scroll:change"===n){if(mn.Z.resetAttachmentDropdown(),pn.Z.resetAttachmentDropdown(),Math.abs(this._lastAdvUpdatePos-r)>2*screen.height)this._lastAdvUpdatePos=r,Dt.default.updateOnAction();return!1}if(a.route)switch(n){case"beforeroute":var i=this.getKeyForRequest(a.request).main;this._lastRouteFolder=a.request.params.folder,this._lastRouteQuery=JSON.stringify(a.request.query),this._lastRouteId=a.request.route.id;var o=this.getList("scrollable");if(X.ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE&&o.length<=0)return!1;else return this._store[i]=o.reduce((function(e,t){var n=t,r=n.getScrollPos(),a=r.x,i=r.y;return e[n.get("name")]={left:a,top:i},e}),{}),!1;case"routeend":return this._lastRouteInitiator=r&&r.initiator,!1;case"actionend":if(r.action.type!==dt.NAVIGATE&&r.action.type!==dt.TOGGLE_PAGINATOR&&r.action.type!==dt.UPDATE_LAYOUT_TYPE&&r.action.type!==dt.UPDATE_LAYOUT_SUPPORT_3_PANE)return!1;var s=this.getKeyForRequest(r.request),l=s.main,c=s.fallback,d=this._store[l]||this._store[c];(o=this.getList("scrollable")).forEach((function(e){var n=e,i=n.get("name"),o=a.route.is("#read-letter")&&"dataset-letters"===i||a.route.is("#search-letter")&&"dataset-letters"===i,s=t._lastRouteFolder,c=t._lastRouteQuery,u=r.request.params.folder,f=JSON.stringify(r.request.query),m=!o||!a.route.is("#search #search-letter")&&s!=u;if(a.route.is("#letters")&&("dataset-letters"===i||Xr.Z.has())&&s==u)m=!1;if(a.route.is("#search #search-letter")&&c===f)m=!1;var h=(0,zn.Mn)(a);if(void 0===t._lastPaginator)t._lastPaginator=h;var p=t._lastPaginator,g=t._lastFilterQuery;if(t._lastPaginator=h,t._lastFilterQuery=Xr.Z.get(),p!==h||!(0,Kr.Z)(g,Xr.Z.get()))Jr.add("filters changed, reset"),delete t._store[l],d=void 0,m=!0;else if(r.action.type!==dt.NAVIGATE)return void Jr.add("not navigate");if(!X.ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE&&a.route.is("#read-letter")&&"#read-letter"===t._lastRouteId)delete t._store[l],d=void 0;if(!d){if((0,zn.Mn)(a))(0,me.default)({type:dt.LOAD_PAGE,page:1,uid:void 0});return Jr.add("on new route",{shouldReset:m}),void(m&&n.reset())}var v=d[i];if(v&&"popstate"===t._lastRouteInitiator)n.scrollTo(v.left,v.top),n.wasPopstate=!0;else{if((0,zn.Mn)(a))(0,me.default)({type:dt.LOAD_PAGE,page:1,uid:void 0});Jr.add("on old route",{shouldReset:m}),m&&n.reset()}}))}},t}(O().Mediator),ea=O().Mediator.createFromClass("scrollable-manager",$r),ta=n(40803),na=n(90421),ra=n(24578),aa=n(21888),ia=n(7958),oa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oa(t,e),t.prototype.getComponentsSpec=function(){return{"sidebar-widgets":{class:aa.Z,events:[ia.Di.deactivateNotifyBadge],attrs:{"is-pay-widget-helper-active":function(e){return e.getIsPayWidgetHelperActive()||e.getIsPayWidgetSmartHelperActive()}}},router:{class:ft()}}},t.prototype.getBillsCount=function(){return this.get("router.model.billsCount")},t.prototype.handleEvent=function(e){switch(e.type){case ia.Di.deactivateNotifyBadge:if(X.SIDEBAR_PAY_NOTIFICATION_BADGE)v().get("octavius-sidebar-pay-notification-badge").save({state:!0});if(!X.SIDEBAR_PAY_NOTIFICATION_BADGE_SMART)break;var t=this.get("sidebar-widgets"),n=this.getBillsCount();if(!n)break;v().get("octavius-sidebar-pay-notification-badge-smart").save({state:!0}),n.hasNewPayments=!1,t.set("billsCount",n),(0,me.default)({type:dt.HIDE_SIDEBAR_FOOTER_PAY_NOTIFY_BADGE,state:n,uid:void 0})}},t.prototype.getIsPayWidgetHelperActive=function(){var e=v().get("octavius-sidebar-pay-notification-badge");return e&&!e.isActive()&&X.SIDEBAR_PAY_NOTIFICATION_BADGE},t.prototype.getIsPayWidgetSmartHelperActive=function(){var e=v().get("octavius-sidebar-pay-notification-badge-smart"),t=this.getBillsCount();if(!t||!X.SIDEBAR_PAY_NOTIFICATION_BADGE_SMART)return!1;var n=t.hasNewPayments,r=t.hasPaidPaymentsWithNoNew,a=t.total;return!e.isActive()&&a&&!r||n},t}(O().Mediator),la=O().Mediator.createFromClass("sidebar-menu",sa),ca=n(82855),da=n(10705),ua=n(29018),fa=n(92042),ma=n.n(fa),ha=n(43353),pa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pa(t,e),t.prototype.defaults=function(){},t.prototype.getComponentsSpec=function(){return{router:{class:ft()},letter:{lazy:He.FV,events:["translator:show","translator:close","translator:hide","letter:translate","letter:original"]},"dropdown-actions":{class:ha.Z,events:["translator:show"]}}},t.prototype.handleEvent=function(e){var t=this.getModel(e);if(!t)return!1;var n=e.details.block||this.findLetterById(t.id);if(!n)return!1;var r={model:t,block:n,options:e.details.options};switch(e.type){case"letter:translate":this.onLetterTranslate(r);break;case"letter:original":this.onLetterOriginal(r);break;case"translator:show":this.onTranslatorShow(r);break;case"translator:close":this.onTranslatorClose(r);break;case"translator:hide":this.onTranslatorHide(r)}return!1},t.prototype.onTranslatorShow=function(e){var t,n=e.block,r=e.model,a=r.get("flags.in_english"),i="",o="";if("en_US"!==b.Z.get("LANG")&&a)i="ru",o="en";else i="en",o="ru";var s=!n.is("is-translator-visible");n.set({"is-translator-visible":!0,"translator-default-from":o,"translator-default-to":i}),null===(t=v().get("translator-hide"))||void 0===t||t.save({state:!1,time:!0});var l=r.get("id");if(n.broadcast("translator:scrollto"),ct().send("letter_translator_show",{dwh:{letterId:l,automated_show:!1,in_english:!!a}}),s&&!X.DISABLE_AUTOMATED_TRANSLATE)ct().send("letter_automated_translate",{dwh:{letterId:l}}),this.onLetterTranslate({block:n,model:r,options:{fromlang:o,tolang:i}})},t.prototype.onTranslatorClose=function(e){e.block.set({"is-translator-visible":!1,"is-translator-forced-shown":!0})},t.prototype.onTranslatorHide=function(e){var t;this.onTranslatorClose(e),null===(t=v().get("translator-hide"))||void 0===t||t.save({state:!0,time:!0})},t.prototype.onLetterTranslate=function(e){var t=e.block,n=e.model,r=e.options,a=r.tolang,i=r.fromlang;if(!t.is("is-translator-loading"))return t.set("is-translator-loading",!0),n.translate({tolang:a,fromlang:i}).then((function(){t.set({"is-translator-error":!1,"is-translator-loading":!1,"is-letter-translated":!0}),(0,mt.ZP)({chain:["trans","ok","from",i,"to",a]})})).catch((function(e){t.set({"is-translator-loading":!1,"is-translator-error":!0}),J.default.error({text:i18n("Не удалось перевести текст")}),(0,mt.ZP)({chain:["trans","err","from",i,"to",a]}),console.error(e)}))},t.prototype.onLetterOriginal=function(e){e.block.set({"is-letter-translated":!1})},t.prototype.getModel=function(e){var t=e.details.model,n=this.get("router.model.letter"),r=t||n;if(r&&r instanceof ma()&&r.get("messages.length"))if(this.get("router.route").is("#search-letter"))r=Ne().get(this.get("router.model.route.params.id"));else r=r.getExpandMessage();return r},t.prototype.findLetterById=function(e){return this.components.letter.find((function(t){return t.isLetterIdEq(e)}))},t}(O().Mediator),va=O().Mediator.createFromClass("translator-manager",ga),_a=n(19818),ba=function(){},Ea=[En.default,le.default,bn,On,ce.default,ra.default,ie.default,Hn,Ln.default,wn,kn,se.default,Vn.default,nr,er,oe.default,sr,cr,vr,Tr.default,zr,ea,Wn,ta.Z,na.default,ca.Z,da.default,nt.Z,ua.Z,va,rt.Z,_a.Z,Gr,la,yr,ln,jn,hr,qt.default,He.Jg,He.y6,He.GZ,He.TG,He.JV],ya=function(e){if(void 0===e)e=ba;return Ea.map((function(t,n){if("function"==typeof t)return t().then((function(t){if(t.default&&t.default.register)t=t.default;return Ea[n]=t,e(t),t}));else return e(t),t}))},Ta=!1,Aa=null,Sa=[],Oa={},Ca=function(e){if(void 0===e)e=ba;if(!Ta){if(Sa.push(e),null===Aa)Aa=Promise.all(ya()).then((function(){Ta=!1,Ea.forEach((function(e){Oa[e.name]=e})),Sa.forEach(Ca),Sa.length=0}))}else e(Oa,Ea)};O().Mediator.lazyRegister=function(e,t,n){ya((function(r){if(r.name===e&&t.isMounted())r.register(t,n)}))};var wa=n(33073),La=n.n(wa),ka=n(54844);function Ia(e){var t=document.querySelector("meta[name=viewport]");if(!t)(t=document.createElement("meta")).name="viewport",document.head.appendChild(t);t.setAttribute("content",e)}var Ra=n(26699),Da=(0,Zt.pn)((function(){if(X.PREINIT_ALL_MEDIATORS)Ca();if(La().shim(),X.IS_TABLET&&(!X.WEBVIEW||!X.WEBVIEW_MOBILE_MODE_ENABLED)&&!X.OCTAVIUS_MOBILE)Ia("");if(mt.Xz.init(se.default),Ra.Z.setLayoutManager(se.default),M.default.has("blockquote")||M.default.has("blockquote-threads"))Ne().QUOTES_VERSION=X.QUOTES_VERSION;if(document.body.classList.add("default-font"),ka.Z.mac)document.body.classList.add("macintosh-font")})),Ma=n(90065);var Pa=n(22184),Na=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},xa=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var Fa=n(16244),Ua=n(44866);var Ha=n(38524);var Ba=n(38084),Za=function(){return(Za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},Ga=["code","errno","syscall"];function qa(e){if(!e||"object"!=typeof e)return e;if("function"==typeof e.toJSON)return e.toJSON();for(var t=Za(Za({},e),{name:e.name,message:e.message,stack:e.stack}),n=0,r=Ga;n<r.length;n++){var a=r[n];t[a]=e[a]}return t}var ja=n(75298);function Wa(e){return e["default-themeId"]||"default"}function Va(e,t){return e.hasOwnProperty("themeId")||t.themeId||Wa(e)}function za(e,t){var n,r=e.hasOwnProperty("white_portal_forced"),a=e.hasOwnProperty("white_portal_newreg"),i=e.hasOwnProperty("white_portal_available"),o=e.hasOwnProperty("white_portal_has_flag"),s=r||a||i,l=!1;if(s&&!o&&function(e,t){return Va(e,t)===Wa(e)}(e,t))if(r)l=!0,n="forced";else if(a&&/[?&]newreg/.test(window.location.search))l=!0,n="newreg";return{insert:s,apply:l,load:l||Va(e,t)===function(e){return e.white_portal_theme||"t6000"}(e),applyReason:n}}function Ya(){var e,t,n,r=za(M.default.list,_.Z);if(r.apply)ct().send(["wpt_apply"],{i:(e={},e["reason_".concat(r.applyReason)]=1,e)}),_.Z.set("themeId",X.WHITE_PORTAL_THEME),t=function(){new ja.t(X.WHITE_PORTAL_THEME,X.THEMES_PROJECT_NAME,{},"").store().catch((function(e){ct().send(["wpt_apply-error"],{i:{store:1},rlog:"octavius_wpt_experiment",rlog_message:qa(e)})}));var e=v().get("white-portal");if(e)e.save({state:!0}).catch((function(e){ct().send(["wpt_apply-error"],{i:{flag:1},rlog:"octavius_wpt_experiment",rlog_message:qa(e)})}))},n=function(){V.default.off("login",n),t()},V.default.on("login",n)}var Ka=n(99720),Xa=n.n(Ka),Qa=n(75975);function Ja(e,t,n){if(void 0===n)n={};var r=new Date;"number"==typeof n.expires&&r.setTime(r.getTime()+(0,Qa.v0)(n.expires)),t+="",document.cookie=e+"="+t+("number"==typeof n.expires?"; expires="+r.toUTCString():"")+(n.path?"; path="+n.path:"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")}var $a=n(1690),ei=n.n($a),ti=n(37714),ni=O().Block.extend({name:"application-attachment-editor",template:ei(),isolate:!1,isolateEvents:!1,viewer:null,blocks:{},didMount(){Bt.Z.hide();var e=this.get("route").params,t=this.get("route").request.query,n=e.message,r=e.id,a=t.type,i=t.editor;if(n&&r&&a&&i)ti.Z.open(i,{messageId:n,attachType:a,attachId:r});else console.error("Необходимы все параметры")}}),ri=n(29608),ai=n(10073),ii=n.n(ai),oi=n(47174),si=n(38003),li=n(71654),ci=n.n(li),di=n(29678);O().tags["@a11y:tooltip-direction"]=function(e,t,n,r){if(!t)return!1;else return r.newChild("a11y:tooltip-direction",{value:t},0),!1},O().tags["a11y:tooltip-direction"]={scope:!0,toCode:e=>[[O().vdom.interpolateValue("__val__",e.value),'__val__ = "js-tooltip-direction_" + __val__;',"if (__vdom.classNameBuilder) {","  __val__ = __vdom.classNameBuilder(__val__);","}","if (!@@.attrs) {","  @@.attrs = {};","}","if (!@@.attrs.class) {",'  @@.attrs.class = "";',"}",'@@.attrs["class"] += " " + __val__'].join("\n"),""]};var ui=n(9972),fi=n.n(ui),mi=O().Block.extend({name:"tooltip-overlay",template:fi(),defaults:{"break-word":X.WORD_BREAK_IN_TOOLTIP},attrChanged:{hidden(e,t){if(t&&!e)if(this.setCoordinates(),!this.get("quick-switch"))return void(this.el.style.animation="scaling 0.2s cubic-bezier(0.270, 0.010, 0.000, 1.000)");if(e)this.el.style.animation="",this.el.style.left="0px",this.el.style.top="0px"}},getTargetType(){var e=this.get("target"),t="bottom",n=(0,An.selector)(".".concat("js-tooltip-direction_","left")),r=(0,An.selector)(".".concat("js-tooltip-direction_","right")),a=(0,An.selector)(".".concat("js-tooltip-direction_","top")),i=(0,An.selector)(".".concat("js-tooltip-direction_","letter-bottom"));if(e.closest(n))t="left";if(e.closest(r))t="right";if(e.closest(a))t="top";if(e.closest(i))t="letter-bottom";return t},setCoordinates(){var e,t,n,r,a,i=this.get("target"),o=window.innerWidth,s=window.innerHeight,l=this.el.offsetWidth,c=this.el.offsetHeight,d=(0,An.selector)(".js-letter-list-item"),u=i.getBoundingClientRect();switch(this.getTargetType()){case"letter-bottom":var f=i.closest(d),m=f.getBoundingClientRect();if(r=u.right-i.offsetWidth/2-l/2>8,n=u.right-i.offsetWidth/2+l/2<o-8,a=m.bottom+c<s-8,n&&r)e=u.right-i.offsetWidth/2-l/2;else if(!r)e=8;else e=o-l-8;if(a)t=m.bottom+1;else t=m.top-c-1;break;case"letter-subject":if(m=(f=i.closest(d)).getBoundingClientRect(),e=u.left,a=m.bottom+c<s-8)t=m.bottom+1;else t=m.top-c-1;break;case"bottom":if(n=(e=u.right-i.offsetWidth/2-l/2)+l<o-8,!(r=e>8))e=8;else if(!n)e=o-l-8;if(!(a=(t=u.bottom+4)+c<s-8))t=u.top-c-4;break;case"top":if(n=(e=u.right-i.offsetWidth/2-l/2)+l<o-8,!(r=e>8))e=8;else if(!n)e=o-l-8;if(!((t=u.top-c-4)-c>8))t=u.bottom+4;break;case"right":e=u.right+4,t=u.top+i.offsetHeight/2-c/2;break;case"left":e=u.left-l-4,t=u.top+i.offsetHeight/2-c/2}this.el.style.left="".concat(e,"px"),this.el.style.top="".concat(t,"px")}}),hi=O().Block.extend({name:"tooltip",template:ci(),blocks:{"tooltip-overlay":mi},defaults:{disabled:X.DISABLE_TOOLTIPS,hidden:!0,content:"",hint:"",target:null,"quick-switch":!1},target:null,lastTarget:null,isQuickSwitch:!1,quickSwitchTimeout:20,delay:400,titleMaxLength:130,didMount(){this.$on(document,"mouseover","onMouseOver"),this.show=this.show.bind(this)},onMouseOver(e){for(var t=e.target;t&&t!==document;){if(t.getAttribute("title")||t.getAttribute("data-title")){for(var n=t.classList,r=!1,a=0;a<n.length;++a)if(di.locator.isWelter(n[a])){r=!0;break}if(n.length&&!r){if(this.target!==t){if(this.target)this.hide();if(this.target=t,this.lastTarget){if(this.$off(this.lastTarget,"mouseleave","hide"),this.$off(this.lastTarget,"mousedown","hide"),this.$off(document,"keydown","hide"),this.$off(this.lastTarget,"click","onClick"),this.scrollable)this.$off(this.scrollable,"scroll","hide"),this.scrollable=null;this.lastTarget=null}if(t.matches('[type="file"]'))return;if(this.hideBrowserTooltip(),this.scrollable=this.getScrollable(),this.$on(this.target,"mouseleave","hide"),this.$on(this.target,"mousedown","hide"),this.$on(document,"keydown","hide"),this.$on(this.target,"click","onClick"),this.scrollable)this.$on(this.scrollable,"scroll","hide");this.set("quick-switch",this.isQuickSwitch),this.showTimeout=setTimeout(this.show,this.isQuickSwitch?0:this.delay)}break}else this.hideBrowserTooltip(t),t=t.parentNode}else t=t.parentNode}},onClick(e){setTimeout(()=>{if(document.body.contains(e.target))this.hideBrowserTooltip(e.target)},20)},getScrollable(){for(var e=this.target,t=(0,An.selector)(".scrollable");e!==document;){if(e.matches(t))return e;e=e.parentNode}},hideBrowserTooltip(e){for(var t=this.target||e;t&&t!==document;){if(t.hasAttribute("title")){var n=t.getAttribute("title");t.setAttribute("data-title",n),t.removeAttribute("title")}t=t.parentNode}},setBrowserTooltip(){for(var e=this.target;e&&e!==document;){if(e.hasAttribute("data-title")){var t=e.getAttribute("data-title");e.setAttribute("title",t),e.removeAttribute("data-title")}e=e.parentNode}},hide(){clearTimeout(this.showTimeout),this.set({content:"",hint:"",target:null,hidden:!0}),this.setBrowserTooltip(),this.lastTarget=this.target,this.target=null,clearTimeout(this.switchTimeout),this.isQuickSwitch=!0,this.switchTimeout=setTimeout(()=>{this.isQuickSwitch=!1},this.quickSwitchTimeout)},show(){if(!this.is("disabled")){var e=this.getTitle(),t=this.getShortcut(),n=this.getMode();if(e){switch(n){case"overflow":if(this.target.offsetWidth>=this.target.scrollWidth&&this.target.offsetHeight>=this.target.scrollHeight)return}this.set({hint:t,content:e,target:this.target}),this.set("hidden",!1)}}},getTitle(){if(!this.target)return"";else return this.target.getAttribute("data-title")||this.target.getAttribute("title")||""},getShortcut(){if(!this.target)return"";else return this.target.getAttribute("data-title-shortcut")||""},getMode(){if(!this.target)return"auto";else return this.target.getAttribute("data-title-mode")||"auto"},didUnmount(){if(this.$off(document,"mouseover","onMouseOver"),this.lastTarget){if(this.$off(this.lastTarget,"mouseleave","hide"),this.$off(this.lastTarget,"mousedown","hide"),this.$off(document,"keydown","hide"),this.$off(this.lastTarget,"click","onClick"),this.scrollable)this.$off(this.scrollable,"scroll","hide");this.lastTarget=null}}}),pi={setup(){new hi({router:app}).renderTo(document.body),this.setup=()=>{}}},gi=n(69335),vi=n(26436),_i=n.n(vi),bi=O().Block.extend({name:"counters",template:_i(),blocks:{},defaults:{vkcid:b.Z.get("initialUser.vkc_user_id")},getPlacements:()=>["counter-tns","counter-li","counter-top","counter-top-hit"].map(e=>Wt().placement(e)),didMount(){this.getPlacements().forEach(e=>{if(e)e.attachToContainer(this.refs[e.name]).wakeUp()})},didUnmount(){this.getPlacements().forEach(e=>{if(e)e.sleep()})}}),Ei=n(11594),yi=n(16111),Ti=n(55220),Ai=n(91622),Si=n(75589),Oi=n(42180),Ci=n(51474),wi=n(92784),Li=n.n(wi),ki=(0,Zt.pn)((function(){return Promise.resolve().then(n.bind(n,56925))})),Ii=O().Block.extend({name:"settings-dock",template:Li(),defaults:{show:!1,startSection:"appearance",applicationElement:null,thirtyFiftyMode:X.SETTINGS_DOCK_30_50_MODE,disableExpand:X.SETTINGS_DOCK_DISABLE_EXPAND_BUTTON,disableAutoExpand:X.SETTINGS_DOCK_DISABLE_AUTO_EXPAND,startFullscreen:X.SETTINGS_DOCK_START_FULL_SCREEN,support3pane:!0,layoutType:"2pane","can-toggle-ponymode":!0,ponymode:!1,"can-toggle-shortcuts":!0,"manual-shortcuts":!1,threads:!0,theme:null,darkMode:!1,userLang:"ru_RU",metathreadsData:[],metathreadsFiltersCount:0,metathreadsFiltersCountLoading:!1,helpLink:"metathreads","can-toggle-todo":!1,todo:!1,"letters-dividers-enabled":!1,"can-toggle-letters-dividers":!1},constructor:function(){O().Block.apply(this,arguments),this.handleEvent=this.handleEvent.bind(this),this.onMetathreadsSettingsEdit=this.onMetathreadsSettingsEdit.bind(this),this.onMetathreadsHelpClick=this.onMetathreadsHelpClick.bind(this)},lazySettingsDock:ki,handleEvent:function(e){this.broadcast(e.type,e.details)},uid:0,onMetathreadsSettingsEdit:function(e){var t=this;return(0,me.default)({type:dt.EDIT_METATHREADS_SETTINGS,settings:e,uid:this.uid++}).then((function(e){return t.broadcast("metathreads:settings:updated"),e}))},onMetathreadsHelpClick:function(){this.broadcast("help:open",this.attrs.helpLink)},getApplicationElement:function(){if(!this.applicationElenemt)this.applicationElement=document.querySelector((0,An.selector)(".application-mail__wrap"));return this.applicationElement},getThemes:function(){return{main:it.Z.getModels(),colorized:it.Z.getColorizedModels(),selected:it.Z.getSelectedModel()}}}),Ri=n(91531),Di=n.n(Ri),Mi=n(68032),Pi=document.createElement("div");Pi.style.cssText="\n    position: absolute;\n    display : none;\n    width: 1px;\n    height: 1px;\n";var Ni=O().Block.extend({name:"shortcut",template:Di(),defaults:{shortcut:"shift+?|shift+&"},events:{click:"onBlockClick"},onBlockClick:function(){var e=this;if(this.layer)this.layer.broadcast("dimmer:click");ne.default.open("shortcut",{},{dimmer:!0}).then((function(t){e.layer=t,(0,mt.ZP)({chain:["shortcut"],intervals:[["help_show","1"]]})}))},updateTitleByElement:function(e){if(!e.getAttribute("data-shortcut-title")){if(e.getAttribute("title")||e.getAttribute("data-title")){var t=Mi.Z.getShortcutTitle(e.getAttribute("data-shortcut"));if(t)e.setAttribute("data-title-shortcut","".concat(t))}e.setAttribute("data-shortcut-title",1)}},updateTitles:function(){for(var e=0,t=this.shortcut.getShortcutItems();e<t.length;e++){var n=t[e];if(!O().Block.get(n))this.updateTitleByElement(n)}},didMount:function(){var e=this;this.shortcut=new Mi.Z,this.shortcut._canDoIt=function(e){for(var t=e.offsetParent;t&&!t.className.includes("dropdown ");)t=t.offsetParent;var n="visible"===getComputedStyle(e).visibility||t&&t.className.includes("dropdown ")&&"visible"===getComputedStyle(t).visibility;if(n){var r=ne.default.getInstance(),a=(Q.default.getView||Q.default.default.getView)(),i=r&&r.get("active")&&!r.el.contains(e),o=a&&a.get("active")&&!a.el.contains(e);if(i||o)n=!1}return n},this.shortcut._doAction=function(t,n){var r=e.shortcut._canDoIt(t);if(r){var a=O().Block.get(t);if(a&&n.uiname)a.broadcast(n.uiname.replace("-",":"));else{var i=void 0,o=void 0;if("function"==typeof Event)i=new Event("mousedown"),o=new Event("mouseup");else i=document.createEvent("MouseEvents"),o=document.createEvent("MouseEvents"),i.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,void 0,null),o.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,void 0,null);if(n.uiname)Pi.setAttribute("data-name",n.uiname),t.parentElement.appendChild(Pi),Pi.dispatchEvent(i),Pi.dispatchEvent(o),Pi.click(),setTimeout((function(){Pi.setAttribute("data-name","")}),0);else if("INPUT"==t.nodeName&&("text"==t.type||"password"==t.type)||"TEXTAREA"==t.nodeName)t.focus();else t.dispatchEvent(i),t.dispatchEvent(o),t.click();return!0}(0,mt.ZP)({chain:["shortcut"],intervals:[[String(n.shortcut),"1"]]})}return r},this.updateTitles()}}),xi=n(13839),Fi=n(32849),Ui=n(39385),Hi=(0,Zt.pn)((function(){return n.e(4958).then(n.bind(n,34958)).then((function(e){return e.LetterHeaderActions}))})),Bi=(0,Zt.pn)((function(){return Promise.resolve().then(n.bind(n,62313)).then((function(e){return e.ListLetterHeaderActions}))})),Zi=(0,Zt.pn)((function(){return Promise.resolve().then(n.bind(n,19465))})),Gi=(0,Zt.pn)((function(){return Promise.all([n.e(9308),n.e(7732)]).then(n.bind(n,14553)).then((function(e){return e.WidgetColumn}))})),qi=(0,Zt.pn)((function(){return Promise.all([n.e(7604),n.e(4834)]).then(n.bind(n,67604))})),ji=(0,Zt.pn)((function(){return Promise.resolve().then(n.bind(n,21610))})),Wi=O().Block.extend({name:"application-mail",template:ii(),performanceTrace:!0,isolate:!1,isolateEvents:!1,_gSilent:(0,oi.Z)({el:document.body,holder:window,timeout:150}),blocks:{contextmenu:gi.Z,counters:bi,dimmer:Ei.Z,"download-frame":yi.Z,layout:Ai.ZP,"layer-window":Ti.default,"letter-list":Xn.Z,"letter-list-item-adv":Jt.Z,octopus:Pn.Z,"panel-with-selected":Oi.Z,"portal-menu":Nn.ZP,"react-async":Ci.Z,scrollable:en.Z,shortcut:Ni,"sidebar-folders":xi.Z,"sidebar-search":Fi.Z,slot:Xt.Z,"advert-column":Qt,thread:Ui.Z,progress:Rr,renovator:jr.Z,"settings-dock":Ii,"mobile-sidebar":dr.Z,"webview-mobile-header":ur.Z},defaults:{"user-resize":X.USER_LAYOUT_RESIZE,"user-resize-3pane":X.USER_LAYOUT_RESIZE_3PANE,"is-webview":X.WEBVIEW,"is-octavius-mobile":X.OCTAVIUS_MOBILE,"disable-footer-app-toolbar":X.DISABLE_FOOTER_APP_TOOLBAR},lazySearchPanel:ji,lazyListLetterHeaderActions:Bi,lazyWidgetColumn:Gi,lazyVKUIOverlay:qi,lazyLetterHeaderActions:Hi,lazyVkMessengerProvider:Zi,checkShowLetterPreview3Pane:function(e){var t=this.get("router");return this.is3Pane()&&e||!t.route.is("#search-letter #read-letter")},isAdvEnable:function(){return X.LETTER_CONTENT_ADV_ENABLE&&X.HIDE_TOYS!==X.BL_PROP_NAME},is3Pane:function(){var e=this.get("uiLayout"),t=e.type,n=e.support3pane;return"3pane"===t&&n},showLayoutBorders:function(){return!1},useNewThread:function(){return X.NEW_THREAD},getSearchPlaceholder:function(){var e;if(!this.usePortalSearchPanel())return null;else return X.HIDE_HEADLINE&&X.NEW_TOOLBAR?(0,Ai.Nx)():(null===(e=null===__PH||void 0===__PH?void 0:__PH.getSearchPlaceholder)||void 0===e?void 0:e.call(__PH))||new Promise((function(){}))},isWebviewMobileMode:function(){return this.attrs.mobile&&(this.attrs["is-webview"]||this.attrs["is-octavius-mobile"])},useNewToolbar:function(){return X.NEW_TOOLBAR},usePromoNewToolbar:function(){return X.NEW_TOOLBAR&&X.PROMO_NEW_TOOLBAR},useTopLineAdv:function(){var e=this.get("uiLayout"),t=this.get("folder"),n=this.get("uiLetters"),r=this.is3Pane();return X.ADS_MOVE_TOP_LINE&&(r&&X.ADS_MOVE_TOP_LINE_3PANE||!r&&X.ADS_MOVE_TOP_LINE_2PANE)&&X.NEW_TOOLBAR&&(0,ri.N6)(n,e,t)},useReactSearchPanel:function(){return X.SEARCH_PANEL_REACT},usePortalSearchPanel:function(){return X.SEARCH_PANEL_PORTAL},isThreadRounded:function(){return!0},isDragIconShown:function(){return X.RESIZER_DRAG_ICON_SHOWN},constructor:function(){O().Block.prototype.constructor.apply(this,arguments)},didMount:function(){if(Tn.Z.setup(gi.Z),si.Z.setup(Si.Z),pi.setup(),(0,mt.ZP)(["application-mail","mount"]),!this.get("folder")||!this.get("router"))ct().send("crossnav-am-no-val-err",{rlog:"crossnav-am-no-val-err",rlog_message:Object.entries(this.attrs).map((function(e){return[e[0],typeof e[1]]}))})},didUnmount:function(){Tn.Z.teardown(),si.Z.teardown(),(0,mt.ZP)(["application-mail","unmount"])}}),Vi=n(72516),zi=n.n(Vi),Yi=n(50678),Ki=n(73649),Xi=function(e){(0,mt.ZP)(["viewer-app"].concat(e))},Qi=O().Block.extend({name:"application-viewer",template:zi(),isolate:!1,isolateEvents:!1,viewer:null,blocks:{"notify-stack":Ki.Z,counters:bi},constructor:function(){O().Block.prototype.constructor.apply(this,arguments),Ia("")},didMount:function(){var e=this;Promise.all([n.e(4131),n.e(3626),n.e(3541)]).then((function(){var t=[n(46015),n(44507)];(function(t,r){(0,r.loadToolkit)((function(){Promise.all([n.e(1937),n.e(1254),n.e(4359)]).then(n.bind(n,33230)).then((function(t){var n,r=t.default;if(!e.destroyed&&!e.zombie){var a,i,o,s;Bt.Z.hide();var l=e.is("attachment-temporary");if(l)a=(n=e.get("attachmentTemporary")).list,s=n.attachment,i=e.get("route").params.message;else o=e.get("message"),s=e.get("attachment"),a=o.get("attaches.list"),i=o.id;if(!s){if(Xi(["error","no-attachment"]),l&&a&&a.length){var c=e.get("router"),d={"x-email":V.default.user.getEmail()};Xi(["error","no-attachment","find-first"]),window.location.href=c.getUrl("#attachment-temporary",{message:i,id:(0,Yi.Z)(a[0].id),path:""},d)}Xi(["show","empty-viewer"]),s=null}var u=new r({message:o,messageId:i,attachment:s,models:a,modal:!0,router:e.get("router"),temporary:e.is("attachment-temporary")}).renderTo(e.refs["attachment-viewer"]);bn.registerComponent("viewer",r),bn.register(u)}}))}))}).apply(null,t)})).catch(n.oe),ne.default.setup(Ti.default),J.default.setup(this.ids["notify-stack"])}}),Ji=O().Block.extend({name:"application",template:Xa(),performanceTrace:"track",blocks:{"application-mail":Wi,"application-viewer":Qi,"application-attachment-editor":ni,"notify-stack":Ki.Z},constructor:function(){if(O().Block.prototype.constructor.apply(this,arguments),this.debouncedUpdateStyle=ke().debounce(this.updateStyle,X.RESIZE_UPDATE_DEBOUNCE_TIME,this),X.TOUCH_MODE)window.addEventListener("resize",this.debouncedUpdateStyle);Ja("gmt",-(new Date).getTimezoneOffset()/60,{path:"/"})},didMount:function(){J.default.setup(this.ids["notify-stack"])},didUnmount:function(){window.removeEventListener("resize",this.debouncedUpdateStyle)},updateStyle:function(){this.el.style=this.getStyle()},useNewToolbar:function(){return X.NEW_TOOLBAR},isVKMiniApp:function(){return X.IS_VK_MINI_APP},isHideHeadline:function(){return X.HIDE_HEADLINE},isWebView:function(){return X.WEBVIEW},getStyle:function(){if(X.TOUCH_MODE)return"height: calc(".concat(window.innerHeight,"px - ").concat(X.HEADLINE_HEIGHT,");");if(!X.HIDE_HEADLINE||!X.NEW_TOOLBAR||X.WEBVIEW)return"height: calc(100vh - ".concat(X.HEADLINE_HEIGHT,");")}});n(93059),n(2681),n(77735),n(88116);O().tags.$mixins["shortcut-title"]=function(e,t){if(ka.Z.mac&&t["shortcut-mac"])t.shortcut=t["shortcut-mac"];var n=t.shortcut||t["dropdown-shortcut"];if(n){var r=Mi.Z.getShortcutTitle(n);if(r)t["title-shortcut"]="".concat(r)}};n(4308);var $i=n(55540),eo=n(66996),to=n.n(eo),no=n(18891),ro=n.n(no),ao=n(71171),io=n.n(ao),oo=n(89291),so=n.n(oo);function lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uo=(0,$i.Z)(location.href),fo=/Array|Object/,mo=new(to());W().setup({safeMode:!0}),y().setup({safeMode:!0,email:uo["x-email"],timeout:0,baseUrl:"/api/",sdcUrl:_.Z.get("urls.authUrl")+"/sdc",errorHandlers:[wt(),so(),ro(),io()]}),y().serialize=e=>{for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(fo.test(e.toString.call(n)))e[t]=JSON.stringify(n)}return e};var ho=y().Request.prototype.end;if(y().Request.prototype.end=function(e,t){if(Array.isArray(t)&&"AjaxResponse"===t[0]){var n;t={status:"OK"===t[1]?"200":"400",body:t[2]};for(var r=0;r<t.body.list.length;r++)if(n=t.body.list[r],Array.isArray(n.n))n.id=[n.id].concat(n.n).join(";")}if(!M.default.has("disable-uploader-replace")&&this.url.includes(mo.getUrl("createCloudAttachment"))){var a=t.body,i=a.loader_url;if(i&&/octavius/.test(location.host))a.loader_url=i.replace(/\.e\./,".octavius.");if(i&&/vk/.test(location.host))a.loader_url=i.replace(/\.e\./,".vk.")}return ho.call(this,e,t)},"undefined"!=typeof coreKeeper)y().request.on("end",(e,t)=>{window.coreKeeper.api(t,{log5XX:M.default.has("log_5xx")})});y().url=(e=>{var t={},n=M.default.getAsTypedArray("rpc-url",M.default.String,[],",");if(n)n.forEach(e=>{e=e.split(":"),t[e[0]]=e[1]});return function(n,r){var a=lo(n.split("?",2),2),i=a[0],o=a[1],s=n;if("string"==typeof t[i])s=t[i]+(void 0===o?"":"?".concat(o));return e.call(this,s,r)}})(y().url),Me().on("folderSecure",()=>Promise.reject()),Me().on("complete",()=>H().prototype.storage.clear());var po=M.default.getAsInt("folder-max-level",0);if(0!==po)H().MAX_CHILD_LEVEL=po-1;O().PerformanceTrace.on("data",e=>{(0,mt.ZP)({type:"feast_performance_trace",data:e.entries}),e.clear()});function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){_o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _o(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var bo={},Eo={};function yo(e,t){return ke().extend({url:{pattern:e,params:{folder:{default:H().INBOX,decode:e=>bo[e]||parseInt(e,10)||H().INBOX}},toUrl(e,t,n){t=vo(vo({},t),X.URL_EXTRA_PARAMS);var r=(e=e||{}).folder,a=e.letter;if(void 0===r)if(e instanceof H())r=e.is("system")?e.get("type"):e.id;else if(e instanceof Ne()){if(r=e.get("folder"),e instanceof ma())a=e.id;else if(e.meta("thread_id"))a=e.meta("thread_id");else if(e.id)a="0:".concat(e.id,":0");var i=H().all.get(r);if(i)r=i.is("system")?i.get("type"):i.id}return n({folder:Eo[r||H().INBOX]||r,letter:a||"letter-not-found",part:e.part||"",id:e.id||""},t)}}},t)}function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){So(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function So(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}Object.keys(H()).forEach(e=>{var t=e.slice(5).toLowerCase(),n=H()[t.toUpperCase()];if(e.startsWith("TYPE_")&&n>=0)if(bo[t]=n,Eo[n]=t,n===H().SCHOOL)bo.study=n,Eo[n]="study"});var Oo=yo("/:folder?"),Co=Oo.url.toUrl;Oo.url.toUrl=(e,t,n)=>{if(e&&e.preserveFilters)return Co(e,Ao(Ao({},t),Xr.Z.getQuery(e.preserveSortings)),n);else return Co(e,t,n)},Oo.filterQuery=Xr.Z,Oo.aliases={compose:{pattern:"/compose/:composeid?/:composeaction?"},contacts:{pattern:"/contacts"}};var wo=Oo,Lo=yo("/:folder/:letter/:part?");Lo.filterQuery=Xr.Z;var ko=Lo,Io=yo("/search"),Ro=yo("/search/:folder/:letter/:id");function Do(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.match(/(\d+);(.*)/);if(n){var r=Do(n,3),a=r[1],i=r[2];return"/".concat(t,"/0:").concat(a,":").concat(t,"/").concat(i,"/")}else return"/".concat(t,"/0:").concat(e,":").concat(t,"/")}var No={url:{pattern:"/cgi-bin/:method"},redirectUrl(e,t){var n=e.method,r=t.id,a="/";if("readmsg"===n&&r){delete t.id;var i=Po(r),o=ft().queryString.stringify(t);a="".concat(i,"?").concat(o)}return a}},xo={url:{pattern:"/messages/:folderAlias?/:folderId?"},redirectUrl(e){var t=e.folderAlias,n=e.folderId,r="/";if(t&&"folder"===t&&n)r="/".concat(n,"/");else if(t&&"folder"!==t)r="/".concat(t,"/");return r}},Fo={url:{pattern:"/message/:letterId",toUrl(e){var t=e.letterId,n=e.mod,r=e.folderId,a=void 0===r?0:r;return"/message/".concat(t,"/")+(n?"".concat(n,"/"):"")+"?folder_id=".concat(encodeURIComponent(String(a)))}},redirectUrl(e,t){var n=e.letterId,r=t.folder_id,a="/";if(n)a=Po(n,void 0===r?0:r);return a}},Uo={url:{pattern:"/thread/:threadId"},redirectUrl(e){var t=e.threadId,n="/";if(t)n="/inbox/".concat(t,"/");return n}},Ho=n(14671),Bo=function(){return(Bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},Zo=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Go=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},qo=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},jo=["vk-mini-app"];function Wo(e,t){var n=e.router.getUrl("#error",{},Bo(Bo({},t),e.query));e.redirectTo(n,!0)}function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){Yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yo(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var Ko=zo(zo({access:function(e){var t;return Zo(this,void 0,void 0,(function(){var n,r,a,i,o,s;return Go(this,(function(l){switch(l.label){case 0:if("#vk-mini-app"!==e.route.id||!X.IS_VK_MINI_APP)return[3,8];if(null===(t=window.vkMiniApp)||void 0===t?void 0:t.authorized)return Wo(e),[2];n=void 0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,Kn.Z)("@mail/vk-mini-app")];case 2:return n=l.sent(),[3,4];case 3:return l.sent(),(0,mt.ZP)("vk-mini-app-req-err"),Wo(e),[2];case 4:r=n.default,a=n.VKMiniAppErrorType,l.label=5;case 5:return l.trys.push([5,7,,8]),window.vkMiniApp=new r,[4,(0,Ho.Z)()];case 6:return l.sent(),window.vkMiniApp.authorized=!0,s=qo(qo([],jo,!0),["init"],!1),(0,mt.ZP)({chain:s}),[2,window.vkMiniApp];case 7:if(i=l.sent(),o=i.error,s=qo([],jo,!0),null==o?void 0:o.customType)s.push("fail"),(0,mt.ZP)({chain:s,dwh:{error:o.customType}});else s.push("error"),(0,mt.ZP)({chain:s,dwh:{error:i}});if(o.customType===a.VKComAccountNotFound)return Wo(e,{error:i18n("У вас ещё нет почтового ящика"),href:X.VK_MAIL_OLD_MINI_APP_URL,action:i18n("Создать почту")}),[2];else return Wo(e),[3,8];case 8:return[2,V.default.login()]}}))}))},model:ue.default.getLoader(),"#error":{url:"/error"},"#!septimaCgiBin":No,"#!septimaMsglist":xo,"#!septimaReadmsg":Fo,"#!septimaThread":Uo},X.IS_VK_MINI_APP?{"#vk-mini-app":{url:"/vk-mini-app"}}:{}),{},{"#search":Io,"#search-letter":Ro,"#attachment":{url:"/attach/:message?/:id?/:path?"},"#attachment-temporary":{url:"/attachment/temporary/:message?/:id?/:path?"},"#attachment-editor":{url:"/attachment/editor/:message?/:id?"},"#letters":wo,"#read-letter":ko});Pt.yc.timeEnd("biz-app-load",{score:"app:load"}),Pt.yc.time("biz-app-init"),(0,Ua.b)("onload"),Da(),window.define("flags",()=>v());var Xo=()=>window["app-canvas"][0]||window["app-canvas"],Qo=ft().create(Ko),Jo=["#vk-mini-app","#attachment","#attachment-temporary","#attachment-editor"];Pt.yc.group("app-setup-env",()=>{var e;se.default.register(Gt()),ne.default.setup(Ti.default),function(e){var t=this;e.one("actionend",(function(){return Na(t,void 0,void 0,(function(){var e,t;return xa(this,(function(r){if(e=new Pa.Z,t=Promise.all([n.e(3778),n.e(7550)]).then(n.bind(n,97550)).then((function(e){return e.default})),void 0!==it.Z.getSelectedModel().isDarkTheme)e.resolve(it.Z.getSelectedModel().isDarkMode());else it.Z.themes.one("themes:apply",(function(t){e.resolve(t.isDarkMode())}));return Promise.all([t,e.promise]).then((function(e){var t=e[0],n=e[1],r=new t(V.default.user.getEmail(),V.default.user.get("lang"),n,J.default.getContainer());r.init(),it.Z.themes.on("themes:apply",(function(e){r.setDarkTheme(e.isDarkMode())}))})),[2]}))}))}))}(ue.default),e=ue.default,it.Z.themes.on("themes:apply",(function(e){$.default.applyTheme(e)})),e.on("actionend",(function(e){var t=e.details.action;if([dt.NAVIGATE,dt.TOGGLE_METATHREAD,dt.TOGGLE_DISCOUNTS,dt.UPDATE_ALL].includes(t.type))$.default.update()})),da.default.register(it.Z.themes),Ya(),(0,Ha.Z)(),F().DANGEROUS_CLOUD_URL=X.CLOUD_HOST}),Pt.yc.time("app-setup-router"),An.default.init(Qo,X.LAZY_SMOKE_SCREEN_INIT),Ba.Z.init(Qo),Qo.appSetup={};ya(e=>{e.register(Qo,{skipLazy:!0}),e.register(ue.default,{skipLazy:!0})}),it.Z.applyUserTheme(Qo.activeUrl.query),function(e){var t=e.app,n={"#letters":"list","#read-letter":"thread"};t.on("beforeroute",(function(e,t){var r=n[e.target.activeRoute.id],a=n[t.route.id];if(a&&r===n["#read-letter"])if(a===n["#letters"])Pt.yc.time("letter-open");else if(a===n["#read-letter"])Pt.yc.time("letter-update")}))}({request:W(),app:Qo}),function(e){var t=e.request,n=e.xray;t.on("end",(function(e,t){var r,a=t.url,i=t.duration,o=null;if("/api/v1/threads/status/smart"===a)o="status";else if("/api/v1/aliases"===a)o="aliases";if(o&&t.isOK()){var s=function(e){var t="fail";if(e<100)t="instantly1";else if(e<300)t="instantly2";else if(e<500)t="instantly3";else if(e<1e3)t="very-fast";else if(e<2e3)t="fast";else if(e<4e3)t="moderate";else if(e<8e3)t="slightly-slow";else if(e<15e3)t="slow";else if(e<3e4)t="very-slow";return t}(i);n.send("adman-c-api",{i:(r={},r["".concat(o,"_hit")]=i,r["".concat(o,"_sc-").concat(s,"_hit")]=i,r),dwh:{country_id:X.RB_COUNTRY_ID,province_id:X.RB_PROVINCE_ID,region_id:X.RB_REGION_ID,duration_type:s}})}}))}({request:W(),xray:ct()}),Qo.on("beforeroute",e=>{var t=e.target,n=t.activeRoute,r=t.activeRequest,a=["on_route",n.id.slice(1)];if(window.sendLoadlogRadar("loadflow_step-20","beforeroute"+a.join(" ")),n.id.match("#!septima")){var i;try{if(!(i=n.redirectUrl(r.params,r.query)).match("\\?")&&r.search)i+=r.search}catch(e){i="/"}window.sendLoadlogRadar("loadflow_step-20","Septima redirect "+i),r.redirectTo(i)}var o=null;if(n.is("#read-letter")){var s=(Qo.activeRequest||{}).params||{},l=s.folder,c=s.letter,d=(Qo.model||{}).letters;if(d){var u="",f=!1,m=!1,h=d.find(e=>e.id===c);if(h){var p=h.attributes||{};u=((p.correspondents||{}).from||[]).map(e=>e.email).filter(Boolean).join(",");var g=p.flags;f=!!g.newsletter,m=g.attach}o={folder_id:l,letter_id:c,send_email:u,newsletter:f,attach_state:m}}}(0,mt.ZP)({chain:a,data:r.params,dwh:o})}),Qo.on("routeend",e=>{var t=e.target,n=t.activeRoute,r=t.activeRequest,a=["on_routeend",n.id.slice(1)];if(window.sendLoadlogRadar("loadflow_step-20","routeend"+a.join(" ")),(0,mt.ZP)({chain:a,data:r.params}),r.query){var i=new gt(t);i.handleEnableOctavius(),i.handleToggleLayout(),i.handleToggleMetathreads(),i.handleSetTheme(),i.handleToggleToMyselfMetathread(),i.handleOpenThemesPanel(),i.handleOpenCleanMaster(),i.handleQueryAction(),i.handleOpenComposeTemplate(),i.handleOpenFromExtension()}}),Qo.on("beforereload",()=>{if(Qo.isDead)return!1;else return window.sendLoadlogRadar("loadflow_step-20","beforereload"),Pt.yc.group("app-render-reload",()=>{var e=Xo();if(Qo.view)Qo.view.destroy();Qo.view=new Ji(ue.default.getData(),{router:Qo,dataSource:ue.default}),Qo.view.renderTo(e)},{score:"app:render"}),!1}),Pt.yc.time("app-first-fetch"),Qo.one("routeend",(function(){Pt.yc.timeEnd("biz-app-init",{score:"app:init"}),Pt.yc.time("biz-app-render"),Pt.yc.timeEnd("app-first-fetch",{score:"fetch"}),Pt.yc.group("app-first-render",()=>{if(window.sendLoadlogRadar("loadflow_step-20","one routeend top"),!Jo.some(e=>Qo.route.is(e)))Gt().set("visible",!0);var e=Xo();_timers.data+=_now(),_timers.render=-_now(),Qo.view=new Ji(ue.default.getData(),{router:Qo,dataSource:ue.default}),ue.default.on("change",e=>{var t=e.details.changes;if(t.some(e=>e.action.type!==dt.EXECUTE_JSSDK_ACTION))Qo.view.set(t[t.length-1].data)}),e.removeChild(e.firstElementChild),Qo.view.renderTo(e),Pt.yc.timeEnd("biz-app-render",{score:"app:render"})},{score:"app:render"}),window.appStarted("routeend"),_timers.render+=_now(),_timers.all+=_now(),kt().add("timings",_timers);var e=Date.now()-window._timers.start_ts,t=Object.keys(_timers).filter(e=>_timers[e]>=0).map(e=>({name:e,value:_timers[e]}));if(mt.Xz.sendLoadInfo(e,t),mt.Xz.sendArchiveFoldersInfo(),mt.Xz.send({type:"config_performance_log",data:{sessionStorage:M.default.has("perflog_session_storage"),chunkLength:parseInt((M.default.get("perflog_chunk_length")||{}).data,10),chunks:parseInt((M.default.get("perflog_chunks")||{}).data,10)}}),function(e){var t=e.cfg,n=e.RPC,r=e.app,a=e.xray;(0,He.fO)().then((function(e){var i=e.appendQuery,o=e.buildComparator,s=e.createReleaseDetectClient,l=e.hashComparator;s({xraySend:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.send.apply(a,e)},router:r,location:i("x-email",n.setup("email")),sources:[{name:"build",endpoint:function(){return"/srv-st.json?_=".concat(Math.random())},comparator:o,reloadTimeRange:X.RELOAD_TIMEOUT,initialData:{build:t.get("build")},ondata:(0,Zt.Fc)({filter:X.PRELOAD_RELEASE_BUNDLES_FILTER,staticHost:t.get("staticHost"),jsMap:{paths:t.get("bundles-paths")}})},X.OK_RELOAD&&{name:"hashes",endpoint:function(){return"/api/v1/utils/sota/hash?"+(0,Ma.Z)({token:n.setup("token"),email:n.setup("email"),_:String(Math.random())},!0)},comparator:l,reloadTimeRange:X.OK_RELOAD_TIMEOUT,shadow:X.OK_RELOAD_SHADOW,initialData:{ff_hash:t.get("hashes.ff"),ok_hash:t.get("hashes.ok")}}].filter(Boolean)})}))}({cfg:_.Z,RPC:y(),app:Qo,xray:ct()}),function(e){if(X.FLAGS_AUTOSYNC)v().setAutoSync(!0,y().setup("email"),X.FLAGS_AUTOSYNC_DEBOUNCE),e.on("route-end",(function(){v().sync()})),document.addEventListener("visibilitychange",(function(){v().sync()}))}(Qo),X.HIDE_TOYS)Dt.default.updateOnAction();console.warn("[timing]",t.map(e=>{var t=e.name,n=e.value;return"".concat(t,": ").concat(n.toFixed(3),"ms")}).join(", "))})),Qo.on("route",e=>{if(!("initial"===e.details.initiator))Dt.default.updateOnAction()});var $o=new Promise(e=>{Qo.one("routeend",(function(){if(window.sendLoadlogRadar("loadflow_step-20","appRouteEndReady"),Qo.isReady=!0,e(Qo),!X.IS_VK_MINI_APP||!Qo.failed)(0,Zt._j)(Qo),setTimeout(()=>(0,Zt._j)((0,xe.p)(),Zt.HA),X.LAZY_NONCRIT_TASKS_TIMEOUT)}))});if(Qo.ready=function(e){$o.then(()=>{"function"==typeof window.__hideProgress__&&window.__hideProgress__(),e()})},Pt.yc.timeEnd("app-setup-router"),(0,Fa.Vm)(Qo),function(e,t){var n=t.smokeScreenService,r=t.logger,a=M.default.getAsArray("octavius-filter-url-regexp",["addressbook\\/.*"],":").map((function(e){try{return new RegExp(e)}catch(e){ct().send("p_jserror&i=JS_regexp")}})).filter((function(e){return void 0!==e}));e.listenFrom(document,{autoStart:!0,logger:r,filter:function(t){if(e.isDead)return!1;if(e.route.is("#attachment #attachment-editor"))return!1;for(var r=0;r<a.length;r++)if(a[r].test(t))return!1;if(/#mailruanchor/.test(t))return!1;else return n.isValidURL(t)}})}(Qo,{logger:kt(),smokeScreenService:An.default}),X.WEBVIEW)(0,Zt.Vn)((function(){Rt().send("LoadingCompleted",{ok:!0}).then((function(e){return console.log("VKTeamsBridge init: ",e)})).catch((function(e){return console.error("VKTeamsBridge init error: ",e)}))}));if((0,Zt.Vn)((function(e){(0,He.Bx)().then((function(t){new t({router:e}).renderTo(document.getElementById("drag-and-drop"))}))})),(0,Zt.Vn)((function(e){if(!X.WEBPUSH_METRIC_DISABLE)!function(){var e,t,n=null===(t=null===(e=window.navigator)||void 0===e?void 0:e.serviceWorker)||void 0===t?void 0:t.ready;if(n)n.then((function(e){var t;return null===(t=null==e?void 0:e.pushManager)||void 0===t?void 0:t.getSubscription()})).then((function(e){if(!e)return"none";else return(0,_t.describeSubscription)(e).then((function(e){if(e.applicationServerKey===(0,xt.dv)().api.vapidKey)return"swbox";else return"pushmanager"}))})).catch((function(){return"none"})).then((function(e){var t,n=(null===(t=window.Notification)||void 0===t?void 0:t.permission)||"error";ct().send("webpush",{dwh:{push_type:e,push_permission:n}})}));else ct().send("webpush_serviceworker_absence")}();if(!X.IS_VK_MINI_APP)Ft.Z.getCallsAPIClient();(0,Nt.fb)()})),X.PROMO_MANUAL_LOAD)(0,Zt.rz)(()=>$.default.update(!0));(0,Zt.rz)((function(){Promise.all([(0,He.BA)(),(0,He.L3)()]).then((function(e){(0,e[0])("ctrl+alt+l",e[1].sendLogs)}))})),window.app=Qo,userKeeper.timeEnd("app-require",{score:"app:init"}),window.sendLoadlogRadar("loadflow_step-25","app required"),_timers.init_app+=_now(),(0,xe.p)().ready((function(){userKeeper.timeEnd("app-ready",{score:"app:init"}),userKeeper.timeEnd("page-app-ready",{score:[5e3,1e4,15e3]}),userKeeper.timeEnd("biz-app-ready",{score:"app:ready"})})),app.ready((function(){var e,t;return null===(t=(e=window).__hideBootscreen__)||void 0===t?void 0:t.call(e)})),app.on("login-page",(function(){var e,t;return null===(t=(e=window).__hideBootscreen__)||void 0===t?void 0:t.call(e)})),_timers.data=-_now(),(0,k.t)("app",Qo);var es=Qo},53088:function(e,t){var n;!function(r,a,i){var o=[],s={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){o.push({name:e,fn:t,options:n})},addAsyncTest:function(e){o.push({name:null,fn:e})}},l=function(){};l.prototype=s,l=new l;var c=[];function d(e,t){return typeof e===t}var u=a.documentElement,f="svg"===u.nodeName.toLowerCase();function m(){if("function"!=typeof a.createElement)return a.createElement(arguments[0]);else if(f)return a.createElementNS.call(a,"http://www.w3.org/2000/svg",arguments[0]);else return a.createElement.apply(a,arguments)}function h(e,t,n,r){var i,o,s,l,c="modernizr",d=m("div"),h=function(){var e=a.body;if(!e)(e=m(f?"svg":"body")).fake=!0;return e}();if(parseInt(n,10))for(;n--;)(s=m("div")).id=r?r[n]:c+(n+1),d.appendChild(s);if((i=m("style")).type="text/css",i.id="s"+c,(!h.fake?d:h).appendChild(i),h.appendChild(d),i.styleSheet)i.styleSheet.cssText=e;else i.appendChild(a.createTextNode(e));if(d.id=c,h.fake)h.style.background="",h.style.overflow="hidden",l=u.style.overflow,u.style.overflow="hidden",u.appendChild(h);if(o=t(d,e),h.fake)h.parentNode.removeChild(h),u.style.overflow=l,u.offsetHeight;else d.parentNode.removeChild(d);return!!o}var p=function(){var e=r.matchMedia||r.msMatchMedia;if(e)return function(t){var n=e(t);return n&&n.matches||!1};else return function(e){var t=!1;return h("@media "+e+" { #modernizr { position: absolute; } }",(function(e){t="absolute"==(r.getComputedStyle?r.getComputedStyle(e,null):e.currentStyle).position})),t}}();s.mq=p;var g=s._config.usePrefixes?"Moz O ms Webkit".split(" "):[];s._cssomPrefixes=g;var v={elem:m("modernizr")};l._q.push((function(){delete v.elem}));var _={style:v.elem.style};function b(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function E(e,t){var n=e.length;if("CSS"in r&&"supports"in r.CSS){for(;n--;)if(r.CSS.supports(b(e[n]),t))return!0;return!1}else if("CSSSupportsRule"in r){for(var a=[];n--;)a.push("("+b(e[n])+":"+t+")");return h("@supports ("+(a=a.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"==function(e,t,n){var a;if("getComputedStyle"in r){a=getComputedStyle.call(r,e,t);var i=r.console;if(null!==a){if(n)a=a.getPropertyValue(n)}else if(i){i[i.error?"error":"log"].call(i,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else a=!t&&e.currentStyle&&e.currentStyle[n];return a}(e,null,"position")}))}}function y(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}l._q.unshift((function(){delete _.style}));var T=s._config.usePrefixes?"Moz O ms Webkit".toLowerCase().split(" "):[];function A(e,t){return function(){return e.apply(t,arguments)}}function S(e,t,n,r,a){var i=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+g.join(i+" ")+i).split(" ");if(d(t,"string")||d(t,"undefined"))return function(e,t,n,r){if(r=d(r,"undefined")?!1:r,!d(n,"undefined")){var a=E(e,n);if(!d(a,"undefined"))return a}for(var i,o,s,l,c,u=["modernizr","tspan","samp"];!_.style&&u.length;)i=!0,_.modElem=m(u.shift()),_.style=_.modElem.style;function f(){if(i)delete _.style,delete _.modElem}for(s=e.length,o=0;o<s;o++){if(l=e[o],c=_.style[l],~(""+l).indexOf("-"))l=y(l);if(void 0!==_.style[l])if(!r&&!d(n,"undefined")){try{_.style[l]=n}catch(e){}if(_.style[l]!=c)return f(),"pfx"==t?l:!0}else return f(),"pfx"==t?l:!0}return f(),!1}(o,t,r,a);else return function(e,t,n){var r;for(var a in e)if(e[a]in t){if(!1===n)return e[a];if(d(r=t[e[a]],"function"))return A(r,n||t);else return r}return!1}(o=(e+" "+T.join(i+" ")+i).split(" "),t,n)}s._domPrefixes=T,s.testAllProps=S;var O=function(e){var t,n=w.length,a=r.CSSRule;if(void 0!==a){if(!e)return!1;if((t=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in a)return"@"+e;for(var i=0;i<n;i++){var o=w[i];if(o.toUpperCase()+"_"+t in a)return"@-"+o.toLowerCase()+"-"+e}return!1}};s.atRule=O;var C=s.prefixed=function(e,t,n){if(0===e.indexOf("@"))return O(e);if(-1!=e.indexOf("-"))e=y(e);if(!t)return S(e,"pfx");else return S(e,t,n)},w=(s.prefixedCSS=function(e){var t=C(e);return t&&b(t)},s._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""]);s._prefixes=w;var L=s.testStyles=h;l.addTest("touchevents",(function(){var e;if("ontouchstart"in r||r.DocumentTouch&&a instanceof DocumentTouch)e=!0;else{var t=["@media (",w.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(t,(function(t){e=9===t.offsetTop}))}return e}));var k,I,R=(k=!("onblur"in a.documentElement),function(e,t){var n;if(!e)return!1;if(!t||"string"==typeof t)t=m(t||"div");if(!(n=(e="on"+e)in t)&&k){if(!t.setAttribute)t=m("div");if(t.setAttribute(e,""),n="function"==typeof t[e],void 0!==t[e])t[e]=void 0;t.removeAttribute(e)}return n});function D(e,t){if("object"==typeof e){for(var n in e)if(I(e,n))D(n,e[n])}else{var r=(e=e.toLowerCase()).split("."),a=l[r[0]];if(2==r.length)a=a[r[1]];if(void 0!==a)return l;if(t="function"==typeof t?t():t,1==r.length)l[r[0]]=t;else{if(l[r[0]]&&!(l[r[0]]instanceof Boolean))l[r[0]]=new Boolean(l[r[0]]);l[r[0]][r[1]]=t}!function(e){var t=u.className,n=l._config.classPrefix||"";if(f)t=t.baseVal;if(l._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}if(l._config.enableClasses)if(t+=" "+n+e.join(" "+n),f)u.className.baseVal=t;else u.className=t}([(t&&0!=t?"":"no-")+r.join("-")]),l._trigger(e,t)}return l}s.hasEvent=R,l.addTest("pointerevents",(function(){var e=!1,t=T.length;for(e=l.hasEvent("pointerdown");t--&&!e;)if(R(T[t]+"pointerdown"))e=!0;return e})),function(){var e={}.hasOwnProperty;if(!d(e,"undefined")&&!d(e.call,"undefined"))I=function(t,n){return e.call(t,n)};else I=function(e,t){return t in e&&d(e.constructor.prototype[t],"undefined")}}(),s._l={},s.on=function(e,t){if(!this._l[e])this._l[e]=[];if(this._l[e].push(t),l.hasOwnProperty(e))setTimeout((function(){l._trigger(e,l[e])}),0)},s._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},l._q.push((function(){s.addTest=D})),l.addTest("hovermq",p("(hover)")),l.addTest("passiveeventlisteners",(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});r.addEventListener("test",null,t)}catch(e){}return e})),l.addTest("csspositionsticky",(function(){var e="position:",t=m("a").style;return t.cssText=e+w.join("sticky;"+e).slice(0,-e.length),-1!==t.position.indexOf("sticky")})),function(){var e,t,n,r,a,i;for(var s in o)if(o.hasOwnProperty(s)){if(e=[],(t=o[s]).name)if(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length)for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=d(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++){if(1===(i=e[a].split(".")).length)l[i[0]]=r;else{if(l[i[0]]&&!(l[i[0]]instanceof Boolean))l[i[0]]=new Boolean(l[i[0]]);l[i[0]][i[1]]=r}c.push((r?"":"no-")+i.join("-"))}}}(),delete s.addTest,delete s.addAsyncTest;for(var M=0;M<l._q.length;M++)l._q[M]();if(1)void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}(window,document)},99150:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tr}});var r=n(52745),a=n(57123),i=n.n(a),o=n(66423),s=n.n(o),l=n(54498),c=n(86145),d=n(17717),u=n.n(d),f=n(60033),m=n.n(f);function h(e){if("string"!=typeof e)return!1;var t=new Date(e);return!Number.isNaN(t.getTime())}function p(e){return e&&"object"==typeof e&&h(e.date)&&"boolean"==typeof e.is_default}function g(e){return{is_default:e.is_default,date:new Date(e.date)}}function v(e){return e&&"object"==typeof e&&"string"==typeof e.category&&function(e){return e&&"object"==typeof e&&"number"==typeof e.size&&!Number.isNaN(e.size)&&e.size>0&&"string"==typeof e.currency&&e.currency.length>0}(e.discount)&&p(e.start_date)&&p(e.end_date)}function _(e){return e&&"object"==typeof e&&"string"==typeof e.description&&"string"==typeof e.from&&"number"==typeof e.max_discount_index&&("boolean"==typeof e.from_jsonld||void 0===e.from_jsonld)&&(Array.isArray(e.promocodes)||void 0===e.promocodes)&&h(e.received_date)&&function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return v(e)}))}(e.sale)&&e.max_discount_index>=0&&e.max_discount_index<e.sale.length}function b(e){return{description:e.description,from:e.from,is_promo:e.from_jsonld,promocodes:e.promocodes,received_date:new Date(e.received_date),sale:e.sale.map((function(e){return function(e){return{category:e.category,discount:e.discount,start_date:g(e.start_date),end_date:g(e.end_date)}}(e)})),max_discount_index:e.max_discount_index}}var E=n(96053),y=n(21211),T=n(75705),A=n(4872),S=n.n(A),O=n(83260),C=n.n(O),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};var L=(0,O.debounce)((function(e){return m().send("discounts_count",{v:e,dwh:{discounts_viewed:e}})}),2e3,null),k=!1,I=function(){var e=u().get(y.DISCOUNTS_FLAG_NAME).getTime();if(0===e)return!0;else return(0,T.V)()>e+y.DELAY_NO_DISCOUNTS_BLOCK},R={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch:function(e,t){var n=e.route;if(n&&n.is("#search #search-letter"))return Promise.resolve();else return Promise.all([t("status"),t("uiThreadsSettings")]).then((function(e){var t,n=e[0],r=e[1],a=[],i=new Date;if(y.DISCOUNTS_BLOCK&&r.discounts&&n.folder===S().NEWSLETTERS){for(var o=0;o<Math.min(n.discounts.length,y.LIST_LIMIT);o++){var s=n.discounts[o],l=s.get("discount");if(_(l)){var c=b(l),d=c.sale[c.max_discount_index];if(y.DISCOUNT_DESCRIPTION_FROM_SUBJECT)c.description=s.get("subject");if(d.end_date.date>i||(f=d.end_date.date,h=i,f.getFullYear()===h.getFullYear()&&f.getMonth()===h.getMonth()&&f.getDate()===h.getDate()))a.push(w(w({},c),{sale:d,message_id:s.id,shop:null!==(t=s.get("correspondents.from.0.name"))&&void 0!==t?t:""}));else m().send("discounts_stale")}else if(void 0!==l)m().send("discounts_invalid")}var f,h;return L(a.length),function(e){var t=u().get(y.DISCOUNTS_FLAG_NAME),n=t.getCount("close")%2==0,r=I();if(e.length&&n)t.save({close:!0});if(e.length)return e;if(!n&&r)return t.save({close:!0,time:!0}),k=!0,e;if(k)return e;else return}(a)}else k=!1}))}},D=n(77917);function M(){var e=window.app;if(e.view)e.view.destroy();e.isDead=!0;var t=document.createElement("STYLE");t.innerText="".concat((0,D.selector)(".dimmer")," {display: none !important;}"),document.head.appendChild(t);var n=window["app-canvas"][0]||window["app-canvas"];new Promise((function(e,t){var n=new XMLHttpRequest;n.open("GET",y.SERVER_ERROR_URL,!1),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)e(n.responseText);else t(n)},n.send()})).then((function(t){if(n.style.height="100vh",n.innerHTML=t,!e.isErrorPageShown)m().send("error-page-show"),e.isErrorPageShown=!0})).catch((function(t){if(n.style.height="100vh",n.style["text-align"]="center",n.innerHTML=i18n("Произошла ошибка сервера №")+(t.status?t.status:"500")+".<br/>"+i18n("Наши специалисты уже разбираются с проблемой."),!e.isErrorPageShown)m().send("error-page-fallback-show"),e.isErrorPageShown=!0}))}var P=function(){function e(){this.isLogging=!0,this.entries=[]}return e.prototype.addEntry=function(e){if(this.isLogging)this.entries.push({action:e})},e.prototype.stopLogging=function(){if(this.isLogging)if(this.isLogging=!1,this.entries.length)e.sendLog(this.entries)},e.sendLog=function(e){m().send("datasource_log",{rlog:"octavius_datasource_log",rlog_message:e})},e}(),N=n(89629),x=n.n(N),F=n(39783),U=n.n(F),H=n(92042),B=n.n(H),Z=n(43572),G=n.n(Z),q=n(13624),j=n.n(q),W=n(50375),V=n(63062),z=n(38084),Y=n(93286),K=n(10261),X=n(38478),Q=n.n(X),J=n(50987),$=function(e){return Object.entries(e).map((function(e){var t,n=e[0],r=e[1];return{email:n,count:r.mail_cnt,fullName:(t=r,[t.first_name||"",t.last_name||""].join(" ")),children:r.children?$(r.children):[]}}))},ee=n(27479),te=(0,K.createGlobalAction)("user/account/updateAccount",(function(){var e,t;if(y.IS_VK_MINI_APP)return Promise.resolve({accounts:[],email:null===(e=J.Z.get("initialUser"))||void 0===e?void 0:e.email});else return Q().get(y.PORTAL_NAVI_DATA_URL,{params:{mac:1,ldata:1,Login:null===(t=J.Z.get("initialUser"))||void 0===t?void 0:t.email},withCredentials:!0}).then((function(e){var t,n;if("ok"!==e.data.status||!(null===(t=e.data.data)||void 0===t?void 0:t.ldata))return m().send("get_accounts_error",{i:"request"}),void(0,r.coreLoggerDispatchError)(new Error("Fetch accounts error"),r.Tag.API);var a=null===(n=e.data.data)||void 0===n?void 0:n.ldata;return{accounts:$(a),email:e.data.data.email}})).catch((function(){m().send("get_accounts_error",{i:"network"}),(0,r.coreLoggerDispatchError)(new Error("Fetch accounts network error"),r.Tag.API)}))}));ee.n.on(te.fulfilled,(function(e){var t=e.payload;if(t.accounts&&t.email)ee.n.set((function(){return{accounts:t.accounts,email:t.email}}))}));var ne={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch:function(){if(!y.DISABLE_FOOTER_APP_TOOLBAR)return te(),Promise.resolve()}},re=n(71774),ae=n.n(re),ie=n(28692);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch(e,t,n,r){if(r&&r.aliases)return r.aliases;else return ie.yc.group("app-fetch-alias",()=>Promise.all([t("authUser"),ae().find()]).then(e=>{var t=oe(e,2),n=t[0],r=t[1].toArray();return r.forEach(e=>{e.meta("isPDD",n.isPDD())}),r}).catch(()=>((0,Y.ZP)(["aliases","load","failed"]),[])),{score:"fetch"})}},ce=n(4907),de={match:["#attachment"],defaults:null,fetch:(e,t)=>t("message").then(t=>{var n=(0,ce.Z)(e.params.id);return t.get("attaches.list").getSafe(n)})},ue=n(50),fe=n.n(ue),me={match:["#attachment-temporary"],fetch(e){var t=e.params.message,n=(0,ce.Z)(e.params.id);return fe().findTemporary({message_id:t}).then(e=>({list:e,attachment:e.get(n)}))}},he=n(39939),pe={fetch:()=>he.default.user},ge=n(36889),ve=n.n(ge),_e=n(57045),be=function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},Ee={handleLoad:function(e,t,n){if(n)return be(be({},e),{hasNewPayments:!!e.total,hasPaidPaymentsWithNoNew:!1});var r=e.unpaidFines>t.unpaidFines,a=e.unpaidBills>t.unpaidBills,i=r||a,o=e.unpaidFines<t.unpaidFines,s=e.unpaidBills<t.unpaidBills,l=!i&&(s||o);return be(be({},e),{hasNewPayments:i,hasPaidPaymentsWithNoNew:l})},set:function(e){_e.ZP.set("bills-counter",e)},get:function(){return _e.ZP.get("bills-counter")}},ye=function(){return(ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},Te={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch:function(e,t,n,r){var a;if(!y.SIDEBAR_PAY_NOTIFICATION_BADGE_SMART)return Promise.resolve({});var i=null!==(a=null==r?void 0:r.billsCount)&&void 0!==a?a:Ee.get(),o=n.type,s=n.state;if(o===l.HIDE_SIDEBAR_FOOTER_PAY_NOTIFY_BADGE)return Ee.set(s),Promise.resolve(s);var c=!(null==i?void 0:i.timestamp),d=Math.floor(Date.now()/1e3);if(!(c||d-i.timestamp>y.BILLS_COUNTER_UPDATE_INTERVAL))return Promise.resolve(i);else return ve().findBillsCount().then((function(e){var t,n=Ee.handleLoad(e,i,c),r=n.hasNewPayments,a=n.hasPaidPaymentsWithNoNew,o=r?!1:!!a;if(r||a)null===(t=u().get("octavius-sidebar-pay-notification-badge-smart"))||void 0===t||t.save({state:o});var s=ye(ye({},n),{timestamp:d});return Ee.set(s),s})).catch((function(){return(0,Y.ZP)("user-paymentdata-err"),{}}))}},Ae=n(85054),Se=n.n(Ae),Oe={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch:(e,t)=>t("status").then(e=>(e.collectors||[]).map(e=>new(Se())(e)))},Ce={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch:(e,t)=>t("folders").then(t=>{if(t)return S().all.get(e.params.folder);else return S().findOne({id:e.params.folder})})},we={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch:(e,t)=>t("status").then(e=>e.folders||S().find())};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var Re={match:(0,E.Z)(["#letters","#read-letter"]),fetch(e,t,n,r){var a=r&&r.hiddenPaymentDies||_e.ZP.get("hidden-payment-dies")||{};if(n.type===l.HIDE_PAYMENT_DIE){var i=ke(ke({},a),{},{[n.uidl]:""});return _e.ZP.set("hidden-payment-dies",i),i}return a}},De={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch(e,t,n){if(!n||n.type!==l.EXECUTE_JSSDK_ACTION)return Promise.resolve();else return n.action.execute(n.params)}},Me=n(15984),Pe=n(83183),Ne=n(96596),xe=n.n(Ne),Fe=n(41542);function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var qe=0;function je(e,t){xe().add(e,t),P.sendLog(Ze({label:e},t))}function We(e,t,n){var r=n.params.letter;if(n.is("#read-letter")&&r!==e.id){var a=e.getFolder();if(n.redirectTo(n.router.getUrl("#read-letter",{letter:e.id,folder:a.id})),t)t.destroy()}return e}function Ve(e,t,n){var r=Ze(Ze({},{id:e.id,offset:0,last_modified:1,force_custom_thread:y.FORCE_CUSTOM_THREAD,use_color_scheme:y.DARK_MODE_MEDIA_QUERY?1:0,remove_emoji_opts:Pe.Y}),t),a=B().fetchData(r,!0).then(t=>{if(!(0,Me.JI)(e)){var a=t.messages,i=e.get("messages").toArray();if(n)t.messages=(0,Me.Wl)(i,a);else t.messages=(0,Me.EI)(i,a,{offset:r.offset,limit:a.length});e.set(t)}else je("letter.fetchThread.then",{query:r,prevDataIfActionLocked:!0}),m().send("ltr-ftch-trd-lckd");return e});return Fe.Z.scheduleThreadUpdate(a),a}var ze={match:["#read-letter","#search-letter"],defaults:null,fetch(e,t,n,r){var a,i=e.params,o=i.folder,s=i.letter,c=i.part,d=n&&n.type;if(r&&r.letter)a=r.letter;var u=B().get(s);if((0,Me.JI)(u))return je("letter.fetch",{actionType:d,prevDataIfActionLocked:!0}),u;else return ie.yc.group("app-fetch-thread",()=>{switch(d){case l.THREAD_LOAD_MORE:var r=u,i=r.get("messages.length");return Ve(r,{offset:i,limit:y.THREAD_LETTERS_LOAD_MORE_COUNT},!0);case l.DESTROY_THREADS_AND_MESSAGES:return function(e,t){if(e){var n=e.get("messages").toArray(),r=(0,Me.Fc)(t);return e.set("messages",n.filter(e=>{if(r[e.id]){if(e.destroy(),e=U().all.get(e.id))e.destroy();return!1}return!0})),e}}(u,n.models.messages);case l.NAVIGATE:case l.UPDATE_ALL:if(c){var f=s.replace(/\d+:(\d+):\d+/,"$1;".concat(c));return U().findOne({id:f,folder_id:o,use_color_scheme:y.DARK_MODE_MEDIA_QUERY?1:0,remove_emoji_opts:Pe.Y}).then(t=>{var n=t.get("folder");if(o==n)return new(B())(Ze(Ze({},t.attributes),{expand:f,messages:[t]}));else return e.redirectTo(e.router.getUrl("#read-letter",{folder:n,letter:s,part:c}))})}if(u&&u.isDataFully()){var m=++qe;return Promise.all([t("status"),t("metathreads")]).then(t=>{var n=Ue(t,2),r=n[0],a=n[1];return setImmediate(()=>{(function(e,t,n){if(!y.SMART_THREAD_FETCHING||!e.isDataFully())return Ve(e);if(je("letter.tryFetchThread.prevThreadMetaChanged",{changed:e.meta("changed")}),e.meta("changed"))return e.meta("changed",0),Ve(e);var r=t.threadMeta||{changed:!0},a=Object.values(n).some(t=>{var n=t.threadMeta;return n.currentId===e.id&&n.changed}),i=r.currentId===e.id&&r.changed;if(je("letter.tryFetchThread.checkChanged",{changedCurrent:i,changedInMetathreads:a}),!i&&!a)return Promise.resolve(e);else return Ve(e)})(u,r,a).then(t=>{if(!function(e){return e===qe}(m))return t;var n=We(t,u,e);if(d===l.NAVIGATE)n.emit("loaded-changes");return n})}),Promise.resolve(u)})}else if(u)return Ve(u).then(t=>We(t,u,e));else{var h={id:s,force_custom_thread:y.FORCE_CUSTOM_THREAD,use_color_scheme:y.DARK_MODE_MEDIA_QUERY?1:0,remove_emoji_opts:Pe.Y},p=B().findOne(h).then(t=>We(t,u,e));return Fe.Z.scheduleThreadUpdate(p),p}default:return u||a}},{score:"fetch",appendix:!d?"no-act":"act"})}},Ye=n(97899),Ke=n(4183),Xe=n(73173);function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){if(t||e.meta("thread_id"))return e.meta("thread_id")||e.id;if(/:/.test(e.id))return e.id;if(e instanceof U())return"0:".concat(e.get("id"),":").concat(e.get("folder"));else return"0:".concat(e.id,":0")}var et={match:["#read-letter","#search-letter"],defaults:null,fetch(e,t,n,a){var i=n&&n.type,o=a&&a.letterNeighbours||{},s=e.route.is("#search-letter");if(i!==l.NAVIGATE&&i!==l.UPDATE_ALL&&i!==l.LOAD_MORE&&i!==l.LOAD_PAGE&&o)return o;else return Promise.all([s?t("search"):t("status"),t("letter"),t("uiThreadsSettings")]).then(t=>{var n=Qe(t,3),a=n[0],o=n[1],c=n[2],d=c.threads,u=a.letters,f=function(e,t,n,a,i){var o=t.id||t.letter;if(!e)return(0,r.coreLoggerDispatchSelfError)("lttr-neighbours",new Error("letters have not been found"),{params:t,uiThreadsSettings:n,actionType:a,isSearch:i}),-1;else return e.findIndex(e=>e.id===o)}(u,e.params,c,i,s);if(-1===f)if(s)return{};else return{prev:{threadId:o.get("prev")},next:{threadId:o.get("next")}};var m=1===f,h=f>=u.length-2,p=function(e,t,n){for(var r,a;t>0;)if(a=(r=e[t])&&$e(r,n),(r=e[--t])&&$e(r,n)!==a&&!Xe.Z.isMetathread(r))return r}(u,f,d),g=function(e,t,n){for(var r,a;t<e.length-1;)if(a=(r=e[t])&&$e(r,n),(r=e[++t])&&$e(r,n)!==a&&!Xe.Z.isMetathread(r))return r}(u,f,d);if((0,Ye.M8)(e.router,c)&&m&&!s&&a.page>1)(0,Ke.default)({type:l.LOAD_MORE,prev:!0,priority:j().Loader.PRIORITY_LOW});if(h&&!a.isLastPage)(0,Ke.default)({type:l.LOAD_MORE,priority:j().Loader.PRIORITY_LOW});return{prev:p&&{threadId:$e(p,d),id:p.id},next:g&&{threadId:$e(g,d),id:g.id}}})}};function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rt={match:["#letters","#read-letter"],defaults:new(B().List),fetch(e,t){var n=[t("status"),t("folder"),t("letter")];return Promise.all(n).then(e=>tt(e,1)[0].letters||[])}},at={match:["#attachment"],defaults:null,fetch(e){var t=e.params.message,n=e.query["folder-id"];return U().findOne({id:t,folder_id:n,use_color_scheme:y.DARK_MODE_MEDIA_QUERY?1:0,remove_emoji_opts:Pe.Y})}},it=n(55674);function ot(e,t){var n=t.metathreads[e.id];return(0,Me.JI)(n)}function st(e,t){var n=t&&t.metathreads[e.id];return n&&n.threads||[]}function lt(e,t){if(!e.threads)return e;else return e.threads.forEach(e=>{e.setContainingMetathread(t)}),e}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offset:0},n=t.limit,r=t.offset,a=n+1;return W.default.load({folder:e.getMetathreadFolder(),limit:a,offset:r,sort:it.Z.getSorting()}).then(e=>{var t=e.threads.length===a;return{threads:t?e.threads.slice(0,a-1):e.threads,isLimitReached:!t}})}function dt(e,t){return t.setLimitReached(e.isLimitReached),e}function ut(){return Xe.Z.all.forEach(e=>{e.setExpanded(!1),e.setLimit()}),{}}function ft(e,t){var n=Xe.Z.all.filter(e=>e.isExpanded());return Promise.all(n.map(n=>{if(n.getLimit()<=y.LIST_LIMIT)return function(e,t,n){var r=e.getLimit(),a={currentId:t.params.letter,changed:!1};return ct(e,{limit:r}).then(t=>ot(e,n)||{threads:(0,Me.Y9)(t.threads,a),threadMeta:a,isLimitReached:t.isLimitReached}).then(t=>dt(t,e)).then(t=>lt(t,e)).catch(e=>(0,Me.xS)(e,t,n))}(n,e,t);else return function(e,t,n){var r=st(e,n),a=y.LIST_LIMIT,i={currentId:t.params.letter,changed:!1};return ct(e,{limit:a}).then(t=>ot(e,n)||{threads:(0,Me.EI)(r,(0,Me.Y9)(t.threads,i),{limit:a,offset:0}),isLimitReached:t.isLimitReached,threadMeta:i}).then(t=>dt(t,e)).then(t=>lt(t,e)).catch(e=>(0,Me.xS)(e,t,n))}(n,e,t)})).then(e=>e.reduce((e,t,r)=>(e[n[r].id]=t,e),{}))}var mt,ht={match:["#letters","#read-letter"],defaults:{},fetch(e,t,n,r){var a=n&&n.type,i=r&&r.metathreads||{},o=e&&e.params.folder,s=r&&r.request&&r.request.params.folder;if((0,Me.JI)(i))return i;switch(a){case l.LOAD_MORE_METATHREAD:var c=n.model;return function(e,t,n){var r=st(e,n),a=r.length,i={currentId:t.params.letter,changed:!1};return ct(e,{offset:a,limit:y.METATHREAD_LIMIT}).then(e=>(0,Me.Mk)(n)||{threads:(0,Me.Wl)(r,(0,Me.Y9)(e.threads,i)),isLimitReached:e.isLimitReached,threadMeta:i}).then(t=>dt(t,e)).then(t=>lt(t,e)).catch(e=>(0,Me.xS)(e,t,n))}(c,e,r).then(e=>(c.setLimit(c.getLimit()+y.METATHREAD_LIMIT),i[c.id]=e,i));case l.TOGGLE_METATHREAD:var d=Date.now(),u=n.model,f=n.state;if(u.set({lastToggle:d}),f===u.isExpanded())return i;if(u.setExpanded(f),!f)delete i[u.id];return ft(e,r);case l.TOGGLE_TO_MYSELF_METATHREAD:var m=n&&n.state,h=Xe.Z.all.get("multithreadFixId500015");if(h&&!1===m)h.setExpanded(!1),h.setLimit();return ft(e,r);case l.TOGGLE_METATHREADS_SETTING:case l.CHANGE_METATHREADS_SETTING:case l.EDIT_METATHREADS_SETTINGS:case l.TOGGLE_METATHREADS_SETTINGS:case l.NAVIGATE:case l.UPDATE_ALL:if(a===l.NAVIGATE&&s!==o&&o!==S().INBOX||a===l.TOGGLE_METATHREADS_SETTING||a===l.CHANGE_METATHREADS_SETTING||a===l.EDIT_METATHREADS_SETTINGS||a===l.TOGGLE_METATHREADS_SETTINGS)if(e.is("#read-letter")||e.is("#search-letter"))return ut();else return t("letters").then(ut,ut);return ft(e,r)}return i}},pt=n(19275),gt=n(38945);function vt(){try{return m().getConfig().o_ss}catch(e){return""}}function _t(e){if(e.data){var t=null;try{t=JSON.parse(e.data)}catch(e){}if(!t)return null;var n=he.default.user,r="".concat(n.get("login"),"@").concat(n.get("domain"));if(t.email===r)if("focus"===t.type){if(t.action)!function(e){if("show-letter"===e.type){var t;if(e.thread)t=app.getUrl("#read-letter",{folder:e.folder,letter:e.thread});else if(e.letter)t=app.getUrl("#read-letter",{folder:e.folder,letter:"0:"+e.letter+":"+e.folder});if(t)app.nav(t);else(0,Ke.default)()}}(t.action);else(0,Ke.default)();(0,Y.ZP)({type:"pushnotification",intervals:[["page_"+(t.action?"action":"focus"),"1"]]})}else if("ping"===t.type)e.target.controller.postMessage(JSON.stringify({type:"pong",email:r}))}}function bt(){if(!mt){if(window.navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener("message",_t);mt=Promise.resolve()}return mt}var Et,yt=n(69574),Tt=n.n(yt);var At={fetch:function(){return function(){if((0,gt.DS)())return Promise.resolve();if(!Et){var e=he.default.user,t="".concat(e.get("login"),"@").concat(e.get("domain")),n={push_title:i18n("Почта Mail.ru"),push_body:i18n("Вам пришло новое письмо"),push_icon:pt.Z.get("urls.packagesUrl")+"/r/default/ico/icon-192.png",push_body_plural:[i18n("{count} новых писем"),i18n("{count} новое письмо"),i18n("{count} новых письма")],push_empty_subject:i18n("Без темы"),push_from:i18n("От"),push_to:i18n("Кому"),locale:"ru_RU",account:t,application:"mail_e",client_name:"ru.mail.e",counter_push_click:["".concat(pt.Z.get("urls.imgRadarUrl"),"/update?email=").concat(t,"&p=octavius&t=pushnotification\n\t\t\t\t\t\t&v=12&i=all:1,click:2&dwh={%22type%22:%22pushnotification%22,%22ver%22:2,%22action%22:%22click%22}\n\t\t\t\t\t\t&o_ss=").concat(vt())],counter_push_show:["".concat(pt.Z.get("urls.imgRadarUrl"),"/update?email=").concat(t,"&p=octavius&t=pushnotification\n\t\t\t\t\t\t&v=12&i=all:1,show:2&dwh={%22type%22:%22pushnotification%22,%22ver%22:2,%22action%22:%22show%22}\n\t\t\t\t\t\t&o_ss=").concat(vt())]};setTimeout(()=>{Tt().setup(n),Tt().register("/serviceworker.js",{scope:"/"}).then(bt).catch(e=>{console.error(e)})},1),Et=Promise.resolve(Tt())}return Et}()}};var St=n(73928),Ot=n(93686),Ct=function(){return(Ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},wt=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};function Lt(e,t){if(!t||0===Object.keys(t).length)return null;var n=e.query;if(!n)return null;var r={},a=t.accurate,i=void 0===a?!1:a,o=t.limit,s=void 0===o?3:o,l=t.minWords,c=void 0===l?1:l,d=t.maxWords,u=void 0===d?1/0:d,f=t.category,m=void 0===f?null:f,h=t.queryType,p=void 0===h?null:h,g=t.filters,v=void 0===g?[]:g,_=t.folder,b=void 0===_?null:_,E=t.documents,y=void 0===E?!1:E,T=t.from,A=void 0===T?!1:T,S=t.to,O=void 0===S?!1:S,C=t.saveFields,w=void 0===C?["all"]:C,L=t.group,k=n.split(" ");if(!(k.length>=c&&k.length<=u))return null;if(w.includes("all"))r=Ct({},e);else r=w.reduce((function(t,n){if(e[n]||0===e[n])t[n]=e[n];return t}),{});if(i){if(!(n.length>2&&'"'===n[0]&&'"'===n[n.length-1]))r.query='"'.concat(n,'"')}if(y&&!e.transaction_category)r.transaction_category="document_scans";if(m&&Object.values(St.OperandCategoryTypes).includes(m))r.transaction_category=m;if(v&&v.length>0&&v.every((function(e){return Object.values(St.OperandFilterTypes).includes(e)})))r.flags=v.reduce((function(e,t){var n;return Ct(Ct({},e),((n={})[t]=!0,n))}),Ct({},e.flags));if(p&&Object.values(St.OperandQueryTypes).includes(p)){if(p!==St.OperandQueryTypes.QUERY)delete r.query;r[p]=n}if(b||0===b)r.folder=b;if(A&&!r.correspondents)r.correspondents={from:n},delete r.query;if(O&&!A&&!r.correspondents)r.correspondents={to:n},delete r.query;if(!Object.keys(r).length||(0,Ot.Z)(r,e))return null;if(r.limit=s,r.no_history=!0,L)r.group=L;return r}var kt=function(e){return function(e,t){if(!t||!e)return null;if(e.transaction_category)return null;var n=e.query,r=e.folder;if(!n)return null;if(r){var a=S().all.get(r);if(a&&a.isShareTake())return null}var i=n.split(" "),o=t.configByKeywords&&t.configByKeywords.find((function(e){return e.keywords.some((function(e){return i.some((function(t){if(e&&"R"===e[0]&&"_"===e[1])try{return new RegExp(e.slice(2)).test(t)}catch(e){return!1}return t.toLowerCase()===e.toLowerCase()}))}))}));if(o)return Lt(e,o);if(1===i.length)return Lt(e,t.oneWordConfig);if(i.length>=2)return Lt(e,t.twoWordMoreConfig);else return}(e,Ct(Ct({},y.RELEVANT_SEARCH),{configByKeywords:wt([],(null===y.RELEVANT_SEARCH||void 0===y.RELEVANT_SEARCH?void 0:y.RELEVANT_SEARCH.configByKeywords)||[],!0)}))},It=n(68021),Rt=n(96911),Dt=n.n(Rt),Mt=function(e,t){var n,r,a,i;if(!e||!t)return null;var o={category:e.transaction_category,date:e.interval,folder_id:e.folder,from_email:null===(n=e.correspondents)||void 0===n?void 0:n.from,is_flag:(null===(r=e.flags)||void 0===r?void 0:r.flagged)||!1,is_unread:(null===(a=e.flags)||void 0===a?void 0:a.unread)||!1,result_count:null==t?void 0:t.lettersTotal,to_email:null===(i=e.correspondents)||void 0===i?void 0:i.to,with_attach:e.all_attaches||!1,with_text:!!e.query};return Object.keys(o).reduce((function(e,t){if(void 0!==o[t])e[t]=o[t];return e}),{})},Pt=function(){return(Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},Nt=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)if(t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a]))n[r[a]]=e[r[a]]}return n},xt=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};function Ft(e,t){var n=t.offset,r=t.limit,a=t.search_id,i=t.extra_suggest_search,o=function(e){var t=e.transaction_category,n=Nt(e,["transaction_category"]);if(y.USE_NEW_SEARCH_CATEGORY_FORMAT&&t)return Pt({search_categories:[t]},n);if("document_scans"===t)return Pt({only_with_documents:1},n);else return e}(e),l=u().get("threads").state;return s().get("messages/search",Pt(Pt({},o),{offset:n,limit:r,search_id:a,extra_suggest_search:i,with_threads:l,all_attaches:y.SEARCH_ALL_ATTACHES,remove_emoji_opts:Pe.Y})).catch((function(e){if(e&&e.is("invalid")&&"not_open"===e.get("body.folder.error"))return{error:new W.SecureFolderNotOpenError(e.get("body.folder.value")),body:{messages:[],found:{count:0}}};throw e}))}function Ut(e,t){var n=void 0===t?{}:t,r=n.limit,a=void 0===r?0:r,i=n.search_id;return Ft(e,{offset:0,limit:a||y.LIST_LIMIT,search_id:i,extra_suggest_search:y.EXTRA_SUGGEST_SEARCH}).then((function(e){var t=e.body.found,n=function(e){if(!e)return[];if(!e.extra_suggest_search_results)return[];else return e.extra_suggest_search_results.messages}(e.body),r=function(e){if(!e)return{};if(!e.extra_suggest_search_results)return{};else return e.extra_suggest_search_results.found}(e.body);return{error:e.error,requestID:e.requestID,letters:(0,Me.Ch)(e.body.messages),lettersTotal:t.count,found:t,suggestLetters:(0,Me.Ch)(n),suggestLettersTotal:r.count,suggestFound:r,extraSuggestSearchQuery:e.body.extra_suggest_search_query}}))}function Ht(e,t,n){if(t&&Object.keys(t).length>0){var r=t.group;if(delete t.group,!t.limit)return Ut(e,{search_id:n}).then((function(e){return Pt(Pt({},e),{doneRelevantSearch:{group:r}})}));else return Promise.all([Ut(e,{search_id:n}),Ut(t,{limit:t.limit,search_id:n})]).then((function(e){var n=e[0],a=e[1];return Pt(Pt({},n),{letters:(0,Me.EI)(a.letters,n.letters,{offset:t.limit,limit:y.LIST_LIMIT,persistThread:""}),doneRelevantSearch:{group:r}})}))}return Ut(e,{search_id:n})}var Bt,Zt=null,Gt={match:["#search","#search-letter"],defaults:{letters:[],lettersTotal:0,suggestLetters:[],suggestLettersTotal:0},fetch:function(e,t,n,r){var a=(0,Me.bh)().search,i=r?r.search:{};if(!Zt)Zt=t("status");i.letters=i.letters||[];var o=e.params.id,s=kt(a.query);switch(n.type){case l.TOGGLE_METATHREADS_SETTING:case l.UPDATE_ALL:if(!y.ENABLE_SEARCH_POLLING&&n.type===l.UPDATE_ALL)return i;if(!Object.keys(a.query).length)return i;else return t("uiLayout").then((function(t){var r="3pane"===t.type&&t.support3pane;if(!y.ENABLE_SEARCH_POLLING_2PANE_READMSG&&n.type===l.UPDATE_ALL&&!r&&e.route.is("#search-letter"))return i;else return Ht(a.query,s,i.search_id).then((function(e){return a.setResponse(e),Pt(Pt(Pt({},i),e),{letters:(0,Me.EI)(i.letters,e.letters,{offset:0,limit:y.LIST_LIMIT,persistThread:U().all.get(o)})})})).catch((function(e){if(e&&e.is("invalid")&&"not_exists"===e.get("body.folder.error")&&a.query&&a.query.folder)a.removeOperand(It.q.FOLDER);return Promise.reject(e)}))}));case l.NAVIGATE:case l.UPDATE_SEARCH:return Zt.then((function(){var t=Pt({},i);if(n.type===l.NAVIGATE){var r=i.query;if(a.syncWithRouteQuery(e.query),null===s&&Object.keys(a.query).length)s=kt(a.query);if(a.query===r)return i;t.isLastPage=!1}if(!Object.keys(a.query).length)return a.setResponse({found:{}}),Promise.resolve({query:{},found:{},letters:[],lettersTotal:0,suggestLetters:[],suggestLettersTotal:0,suggestFound:{}});var o=a.query,c=Dt()();return Ht(o,s,c).then((function(e){return Pt(Pt(Pt({},t),{error:void 0,query:o,search_id:c}),e)})).then((function(e){a.setResponseAndProgress(e,!1);var t=e&&e.query&&e.query.query,n=e&&!e.lettersTotal&&!e.suggestLettersTotal;if(t&&n)(0,Y.ZP)("search-query-result-empty");return m().send("show_search_result",{dwh:Mt(o,e)}),e})).catch((function(e){return a.setProgress(!1),Promise.reject(e)}))}));case l.LOAD_MORE:if(!Object.keys(a.query).length)return i;else return function(e,t,n){if(void 0===t)t=[];return Ft(e,{offset:t.length,limit:y.LIST_LIMIT,search_id:n,extra_suggest_search:!1}).then((function(e){return{error:e.error,requestID:e.requestID,letters:(0,Me.Wl)(t,(0,Me.Ch)(e.get("body.messages"))),isLastPage:e.get("body.messages").length!==y.LIST_LIMIT,lettersTotal:e.get("body.found.count")}}))}(a.query,i.letters,i.search_id).then((function(e){return Pt(Pt(Pt({},i),{error:void 0}),e)}));case l.DESTROY_THREADS_AND_MESSAGES:var c=xt(xt([],n.models.messages,!0),n.models.threads,!0),d={};c.forEach((function(e){var t=e.id;d[t]=!0}));var u=i.letters.filter((function(e){if(!d[e.id])return!0;else return(0,Me.WH)(e),!1}));return Pt(Pt({},i),{letters:u,lettersTotal:u.length});case l.UPDATE_LAYOUT_TYPE:if(e.route.is("#search-letter"))(0,Ke.default)({type:l.UPDATE_ALL,priority:j().Loader.PRIORITY_LOW,uid:void 0})}return i}},qt=n(45209),jt=n(21528),Wt=n(56928),Vt=n(90557);function zt(){var e=jt.default.get("unread-messages-notification");return e&&e.state&&e.data}var Yt=[{test:()=>zt(),setup(){var e=zt().split(":"),t=void 0===e[0]?2e3:+e[0],n=void 0===e[1]?3e4:+e[1],r=!!(void 0===e[2]?0:+e[2]),a=!!(void 0===e[3]?0:+e[3]),i=!!(void 0===e[4]?0:+e[4]);function o(){var e=u().get("sound-notifications");return{enabled:!!(void 0===e.state?r:e.state),sound:!!(void 0===e.state?i:e.getCount("close")%2),onlyInbox:!!(void 0===e.state?a:e.getCount("show")%2)}}Bt=new Wt.Z({titleBlinkingTimeout:t,soundPlayingTimeout:n,getState:o});var s=o();(0,Vt.y6)().then(e=>{e.default.register(Bt)}),(0,Y.ZP)({chain:["tabnotification_mail_feature_"+(s.enabled?"on":"off")],intervals:[["add",1]]}),(0,Y.ZP)({chain:["tabnotification_mail_sound_"+(s.sound?"on":"off")],intervals:[["add",1]]}),(0,Y.ZP)({chain:["tabnotification_mail_inbox_"+(s.onlyInbox?"on":"off")],intervals:[["add",1]]})},handle(){if(Bt)Bt.handleUpdate.apply(Bt,arguments)}}];var Kt=n(75975),Xt=n(90065),Qt=n(97585),Jt=n.n(Qt);function $t(e){var t=s().setup("email"),n=s().setup("token"),r={};if(!(e=e||{}).logScope)e.logScope="mailboxSubscription";if(e.endpoint)e.endpoint+="?";else e.endpoint=location.host+"/api-proxy/notifier/v1/ws?";if(!e.system)this.system="storage";if(this.event=e.event,t)r.email=t;if(n)r.token=n;e.endpoint+=(0,Xt.Z)(r,!0),this.options=e,this.log=xe().getScope("subscription/Mailbox")}Object.assign($t.prototype,{_rev:null,_sub:null,subscribe:function(){var e=this,t=this.options;if(this._sub)this.log.add("destroy old subscription"),this._sub.destroy(),this._sub=null;if(!this.isSupport())return this.log.add("subscription is not supported by client"),!1;var n=new URL(t.endpoint,window.location.origin);return n.searchParams.delete("token"),this.log.add("connect to",n.toString()),this._sub=new(Jt())("wss://"+t.endpoint,t),this._sub.onActivate=function(){return e.onActivate()},this._sub.onDeactivate=function(){return e.onDeactivate()},!0},isSupport:function(){if(!this._rev||!this._rev.revision||!this._rev.checksum)return this.log.add("client revision is empty"),!1;else return Jt().isSupport()},onActivate:function(){var e=this;this.log.add("create subscription",this.system),this._sub.create(this.system,this.event).catch((function(t){return e.onError(t)})),this._sub.on("storage.change",(function(t){return e._handle(t)})).on("sync",(function(){return e._handle("sync")})).on("attached",(function(){return e._handle("attached")})).on("detached",(function(){return e._handle("detached")}))},onDeactivate:function(){},onDetached:function(){},onAttached:function(){},onError:function(e){this.log.add("mailbox fetch revision error",e)},onMailbox:function(e){this.log.add("get new notification",e)},setRevision:function(e){var t,n=jt.default.get("test_threads_revision"),r=null;if(n){if("string"!=typeof n.data)n.data=n.data[0];if("string"==typeof n.data)t=n.data.split(",");r={revision:t[0],checksum:t[1]}}if(e&&e.revisions&&e.revisions[this.system])r=e.revisions[this.system],this.log.add("set new revision",r);this._rev=r},_handle:function(e){if("sync"===e)this.onMailbox();else if("detached"===e)this.onDetached();else if("attached"===e)this.onAttached();else if(e.revision_last!==this._rev.revision&&e.checksum_last!==this._rev.checksum)this.onMailbox();else this.log.add("client has actual data")}});var en,tn=$t,nn=function(){return"visible"===document.visibilityState};function rn(e){if(!en)en=ie.yc.group("app-source-setup",()=>(Yt.filter(e=>{var t=!e.test||e.test();if(t&&e.setup)e.setup();return t}),Yt.forEach(e=>{W.default.on("data",e.handle)}),function(){var e=jt.default.has("threads_polling_disabled"),t=jt.default.getAsArray("async_notify",[],"|"),n=jt.default.getAsInt("keepalive_timeout_min_config_value",1e4),r=jt.default.get("async_notify_throttle"),a=jt.default.has("async_notify_v2"),i={},o=1e3;if(t.length>0){var s="//"+t[0];if(t.length>=2&&s){i.endpoint=s;var l=+t[1];if(0===l||l>=n)i.keepalive={timeout:l};var c=+t[3],d=+t[4];if(isNaN(c)||isNaN(d)||c<1e3)c=(0,Kt.E0)(10),d=(0,Kt.Z7)(5);if(c>d)d=c;var u=Math.ceil(c+(d-c)*Math.random());i.retry={number:+t[2],timeout:u}}i.event="change",i.version=a?2:1}if(r&&r.data){var f=parseInt(r.data,10);o=isNaN(f)||f<500?500:f}var m=new tn(i),h=Date.now();function p(){h=Date.now(),W.default.emit("websocket:reload")}var g,v,_=C().throttle(p,o),b=(g=null,v=!1,{start:function(){if(null===g)if(v=!0,!y.POLLING_ONLY_VISIBLE||nn()){xe().add("start polling");var e=1e3*y.STATUS_AUTO_CALL;if(g=window.setInterval(p,e),Date.now()-h>e)p()}},stop:function(e,t){if(void 0===e)e="stop polling";if(void 0===t)t=!1;if(v=t,null!==g)xe().add(e),window.clearInterval(g),g=null},get isActive(){return null!==g},get waitStartAfterVisible(){return v}});if(y.POLLING_ONLY_VISIBLE){var E=function(){if(!nn())b.stop(void 0,b.isActive);else if(b.waitStartAfterVisible)b.start()};E(),document.addEventListener("visibilitychange",E)}function T(){if(!m.connected&&m.isSupport()&&jt.default.has("async_notify")){if(e)b.stop();m.subscribe(),m.connected=!0}}if(Object.assign(m,{onDeactivate:function(){m.connected=!1,b.start()},onMailbox:function(){if(b.isActive)b.stop("update polling timeout"),b.start();_()},onDetached:function(){if(e)b.start()},onAttached:function(){if(e)b.stop();_()},onError:function(e){if(W.default.emit("websocket:disconnected"),e&&e.code)(0,Y.ZP)({chain:["notifier","error"],intervals:[[String(Math.abs(e.code)),"1"]]})}}),!e)b.start();W.default.on("data",(function(e){m.setRevision(e),T()})),m.setRevision(W.default.revision||{}),T()}(),(0,qt.Qn)(),Promise.resolve()));return en}var an,on={fetch:e=>rn(e.router)},sn=function(){return(sn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},ln=function(){function e(e,t){this.context=e,this.service=t,this._updateNeeded=!1,this.promise=Promise.resolve({context:sn({},this.context)}),this.tryHandleSecureOpenError=this.tryHandleSecureOpenError.bind(this)}return e.prototype.doRequest=function(e){var t=this;this.promise=this.promise.then((function(n){var r=n.context;return t.service.doRequest(t.context,e).then((function(e){return{context:r,response:e}})).catch((function(e){throw{error:e,context:r}}))}))},e.prototype.deriveContext=function(e){this.promise=this.promise.then((function(t){var n=t.response,r=t.context;return{response:n,context:e(n,r)}}))},e.prototype.catchError=function(e){this.promise=this.promise.catch((function(t){var n=t.error,r=t.context;return{response:void 0,context:e(n,r)}}))},e.prototype.getSecureFolderNotOpenResponse=function(e){return sn(sn({},e),{folder:e.folder||0,letters:[],lettersTotal:0,lastUpdateTime:this.service.getCurrentTS()})},e.prototype.tryHandleSecureOpenError=function(e,t){if(this.service.isSecureFolderNotOpenError(e))return this.getSecureFolderNotOpenResponse(t);throw e},e.prototype.setUpdateNeeded=function(e){this._updateNeeded=e},e.prototype.isUpdateNeeded=function(e){return!(!this._updateNeeded&&e.folder===this.context.folder&&(0,Ot.Z)(e.filters,this.context.filters)&&(0,Ot.Z)(e.sort,this.context.sort))},e.prototype.run=function(){return this.promise.then((function(e){return e.context}))},e.prototype.immediateContext=function(){return this.context},e.prototype.waitFor=function(e){this.promise=this.promise.then((function(t){return e.then((function(){return t}))}))},e.prototype.remove=function(e,t){var n=this;this.deriveContext((function(r,a){for(var i=[],o={},s=0,l=e;s<l.length;s++){o[l[s]]=!0}for(var c=0,d=n.context.letters;c<d.length;c++){var u=d[c];if(o[u.id])t(u);else i.push(u)}return sn(sn({},a),{letters:i})}))},e.prototype._sendThreadsStatusSmartRadar=function(e){if(e){var t=e.length,n=0,r=0,a=0;e.forEach((function(e){var t,i,o=null===(t=null==e?void 0:e.flags)||void 0===t?void 0:t.unread,s=null===(i=null==e?void 0:e.flags)||void 0===i?void 0:i.is_relevant;if(o)n++;if(s)r++;if(o&&s)a++})),m().send("threads_status_smart",{dwh:{count:t,priority_count:r,has_priority_letters:r>0,unread_count:n,priority_unread_count:a,has_priority_unread_letters:a>0}})}},e}(),cn=(an=function(e,t){return(an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}an(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dn=function(){return(dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},un=function(e){function t(t,n){var r=this,a=!1;if(void 0===t.page)t.page=1,t.letters=[],a=!0;return(r=e.call(this,t,n)||this).setUpdateNeeded(a),r}return cn(t,e),t.prototype.empty=function(e){this.context={folder:e.folder,folders:this.service.getAllFolders(),filters:e.filters,sort:e.sort,letters:[],discounts:[],collectors:[],lastUpdateTime:this.service.getCurrentTS(),lettersTotal:0,persistThreadId:void 0,isLastPage:!1,threadMeta:{currentId:void 0,changed:!0},page:1}},t.prototype.navigate=function(e){var t=this,n=e.folder,r=e.filters,a=e.sort;if(this.isUpdateNeeded(e)){var i=2*this.service.getListLimit()+1;this.doRequest({folder:n,offset:0,limit:i,filters:r,sort:a}),this.deriveContext((function(o,s){var l;if(t.service.isActionLocked())return s;var c={currentId:e.thread,changed:!1};return dn(dn({},s),{folder:n,filters:r,sort:a,folders:t.service.mapFolders(o.folders),collectors:t.service.mapCollectors(o.collectors),letters:t.service.mapThreads(o.threads,c,0),lettersTotal:o.threadsTotal,mboxSize:o.mboxSize,lastUpdateTime:t.service.getCurrentTS(),discounts:t.service.mapMessages(null===(l=o.discounts)||void 0===l?void 0:l.messages),threadMeta:c,page:1,isLastPage:o.threads.length!==i})})),this.deriveContext((function(e,n){return t.service.unreadMessagesNotificationsFix(n),n})),this.catchError(this.tryHandleSecureOpenError)}else this.update(e)},t.prototype.update=function(e){var t=e.folder;if(!this.isUpdateNeeded(e))this.loadPage(dn(dn({},e),{page:this.context.page,folder:t}),!0);else this.navigate(e)},t.prototype.loadMore=function(e){var t=e.folder;if(!this.isUpdateNeeded(e))this.loadPage(dn(dn({},e),{page:this.context.page+1,folder:t}));else this.navigate(e)},t.prototype.loadPage=function(e,t){var n=this;if(void 0===t)t=!1;var r=e.page,a=e.filters,i=e.sort;if(!this.isUpdateNeeded(e)){var o=!t&&r<this.context.page?this.context.lettersTotal:void 0,s=this.service.getListLimit(),l=Math.max((r-1)*s-1,0),c=2*this.service.getListLimit()+1;this.doRequest({folder:this.context.folder,offset:l,limit:c,filters:a,sort:i}),this.deriveContext((function(t,s){var d;if(n.service.isActionLocked())return s;if(!!!t.threads.length)r=n.context.page;var u={currentId:e.thread,changed:!1};return n._sendThreadsStatusSmartRadar(t.threads),dn(dn({},s),{filters:a,sort:i,folder:n.context.folder,folders:n.service.mapFolders(t.folders),collectors:n.service.mapCollectors(t.collectors),letters:n.service.mapThreads(t.threads,u,l),lastUpdateTime:n.service.getCurrentTS(),discounts:n.service.mapMessages(null===(d=t.discounts)||void 0===d?void 0:d.messages),lettersTotal:void 0!==o?o:t.threadsTotal,mboxSize:t.mboxSize,page:r,threadMeta:u,isLastPage:t.threads.length!==c})})),this.deriveContext((function(e,t){return n.service.unreadMessagesNotificationsFix(t),t})),this.catchError(this.tryHandleSecureOpenError)}else this.navigate(e)},t.prototype.getSecureFolderNotOpenResponse=function(t){return dn(dn({},e.prototype.getSecureFolderNotOpenResponse.call(this,t)),{page:1,isLastPage:!0})},t}(ln),fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mn=function(){return(mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},hn=function(e){function t(t,n){var r=this,a=!1;if(void 0!==t.page)delete t.page,t.letters=[],a=!0;return(r=e.call(this,t,n)||this).setUpdateNeeded(a),r}return fn(t,e),t.prototype.empty=function(e){this.context={folder:e.folder,filters:e.filters,sort:e.sort,folders:this.service.getAllFolders(),letters:[],discounts:[],collectors:[],lastUpdateTime:this.service.getCurrentTS(),lettersTotal:0,persistThreadId:void 0,isLastPage:!1,threadMeta:{currentId:void 0,changed:!0}}},t.prototype._navigateWithoutErrorHandling=function(e){var t=this,n=e.folder,r=e.filters,a=e.sort;if(this.isUpdateNeeded(e)){var i=this.service.getListLimit();this.doRequest({folder:n,offset:0,limit:i,filters:r,sort:a}),this.deriveContext((function(o,s){var l;if(t.service.isActionLocked())return s;var c={currentId:e.thread,changed:!1};return t._sendThreadsStatusSmartRadar(o.threads),mn(mn({},s),{folder:n,filters:r,sort:a,folders:t.service.mapFolders(o.folders),sharedMailboxes:t.service.mapSharedMailboxes(o.userGrants),collectors:t.service.mapCollectors(o.collectors),letters:t.service.mapThreads(o.threads,c,0),lettersTotal:o.threadsTotal,mboxSize:o.mboxSize,lastUpdateTime:t.service.getCurrentTS(),isLastPage:o.threads.length!==i,discounts:t.service.mapMessages(null===(l=o.discounts)||void 0===l?void 0:l.messages),threadMeta:c})}))}else this.update(e)},t.prototype.navigate=function(e){this._navigateWithoutErrorHandling(e),this.catchError(this.tryHandleSecureOpenError)},t.prototype._updateWithoutErrorHandling=function(e){var t=this,n=e.filters,r=e.sort;if(!this.isUpdateNeeded(e)){var a=this.service.getListLimit();this.doRequest({folder:this.context.folder,offset:0,limit:a,filters:n,sort:r}),this.deriveContext((function(n,r){var i;if(t.service.isActionLocked())return r;var o={currentId:e.thread,changed:!1};return t._sendThreadsStatusSmartRadar(n.threads),mn(mn({},r),{folders:t.service.mapFolders(n.folders),sharedMailboxes:t.service.mapSharedMailboxes(n.userGrants),collectors:t.service.mapCollectors(n.collectors),lettersTotal:n.threadsTotal,mboxSize:n.mboxSize,lastUpdateTime:t.service.getCurrentTS(),isLastPage:n.threads.length!==a,discounts:t.service.mapMessages(null===(i=n.discounts)||void 0===i?void 0:i.messages),letters:t.service.mergeThreadLists(t.context.letters,t.service.mapThreads(n.threads,o,0),{offset:0,limit:t.service.getListLimit(),persistThread:r.persistThreadId}),threadMeta:o})}))}else this.navigate(e)},t.prototype.update=function(e){this._updateWithoutErrorHandling(e),this.catchError(this.tryHandleSecureOpenError)},t.prototype.loadMore=function(e){var t=this,n=e.filters,r=e.sort;if(!this.isUpdateNeeded(e)){var a=this.service.getListLimit();this.doRequest({folder:this.context.folder,offset:this.context.letters.length,limit:a,filters:n,sort:r}),this.deriveContext((function(n,r){var i;if(t.service.isActionLocked())return r;var o={currentId:e.thread,changed:!1};return t._sendThreadsStatusSmartRadar(n.threads),mn(mn({},r),{folder:r.folder,folders:t.service.mapFolders(n.folders),sharedMailboxes:t.service.mapSharedMailboxes(n.userGrants),collectors:t.service.mapCollectors(n.collectors),letters:t.service.concatThreadLists(r.letters,t.service.mapThreads(n.threads,o,r.letters.length)),lettersTotal:n.threadsTotal,mboxSize:n.mboxSize,lastUpdateTime:t.service.getCurrentTS(),isLastPage:n.threads.length!==a,discounts:t.service.mapMessages(null===(i=n.discounts)||void 0===i?void 0:i.messages),threadMeta:o})})),this.catchError(this.tryHandleSecureOpenError)}else this.navigate(e)},t}(ln),pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.navigate=function(t){var n=this;e.prototype._navigateWithoutErrorHandling.call(this,t),this.deriveContext((function(e,t){if(e)n.service.unreadMessagesNotificationsFix(t);return t})),this.catchError(this.tryHandleSecureOpenError)},t.prototype.update=function(t){var n=this;e.prototype._updateWithoutErrorHandling.call(this,t),this.deriveContext((function(e,t){return n.service.unreadMessagesNotificationsFix(t),t})),this.catchError(this.tryHandleSecureOpenError)},t.prototype.loadMore=function(t){var n=this;e.prototype.loadMore.call(this,t),this.deriveContext((function(e,t){return n.service.unreadMessagesNotificationsFix(t),t}))},t}(hn);function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bn={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,fetch(e,t,n,r){var a=(0,Me.bh)().search,i=n&&n.type,o=e&&e.route&&e.route.is("#search #search-letter"),s=r&&r.status||{},c=Promise.all([t("setup"),t("uiThreadsSettings")]),d=(0,Me.Mk)(r);if(d)return d;var u=it.Z.get(),f=it.Z.getSorting(),m=parseInt(e.params.folder,10)||0;return ie.yc.group("app-fetch-status",()=>c.then(t=>{var c=vn(t,2),d=(c[0],c[1]),h=(0,Ye.M8)(e.router,d)?new un(s,Me.Lx):new gn(s,Me.Lx);if(!r||!r.status)return h.navigate({thread:e.params.letter,filters:u,sort:f,folder:o?0:m}),h.run();switch(i){case l.LOAD_MORE:if(n.prev)h.loadPage({page:(h.immediateContext().page||1)-1,folder:m,filters:u,sort:f,thread:e.params.letter});else h.loadMore({folder:m,filters:u,sort:f,thread:e.params.letter});break;case l.LOAD_PAGE:h.loadPage({page:n.page,folder:m,filters:u,sort:f,thread:e.params.letter});break;case l.TOGGLE_THREADS_SETTING:case l.TOGGLE_METATHREADS_SETTING:case l.CHANGE_METATHREADS_SETTING:case l.TOGGLE_TO_MYSELF_METATHREAD:case l.EDIT_METATHREADS_SETTINGS:case l.TOGGLE_METATHREADS_SETTINGS:case l.UPDATE_ALL:h.update({folder:m,filters:u,sort:f,thread:e.params.letter});break;case l.NAVIGATE:if(a&&!e.is("#search")&&!e.is("#search-letter"))a.clear();h.navigate({filters:u,sort:f,folder:o?0:m,thread:e.params.letter});break;case l.DESTROY_THREADS_AND_MESSAGES:var p=[...n.models.messages,...n.models.threads];h.remove(p.map(e=>e.id),e=>{(0,Me.WH)(e)});break;case l.EXECUTE_JSSDK_ACTION:return(0,Me.gy)(r);default:var g={folder:m,filters:u,sort:f,thread:e.params.letter};if(h.isUpdateNeeded(g))h.update(g)}return h.run()}),{score:"fetch",appendix:!i?"no-act":"act"})}},En={match:["#search","#search-letter"],fetch:(e,t)=>t("search").then(e=>{if(e&&e.query)return{suggestQuery:e.extraSuggestSearchQuery,baseQuery:e.query.query}})},yn=n(22023),Tn=n(29608),An=n(24737),Sn=n(27245),On=n.n(Sn),Cn=function(){return(Cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},wn=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},Ln={_notCountSameUid:{},_ignoreCounter:{},countUnsubscribeView:function(e,t,n,r){var a,i;if(void 0===e)e={counter:{},list:[]};if(this._notCountSameUid[r])return e;var o=(null!==(i=e.counter[r])&&void 0!==i?i:0)+1;this._notCountSameUid[r]=!0;var s=Cn(Cn({},e),{counter:Cn(Cn({},e.counter),(a={},a[r]=o,a))});if(o===y.LL_UNSUBSCRIBE_NEWSLETTERS_SHOW_LIMIT)this._ignoreCounter[r]=!0,(0,Y.ZP)({type:"unsub_sndrs_show_limit",dwh:{sender:r}});var l=this.getActualSenders(s,t,n);return _e.ZP.set("unsubscribe-list",s),Cn(Cn({},s),{actualSenders:l})},hideSenders:function(e,t,n,r){var a,i=null!==(a=e.hidden)&&void 0!==a?a:[];if(r.every((function(e){return i.includes(e)})))return e;var o=Cn(Cn({},e),{hidden:wn(wn([],i,!0),r,!0)}),s=this.getActualSenders(o,t,n);return _e.ZP.set("unsubscribe-list",o),Cn(Cn({},o),{actualSenders:s})},_calculateActualSenders:function(e,t,n){var r=this,a=t.map((function(e){var t,r,a,i,o=null===(a=null===(r=null===(t=e.get("correspondents"))||void 0===t?void 0:t.from)||void 0===r?void 0:r[0])||void 0===a?void 0:a.email;if((null===(i=e.get("flags"))||void 0===i?void 0:i.unread)&&n.includes(o))return{sender:o,id:e.get("id")}})).filter((function(t){var n,a,i;if(!t)return!1;var o=t.sender,s=null===(n=null==e?void 0:e.hidden)||void 0===n?void 0:n.some((function(e){return e===o}));if(!o||s)return!1;var l=null!==(i=null===(a=null==e?void 0:e.counter)||void 0===a?void 0:a[o])&&void 0!==i?i:0;return r._ignoreCounter[o]||l<y.LL_UNSUBSCRIBE_NEWSLETTERS_SHOW_LIMIT}));return a.filter((function(e,t){return a.findIndex((function(t){return t.sender===e.sender}))===t})).slice(0,y.LL_UNSUBSCRIBE_NEWSLETTERS_SENDERS_LIMIT)},getActualSenders:function(e,t,n,r){var a,i=this,o=null!=e?e:{list:[]},s=null!=t?t:[],l=null!=n?n:{},c=null!==(a=null!=r?r:o.list)&&void 0!==a?a:[],d=Object.values(l).map((function(e){return null==e?void 0:e.threads})).filter((function(e){return e})),u=[];return wn([s],d,!0).forEach((function(e){return u.push.apply(u,i._calculateActualSenders(o,e,c))})),u}},kn=function(){return(kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},In={match:(0,E.Z)(["#attachment","#attachment-editor"]).exclude,defaults:{},fetch:function(e,t,n,r){if(!y.LL_UNSUBSCRIBE_NEWSLETTERS)return Promise.resolve({});var a=null==r?void 0:r.unsubscribeList,i=null!=a?a:_e.ZP.get("unsubscribe-list");switch(null==n?void 0:n.type){case l.DELETE_SENDER_FROM_UNSUBSCRIBE_LIST:if(!(null==r?void 0:r.status))return;var o=r.status.letters,s=r.metathreads;return Promise.resolve(Ln.hideSenders(i,o,s,n.senders));case l.HIDE_UNSUBSCRIBE_SENDER:if(!(null==r?void 0:r.status))return;o=r.status.letters,s=r.metathreads;var c=n.senders;return(0,Y.ZP)({type:"hide_unsub_sndrs",dwh:{senders:c}}),Promise.resolve(Ln.hideSenders(i,o,s,c));case l.COUNT_UNSUBSCRIBE_VIEW:o=r.status.letters,s=r.metathreads;return Promise.resolve(Ln.countUnsubscribeView(i,o,s,n.sender));case l.TOGGLE_METATHREAD:case l.TOGGLE_METATHREADS_SETTING:case l.LOAD_MORE_METATHREAD:case l.TOGGLE_THREADS_SETTING:case l.NAVIGATE:case l.UPDATE_ALL:if(i)return Promise.all([t("status"),t("metathreads")]).then((function(e){var t=e[0],n=e[1],r=Ln.getActualSenders(i,t.letters,n);return kn(kn({},i),{actualSenders:r})}))}var d=!(null==i?void 0:i.timestamp),u=Math.floor(Date.now()/1e3);if(!(!a||d||u-i.timestamp>y.LL_UNSUBSCRIBE_NEWSLETTERS_INTERVAL))return i;else return Promise.all([t("status"),t("metathreads")]).then((function(e){var t=e[0],n=e[1];return On().execute({method:On().Methods.Unread}).then((function(e){return e.result})).then((function(e){var r,a;(0,Y.ZP)({type:"clnmstr_unread_ds"});var o=e.body,s=t.letters,l=Ln.getActualSenders(i,s,n,o),c={list:o,counter:null!==(r=null==i?void 0:i.counter)&&void 0!==r?r:{},hidden:null!==(a=null==i?void 0:i.hidden)&&void 0!==a?a:[],timestamp:u};return _e.ZP.set("unsubscribe-list",c),kn(kn({},c),{actualSenders:l})})).catch((function(e){var t=e.error;return(0,Y.ZP)({chain:["clnmstr_unread_ds_err",t.status,t.message]}),{}}))}))}},Rn=n(19008),Dn={_promise:null,_fetch:function(){return new Promise((function(e){var t=new XMLHttpRequest;t.open("GET","https://vk.com/feed2.php?act=widget",!0),t.withCredentials=!0,t.onload=function(){m().send("vk-connect_request_ok");var n=null;try{n=JSON.parse(t.response)}catch(e){n={},m().send("vk-connect_request-parse-error")}if(200!==t.status||!n.friends)return m().send("vk-connect_unauthorized"),e({authorized:!1});m().send("vk-connect_authorized"),e({authorized:!0})},t.onerror=function(){m().send("vk-connect_request_fail"),e({authorized:!1})},t.send()}))},check:function(){if(!this._promise)this._promise=this._fetch();return this._promise}},Mn=function(e){if(!y.VK_MESSENGER_CHAT_ID_BY_EMAIL||y.DISABLE_VK_MESSENGER)return null;else return y.VK_MESSENGER_CHAT_ID_BY_EMAIL[e.toLowerCase()]},Pn=function(e){if(!e)return null;else return"".concat(y.VK_MESSENGER_CHAT_HREF_BASE).concat(e)},Nn={match:(0,E.Z)(["#read-letter","#search-letter"]),fetch:function(e,t){var n=this;if(!y.DISABLE_VK_MESSENGER){var r=[t("letter"),y.VK_MESSENGER_CHECK_VK_AUTH?Dn.check():Promise.resolve({authorized:!0})];return Promise.all(r).then((function(e){var t=e[0];if(e[1].authorized&&t)return n.processThreads([t])}))}},processThreads:function(e){if(e)e.forEach((function(e){var t=(0,Rn.WE)(e,"from",".0.email"),n=e.get("transaction_metadata");if(t&&n&&void 0===n.get("vk_chat_href")){var r=function(e){var t=Mn(e);if(!t)return null;else return t.id}(t),a=function(e){var t=Mn(e);if(!t)return null;else return t.name}(t);if(r)n.set({vk_chat_id:r,vk_chat_href:Pn(r),shop_name:a})}}))}},xn=new function(){this.offLine=function(){return!!navigator&&"object"==typeof navigator&&"onLine"in navigator&&!1===navigator.onLine}};function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var Gn,qn,jn,Wn={request:{fetch:e=>e},router:{fetch:e=>e.router},route:{fetch:e=>e.router.activeRoute||e.router},setup:on,authUser:pe,pushManager:At,swBox:gt.ZP,folder:Ce,folders:we,account:ne,uiLayout:yn.ZP,uiThreadsSettings:An.Z,letter:ze,letters:rt,metathreads:ht,uiLetters:Tn.ZP,discounts:R,status:bn,search:Gt,suggestSearch:En,message:at,attachment:de,attachmentTemporary:me,jssdkAction:De,letterNeighbours:et,collectors:Oe,aliases:le,hiddenPaymentDies:Re,billsCount:Te,unsubscribeList:In,vkMessenger:Nn},Vn=Object.keys(Wn).map(e=>Wn[e].reaction&&[e,Wn[e].reaction]).filter(e=>e),zn=/^(not_exists|invalid)$/,Yn=new P,Kn=null,Xn=()=>Kn.fetch(),Qn=!1,Jn=new Promise(e=>{jn=e});class $n extends c.Z{constructor(){super(),x().apply(this),this.updateAllPid=null,this.updateAll=this.updateAll.bind(this),this.scheduleUpdateAll=this.scheduleUpdateAll.bind(this)}getData(){var e=Bn({},Gn);return e.model=e,e}loadPromise(){return Jn}getLoader(){return Kn}updateAll(){if(i().active){if(y.IS_DEBUG)console.warn("[data-source] Отменён вызов updateAll, поскольку выполняется ".concat(i().active," действий."));return Promise.resolve(Gn)}if(y.PREVENT_UPDATE_WITHOUT_INTERNET&&xn.offLine()){if(y.IS_DEBUG)console.warn("[data-source] Отменён вызов updateAll, потому что нет интернета");return Promise.resolve(Gn)}if(this.updateAllPid)window.clearTimeout(this.updateAllPid),this.updateAllPid=null;return this.dispatch({type:l.UPDATE_ALL,priority:j().Loader.PRIORITY_LOW})}scheduleUpdateAll(){if(this.updateAllPid)window.clearTimeout(this.updateAllPid);if(this.updateAllPid=window.setTimeout(()=>{this.updateAllPid=null,this.updateAll()},y.STATUS_DEBOUNCE_TIMEOUT),y.IS_DEBUG)console.warn("Запланирован вызов updateAll.")}dispatch(e){return super.dispatch(e),Kn.dispatch(e)}}var er=new $n;if(y.LOG_DATASOURCE_PROBLEMS)er.on("beforeaction",e=>{try{Yn.addEntry(e)}catch(e){}}),Jn.then(()=>{Yn.stopLogging()});Kn=new(j().Loader)(Wn,{persist:!0,processing(e,t,n){if(function(){if(!Qn)Qn=!0,jn()}(),Vn.forEach(t=>{var r=Fn(t,2),a=r[0],i=r[1];n=i(e,n,{type:"FETCHED"},{fetch:Xn,previousData:Gn[a]})}),(Gn=n).store=(0,Me.bh)(),y.IS_DEBUG)console.warn("[data-source] ".concat(t.type).concat(" "+(t.uid||"")),t,n);return er.notifyNextData(e,t,n),n},processingModelError(e,t,n,a,o){if(t instanceof j().Request)throw t;if("#error"===n.route.id)return new(G());if(y.IS_DEBUG)console.error("Ошибка загрузки модели:",e,t);if((0,W.isJSSDKCompliantObject)(t)){if(500===t.get("status")&&Gn===qn)throw(0,Y.ZP)(["processing","error","server"]),window.setTimeout(()=>M(),50),t}if(o&&o.type===l.EXECUTE_JSSDK_ACTION)return null;if((0,Y.ZP)(["processing","error",e]),!t||!t.get||!t.get("status")){if(V.default.error({unique:!0}),y.IS_DEBUG)console.error(t);if(t instanceof Error)return(0,r.coreLoggerDispatchError)(t,{modelName:e,error:t}),Promise.reject(t);var c=t instanceof i()?"Action":t instanceof s().Request?"Request":t;return(0,r.coreLoggerDispatchError)(new Error("".concat(c||"Unknown"," datasource error in: ").concat(e)),{modelName:e,error:c},{category:"fmail-17597",tag:r.Tag.Known}),Promise.reject(c)}switch(e){case"attachmentTemporary":return[];case"folders":return V.default.error({unique:!0}),S().all;case"status":case"letters":if(zn.test(t.get("body.folder.error"))){if(o&&o.type===l.NAVIGATE)n.redirectTo(n.router.getUrl("#letters",{}),!0);else n.router.nav(n.router.getUrl("#letters",{}));var d=function(e){var t=(0,Ye.Mn)(e.router)?new un({},Me.Lx):new hn({},Me.Lx);return t.empty({thread:e.params&&e.params.letter,folder:e.folder,filters:it.Z.get(),sort:it.Z.getSorting()}),t.immediateContext()}(n);if("letters"===e)return d.letters;else return d}return V.default.error({unique:!0}),[];case"letter":if(zn.test(t.get("body.id.error")))return new(B())({NoMsg:1});var u=n.params&&n.params.letter;return V.default.error({unique:!0}),B().all.get(u)||new(B())({NoMsg:1});case"message":if(zn.test(t.get("body.id.error")))return new(U())({NoMsg:1});else return V.default.error({unique:!0}),new(U())({NoMsg:1});case"search":return Bn(Bn({},(Gn||{}).search),{},{letters:[]});case"metathreads":return[]}return(0,Y.ZP)(["processing","error","unhandled"]),new(G())}}),Gn=Kn.defaults(),qn=Gn,Gn.store=(0,Me.bh)(),W.default.on("websocket:reload",er.scheduleUpdateAll),W.default.on("any:reload",er.scheduleUpdateAll),i().on("complete",er.scheduleUpdateAll),z.Z.on("pagelifecycle:reload",er.scheduleUpdateAll),Kn.setDebug(y.IS_DEBUG);var tr=er},96053:function(e,t){"use strict";function n(e){if(this.length)return this.includes(e);else return!0}function r(e){return!this.includes(e)}t.Z=e=>{var t=n.bind(e);return t.exclude=r.bind(e),t}},4308:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(18440),a=n.n(r),i="js-promo-id_",o=a().vdom;a().tags["@promo:id"]=function(e,t,n,r){var a="string"==typeof t?t:"";if(0===r.name.indexOf("b:"))console.error("Не используйте promo:id для блоков");else return r.newChild("promo:patch",{id:a},0),!1},a().tags["promo-wrapper"]={scope:!0,toCode:()=>["var __nsId = $id, __nsIdx = @@.children.length;","__vdom.addPromoClass(@@.children[__nsIdx], __nsId);"]},a().vdom.addPromoClass=function(e,t){if(t){var n="".concat(i).concat(t);if(e)e.events.$created=[].concat(e.events.$created,e=>{var t=n;if(o.classNameBuilder)t=o.classNameBuilder(t);e.target.classList.add(t)}),e.events.$subtreeModified=[].concat(e.events.$subtreeModified,e=>{var r=e.target,a=n;if(o.classNameBuilder)a=o.classNameBuilder(a);if(!r.classList.contains(t))r.classList.add(a)})}},a().tags["promo:patch"]={scope:!0,required:["id"],expressions:["test"],prepare:(e,t)=>({id:t.id,test:t.test}),toCode(e){var t=[o.interpolateValue("__val__",e.id),'__val__ = __val__ ? " " + "'.concat(i,'" + __val__ : "";'),"if (__vdom.classNameBuilder && __val__) {","  __val__ = __vdom.classNameBuilder(__val__);","}","if (!@@.attrs) {","  @@.attrs = {};","}","if (!@@.attrs.class) {",'  @@.attrs.class = "";',"}","if (__val__) {",'  @@.attrs.class += " " + __val__;',"}"];if(e.test)t.unshift("if ($test) {"),t.push("}");return[t.join("\n"),""]}}},3275:function(e,t,n){"use strict";n.d(t,{Q:function(){return a}});var r=n(19275);function a(e,t,n){return r.Z.get("urls.avatarUrl")+"/pic"+"?width=".concat(n)+"&height=".concat(n)+"&email=".concat(encodeURIComponent(e))+"&name=".concat(encodeURIComponent(t))}},96323:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var r=e=>"«".concat(e,"»")},91779:function(e,t,n){"use strict";n.d(t,{j:function(){return d},M:function(){return u}});var r=i18n("байт"),a=i18n("КБ"),i=i18n("МБ"),o=i18n("ГБ"),s=i18n("TБ"),l=Object.freeze({KB:1024,MB:Math.pow(1024,2),GB:Math.pow(1024,3),TB:Math.pow(1024,4)}),c=(e,t,n,r)=>{var a=(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString().split(".");if(r)for(var i=a[0].length-3;i>=0;i-=3)a[0]=a[0].slice(0,Math.max(0,i))+r+a[0].slice(i);return a[0]+(a[1]?n+a[1]:"")};function d(e){if(e>=l.TB)e=c(e/l.TB,2,".","")+" "+s;else if(e>=l.GB)e=c(e/l.GB,2,".","")+" "+o;else if(e>=l.MB)e=c(e/l.MB,2,".","")+" "+i;else if(e>=l.KB)e=c(e/l.KB,0)+" "+a;else e=c(e,0)+" "+r;return e}function u(e){switch(!0){case e<=l.KB:return"1kb";case e<=l.MB:return"1mb";case e<=25*l.MB:return"25mb";case e<=l.GB:return"1gb";case e<=2*l.GB:return"2gb";default:return"over"}}},12386:function(e,t,n){"use strict";n.d(t,{R:function(){return a},u:function(){return i}});var r={500011:i18n("Соц. сети")};function a(e){var t=e.get("name");return r[e.get("id")]||t||""}function i(e){var t=e.get("metathread_data.folder"),n=e.get("metathread_data.folder_name");return r[t]||n||""}},98631:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(60033),a=n.n(r);function i(e,t){var n;try{n=new URL(e)}catch(t){return a().send("merchant_parse_error_oct"),e}var r,i=n.searchParams.get("data");if(!i)i="{}";try{r=JSON.parse(i)}catch(t){return a().send("merchant_parse_error_oct"),e}if(!r.merchant_param)r.merchant_param={};Object.keys(t).forEach(e=>{r.merchant_param[e]=t[e]});var o=JSON.stringify(r);return n.searchParams.set("data",o),n.href}},4673:function(e,t,n){"use strict";n.d(t,{L7:function(){return d},ZP:function(){return b}});var r=n(37030);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=864e5;function d(e){return Math.round(e.getTime()/1e3)}function u(e){return 1e3*e}var f="from",m="to",h="q_date",p="q_date_lapse",g={[f]:{year:"dyb",month:"dmb",day:"ddb"},[m]:{year:"dye",month:"dme",day:"dde"}};function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return Math.abs(e-t)<n}class _{constructor(e,t){if(this.date=e,this.role=t,"number"==typeof e)this.date=new Date(e)}toQuery(){var e=this.date,t=this.role;return{[g[t].year]:e.getFullYear(),[g[t].month]:e.getMonth()+1,[g[t].day]:e.getDate()}}normalize(){switch(this.role){case f:this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0);break;case m:this.date.setHours(23),this.date.setMinutes(59),this.date.setSeconds(59)}return this}equals(e){return this.role===e.role&&this.date.getTime()===e.date.getTime()}equalsEpsilon(e){return this.role===e.role&&v(this.date.getTime(),e.date.getTime())}static fromQuery(e,t){var n=g[t],r=n.year,a=n.month,i=n.day;if(null==e[r]||null==e[a]||null==e[i])return null;var o=new Date;return o.setFullYear(parseInt(e[r],10),parseInt(e[a],10)-1,parseInt(e[i],10)),new _(o,t)}}class b{constructor(e,t){this.from=e,this.to=t}static fromDateAndLapse(e){var t=e.date,n=e.dateEnd,r=e.lapse;if("string"==typeof t){var a=s(t.split("."),3),i=a[0],o=a[1],l=a[2];t=new Date(parseInt(l,10),parseInt(o,10)-1,parseInt(i,10),12,0,0,0)}var d=t.getTime(),u=r*c,h=d-u,p=d+u;if(n){h=d,p=n.getTime()}return new b(new _(h,f).normalize(),new _(p,m).normalize())}static fromQuery(e){var t=e[h],n=parseInt(e[p],10)||0;if(t)return b.fromDateAndLapse({date:t,lapse:n});var r=new b(_.fromQuery(e,f),_.fromQuery(e,m));if(null!==r.from&&null!==r.to)return r.normalize();else return null}static fromRPCInterval(e){return new b(new _(u(e.from),f),new _(u(e.to),m))}normalize(){return this.from.normalize(),this.to.normalize(),this}toDateAndLapse(){var e=this.from.date.getTime(),t=this.to.date.getTime(),n=Math.round(.5*(e+t)),r=n-e;return{date:new Date(n),lapse:Math.floor(r/c)||0}}toDateAndDateEnd(){var e=this.from.date.getTime(),t=this.to.date.getTime(),n=new Date(e),r=new Date(t);if(v(e,t,c))r=null;return{date:n,dateEnd:r,lapse:0}}toQuery(){var e=this.toDateAndLapse(),t=e.date,n=e.lapse;return i(i(i({},this.from.toQuery()),this.to.toQuery()),{},{[h]:(0,r.p6)(t,[["day","2-digit"],["month","2-digit"],["year","numeric"]],{literalAfter:{day:".",month:"."}}),[p]:n})}toRPCInterval(){return{from:d(this.from.date),to:d(this.to.date)}}equals(e){return this.from.equals(e.from)&&this.to.equals(e.to)}equalsEpsilon(e){return this.from.equalsEpsilon(e.from)&&this.to.equalsEpsilon(e.to)}}},4907:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(96596),a=n.n(r),i=n(93286);function o(e){try{return decodeURIComponent(e)}catch(t){return a().add("decodeURIComponent.error",{error:t,url:e}),(0,i.ZP)(["decode-uri-component","error"]),null}}},50678:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(96596),a=n.n(r),i=n(93286);function o(e){try{return encodeURIComponent(e)}catch(t){return a().add("encodeURIComponent.error",{error:t,url:e}),(0,i.ZP)(["encode-uri-component","error"]),null}}},93686:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,a,i;if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(a=n;0!=a--;)if(!r(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(a=n;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;for(a=n;0!=a--;){var o=i[a];if(!r(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}n.d(t,{Z:function(){return r}})},66005:function(e,t,n){"use strict";n.d(t,{IR:function(){return a},wv:function(){return i},qc:function(){return o}});var r={inbox:"categories:mail",sent:"actions:reply",drafts:"categories:drafts",templates:"navigation:folder",spam:"actions:dislike",trash:"actions:delete",archive:"actions:archive",user:"navigation:folder",social:"navigation:users",promotions:"categories:discounts",newsletters:"categories:mailings",tomyself:"categories:self_mail",news:"categories:subscriptions",official:"categories:government",receipts:"categories:receipts",school:"categories:school",games:"categories:games",outbox:"status:time",folder:"navigation:folder",shared:"navigation:user_s",child_trash:"actions:delete",parental_control:"navigation:tip","lock-on":"status:lock_on_small","lock-off":"status:lock_off_small","lock-on_fill":"mail_20:status:lock_on_small","lock-off_fill":"mail_20:status:lock_off_small"};t.ZP=r;var a={inbox:"categories:mail_s",sent:"actions:reply_s",drafts:"categories:drafts_s",templates:"navigation:folder_s",spam:"actions:dislike_s",trash:"actions:delete_s",archive:"actions:archive_s",user:"navigation:folder_s",social:"navigation:users_s",promotions:"categories:discounts",newsletters:"categories:mailings_s",tomyself:"categories:self_mail_s",news:"categories:subscriptions_s",official:"categories:government_s",receipts:"categories:receipts_s",school:"categories:school_s",games:"categories:games_s",outbox:"status:time_s",folder:"navigation:folder_s",shared:"navigation:user_s",child_trash:"actions:delete_s",parental_control:"navigation:tip_s","lock-on":"status:lock_on_small","lock-off":"status:lock_off_small","lock-on_fill":"mail_20:status:lock_on_small","lock-off_fill":"mail_20:status:lock_off_small"};function i(e){var t=e.get("type");if("archive"===t&&!e.isArchive())t="user";if(e.isArchive())t="archive";return t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=i(e);return e.isSystem()||e.isArchive()?t[n]||t.folder:t.folder}},547:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});function r(e){return e.metaKey||e.ctrlKey||1===e.button}},81242:function(e,t,n){"use strict";n.d(t,{M:function(){return a},u:function(){return i}});var r=n(21211),a=[{key:"ru_RU",label:"Русский",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/ru.png")},{key:"uk_UA",label:"Українська",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/ua.png")},{key:"be_BY",label:"Беларуская",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/bel.png")},{key:"hy_AM",label:"Հայերեն",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/arm.png")},{key:"kk_KZ",label:"Казақша",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/kaz.png")},{key:"uz_UZ",label:"O‘zbek",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/uz.png")},{key:"mo_MD",label:"Moldovenească",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/mold.png")},{key:"ro_RO",label:"Română",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/rom.png")},{key:"en_US",label:"English",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/eng.png")},{key:"es_ES",label:"Español",src:"".concat(r.PACKAGES_URL,"/static.promo/octavius/languages/esp.png")}],i={};a.forEach((e,t)=>{e.index=t,i[e.key]=e})},82525:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r={false:!1,true:!0,0:!1,1:!0};function a(e){return r[e]}},88695:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(90065),a=n(55540);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor)n=e.constructor.name;if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(null==t||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,i=e.split(/(#.*)/),s=l(i,2),c=s[0],d=s[1],u=void 0===d?"":d,f=c.split("?"),m=l(f,2),h=m[0],p=m[1],g=void 0===p?"":p,v=(0,r.Z)(o(o({},(0,a.Z)(g)),t),n);return"".concat(h,"?").concat(v).concat(u)}},55540:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(13624);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if("string"!=typeof e)return{};if(e.includes("?"))t=e.split("?")[1];return r.queryString.parse(t)}},56220:function(e,t,n){"use strict";n.d(t,{M9:function(){return r},Gj:function(){return a}});function r(e){var t=(e.get("signs").filter(e=>e.active)[0]||{}).sign_html||"";return t='<div data-signature-widget="container" data-signature-id="current"><div data-signature-widget="content">'+t+"</div></div>"}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace('data-signature-id="current"',"")}},25403:function(e,t,n){"use strict";function r(e){if(!e||!e.length)return"";else return e.map(e=>"«".concat(e,"»")).join(", ")}function a(e,t){var n=e.lettersTotal,r=t>n,a=[["letter_rank",!n&&r?t-1:t]];if(e.suggestLettersTotal&&r)a.push(["from_suggest",1]);return a}n.d(t,{I:function(){return r},i:function(){return a}})},57147:function(e,t,n){"use strict";n.r(t);var r=n(97899),a=n(21211),i=n(18440),o=n.n(i),s=n(4872),l=n.n(s),c=n(92042),d=n.n(c),u=n(84118),f=n(73173),m=n(78364),h=n(13624),p=n.n(h),g=n(55674),v=n(96384),_=n(69335),b=n(93610),E=n(48653),y=n(43353),T=n(23712),A=n(91622),S=n(41026),O=n(64391),C=n(42180),w=n(53485),L=n(70757),k=n(60319),I=n(35108),R=n(90557);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}t.default=o().Mediator.create("letters-selection",{performanceTrace:"track",defaults(){this.map={},this.scope={},this.folderSelected={},this.specialFolderSelected={}},components:{router:{class:p(),events:["route"]},layout:{class:A.ZP,attrs:{selectMode:e=>e.hasSelected()}},"portal-menu":{class:w.ZP,events:["select:all","select:drop","select:toggle"],attrs:{selected:e=>e.getModels(),selectMode:e=>e.hasSelected(),selectFolder:e=>e.isFolderSelected(),deselectAll:e=>e.isFolderSelected()||e.isSpecialFolderSelected()}},"search-panel":{class:k.Z,events:["select:drop"],attrs:{hide:e=>!a.NEW_TOOLBAR&&e.hasSelected()}},listNestedMoveToFolder:{class:O.Z,attrs:{lettersFoldersIds:e=>e.getLettersFoldersIds(),selectedMetathreads:e=>e.hasSelectedMetathread()}},portalMenuElement:{class:L.Z,attrs:{lettersFoldersIds:e=>e.getLettersFoldersIds()}},"layer-move-to-folder":{class:T.default,attrs:{lettersFoldersIds:e=>e.getLettersFoldersIds()}},dropdownActions:{class:y.Z,attrs:{route:e=>e.get("router.route"),lettersFoldersIds:e=>e.getLettersFoldersIds()}},"dataset-letters":{events:["selected:toggle"],attrs:{selected:e=>e.getHashMap(),selectedLength:e=>e.getModels().length,selectedModelsData:e=>e.getModels(),"select-folder":e=>e.isFolderSelected(),metathreadsWithSelected:e=>e.getMetathreadsWithSelected()}},panelWithSelected:{class:C.Z,attrs:{selected:e=>e.getModels(),selectFolder:e=>e.isFolderSelected()}},contextmenu:{class:_.Z,events:["select:all","select:drop"],attrs:{"selected-map":e=>e.getHashMap(),"selected-length":e=>e.getModels().length}},"contextmenu-message":{class:b.Z,events:["select:all","select:drop"],attrs:{isSearchDisabled:e=>e.getModels().length>1,deselectAll:e=>e.isFolderSelected()||e.isSpecialFolderSelected(),"disable-create-event":()=>a.DISABLE_CREATE_EVENT}},"contextmenu-selection":{class:E.Z,events:["select:all","select:drop"],attrs:{"selected-folder":e=>e.isFolderSelected()&&e.getCurrentFolder(),selected:e=>e.getModels(),"if-folder-selected":e=>e.isFolderSelected()||e.isSpecialFolderSelected(),"letters-folders-ids":e=>e.getLettersFoldersIds(),"selected-metathreads":e=>e.hasSelectedMetathread()}},"layer-create-folder":{lazy:R.j7,attrs:{selectMode:e=>e.hasSelected()}},"search-mobile-panel":{lazy:R.j7,attrs:{selectMode:e=>e.hasSelected()}},"letter-meta":{class:S.Z},"webview-mobile-header":{class:I.Z,events:["select:all","select:drop"],attrs:{selected:e=>e.getModels(),selectMode:e=>e.hasSelected(),selectFolder:e=>e.isFolderSelected(),deselectAll:e=>e.isFolderSelected()||e.isSpecialFolderSelected()}}},reset(){this.switchScope(this.scopeId),this.updateAll()},resetLetterMeta(){this.getList("letter-meta").forEach(e=>{e.destroy()})},cleanSelection(e){var t=this.hasSelected();this.cleanScope(this.scopeId),this.switchScope(this.scopeId),(t||e)&&this.updateAll()},switchScope(e){this.map=this.scope[e]||(this.scope[e]={}),this.scopeId=e},updateScope(){this.scope[this.scopeId]=this.map},cleanScope(e){e=null==e?this.scopeId:e,this.scopeId==e&&(this.map={}),this.scope[e]={},delete this.folderSelected[e],delete this.specialFolderSelected[e]},getAllModelsWithPaginator(e){var t=[];if(this.get("router.route").is("#search #search-letter"))return this.getAllUIModels();if(void 0===e)t=d().all.slice();else t=d().all.filter(t=>t.get("folder")==e);return t.set(this.getAllUIModels().filter(t=>{if(void 0===e)return f.Z.isMetathread(t);else return t.get("folder")==e&&f.Z.isMetathread(t)})),t=t.sort("date",{reverse:!0}).toArray()},getAllModels(e){var t=this.get("router");if((0,r.Mn)(t))return this.getAllModelsWithPaginator(e);var n=this.get("router.route.id"),a=[],i="uiLetters";if("#search"==n||"#search-letter"==n)i="search.letters";if(void 0!==e&&"search"!==i)a=d().all.filter(t=>String(t.get("folder"))===String(e)).sort("date",{reverse:!0}).toArray();else{var o=this.get("router.model.".concat(i))||[],s=this.get("router.model.search.suggestLetters")||[];a=o.concat(s)}return a},getAllUIModels(){var e=this.get("router.route.id"),t="#search"===e||"#search-letter"===e?"search.letters":"uiLetters",n=this.get("router.model.".concat(t))||[],r=this.get("router.model.search.suggestLetters")||[];return n.concat(r)},getHashMap(){return this.map},getModels(){return this.getAllModels().filter(function(e){var t=!0;if(e.get("advModel")||u.Z.isDatasetModel(e))return!1;if(f.Z.isMetathread(e))t=this.map[e.id];else if(this.isFolderSelected())t=!0;else t=this.map[e.id];return t}.bind(this))},getLettersFoldersIds(){var e=this.getModels().reduce((e,t)=>{var n;if(f.Z.isMetathread(t))n=t.get("metathread_data.folder");else n=t.get("folder");return M(M({},e),{},{[n]:!0})},{});return Object.keys(e)},isFolderSelected(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scopeId;return!!this.folderSelected[e]},getMetathreadsWithSelected(){var e={};return this.getAllModels().forEach(t=>{if(t.get("flags.metathread"))if(!this.map[t.id]){var n=t.get("metathread_data.folder");if(this.getAllModels(n).filter(e=>this.map[e.id]).length>0)e[t.id]=!0}else e[t.id]=!0}),e},hasSelectedMetathread(){return Object.keys(this.map).some(e=>!!f.Z.all.get(e))},isSpecialFolderSelected(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scopeId;return!!this.specialFolderSelected[e]},getCurrentFolder(){return l().get(this.scopeId)},hasSelected(){var e=this.get("router.route"),t=this.get("layout");if(t&&"2pane"===t.get("type")&&e.is("#read-letter #search-letter"))return!1;else return this.getModels().length>0},deselect(e){if(e){if(null!=e.id)e=[e];var t=Object.keys(this.scope);e.forEach(e=>{t.forEach(t=>{delete this.scope[t][e.id]})}),this.updateAll()}},emitChange(){this.emit("change",this)},select(e){this.map[e.id]=!0,this.updateAll()},handleEvent(e){var t=e.type,n=this.get("router");switch(t){case"route":var r=n.model.folder?n.model.folder.id:n.activeRoute.id;if(n.request.is("#search")||n.request.is("#search-letter"))r="search";if(this.switchScope(r),n.request.is("#letters"))this.reset(),this.resetLetterMeta();return!1;case"selected:toggle":var a=e.details,i=a.get("folder"),o=this.getAllModels(),s=this.getAllUIModels(),c=!!this.map[a.id],d=(e=>{for(;e.originalEvent;)e=e.originalEvent;return e})(e),u=s.indexOf(a),f=a.get("flags.metathread"),h=!!this.map["multithreadFixId"+i],p=s.indexOf(this.prevSelected);if(!d.shiftKey||-1===p)p=u;for(var _=[Math.min(p,u),Math.max(p,u)],b=_[0]<_[1],E=M({},this.map),y=_[0],T=_[1];y<=T;y++){var A=s[y],S=A.get("flags.metathread"),O=m.Z.isSkeleton(A);if(!b||!S){if(b&&O){E=M({},this.map),c?delete E[a.id]:E[a.id]=!0;break}c?delete E[A.id]:E[A.id]=!0}}if(this.map=E,this.updateScope(),this.prevSelected=a,f){var C=a.get("metathread_data.folder");this.getAllModels(C).forEach(e=>delete this.map[e.id]);var w=l().get(C);if(w&&!w.isSecureOpen())this.map[a.id]=!1,(0,v.Z)(w).then(e=>{if(e)this.map[a.id]=!0})}else if(!this.isFolderSelected()){if(h){delete this.map["multithreadFixId"+i],this.getAllModels(i).forEach(e=>{if(e.id===a.id)delete this.map[e.id];else this.map[e.id]=!0})}}else if(this.isFolderSelected())if(delete this.folderSelected[this.scopeId],i===this.scopeId)delete this.map[a.id],o.forEach(e=>{if(e.id!==a.id&&!e.get("flags.metathread")&&e.get("folder")===this.scopeId)this.map[e.id]=!0});else if(o.forEach(e=>{if(!e.get("flags.metathread")&&e.get("folder")===this.scopeId)this.map[e.id]=!0}),h){delete this.map["multithreadFixId"+i],this.getAllModels(i).forEach(e=>{if(e.id===a.id)delete this.map[e.id];else this.map[e.id]=!0})}if(this.isSpecialFolderSelected())delete this.folderSelected[this.scopeId];this.emitChange();break;case"select:toggle":e.type=this.isFolderSelected()?"select:drop":"select:all",this.handleEvent(e);break;case"select:all":if(g.Z.has()||n.route.is("#search #search-letter"))this.getAllModels().forEach(e=>{this.map[e.id]=!0}),this.specialFolderSelected[this.scopeId]=!0;else this.folderSelected[this.scopeId]=!0;this.emitChange();break;case"select:drop":this.cleanScope(),this.emitChange()}}})},63298:function(e,t,n){"use strict";n.r(t);var r=n(54498),a=n(86145),i=n(22023),o=n(21211),s=n(18440),l=n.n(s),c=n(4183),d=n(15907),u=n(13624),f=n.n(u),m=n(47759),h=n(93286),p=n(46637),g=n(99105),v=n(34734),_=n(64391),b=n(37874),E=n(82609),y=n(53485),T=n(59193),A=n(10154),S=n(13839),O=n(32849),C=n(39385),w=n(90557);t.default=l().Mediator.create("pony-mode",{defaults(){this.toggleRootClass()},components:{router:{class:f()},"application-mail":{attrs:{ponymode:e=>e.isActive()}},"letter-list":{class:g.Z,attrs:{ponymode:e=>e.isActive()}},"mobile-change-language":{attrs:{ponymode:e=>e.isActive()}},"settings-dock":{attrs:{"can-toggle-ponymode":()=>!o.TOUCH_MODE,ponymode:e=>e.isActive()},events:["ponymode:toggle"]},settings:{class:T.Z,attrs:{"can-toggle-ponymode":()=>!o.TOUCH_MODE,ponymode:e=>e.isActive()},events:["ponymode:toggle"]},"settings-help-link":{class:A.Z,attrs:{"can-toggle-ponymode":()=>!o.TOUCH_MODE,ponymode:e=>e.isActive()},events:["ponymode:toggle"]},"sidebar-search":{class:O.Z,attrs:{ponymode:e=>e.isActive()}},"sidebar-folders":{class:S.Z,attrs:{ponymode:e=>e.isActive()}},thread:{class:C.Z,attrs:{ponymode:e=>e.isActive()}},"nav-folders":{class:b.Z,attrs:{ponymode:e=>e.isActive()}},"list-nested-moveto-folder":{class:_.Z,attrs:{ponymode:e=>e.isActive()}},"portal-menu":{class:y.ZP,attrs:{ponyMode:e=>e.isActive()}},"search-panel":{class:y.ZP,attrs:{ponyMode:e=>e.isActive()}},filters:{class:p.Z,attrs:{"can-toggle-ponymode":()=>!o.TOUCH_MODE,ponymode:e=>e.isActive()},events:["ponymode:toggle"]},"compose-windows":{lazy:w.Ru,attrs:{ponymode:e=>e.isActive()}},"list-letter-attach-status-active":{class:v.Z,attrs:{ponymode:e=>e.isActive()}},dataSource:{class:a.Z,events:["actionend"],handleEvent:"onDataSourceActionEnd"},"layer-cleanmaster-modal":{lazy:w.Jw,attrs:{ponymode:e=>e.isActive()}},octopus:{class:E.Z,attrs:{ponymode:e=>e.isActive()}},usePonyMode:{attrs:{ponyMode:e=>e.isActive()}}},handleEvent(e){switch(e.type){case"ponymode:toggle":return this.togglePonyMode(e.details),!1}},togglePonyMode(e){var t=e&&e.from,n=!this.get("router.model.uiLayout").ponyMode;(0,h.ZP)({type:"toggle-ponymode-".concat(n?"on":"off"),intervals:[["".concat(t),1]]}),(0,c.default)({type:r.TOGGLE_PONY_MODE})},onDataSourceActionEnd(e){if(e.details.action.type===r.TOGGLE_PONY_MODE)return this.toggleRootClass(),d.default.handleMedia(),m.default.update(),!0;else return!1},toggleRootClass(){if(this.isActive())document.body.classList.add("g-pony-mode");else document.body.classList.remove("g-pony-mode")},isActive(){return(this.get("router.model.uiLayout")||i.ce).ponyMode}})},90421:function(e,t,n){"use strict";n.r(t);var r=n(60033),a=n.n(r),i=n(18440),o=n.n(i),s=n(69832),l=n.n(s),c=n(57147),d=n(13624),u=n.n(d),f=n(78267),m=n(93610),h=n(48653),p=n(43353),g=n(82609),v=n(90557);t.default=o().Mediator.create("settings-filters-manager",{defaults(){},components:{router:{class:u()},letter:{lazy:v.FV,events:["settingsfilters:create"]},"dropdown-actions":{class:p.Z,events:["settingsfilters:create"]},"contextmenu-message":{class:m.Z,events:["settingsfilters:create"]},"contextmenu-selection":{class:h.Z,events:["settingsfilters:create"]},octopus:{class:g.Z,events:["settingsfilters:create"]}},handleEvent(e){var t,n,r,a=e.type;if(e.details)t=e.details.folder,n=e.details.model,r=e.details.models;if(!r)if(c.default.hasSelected())r=c.default.getModels();else r=[n||this.get("router.model.letter")];switch(a){case"settingsfilters:create":this.openCreateFilter({models:r,move:t})}},_getFilterTemplateValues(e){var t={subject:[],from:[],to:[],size:[10],cc:[]};return e.forEach(e=>{var n=e.get("subject");if(!t.subject.includes(n))t.subject.push(n);var r=e.get("correspondents.from.0.email");if(!t.from.includes(r))t.from.push(r);(e.get("correspondents.to")||[]).forEach(e=>{if(!t.to.includes(e.email))t.to.push(e.email)}),(e.get("correspondents.cc")||[]).forEach(e=>{if(!t.cc.includes(e.email))t.cc.push(e.email)})}),t},openCreateFilter(e){var t=e.models,n=e.move,r=this._getFilterTemplateValues(t),i=new(l())({applyFolders:[0],conditions:[{name:"from",not:!1,value:r.from.join(", ")}]});if(a().send("settings-create-filter",{dwh:{folder_id:n}}),r.from=[],void 0!==n)i.set("actions.move",n);f.default.open("edit-settings-filter",{filterModel:i.toJSON(),templateValues:r},{dimmer:!0,"close-on-dimmer":!1,"close-on-esc":!1}).then(()=>{})}})},82855:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(42629);t.Z=a().Mediator.create("swipe-manager",{components:{swipeable:{class:i.ZP,events:["underlay-changed"]}},defaults(){this.isDatasetOpaque=!0},handleEvent(e){var t=e.type,n=e.details;switch(t){case"underlaychanged":this.isDatasetOpaque=!n.value,this.updateAll()}},close(e){this.getList("swipeable").forEach(t=>{if(t!==e)t.reset()})},reset(){this.close()}})},11532:function(e,t,n){"use strict";var r=n(54498),a=n(99150),i=n(18440),o=n.n(i),s=n(4872),l=n.n(s),c=n(29018),d=n(13624),u=n.n(d),f=n(93286),m=n(45114),h=n(39385),p={};t.Z=o().Mediator.create("thread-manager",{defaults(){this._loading={},c.Z.on("thread:nextpage",()=>this.handleEvent({type:"thread:nextpage"}))},components:{router:{class:u(),events:["routeend"]},thread:{class:h.Z},button:{class:m.Z,events:["letter:prev","letter:next","letter:back"]}},handleEvent(e){var t=e.type;if(this.get("thread"))switch(t){case"letter:prev":this.goToLetter("prev");break;case"letter:next":this.goToLetter("next");break;case"letter:back":this.onBackClick();break;case"thread:nextpage":this.nextPage()}},getModel(){return this.get("router").model.letter},nextPage(){var e=this.getModel(),t=e.id,n=()=>{delete p[t]},i=e.get("messages.length");if(i<e.get("length")&&!p[t])p[t]=!0,(0,f.ZP)({type:"thread-load-more",intervals:[["idx",i+1]]}),a.default.dispatch({type:r.THREAD_LOAD_MORE,priority:u().Loader.PRIORITY_LOW}).then(n,n)},goToLetter(e){var t=this.getModel(),n=this.get("router"),r=n.route.is("#search-letter"),a=n.model&&n.model.letterNeighbours,i=a&&a[e];if(i){var o=t.get("folder");if(n&&n.model&&n.model.folder)o=n.model.folder.id;var s=i.threadId,l=i.id;return n.go(r?"#search-letter":"#read-letter",{folder:o,letter:s,id:l},"inherit")}return Promise.reject("noNeighbours")},onBackClick(){var e=this.getModel(),t=this.get("router"),n=t.route.is("#search-letter"),r=e.get("folder");if(t&&t.model&&t.model.folder)r=t.model.folder.id;if(e.isInMetathread())r=l().INBOX;var a=t[n?"#search":"#letters"].getUrl({folder:r,preserveFilters:!n},"inherit");t.nav(a,{initiator:"popstate"})}})},19818:function(e,t,n){"use strict";var r=n(90557),a=n(18440),i=n.n(a),o=n(39939),s=n(35056),l=n(53485),c=n(13839);t.Z=i().Mediator.create("user-info",{defaults(){},components:{letter:{lazy:r.FV,attrs:{"current-user":e=>e.getUser()}},"sidebar-folders":{class:c.Z,attrs:{"is-pdd-user":e=>e.getUser().isPDD()}},"portal-menu":{class:l.ZP,attrs:{"current-user":e=>e.getUser()}},"list-letter-welcome":{class:s.Z,attrs:{"current-user":e=>e.getUser()}}},getUser:()=>o.default.user})},87623:function(e,t,n){"use strict";var r=n(84118),a=r.Z.extend({className:"models.BaitLetter"});a.createBaitLetter=function(e){return r.Z.createModel(a,"bait::".concat(e),"baitLetter")},a.isBait=function(e){return r.Z.isDatasetModel(e,"baitLetter")},t.Z=a},84118:function(e,t,n){"use strict";var r=n(43572),a=n.n(r)().extend({className:"models.DatasetModel",getPaymentMeta(){}});a.createModel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datasetModel",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datasetModel",r=e.all.get(t);if(!r)(r=new e).set({id:t,datasetModel:!0,[n]:!0}),e.all.set([r]);return r},a.isDatasetModel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datasetModel";return e.is(t)},t.Z=a},36332:function(e,t,n){"use strict";var r=n(84118),a="heightCompensation",i=r.Z.extend({className:"models.HeightCompensation"});i.createHeightCompensation=function(e){var t=r.Z.createModel(i,i.constructId(),a);return t.set({height:e},{silent:!0}),t},i.isHeightCompensation=function(e){return r.Z.isDatasetModel(e,a)},i.constructId=function(){return"heightCompensation"},i.getCurrentHeightCompensation=function(){return r.Z.createModel(i,i.constructId(),a)},t.Z=i},73173:function(e,t,n){"use strict";var r=n(21211),a=n(92042),i=n.n(a),o=n(43572),s=n.n(o),l=i().extend({className:"models.Metathread",constructor:function(){i().prototype.constructor.apply(this,arguments),this.set({_metathreadExpanded:!1,_metathreadLimit:r.METATHREAD_LIMIT,_metathreadIsLimitReached:!0})},isExpanded(){return this.get("_metathreadExpanded")},setExpanded(e){if(e!==this.get("_metathreadExpanded")&&e&&this.get("metathread_data.new_cnt"))this.set("metathread_data.new_cnt",0);this.set("_metathreadExpanded",e)},getMetathreadFolder(){return this.get("metathread_data.folder")},getMetathreadFolderName(){return this.get("metathread_data.folder_name")},setLimit(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.METATHREAD_LIMIT;this.set("_metathreadLimit",e)},getLimit(){return this.get("_metathreadLimit")},isLimitReached(){return this.is("_metathreadIsLimitReached")},setLimitReached(e){this.set("_metathreadIsLimitReached",e)},getFooterModel(){if(this._footer)return this._footer;else return this._footer=new(s()),this._footer.set({metathreadFooter:!0,metathread:this,id:"footerId"+this.id}),this._footer},isToMyself(){return"tomyself"===this.get("metathread_data.category")}});l.isMetathread=function(e){if(e&&"object"==typeof e){if("function"==typeof e.get){var t=e;return t.is("flags.metathread")&&t.is("metathread_data.folder")}var n=e;return!!(n.flags&&n.flags.metathread&&n.metathread_data&&n.metathread_data.folder)}},l.isMetathreadFooter=function(e){return!(!e||!e.get("metathreadFooter"))},l.patchThreadId=function(e){if("function"!=typeof e.get)e.id="multithreadFixId".concat(e.metathread_data.folder)},t.Z=l},78364:function(e,t,n){"use strict";var r=n(84118),a=r.Z.extend({className:"models.SkeletonLetter"});a.createSkeletonLetter=function(e){var t=r.Z.createModel(a,a.constructId(e),"skeletonLetter");return t.set({index:e},{silent:!0}),t.meta("_ui-index",e),t},a.isSkeleton=function(e){return r.Z.isDatasetModel(e,"skeletonLetter")},a.constructId=function(e){return"skeleton::".concat(e)},t.Z=a},7202:function(e,t,n){"use strict";var r=n(84118),a=r.Z.extend({className:"models.SpinnerLetter"});a.createSpinnerLetter=function(){return r.Z.createModel(a,"spinner","spinnerLetter")},a.isSpinner=function(e){return r.Z.isDatasetModel(e,"spinnerLetter")},t.Z=a},93059:function(){if(!Element.prototype.matches)Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;if(!Element.prototype.closest)Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}},2681:function(){if(!Selection.prototype.containsNode||/Edg/.test(navigator.userAgent))Selection.prototype.containsNode=function(e){var t=document.getSelection();if(t.isCollapsed)return!1;var n=t.anchorNode,r=t.focusNode;if(n.nodeType===Node.TEXT_NODE&&n===e)return!0;if(n.nodeType===Node.ELEMENT_NODE&&n.contains(e))return!0;if(r.nodeType===Node.TEXT_NODE&&r===e)return!0;if(r.nodeType===Node.ELEMENT_NODE&&r.contains(e))return!0;var a=t.getRangeAt(0),i=document.createRange();i.selectNode(e);var o=-1!==a.compareBoundaryPoints(Range.END_TO_END,i),s=1!==a.compareBoundaryPoints(Range.START_TO_START,i);if(o&&s)return!0;else return!1}},77735:function(){if(!Object.getPrototypeOf(matchMedia("")).addEventListener)Object.getPrototypeOf(matchMedia("")).addEventListener=function(e,t){this.addListener(t)};if(!Object.getPrototypeOf(matchMedia("")).removeEventListener)Object.getPrototypeOf(matchMedia("")).removeEventListener=function(e,t){this.removeListener(t)}},98448:function(e,t,n){"use strict";n.r(t);var r,a=n(89629),i=n.n(a),o=n(66423),s=n.n(o),l=n(78267),c=n(93286),d=e=>(r=null,e),u={_openPopup(e){if(r)return r;else return r=l.default.open("captcha",{"captcha-error":e},{dimmer:!0,compact:!0,resolvable:!0}).then(d,d),this.emit("open-captcha-popup"),r},retryUntilCaptchaSuccess(e){return new Promise((t,n)=>{this.tryRequestWithCaptcha(e,t,n)}).then(e=>((0,c.ZP)("captcha_enter_success"),e),e=>((0,c.ZP)("captcha_enter_error"),Promise.reject(e)))},tryRequestWithCaptcha(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{error:!1,showCaptcha:!1,retries:0},a=r.error,i=r.showCaptcha,o=r.retries;(i?this._openPopup(a):Promise.resolve({})).then(r=>{if(r){e(r).then(t,r=>{var a=this._isCaptchaError(r);if(this._isCaptcha(r)||a)this.tryRequestWithCaptcha(e,t,n,{error:a,showCaptcha:!0,retries:o+1}),(0,c.ZP)({type:"try_enter_captcha",intervals:[["retries",o]]});else n(r)})}else n({body:"captcha-closed"})},e=>{n(e)})},_isCaptcha(e){var t=e.status,n=e.body;return t===+s().statuses.many_requests&&"possible_bad_guy"===n},_isCaptchaError(e){var t=e.status,n=e.body;return t===+s().statuses.invalid&&!!n.capcha}};i().apply(u),t.default=u},76024:function(e,t,n){"use strict";n.r(t);var r,a=n(47759),i=n(11594),o=document.querySelector("#dimmer");t.default={add(){r=(new i.Z).renderTo(o),a.default.update()},remove(){if(r){try{r.destroy()}catch(e){o.innerHTML=""}a.default.update()}}}},78267:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(21211);function a(e){var t=this.loaded;return!t[e]&&(t[e]=new Promise((function(t){n(20919)("./layer-".concat(e,"/layer-").concat(e)).then((function(e){var r=e.default;if(r.prototype.needToolkit)Promise.all([n.e(4131),n.e(3626),n.e(3541)]).then((function(){var e=[n(46015),n(44507)];(function(e,n){(0,n.loadToolkit)((function(){t(r)}))}).apply(null,e)})).catch(n.oe);else t(r)}))}))),t[e]}var i=n(47759);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}class c{constructor(e,t,n,r){this.view=e,this.data=t,this.Block=n,this.container=r}}class d{constructor(e){this.UILayerWindow=e,this.loaded={},this.load=a.bind(this)}create(e,t,n){var r=document.createElement("DIV"),a=new this.UILayerWindow;return a.renderTo(r),a.set(n),new c(a,t,e,r)}}var u=new class{setup(e){this._stack=[],this.rootEl=document.createElement("DIV"),this.layerFactory=new d(e),document.body.appendChild(this.rootEl)}open(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.layerFactory.load(e).then(e=>{var r=this.layerFactory.create(e,t,n);return r.view.on("window:close",()=>{this._pop(),i.default.update()}),this._push(r),i.default.update(),r.view.setLayer(e,t)})}openIframeLayer(e){var t=e.paramsKey,n=e.additionalParams,a=void 0===n?{}:n,i=e.factoryParams,o=void 0===i?{}:i,l=e.onPostMessage,c=t&&r.LAYER_IFRAME_PARAMS[t]||{};return this.open("iframe",s(s(s({},c),a),{},{router:app}),s({dimmer:!0},o)).then(e=>{if("function"==typeof l)e.on("layer-iframe:post-message",l);return e})}getInstance(){var e=this._getCurrentLayer();if(!e)return null;else return e.view}_push(e){this._hideLayer(this._getCurrentLayer()),this._stack.push(e),this._showLayer(e)}_pop(){this._hideLayer(this._getCurrentLayer()),this._stack.pop(),this._showLayer(this._getCurrentLayer())}_getCurrentLayer(){if(this._stack)return this._stack[this._stack.length-1]}_hideLayer(e){if(e)this.rootEl.removeChild(e.container),e.view.set("active",!1)}_showLayer(e){if(e)this.rootEl.appendChild(e.container),e.view.set("active",!0)}}},56928:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(89629),a=n.n(r),i=n(19275),o=n(21211),s=n(7414),l=n.n(s);var c=new class{constructor(e,t){this.soundFileName=e,this.audioElement=this._getAudioElement(t)}_createSoundElement(){var e=document.createElement("div");return e.style.display="none",document.body.appendChild(e),e}_initSoundElement(e,t){e.innerHTML='<audio preload="auto"><source src="'+t+'.mp3" type="audio/mpeg"><source src="'+t+'.ogg" type="audio/ogg"></audio>'}_getAudioElement(e){var t=this._createSoundElement();if(this._initSoundElement(t,this.soundFileName),t&&t.childNodes[0]&&e&&e.id)t.childNodes[0].id=e.id;return t&&t.childNodes[0]}play(){if(this.audioElement)try{var e=this.audioElement.play();if(void 0!==e)e.then(()=>{l().send("audio_notification_started",{skipdwh:o.SKIP_DWH})}).catch(()=>{l().send("audio_notification_failed",{skipdwh:o.SKIP_DWH})})}catch(e){l().send("audio_notification_exception",{skipdwh:o.SKIP_DWH})}}}(i.Z.get("urls.packagesUrl")+"/static.promo/sounds/notifier/bell",{id:"notify-sound-player"});var d=new class{play(){c.play()}},u=n(93286);function f(e){a().apply(this),this._settings=e,this._sessionUnreadCounter=0,this._sessionStartTrackedUnreadCounter=0,this._prevTotalUnreadCounter=0,this._prevTotalMsgCounter=0,this._prevTrackedUnreadCounter=0,this._prevTrackedMsgCounter=0,this._isPageVisible=!0,this._sessionFirstHandle=!0,this._forceAudio=!1,this._initAudioActions(),document.addEventListener("visibilitychange",e=>this._onVisibilityChange(e))}Object.assign(f.prototype,{_initAudioActions(){var e,t,n;this._playAudioIfTimePassed=(e=()=>{d.play(),(0,u.ZP)({chain:["tabnotification_mail_sound_play"],intervals:[["add","1"]]})},t=this._settings.soundPlayingTimeout,n=0,function(r){if(+new Date-n>t||r)n=+new Date,e()})},_playAudio(){if(this._settings.getState().sound)this._playAudioIfTimePassed(this._forceAudio),this._forceAudio=!1},_enableTitleBlinking(){this._playAudio(),this.emit("update",{count:this._sessionUnreadCounter,timeout:this._settings.titleBlinkingTimeout})},_disableTitleBlinking(){this.emit("update")},_updTitleWithNotifications(){var e=this._settings.getState();if(this._sessionUnreadCounter&&!this._isPageVisible&&e.enabled)this._enableTitleBlinking();else this._disableTitleBlinking()},_resetSessionUnreadCounter(){this._sessionStartTrackedUnreadCounter+=this._sessionUnreadCounter,this._sessionUnreadCounter=0,this._forceAudio=!0},_onVisibilityChange(e){if(this._isPageVisible=!e.target.hidden,this._isPageVisible)this._resetSessionUnreadCounter(),this._disableTitleBlinking()},_isHandledFolder:e=>!(e.isTrashLike()||e.isSpam()||e.isArchive()||e.isSent()||e.isDrafts()||e.isTemplates()||e.isDeleted()||e.isOutbox()),_getFolderRoot(e,t){var n=+e.get("parent");if(-1===n)return e;else{for(var r,a=0;a<t.length;a++)if(+t[a].id===n)r=t[a];return this._getFolderRoot(r,t)}},_getMessagesCounter(e,t,n){var r=this._settings.getState(),a=0;if(n)e.forEach(e=>{a+=e.get(t)});else if(r.onlyInbox){var i=e.find(e=>e.isInbox());if(i)return i.get(t);else return 0}else for(var o=0;o<e.length;o++){var s=e[o];if(this._isHandledFolder(s,e))a+=s.get(t)}return a},onNewMessagesInInactiveTab(e){this._sessionUnreadCounter=e,this._updTitleWithNotifications(this._sessionUnreadCounter)},onChangeInMessages(e){this._sessionUnreadCounter=e,this._resetSessionUnreadCounter(),this._disableTitleBlinking()},handleUpdate(e){if(this._sessionFirstHandle)return this._sessionFirstHandle=!1,this._prevTotalUnreadCounter=this._getMessagesCounter(e.folders,"messages_unread",!0),this._prevTotalMsgCounter=this._getMessagesCounter(e.folders,"messages_total",!0),this._prevTrackedUnreadCounter=this._getMessagesCounter(e.folders,"messages_unread"),this._prevTrackedMsgCounter=this._getMessagesCounter(e.folders,"messages_total"),void(this._sessionStartTrackedUnreadCounter=this._prevTrackedUnreadCounter);var t=this._getMessagesCounter(e.folders,"messages_unread",!0),n=this._getMessagesCounter(e.folders,"messages_total",!0),r=this._getMessagesCounter(e.folders,"messages_unread"),a=this._getMessagesCounter(e.folders,"messages_total"),i=t>this._prevTotalUnreadCounter,o=n>this._prevTotalMsgCounter,s=r>this._prevTrackedUnreadCounter,l=a>this._prevTrackedMsgCounter,c=t===this._prevTotalUnreadCounter,d=n===this._prevTotalMsgCounter,u=r===this._prevTrackedUnreadCounter,f=a===this._prevTrackedMsgCounter,m=function(e,t){var n=e-t;if(n>=0)return n;else return 0}(r,this._sessionStartTrackedUnreadCounter);!function(e,t,n){var r=e.totalUnreadGt,a=e.totalMsgGt,i=e.trackedUnreadGt,o=e.trackedMsgGt,s=e.isPageVisible,l=e.totalUnreadEq,c=e.totalMsgEq,d=e.trackedUnreadEq,u=e.trackedMsgEq;if(r&&a&&!s){if(i&&o)t()}else if(!(l&&c&&d&&u))n()}({totalUnreadGt:i,totalMsgGt:o,trackedUnreadGt:s,trackedMsgGt:l,totalUnreadEq:c,totalMsgEq:d,trackedUnreadEq:u,trackedMsgEq:f,isPageVisible:this._isPageVisible},()=>this.onNewMessagesInInactiveTab(m),()=>this.onChangeInMessages(m)),this._prevTrackedMsgCounter=a,this._prevTrackedUnreadCounter=r,this._prevTotalMsgCounter=n,this._prevTotalUnreadCounter=t}});var m=f},38084:function(e,t,n){"use strict";var r=n(21211),a=n(89629),i=n.n(a),o=n(75322);class s extends(i()){constructor(){super(),o.Z.addEventListener("statechange",this.stateChange.bind(this))}init(e){this.router=e}stateChange(e){var t=e.oldState,n=e.newState;if(this.router){var a="passive"===t&&"active"===n,i=this.router.model.status&&this.router.model.status.lastUpdateTime,o=i&&Date.now()-i>1e3*r.INACTIVE_TAB_RELOAD_DURATION;if(a&&o)this.emit("pagelifecycle:reload")}}}var l=new s;t.Z=l},68275:function(e,t,n){"use strict";n.d(t,{a_:function(){return o},r_:function(){return s},EY:function(){return l},zM:function(){return c}});var r=n(29434),a=n.n(r),i={archive:"ATTACH_ARCHIVE","android-package":"ATTACH_ANDROID",audio:"ATTACH_AUDIO",calendar:"ATTACH_CALENDAR",chart:"ATTACH_CHART",document:"ATTACH_DOC",ebook:"ATTACH_EBOOK",email:"ATTACH_MAIL",exec:"ATTACH_EXE",html:"ATTACH_HTML",json:"ATTACH_JSON",markdown:"ATTACH_MARKDOWN",pdf:"ATTACH_PDF",picture:"ATTACH_PICTURE",playlist:"ATTACH_PLAYLIST",presentation:"ATTACH_PRESENTATION",source:"ATTACH_SOURCE",spreadsheet:"ATTACH_SPREADSHEET",text:"ATTACH_TEXT",vcard:"ATTACH_VCARD",video:"ATTACH_VIDEO","web-feed":"ATTACH_WEBFEED"};function o(e){return a().getExtByName(e)}function s(e){var t=a().extToPrimitiveKind[e];if(!t)t=a().extToPrimitiveKind[a().extensionAliases[e]];return i[t]||"ATTACH_UNKNOWN"}function l(e){return s(o(e.value))}function c(e){return e.slice(e.indexOf(";")+1)}},77917:function(e,t,n){"use strict";n.r(t),n.d(t,{withWelter:function(){return C},selector:function(){return D}});var r=n(9274),a=n(91140),i=n(21211),o=n(18440),s=n.n(o),l=n(96596),c=n.n(l),d=n(25191),u=n(75273),f=n(88451),m=n(2335),h=n(29678),p=n(93286),g=n(41027);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var E,y=!1,T=!1,A=!1,S=!1,O=new r.Z(i.HONEYPOT),C=a.Z.createWelterDecorator(e=>_(_({},e),{},{attrs:{className:50,"data-id":30,"data-draggable-id":30},deps:{feast:s()},minSize:1})),w=h.locator.transform.bind(h.locator),L=!0,k=[],I=i.HONEYPOT_INTERVALS.reverse(),R={init(e,t){this.router=e,this.checkHoneypot=this.checkHoneypot.bind(this),this.handleSlotFail=this.handleSlotFail.bind(this),this.handleRouteEndEvent=this.handleRouteEndEvent.bind(this),k.push.apply(k,this.getMainStyles());var n=()=>{if(i.ENABLE_SMOKESCREEN&&(!i.NO_MIMIC_ON_WLIST||!(0,u.ao)())&&(!i.NO_MIMIC_ON_ADBLOCK||!(0,u.Hr)()))this.sendHoneypotDetectRadar(!0)},r=()=>{m.default.on("slot:fail",()=>this.handleSlotFail()),g.Z.themes.on("themes:apply",()=>this.update()),g.Z.themes.one("themes:apply",()=>{k.push.apply(k,this.getThemeStyles())})};if(t)setTimeout(n,50),setTimeout(r,1);else n(),r()},handleSlotFail(){if(i.ENABLE_SMOKESCREEN)this.toggle(!0,!0)},sendHoneypotDetectRadar(e){if(S=!0,this.checkHoneypot()){if(!L&&O)O.destroy(),O=null;if((0,p.ZP)(["honeypot_detect"]),e)(0,p.ZP)(["honeypot_detect_sync"]);else(0,p.ZP)(["honeypot_detect_async"])}},scheduleHoneypotChecking(){if((!L||!I.length||E)&&O)O.destroy(),O=null;var e;if(1===I.length)e=I[0];else e=I.pop();if(e)E=setTimeout(()=>{this.sendHoneypotDetectRadar()},e)},getStyles:e=>Array.from(document.querySelectorAll(e)).map(e=>e.href),getThemeStyles(){return this.getStyles("#css-bundle-theme > link")},getMainStyles(){return this.getStyles("#css-bundle > link")},setupLocatorStyles(){if(k.length)h.locator.setup({links:k},e=>{console.error(e),window.require(["trackJS"],t=>{t.sendRadar("mimic",{enabled:y,error:e,params:{type:"locator"}},"octavius_mimic")})}),k.length=0},checkHoneypot(){var e=O.check(i.IS_DEBUG);if(E=void 0,i.IS_DEBUG&&console.warn("[Honeypot] check",e),e||i.MIMIC_FORCE){if(i.IS_DEBUG&&i.MIMIC_FORCE)console.warn("mimic-force");L=!1,this.toggle(!0)}else this.scheduleHoneypotChecking();return e},update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;if(y&&e)f.Z.enable();var n=y&&(!t||!m.default.hasRequest());if(n)h.locator.setup({enable:y},e=>{console.error(e),window.require(["trackJS"],t=>{t.sendRadar("mimic",{enabled:y,error:e,params:{type:"switch"}},"octavius_mimic")})}),this.setupLocatorStyles();if(e){if(i.ENABLE_WELTER)a.Z.toggleWelterGlobal(n);s().set("classNameBuilder",n?w:void 0),m.default.toggleMimic(y);var r=(0,d.p)();if(n&&r&&r.view)this.router.reload(),c().add("APP.REINIT"),(0,p.ZP)("app_reinit")}},toggle(e,t){if(!i.NO_MIMIC_ON_WLIST||!(0,u.ao)()||(0,u.ao)()&&t&&i.MIMIC_IGNORE_HAS_WLIST){if(!S&&(0,u.ao)())this.sendHoneypotDetectRadar();var n=y!==e;if(y=e,T&&A)this.router.off("routeend",this.handleRouteEndEvent),T=!1,A=!1;this.update(n,t)}},lookup:e=>y?h.locator.transform(e):e,isEnabled:()=>y,getLocator:()=>h.locator,isValidURL(e){var t=window.location.host.replace(/\//g,"\\/"),n=new RegExp("^https:\\/\\/".concat(t,"\\/inbox\\/1:(.*):0\\/\\?$")).exec(e);if(n&&h.locator.isWelter(n[1]))return!1;else return!0},handleRouteEndEvent(){A=!0,this.toggle(!0)},subscribeToggleOn(e){if(!T)T=!0,this.router.one(e,this.handleRouteEndEvent)}};i.IS_DEBUG&&(window.boom=()=>R.toggle(!y)),t.default=R;var D=h.locator.selector.bind(h.locator)},38003:function(e,t){"use strict";var n;t.Z={setup(e){var t=new e({router:app});t.renderTo(document.body),n=t},teardown(){n.destroy(),n=null},open(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this.getInstance();return a.set(r),a.setSubmenu(e,t,n)},close(){var e=this.getInstance();if(e)e.hide()},destroy(){var e=this.getInstance();if(e)e.destroyBlock()},getInstance:()=>n}},5190:function(e,t,n){"use strict";var r=n(4673),a=n(31276);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var l=a.types.model("SearchInterval",{from:a.types.number,to:a.types.maybe(a.types.number)}).preProcessSnapshot(e=>{if(!e)return e;var t=o(o({},e),{},{to:e.to||(0,r.L7)(new Date)});return r.ZP.fromRPCInterval(t).normalize().toRPCInterval()});t.Z=l},32704:function(e,t,n){"use strict";n.d(t,{mc:function(){return s},RK:function(){return d}});var r=n(4872),a=n.n(r),i=n(31276),o=n(5190),s={TODAY:"today",YESTERDAY:"yesterday",WEEK:"week",MONTH:"month",MONTHS:"months",YEARS:"years"},l=i.types.model("SearchDate",{found:i.types.number,interval:o.Z}),c=i.types.model("SearchDates",{today:i.types.maybe(l),yesterday:i.types.maybe(l),week:i.types.maybe(l),month:i.types.maybe(l),months:i.types.optional(i.types.array(l),[]),years:i.types.optional(i.types.array(l),[])}).views(e=>({get all(){var t=[];return Object.values(s).forEach(n=>{var r=e[n];if(r)if(n!==s.MONTHS&&n!==s.YEARS){if(r.found)t.push({type:n,found:r.found,from:r.interval.from,to:r.interval.to})}else r.forEach(e=>{if(e.found)t.push({type:n,found:e.found,from:e.interval.from,to:e.interval.to})})}),t}})),d=i.types.model("SearchFolder",{found:i.types.optional(i.types.number,0),id:i.types.string,name:i.types.optional(i.types.string,"")}).views(e=>({get folderName(){return e.name||e.folderModel.get("name")},get isShareTake(){return e.folderModel.isShareTake()},get idNumber(){return+this.id},get folderModel(){return a().get(this.id)}})).actions(e=>({updateFromModel(){var t=e.folderModel;e.name=t.get("name")}})),u=i.types.model("SearchResponse",{count:i.types.optional(i.types.number,0),folders:i.types.optional(i.types.array(d),[]),dates:i.types.optional(c,{})});t.ZP=u},86450:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(37095),o=n.n(i),s=n(12199);t.Z=a().Block.extend({name:"avatar",template:o(),immutable:!0,blocks:{ico:s.Z},defaults:{"with-border":!0},getImage(){return'background-image: url("'.concat(this.get("src"),'");')},getBgColor(){return"background-color: ".concat(this.get("bg-color")||"transparent",";")},getIcoColor(){var e="";if(this.get("ico-color"))e="fill: ".concat(this.get("ico-color"),";");return e},didMount(){this.el.classList.add("stop-animate")}})},98039:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(79598),o=n.n(i),s=n(12199);t.Z=a().Block.extend({name:"badge",template:o(),blocks:{ico:s.Z},defaults:{transparent:!1}})},96130:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(23132),o=n.n(i),s=n(61799),l=n(12199);t.Z=a().Block.extend((0,s.Z)({events:[{name:"click-radar",rename:"click"}]})({name:"button-link",template:o(),blocks:{ico:l.Z},defaults:{disabled:!1,type:"default",icon:"",ponymode:!1,pressed:!1,text:""}}))},45114:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(56048),o=n.n(i),s=n(54844),l=n(61799),c=n(12199),d=n(37968);t.Z=a().Block.extend((0,l.Z)({events:[{name:"click-radar",rename:"click"}]})({name:"button2",template:o(),defaults:{safari:s.Z.safari,"hover-support":s.Z.capabilities["hover-support"],icoSize:"s",centered:!1,highlighted:!1},blocks:{ico:c.Z,"notification-badge":d.Z},events:{"keydown:enter":"onKeydownEnter"},onKeydownEnter(){$(this.el).click()},focus(){this.refs.wrapper.focus()},getAvailableTitle(){if(this.is("shortcut")||this.is("short")||!this.is("text"))return this.get("title")||this.get("text");else return this.get("annotation")}}))},90926:function(e,t,n){"use strict";var r=n(21528),a=n(89629),i=n.n(a),o=n(18440),s=n.n(o),l=n(72785),c=n.n(l),d=n(17304),u=n(50955),f=n.n(u),m=n(74456),h=n(93286),p=n(77917);t.Z=s().Block.extend({name:"category-feedback",template:c(),defaults:{html:""},constructor:function(){s().Block.apply(this,arguments),this.onModelChange=this.onModelChange.bind(this)},didUnmount(){this.unrenderUI()},attrChanged:{model(e,t){if(this.ui&&this.getMessage(e)===this.getMessage(t))this.update();else this.renderUI()},metathreads(){if(this.ui)this.update()},"dark-mode"(){if(this.ui)this.update()}},renderUI(){this.unrenderUI();var e=this.getMessage(this.get("model"));if(e)(0,m.Z)("category.feedback").then(t=>{if(this.isMounted())this.ui=new t.CategoryFeedback(this.refs.container,{model:e,menuContainer:this.refs.portal,tooltipContainer:this.getTooltipContainer()}),this.update(),e.on("change",this.onModelChange)});else(0,h.ZP)(["category-feedback","no-message"])},onModelChange(e){if(this.ui&&(e.changes.includes("transaction_category")||e.changes.includes("folder")))this.update()},update(){this.ui.injectDependencies(this.getParams()),this.ui.render()},unrenderUI(){this.ui&&this.ui.destroy(),this.ui=null;var e=this.getMessage(this.get("model"));if(e)e.off("change",this.onModelChange)},getParams(){return{CategoryChange:f(),SaveSeveral:d.SaveSeveral,isOctavius:!0,isDarkMode:this.is("dark-mode"),features:r.default,bridge:this.getBridge(),metathreads:this.is("metathreads"),scrollable:this.getScrollable()}},getMessage:e=>e&&e.get("messages").find(t=>t.getFolder()===e.getFolder()),getTooltipContainer(){if(!this._tooltipContainer)this._tooltipContainer=document.createElement("div"),document.body.appendChild(this._tooltipContainer);return this._tooltipContainer},getBridge(){if(!this._bridge)this._bridge=new(i()),this._bridge.on("radar",e=>{var t=e.chain;(0,h.ZP)(t)});return this._bridge},getScrollable(){for(var e=this.refs.container,t=(0,p.selector)(".scrollable");e&&e!==document;){if(e.matches(t))return e;e=e.parentNode}}})},94005:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(15829),o=n.n(i),s=n(12199);t.Z=a().Block.extend({name:"checkbox",template:o(),blocks:{ico:s.Z},defaults:{checked:!1,disabled:!1,label:""},events:{toggle:"onToggle"},onToggle(){if(!this.is("disabled"))this.invert("checked"),this.broadcast("toggle-checkbox")}})},53263:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(31973),o=n.n(i);t.Z=a().Block.extend({name:"delimeter",template:o(),blocks:{}})},11594:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(47713),s=n.n(o);t.Z=i().Block.extend({name:"dimmer",template:s(),blocks:{},defaults:{color:""},useNewToolbar:()=>r.NEW_TOOLBAR})},16111:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(18440),a=n.n(r),i=n(28060),o=n.n(i),s="download-frame";t.Z=a().Block.extend({name:"download-frame",template:o(),blocks:{},defaults:{name:s}})},79622:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(48703),o=n.n(i);t.Z=a().Block.extend({name:"highlighter",template:o(),blocks:{},splitter(e,t){var n,r,a,i=[],o=!0;if(!e)return i;if(!t)return i.push(e),i;if(o){n=0;for(var s=0;s<t.length;s++){if((a=t[s])[0]<n||a[1]>e.length||a[0]>a[1])o=!1;n=a[1]}}if(o){n=0;for(var l=0;l<t.length;l++)a=t[l],r=e.substring(n,a[0]),i.push(r),r=e.substring(a[0],a[1]),i.push(r),n=a[1];if(n<e.length)r=e.substring(n,e.length),i.push(r)}else i.push(e);return i}})},96682:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(21211),a=n(18440),i=n.n(a),o=n(69374),s=n.n(o),l=n(78267),c=n(60033),d=n.n(c),u=n(89629),f=n.n(u),m=n(77917),h=n(43846),p=n.n(h),g=n(61799),v=n(12199),_=i().Block.extend((0,g.Z)({events:[]})({name:"html-expander-wrapper",template:p(),performanceTrace:"track",immutable:!0,isolate:!0,isolateEvents:!0,defaults:{expanded:!1,"is-button-visible":!1,type:""},blocks:{ico:v.Z},didMount(){}}));class b{constructor(e){var t=e.radarName,n=void 0===t?"expander":t,r=e.isDefaultZoomOut,a=void 0===r?!0:r,i=e.isTogglerVisible,o=void 0===i?!1:i;f().apply(this),this.elements=new Map,this.radarName=n,this.parentWidth=0,this.container=null,this.isDefaultZoomOut=a,this.isTogglerVisible=o,this.radar("create")}get SELECTOR(){return""}get ITEM_TYPE(){return""}radar(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d().send([this.radarName,...t],{skipdwh:!0})}prepare(e,t){this.container=e,this.parentWidth=t||e.getBoundingClientRect().width;for(var n=e.querySelectorAll((0,m.selector)(this.SELECTOR)),r=0;r<n.length;r++){var a=n[r],i=this.prepareItem(a),o=i.item;if(!i.isFiltered)this.elements.set(a,o)}this.prepareEnd()}prepareEnd(){console.log("".concat(this.radarName,"#prepareEnd"))}prepareItem(e){console.log("".concat(this.radarName,"#prepareItem"))}reset(){this.elements.forEach(e=>{this.resetItem(e)}),this.elements.clear()}resetItem(e){console.log("".concat(this.radarName,"#resetItem"))}toggleZoom(e){if(this.radar("toggle-size"),e.isSmall)this.zoomIn(e);else this.zoomOut(e)}zoomIn(e){this.radar("set-original"),e.isSmall=!1,e.toggler.set("expanded",!0),this.zoomInItem(e),this.emit("zoomin",e)}zoomInItem(e){console.warn("Expander#zoomInItem",e)}zoomOut(e){this.radar("set-small"),e.isSmall=!0,e.toggler.set("expanded",!1),this.zoomOutItem(e),this.emit("zoomout",e)}zoomOutItem(e){console.warn("Expander#zoomOutItem",e)}wrap(e){this.radar("wrap");var t=e.element,n=e.type,a=document.createElement("div"),i=new _({"is-button-visible":this.isTogglerVisible&&!r.DISABLE_IMAGE_EXPANDER,expanded:!0,type:n});return i.on("wrapper:click",t=>{this.emit("item:click",e),t.originalEvent.preventDefault()}),i.on("zoom:click",t=>{this.emit("button:click",e),t.originalEvent.stopPropagation(),t.originalEvent.preventDefault()}),i.renderTo(a),t.parentNode.insertBefore(a,t),i.el.appendChild(t),e.toggler=i,e.wrapper=a,e.clone=t.cloneNode(!0),e}unwrap(e){this.radar("unwrap");var t=e.toggler,n=e.wrapper,r=e.element;t.destroy();var a=n,i=n.parentNode;i.insertBefore(r,a),i.removeChild(a),e.wrapper=null,e.toggler=null}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}class T extends b{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({radarName:"images-expander"},e))}get SELECTOR(){return"img"}get ITEM_TYPE(){return"image"}zoomInItem(e){var t=e.element,n=e.cssWidth,r=e.cssHeight,a=e.cssMaxWidth;t.style.width=n,t.style.height=r,t.style.maxWidth=a}zoomOutItem(e){var t=e.element;t.style.width="",t.style.height="",t.style.maxWidth="100%"}prepareItem(e){var t=this.elements.get(e);if(t)return{item:t,isFiltered:!0};var n=e.closest("table ".concat(this.SELECTOR));if(n&&this.container.contains(n))return{item:null,isFiltered:!0};var a=e.closest("a"),i=a?"image-link":this.ITEM_TYPE,o={cssWidth:e.style.width,cssHeight:e.style.height,cssMaxWidth:e.style.maxWidth,element:e,wrapper:null,isSmall:!1,isCollapsable:!1,isLink:a,type:i},s=this.onItemLoad.bind(this,o);if(o.onImageLoad=s,!e.complete)d().send("add-event-load",{skipdwh:r.SKIP_DWH}),e.addEventListener("load",s);else o.onImageLoad();return{item:o,isFiltered:!1}}resetItem(e){var t=e.element,n=e.onImageLoad,a=e.isCollapsable;if(d().send("remove-event-load",{skipdwh:r.SKIP_DWH}),t.removeEventListener("load",n),a)this.zoomIn(e),this.unwrap(e)}onItemLoad(e){var t=e.element.getBoundingClientRect().width;if(0!==t){if(this.radar("has-width"),t>this.parentWidth)if(e.isCollapsable=!0,this.radar("big-image"),this.wrap(e),this.isDefaultZoomOut)this.zoomOut(e)}else this.radar("width-0")}}var A=n(96596),S=n.n(A);function O(e,t){var n=e.offsetHeight;return Math.ceil(n*t)+function(e){var t=window.getComputedStyle(e,null);return(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}(e)}function C(e,t){var n=e.getBoundingClientRect().width;if(!(t>0&&n>0))return 1;else return(t-=function(e){var t=window.getComputedStyle(e,null);return(parseInt(t.marginLeft,10)||0)+(parseInt(t.marginRight,10)||0)}(e))/n}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}class k extends b{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({radarName:"tables-expander"},e)),this.images=[]}get SELECTOR(){return"table"}get ITEM_TYPE(){return"table"}zoomInItem(e){var t=e.element,n=e.wrapper;t.style.transform="",t.style.transformOrigin="",n.style.height=""}zoomOutItem(e){var t=e.element,n=e.scale,r=e.wrapper;t.style.transform="scale(".concat(n,", ").concat(n,")"),t.style.transformOrigin="top left",r.style.height=function(e,t){return Math.max(O(e,t),40)+"px"}(t,n)}prepareItem(e){var t=e.closest("".concat(this.SELECTOR," ").concat(this.SELECTOR));if(t&&this.container.contains(t))return{isFiltered:!0,item:null};else return this.images=[...this.images,...e.querySelectorAll((0,m.selector)("img"))],{item:{element:e,type:this.ITEM_TYPE},isFiltered:!1}}prepareEnd(){if(this.images.length>0)this.radar("find-images"),this.processImages();else this.radar("find-no-images"),this.processTables()}processTables(){this.elements.forEach(e=>{this.scaleItem(e)})}scaleItem(e){this.radar("scale");var t=e.element,n=C(t,this.parentWidth);if(e.scale=n,n<1)if(this.wrap(e),this.isDefaultZoomOut)this.zoomOut(e);if(n>=1&&t.scrollWidth>this.parentWidth);}processImages(e){var t=this.images;try{if(!e)e=(new Date).getTime();for(var n=t.length,r=0;r<t.length;r++){var a=t[r];if(!a||!a.src||a.complete)n--}if(0==n||(new Date).getTime()-e>=2e3)this.processTables();else window.requestAnimationFrame(()=>{this.processImages(e)})}catch(e){this.radar("process-images","error"),S().add("Error processing images in table-expander: "+e)}}}var I=i().Block.extend({name:"html-expander",template:s(),performanceTrace:"track",immutable:!1,isolate:!0,isolateEvents:!1,defaults:{images:r.IMAGES_EXPANDER,"images-default-zoomout":!0,"images-popup":r.IMAGES_EXPANDER_POPUP,tables:r.TABLES_EXPANDER,"tables-default-zoomout":!0,"tables-popup":r.TABLES_EXPANDER_POPUP},init(){var e=this.el.getBoundingClientRect().width;if(this.handleImageClick=this.handleImageClick.bind(this),this.handleImageButtonClick=this.handleImageButtonClick.bind(this),this.handleTableClick=this.handleTableClick.bind(this),this.handleTableButtonClick=this.handleTableButtonClick.bind(this),this.handleItemZoom=this.handleItemZoom.bind(this),this.is("tables"))this.tablesExpander=new k({isTogglerVisible:this.is("tables-popup"),isDefaultZoomOut:this.is("tables-default-zoomout")}),this.tablesExpander.on("item:click",this.handleTableClick),this.tablesExpander.on("button:click",this.handleTableButtonClick),this.tablesExpander.on("zoomin",this.handleItemZoom),this.tablesExpander.on("zoomout",this.handleItemZoom),this.tablesExpander.prepare(this.el,e);if(this.is("images"))this.imagesExpander=new T({isTogglerVisible:this.is("images-popup"),isDefaultZoomOut:this.is("images-default-zoomout")}),this.imagesExpander.on("item:click",this.handleImageClick),this.imagesExpander.on("button:click",this.handleImageButtonClick),this.imagesExpander.on("zoomin",this.handleItemZoom),this.imagesExpander.on("zoomout",this.handleItemZoom),this.imagesExpander.prepare(this.el,e)},deinit(){if(this.imagesExpander)this.imagesExpander.off("item:click",this.handleImageClick),this.imagesExpander.off("button:click",this.handleImageButtonClick),this.imagesExpander.off("zoomin",this.handleItemZoom),this.imagesExpander.off("zoomout",this.handleItemZoom),this.imagesExpander.reset();if(this.tablesExpander)this.tablesExpander.off("item:click",this.handleTableClick),this.tablesExpander.off("button:click",this.handleTableButtonClick),this.tablesExpander.off("zoomin",this.handleItemZoom),this.tablesExpander.off("zoomout",this.handleItemZoom),this.tablesExpander.reset()},handleItemZoom(){this.broadcast("zoom")},handleTableClick(e){if(e.isSmall)this.tablesExpander.zoomIn(e)},handleTableButtonClick(e){this.openInLayer(e)},handleImageClick(e){if(!e.isLink)this.imagesExpander.toggleZoom(e)},handleImageButtonClick(e){this.openInLayer(e)},openInLayer(e){l.default.open("html-viewer",{content:e.clone.outerHTML,"dark-mode":this.get("dark-mode")},{dimmer:!0,"dimmer-color":"dark",fullscreen:!0})}})},56882:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(18440),a=n.n(r),i=n(19855),o=n.n(i),s=n(61799),l=n(96682),c=n(60033),d=n.n(c),u=n(21211),f=n(22219),m=n.n(f),h=n(57579),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},g=a().Block.extend((0,s.Z)({events:[]})({name:"html-fishing",template:m(),performanceTrace:"track",immutable:!1,isolate:!0,isolateEvents:!1,init:function(){this.onLinkClick=this.onLinkClick.bind(this),this.onLinkMouseDown=this.onLinkMouseDown.bind(this),this.el.addEventListener("click",this.onLinkClick),this.el.addEventListener("mousedown",this.onLinkMouseDown),this.removeLinksFromBody()},deinit:function(){if("function"!=typeof this.onLinkClick&&"object"!=typeof this.onLinkClick){if(u.LOG_FISHING_DEINIT_ERROR)d().send("fishing_deinit_error",{rlog:"fishing_errors",rlog_message:{onLinkClick:typeof this.onLinkClick,onLinkMouseDown:typeof this.onLinkMouseDown,keys:Object.keys(this)}});return this.el.removeEventListener("click"),void this.el.removeEventListener("mousedown")}this.el.removeEventListener("click",this.onLinkClick),this.el.removeEventListener("mousedown",this.onLinkMouseDown)},getLink:function(e){for(;e&&e!==this.el;){if("a"===e.tagName.toLowerCase())return e;e=e.parentElement}},onLinkMouseDown:function(e){if(!(e.which>2)){var t=this.getLink(e.target);if(t)h.Z.revertUrl(t)}},onLinkClick:function(e){var t=this.getLink(e.target);if(t){var n=h.Z.verify(t,{sync:!0}),r=this.get("message").get("flags.maybe_phishing");if(n===h.Z.ERROR_HASH_URL||n===h.Z.ERROR_EMPTY_URL)return!0;e.preventDefault(),h.Z.go(t,null,p({},r&&{maybe_phishing:u.PHISHING_ALERT?"1":"0"}))}},removeLinksFromBody:function(){var e=this.el.querySelectorAll("a");h.Z.removeRedirectFromLinks(e)}})),v=a().Block.extend((0,s.Z)({events:[]})({name:"html-parser",template:o(),performanceTrace:"track",immutable:!1,isolate:!0,isolateEvents:!1,defaults:{content:"",message:null,darkosha:void 0},blocks:{"html-fishing":g,"html-expander":l.Z},applyDarkosha(){var e=this.get("darkosha");if(e)e.isolateSubtree(this.el)},didMount(){this.applyDarkosha()},rerender(){this.ids.expander.deinit(),this.ids.fishing.deinit(),this.ids.expander.init(),this.ids.fishing.init(),this.applyDarkosha()},didUnmount(){this.ids.expander.deinit(),this.ids.fishing.deinit()}}))},77509:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(18440),a=n.n(r),i=n(81782),o=n.n(i),s={order:{ico:"orders",text:i18n("Заказы")},travel:{ico:"travel",text:i18n("Путешествия")},finance:{ico:"currency-ruble",text:i18n("Финансы")},registration:{ico:"auth",text:i18n("Учётные записи")},event:{ico:"tickets",text:i18n("Билеты")},fees:{ico:"fees",text:i18n("Штрафы и налоги")},important:{ico:"important",text:i18n("Важное")},more:{ico:"more-hor",text:i18n("Ещё")},unread:{ico:"point",text:i18n("Непрочитанные")},flagged:{ico:"flag",text:i18n("Помеченные флажком")},attach:{ico:"attach",text:i18n("С вложениями")}};a().Block.extend({name:"ico-map",template:o(),blocks:{}})},13944:function(e,t,n){"use strict";n.r(t);var r=n(18440),a=n.n(r),i=n(96323),o=n(12386),s=n(95655),l=n.n(s),c=n(45114),d=n(2613);t.default=a().Block.extend({name:"layer-confirm-clear-folder",template:l(),blocks:{layer:d.Z,button2:c.Z},getName(){var e=(0,o.R)(this.get("model"));return(0,i.M)(e)},getText(){return i18n("Очистить папку {folder}?",{folder:this.getName()})}})},80178:function(e,t,n){"use strict";n.r(t);var r=n(18440),a=n.n(r),i=n(49260),o=n.n(i),s=n(45114),l=n(37874),c=n(15045);t.default=a().Block.extend({name:"layer-mobile",template:o(),blocks:{button2:s.Z,"nav-folders":l.Z,scrollable:c.Z}})},23712:function(e,t,n){"use strict";n.r(t);var r=n(18440),a=n.n(r),i=n(97485),o=n.n(i),s=n(45114),l=n(2613),c=n(80178),d=n(64391);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}t.default=a().Block.extend({name:"layer-move-to-folder",template:o(),blocks:{"layer-mobile":c.default,layer:l.Z,button2:s.Z,"list-nested-moveto-folder":d.Z},events:{"folders:click":"onFoldersClick"},onFoldersClick(e){var t=this.get("letter");if(t)this.broadcast("move",f(f({},e.details),{},{model:t}));else this.broadcast("move",f(f({},e.details),{},{selection:!0,model:void 0}));this.broadcast("layer:close")}})},15498:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(44438),o=n(55935),s=n.n(o),l=n(53785),c=n(53263),d=n(56882);t.Z=a().Block.extend({name:"letter-blockquote",template:s(),defaults:{letterShowEmail:!1,blockquote:{},index:0,ponymode:!1,"dark-mode":!1},blocks:{delimeter:c.Z,"html-parser":d.Z},mods:{letterAttachLinkDate:i.FE,addBrackets:e=>"<".concat(e,">")},didMount(){this.rerender()},rerender(){(0,l.u)(this.el,"blq"),this.ids.parser.rerender()}})},59574:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(43148),o=n.n(i),s=n(98039),l=n(77509);t.Z=a().Block.extend({name:"letter-category",template:o(),blocks:{badge:s.Z},defaults:{name:"default",title:"",ico:""},getIco(){var e=l.r[this.get("name")];return e&&e.ico},getText(){var e=l.r[this.get("name")];return this.get("text")||e&&e.text},getTitle(){var e=l.r[this.get("name")];return e&&e.text}})},15598:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(62593),s=n.n(o),l=n(61799),c=n(96130),d=n(12199),u=n(72656);t.Z=i().Block.extend((0,l.Z)({id:"confirm-receipt",events:[{name:"confirmreceipt",data:void 0}]})({name:"letter-confirm-receipt",defaults:{"hide-help-link":r.CONFIRM_RECEIPT_HELP,"help-link":r.CONFIRM_RECEIPT_HELP_URL},template:s(),blocks:{"button-link":c.Z,ico:d.Z,link:u.Z}}))},21963:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(21211),a=n(18440),i=n.n(a),o=n(514),s=n.n(o),l=n(7414),c=n.n(l),d=n(75273),u=n(2335),f=n(83260),m=n(61799),h=n(77917),p=n(53263),g=n(52875),v=n.n(g),_=i().Block.extend({name:"letter-list-item-adv-placeholder",template:v(),needAnimate:()=>r.LIST_ADVERT_ANIMATION,is3PaneRedesignV3:()=>r.ADV_3PANE_REDESIGN_V3}),b=0,E={};var y=i().Block.extend((0,m.Z)({id:"adv",explicit:"radar"})((0,h.withWelter)({name:"letter-list-item-adv",template:s(),immutable:!0,mods:{},blocks:{delimeter:p.Z,"letter-list-item-adv-placeholder":_},defaults:{},events:{},delayHandler:null,shouldPrefetch:!0,attrChanged:{hidden(e){if(e)this.el.style.display="none";else this.el.style.display=""}},isCompact(){return this.is("compact")||this.is("touch")},getAdvName(){return this.isCompact()?"list3pane":"list2pane"},didUpdate(){var e=this.currentState,t=e.name,n=e.complexName;if(this.getAdvName()===t)(0,f.debounce)(()=>this.broadcast("render:adv",{advRender:this._updatePlacementBound,advName:n}),0);else this.didUnmount(),this.didMount()},didMount(){var e=this.isCompact(),t=this.getAdvName(),n=this.get("router"),r=this.get("index"),a=this.refs["adv-content"],i=u.Adman.placement(t);if(this.radar(["try-render",e?"3pane":"2pane"]),i){var o=E[t];this.needAnimate()&&o&&a.appendChild(o);var s=i._slot.id,l=i._throttling,f=i._handlePageVisibility,m=i.autoUpdate._timeout,h=i._expId,p=s.split(".")[0],g="".concat(p,".").concat(b++),v=t+g,_=Object.assign({},d.uZ[t],{id:g,forceFail:u.Adman.slot(p).forceFail});d.uZ[v]=_,this._slotId=g,this.currentState={name:t,isCompact:e,complexName:v};var y=u.Adman.addSlots(_)[g];if(this._slot=y,this.get("indent"))u.Adman.clearCache(),(0,d.Fz)("in3paneMetathread",e?1:0),this.shouldPrefetch=!1;else(0,d.Fz)("in3paneMetathread",0),this.shouldPrefetch=!0;var T=u.Adman.addPlacements({siteZone:d.zZ,name:v,radarName:t,slot:g,autoUpdate:m,renderThrottling:l,handlePageVisibility:f,renderOnCreate:!1,expId:h,rbParams:d.i$,renderOptions:{customInsert:this.needAnimate()&&this.customInsert.bind(this)}})[v];d.pb[v]=T,y.on("adv-fetch-success",()=>{u.default.successSlotHandler(y,T),this.radar(["adman-fetch","success",e?"3pane":"2pane"])}),y.on("adv-fetch-fail",()=>{u.default.failSlotHandler(y,T,!1,r),this.radar(["adman-fetch","fail",e?"3pane":"2pane"])}),y.on("adv-fetch-force-fail",()=>{u.default.failSlotHandler(y,T,!0,r),this.radar(["adman-fetch-force","fail",e?"3pane":"2pane"])}),n.on("beforeroute",()=>y.removeAllListeners()),T.on("adv-render-fail",t=>{(t=t||{}).banner=t.banner||{},t.error=t.error||{message:"no error object"};var n={slotId:t.id,bannerId:t.banner.banner,stack:t.error.stack,error:t.error.message};c()("adman-render_fail_"+(e?"3pane":"2pane")+"&v=1&rlog=octavius_js_banner_errors&rlog_message="+JSON.stringify(n)),this.radar(["adman-render","fail",e?"3pane":"2pane"])}),this._renderPlacementBinded=this.renderPlacement.bind(this,v),this._updatePlacementBound=this.renderPlacement.bind(this,v,!0),this.broadcast("render:adv",{advRender:this._renderPlacementBinded,advName:v})}},didUnmount(){var e=this.currentState,t=e.name,n=e.isCompact,r=e.complexName;if(u.Adman.placement(t).autoUpdate.stop(),this.refs["adv-content"].innerHTML="",this.radar(["unmount",n?"3pane":"2pane"]),this.broadcast("render:remove",r),this._slotId)u.Adman.removePlacements([r])},customInsert(e,t){if(e&&t){var n=this.getAdvName(),r=E[n];if(r){if(r.offsetParent)r.addEventListener("animationend",()=>{try{e.removeChild(r)}catch(t){e.innerHTML=""}e.classList.remove("advert-appearence"),E[n]=t}),setTimeout((function n(){if(t.offsetHeight)r.classList.add("advert-removing"),e.classList.add("advert-appearence");else setTimeout(n,100)}),100)}else E[n]=t}},renderPlacement(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=this.isCompact();this.radar(["render-adv",n?"3pane":"2pane"]);var r=u.Adman.placement(e),a=document.activeElement,i=this.refs["adv-content"];r.attachToContainer(i),r.wakeUp();this.broadcast("native:render",{placement:r,placementRender:e=>{r.renderToContainer(i,e,!t).then(e=>{if(this.radar(["get-banner","success",n?"3pane":"2pane"]),e)this.radar(["get-banner","has",n?"3pane":"2pane"]);else this.radar(["get-banner","has-not",n?"3pane":"2pane"])}).catch(e=>{if(!e.forceFail)this.radar(["get-banner","fail",n?"3pane":"2pane"]),console.error(e)}).then(()=>{!function(e){try{if(e&&e!==document.body&&e!==document.activeElement)e.focus()}catch(e){}}(a)})}})},needAnimate(){return 0===this.get("position")&&r.LIST_ADVERT_ANIMATION}})))},91206:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(35038),o=n.n(i);t.Z=a().Block.extend({name:"letter-list-item-placeholder",template:o()})},6119:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(19008),s=n(44438),l=n(23142),c=n.n(l),d=n(54844),u=n(29404),f=n(78267),m=n(61799),h=n(86450),p=n(98039),g=n(79622),v=n(59574),_=n(45069),b=n(39846),E=n(42629);t.Z=i().Block.extend((0,m.Z)({id:"letter-item",events:[{name:"clickavatar",rename:e=>e.is("selected")?"deselect":"select"},{name:"togglestatus:unread",rename:e=>(0,u.aS)(e,"unread")},{name:"togglestatus:flagged",rename:e=>(0,u.aS)(e,"flagged")},{name:"remove",data:u.tA},{name:"spam",data:u.tA},"unspam"]})({name:"letter-list-item",template:c(),isolateEvents:!1,performanceTrace:!0,mods:{correspondent:o.k0,scheduleDate:s.ye,letterDate:s.Zm},blocks:{"letter-category":v.Z,"letter-status2":_.Z,avatar:h.Z,swipeable:E.ZP,badge:p.Z,highlighter:g.Z,"letter-swipe-actions":b.Z},defaults:{"disable-letter-item-folder":r.DISABLE_LETTER_ITEM_FOLDER,"main-field":"from","swipe-actions-visible":!1,"disable-subject":!1,"disable-category":!1,"hover-support":d.Z.capabilities["hover-support"],"expand-attachment-dropdown":!1},notVisualAttributes:{"list-index":!0},attrChange:{"avatar-field":e=>"from"===e||"to"===e?e:"from"},events:{"pan:changed":"onPanChanged","underlay:changed":"onUnderlayChanged","animation:changed":"onAnimationChanged"},didMount(){var e=f.default.getInstance();if(e&&e.el)this.ids.swipeable.addInsideTarget(e.el)},onPanChanged(e){this.set("swipe-actions-touched",e.details.value)},onAnimationChanged(e){this.set("swipe-actions-animated",e.details.value)},onUnderlayChanged(e){this.set("swipe-actions-visible",e.details.value)},getModel(){var e=this.get("model"),t=e.get("messages.0");if(t&&!e.get("date")&&!e.get("snippet"))return t;else return e},getCorrespondents(){var e=this.get("model"),t=this.get("main-field");if("from"===t)return(0,o._u)(e,t);else return["to","cc"].map(t=>(0,o._u)(e,t)).filter(e=>!!e).join(", ")},getAvatar(){var e=this.get("model"),t=this.get("main-field");return(0,o.pB)(e,t)||r.DEFAULT_AVATAR_SRC},getSubject(){return this.get("model").get("subject")||i18n("<Без темы>")}}))},45069:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(21828),o=n.n(i),s=n(45114),l=n(12199);t.Z=a().Block.extend({name:"letter-status2",template:o(),blocks:{ico:l.Z,button2:s.Z},defaults:{name:"unread",state:!1,reply:!1,forward:!1,disabled:!1},getData(){var e=this.get("state"),t=this.get("forward"),n=this.get("reply");switch(this.get("name")){case"schedule":return{ico:"status:time",title:this.get("title")};case"attach":return{ico:"attach"};case"flagged":return{ico:e?"actions:favorite_on":"actions:favorite_off",title:e?i18n("Снять флажок"):i18n("Пометить флажком")};case"unread":var r="point",a="point";if(e)r="point",a="";else if(t&&n)r="mail_20:actions:forward_reply_small";else if(t)r="mail_20:actions:forward_small";else if(n)r="mail_20:actions:reply_small";else a="";return{ico:r,icoHover:a,title:e?i18n("Пометить прочитанным"):i18n("Пометить непрочитанным")};case"dark-mode":return{ico:"logotypes:idea",title:e?i18n("Выключить тёмный режим"):i18n("Включить тёмный режим")}}},didMount(){this.el.classList.add("stop-animate")}})},39846:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(76534),o=n.n(i),s=n(78267),l=n(45114);t.Z=a().Block.extend({name:"letter-swipe-actions",template:o(),blocks:{button2:l.Z},events:{"click:move":"onMove"},onMove(){var e=this.get("model");s.default.open("move-to-folder",{letter:e},{dimmer:!0,mobile:!0,resolvable:!1})}})},71474:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(48254),o=n.n(i),s=n(61799),l=n(96130),c=n(45114);t.Z=a().Block.extend((0,s.Z)({events:["close","action"]})({name:"letter-tooltip",isolateEvents:!0,template:o(),blocks:{button:c.Z,"button-link":l.Z},defaults:{ponymode:!1}}))},72656:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(64077),o=n.n(i),s=n(61799);t.Z=a().Block.extend((0,s.Z)({events:["click-radar"]})({name:"link",template:o(),defaults:{disabled:!1,hovered:!1,href:null,target:null,text:"",unsafe:!1,secondary:!1},blocks:{}}))},95470:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(5898),o=n.n(i),s=n(54844),l=n(61799),c=n(12199);t.Z=a().Block.extend((0,l.Z)({events:[{name:"click-radar",rename:"click"}]})({name:"list-item",template:o(),events:{},blocks:{ico:c.Z},defaults:{"hover-support":s.Z.capabilities["hover-support"],selected:!1,markable:!1,marked:!1},onSubmenuShow(){this.set("selected",!0)},onSubmenuHide(){this.set("selected",!1)},onDestroy(){this.onSubmenuHide()}}))},34734:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(91779),o=n(75293),s=n.n(o),l=n(50),c=n.n(l),d=n(39783),u=n.n(d),f=n(92042),m=n.n(f),h=n(61799),p=n(93286),g=n(45114),v=n(94993),_=n(12199),b=n(56302),E=n(95470),y=n(26694),T=n(51474),A=n(43845),S=n(90557),O=(0,A.pn)(()=>n.e(1438).then(n.bind(n,22e3)).then(S.MV)),C=(0,A.pn)(()=>n.e(1438).then(n.bind(n,56480)).then(S.MV)),w=a().Block.extend((0,y.J6)((0,h.Z)({id:"attach-preview",events:[{name:"attachment-button:expanded",rename:"btn-expanded"},{name:"attachments:openviewer",rename:"openviewer"}],explicit:!0})({name:"list-letter-attach-status-preview",rootClassName:"ll-asa",template:s(),immutable:!0,isolate:!0,isolateEvents:!0,lazyAttachmentButton:O,lazyAttachmentDropdown:C,blocks:{ico:_.Z,dropdown:v.Z,"list-item":E.Z,button2:g.Z,list:b.Z,"react-async":T.Z},defaults:{model:null,"expand-attachment-dropdown":!1,size:null},events:{"attachment-button:expanded":"onAttachmentDropdownExpanded"},getAttachTitle:()=>i18n("С вложениями"),attachmentDropdownChange(e){(0,p.ZP)(["letters_letter-item_attach-preview",e?"open":"close"]),this.set("expand-attachment-dropdown",e)},onAttachmentDropdownExpanded(e){e.preventDefault();var t=this.get("model"),n=t instanceof m()?t.get("expand"):t.id,r=t.get("folder");u().findOne({id:n,folder_id:r}).then(()=>{this.set("expand-attachment-dropdown",!0)})},getAttachmentSize:e=>(0,i.j)(e.get("size")),getPreviewSrc:e=>e.getThumbnailUrl(c().THUMBNAIL_SIZE_DEFAULT),getAttachmentItems(){var e=this.get("model"),t=e.getAttachmentsList();if(t.length)return t.map(t=>({extension:t.getExtension(),title:"".concat(t.get("name")," ").concat(this.getAttachmentSize(t)),src:this.getPreviewSrc(t),onClick:()=>{var n=e.get("expand"),r=e instanceof m()?u().get(n):e;this.broadcast("attachments:openviewer",{message:r,attachment:t,from:"ll-stst-prvw"})}}));else return[{title:i18n("Файл был удалён")}]}})));w.resetAttachmentDropdown=()=>{w.getInstances().forEach(e=>{if(e.get("expand-attachment-dropdown"))(0,p.ZP)(["attachment-dropdown","close-expanded"]),e.set("expand-attachment-dropdown",!1)})},t.Z=w},59787:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(31330),o=n.n(i),s=n(12199),l=n(26694);t.Z=a().Block.extend((0,l.J6)({name:"list-letter-attach-status",rootClassName:"ll-as",template:o(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{ico:s.Z},getAttachTitle:()=>i18n("С вложениями")}))},95159:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(18440),a=n.n(r);var i=n(47471),o=n.n(i),s=n(59574),l=a().Block.extend({name:"list-letter-badge",rootClassName:"ll-b",template:o(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{"letter-category":s.Z},defaults:{category:null,important:!1,counter:0,compact:!1,unread:!1},mods:{formatCounter:function(e){if(!e)return 0;else return e>99?"99+":e}}})},28439:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(44438),o=n(7242),s=n.n(o);t.Z=a().Block.extend({name:"list-letter-date",rootClassName:"ll-d",template:s(),immutable:!0,isolate:!0,isolateEvents:!0,defaults:{date:""},mods:{letterDate:i.Zm}})},19274:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(11395),o=n.n(i);t.Z=a().Block.extend({name:"list-letter-folder",rootClassName:"ll-f",template:o(),isolate:!0,isolateEvents:!0,defaults:{title:"",text:""}})},47576:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(48488),o=n.n(i),s=n(93286),l=n(72656),c={orderHref:i18n("Перейти к заказу"),shopHref:i18n("Перейти в магазин")};t.Z=a().Block.extend({name:"list-letter-order",rootClassName:"ll-order",template:o(),blocks:{link:l.Z},didMount(){(0,s.ZP)("list_letter_order_show")},getItems(){var e=this.get("metadata").item_list,t=e.length,n="";return e.forEach((e,r)=>{var a=e.name;if(a)n+=r<t-1?"".concat(a,", "):"".concat(a)}),n},getOrderLink(){var e=this.get("metadata"),t=e.order_href,n=e.order_list_href;return t||n},getLinkText(){return this.get("metadata").order_href?c.orderHref:c.shopHref}})},62733:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(54498),a=n(21211),i=n(18440),o=n.n(i),s=n(44438);var l=n(59448),c=n.n(l),d=n(66423),u=n.n(d),f=n(93286),m=n(12199),h=n(77509),p=n(11726),g=n(88488),v=n(4183),_={[p.RL.PROMO]:"order",[p.RL.DATASET]:"finance",[p.RL.GIBDD]:"fees",[p.RL.MOBILES_PAYMENT]:"finance",[p.RL.SIMPLE]:"dobro",[p.RL.MONETA]:"finance",[p.RL.MOS_RU]:"finance"},b={car_number:i18n("Номер авто"),driver_license:i18n("Номер ВУ"),CTC:i18n("СТС"),date_violation:i18n("Дата нарушения"),receiver:i18n("Постановление")},E=o().Block.extend({name:"list-letter-payment-die",rootClassName:"ll-pd",template:c(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{ico:m.Z,"payment-button":g.Z},defaults:{"layout-mode":"2pane","icon-container-mode":"narrow","img-src":"","show-img":!1},events:{"load-img":"handleImgLoad","error-img":"handleImgError","cross-click":"handleCrossClick"},mods:{letterMonthYearDate:s.Yr,lowerCase:function(e){return e.toLowerCase()}},constructor:function(){o().Block.apply(this,arguments),this.meta=this.get("model").getPaymentMeta()},getQaId(){return"payment-die:".concat(this.meta.skin)},didMount(){if(this.hasPicture())this._getImgSrc().then(e=>this._initImgLoading(e));var e=this.meta,t=e.skin,n=e.merchant_id,r=this.get("model").id;if(!p.dj.hasOwnProperty(r))p.dj[r]="",(0,f.ZP)({type:"ll-pd-show-".concat(t),dwh:{uidl:r,displayMode:"full",layoutMode:this.get("layout-mode"),ponyMode:!1,merchantId:n}})},_getFirstTruthyMetaField(e){var t=this.meta,n=e.find(e=>!!t[e]);return n?{id:n,text:t[n]}:null},getTitle(){var e=this.meta;switch(e.skin){case p.RL.PROMO:var t=this._getFirstTruthyMetaField(["description","receiver"]);return["receiver"===t.id?{id:t.id,text:i18n("Заказ № {orderNumber}",{orderNumber:t.text})}:t];case p.RL.DATASET:return[this._getFirstTruthyMetaField(["address","period","payer","description"])];case p.RL.GIBDD:return[this._getFirstTruthyMetaField(["article_koap_description","violation_place"])];case p.RL.MOBILES_PAYMENT:var n=e.phone,r=e.recharge_threshold;return[{id:"balance_warning",text:i18n("Баланс {phone} меньше {rechargeThreshold} руб",{phone:n,rechargeThreshold:r})}];case p.RL.SIMPLE:return[this._getFirstTruthyMetaField(["comment"])];case p.RL.MONETA:var a="",i=e.account_number,o=e.provider_category,s=e.provider;if(s)a=s;if(o)a=a?"".concat(a,", ").concat(o):o;if(i)a=a?i18n("{monetaTitle}, л/с {accountNumber}",{"unsafe-monetaTitle":a,"unsafe-accountNumber":i}):i18n("л/с {accountNumber}",{"unsafe-accountNumber":i});return[{id:"moneta_title",text:a}];case p.RL.MOS_RU:return[{id:"mosru_title",text:e.description||""}]}},getSubtitle(){var e=this.meta,t=e.skin,n=e.car_number,r=e.date_violation,a=e.date_deadline,i=e.date_deadline_discount;if(t!==p.RL.GIBDD)return[];if(n&&r)return[{id:"car_number",text:n},{id:"date_violation",text:r}];var o=this._getFirstTruthyMetaField(["car_number","driver_license","CTC","date_violation","receiver"]);if(o){var l=o.id,c=o.text;return[{id:l,description:"".concat(b[l],":"),text:c}]}return(0,p.Bw)(i)?[{id:"no-discount",description:i18n("Оплатить до")+":",text:(0,s.Ak)(1e3*a,!0)}]:[{id:"discount",description:i18n("Оплатить со скидкой до")+":",text:(0,s.Ak)(1e3*i,!0)}]},getIconData(){var e=this.get("model"),t=this.meta,n=t.skin,r=t.provider_logo;if(n===p.RL.MOBILES_PAYMENT&&r)return{name:"provider-logo",url:r};var a=e.get("transaction_category")||_[n];return{category:a,name:n===p.RL.SIMPLE&&!h.r.hasOwnProperty(a)?"actions:favorite_alt":h.r[a].ico}},hasPicture:p.KF,_getImgSrc(){var e=this.meta;switch(e.skin){case p.RL.PROMO:return Promise.resolve(e.preview_image);case p.RL.GIBDD:if(!a.LIST_LETTER_PAYMENT_DIES_GMAP)return Promise.reject();var t=a.LIST_LETTER_PAYMENT_DIES_GMAP.mapSize,n=a.LIST_LETTER_PAYMENT_DIES_GMAP.zoom;return u().get("gibdd/gmap/base64",{latitude:'"'.concat(e.latitude,'"'),longitude:'"'.concat(e.longitude,'"'),map_size:'"'.concat(t,'"'),zoom:'"'.concat(n,'"')},{cache:!0}).then(e=>{var t=e.body;return"data:image/png;base64,".concat(t.base64_map)}).catch(e=>{throw(0,f.ZP)({type:"ll-pd-gmap-err"}),e})}},_initImgLoading(e){this.set("img-src",e)},handleImgLoad(){this.set("show-img",!0)},handleImgError(){var e=this.meta.skin;(0,f.ZP)({type:"ll-pd-img-err-".concat(e)})},shouldShowCross:()=>a.LIST_LETTER_PAYMENT_DIES_CLOSEABLE,handleCrossClick(e){e.preventDefault();var t=(0,p.RO)(this.get("model").id),n=this.meta,a=n.skin,i=n.status,o=n.merchant_id;(0,f.ZP)({type:"ll-pd-close",intervals:[[a,1]],dwh:{uidl:t,displayMode:"full",layoutMode:this.get("layout-mode"),ponyMode:!1,status:i||"new",merchantId:o}}),(0,v.default)({type:r.HIDE_PAYMENT_DIE,uidl:t})}})},24871:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(18440),a=n.n(r),i=n(90056),o=n.n(i),s=n(12199),l={name:"list-letter-read-status",rootClassName:"ll-rs",template:o(),immutable:!0,isolate:!0,defaults:{model:null,state:!1,"disable-hover":!1,"is-forwarded":!1,"is-replied":!1},notVisualAttributes:{model:!0,"disable-hover":!0},blocks:{ico:s.Z},getTitle(){return this.get("state")?i18n("Пометить прочитанным"):i18n("Пометить непрочитанным")},getIconName(){if(this.get("is-forwarded")&&this.get("is-replied"))return"mail_20:actions:forward_reply_small";if(this.get("is-forwarded"))return"mail_20:actions:forward_small";if(this.get("is-replied"))return"mail_20:actions:reply_small";else return!1}};t.Z=a().Block.extend(l)},84893:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(44438),o=n(85128),s=n.n(o),l=n(12199),c=n(26694);t.Z=a().Block.extend((0,c.J6)({name:"list-letter-schedule-status",rootClassName:"ll-ss",template:s(),immutable:!0,isolate:!0,blocks:{ico:l.Z},defaults:{state:!1,"disable-hover":!1},notVisualAttributes:{model:!0,"disable-hover":!0},getFormattedDate:e=>(0,i.ye)(e)}))},93441:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(24112),o=n.n(i),s=n(79622);t.Z=a().Block.extend({name:"list-letter-snippet",rootClassName:"ll-sp",template:o(),immutable:!0,isolate:!0,isolateEvents:!0,defaults:{search:!1,value:"",color:null},blocks:{highlighter:s.Z}})},92323:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(8730),o=n.n(i),s=n(79622);t.Z=a().Block.extend({name:"list-letter-subject",rootClassName:"ll-sj",template:o(),immutable:!0,isolate:!0,isolateEvents:!0,defaults:{search:!1,subject:"",color:null},blocks:{highlighter:s.Z}})},9842:function(e,t,n){"use strict";var r=n(19275),a=n(21211),i=n(18440),o=n.n(i),s=n(98626),l=n.n(s),c=n(76864),d=n(53263);t.Z=o().Block.extend({name:"list-letter-tip",template:l(),defaults:{"help-disabled":a.SPAM_HELP_DISABLED,"spam:cleanup:secondary-link":r.Z.get("urls.helpUrl")+"/mail-help/security/spam","pony-mode":!1,isNextSelected:!1},blocks:{delimeter:d.Z},isRemoveVisible(){return!(0,c.Mx)(this.get("folder"))}})},75589:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(18440),a=n.n(r),i=n(37432),o=n.n(i),s=n(54844),l=n(21528),c=n(21211),d=n(89629),u=n.n(d),f=n(14614),m=n.n(f),h=n(17304),p=n.n(h),g=n(50955),v=n.n(g),_=n(74456),b=n(63062),E=n(93286),y=a().Block.extend({name:"list-nested-category-feedback",template:m(),events:{},defaults:{html:"",model:null,folders:null},didUnmount(){this.unrenderUI()},attrChanged:{model(e,t){if(this.ui&&e===t)this.update();else this.renderUI()},metathreads(){if(this.ui)this.update()},"dark-mode"(){if(this.ui)this.update()}},update(){this.ui.injectDependencies(this.getParams()),this.ui.render()},renderUI(){this.unrenderUI(),(0,_.Z)("category.feedback").then(e=>{this.ui=new e.CategoryFeedback(this.refs.list,{model:this.get("model"),listMode:!0,externalTooltip:this.createFilterNotify}),this.ui.injectDependencies(this.getParams()),this.ui.render(),this.broadcast("resize",null,null,!0)})},unrenderUI(){this.ui&&this.ui.destroy(),this.ui=null},getParams(){return{CategoryChange:v(),SaveSeveral:p(),isOctavius:!0,isDarkMode:this.is("dark-mode"),features:l.default,bridge:this.getBridge(),metathreads:this.is("metathreads")}},createFilterNotify(e){var t=e.header,n=e.text,r=e.action;return new Promise((e,a)=>{var i=b.default.add({text:"".concat(t,". ").concat(n),actions:[{text:r}],qa:"create-filter-notify",duration:c.CATEGORY_FEEDBACK_SUBMENU_NOTIFY_DURATION,inline:!1});if(i)i.on("action",()=>{e(),i.close()}),i.on("closed",a);else a()})},getBridge(){if(!this._bridge)this._bridge=new(u()),this._bridge.on("radar",e=>{var t=e.chain;(0,E.ZP)(["submenu"].concat(t))});return this._bridge}}),T=n(64391),A=n(19413),S={"moveto-folder":T.Z,"category-feedback":y,sorting:A.Z},O=a().Block.extend({name:"list-nested",template:o(),events:{resize:"onContentResize"},defaults:{expanded:!1,"hover-support":s.Z.capabilities["hover-support"]},setCoordinates(e){var t,n,r=e.el.getBoundingClientRect(),a=this.refs.block,i=window.innerWidth,o=window.innerHeight,s=a.offsetWidth,l=a.offsetHeight,c=i-r.right>s,d=!c,u=o-r.top>l,f=r.top-8;if(c)t=r.right;if(d)t=r.left-s;if(u)n="none";if(!u)n=l-(l-(o-r.top))+"px";a.style.left="".concat(t,"px"),a.style.top="".concat(f,"px"),a.style["max-height"]="".concat(n)},onContentResize(){this.setCoordinates(this.control)},setSubmenu(e,t,n){var r=S[e];if(r&&n){this.destroyBlock();var a=new r(Object.assign({},t,{router:this.get("router")}));return this.block=a,this.control=n,a.renderTo(this.refs.block),this.setCoordinates(n),this.show(),a}},show(){if(this.block&&this.control)this.block.onShow&&this.block.onShow(),this.control.onSubmenuShow&&this.control.onSubmenuShow(),this.set("expanded",!0)},hide(){if(this.block&&this.control)this.block.onHide&&this.block.onHide(),this.control.onSubmenuHide&&this.control.onSubmenuHide(),this.set("expanded",!1)},destroyBlock(){if(this.block&&this.control)this.block.onDestroy&&this.block.onDestroy(),this.control.onDestroy&&this.control.onDestroy(),this.block=null,this.refs.block.innerHTML="",this.refs.block.removeAttribute("style")}})},56302:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(6657),o=n.n(i),s=n(54844);t.Z=a().Block.extend({name:"list",template:o(),events:{},defaults:{"hover-support":s.Z.capabilities["hover-support"]}})},14604:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(37947),o=n.n(i),s=n(94005),l=n(12199);t.Z=a().Block.extend({name:"metathread-avatar",rootClassName:"mt-a",template:o(),immutable:!0,isolate:!0,defaults:{indent:!1,model:null,state:!1,size:"common",type:"social","disable-select":!1,"disable-hover":!1},notVisualAttributes:{indent:!0,model:!0,state:!1,type:!1,"disable-select":!1,"disable-hover":!0},blocks:{ico:l.Z,checkbox:s.Z},METATHREAD_TYPES:{social:"navigation:users",newsletters:"categories:mailings",tomyself:"categories:self_mail",news:"categories:subscriptions",official:"categories:government",receipts:"categories:receipts",school:"categories:school",games:"categories:games"},METATHREAD_PROMO_ICO_IDS:{official:"octavius-tooltip-government-metathread-ico"},didMount(){this.el.classList.add("stop-animate")},getTitle(){if(this.get("disable-select"))return!1;else return this.get("state")?i18n("Снять выделение"):i18n("Выделить")},getIco(){return this.METATHREAD_TYPES[this.get("type")]},getIcoSize(){if("common"===this.get("size"))return"s";else return"xl"},getPromoIcoId(){return this.METATHREAD_PROMO_ICO_IDS[this.get("type")]}})},44371:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(94715),o=n.n(i),s=n(59574);t.Z=a().Block.extend({name:"metathread-badge",rootClassName:"mt-b",template:o(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{"letter-category":s.Z},defaults:{counter:0},mods:{}})},98539:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(77515),o=n.n(i),s=n(54901),l=n(94993),c=n(12199),d=n(56302),u=n(95470);t.Z=a().Block.extend({name:"metathread-dropdown-actions",rootClassName:"mt-d-a",template:o(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{dropdown:l.Z,ico:c.Z,list:d.Z,"list-item":u.Z},defaults:{compact:!1,deleteall:!1,model:null,"pony-mode":!1,readall:!1,cleanmaster:!0,disable:!1},getCleanmasterText:()=>i18n("Настроить рассылки"),getNavigationText(){var e=this.get("model");if(e.isToMyself())return i18n("Перейти в папку");else return i18n("Перейти в папку")+" ".concat((0,s.DC)(e))},getRemoveButtonText(){return(0,s.Oi)(this.get("model"))},getDisableText(){if(this.get("model").isToMyself())return i18n("Отключить группировку")},getMarkAllReadText:s.dR})},34182:function(e,t,n){"use strict";n.d(t,{zZ:function(){return l},oL:function(){return c},oY:function(){return d},x4:function(){return u},Oi:function(){return f},dR:function(){return m},X:function(){return h},C7:function(){return p},sE:function(){return g},eh:function(){return v},oV:function(){return _},M0:function(){return b},vh:function(){return y}});var r=n(54498),a=n(4183),i=n(54901),o=n(4872),s=n.n(o);function l(){var e=this.get("model").get("metathread_data.folder");return s().get(e)}function c(){return this.get("model").get("metathread_data.category")}function d(){return this.get("model").get("metathread_data.folder_name")}function u(){return this.get("model").get("metathread_data.new_cnt")}function f(){return(0,i.Oi)(this.get("model"),this.is("short-text"))}function m(){return(0,i.dR)()}function h(){return this.get("model").get("flags.unread")}function p(){var e=this.get("model").get("metathread_data.last_senders");if(!this.hasUnread())e.forEach(e=>{e.unread=!1});return e}function g(){var e=this.get("model");if(this.is("sticky"))this.broadcast("scrollintoself");(0,a.default)({type:r.TOGGLE_METATHREAD,state:!1,model:e}),this.broadcast("read",{model:this.getFolder()})}function v(){this.broadcast("clear",{model:this.getFolder()})}function _(){var e=this.get("model").get("metathread_data.folder");return"metathread-item:folder:".concat(e)}function b(){return this.is("expanded")?"expanded":"collapsed"}function E(e){return i18n.plural(e,[i18n("{count} отправителей",{count:e}),i18n("{count} отправитель",{count:e}),i18n("{count} отправителя",{count:e})])}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";if(e.length<=8)return e.map(e=>e[t]).join(", ");if(e.length>8){var n=e.length-8;return e.filter((e,t)=>t<8).map(e=>e[t]).join(", ")+i18n(" и ещё ")+E(n)}}},94716:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(78877),s=n.n(o),l=n(61799),c=n(45114),d=n(28439),u=n(24871),f=n(14604),m=n(44371),h=n(98539),p=n(34182),g=n(25206),v=n(10429),_=n(68869);t.Z=i().Block.extend((0,l.Z)({id:"head",events:[{name:"metathreadtogglestatus:unread",rename:e=>(e.is("expanded")?"expanded":"collapsed")+"_"+(e.get("model").is("flags.unread")?"read":"unread")+"_"+e.get("model").getMetathreadFolder()},"clear","read"]})({name:"metathread-head-common",rootClassName:"mt-h-c",template:s(),immutable:!0,isolate:!0,performanceTrace:!0,blocks:{button2:c.Z,"letter-date":d.Z,"metathread-avatar":f.Z,"metathread-badge":m.Z,"metathread-dropdown-actions":h.Z,"metathread-snippet":g.Z,"metathread-snippet-tomyself":v.Z,"metathread-title":_.Z,"read-status":u.Z},defaults:{first:!1,expanded:!1,model:null,"pony-mode":!1,selected:!1,"short-text":!1,"hide-disable-to-myself-metathread":r.HIDE_DISABLE_TO_MYSELF_METATHREAD},notVisualAttributes:{model:!0},events:{"metathread:readall":"onMetathreadReadAll","metathread:deleteall":"onMetathreadDeleteAll"},getFolder:p.zZ,getType:p.oL,getName:p.oY,getNewCount:p.x4,getSenders:p.C7,getRemoveButtonText:p.Oi,getMarkAllReadText:p.dR,hasUnread:p.X,onMetathreadReadAll:p.sE,onMetathreadDeleteAll:p.eh,rootQaId:p.oV,rootQaState:p.M0}))},16730:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(97624),s=n.n(o),l=n(61799),c=n(24871),d=n(14604),u=n(98539),f=n(34182),m=n(68869);t.Z=i().Block.extend((0,l.Z)({id:"item-metathread",events:["clickavatar","togglestatus:unread","remove"]})({name:"metathread-head-compact-expanded",rootClassName:"mt-h-compact-expanded",template:s(),immutable:!0,isolate:!0,performanceTrace:!0,blocks:{"metathread-avatar":d.Z,"metathread-dropdown-actions":u.Z,"metathread-title":m.Z,"read-status":c.Z},defaults:{first:!1,model:null,"pony-mode":!1,selected:!1,"short-dropdown":!1,"hide-disable-to-myself-metathread":r.HIDE_DISABLE_TO_MYSELF_METATHREAD},notVisualAttributes:{model:!0},events:{"metathread:readall":"onMetathreadReadAll","metathread:deleteall":"onMetathreadDeleteAll"},getFolder:f.zZ,getType:f.oL,getName:f.oY,hasUnread:f.X,onMetathreadReadAll:f.sE,onMetathreadDeleteAll:f.eh,rootQaId:f.oV,rootQaState:f.M0}))},20450:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(76792),o=n.n(i),s=n(61799),l=n(28439),c=n(24871),d=n(14604),u=n(44371),f=n(34182),m=n(25206),h=n(10429),p=n(68869),g=n(53785);t.Z=a().Block.extend((0,s.Z)({id:"item-metathread",events:["clickavatar","togglestatus:unread","remove"]})({name:"metathread-head-compact",rootClassName:"mt-h-compact",template:o(),immutable:!0,isolate:!0,performanceTrace:!0,blocks:{"letter-date":l.Z,"metathread-avatar":d.Z,"metathread-badge":u.Z,"metathread-snippet":m.Z,"metathread-snippet-tomyself":h.Z,"metathread-title":p.Z,"read-status":c.Z},defaults:{first:!1,model:null,"pony-mode":!1,selected:!1},notVisualAttributes:{model:!0},events:{"metathread:readall":"onMetathreadReadAll","metathread:deleteall":"onMetathreadDeleteAll"},didMount(){(0,g.u)(this.refs.content,"mhc")},didUpdate(){(0,g.u)(this.refs.content,"mhc")},getFolder:f.zZ,getType:f.oL,getName:f.oY,getNewCount:f.x4,getSenders:f.C7,getSendersTooltip:f.vh,getRemoveButtonText:f.Oi,getMarkAllReadText:f.dR,hasUnread:f.X,onMetathreadReadAll:f.sE,onMetathreadDeleteAll:f.eh,rootQaId:f.oV,rootQaState:f.M0,getAvatarSize(){if(this.is("pony-mode"))return"common";else return"compact"}}))},10429:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(19008),s=n(43655),l=n.n(s),c=n(53785);t.Z=i().Block.extend({name:"metathread-snippet",rootClassName:"mt-snt-tmslf",template:l(),immutable:!0,isolate:!0,defaults:{senders:[],"max-count":r.METATHREAD_TOMYSELF_SNIPPET_ITEMS_MAX_COUNT},getSenders(){var e=this.get("max-count"),t=this.is("preview"),n=this.get("senders");return void 0!==e&&!t?n.slice(0,e):n},getEmptySubject:()=>(0,o.Eq)(i18n("<Без темы>")),didMount(){(0,c.u)(this.el,"mst")},didUpdate(){(0,c.u)(this.el,"mst")}})},25206:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(94571),o=n.n(i),s=n(53785);t.Z=a().Block.extend({name:"metathread-snippet",rootClassName:"mt-snt",template:o(),immutable:!0,isolate:!0,defaults:{senders:[]},didMount(){(0,s.u)(this.el,"ms")},didUpdate(){(0,s.u)(this.el,"ms")}})},37968:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(18440),a=n.n(r),i=n(63645),o=n.n(i),s=n(93286),l={name:"notification-badge",template:o(),isolateEvents:!1,defaults:{"test-id":"notification-badge"},attrChanged:{ponymode(){this.setInlineStyles()},show(e){if(e)this.setInlineStyles()}},didMount(){if(this.get("show")){this.setInlineStyles();var e=this.get("radar-id");if(e&&"string"==typeof e)(0,s.ZP)({type:e})}},getCssRule(e){var t=this.get(e),n=this.get("pony-".concat(e));if(this.get("ponymode")&&void 0!==n)return"".concat(e,": ").concat(n,"px;");if(void 0!==t)return"".concat(e,": ").concat(t,"px;");else return""},setInlineStyles(){this.set({placementStyles:["top","bottom","left","right"].reduce((e,t)=>e+this.getCssRule(t),"")})}};t.Z=a().Block.extend(l)},2581:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(65860),o=n.n(i),s=n(12199);t.Z=a().Block.extend({name:"search-panel-button",template:o(),blocks:{ico:s.Z}})},32849:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(75600),o=n.n(i),s=n(98039),l=n(12199),c=n(37874),d=n(51474),u=n(27853),f=n(21211);t.Z=a().Block.extend({name:"sidebar-search",template:o(),blocks:{badge:s.Z,ico:l.Z,"react-async":d.Z,sidebar:u.Z,"nav-folders":c.Z},defaults:{folders:null,ponymode:!1,store:{},short:!1,categories:f.SEARCH_CATEGORIES,colorTags:f.COLOR_TAGS},constructor:function(){a().Block.apply(this,arguments),this.handleSearchPanelFocus=this.handleSearchPanelFocus.bind(this)},handleSearchPanelFocus(){this.broadcast("search-sidebar:focus")}})},84561:function(e,t,n){"use strict";var r=n(63876),a=n.n(r),i=n(18440),o=n.n(i),s=n(10794),l=n.n(s),c=n(2335),d=n(77917);t.Z=o().Block.extend((0,d.withWelter)({name:"slot",template:l(),immutable:!0,blocks:{},attrChanged:{"right-column"(e,t){if(this.refs.el.style.width="".concat(e,"px"),e!==t){var n=()=>{var e=this.isMounted();if(e)this.refs.el.style.visibility="visible";return e},r=c.default.toggleActiveSidebarPlacement(e);if(r)this.refs.el.style.visibility="hidden",r.attachToContainer(this.refs.el),r.render(!0,!1).then(((e,t)=>{if(n())c.default.onPlacementRender(e,t)}).bind(this,r),n)}}},didMount(){c.default.toggleActiveSidebarPlacement(this.get("right-column")),c.sidebarPlacementsList.forEach(e=>{if(c.default.getActiveSidebarPlacement()===e){var t=a().placement(e);if(t)t.attachToContainer(this.refs.el),t.wakeUp(),t.render(!0,!1).then(c.default.onPlacementRender.bind(c.default,t),()=>null)}})},didUnmount(){if(a().placement("sidebar"))a().placement("sidebar").destroy();if(a().placement("sidebar-small"))a().placement("sidebar-small").destroy()}}))},13209:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(91072),o=n.n(i),s=n(2335),l=n(53263);t.Z=a().Block.extend({name:"spec-project-letter",template:o(),blocks:{delimeter:l.Z},attrChanged:{hidden(e){if(e)this.el.style.display="none";else this.el.style.display=""}},constructor:function(){a().Block.apply(this,arguments),this._renderPlacementBound=this.renderPlacement.bind(this)},isCompact(){return this.is("compact")||this.is("touch")},didUpdate(){this.broadcast("render:adv",{advRender:this._renderPlacementBound,advName:this.name})},didMount(){this.broadcast("render:adv",{advRender:this._renderPlacementBound,advName:this.name})},didUnmount(){this.broadcast("render:remove",this.name)},renderPlacement(){var e=this.isCompact();if(e!==this.isPrevIsCompact){this.isPrevIsCompact=e;var t=this.refs["spec-project-letter"],n=s.Adman.placement(e?"specline3pane":"specline2pane");if(t.innerHTML="",s.default.setVisibleAdv(this.name,!1),n){this.broadcast("specline:render",{placement:n,placementRender:e=>{n.renderToContainer(t,e,!1).then(e=>{if(e&&e.html)s.default.setVisibleAdv(this.name,!0);else s.default.setVisibleAdv(this.name,!1)}).catch(e=>{console.log(e),s.default.setVisibleAdv(this.name,!0),this.broadcast("specline:error")})}})}}}})},55426:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(96741),o=n.n(i);t.Z=a().Block.extend({name:"spinner",template:o(),blocks:{}})},42629:function(e,t,n){"use strict";n.d(t,{ez:function(){return m},u7:function(){return h}});var r=n(21211),a=n(18440),i=n.n(a),o=n(85776),s=n.n(o),l=n(54844),c=n(61799),d=n(90557),u=l.Z.capabilities["touch-support"],f=e=>e.SUPPORT_POINTER_EVENTS?"pointerdown":"touchstart",m={RIGHT:"RIGHT",LEFT:"LEFT",CENTER:"CENTER",RIGHT_SMALL:"RIGHT_SMALL"},h={name:"swipeable",template:s(),isolate:!1,immutable:!0,touchEventsReady:!1,swipeWidthLessElWidth:!1,elWidth:0,currentPos:m.CENTER,notVisualAttributes:{disabled:!0},blocks:{},attrChanged:{disabled(e){this.touchEventsReady&&this.watchSwipe(!e)},animated(e){if(clearTimeout(this.timeouts.animated),this.broadcast("animation-changed",{value:e}),e)this.timeouts.animated=setTimeout(()=>this.set("animated",!1),350)},underlay(e){this.broadcast("underlay-changed",{value:e})}},constructor:function(){i().Block.prototype.constructor.apply(this,arguments),this.timeouts={}},didMount(){if(this._insiders=[],this._pos={x:0,y:0},this.addInsideTarget(this.el),u)(0,d.dU)().then((0,d.qh)(this,e=>{if(this.isMounted()&&!r.DISABLE_LETTER_SWIPE)this.Hammer=e,this.handleTouchStart=()=>{this.activateTouchEvents()},this.el.addEventListener(f(e),this.handleTouchStart,!0)}))},didUnmount(){if(u&&this.Hammer&&this.el.removeEventListener(f(this.Hammer),this.handleTouchStart,!0),Object.values(this.timeouts).forEach(e=>{window.clearTimeout(e)}),this.touchEventsReady)this.watchOutsideClick(!1),this.watchSwipe(!1),this._insiders=[]},activateTouchEvents(){var e=this.Hammer;this.mc=new e.Manager(this.el,{recognizers:e.defaults.preset,inputClass:e.SUPPORT_POINTER_EVENTS?e.PointerEventInput:e.TouchInput}),this.mc.get("pan").set({direction:e.DIRECTION_HORIZONTAL}),this.mc.get("swipe").set({direction:e.DIRECTION_HORIZONTAL}),this.touchEventsReady=!0,this.el.removeEventListener(f(e),this.handleTouchStart,!0),this.watchSwipe(!this.is("disabled"))},watchSwipe(e){if(e=void 0===e?!0:!!e)this.mc.on("panleft panright",e=>this.onPan(e)),this.mc.on("panstart",e=>this.onPanStart(e)),this.mc.on("panend",e=>this.onPanEnd(e));else this.mc.off("panleft panright panstart panend"),this.mc.off("swiperight swipeleft")},onPanStart(e){if(this.swipeWidthLessElWidth=this.swipeWidthLessElWidthFunc(),this.elWidth=this.el?this.el.offsetWidth:0,this.isHPanned=Math.abs(e.deltaX)>Math.abs(e.deltaY),this.isHPanned)this.set("animated",!1),this.broadcast("pan-changed",{value:!0}),this._lastPanX=0},onPan(e){if(this.isHPanned){var t=e.deltaX-this._lastPanX;this._lastPanX=e.deltaX,this.moveContainerX(t)}},onPanEnd(e){if(this.isHPanned)if(this.broadcast("pan-changed",{value:!1}),-e.deltaX>=this.getSwipeWidth()/5&&this.currentPos&&![m.RIGHT_SMALL,m.RIGHT].includes(this.currentPos))this.swipe(m.LEFT);else if(this.currentPos===m.LEFT&&e.deltaX>=0)this.reset();else if(this.currentPos!==m.LEFT&&this._pos.x>0&&this.attrs.maxOffsetPartLeft&&r.ENABLE_LETTER_FAST_ACTION_SWIPE)if(this._pos.x>=this.attrs.maxOffsetPartLeft){if(this.attrs.onRightAction)this.attrs.onRightAction();if(this.attrs.canFullSwipe)this.swipe(m.RIGHT);else this.reset()}else if(e.deltaX>=this.attrs.maxOffsetPartLeft/2)this.swipe(m.RIGHT_SMALL);else this.reset();else this.reset()},swipe(e){var t=(this.reactComponent?this.swipeableContentRef.current:this.refs.content).offsetWidth*(e===m.RIGHT?1:-1);if(e===m.RIGHT_SMALL&&this.attrs.maxOffsetPartLeft&&r.ENABLE_LETTER_FAST_ACTION_SWIPE)t=this.attrs.maxOffsetPartLeft;this.currentPos=e,this.set("animated",!0),this.setContainerPos(t),this.watchOutsideClick(e!==m.CENTER)},moveContainerX(e){if(e>0)if(this.attrs.maxOffsetPartLeft&&r.ENABLE_LETTER_FAST_ACTION_SWIPE){if(this._pos.x>=this.attrs.maxOffsetPartLeft)e/=1.5*e}else if(this._pos.x>=0)e/=6*e;this.setContainerPos(this._pos.x+e)},setContainerPos(e,t){var n=e>0?this.elWidth:this.getSwipeWidth(),a=e>0?1:-1;if(e=!e&&0!==e?this._pos.x:Math.min(Math.abs(e),n),e*=a,this._pos.x=e,this._pos.y=t,0===e)this.timeouts.underlay=window.setTimeout(()=>this.set("underlay",!1),350);else this.set("underlay",!0);var i=this.reactComponent?this.swipeableContentRef.current:this.refs.content,o=this.reactComponent?this.swipeUnderlayRef.current:this.refs.underlay,s=this.reactComponent?this.swipeUnderlayRightRef.current:this.refs.underlayRight;this.timeouts.position=requestAnimationFrame(()=>{var t=Math.max(0,Math.min(1,Math.abs(1.5*e/n))),a=!this.attrs.maxOffsetPartLeft||!r.ENABLE_LETTER_FAST_ACTION_SWIPE?1:Math.max(0,Math.min(1,e/this.attrs.maxOffsetPartLeft)),c=this.elWidth-n;if(i)i.style[l.Z.prefixedCSS("transform")]="translate3d("+e+"px,0,0) scale3d(1,1,1)";if(o)o.style.opacity=t,o.style[l.Z.prefixedCSS("transform")]="translate3d("+(this.elWidth+e-c)+"px,0,0) scale3d(1,1,1)";if(s&&r.ENABLE_LETTER_FAST_ACTION_SWIPE)if(this.set("rightActive",e>this.attrs.maxOffsetPartLeft&&this.currentPos!==m.LEFT),e>=0)s.style.opacity=a,s.style[l.Z.prefixedCSS("width")]=e+"px";else s.style.opacity=0,s.style[l.Z.prefixedCSS("width")]="0px"})},getSwipeWidth(){var e=this.attrs["max-offset"]?parseInt(this.attrs["max-offset"],10):this.elWidth;return Math.min(e,this.elWidth)},swipeWidthLessElWidthFunc(){if(!this.attrs["max-offset"])return!1;var e=this.el?this.el.offsetWidth:0;return parseInt(this.attrs["max-offset"],10)<e},watchOutsideClick(e){var t=this.el;if(t)this[(e=void 0===e?!0:!!e)?"$on":"$off"](t.ownerDocument,"touchstart","onOutsideClick"),this[e?"$on":"$off"](t.ownerDocument,"mousedown","onOutsideClick")},onOutsideClick(e){if(!this._insiders.some(t=>t.contains(e.target)))this.reset(),this.watchOutsideClick(!1)},addInsideTarget(e){this._insiders.push(e)},reset(){if(this.touchEventsReady)this.currentPos=m.CENTER,this.set("animated",!0),this.setContainerPos(0,0),this.watchOutsideClick(!1)}};t.ZP=i().Block.extend((0,c.Z)({})(h))},62718:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(93798),c=n.n(l),d=n(61799),u=n(96130),f=n(45114),m=n(94993),h=n(12199),p=n(56302),g=n(95470),v=n(55426),_=n(70045),b=n.n(_),E=n(5830),y=n.n(E),T=n(93185),A=[{key:y().RUSSIAN,text:i18n("Русский")},{key:y().ENGLISH,text:i18n("Английский")},{key:y().GERMAN,text:i18n("Немецкий")},{key:y().FRENCH,text:i18n("Французский")},{key:y().SPANISH,text:i18n("Испанский")}],S={};A.forEach((e,t)=>{e.index=t,S[e.key]=e});var O=s().Block.extend({name:"translator-select",isolateEvents:!0,template:b(),blocks:{button2:f.Z,select:T.Z},defaults:{selected:null,disabled:!1,"disabled-item":null,ponymode:!1},getText(e){return this.get("containerRef").clientWidth>=660?e:"".concat(e.slice(0,3),".")},getItems:()=>A,getSelectedIndex(){return this.getIndexByValue(this.get("selected"))},getDisabledIndex(){return this.getIndexByValue(this.get("disabled-item"))},getIndexByValue(e){var t=S[e];return t&&t.index}}),C=s().Block.extend((0,d.Z)({events:["hide","close","original","retry","translate","reverse"]})({name:"translator",isolateEvents:!0,template:c(),blocks:{list:p.Z,listItem:g.Z,dropdown:m.Z,button2:f.Z,"button-link":u.Z,ico:h.Z,spinner:v.Z,"translator-select":O},events:{"from:change":"onFromChange","to:change":"onToChange","translate:click":"onTranslateClick","reverse:click":"onReverse","dropdown-close:click":"onTranslatorDropdownClose","button-close:click":"onTranslatorButtonClose","hide:click":"onTranslatorHide","dropdown-change":"onTranslatorCloseDropdownClick"},defaults:{error:!1,"from-selected":"ru","from-default-selected":"ru",loading:!1,ponymode:!1,"to-selected":"en",translated:!1,"is-translator-visible":!1,promtLogoWithAdDropdown:i.PROMT_LOGO_WITH_AD_DROPDOWN},getText(){if(this.is("error"))return i18n("Попробовать ещё раз");if(this.is("translated"))return i18n("Оригинал");else return i18n("Перевести")},onReverse(){this.broadcast("reverse");var e=this.getTo(),t=this.getFrom();if(!i.DISABLE_AUTOMATED_TRANSLATE)this.set({"from-selected":e,"to-selected":t}),this.translate();else this.set({"from-selected":e,"to-selected":t,translated:!1})},onFromChange(e){var t=e.details;if(!i.DISABLE_AUTOMATED_TRANSLATE)this.set("from-selected",t.key),this.translate();else this.set({"from-selected":t.key,translated:!1})},onToChange(e){var t=e.details;if(!i.DISABLE_AUTOMATED_TRANSLATE)this.set("to-selected",t.key),this.translate();else this.set({translated:!1,"to-selected":t.key})},onTranslatorCloseDropdownClick(e){if(e.details.state)a().send("translator_close-dropdown_click")},onTranslatorButtonClose(){a().send("translator_close-button_click"),this.broadcast("close")},onTranslatorDropdownClose(){a().send("translator_close-dropdown_close_click"),this.broadcast("close")},onTranslatorHide(){a().send("translator_close-dropdown_hide_click"),this.broadcast("hide")},onTranslateClick(){if(!this.is("error"))if(this.is("translated"))this.showOriginal();else a().send("letter_manual_translate",{dwh:{disableAutomatedTranslate:i.DISABLE_AUTOMATED_TRANSLATE,letterId:this.get("letterId")}}),this.translate();else this.retry()},getTo(){return this.get("to-selected")},getEnableHideTranslator(){return i.ENABLE_HIDE_TRANSLATOR&&!this.get("is-translator-visible")},getFrom(){return this.get("from-selected")},retry(){this.broadcast("retry",{tolang:this.getTo(),fromlang:this.getFrom()})},showOriginal(){this.broadcast("original",{tolang:this.getTo(),fromlang:this.getFrom()})},translate(){var e=this.getTo(),t=this.getFrom();if(e&&t)this.broadcast("translate",{tolang:e,fromlang:t})},getPromtLogoHref:()=>i.PROMT_LOGO_HREF,didMount(){this.set("from-selected",this.get("from-default-selected")),this.set("to-selected",this.get("to-default-selected"))}}))},56934:function(e,t){"use strict";t.Z={display_mode:"gAcvN_c1t4iWLAJYQ1SlM",short_padding:"aTAS5KdpbXyncYpFeXSu-",middle_padding:"_2hm49I9FFgP8z8ZU7rWcrl",display_none:"_21PBNMJJQByYLRBKWFgTrK",not_single:"PYX2x2Y9DQJtpynuTDxr2",not_border:"_1MR0VsGEI_ZMntKazIIt57",next_prev:"_1Y3atN_TG7HeoIjcqPqcBu",read_letter:"_2NFZ6ld1bW3r51BcglLdff",back:"_3s9BW3cG2EDQ_ySBGAaZVY",hidden:"_3xeiH5OhjutFQPtKYKgyA7",space_after_more:"_1sghwH_uINT5R506Bp80xC",deselectButtonContainer:"_3vu8Kn6SYTyOTTkCOCBV-f"}},91044:function(e,t){"use strict";t.Z={block:"_2do3axVBzmQmuLd6aHClPf",LetterSwipeActions:"_3QXWm7rXRd5ppI0PF8B93E",rightBlock:"_3EcLHBwY49GuUe9wOSMue5",fastBlock:"_2hM7sf2_hYDteiZvJFFREQ",common:"_38B_Uk9C1EWxdJmr0vqPHl",remove:"MZcs_Gu85H-gL1D1YNWoT",archive:"_1X113C2HkLhV0kuqb4PsO3",settings:"_3zDpN_PKRNLeuyUuOBKZGw",unreadStatus:"_1mTTNQURuNxepEsU4dTsSp",settingsDark:"_1d5Pelmzhos18mvmY3Zxzx",element:"_3VDEhLR_WceIP1LJeJMBZB",textDanger:"_1fFXFBMlChQhwzfjYWLVfH",text:"_2wxDqGQ2HhUlUNSU0LWJQi",blockDanger:"_3-4EfCYsLtHNXpqNyRj7_j",unread:"_1HjBUZXt6snvoOCVX7Ta_S",unreadFill:"_29sIqWb3n6OMDBPbatrA4Y"}},99141:function(e,t){"use strict";t.Z={bellIcon:"_2BC9h-HzDLOHFW_e0qGwaZ",active:"_19-4F1HRAiXz8UPMcjfIGv",pimple:"_3YeaRM319UbriPAoOrzHho",dropdownContainer:"_1xOOk2igN8UDdp54getghd",wrapper:"_2W47Bd5NoQwT3R5vPfErPz",inWidget:"_2dhoNF5726nuiicVe7s9Co",link:"_2t77xkKF16RsxChg_On2En",linkWrapper:"_38_YMqMMxESiYeRGxgHrbJ",ponyMode:"_3abis1BWYbSbVRsOKVOBZx",linkSeeAll:"_2pUt4YIpTJAkdWnDxTYVAq",item:"_1JiOgaMmCzoMlb7kfruu0f",itemDark:"tv0gGyZ4vtY1sQiXFjVPs",itemLearnMore:"_2h_T2FIKAOKz5bcKAOY1GG",itemArrow:"NG1VaZv5CR_nwGQGrmOop",itemArrowDark:"_3g88cZ1nyMd2ZN_eVtrthK",itemContent:"_1hTrxO3EPjmh9sbb-SCzqm",itemLink:"_1mwU-o9PrmYmygri82D0LW",itemTitle:"_3WJ4a5i2Ltgmqophq0-UMN",itemText:"_15b3li2iVPWeR0MwiT03sJ",imageWrapper:"h58tG7PkYo6hehzjyWQnE",image:"_3glBkbn5WnP2xbyPAUlZ41"}},79624:function(e){e.exports={name:"svg",attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.65778 2.01825C9.8851 1.99131 10.1149 1.99131 10.3422 2.01825C10.6005 2.04886 10.8469 2.12394 11.1338 2.21137L11.1899 2.22847L15.2582 3.46535L15.3413 3.49037C15.645 3.58142 16.0115 3.69128 16.3007 3.92182C16.5505 4.12092 16.7444 4.37949 16.864 4.67299C17.0025 5.01285 17.001 5.38969 16.9998 5.70202L16.9995 5.78749V10.5661C16.9995 12.7625 15.768 14.4301 14.4563 15.5812C13.1428 16.7338 11.65 17.4604 10.8771 17.7927L10.8519 17.8036L10.8519 17.8036C10.7139 17.8632 10.5432 17.9369 10.3097 17.9751C10.1227 18.0057 9.87732 18.0057 9.69034 17.9751C9.45684 17.9369 9.28612 17.8632 9.1481 17.8036L9.12291 17.7927C8.35004 17.4604 6.85721 16.7338 5.54373 15.5812C4.23197 14.4301 3.00048 12.7625 3.00048 10.5661V5.78749L3.00025 5.70202C2.99898 5.38969 2.99746 5.01285 3.13599 4.67299C3.25562 4.37949 3.44952 4.12092 3.69928 3.92182C3.98849 3.69128 4.35498 3.58142 4.65875 3.49037L4.74183 3.46535L8.81006 2.22847L8.86623 2.21137C9.15315 2.12394 9.39954 2.04886 9.65778 2.01825ZM13.318 9.6308C13.7014 9.28287 13.7302 8.68997 13.3823 8.30654C13.0343 7.9231 12.4414 7.89432 12.058 8.24226L9.51725 10.5478L8.36285 9.35062C8.00345 8.97791 7.40996 8.96712 7.03724 9.32652C6.66453 9.68592 6.65374 10.2794 7.01314 10.6521L8.79886 12.504C9.15058 12.8687 9.72846 12.888 10.1037 12.5475L13.318 9.6308Z",fill:"#0DC268"}}]},e.exports.default=e.exports},79588:function(e){e.exports={name:"svg",attrs:{width:"95",height:"20",viewBox:"0 0 95 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"circle",attrs:{cx:"40",cy:"10",r:"9",fill:"#FFD2A8",stroke:"#303030","stroke-width":"2"}},{name:"circle",attrs:{cx:"51",cy:"10",r:"9",fill:"#A4DEFF",stroke:"#303030","stroke-width":"2"}},{name:"circle",attrs:{cx:"62",cy:"10",r:"9",fill:"#B3F0DD",stroke:"#303030","stroke-width":"2"}},{name:"circle",attrs:{cx:"73",cy:"10",r:"9",fill:"#FFB2DA",stroke:"#303030","stroke-width":"2"}},{name:"circle",attrs:{cx:"84",cy:"10",r:"9",fill:"#CEB3F0",stroke:"#303030","stroke-width":"2"}}]},e.exports.default=e.exports},75631:function(e){e.exports={name:"svg",attrs:{width:"95",height:"20",viewBox:"0 0 95 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"circle",attrs:{cx:"40",cy:"10",r:"9",fill:"#FFD2A8",stroke:"white","stroke-width":"2"}},{name:"circle",attrs:{cx:"51",cy:"10",r:"9",fill:"#A4DEFF",stroke:"white","stroke-width":"2"}},{name:"circle",attrs:{cx:"62",cy:"10",r:"9",fill:"#B3F0DD",stroke:"white","stroke-width":"2"}},{name:"circle",attrs:{cx:"73",cy:"10",r:"9",fill:"#FFB2DA",stroke:"white","stroke-width":"2"}},{name:"circle",attrs:{cx:"84",cy:"10",r:"9",fill:"#CEB3F0",stroke:"white","stroke-width":"2"}}]},e.exports.default=e.exports},51443:function(e){e.exports={name:"svg",attrs:{width:"100",height:"100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M57.5 69c8.46 0 12.69 0 15.495-2.396.398-.34.769-.711 1.11-1.11C76.5 62.69 76.5 58.46 76.5 50c0-8.46 0-12.69-2.396-15.495-.34-.398-.711-.769-1.11-1.11C70.19 31 65.96 31 57.5 31h-7l-.827-1.655c-.878-1.755-1.317-2.633-1.866-3.362a10 10 0 0 0-6.177-3.818C40.732 22 39.75 22 37.788 22c-3.058 0-4.586 0-5.842.331a10 10 0 0 0-7.115 7.115C24.5 30.702 24.5 33.943 24.5 37",stroke:"#fff","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"}},{name:"path",attrs:{d:"M70.857 50.943c-2.086-6.675-3.129-10.013-5.72-11.95a9.951 9.951 0 0 0-.133-.099C62.383 37 58.886 37 51.892 37H36.508c-8.295 0-12.442 0-14.785 2.345a7.997 7.997 0 0 0-1.427 1.94c-1.54 2.937-.302 6.895 2.172 14.812 1.767 5.657 2.651 8.485 4.669 10.313.506.458 1.057.864 1.645 1.21C31.129 69 34.092 69 40.018 69h17.564",stroke:"#fff","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"}}]},e.exports.default=e.exports},2440:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},childs:[{name:"rect",attrs:{width:"48",height:"38",x:"26",y:"39",stroke:"#fff","stroke-width":"3",rx:"8"}},{name:"path",attrs:{stroke:"#fff","stroke-width":"3",d:"M60 39V28c0-6.075-4.925-11-11-11s-11 4.925-11 11v11"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M50.408 59.98a4 4 0 1 0-.816 0l-1.13 2.712c-.344.825-.516 1.237-.428 1.565a1 1 0 0 0 .357.536C48.66 65 49.107 65 50 65s1.34 0 1.61-.207a1 1 0 0 0 .356-.536c.088-.328-.084-.74-.428-1.565l-1.13-2.713Z","clip-rule":"evenodd"}},{name:"path",attrs:{fill:"#fff",d:"m50.408 59.98-.1-.995-1.341.135.518 1.244.923-.385Zm-.816 0 .923.384.518-1.244-1.34-.136-.101.995Zm-1.13 2.712.923.385-.923-.385Zm-.428 1.565L49 64l-.966.257Zm.357.536L49 64l-.61.793Zm3.218 0L51 64l.61.793Zm.357-.536L51 64l.966.257Zm-.428-1.565-.923.385.923-.385ZM53 56a3 3 0 0 1-2.693 2.984l.202 1.99A5 5 0 0 0 55 56h-2Zm-3-3a3 3 0 0 1 3 3h2a5 5 0 0 0-5-5v2Zm-3 3a3 3 0 0 1 3-3v-2a5 5 0 0 0-5 5h2Zm2.693 2.984A3 3 0 0 1 47 56h-2a5 5 0 0 0 4.491 4.974l.202-1.99Zm-.308 4.093 1.13-2.713-1.846-.77-1.13 2.714 1.846.769ZM49 64c.028.104-.013.135.043-.049.057-.188.162-.442.342-.874l-1.846-.77c-.164.393-.317.757-.41 1.064-.094.31-.177.711-.062 1.144L49 64Zm0 0-1.933.515a2 2 0 0 0 .714 1.07L49 64Zm1 0c-.468 0-.743-.001-.938-.02-.192-.02-.148-.046-.062.02l-1.219 1.586c.355.273.758.35 1.08.383.32.032.714.031 1.139.031v-2Zm1 0c.086-.066.13-.04-.062-.02-.195.019-.47.02-.938.02v2c.425 0 .82.001 1.139-.03.322-.033.724-.111 1.08-.384L51 64Zm0 0 1.219 1.586a2 2 0 0 0 .714-1.071L51 64Zm-.385-.923c.18.432.285.687.342.874.056.184.015.153.043.049l1.933.515c.115-.433.032-.834-.062-1.144-.093-.307-.246-.67-.41-1.063l-1.846.769Zm-1.13-2.713 1.13 2.713 1.846-.77-1.13-2.712-1.846.77Z"}}]},e.exports.default=e.exports},25905:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},childs:[{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M47 25.5c-11.874 0-21.5 9.626-21.5 21.5S35.126 68.5 47 68.5 68.5 58.874 68.5 47 58.874 25.5 47 25.5ZM22.5 47c0-13.531 10.969-24.5 24.5-24.5S71.5 33.469 71.5 47 60.531 71.5 47 71.5 22.5 60.531 22.5 47Z","clip-rule":"evenodd"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M62.94 62.94a1.5 1.5 0 0 1 2.12 0l12 12a1.5 1.5 0 0 1-2.12 2.12l-12-12a1.5 1.5 0 0 1 0-2.12ZM39.44 39.94a1.5 1.5 0 0 1 2.12 0l12 12a1.5 1.5 0 0 1-2.12 2.12l-12-12a1.5 1.5 0 0 1 0-2.12Z","clip-rule":"evenodd"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M53.56 39.94a1.5 1.5 0 0 0-2.12 0l-12 12a1.5 1.5 0 0 0 2.12 2.12l12-12a1.5 1.5 0 0 0 0-2.12Z","clip-rule":"evenodd"}}]},e.exports.default=e.exports},10164:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},childs:[{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M47 25.5c-11.874 0-21.5 9.626-21.5 21.5S35.126 68.5 47 68.5 68.5 58.874 68.5 47 58.874 25.5 47 25.5ZM22.5 47c0-13.531 10.969-24.5 24.5-24.5S71.5 33.469 71.5 47 60.531 71.5 47 71.5 22.5 60.531 22.5 47Z","clip-rule":"evenodd"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M62.94 62.94a1.5 1.5 0 0 1 2.12 0l12 12a1.5 1.5 0 0 1-2.12 2.12l-12-12a1.5 1.5 0 0 1 0-2.12ZM39.44 39.94a1.5 1.5 0 0 1 2.12 0l12 12a1.5 1.5 0 0 1-2.12 2.12l-12-12a1.5 1.5 0 0 1 0-2.12Z","clip-rule":"evenodd"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M53.56 39.94a1.5 1.5 0 0 0-2.12 0l-12 12a1.5 1.5 0 0 0 2.12 2.12l12-12a1.5 1.5 0 0 0 0-2.12Z","clip-rule":"evenodd"}}]},e.exports.default=e.exports},82778:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},childs:[{name:"rect",attrs:{width:"52",height:"38",x:"24",y:"31",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",rx:"10"}},{name:"path",attrs:{stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"m26 35 9.858 9.858c6.667 6.667 10 10 14.142 10 4.142 0 7.475-3.333 14.142-10L74 35"}}]},e.exports.default=e.exports},79123:function(e){e.exports={name:"svg",attrs:{width:"100",height:"100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M57.5 69c8.46 0 12.69 0 15.495-2.396.398-.34.769-.711 1.11-1.11C76.5 62.69 76.5 58.46 76.5 50c0-8.46 0-12.69-2.396-15.495-.34-.398-.711-.769-1.11-1.11C70.19 31 65.96 31 57.5 31h-7l-.827-1.655c-.878-1.755-1.317-2.633-1.866-3.362a10 10 0 0 0-6.177-3.818C40.732 22 39.75 22 37.788 22c-3.058 0-4.586 0-5.842.331a10 10 0 0 0-7.115 7.115C24.5 30.702 24.5 33.943 24.5 37",stroke:"#fff","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"}},{name:"path",attrs:{d:"M70.857 50.943c-2.086-6.675-3.129-10.013-5.72-11.95a9.951 9.951 0 0 0-.133-.099C62.383 37 58.886 37 51.892 37H36.508c-8.295 0-12.442 0-14.785 2.345a7.997 7.997 0 0 0-1.427 1.94c-1.54 2.937-.302 6.895 2.172 14.812 1.767 5.657 2.651 8.485 4.669 10.313.506.458 1.057.864 1.645 1.21C31.129 69 34.092 69 40.018 69h17.564",stroke:"#fff","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"}}]},e.exports.default=e.exports},78331:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},childs:[{name:"path",attrs:{stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M63.215 38.353h-13.07s3.036-3.523 4.316-8.32c1.363-5.112-.38-8.099-2.397-9.063-1.248-.597-2.228.093-2.358 1.363-.77 4.242-3.457 8.173-5.787 10.772-1.393 1.555-2.717 3.194-3.624 5.074l-5.456 11.31H31v18.497h3.84c8.835 4.454 16.7 4.581 22.267 3.335 4.79-1.073 7.573-5.634 8.58-10.541l3.085-15.038c1.379-7.39-3.87-7.39-5.557-7.39Z"}}]},e.exports.default=e.exports},37945:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"none"},childs:[{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M28.72 31.526a1.5 1.5 0 0 1 1.754 1.193l6.76 35.497A6.5 6.5 0 0 0 43.62 73.5h12.76a6.5 6.5 0 0 0 6.385-5.284l6.761-35.497a1.5 1.5 0 1 1 2.948.562l-6.762 35.497A9.5 9.5 0 0 1 56.38 76.5H43.62a9.5 9.5 0 0 1-9.332-7.722L27.527 33.28a1.5 1.5 0 0 1 1.192-1.755Z","clip-rule":"evenodd"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M54 42.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3ZM49.5 44a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM54 19.5a1.5 1.5 0 0 1 1.37.888l.46 1.03a14.737 14.737 0 0 0 4.118 5.42 1.5 1.5 0 0 1 0 2.324 14.74 14.74 0 0 0-4.118 5.42l-.46 1.03a1.5 1.5 0 0 1-2.74 0l-.46-1.03a14.738 14.738 0 0 0-4.118-5.42 1.5 1.5 0 0 1 0-2.324 14.737 14.737 0 0 0 4.118-5.42l.46-1.03A1.5 1.5 0 0 1 54 19.5Zm0 4.912A17.724 17.724 0 0 1 51.234 28 17.723 17.723 0 0 1 54 31.588 17.727 17.727 0 0 1 56.766 28 17.724 17.724 0 0 1 54 24.412ZM42 29.5a1.5 1.5 0 0 1 1.365.879l.369.81a11.286 11.286 0 0 0 3.204 4.14 1.5 1.5 0 0 1 0 2.341 11.286 11.286 0 0 0-3.204 4.141l-.369.81a1.5 1.5 0 0 1-2.73 0l-.369-.81a11.286 11.286 0 0 0-3.204-4.14 1.5 1.5 0 0 1 0-2.341 11.286 11.286 0 0 0 3.204-4.141l.369-.81A1.5 1.5 0 0 1 42 29.5Zm0 4.762a14.27 14.27 0 0 1-1.774 2.238A14.27 14.27 0 0 1 42 38.738a14.275 14.275 0 0 1 1.774-2.238A14.275 14.275 0 0 1 42 34.262Z","clip-rule":"evenodd"}}]},e.exports.default=e.exports},99551:function(e){e.exports={name:"svg",attrs:{width:"125",height:"14",viewBox:"0 0 125 14",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M0 7.90923H1.04166C1.14583 8.62516 1.66666 9.23881 2.81249 9.23881C3.95832 9.23881 4.37499 8.62516 4.37499 8.0115C4.37499 7.39785 3.95832 7.09102 3.22916 6.98875L2.29166 6.88647C1.14583 6.7842 0.208331 6.27282 0.208331 5.04551C0.208331 3.8182 1.25 3 2.70833 3C4.16665 3 5.10415 3.71593 5.20832 5.04551H4.16665C4.06249 4.43186 3.64582 3.92048 2.60416 3.92048C1.66666 3.92048 1.14583 4.32958 1.14583 4.94324C1.14583 5.55689 1.77083 5.86372 2.49999 5.86372L3.33332 5.96599C4.47915 6.06827 5.31248 6.57965 5.31248 7.90923C5.31248 9.23881 4.16665 10.057 2.70833 10.057C1.14583 10.1593 0.104166 9.23881 0 7.90923Z"}},{name:"path",attrs:{d:"M7.18733 7.80686C7.29149 8.82961 7.91649 9.23872 8.74982 9.23872C9.47899 9.23872 9.89565 8.82961 10.104 8.42051H11.0415C10.8332 9.44327 9.99982 10.1592 8.74982 10.1592C7.18733 10.1592 6.24983 9.03416 6.24983 7.60231C6.24983 6.17045 7.18733 4.94314 8.74982 4.94314C10.2082 4.94314 11.1456 5.9659 11.1456 7.1932V7.80686H7.18733ZM10.104 7.09093C10.104 6.375 9.58316 5.86362 8.64566 5.86362C7.91649 5.86362 7.29149 6.27272 7.18733 7.09093H10.104Z"}},{name:"path",attrs:{d:"M11.6669 7.60215C11.6669 6.06802 12.7085 5.04526 14.1669 5.04526C15.4169 5.04526 16.2502 5.76119 16.4585 6.78395H15.521C15.3127 6.27257 14.896 5.86347 14.1669 5.86347C13.3335 5.86347 12.6044 6.47712 12.6044 7.60215C12.6044 8.72718 13.3335 9.34084 14.1669 9.34084C14.896 9.34084 15.3127 9.03401 15.521 8.42036H16.5627C16.3543 9.54539 15.521 10.2613 14.271 10.2613C12.7085 10.159 11.6669 9.03401 11.6669 7.60215Z"}},{name:"path",attrs:{d:"M17.187 8.21596V5.04542H18.1245V7.90913C18.1245 8.72734 18.5412 9.13644 19.3745 9.13644C20.2078 9.13644 20.7287 8.52279 20.7287 7.60231V4.94314H21.6662V9.85237H20.7287V9.23872H20.6245C20.4162 9.64782 19.8953 9.95464 19.1662 9.95464C17.9162 10.1592 17.187 9.44327 17.187 8.21596Z"}},{name:"path",attrs:{d:"M22.7077 5.14754H23.6452V5.76119H23.8536C24.0619 5.35209 24.4786 5.04526 25.1036 5.04526H25.7286V5.96574H24.8952C24.0619 5.96574 23.6452 6.5794 23.6452 7.49988V10.159H22.7077V5.14754Z"}},{name:"path",attrs:{d:"M30.8331 7.80686H26.8748C26.979 8.82961 27.604 9.23872 28.4373 9.23872C29.1665 9.23872 29.5831 8.82961 29.7915 8.42051H30.729C30.5206 9.44327 29.6873 10.1592 28.4373 10.1592C26.8748 10.1592 25.9373 9.03416 25.9373 7.60231C25.9373 6.17045 26.8748 4.94314 28.4373 4.94314C29.8956 4.94314 30.8331 5.9659 30.8331 7.1932V7.80686ZM29.7915 7.09093C29.7915 6.375 29.2706 5.86362 28.3331 5.86362C27.604 5.86362 26.979 6.27272 26.8748 7.09093H29.7915Z"}},{name:"path",attrs:{d:"M31.3538 7.60252C31.3538 5.76156 32.6038 4.94336 33.7496 4.94336C34.3746 4.94336 34.9996 5.14791 35.4163 5.76156V3.20467H36.3538V10.0571H35.4163V9.34121H35.3121C34.8954 9.95486 34.2704 10.1594 33.6454 10.1594C32.6038 10.1594 31.3538 9.34121 31.3538 7.60252ZM35.5204 7.60252C35.5204 6.47749 34.7913 5.86384 33.9579 5.86384C33.2288 5.86384 32.3954 6.37521 32.3954 7.60252C32.3954 8.82983 33.2288 9.34121 33.9579 9.34121C34.6871 9.23893 35.5204 8.72755 35.5204 7.60252Z"}},{name:"path",attrs:{d:"M40.8333 9.34121H40.7292V10.0571H39.7917V3.20467H40.7292V5.76156C41.1458 5.25018 41.7708 4.94336 42.3958 4.94336C43.5417 4.94336 44.7916 5.76156 44.7916 7.60252C44.7916 9.34121 43.6458 10.1594 42.5 10.1594C41.875 10.1594 41.1458 9.95486 40.8333 9.34121ZM43.75 7.60252C43.75 6.37521 42.9167 5.86384 42.1875 5.86384C41.4583 5.86384 40.625 6.37521 40.625 7.60252C40.625 8.82983 41.3542 9.34121 42.1875 9.34121C42.9167 9.23893 43.75 8.72755 43.75 7.60252Z"}},{name:"path",attrs:{d:"M45.8333 12L47.0833 9.44311L45 5.04526H46.0417L47.2917 7.70443C47.3958 7.90898 47.5 8.11353 47.5 8.31808H47.6042C47.7083 8.11353 47.7083 7.90898 47.8125 7.70443L48.9583 5.04526H50L46.7708 11.8977H45.8333V12Z"}},{name:"path",attrs:{d:"M86.5702 7C86.5702 9.76543 84.9174 11.0617 82.9339 11.0617H81.6942V9.41975H82.8512C84.0909 9.41975 84.9174 8.7284 84.9174 7C84.9174 5.27161 84.1736 4.40741 82.8512 4.40741C81.6116 4.40741 80.7025 5.18519 80.7025 6.91358V13.9136H79.0496V2.93827H80.7025V3.88889H80.9504C81.5289 3.11111 82.3554 2.76543 83.1818 2.76543C85 2.76543 86.5702 4.14815 86.5702 7ZM75.4132 6.30864L74.2562 6.22222C73.3471 6.1358 72.9339 5.87654 72.9339 5.35802C72.9339 4.75309 73.5124 4.32099 74.4215 4.32099C75.3306 4.32099 75.9091 4.75309 75.9091 5.35802H77.562C77.4793 3.80247 76.3223 2.76543 74.4215 2.76543C72.5207 2.76543 71.281 3.80247 71.281 5.35802C71.281 6.65432 72.0248 7.4321 73.843 7.69136L75 7.77778C75.6612 7.8642 76.157 8.03704 76.157 8.7284C76.157 9.33333 75.7438 9.76543 74.5868 9.76543C73.5124 9.76543 73.0165 9.24691 72.8512 8.55556H71.1157C71.281 10.1111 72.5207 11.2346 74.6694 11.2346C76.6529 11.2346 77.9752 10.1111 77.9752 8.55556C77.8099 7.17284 76.9008 6.39506 75.4132 6.30864ZM93.0992 8.55556C92.8512 9.16049 92.1901 9.67901 91.281 9.67901C90.0413 9.67901 89.1322 8.81482 89.1322 7C89.1322 5.27161 89.9587 4.32099 91.281 4.32099C92.438 4.32099 93.0992 5.09877 93.1818 6.1358H90.124V7.4321H94.8347V6.5679C94.8347 4.23457 93.3471 2.67901 91.281 2.67901C89.2975 2.67901 87.3967 4.06173 87.3967 6.91358C87.3967 9.76543 89.2975 11.1481 91.281 11.1481C93.0992 11.1481 94.3388 10.0247 94.7521 8.46914H93.0992V8.55556ZM66.4876 2.76543C64.6694 2.76543 63.2645 3.80247 63.0992 5.35802H64.9174C65.0826 4.75309 65.5785 4.32099 66.4876 4.32099C67.7273 4.32099 68.1405 5.01235 68.1405 5.79012V8.55556C67.4793 9.41975 66.6529 9.76543 65.8264 9.76543C65 9.76543 64.4215 9.33333 64.4215 8.55556C64.4215 7.8642 64.8347 7.34568 65.7438 7.34568H67.0661V6.04938H65.6612C63.7603 6.04938 62.6859 7.08642 62.6859 8.64197C62.6859 10.1111 63.7603 11.1481 65.4959 11.1481C66.4876 11.1481 67.314 10.7161 67.9752 10.284H68.2231V10.9753H69.876V5.53086C69.7934 3.62963 68.4711 2.76543 66.4876 2.76543ZM55 11.0617H56.6529V0H55V11.0617ZM62.1074 2.93827H60.0413L57.562 6.30864V7.34568L60.124 11.0617H62.1901L59.2149 6.82716L62.1074 2.93827ZM123.182 2.93827L121.777 6.1358C121.446 6.91358 121.116 7.69136 121.033 8.20988H120.785C120.702 7.69136 120.372 7 120.041 6.22222L118.636 3.02469H116.736L119.959 10.284L118.388 14H120.207L125 3.02469H123.182V2.93827ZM116.405 2.93827H114.339L111.86 6.30864V7.34568L114.421 11.0617H116.488L113.512 6.82716L116.405 2.93827ZM105.826 6.30864L104.669 6.22222C103.76 6.1358 103.347 5.87654 103.347 5.35802C103.347 4.75309 103.926 4.32099 104.835 4.32099C105.744 4.32099 106.322 4.75309 106.322 5.35802H107.975C107.893 3.80247 106.736 2.76543 104.835 2.76543C102.934 2.76543 101.694 3.80247 101.694 5.35802C101.694 6.65432 102.438 7.4321 104.256 7.69136L105.413 7.77778C106.074 7.8642 106.57 8.03704 106.57 8.7284C106.57 9.33333 106.157 9.76543 105 9.76543C103.926 9.76543 103.43 9.24691 103.264 8.55556H101.529C101.694 10.1111 102.934 11.2346 105.083 11.2346C107.066 11.2346 108.388 10.1111 108.388 8.55556C108.223 7.17284 107.314 6.39506 105.826 6.30864ZM109.298 11.0617H110.95V0H109.298V11.0617ZM98.1405 3.88889H97.8926V2.93827H96.2397V11.0617H97.8926V6.82716C97.8926 5.35802 98.5537 4.49383 99.7934 4.49383H100.868V2.67901H100.207C99.1322 2.76543 98.6364 3.19753 98.1405 3.88889Z"}}]},e.exports.default=e.exports},73600:function(e){e.exports={name:"svg",attrs:{width:"127",height:"14",viewBox:"0 0 127 14",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M0 8.19231H1.21186C1.32203 9 1.87288 9.69231 2.97458 9.69231C3.9661 9.69231 4.62712 9.23077 4.62712 8.42308C4.62712 7.73077 4.18644 7.38461 3.41526 7.38461H2.09322V6.23077H3.30508C4.07627 6.23077 4.51695 5.76923 4.51695 5.19231C4.51695 4.5 3.9661 4.15385 2.97458 4.15385C1.98305 4.15385 1.32203 4.73077 1.21186 5.53846H0C0.220339 3.92308 1.32203 3 2.97458 3C4.73729 3 5.61865 3.80769 5.61865 5.07692C5.61865 5.88461 5.17797 6.46154 4.51695 6.69231V6.92308C5.17797 7.15385 5.61865 7.61538 5.61865 8.53846C5.61865 9.92308 4.51695 10.9615 2.75424 10.9615C1.21186 10.8462 0.110169 9.80769 0 8.19231Z"}},{name:"path",attrs:{d:"M11.3474 7.15389V10.6154H10.1356V10.1539H9.91525C9.58474 10.5 9.03389 10.7308 8.48305 10.7308C7.38135 10.7308 6.72034 10.0385 6.72034 9.11543C6.72034 8.07696 7.38135 7.50004 8.59321 7.50004H10.1356V7.15389C10.1356 6.57697 9.80508 6.23081 9.14406 6.23081C8.48304 6.23081 8.15254 6.46158 8.15254 6.92312H6.94067C7.05084 5.88466 7.9322 5.07697 9.25423 5.07697C10.4661 5.30773 11.3474 5.88466 11.3474 7.15389ZM10.1356 9.11543V8.42312H8.70338C8.15254 8.42312 7.9322 8.65389 7.9322 9.11543C7.9322 9.57696 8.26271 9.80773 8.81355 9.80773C9.25423 9.80773 9.80508 9.57696 10.1356 9.11543Z"}},{name:"path",attrs:{d:"M12.3389 5.4231H13.5508V9.57694H15.3135V5.4231H16.5254V9.57694H18.2881V5.4231H19.4999V9.57694H20.3813V12H19.2796V10.7308H12.4491V5.4231H12.3389Z"}},{name:"path",attrs:{d:"M20.9322 5.4231H22.1441V9.23079H22.3644C22.4746 9.00002 22.5848 8.76925 22.5848 8.53848L24.2373 5.4231H25.7797V10.7308H24.5678V7.03848H24.4576C24.4576 7.15386 24.3475 7.38463 24.2373 7.6154L22.5848 10.7308H21.0424V5.4231H20.9322Z"}},{name:"path",attrs:{d:"M26.7712 5.4231H27.9831V9.57694H29.7458V5.4231H30.9577V9.57694H32.7204V5.4231H33.8221V9.57694H34.7034V12H33.6017V10.7308H26.7712V5.4231Z"}},{name:"path",attrs:{d:"M35.144 8.07697C35.144 6.46159 36.1356 5.30774 37.6779 5.30774C39.1101 5.30774 40.1017 6.3462 40.1017 7.73082V8.30774H36.3559C36.4661 9.23081 37.0169 9.69235 37.6779 9.69235C38.339 9.69235 38.6695 9.3462 38.8898 9.00005H40.1017C39.8813 10.0385 39 10.8462 37.7881 10.8462C36.1356 10.8462 35.144 9.69235 35.144 8.07697ZM39 7.50005C39 6.80774 38.5593 6.3462 37.6779 6.3462C37.0169 6.3462 36.4661 6.80774 36.3559 7.50005H39Z"}},{name:"path",attrs:{d:"M41.0933 5.4231H42.3052V7.38463H44.6187V5.4231H45.8306V10.7308H44.6187V8.53848H42.3052V10.7308H41.0933V5.4231Z"}},{name:"path",attrs:{d:"M46.7119 8.07697C46.7119 6.57697 47.7034 5.30774 49.356 5.30774C51.0085 5.30774 52 6.57697 52 8.07697C52 9.57697 51.0085 10.8462 49.356 10.8462C47.7034 10.8462 46.7119 9.57697 46.7119 8.07697ZM50.678 8.07697C50.678 7.03851 50.017 6.46158 49.2458 6.46158C48.4746 6.46158 47.8136 7.03851 47.8136 8.07697C47.8136 9.11543 48.4746 9.69235 49.2458 9.69235C50.017 9.69235 50.678 9.11543 50.678 8.07697Z"}},{name:"path",attrs:{d:"M88.5702 7C88.5702 9.76543 86.9174 11.0617 84.9339 11.0617H83.6942V9.41975H84.8512C86.0909 9.41975 86.9174 8.7284 86.9174 7C86.9174 5.27161 86.1736 4.40741 84.8512 4.40741C83.6116 4.40741 82.7025 5.18519 82.7025 6.91358V13.9136H81.0496V2.93827H82.7025V3.88889H82.9504C83.5289 3.11111 84.3554 2.76543 85.1818 2.76543C87 2.76543 88.5702 4.14815 88.5702 7ZM77.4132 6.30864L76.2562 6.22222C75.3471 6.1358 74.9339 5.87654 74.9339 5.35802C74.9339 4.75309 75.5124 4.32099 76.4215 4.32099C77.3306 4.32099 77.9091 4.75309 77.9091 5.35802H79.562C79.4793 3.80247 78.3223 2.76543 76.4215 2.76543C74.5207 2.76543 73.281 3.80247 73.281 5.35802C73.281 6.65432 74.0248 7.4321 75.843 7.69136L77 7.77778C77.6612 7.8642 78.157 8.03704 78.157 8.7284C78.157 9.33333 77.7438 9.76543 76.5868 9.76543C75.5124 9.76543 75.0165 9.24691 74.8512 8.55556H73.1157C73.281 10.1111 74.5207 11.2346 76.6694 11.2346C78.6529 11.2346 79.9752 10.1111 79.9752 8.55556C79.8099 7.17284 78.9008 6.39506 77.4132 6.30864ZM95.0992 8.55556C94.8512 9.16049 94.1901 9.67901 93.281 9.67901C92.0413 9.67901 91.1322 8.81482 91.1322 7C91.1322 5.27161 91.9587 4.32099 93.281 4.32099C94.438 4.32099 95.0992 5.09877 95.1818 6.1358H92.124V7.4321H96.8347V6.5679C96.8347 4.23457 95.3471 2.67901 93.281 2.67901C91.2975 2.67901 89.3967 4.06173 89.3967 6.91358C89.3967 9.76543 91.2975 11.1481 93.281 11.1481C95.0992 11.1481 96.3388 10.0247 96.7521 8.46914H95.0992V8.55556ZM68.4876 2.76543C66.6694 2.76543 65.2645 3.80247 65.0992 5.35802H66.9174C67.0826 4.75309 67.5785 4.32099 68.4876 4.32099C69.7273 4.32099 70.1405 5.01235 70.1405 5.79012V8.55556C69.4793 9.41975 68.6529 9.76543 67.8264 9.76543C67 9.76543 66.4215 9.33333 66.4215 8.55556C66.4215 7.8642 66.8347 7.34568 67.7438 7.34568H69.0661V6.04938H67.6612C65.7603 6.04938 64.6859 7.08642 64.6859 8.64197C64.6859 10.1111 65.7603 11.1481 67.4959 11.1481C68.4876 11.1481 69.314 10.7161 69.9752 10.284H70.2231V10.9753H71.876V5.53086C71.7934 3.62963 70.4711 2.76543 68.4876 2.76543ZM57 11.0617H58.6529V0H57V11.0617ZM64.1074 2.93827H62.0413L59.562 6.30864V7.34568L62.124 11.0617H64.1901L61.2149 6.82716L64.1074 2.93827ZM125.182 2.93827L123.777 6.1358C123.446 6.91358 123.116 7.69136 123.033 8.20988H122.785C122.702 7.69136 122.372 7 122.041 6.22222L120.636 3.02469H118.736L121.959 10.284L120.388 14H122.207L127 3.02469H125.182V2.93827ZM118.405 2.93827H116.339L113.86 6.30864V7.34568L116.421 11.0617H118.488L115.512 6.82716L118.405 2.93827ZM107.826 6.30864L106.669 6.22222C105.76 6.1358 105.347 5.87654 105.347 5.35802C105.347 4.75309 105.926 4.32099 106.835 4.32099C107.744 4.32099 108.322 4.75309 108.322 5.35802H109.975C109.893 3.80247 108.736 2.76543 106.835 2.76543C104.934 2.76543 103.694 3.80247 103.694 5.35802C103.694 6.65432 104.438 7.4321 106.256 7.69136L107.413 7.77778C108.074 7.8642 108.57 8.03704 108.57 8.7284C108.57 9.33333 108.157 9.76543 107 9.76543C105.926 9.76543 105.43 9.24691 105.264 8.55556H103.529C103.694 10.1111 104.934 11.2346 107.083 11.2346C109.066 11.2346 110.388 10.1111 110.388 8.55556C110.223 7.17284 109.314 6.39506 107.826 6.30864ZM111.298 11.0617H112.95V0H111.298V11.0617ZM100.14 3.88889H99.8926V2.93827H98.2397V11.0617H99.8926V6.82716C99.8926 5.35802 100.554 4.49383 101.793 4.49383H102.868V2.67901H102.207C101.132 2.76543 100.636 3.19753 100.14 3.88889Z"}}]},e.exports.default=e.exports},19508:function(e){e.exports={name:"svg",attrs:{width:"88",height:"40",viewBox:"0 0 88 40",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M24.8765 11.8181H25.7029C25.7856 12.3967 26.1988 12.8925 27.1079 12.8925C28.017 12.8925 28.3475 12.3967 28.3475 11.9008C28.3475 11.4049 28.017 11.157 27.4384 11.0743L26.6946 10.9917C25.7856 10.909 25.0418 10.4958 25.0418 9.50409C25.0418 8.51235 25.8682 7.8512 27.0252 7.8512C28.1823 7.8512 28.926 8.42971 29.0087 9.50409H28.1822C28.0996 9.00822 27.769 8.595 26.9426 8.595C26.1988 8.595 25.7856 8.92558 25.7856 9.42144C25.7856 9.91731 26.2814 10.1652 26.8599 10.1652L27.5211 10.2479C28.4302 10.3305 29.0913 10.7438 29.0913 11.8181C29.0913 12.8925 28.1823 13.5537 27.0252 13.5537C25.7856 13.6363 24.9591 12.8925 24.8765 11.8181Z"}},{name:"path",attrs:{d:"M33.6366 11.7356H30.5788C30.6614 12.562 31.1573 12.8926 31.8184 12.8926C32.3969 12.8926 32.7275 12.562 32.8928 12.2314H33.6366C33.4713 13.0579 32.8102 13.6364 31.8184 13.6364C30.5788 13.6364 29.835 12.7273 29.835 11.5703C29.835 10.4132 30.5788 9.42151 31.8184 9.42151C32.9755 9.42151 33.7193 10.248 33.7193 11.2397V11.7356H33.6366ZM32.8928 11.157C32.8928 10.5785 32.4796 10.1653 31.7358 10.1653C31.1573 10.1653 30.6614 10.4959 30.5788 11.157H32.8928Z"}},{name:"path",attrs:{d:"M34.1328 11.5703C34.1328 10.3306 34.9593 9.50415 36.1163 9.50415C37.108 9.50415 37.7692 10.0827 37.9345 10.9091H37.1907C37.0254 10.4959 36.6948 10.1653 36.1163 10.1653C35.4551 10.1653 34.8766 10.6612 34.8766 11.5703C34.8766 12.4794 35.4551 12.9752 36.1163 12.9752C36.6948 12.9752 37.0254 12.7273 37.1907 12.2314H38.0171C37.8518 13.1405 37.1907 13.719 36.1989 13.719C34.9593 13.6364 34.1328 12.7273 34.1328 11.5703Z"}},{name:"path",attrs:{d:"M38.5127 12.0661V9.50415H39.2565V11.8182C39.2565 12.4794 39.5871 12.8099 40.2482 12.8099C40.9094 12.8099 41.3226 12.3141 41.3226 11.5703V9.42151H42.0664V13.3885H41.3226V12.8926H41.24C41.0747 13.2232 40.6615 13.4711 40.0829 13.4711C39.0912 13.6364 38.5127 13.0579 38.5127 12.0661Z"}},{name:"path",attrs:{d:"M42.8926 13.5537V9.5868H43.6364V10.0827H43.8017C43.967 9.75208 44.2975 9.50415 44.7934 9.50415H45.2893V10.248H44.6281C43.967 10.248 43.6364 10.7438 43.6364 11.4876V13.6364H42.8926V13.5537Z"}},{name:"path",attrs:{d:"M49.3394 11.7356H46.1989C46.2815 12.562 46.7774 12.8926 47.4386 12.8926C48.0171 12.8926 48.3476 12.562 48.5129 12.2314H49.2567C49.0914 13.0579 48.4303 13.6364 47.4386 13.6364C46.1989 13.6364 45.4551 12.7273 45.4551 11.5703C45.4551 10.4132 46.1989 9.42151 47.4386 9.42151C48.5956 9.42151 49.3394 10.248 49.3394 11.2397V11.7356V11.7356ZM48.5129 11.157C48.5129 10.5785 48.0997 10.1653 47.3559 10.1653C46.7774 10.1653 46.2815 10.4959 46.1989 11.157H48.5129Z"}},{name:"path",attrs:{d:"M49.7524 11.5702C49.7524 10.0826 50.7442 9.42144 51.6533 9.42144C52.1491 9.42144 52.645 9.58673 52.9756 10.0826V8.01648H53.7194V13.5537H52.9756V12.9752H52.8929C52.5624 13.471 52.0665 13.6363 51.5706 13.6363C50.7442 13.6363 49.7524 12.9752 49.7524 11.5702ZM53.0582 11.5702C53.0582 10.6611 52.4797 10.1652 51.8186 10.1652C51.24 10.1652 50.5789 10.5785 50.5789 11.5702C50.5789 12.5619 51.24 12.9752 51.8186 12.9752C52.3971 12.8925 53.0582 12.4793 53.0582 11.5702Z"}},{name:"path",attrs:{d:"M57.2732 12.9752H57.1906V13.5537H56.4468V8.01648H57.1906V10.0826C57.5212 9.66937 58.017 9.42144 58.5129 9.42144C59.422 9.42144 60.4137 10.0826 60.4137 11.5702C60.4137 12.9752 59.5046 13.6363 58.5955 13.6363C58.0997 13.6363 57.5212 13.471 57.2732 12.9752ZM59.5873 11.5702C59.5873 10.5785 58.9261 10.1652 58.3476 10.1652C57.7691 10.1652 57.1079 10.5785 57.1079 11.5702C57.1079 12.5619 57.6864 12.9752 58.3476 12.9752C58.9261 12.8925 59.5873 12.4793 59.5873 11.5702Z"}},{name:"path",attrs:{d:"M61.2403 15.124L62.232 13.0579L60.5791 9.50415H61.4055L62.3973 11.6529C62.4799 11.8182 62.5626 11.9835 62.5626 12.1488H62.6452C62.7279 11.9835 62.7279 11.8182 62.8105 11.6529L63.7196 9.50415H64.546L61.9841 15.0413H61.2403V15.124Z"}},{name:"path",attrs:{d:"M41.0746 25.785C41.0746 28.4297 39.4217 29.6693 37.4383 29.6693H36.1986V28.0991H37.3556C38.5953 28.0991 39.4217 27.4379 39.4217 25.785C39.4217 24.1321 38.6779 23.3057 37.3556 23.3057C36.116 23.3057 35.2069 24.0495 35.2069 25.7024V32.3966H33.554V21.9007H35.2069V22.8098H35.4548C36.0333 22.066 36.8598 21.7354 37.6862 21.7354C39.5044 21.7354 41.0746 23.0578 41.0746 25.785ZM29.9176 25.1239L28.7606 25.0412C27.8515 24.9586 27.4383 24.7107 27.4383 24.2148C27.4383 23.6363 28.0168 23.2231 28.9259 23.2231C29.835 23.2231 30.4135 23.6363 30.4135 24.2148H32.0664C31.9837 22.7272 30.8267 21.7354 28.9259 21.7354C27.0251 21.7354 25.7854 22.7272 25.7854 24.2148C25.7854 25.4545 26.5292 26.1983 28.3474 26.4462L29.5044 26.5288C30.1656 26.6115 30.6614 26.7768 30.6614 27.4379C30.6614 28.0164 30.2482 28.4297 29.0912 28.4297C28.0168 28.4297 27.5209 27.9338 27.3556 27.2726H25.6201C25.7854 28.7602 27.0251 29.8346 29.1738 29.8346C31.1573 29.8346 32.4796 28.7602 32.4796 27.2726C32.3143 25.9503 31.4052 25.2065 29.9176 25.1239ZM47.6036 27.2726C47.3556 27.8512 46.6945 28.347 45.7854 28.347C44.5457 28.347 43.6366 27.5206 43.6366 25.785C43.6366 24.1321 44.4631 23.2231 45.7854 23.2231C46.9424 23.2231 47.6036 23.9669 47.6862 24.9586H44.6284V26.1983H49.3391V25.3718C49.3391 23.1404 47.8515 21.6528 45.7854 21.6528C43.8019 21.6528 41.9011 22.9751 41.9011 25.7024C41.9011 28.4297 43.8019 29.752 45.7854 29.752C47.6036 29.752 48.8432 28.6776 49.2565 27.19H47.6036V27.2726ZM20.992 21.7354C19.1738 21.7354 17.7689 22.7272 17.6036 24.2148H19.4217C19.587 23.6363 20.0829 23.2231 20.992 23.2231C22.2317 23.2231 22.6449 23.8842 22.6449 24.628V27.2726C21.9837 28.0991 21.1573 28.4297 20.3308 28.4297C19.5044 28.4297 18.9259 28.0164 18.9259 27.2726C18.9259 26.6115 19.3391 26.1156 20.2482 26.1156H21.5705V24.8759H20.1656C18.2647 24.8759 17.1903 25.8677 17.1903 27.3553C17.1903 28.7602 18.2647 29.752 20.0003 29.752C20.992 29.752 21.8184 29.3388 22.4796 28.9255H22.7275V29.5867H24.3804V24.3801C24.2978 22.5619 22.9755 21.7354 20.992 21.7354ZM9.50439 29.6693H11.1573V19.0908H9.50439V29.6693ZM16.6118 21.9007H14.5457L12.0664 25.1239V26.1156L14.6284 29.6693H16.6945L13.7193 25.6197L16.6118 21.9007ZM77.6862 21.9007L76.2813 24.9586C75.9507 25.7024 75.6201 26.4462 75.5374 26.9421H75.2895C75.2069 26.4462 74.8763 25.785 74.5457 25.0412L73.1408 21.9834H71.2399L74.4631 28.9255L72.8928 32.4792H74.711L79.5044 21.9834H77.6862V21.9007ZM70.9094 21.9007H68.8432L66.3639 25.1239V26.1156L68.9259 29.6693H70.992L68.0168 25.6197L70.9094 21.9007ZM60.3308 25.1239L59.1738 25.0412C58.2647 24.9586 57.8515 24.7107 57.8515 24.2148C57.8515 23.6363 58.43 23.2231 59.3391 23.2231C60.2482 23.2231 60.8267 23.6363 60.8267 24.2148H62.4796C62.397 22.7272 61.2399 21.7354 59.3391 21.7354C57.4383 21.7354 56.1986 22.7272 56.1986 24.2148C56.1986 25.4545 56.9424 26.1983 58.7606 26.4462L59.9176 26.5288C60.5788 26.6115 61.0746 26.7768 61.0746 27.4379C61.0746 28.0164 60.6614 28.4297 59.5044 28.4297C58.43 28.4297 57.9341 27.9338 57.7689 27.2726H56.0333C56.1986 28.7602 57.4383 29.8346 59.587 29.8346C61.5705 29.8346 62.8928 28.7602 62.8928 27.2726C62.7275 25.9503 61.8184 25.2065 60.3308 25.1239ZM63.8019 29.6693H65.4548V19.0908H63.8019V29.6693ZM52.6449 22.8098H52.397V21.9007H50.7441V29.6693H52.397V25.6197C52.397 24.2148 53.0581 23.3883 54.2978 23.3883H55.3722V21.6528H54.711C53.6366 21.7354 53.1408 22.1487 52.6449 22.8098Z"}}]},e.exports.default=e.exports},8127:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 107.7 48.4",width:"88",height:"40"},childs:[{name:"path",attrs:{fill:"none",d:"M0 0h107.7v48.4H0z"}},{name:"path",attrs:{d:"M30.3 14.4h1.1c.1.7.6 1.3 1.6 1.3.9 0 1.5-.4 1.5-1.1 0-.6-.4-.9-1.1-.9h-1.2v-1h1.1c.7 0 1.1-.4 1.1-.9 0-.6-.5-.9-1.4-.9-.9 0-1.5.5-1.6 1.2h-1.1c.2-1.4 1.2-2.2 2.7-2.2 1.6 0 2.4.7 2.4 1.8 0 .7-.4 1.2-1 1.4v.2c.6.2 1 .6 1 1.4 0 1.2-1 2.1-2.6 2.1-1.4-.1-2.4-1-2.5-2.4zM40.6 13.5v3h-1.1v-.4h-.2c-.3.3-.8.5-1.3.5-1 0-1.6-.6-1.6-1.4 0-.9.6-1.4 1.7-1.4h1.4v-.3c0-.5-.3-.8-.9-.8-.6 0-.9.2-.9.6h-1.1c.1-.9.9-1.6 2.1-1.6 1.1.2 1.9.7 1.9 1.8zm-1.1 1.7v-.6h-1.3c-.5 0-.7.2-.7.6 0 .4.3.6.8.6.4 0 .9-.2 1.2-.6zM41.5 12h1.1v3.6h1.6V12h1.1v3.6h1.6V12H48v3.6h.8v2.1h-1v-1.1h-6.2V12zM49.3 12h1.1v3.3h.2c.1-.2.2-.4.2-.6l1.5-2.7h1.4v4.6h-1.1v-3.2h-.1c0 .1-.1.3-.2.5l-1.5 2.7h-1.4V12zM54.6 12h1.1v3.6h1.6V12h1.1v3.6H60V12h1v3.6h.8v2.1h-1v-1.1h-6.2V12zM62.2 14.3c0-1.4.9-2.4 2.3-2.4 1.3 0 2.2.9 2.2 2.1v.5h-3.4c.1.8.6 1.2 1.2 1.2s.9-.3 1.1-.6h1.1c-.2.9-1 1.6-2.1 1.6-1.5 0-2.4-1-2.4-2.4zm3.5-.5c0-.6-.4-1-1.2-1-.6 0-1.1.4-1.2 1h2.4zM67.6 12h1.1v1.7h2.1V12h1.1v4.6h-1.1v-1.9h-2.1v1.9h-1.1V12zM72.7 14.3c0-1.3.9-2.4 2.4-2.4s2.4 1.1 2.4 2.4c0 1.3-.9 2.4-2.4 2.4s-2.4-1.1-2.4-2.4zm3.6 0c0-.9-.6-1.4-1.3-1.4-.7 0-1.3.5-1.3 1.4 0 .9.6 1.4 1.3 1.4.7 0 1.3-.5 1.3-1.4z"}},{name:"g",attrs:{},childs:[{name:"path",attrs:{d:"M49.7 31.2c0 3.2-2 4.7-4.4 4.7h-1.5V34h1.4c1.5 0 2.5-.8 2.5-2.8 0-2-.9-3-2.5-3-1.5 0-2.6.9-2.6 2.9v8.1h-2V26.5h2v1.1h.3c.7-.9 1.7-1.3 2.7-1.3 2.2 0 4.1 1.6 4.1 4.9zm-13.5-.8l-1.4-.1c-1.1-.1-1.6-.4-1.6-1 0-.7.7-1.2 1.8-1.2s1.8.5 1.8 1.2h2c-.1-1.8-1.5-3-3.8-3s-3.8 1.2-3.8 3c0 1.5.9 2.4 3.1 2.7l1.4.1c.8.1 1.4.3 1.4 1.1 0 .7-.5 1.2-1.9 1.2-1.3 0-1.9-.6-2.1-1.4H31c.2 1.8 1.7 3.1 4.3 3.1 2.4 0 4-1.3 4-3.1-.2-1.6-1.3-2.5-3.1-2.6zM57.6 33c-.3.7-1.1 1.3-2.2 1.3-1.5 0-2.6-1-2.6-3.1 0-2 1-3.1 2.6-3.1 1.4 0 2.2.9 2.3 2.1H54v1.5h5.7v-1c0-2.7-1.8-4.5-4.3-4.5-2.4 0-4.7 1.6-4.7 4.9S53 36 55.4 36c2.2 0 3.7-1.3 4.2-3.1h-2zm-32.2-6.7c-2.2 0-3.9 1.2-4.1 3h2.2c.2-.7.8-1.2 1.9-1.2 1.5 0 2 .8 2 1.7V33c-.8 1-1.8 1.4-2.8 1.4-1 0-1.7-.5-1.7-1.4 0-.8.5-1.4 1.6-1.4h1.6v-1.5h-1.7c-2.3 0-3.6 1.2-3.6 3 0 1.7 1.3 2.9 3.4 2.9 1.2 0 2.2-.5 3-1h.3v.8h2v-6.3c-.1-2.2-1.7-3.2-4.1-3.2zm-13.9 9.6h2V23.1h-2v12.8zm8.6-9.4h-2.5l-3 3.9v1.2l3.1 4.3h2.5L16.6 31l3.5-4.5zm73.9 0l-1.7 3.7c-.4.9-.8 1.8-.9 2.4h-.3c-.1-.6-.5-1.4-.9-2.3l-1.7-3.7h-2.3l3.9 8.4-1.9 4.3h2.2l5.8-12.7H94zm-8.2 0h-2.5l-3 3.9v1.2l3.1 4.3h2.5L82.3 31l3.5-4.5zM73 30.4l-1.4-.1c-1.1-.1-1.6-.4-1.6-1 0-.7.7-1.2 1.8-1.2s1.8.5 1.8 1.2h2c-.1-1.8-1.5-3-3.8-3s-3.8 1.2-3.8 3c0 1.5.9 2.4 3.1 2.7l1.4.1c.8.1 1.4.3 1.4 1.1 0 .7-.5 1.2-1.9 1.2-1.3 0-1.9-.6-2.1-1.4h-2.1c.2 1.8 1.7 3.1 4.3 3.1 2.4 0 4-1.3 4-3.1-.2-1.6-1.3-2.5-3.1-2.6zm4.2 5.5h2V23.1h-2v12.8zm-13.5-8.3h-.3v-1.1h-2v9.4h2V31c0-1.7.8-2.7 2.3-2.7H67v-2.1h-.8c-1.3.1-1.9.6-2.5 1.4z"}}]}]},e.exports.default=e.exports},74425:function(e){e.exports={name:"svg",attrs:{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"mask",attrs:{id:"path-1-outside-1_13_14304",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"18",height:"19",fill:"black"},childs:[{name:"rect",attrs:{fill:"white",width:"18",height:"19"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 2.00005C11.438 2.00005 14.048 2.34005 14.994 2.62305C15.59 2.86005 15.982 3.43805 15.982 4.08005C16 5.55605 16 8.27805 16 10.5331C16 13.7941 11.261 16.9751 9.026 17.0001H9C6.776 17.0001 2 13.8071 2 10.5331C2 8.27805 2 5.55605 2.018 4.08005C2.018 3.43805 2.41 2.86005 3.006 2.62305C3.959 2.33705 6.604 1.99505 9 2.00005H9.056Z"}}]},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 2.00005C11.438 2.00005 14.048 2.34005 14.994 2.62305C15.59 2.86005 15.982 3.43805 15.982 4.08005C16 5.55605 16 8.27805 16 10.5331C16 13.7941 11.261 16.9751 9.026 17.0001H9C6.776 17.0001 2 13.8071 2 10.5331C2 8.27805 2 5.55605 2.018 4.08005C2.018 3.43805 2.41 2.86005 3.006 2.62305C3.959 2.33705 6.604 1.99505 9 2.00005H9.056Z",fill:"#EC4750"}},{name:"path",attrs:{d:"M14.994 2.62305L15.733 0.764599L15.6514 0.732136L15.5672 0.706956L14.994 2.62305ZM15.982 4.08005H13.982V4.09225L13.9821 4.10444L15.982 4.08005ZM9.026 17.0001V19.0001H9.03719L9.04837 18.9999L9.026 17.0001ZM2.018 4.08005L4.01785 4.10444L4.018 4.09225V4.08005H2.018ZM3.006 2.62305L2.43112 0.707457L2.34781 0.732459L2.26698 0.764599L3.006 2.62305ZM9 2.00005L8.99583 4.00005H9V2.00005ZM9.056 4.00005C11.3433 4.00005 13.7367 4.3345 14.4208 4.53915L15.5672 0.706956C14.3593 0.345613 11.5327 5.42402e-05 9.056 5.42402e-05V4.00005ZM14.255 4.48151C14.0889 4.41547 13.982 4.2565 13.982 4.08005H17.982C17.982 2.6196 17.0911 1.30464 15.733 0.764599L14.255 4.48151ZM13.9821 4.10444C14 5.56503 14 8.27142 14 10.5331H18C18 8.28469 18 5.54708 17.9819 4.05567L13.9821 4.10444ZM14 10.5331C14 11.2507 13.3991 12.3494 12.0796 13.4363C11.4733 13.9357 10.8146 14.3455 10.2154 14.624C9.58022 14.9194 9.16101 14.9984 9.00363 15.0002L9.04837 18.9999C10.0085 18.9892 11.0198 18.6613 11.9018 18.2512C12.8197 17.8244 13.7648 17.2304 14.6227 16.5238C16.2314 15.1987 18 13.0764 18 10.5331H14ZM9.026 15.0001H9V19.0001H9.026V15.0001ZM9 15.0001C8.85482 15.0001 8.44247 14.9274 7.80513 14.6336C7.20563 14.3573 6.54425 13.9482 5.93445 13.448C4.60667 12.3588 4 11.2543 4 10.5331H0C0 13.0858 1.78133 15.2148 3.39755 16.5406C4.25975 17.2479 5.20937 17.8417 6.13087 18.2664C7.01453 18.6736 8.03318 19.0001 9 19.0001V15.0001ZM4 10.5331C4 8.27142 4.00004 5.56503 4.01785 4.10444L0.0181487 4.05567C-3.93391e-05 5.54708 0 8.28469 0 10.5331H4ZM4.018 4.08005C4.018 4.25651 3.9111 4.41547 3.74502 4.48151L2.26698 0.764599C0.908902 1.30464 0.018 2.6196 0.018 4.08005H4.018ZM3.58088 4.53865C4.26938 4.33203 6.69545 3.99525 8.99583 4.00005L9.00417 5.85318e-05C6.51255 -0.00514102 3.64862 0.342079 2.43112 0.707457L3.58088 4.53865ZM9 4.00005H9.056V5.42402e-05H9V4.00005Z",fill:"#213029",mask:"url(#path-1-outside-1_13_14304)"}},{name:"path",attrs:{d:"M9.74959 4.71427C9.74959 5.10876 9.43048 5.42855 9.03684 5.42855C8.64319 5.42855 8.32408 5.10876 8.32408 4.71427C8.32408 4.31979 8.64319 4 9.03684 4C9.43048 4 9.74959 4.31979 9.74959 4.71427Z",fill:"white"}},{name:"path",attrs:{d:"M9.51923 10.7113C9.46516 11.102 9.7374 11.4627 10.1273 11.5169C10.6242 11.586 10.7576 11.8367 10.7863 11.9634C10.8046 12.0445 10.7899 12.1001 10.7796 12.1215L10.7789 12.1228L9.03685 12.5502L7.29474 12.1228L7.2941 12.1215C7.28377 12.1001 7.26903 12.0445 7.28739 11.9634C7.31611 11.8367 7.44944 11.586 7.94635 11.5169C8.33627 11.4627 8.60851 11.102 8.55444 10.7113C8.50209 10.333 8.1631 10.0652 7.78776 10.0977C7.76796 10.0961 7.74793 10.0952 7.7277 10.0952C7.64378 10.0952 7.38295 10.0701 7.05047 9.97715C6.72309 9.88561 6.37326 9.74106 6.08384 9.53182C5.7996 9.32633 5.59186 9.07298 5.49287 8.75378C5.39422 8.43568 5.37811 7.97014 5.62523 7.29284C5.64566 7.23682 5.65883 7.17902 5.66482 7.12078L6.17395 7.43037C6.29951 7.50685 6.35958 7.57335 6.3946 7.63486C6.42989 7.69686 6.47094 7.8084 6.47094 8.02381C6.47094 8.4183 6.79005 8.73809 7.18369 8.73809C7.57733 8.73809 7.89644 8.4183 7.89644 8.02381C7.89644 7.62019 7.81746 7.25141 7.63281 6.92702C7.44791 6.6022 7.1879 6.37614 6.914 6.20941L5.3305 5.24654C5.1643 5.14548 4.96413 5.11683 4.77635 5.16723C4.58857 5.21764 4.42948 5.34271 4.33594 5.51349C4.06457 6.00893 4.03064 6.57625 4.19481 7.07474C3.95299 7.86271 3.94145 8.56462 4.13158 9.17773C4.34301 9.85953 4.77842 10.3496 5.24983 10.6904C5.52036 10.8859 5.80842 11.0369 6.08717 11.1529C6.00013 11.3083 5.93637 11.4745 5.89725 11.6472C5.73925 12.3446 6.01992 13.26 6.91857 13.501L6.93336 13.5048L8.85357 13.976C8.91333 13.9919 8.97562 14.0002 9.03904 14C9.10074 13.9999 9.16134 13.9916 9.21954 13.9761L11.1403 13.5049L11.1551 13.5011C12.0538 13.26 12.3344 12.3446 12.1764 11.6472C12.1352 11.4652 12.0666 11.2904 11.9722 11.1277C12.2323 11.0153 12.4988 10.8721 12.7502 10.6904C13.2216 10.3496 13.657 9.85952 13.8684 9.17772C14.0585 8.56462 14.047 7.8627 13.8052 7.07474C13.9694 6.57625 13.9354 6.00892 13.6641 5.51348C13.5705 5.34271 13.4114 5.21763 13.2237 5.16723C13.0359 5.11683 12.8357 5.14547 12.6695 5.24653L11.0863 6.20924C10.8124 6.37596 10.5521 6.6022 10.3672 6.92702C10.1825 7.25141 10.1036 7.62019 10.1036 8.02381C10.1036 8.41829 10.4227 8.73808 10.8163 8.73808C11.21 8.73808 11.5291 8.41829 11.5291 8.02381C11.5291 7.8084 11.5701 7.69685 11.6054 7.63486C11.6404 7.57334 11.7002 7.50701 11.8258 7.43054L12.3352 7.12078C12.3412 7.17902 12.3543 7.23681 12.3748 7.29283C12.6219 7.97014 12.6058 8.43567 12.5071 8.75377C12.4081 9.07298 12.2004 9.32633 11.9162 9.53182C11.6267 9.74106 11.2769 9.88561 10.9495 9.97715C10.617 10.0701 10.3562 10.0952 10.2723 10.0952C10.265 10.0952 10.2577 10.0953 10.2505 10.0955C9.88945 10.0823 9.56993 10.345 9.51923 10.7113Z",fill:"white"}},{name:"path",attrs:{d:"M7.47276 5.84727C7.64881 5.49443 8.07694 5.35142 8.42903 5.52783C8.62598 5.62652 8.8404 5.74054 9.03685 5.88986C9.23331 5.74054 9.44773 5.62652 9.64468 5.52783C9.99677 5.35142 10.4249 5.49443 10.6009 5.84727C10.777 6.2001 10.6343 6.62915 10.2822 6.80556C9.97513 6.95942 9.86597 7.04274 9.81563 7.10317C9.79556 7.12725 9.74961 7.1824 9.74961 7.40477C9.74961 7.79926 9.4305 8.11905 9.03685 8.11905C8.64321 8.11905 8.3241 7.79926 8.3241 7.40477C8.3241 7.1824 8.27838 7.12753 8.25832 7.10346C8.20797 7.04303 8.09858 6.95942 7.79152 6.80556C7.43943 6.62915 7.29672 6.2001 7.47276 5.84727Z",fill:"white"}}]},e.exports.default=e.exports},51642:function(e){e.exports={name:"svg",attrs:{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"mask",attrs:{id:"path-1-outside-1_3_30781",maskUnits:"userSpaceOnUse",x:"0",y:"-6.10352e-05",width:"18",height:"19",fill:"black"},childs:[{name:"rect",attrs:{fill:"white",y:"-6.10352e-05",width:"18",height:"19"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 1.99999C11.438 1.99999 14.048 2.33999 14.994 2.62299C15.59 2.85999 15.982 3.43799 15.982 4.07999C16 5.55599 16 8.27799 16 10.533C16 13.794 11.261 16.975 9.026 17H9C6.776 17 2 13.807 2 10.533C2 8.27799 2 5.55599 2.018 4.07999C2.018 3.43799 2.41 2.85999 3.006 2.62299C3.959 2.33699 6.604 1.99499 9 1.99999H9.056Z"}}]},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 1.99999C11.438 1.99999 14.048 2.33999 14.994 2.62299C15.59 2.85999 15.982 3.43799 15.982 4.07999C16 5.55599 16 8.27799 16 10.533C16 13.794 11.261 16.975 9.026 17H9C6.776 17 2 13.807 2 10.533C2 8.27799 2 5.55599 2.018 4.07999C2.018 3.43799 2.41 2.85999 3.006 2.62299C3.959 2.33699 6.604 1.99499 9 1.99999H9.056Z",fill:"#EC4750"}},{name:"path",attrs:{d:"M14.994 2.62299L15.733 0.764538L15.6514 0.732075L15.5672 0.706895L14.994 2.62299ZM15.982 4.07999H13.982V4.09219L13.9821 4.10438L15.982 4.07999ZM9.026 17V19H9.03719L9.04837 18.9999L9.026 17ZM2.018 4.07999L4.01785 4.10438L4.018 4.09219V4.07999H2.018ZM3.006 2.62299L2.43112 0.707396L2.34781 0.732398L2.26698 0.764538L3.006 2.62299ZM9 1.99999L8.99583 3.99999H9V1.99999ZM9.056 3.99999C11.3433 3.99999 13.7367 4.33443 14.4208 4.53909L15.5672 0.706895C14.3593 0.345552 11.5327 -6.79493e-06 9.056 -6.79493e-06V3.99999ZM14.255 4.48145C14.0889 4.41541 13.982 4.25644 13.982 4.07999H17.982C17.982 2.61954 17.0911 1.30458 15.733 0.764538L14.255 4.48145ZM13.9821 4.10438C14 5.56496 14 8.27135 14 10.533H18C18 8.28463 18 5.54702 17.9819 4.0556L13.9821 4.10438ZM14 10.533C14 11.2506 13.3991 12.3493 12.0796 13.4363C11.4733 13.9356 10.8146 14.3454 10.2154 14.624C9.58022 14.9193 9.16101 14.9984 9.00363 15.0001L9.04837 18.9999C10.0085 18.9891 11.0198 18.6612 11.9018 18.2511C12.8197 17.8243 13.7648 17.2304 14.6227 16.5237C16.2314 15.1987 18 13.0764 18 10.533H14ZM9.026 15H9V19H9.026V15ZM9 15C8.85482 15 8.44247 14.9273 7.80513 14.6336C7.20563 14.3573 6.54425 13.9482 5.93445 13.4479C4.60667 12.3587 4 11.2542 4 10.533H0C0 13.0858 1.78133 15.2147 3.39755 16.5405C4.25975 17.2478 5.20937 17.8416 6.13087 18.2663C7.01453 18.6736 8.03318 19 9 19V15ZM4 10.533C4 8.27136 4.00004 5.56497 4.01785 4.10438L0.0181487 4.0556C-3.93391e-05 5.54702 0 8.28463 0 10.533H4ZM4.018 4.07999C4.018 4.25644 3.9111 4.41541 3.74502 4.48145L2.26698 0.764538C0.908902 1.30458 0.018 2.61954 0.018 4.07999H4.018ZM3.58088 4.53859C4.26938 4.33197 6.69545 3.99519 8.99583 3.99999L9.00417 -2.5034e-06C6.51255 -0.00520205 3.64862 0.342018 2.43112 0.707396L3.58088 4.53859ZM9 3.99999H9.056V-6.79493e-06H9V3.99999Z",fill:"#EDFBF8",mask:"url(#path-1-outside-1_3_30781)"}},{name:"path",attrs:{d:"M9.74959 4.71427C9.74959 5.10876 9.43048 5.42855 9.03684 5.42855C8.64319 5.42855 8.32408 5.10876 8.32408 4.71427C8.32408 4.31979 8.64319 4 9.03684 4C9.43048 4 9.74959 4.31979 9.74959 4.71427Z",fill:"white"}},{name:"path",attrs:{d:"M9.51923 10.7113C9.46516 11.102 9.7374 11.4627 10.1273 11.5169C10.6242 11.586 10.7576 11.8367 10.7863 11.9634C10.8046 12.0445 10.7899 12.1001 10.7796 12.1215L10.7789 12.1228L9.03685 12.5502L7.29474 12.1228L7.2941 12.1215C7.28377 12.1001 7.26903 12.0445 7.28739 11.9634C7.31611 11.8367 7.44944 11.586 7.94635 11.5169C8.33627 11.4627 8.60851 11.102 8.55444 10.7113C8.50209 10.333 8.1631 10.0652 7.78776 10.0977C7.76796 10.0961 7.74793 10.0952 7.7277 10.0952C7.64378 10.0952 7.38295 10.0701 7.05047 9.97715C6.72309 9.88561 6.37326 9.74106 6.08384 9.53182C5.7996 9.32633 5.59186 9.07298 5.49287 8.75378C5.39422 8.43568 5.37811 7.97014 5.62523 7.29284C5.64566 7.23682 5.65883 7.17902 5.66482 7.12078L6.17395 7.43037C6.29951 7.50685 6.35958 7.57335 6.3946 7.63486C6.42989 7.69686 6.47094 7.8084 6.47094 8.02381C6.47094 8.4183 6.79005 8.73809 7.18369 8.73809C7.57733 8.73809 7.89644 8.4183 7.89644 8.02381C7.89644 7.62019 7.81746 7.25141 7.63281 6.92702C7.44791 6.6022 7.1879 6.37614 6.914 6.20941L5.3305 5.24654C5.1643 5.14548 4.96413 5.11683 4.77635 5.16723C4.58857 5.21764 4.42948 5.34271 4.33594 5.51349C4.06457 6.00893 4.03064 6.57625 4.19481 7.07474C3.95299 7.86271 3.94145 8.56462 4.13158 9.17773C4.34301 9.85953 4.77842 10.3496 5.24983 10.6904C5.52036 10.8859 5.80842 11.0369 6.08717 11.1529C6.00013 11.3083 5.93637 11.4745 5.89725 11.6472C5.73925 12.3446 6.01992 13.26 6.91857 13.501L6.93336 13.5048L8.85357 13.976C8.91333 13.9919 8.97562 14.0002 9.03904 14C9.10074 13.9999 9.16134 13.9916 9.21954 13.9761L11.1403 13.5049L11.1551 13.5011C12.0538 13.26 12.3344 12.3446 12.1764 11.6472C12.1352 11.4652 12.0666 11.2904 11.9722 11.1277C12.2323 11.0153 12.4988 10.8721 12.7502 10.6904C13.2216 10.3496 13.657 9.85952 13.8684 9.17772C14.0585 8.56462 14.047 7.8627 13.8052 7.07474C13.9694 6.57625 13.9354 6.00892 13.6641 5.51348C13.5705 5.34271 13.4114 5.21763 13.2237 5.16723C13.0359 5.11683 12.8357 5.14547 12.6695 5.24653L11.0863 6.20924C10.8124 6.37596 10.5521 6.6022 10.3672 6.92702C10.1825 7.25141 10.1036 7.62019 10.1036 8.02381C10.1036 8.41829 10.4227 8.73808 10.8163 8.73808C11.21 8.73808 11.5291 8.41829 11.5291 8.02381C11.5291 7.8084 11.5701 7.69685 11.6054 7.63486C11.6404 7.57334 11.7002 7.50701 11.8258 7.43054L12.3352 7.12078C12.3412 7.17902 12.3543 7.23681 12.3748 7.29283C12.6219 7.97014 12.6058 8.43567 12.5071 8.75377C12.4081 9.07298 12.2004 9.32633 11.9162 9.53182C11.6267 9.74106 11.2769 9.88561 10.9495 9.97715C10.617 10.0701 10.3562 10.0952 10.2723 10.0952C10.265 10.0952 10.2577 10.0953 10.2505 10.0955C9.88945 10.0823 9.56993 10.345 9.51923 10.7113Z",fill:"white"}},{name:"path",attrs:{d:"M7.47276 5.84727C7.64881 5.49443 8.07694 5.35142 8.42903 5.52783C8.62598 5.62652 8.8404 5.74054 9.03685 5.88986C9.23331 5.74054 9.44773 5.62652 9.64468 5.52783C9.99677 5.35142 10.4249 5.49443 10.6009 5.84727C10.777 6.2001 10.6343 6.62915 10.2822 6.80556C9.97513 6.95942 9.86597 7.04274 9.81563 7.10317C9.79556 7.12725 9.74961 7.1824 9.74961 7.40477C9.74961 7.79926 9.4305 8.11905 9.03685 8.11905C8.64321 8.11905 8.3241 7.79926 8.3241 7.40477C8.3241 7.1824 8.27838 7.12753 8.25832 7.10346C8.20797 7.04303 8.09858 6.95942 7.79152 6.80556C7.43943 6.62915 7.29672 6.2001 7.47276 5.84727Z",fill:"white"}}]},e.exports.default=e.exports},66895:function(e){e.exports={name:"svg",attrs:{width:"43",height:"8",viewBox:"0 0 43 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M34.5419 7.87234H32.5388V2.05028H32.5233C32.0167 3.98942 31.5089 5.93011 30.9999 7.87234H30.9357H29.2496C29.1914 7.87234 29.1689 7.85959 29.1534 7.80049C29.0062 7.22261 28.8562 6.64319 28.7034 6.06222C28.5506 5.48125 28.401 4.91264 28.2546 4.35639C28.1548 3.97281 28.0563 3.58923 27.9553 3.20681C27.8544 2.82439 27.7594 2.46051 27.649 2.08968V7.87002H25.6304V0.130065H28.7972C28.853 0.130065 28.878 0.139336 28.8934 0.200755C29.0751 0.908812 29.2639 1.61571 29.4491 2.32377C29.6047 2.92058 29.7578 3.51854 29.9134 4.11535C29.9704 4.33437 30.0321 4.55223 30.0939 4.78632L30.1152 4.711C30.2364 4.24746 30.3579 3.78392 30.4798 3.32038C30.6531 2.65752 30.8265 1.99465 30.9999 1.33179C31.0996 0.948213 31.2017 0.565793 31.3027 0.183372C31.3122 0.148607 31.3228 0.128906 31.3668 0.128906H34.5336H34.5467L34.5419 7.87234Z"}},{name:"path",attrs:{d:"M8.02808 0.130249H8.12545C9.57291 0.130249 11.0192 0.130249 12.4666 0.130249C12.7564 0.130249 13.0473 0.173126 13.337 0.203256C13.6197 0.229589 13.8943 0.309498 14.1456 0.438503C14.3858 0.560799 14.5965 0.731818 14.7634 0.940084C14.9303 1.14835 15.0496 1.38905 15.1134 1.64602C15.1826 1.91078 15.2079 2.18466 15.1882 2.45722C15.1723 2.89929 15.0079 3.32399 14.7204 3.6659C14.4808 3.95442 14.1657 4.17426 13.8084 4.30211C13.6576 4.35541 13.4997 4.39365 13.3453 4.43885C13.3307 4.44418 13.3167 4.45118 13.3038 4.45971C13.5221 4.52344 13.7283 4.6217 13.9141 4.75058C14.0164 4.83434 14.1106 4.92705 14.1955 5.02755C14.3238 5.18051 14.4401 5.34159 14.5601 5.50036C14.5914 5.54455 14.6192 5.59104 14.6432 5.63942L15.1834 6.65921C15.3133 6.90488 15.4431 7.14978 15.5729 7.39392L15.8163 7.83891C15.8225 7.85061 15.8281 7.8626 15.833 7.87484H13.0508L12.7635 7.36031L12.114 6.20146C11.9952 5.98707 11.8824 5.76921 11.7578 5.55714C11.6513 5.34125 11.5124 5.14206 11.3457 4.96613C11.2242 4.85541 11.0717 4.7824 10.9076 4.75638C10.7697 4.73998 10.6309 4.73146 10.492 4.73088V7.8702H8.02808V0.130249ZM10.4967 3.25914C11.0299 3.23481 11.5595 3.30665 12.0807 3.18034C12.2113 3.16215 12.3357 3.11454 12.4441 3.04128C12.5646 2.94982 12.654 2.82507 12.7008 2.68327C12.7477 2.54148 12.7496 2.38921 12.7065 2.24631C12.6842 2.14683 12.6369 2.05431 12.5689 1.97705C12.501 1.89979 12.4144 1.8402 12.317 1.80363C12.0886 1.72411 11.847 1.68678 11.6046 1.69354C11.2638 1.68195 10.923 1.69354 10.5822 1.69354H10.4979L10.4967 3.25914Z"}},{name:"path",attrs:{d:"M20.2941 7.97798C20.0935 7.97798 19.8928 7.99189 19.7004 7.97798C19.1617 7.94395 18.6332 7.81805 18.139 7.60599C17.8718 7.48525 17.6229 7.32928 17.3992 7.14245C17.0243 6.82266 16.7215 6.43043 16.5098 5.99056C16.3653 5.70029 16.263 5.39177 16.2059 5.0739C16.1688 4.8645 16.1434 4.65328 16.1299 4.44117C16.1103 4.17702 16.1055 3.91202 16.1156 3.64736C16.1336 3.25746 16.2014 2.87127 16.3175 2.49778C16.4424 2.08406 16.6436 1.69606 16.9112 1.35284C17.1876 1.00862 17.532 0.722114 17.9241 0.510356C18.3298 0.295727 18.7691 0.148104 19.2243 0.0734698C19.3728 0.0492565 19.5227 0.0337773 19.6731 0.0271159C19.9017 0.00668909 20.1311 -0.00220743 20.3606 0.000462194C20.6587 0.0143684 20.9543 0.0514515 21.2512 0.086217C21.5745 0.129238 21.8905 0.214603 22.1904 0.340005C22.4847 0.454411 22.7599 0.610611 23.0074 0.803545C23.0668 0.851058 23.1261 0.897412 23.1855 0.94956C23.5159 1.24874 23.7812 1.60974 23.9656 2.01107C24.0929 2.28652 24.1869 2.57546 24.2459 2.87209C24.3093 3.17992 24.3404 3.49328 24.3385 3.80728C24.3385 3.99618 24.348 4.18623 24.3385 4.37512C24.3146 4.85961 24.2173 5.33799 24.0499 5.79471C23.9354 6.09676 23.7731 6.37947 23.569 6.63256C23.4677 6.76396 23.3562 6.88755 23.2354 7.00223C22.9389 7.27694 22.5953 7.49857 22.2201 7.65698C21.9073 7.78417 21.5806 7.87594 21.2464 7.93047C21.0827 7.95449 20.9179 7.97035 20.7525 7.97798C20.5993 7.98841 20.4449 7.99305 20.2906 8L20.2941 7.97798ZM21.8924 3.93823C21.8781 3.76672 21.8651 3.59058 21.8508 3.4237C21.8328 3.20008 21.7812 2.98026 21.6977 2.77127C21.5736 2.43613 21.3224 2.16027 20.9959 2.00064C20.6254 1.81694 20.1989 1.77161 19.7966 1.87316C19.5569 1.92525 19.3351 2.03691 19.1526 2.19731C18.9702 2.35772 18.8333 2.56142 18.7552 2.78865C18.6673 3.02429 18.6137 3.27084 18.5961 3.52105C18.5722 3.77336 18.5666 4.02701 18.5795 4.28009C18.5923 4.51197 18.6236 4.74252 18.6733 4.96961C18.726 5.23029 18.843 5.47451 19.0141 5.68114C19.1564 5.84164 19.3326 5.97021 19.5306 6.05802C19.7286 6.14583 19.9437 6.19081 20.1611 6.18988C20.292 6.19123 20.4227 6.18154 20.5518 6.16091C20.854 6.1239 21.1357 5.99214 21.3545 5.78544C21.5586 5.58183 21.6984 5.32515 21.757 5.04609C21.8418 4.68246 21.8872 4.31113 21.8924 3.93823Z"}},{name:"path",attrs:{d:"M0 0.130261H0.0902449C1.4914 0.130261 2.89255 0.124467 4.29489 0.130261C4.69794 0.129681 5.09697 0.208512 5.46806 0.362031C5.74157 0.47582 5.98514 0.648556 6.18051 0.867289C6.40551 1.12602 6.56171 1.43489 6.63529 1.76656C6.71081 2.10154 6.73403 2.44574 6.70416 2.7875C6.68601 3.26848 6.51365 3.73177 6.21138 4.11207C5.98977 4.38287 5.70188 4.59488 5.37425 4.72858C5.12657 4.8307 4.86694 4.90271 4.60124 4.94296C4.42493 4.97114 4.24673 4.98664 4.06809 4.98932C3.53376 4.98932 2.99942 4.98932 2.4532 4.98932V7.86906H0V0.130261ZM2.45558 1.72252V3.42139H3.27371C3.46151 3.42179 3.64755 3.38595 3.82111 3.31594C3.91886 3.27834 4.00778 3.22178 4.08248 3.14967C4.15718 3.07757 4.21611 2.99141 4.2557 2.89643C4.32385 2.73689 4.33799 2.56027 4.29608 2.39234C4.27557 2.27819 4.22851 2.17015 4.15852 2.07654C4.08853 1.98292 3.99747 1.90621 3.89235 1.85231C3.71983 1.77174 3.53145 1.72865 3.34021 1.726C3.04454 1.71325 2.75243 1.72252 2.45558 1.72252Z"}},{name:"path",attrs:{d:"M38.0473 2.03412H35.5454V0.134766H43V2.0318H40.5064V7.87009H38.0473V2.03412Z"}}]},e.exports.default=e.exports},94100:function(e){e.exports={name:"svg",attrs:{width:"59",height:"13",viewBox:"0 0 59 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M11.2944 1.36339L2.62578 0.0035551L3.422 1.36339H11.2944Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M0 3.42844L3.05594 11.4943L3.85216 10.1345L0 3.42844Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M7.41149 11.9909L13.0388 5.35901H11.4452L7.41149 11.9909Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M11.4475 1.9505H2.99078L4.78315 4.78367H13.2411L11.4475 1.9505Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M1.98178 6.10352e-05L0.358219 2.89154L4.58601 10.1079L6.2084 7.21643L1.98178 6.10352e-05Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M6.71449 12.0027L10.9423 4.77893L7.63487 4.77756L3.40708 11.9939L6.71449 12.0027Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M49.673 10.8499H47.7006V5.06026H47.6854C47.1865 6.98861 46.6865 8.91851 46.1853 10.8499H44.4619C44.4047 10.8499 44.3824 10.8373 44.3672 10.7785C44.2223 10.2038 44.0746 9.62762 43.9241 9.04988C43.7737 8.47215 43.6264 7.9067 43.4822 7.35354C43.384 6.9721 43.2869 6.59065 43.1875 6.21036C43.0881 5.83006 42.9946 5.46821 42.8859 5.09944V10.8476H40.8983V3.15072H44.0165C44.0714 3.15072 44.096 3.15994 44.1112 3.22102C44.2901 3.92514 44.476 4.6281 44.6584 5.33222C44.8115 5.92571 44.9624 6.52035 45.1155 7.11384C45.1716 7.33165 45.2324 7.5483 45.2932 7.78109L45.3143 7.70618C45.4335 7.24522 45.5532 6.78425 45.6732 6.32329C45.8439 5.66412 46.0146 5.00494 46.1853 4.34576C46.2835 3.96432 46.3841 3.58402 46.4835 3.20373C46.4928 3.16916 46.5034 3.14957 46.5466 3.14957H49.6777L49.673 10.8499Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M23.5662 3.15076H23.6621C25.0873 3.15076 26.5114 3.15076 27.9366 3.15076C28.2219 3.15076 28.5083 3.1934 28.7936 3.22336C29.0719 3.24954 29.3424 3.32901 29.5898 3.4573C29.8264 3.57891 30.0337 3.74898 30.1981 3.95609C30.3624 4.1632 30.4799 4.40255 30.5427 4.6581C30.6109 4.92139 30.6357 5.19374 30.6164 5.46479C30.6007 5.9044 30.4389 6.32674 30.1557 6.66675C29.9198 6.95366 29.6096 7.17228 29.2578 7.29942C29.1093 7.35243 28.9538 7.39046 28.8018 7.4354C28.7874 7.4407 28.7736 7.44766 28.7609 7.45614C28.9759 7.51952 29.1789 7.61723 29.3618 7.7454C29.4625 7.82869 29.5553 7.92088 29.6389 8.02082C29.7652 8.17294 29.8798 8.33312 29.9979 8.491C30.0287 8.53495 30.0561 8.58119 30.0797 8.62929L30.6117 9.64341C30.7395 9.88772 30.8674 10.1313 30.9952 10.374L31.2349 10.8166C31.241 10.8282 31.2464 10.8401 31.2513 10.8523H28.5118L28.2289 10.3406L27.5894 9.18821C27.4724 8.97501 27.3614 8.75836 27.2386 8.54747C27.1337 8.33279 26.997 8.1347 26.8329 7.95974C26.7132 7.84964 26.5631 7.77704 26.4015 7.75116C26.2657 7.73485 26.129 7.72639 25.9922 7.72581V10.8477H23.5662V3.15076ZM25.9969 6.26225C26.5219 6.23805 27.0433 6.3095 27.5566 6.18389C27.6852 6.1658 27.8076 6.11845 27.9144 6.0456C28.033 5.95465 28.1211 5.83059 28.1672 5.68958C28.2133 5.54858 28.2152 5.39716 28.1728 5.25505C28.1508 5.15612 28.1043 5.06412 28.0373 4.98729C27.9704 4.91046 27.8852 4.8512 27.7893 4.81483C27.5644 4.73575 27.3265 4.69863 27.0878 4.70535C26.7522 4.69383 26.4167 4.70535 26.0811 4.70535H25.9981L25.9969 6.26225Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M35.6439 10.9548C35.4463 10.9548 35.2487 10.9687 35.0593 10.9548C34.5288 10.921 34.0085 10.7958 33.5218 10.5849C33.2588 10.4648 33.0137 10.3097 32.7934 10.1239C32.4243 9.80593 32.1261 9.41588 31.9177 8.97846C31.7754 8.68981 31.6747 8.383 31.6184 8.0669C31.5819 7.85866 31.5569 7.64861 31.5436 7.43769C31.5243 7.175 31.5196 6.91148 31.5295 6.64829C31.5472 6.26056 31.614 5.87652 31.7283 5.5051C31.8513 5.09369 32.0494 4.70784 32.3129 4.36653C32.585 4.02422 32.9242 3.73931 33.3102 3.52873C33.7097 3.31529 34.1423 3.16849 34.5905 3.09427C34.7367 3.07019 34.8843 3.0548 35.0324 3.04817C35.2575 3.02786 35.4834 3.01901 35.7094 3.02167C36.0029 3.0355 36.294 3.07238 36.5863 3.10695C36.9047 3.14973 37.2158 3.23462 37.5111 3.35932C37.8008 3.47309 38.0719 3.62843 38.3155 3.82029C38.374 3.86754 38.4324 3.91363 38.4909 3.96549C38.8162 4.263 39.0774 4.622 39.2591 5.02109C39.3844 5.29501 39.477 5.58235 39.535 5.87733C39.5975 6.18345 39.6281 6.49507 39.6262 6.80732C39.6262 6.99516 39.6355 7.18416 39.6262 7.372C39.6026 7.8538 39.5069 8.32952 39.3421 8.7837C39.2293 9.08407 39.0695 9.3652 38.8685 9.61689C38.7688 9.74756 38.6589 9.87046 38.54 9.9845C38.2481 10.2577 37.9098 10.4781 37.5404 10.6356C37.2324 10.7621 36.9107 10.8534 36.5816 10.9076C36.4204 10.9315 36.2581 10.9472 36.0952 10.9548C35.9444 10.9652 35.7924 10.9698 35.6404 10.9767L35.6439 10.9548ZM37.2177 6.93754C37.2036 6.76699 37.1908 6.59182 37.1767 6.42588C37.1589 6.2035 37.1081 5.9849 37.0259 5.77707C36.9037 5.44379 36.6564 5.16947 36.3349 5.01072C35.9701 4.82805 35.5502 4.78297 35.154 4.88396C34.918 4.93575 34.6996 5.04679 34.5199 5.2063C34.3403 5.36582 34.2055 5.56838 34.1287 5.79436C34.042 6.02868 33.9893 6.27386 33.972 6.52268C33.9484 6.77359 33.9429 7.02583 33.9556 7.2775C33.9682 7.50809 33.9991 7.73736 34.048 7.96318C34.0998 8.22241 34.215 8.46528 34.3835 8.67076C34.5237 8.83037 34.6971 8.95822 34.8921 9.04555C35.087 9.13287 35.2988 9.1776 35.513 9.17667C35.6418 9.17801 35.7705 9.16837 35.8976 9.14786C36.1952 9.11106 36.4725 8.98003 36.688 8.77448C36.889 8.572 37.0266 8.31675 37.0844 8.03924C37.1679 7.67763 37.2125 7.30837 37.2177 6.93754Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M15.6613 3.15075H15.7502C17.1298 3.15075 18.5094 3.14499 19.8903 3.15075C20.2871 3.15018 20.68 3.22857 21.0454 3.38123C21.3147 3.49439 21.5546 3.66617 21.7469 3.88368C21.9685 4.14098 22.1223 4.44812 22.1947 4.77795C22.2691 5.11108 22.292 5.45336 22.2625 5.79322C22.2447 6.27152 22.075 6.73223 21.7773 7.11042C21.5591 7.37972 21.2756 7.59055 20.953 7.7235C20.7092 7.82506 20.4535 7.89666 20.1919 7.9367C20.0183 7.96472 19.8428 7.98013 19.6669 7.98279C19.1408 7.98279 18.6147 7.98279 18.0768 7.98279V10.8465H15.6613V3.15075ZM18.0792 4.73416V6.42359H18.8848C19.0697 6.42398 19.2528 6.38834 19.4237 6.31872C19.52 6.28133 19.6075 6.22508 19.6811 6.15338C19.7547 6.08167 19.8127 5.996 19.8517 5.90155C19.9188 5.74289 19.9327 5.56726 19.8914 5.40025C19.8712 5.28674 19.8249 5.1793 19.756 5.08621C19.6871 4.99311 19.5974 4.91683 19.4939 4.86323C19.324 4.78311 19.1385 4.74025 18.9502 4.73762C18.6591 4.72494 18.3715 4.73416 18.0792 4.73416Z",fill:"#A5A7AD"}},{name:"path",attrs:{d:"M53.1245 5.04413H50.661V3.15533H58.0012V5.04182H55.5459V10.8476H53.1245V5.04413Z",fill:"#A5A7AD"}}]},e.exports.default=e.exports},30118:function(e){e.exports={name:"svg",attrs:{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"mask",attrs:{id:"path-1-outside-1_546_22171",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"18",height:"19",fill:"black"},childs:[{name:"rect",attrs:{fill:"white",width:"18",height:"19"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 2.00005C11.438 2.00005 14.048 2.34005 14.994 2.62305C15.59 2.86005 15.982 3.43805 15.982 4.08005C16 5.55605 16 8.27805 16 10.5331C16 13.7941 11.261 16.9751 9.026 17.0001H9C6.776 17.0001 2 13.8071 2 10.5331C2 8.27805 2 5.55605 2.018 4.08005C2.018 3.43805 2.41 2.86005 3.006 2.62305C3.959 2.33705 6.604 1.99505 9 2.00005H9.056V2.00005Z"}}]},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 2.00005C11.438 2.00005 14.048 2.34005 14.994 2.62305C15.59 2.86005 15.982 3.43805 15.982 4.08005C16 5.55605 16 8.27805 16 10.5331C16 13.7941 11.261 16.9751 9.026 17.0001H9C6.776 17.0001 2 13.8071 2 10.5331C2 8.27805 2 5.55605 2.018 4.08005C2.018 3.43805 2.41 2.86005 3.006 2.62305C3.959 2.33705 6.604 1.99505 9 2.00005H9.056V2.00005Z",fill:"#0DC268"}},{name:"path",attrs:{d:"M14.994 2.62305L15.733 0.764599L15.6514 0.732136L15.5672 0.706956L14.994 2.62305ZM15.982 4.08005H13.982V4.09225L13.9821 4.10444L15.982 4.08005ZM9.026 17.0001V19.0001H9.03719L9.04837 18.9999L9.026 17.0001ZM2.018 4.08005L4.01785 4.10444L4.018 4.09225V4.08005H2.018ZM3.006 2.62305L2.43112 0.707457L2.34781 0.732459L2.26698 0.764599L3.006 2.62305ZM9 2.00005L8.99583 4.00005H9V2.00005ZM9.056 4.00005C11.3433 4.00005 13.7367 4.3345 14.4208 4.53915L15.5672 0.706956C14.3593 0.345613 11.5327 5.41862e-05 9.056 5.41862e-05V4.00005ZM14.255 4.48151C14.0889 4.41547 13.982 4.2565 13.982 4.08005H17.982C17.982 2.6196 17.0911 1.30464 15.733 0.764599L14.255 4.48151ZM13.9821 4.10444C14 5.56503 14 8.27142 14 10.5331H18C18 8.28469 18 5.54708 17.9819 4.05567L13.9821 4.10444ZM14 10.5331C14 11.2507 13.3991 12.3494 12.0796 13.4363C11.4733 13.9357 10.8146 14.3455 10.2154 14.624C9.58022 14.9194 9.16101 14.9984 9.00363 15.0002L9.04837 18.9999C10.0085 18.9892 11.0198 18.6613 11.9018 18.2512C12.8197 17.8244 13.7648 17.2304 14.6227 16.5238C16.2314 15.1987 18 13.0764 18 10.5331H14ZM9.026 15.0001H9V19.0001H9.026V15.0001ZM9 15.0001C8.85482 15.0001 8.44247 14.9274 7.80513 14.6336C7.20563 14.3573 6.54425 13.9482 5.93445 13.448C4.60667 12.3588 4 11.2543 4 10.5331H0C0 13.0858 1.78133 15.2148 3.39755 16.5406C4.25975 17.2479 5.20937 17.8417 6.13087 18.2664C7.01453 18.6736 8.03318 19.0001 9 19.0001V15.0001ZM4 10.5331C4 8.27142 4.00004 5.56503 4.01785 4.10444L0.0181487 4.05567C-3.93045e-05 5.54708 0 8.28469 0 10.5331H4ZM4.018 4.08005C4.018 4.2565 3.9111 4.41547 3.74502 4.48151L2.26698 0.764599C0.908902 1.30464 0.018 2.6196 0.018 4.08005H4.018ZM3.58088 4.53865C4.26938 4.33203 6.69545 3.99525 8.99583 4.00005L9.00417 5.8541e-05C6.51255 -0.00514101 3.64862 0.342079 2.43112 0.707457L3.58088 4.53865ZM9 4.00005H9.056V5.41862e-05H9V4.00005Z",fill:"#1F2E29",mask:"url(#path-1-outside-1_546_22171)"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8121 6.33333C11.9526 6.34236 12.087 6.37446 12.2135 6.43667C12.5355 6.5972 12.7512 6.92829 12.7683 7.28848C12.7733 7.39684 12.7603 7.5052 12.7312 7.60954C12.688 7.76004 12.6098 7.89348 12.5074 8.01087C11.3616 9.21084 10.1878 10.3847 8.9878 11.5305C8.90653 11.6017 8.81723 11.6629 8.71791 11.7071C8.46106 11.8195 8.16307 11.8195 7.90723 11.7071C7.80689 11.6629 7.7186 11.6017 7.63633 11.5305C6.93301 10.8583 6.24473 10.171 5.57351 9.46769C5.47118 9.34929 5.39292 9.21686 5.34978 9.06636C5.31667 8.94696 5.30463 8.82255 5.31566 8.69915C5.3277 8.57574 5.36182 8.45534 5.417 8.34397C5.46516 8.24765 5.52937 8.15836 5.60562 8.08211C5.86046 7.82726 6.24273 7.72794 6.58987 7.82626C6.75542 7.87342 6.8999 7.96372 7.02431 8.08211L8.31257 9.37036C9.23762 8.4443 10.1436 7.49818 11.0897 6.59319C11.1249 6.56309 11.1249 6.56309 11.161 6.53399C11.3155 6.42363 11.484 6.35841 11.6737 6.33634C11.7198 6.33333 11.766 6.33132 11.8121 6.33333V6.33333Z",fill:"white"}}]},e.exports.default=e.exports},81720:function(e){e.exports={name:"svg",attrs:{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"mask",attrs:{id:"path-1-outside-1_538_22172",maskUnits:"userSpaceOnUse",x:"0",y:"-6.10352e-05",width:"18",height:"19",fill:"black"},childs:[{name:"rect",attrs:{fill:"white",y:"-6.10352e-05",width:"18",height:"19"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 1.99999C11.438 1.99999 14.048 2.33999 14.994 2.62299C15.59 2.85999 15.982 3.43799 15.982 4.07999C16 5.55599 16 8.27799 16 10.533C16 13.794 11.261 16.975 9.026 17H9C6.776 17 2 13.807 2 10.533C2 8.27799 2 5.55599 2.018 4.07999C2.018 3.43799 2.41 2.85999 3.006 2.62299C3.959 2.33699 6.604 1.99499 9 1.99999H9.056V1.99999Z"}}]},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.056 1.99999C11.438 1.99999 14.048 2.33999 14.994 2.62299C15.59 2.85999 15.982 3.43799 15.982 4.07999C16 5.55599 16 8.27799 16 10.533C16 13.794 11.261 16.975 9.026 17H9C6.776 17 2 13.807 2 10.533C2 8.27799 2 5.55599 2.018 4.07999C2.018 3.43799 2.41 2.85999 3.006 2.62299C3.959 2.33699 6.604 1.99499 9 1.99999H9.056V1.99999Z",fill:"#0DC268"}},{name:"path",attrs:{d:"M14.994 2.62299L15.733 0.764538L15.6514 0.732075L15.5672 0.706895L14.994 2.62299ZM15.982 4.07999H13.982V4.09219L13.9821 4.10438L15.982 4.07999ZM9.026 17V19H9.03719L9.04837 18.9999L9.026 17ZM2.018 4.07999L4.01785 4.10438L4.018 4.09219V4.07999H2.018ZM3.006 2.62299L2.43112 0.707396L2.34781 0.732398L2.26698 0.764538L3.006 2.62299ZM9 1.99999L8.99583 3.99999H9V1.99999ZM9.056 3.99999C11.3433 3.99999 13.7367 4.33443 14.4208 4.53909L15.5672 0.706895C14.3593 0.345552 11.5327 -6.84891e-06 9.056 -6.84891e-06V3.99999ZM14.255 4.48145C14.0889 4.41541 13.982 4.25644 13.982 4.07999H17.982C17.982 2.61954 17.0911 1.30458 15.733 0.764538L14.255 4.48145ZM13.9821 4.10438C14 5.56496 14 8.27135 14 10.533H18C18 8.28463 18 5.54702 17.9819 4.0556L13.9821 4.10438ZM14 10.533C14 11.2506 13.3991 12.3493 12.0796 13.4363C11.4733 13.9356 10.8146 14.3454 10.2154 14.624C9.58022 14.9193 9.16101 14.9984 9.00363 15.0001L9.04837 18.9999C10.0085 18.9891 11.0198 18.6612 11.9018 18.2511C12.8197 17.8243 13.7648 17.2304 14.6227 16.5237C16.2314 15.1987 18 13.0764 18 10.533H14ZM9.026 15H9V19H9.026V15ZM9 15C8.85482 15 8.44247 14.9273 7.80513 14.6336C7.20563 14.3573 6.54425 13.9482 5.93445 13.4479C4.60667 12.3587 4 11.2542 4 10.533H0C0 13.0858 1.78133 15.2147 3.39755 16.5405C4.25975 17.2478 5.20937 17.8416 6.13087 18.2663C7.01453 18.6736 8.03318 19 9 19V15ZM4 10.533C4 8.27136 4.00004 5.56496 4.01785 4.10438L0.0181487 4.0556C-3.93045e-05 5.54702 0 8.28463 0 10.533H4ZM4.018 4.07999C4.018 4.25644 3.9111 4.41541 3.74502 4.48145L2.26698 0.764538C0.908902 1.30458 0.018 2.61954 0.018 4.07999H4.018ZM3.58088 4.53859C4.26938 4.33197 6.69545 3.99519 8.99583 3.99999L9.00417 -2.49415e-06C6.51255 -0.00520204 3.64862 0.342018 2.43112 0.707396L3.58088 4.53859ZM9 3.99999H9.056V-6.84891e-06H9V3.99999Z",fill:"#EDFBF8",mask:"url(#path-1-outside-1_538_22172)"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8121 6.33339C11.9526 6.34242 12.087 6.37452 12.2135 6.43673C12.5355 6.59726 12.7512 6.92835 12.7683 7.28854C12.7733 7.3969 12.7603 7.50526 12.7312 7.60961C12.688 7.7601 12.6098 7.89354 12.5074 8.01093C11.3616 9.2109 10.1878 10.3848 8.9878 11.5306C8.90653 11.6018 8.81723 11.663 8.71791 11.7071C8.46106 11.8195 8.16307 11.8195 7.90723 11.7071C7.80689 11.663 7.7186 11.6018 7.63633 11.5306C6.93301 10.8583 6.24473 10.1711 5.57351 9.46775C5.47118 9.34936 5.39292 9.21692 5.34978 9.06642C5.31667 8.94703 5.30463 8.82261 5.31566 8.69921C5.3277 8.5758 5.36182 8.4554 5.417 8.34403C5.46516 8.24771 5.52937 8.15842 5.60562 8.08217C5.86046 7.82733 6.24273 7.728 6.58987 7.82632C6.75542 7.87348 6.8999 7.96378 7.02431 8.08217L8.31257 9.37042C9.23762 8.44436 10.1436 7.49824 11.0897 6.59325C11.1249 6.56315 11.1249 6.56315 11.161 6.53405C11.3155 6.42369 11.484 6.35847 11.6737 6.3364C11.7198 6.33339 11.766 6.33138 11.8121 6.33339V6.33339Z",fill:"white"}}]},e.exports.default=e.exports},2461:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},childs:[{name:"path",attrs:{fill:"currentColor","fill-rule":"evenodd",d:"M14.121 9c-.395 0-.736 0-1.017-.023a2.29 2.29 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.984 2.29 2.29 0 0 1-.222-.875C11 6.616 11 6.246 11 5.85v-.7c0-.395 0-.765.023-1.046a2.29 2.29 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.29 2.29 0 0 1 .875-.222C13.384 2 13.726 2 14.12 2h.758c.395 0 .736 0 1.017.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.023.28.023.65.023 1.046v.7c0 .395 0 .765-.023 1.046a2.29 2.29 0 0 1-.222.875 2.25 2.25 0 0 1-.983.984c-.284.144-.58.198-.876.222C15.616 9 15.274 9 14.88 9h-.758zM16.5 5.15v.7c0 .432 0 .712-.018.924-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.317-.064a.75.75 0 0 1-.327-.328c-.02-.037-.047-.112-.064-.316a12.796 12.796 0 0 1-.018-.924v-.7c0-.432 0-.712.018-.924.017-.204.045-.28.064-.316a.75.75 0 0 1 .327-.328c.038-.02.113-.047.317-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.328c.02.037.047.112.064.316.017.212.018.492.018.924zM11 14.121c0-.395 0-.736.023-1.017a2.29 2.29 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.29 2.29 0 0 1 .875-.222c.28-.023.65-.023 1.046-.023h.7c.395 0 .765 0 1.046.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.023.28.023.622.023 1.017v.758c0 .395 0 .736-.023 1.017a2.29 2.29 0 0 1-.222.875 2.25 2.25 0 0 1-.983.984c-.284.144-.58.198-.876.222-.28.023-.65.023-1.046.023h-.7c-.395 0-.765 0-1.046-.023a2.29 2.29 0 0 1-.875-.222 2.251 2.251 0 0 1-.984-.983 2.304 2.304 0 0 1-.222-.876C11 15.616 11 15.274 11 14.88v-.758zm3.85 2.379h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.317-.064a.75.75 0 0 1-.327-.328c-.02-.037-.047-.112-.064-.316a12.796 12.796 0 0 1-.018-.924v-.7c0-.432 0-.712.018-.924.017-.204.045-.28.064-.317a.751.751 0 0 1 .327-.327c.038-.02.113-.047.317-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.327c.02.038.047.113.064.317.017.212.018.492.018.924v.7c0 .432 0 .712-.018.924-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018zM2 5.121v.758c0 .395 0 .736.023 1.017.024.297.078.592.222.875.216.424.56.768.984.984.283.144.578.198.875.222C4.384 9 4.754 9 5.15 9h.7c.395 0 .765 0 1.046-.023a2.29 2.29 0 0 0 .875-.222 2.25 2.25 0 0 0 .984-.984 2.29 2.29 0 0 0 .222-.875C9 6.616 9 6.274 9 5.88v-.76c0-.395 0-.736-.023-1.017a2.29 2.29 0 0 0-.222-.875 2.25 2.25 0 0 0-.984-.984 2.29 2.29 0 0 0-.875-.222C6.616 2 6.246 2 5.85 2h-.7c-.395 0-.765 0-1.046.023a2.29 2.29 0 0 0-.875.222 2.25 2.25 0 0 0-.984.984 2.29 2.29 0 0 0-.222.875C2 4.384 2 4.726 2 5.12zM5.5 7.5h.35c.432 0 .712 0 .924-.018.204-.017.28-.045.316-.064a.75.75 0 0 0 .328-.328c.02-.037.047-.112.064-.316.017-.212.018-.492.018-.924v-.7c0-.432 0-.712-.018-.924-.017-.204-.045-.28-.064-.316a.75.75 0 0 0-.328-.328c-.037-.02-.112-.047-.316-.064A12.754 12.754 0 0 0 5.85 3.5h-.7c-.432 0-.712 0-.924.018-.204.017-.28.045-.316.064a.75.75 0 0 0-.328.328c-.02.037-.047.112-.064.316-.017.212-.018.492-.018.924v.7c0 .432 0 .712.018.924.017.204.045.28.064.316a.75.75 0 0 0 .328.328c.037.02.112.047.316.064.212.017.492.018.924.018h.35zM2 14.121c0-.395 0-.736.023-1.017a2.29 2.29 0 0 1 .222-.875 2.25 2.25 0 0 1 .984-.984 2.29 2.29 0 0 1 .875-.222C4.384 11 4.754 11 5.15 11h.7c.395 0 .765 0 1.046.023.297.024.592.078.875.222.424.216.768.56.984.984.144.283.198.578.222.875.023.28.023.622.023 1.017v.758c0 .395 0 .736-.023 1.017a2.29 2.29 0 0 1-.222.875 2.25 2.25 0 0 1-.984.984 2.29 2.29 0 0 1-.875.222C6.616 18 6.246 18 5.85 18h-.7c-.395 0-.765 0-1.046-.023a2.29 2.29 0 0 1-.875-.222 2.25 2.25 0 0 1-.984-.983 2.304 2.304 0 0 1-.222-.876C2 15.616 2 15.274 2 14.88v-.758zM5.85 16.5h-.7c-.432 0-.712 0-.924-.018-.204-.017-.28-.045-.316-.064a.75.75 0 0 1-.328-.328c-.02-.037-.047-.112-.064-.316a12.753 12.753 0 0 1-.018-.924v-.7c0-.432 0-.712.018-.924.017-.204.045-.28.064-.317a.75.75 0 0 1 .328-.327c.037-.02.112-.047.316-.064.212-.017.492-.018.924-.018h.7c.432 0 .712 0 .924.018.204.017.28.045.316.064a.75.75 0 0 1 .328.327c.02.038.047.113.064.317.017.212.018.492.018.924v.7c0 .432 0 .712-.018.924-.017.204-.045.28-.064.316a.75.75 0 0 1-.328.328c-.037.02-.112.047-.316.064-.212.017-.492.018-.924.018z","clip-rule":"evenodd"}}]},e.exports.default=e.exports},79677:function(e){e.exports={name:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"none"},childs:[{name:"g",attrs:{"clip-path":"url(#a)"},childs:[{name:"rect",attrs:{width:"22",height:"22",fill:"#005FF9",rx:"5.5"}},{name:"path",attrs:{fill:"#fff","fill-rule":"evenodd",d:"M5.687 4.548c.865-.964 2.009-1.619 3.364-1.619 1.368 0 2.313.662 2.761 1.714.428 1.004.383 2.299.01 3.614-.68 2.394-2.521 5.138-5.385 7.069.29.259.643.44 1.066.533.727.16 1.75.076 3.156-.48.493-.194.958-.392 1.398-.594-.13-1.25.091-2.775.666-4.084.698-1.59 2.065-3.131 4.17-3.131 1.731 0 2.662 1.767 2.242 3.53-.395 1.66-1.871 3.323-4.676 4.474.114.056.245.105.395.143.595.15 1.438.101 2.417-.325 2.182-.948 3.983-1.425 5.596-1.324 1.398.088 2.568.604 3.67 1.468.08-.061.167-.126.261-.193.614-.435 1.53-.956 2.8-1.371 2.546-.831 6.443-1.216 12.084.272.444.117.66.582.48 1.037-.178.456-.683.73-1.127.613-5.404-1.426-8.952-1.01-11.09-.311-1.072.35-1.807.776-2.26 1.097-.226.16-.384.297-.479.385-.047.044-.08.076-.096.094l-.01.01-.004.005a1.013 1.013 0 0 1-.625.342.783.783 0 0 1-.633-.184c-1.11-1.005-2.131-1.49-3.305-1.564-1.2-.075-2.678.271-4.742 1.169-1.31.57-2.562.687-3.567.434-.68-.17-1.274-.522-1.657-1.036-.46.21-.943.415-1.45.615-1.637.646-3.04.829-4.198.574a3.75 3.75 0 0 1-2.12-1.267c-.938.422-2.1.78-3.25 1.047-1.476.344-3.035.563-4.24.563-.995 0-1.793-.155-2.261-.607-.568-.548-.44-1.285-.21-1.785.217-.473.578-.891.831-1.156a7.068 7.068 0 0 1 .493-.467l.01-.01.004-.002.002-.001.507.62-.506-.621c.388-.323.93-.306 1.21.036.279.343.191.88-.196 1.203l-.001.001-.001.001a1.589 1.589 0 0 0-.088.078c-.064.058-.151.14-.246.24-.205.214-.376.435-.453.601a.383.383 0 0 0-.004.01c.116.056.425.156 1.135.156 1.03 0 2.443-.193 3.83-.515.983-.23 1.901-.512 2.627-.812-.767-1.962-.74-4.589-.108-6.815.366-1.29.958-2.533 1.803-3.474Zm-.1 9.414c2.463-1.659 4.014-4.001 4.569-5.957.307-1.084.286-1.965.043-2.536-.223-.522-.644-.836-1.375-.836-.725 0-1.35.326-1.904.944-.575.64-1.054 1.582-1.37 2.696-.548 1.932-.54 4.127.037 5.69Zm8.173.139c2.583-.999 3.482-2.306 3.69-3.177.26-1.097-.387-1.65-.783-1.65-1.03 0-1.826.693-2.365 1.921a6.774 6.774 0 0 0-.542 2.906Z","clip-rule":"evenodd"}}]},{name:"defs",attrs:{},childs:[{name:"clipPath",attrs:{id:"a"},childs:[{name:"rect",attrs:{width:"22",height:"22",fill:"#fff",rx:"5.5"}}]}]}]},e.exports.default=e.exports},65192:function(e){e.exports={name:"svg",attrs:{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"rect",attrs:{x:"7.16675",y:"3.5",width:"7.33333",height:"1.83333",rx:"0.605",fill:"white"}},{name:"rect",attrs:{x:"7.16675",y:"8.08325",width:"7.33333",height:"1.83333",rx:"0.605",fill:"white"}},{name:"rect",attrs:{x:"7.16675",y:"12.6667",width:"7.33333",height:"1.83333",rx:"0.605",fill:"white"}},{name:"circle",attrs:{cx:"4.41675",cy:"4.41675",r:"1.375",fill:"#FF9E00"}},{name:"circle",attrs:{cx:"4.41675",cy:"9",r:"1.375",fill:"#FF9E00"}},{name:"circle",attrs:{cx:"4.41675",cy:"13.5833",r:"1.375",fill:"#FF9E00"}}]},e.exports.default=e.exports},40132:function(e){e.exports={name:"svg",attrs:{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.25 1C6.66421 1 7 1.33579 7 1.75V2.00671C7.39296 1.99999 7.83006 2 8.31739 2H11.6826C12.1699 2 12.607 1.99999 13 2.00671V1.75C13 1.33579 13.3358 1 13.75 1C14.1642 1 14.5 1.33579 14.5 1.75V2.10571C14.9282 2.17028 15.3156 2.27785 15.6795 2.46322C16.4791 2.87068 17.1293 3.52085 17.5368 4.32054C17.7904 4.81824 17.8984 5.36012 17.9498 5.99013C18 6.60439 18 7.36493 18 8.31737V11.6826C18 12.6351 18 13.3956 17.9498 14.0099C17.8984 14.6399 17.7904 15.1818 17.5368 15.6795C17.1293 16.4791 16.4791 17.1293 15.6795 17.5368C15.1818 17.7904 14.6399 17.8983 14.0099 17.9498C13.3956 18 12.6351 18 11.6826 18H8.31737C7.36493 18 6.60439 18 5.99013 17.9498C5.36012 17.8983 4.81824 17.7904 4.32054 17.5368C3.52085 17.1293 2.87068 16.4791 2.46322 15.6795C2.20963 15.1818 2.10165 14.6399 2.05018 14.0099C1.99999 13.3956 1.99999 12.6351 2 11.6826V8.31739C1.99999 7.36494 1.99999 6.6044 2.05018 5.99013C2.10165 5.36012 2.20963 4.81824 2.46322 4.32054C2.87068 3.52085 3.52085 2.87068 4.32054 2.46322C4.68436 2.27785 5.07179 2.17028 5.5 2.10571V1.75C5.5 1.33579 5.83579 1 6.25 1ZM5.5 3.62958C5.29697 3.67352 5.13859 3.7299 5.00153 3.79973C4.48408 4.06338 4.06338 4.48408 3.79973 5.00153C3.67184 5.25252 3.58909 5.57503 3.54519 6.11228C3.5244 6.36682 3.51317 6.65467 3.50711 6.99H16.4929C16.4868 6.65467 16.4756 6.36682 16.4548 6.11228C16.4109 5.57503 16.3282 5.25252 16.2003 5.00153C15.9366 4.48408 15.5159 4.06338 14.9985 3.79973C14.8614 3.7299 14.703 3.67352 14.5 3.62958V3.75C14.5 4.16421 14.1642 4.5 13.75 4.5C13.3358 4.5 13 4.16421 13 3.75V3.50693C12.6183 3.50016 12.1752 3.5 11.65 3.5H8.35C7.8248 3.5 7.38172 3.50016 7 3.50693V3.75C7 4.16421 6.66421 4.5 6.25 4.5C5.83579 4.5 5.5 4.16421 5.5 3.75V3.62958ZM16.5 8.49H3.5V11.65C3.5 12.6425 3.50058 13.3417 3.54519 13.8877C3.58909 14.425 3.67184 14.7475 3.79973 14.9985C4.06338 15.5159 4.48408 15.9366 5.00153 16.2003C5.25252 16.3282 5.57503 16.4109 6.11228 16.4548C6.65829 16.4994 7.35753 16.5 8.35 16.5H11.65C12.6425 16.5 13.3417 16.4994 13.8877 16.4548C14.425 16.4109 14.7475 16.3282 14.9985 16.2003C15.5159 15.9366 15.9366 15.5159 16.2003 14.9985C16.3282 14.7475 16.4109 14.425 16.4548 13.8877C16.4994 13.3417 16.5 12.6425 16.5 11.65V8.49Z",fill:"currentColor"}}]},e.exports.default=e.exports},16945:function(e){e.exports={name:"svg",attrs:{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M2.00006 14C3.00006 16.5 4.5384 14.8315 6.00014 14M6.00014 14C11.0001 11.5 14.5001 3 10.5001 3C6.00014 3 3.50012 11 6.00014 14ZM6.00014 14C7.0217 15.2259 7.41881 16.2087 9.9083 15.2259C10.5405 14.9763 11.1234 14.7175 11.6587 14.4537M11.6587 14.4537C16.7447 11.9468 17.535 8.97785 15.5609 8.97785C12.9961 8.97785 11.1881 12.5486 11.6587 14.4537ZM11.6587 14.4537C11.9163 15.4966 13.1273 16.3144 15.0001 15.5C16.7772 14.7272 17.0001 14 18.0001 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}]},e.exports.default=e.exports},13620:function(e,t,n){"use strict";n.d(t,{l:function(){return c}});var r=n(10261),a=n(66423),i=n.n(a),o=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function l(e){var t=e.emails,n=e.fields||[];if(!t)return Promise.reject({emails:"required"});if(!Array.isArray(t))return Promise.reject({emails:"invalid"});else return n.push("last_seen"),n.push("flags"),i().call("ab/smart",{by_email:t,simple:!0,fields:n})}var c=(0,r.createGlobalAction)("ab/smart",(function(e){return o(void 0,void 0,Promise,(function(){var t,n,r;return s(this,(function(a){switch(a.label){case 0:return[4,l(e)];case 1:return t=a.sent(),n=t.body||{},r=n.contacts||[],[2,e.emails.reduce((function(e,t){if(!e.contacts)e.contacts={};return e[t]=r.some((function(e){if(!Array.isArray(e.emails))return!1;else return e.emails.includes(t)})),r.forEach((function(n){if(n&&Array.isArray(n.emails)&&n.emails.includes(t)){var r=n.last_seen?Object.assign({},n.last_seen):{status:"",client_type:""};e.contacts&&(e.contacts[t]=r)}})),e}),{})]}}))}))}))},43055:function(e,t,n){"use strict";n.d(t,{v:function(){return c}});var r=n(10261),a=n(66423),i=n.n(a),o=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function l(e){var t=e.emails,n=e.only_memcache,r=void 0===n?!0:n;if(!t)return Promise.reject({emails:"required"});if(!Array.isArray(t))return Promise.reject({emails:"invalid"});else return i().call("ab/lastseen",{emails:t,only_memcache:r})}var c=(0,r.createGlobalAction)("ab/lastseen",(function(e){return o(void 0,void 0,Promise,(function(){var t,n,r;return s(this,(function(a){switch(a.label){case 0:return[4,l(e)];case 1:return t=a.sent(),n=t.body||[],r=new Map(n.map((function(e){return[e.email,e.last_seen]}))),[2,e.emails.reduce((function(e,t){var n=r.get(t);if(!n)return e;else return e[t]=n,e}),{})]}}))}))}))},62387:function(e,t,n){"use strict";n.d(t,{UB:function(){return v},pV:function(){return _},dB:function(){return b}});var r,a,i=n(10261),o=n(96596),s=n.n(o),l=n(39783),c=n.n(l),d=n(92042),u=n.n(d),f=n(66423),m=n.n(f),h=n(63062),p=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e.TaggedPersonal="tagged_personal",e.TaggedDocuments="tagged_documents",e.TaggedImportant="tagged_important",e.TaggedUrgent="tagged_urgent",e.TaggedNeedsReply="tagged_needs_reply"}(a||(a={}));var v=((r={})[a.TaggedUrgent]=i18n("Срочно"),r[a.TaggedImportant]=i18n("Важно"),r[a.TaggedNeedsReply]=i18n("Ответить"),r[a.TaggedDocuments]=i18n("Документы"),r[a.TaggedPersonal]=i18n("Личное"),r),_=(0,i.createGlobalAction)("colortags/change",(function(e){return p(void 0,void 0,Promise,(function(){var t,n,r,a,i;return g(this,(function(o){switch(o.label){case 0:if(t=e.model,n=e.tags,r=u().getByMessageId(t.id),(a={})[t.id]=t.get("flags.tags"),r)a[r.id]=r.get("flags.tags");if(t instanceof u())t.get("messages").forEach((function(e){e=c().all.get(e.id),a[e.id]=e.get("flags.tags")}));if(t.set("flags.tags",n),r)r.set("flags.tags",function(e,t,n){var r={};return t.get("messages").forEach((function(t){var a=(t=c().all.get(t.id)).get("flags.tags");if(t.id===e.id)a=n;null==a||a.forEach((function(e){if(!r[e])r[e]=!0}))})),Object.keys(r)}(t,r,n));if(t instanceof u())t.get("messages").forEach((function(e){(e=c().all.get(e.id)).set("flags.tags",n)}));return[4,m().call(t.changeColorTagsUrl,{ids:[t.get("id")],tags:n})];case 1:if(null==(i=o.sent())?void 0:i.error){if(t.set("flags.tags",a[t.id]),r)r.set("flags.tags",a[r.id]);if(t instanceof u())t.get("messages").forEach((function(e){(e=c().all.get(e.id)).set("flags.tags",a[e.id])}))}return[2,{updatedIds:i.body||[]}]}}))}))})),b=function(e,t){var n=e.get("flags.tags").filter((function(e){return e!==t}));_({model:e,tags:n})};_.rejected.subscribe((function(e){var t=e.error;s().add("setColorTags failed",t),h.default.add({type:h.default.types.error,text:i18n("Что-то пошло не так"),qa:"on-delete-tag-notify"})}))},14671:function(e,t,n){"use strict";n.d(t,{S:function(){return u},Z:function(){return f}});var r=n(17717),a=n.n(r),i=n(50987),o=n(66423),s=n.n(o),l=n(39939),c=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function u(e){return c(this,void 0,void 0,(function(){var t,n,r,o;return d(this,(function(c){switch(c.label){case 0:return[4,e.authorize()];case 1:return t=c.sent(),n=t.access_token,r=t.login,s().setup({access_token:n,email:r}),[4,a().fetch()];case 2:return c.sent(),[4,l.default.login()];case 3:return o=c.sent(),i.Z.set("initialUser",o),i.Z.set("initialUser.email",s().setup("email")),[2]}}))}))}function f(){return c(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,window.vkMiniApp.init()];case 1:return e.sent(),[4,u(window.vkMiniApp)];case 2:return e.sent(),[2]}}))}))}},19275:function(e,t,n){"use strict";var r=n(332),a=n.n(r)()(window.__cfgOptions),i=window.sotaConfig.cfg;a.set(i),a.set("bundles-paths",window.bundlesPaths),a.set("themesPath",window.getThemesPath()),t.Z=a},50987:function(e,t,n){"use strict";var r=n(332),a=n.n(r),i=window.sotaConfig.userConfig,o=a()(i);i.api.forEach((function(e){if("/api/v1/user/short"===e.method)o.set("initialUser",e.data.body),o.set("initialUser.email",e.data.email)})),t.Z=o},54498:function(e,t,n){"use strict";n.r(t),n.d(t,{NAVIGATE:function(){return a},LOAD_MORE:function(){return i},UPDATE_ALL:function(){return o},DESTROY_THREADS_AND_MESSAGES:function(){return s},EXECUTE_JSSDK_ACTION:function(){return l},TOGGLE_METATHREAD:function(){return c},UPDATE_METATHREAD_FILTERS:function(){return d},LOAD_MORE_METATHREAD:function(){return u},TOGGLE_METATHREADS_SETTING:function(){return f},CHANGE_METATHREADS_SETTING:function(){return m},EDIT_METATHREADS_SETTINGS:function(){return h},TOGGLE_METATHREADS_SETTINGS:function(){return p},TOGGLE_THREADS_SETTING:function(){return g},TOGGLE_DISCOUNTS:function(){return v},UPDATE_SEARCH:function(){return _},UPDATE_LAYOUT_TYPE:function(){return b},TOGGLE_PONY_MODE:function(){return E},TOGGLE_COMPOSE_EXTEND_MODE:function(){return y},TOGGLE_FOLDER_SHORTCUTS:function(){return T},UPDATE_LAYOUT_SUPPORT_3_PANE:function(){return A},THREAD_LOAD_MORE:function(){return S},LOAD_PAGE:function(){return O},HIDE_PAYMENT_DIE:function(){return C},TOGGLE_TO_MYSELF_METATHREAD:function(){return w},TOGGLE_PAGINATOR:function(){return L},TOGGLE_TODO:function(){return k},SET_WIDGET:function(){return I},UPDATE_LAYOUT_SUPPORT_TODO:function(){return R},HIDE_SIDEBAR_FOOTER_PAY_NOTIFY_BADGE:function(){return D},DELETE_SENDER_FROM_UNSUBSCRIBE_LIST:function(){return M},COUNT_UNSUBSCRIBE_VIEW:function(){return P},HIDE_UNSUBSCRIBE_SENDER:function(){return N},TOGGLE_LETTERS_LIST_DIVIDERS:function(){return x}});var r=n(13624),a=n.n(r)().Loader.ACTION_NAVIGATE,i="LOAD_MORE",o="UPDATE_ALL",s="DESTROY_THREADS_AND_MESSAGES",l="EXECUTE_JSSDK_ACTION",c="TOGGLE_METATHREAD",d="UPDATE_METATHREAD_FILTERS",u="LOAD_MORE_METATHREAD",f="TOGGLE_METATHREADS_SETTING",m="CHANGE_METATHREADS_SETTING",h="EDIT_METATHREADS_SETTINGS",p="TOGGLE_METATHREADS_SETTINGS",g="TOGGLE_THREADS_SETTING",v="TOGGLE_DISCOUNTS",_="UPDATE_SEARCH",b="UPDATE_LAYOUT_TYPE",E="TOGGLE_PONY_MODE",y="TOGGLE_COMPOSE_EXTEND_MODE",T="TOGGLE_FOLDER_SHORTCUTS",A="UPDATE_LAYOUT_SUPPORT_3_PANE",S="THREAD_LOAD_MORE",O="LOAD_PAGE",C="HIDE_PAYMENT_DIE",w="TOGGLE_TO_MYSELF_METATHREAD",L="TOGGLE_PAGINATOR",k="TOGGLE_TODO",I="SET_WIDGET",R="UPDATE_LAYOUT_SUPPORT_TODO",D="HIDE_SIDEBAR_FOOTER_PAY_NOTIFY_BADGE",M="DELETE_SENDER_FROM_UNSUBSCRIBE_LIST",P="COUNT_UNSUBSCRIBE_VIEW",N="HIDE_UNSUBSCRIBE_SENDER",x="TOGGLE_LETTERS_LIST_DIVIDERS"},86145:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=window.requestAnimationFrame||function(e){return window.setTimeout(e,12)},a=window.cancelAnimationFrame||function(e){return window.clearTimeout(e)};function i(e){return Boolean("type"in e&&"details"in e&&e.details)}var o=function(){function e(){this._emissionPid=null,this._changesBatch=[],this._handleBatchEmission=this._handleBatchEmission.bind(this)}return e.prototype._handleBatchEmission=function(){var e=this,t=this._changesBatch;this._changesBatch=[],t.forEach((function(t){e.emit("action",{type:"action",details:t})})),this.emit("change",{type:"change",details:{changes:t}}),t.forEach((function(t){e.emit("actionend",{type:"actionend",details:t})})),this.emit("afterchange",{type:"afterchange"})},e.prototype.dispatch=function(e){this.emit("beforeaction",{type:"beforeaction",details:{action:e}})},e.prototype.updateAll=function(){throw new Error("Not implemented")},e.prototype.getData=function(){throw new Error("Not implemented")},e.prototype.getLoader=function(){throw new Error("Not implemented")},e.prototype.notifyNextData=function(e,t,n){if(this._changesBatch.push({request:e,action:t,data:n}),this._emissionPid)a(this._emissionPid);this._emissionPid=r(this._handleBatchEmission)},e}();t.Z=o},38945:function(e,t,n){"use strict";n.d(t,{dv:function(){return u},DS:function(){return m}});var r=n(32161),a=n(60033),i=n.n(a),o=n(50987),s=n(21211),l=n(66423),c=n(39939),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function u(){return{api:{mode:r.PushAPIMode.Firebase,apiKey:"AIzaSyCXIiICr-x1z94Uw-0nk0qyFkQHcFjk7X0",authDomain:"fluorcorpmailru.firebaseapp.com",databaseURL:"https://fluorcorpmailru.firebaseio.com",projectId:"fluorcorpmailru",storageBucket:"fluorcorpmailru.appspot.com",messagingSenderId:"61247752867",appId:"1:61247752867:web:f3f93e07c1c8e47fb84d16",vapidKey:"BNplt3Du3_Pmt1EEEWG6ly2NA_agH5GSTx5k4ySgmye-Qt9HohZJ8FS7Otk2LumQuZ3VVLXnNxbDsruQFwsFbCo"},applicationName:"mail_octavius",clientName:"ru.mail.e",locale:o.Z.LANG,platform:"webpush"}}var f;function m(){return(s.SWBOX||(0,r.hasServiceWorkerTag)("firebase-v1"))&&r.SWBoxImpl.isSupported()}function h(e){var t=c.default.user.getEmail(),n="https://".concat(location.host),a=(0,r.createServiceWorker)(t),o=function(){var e={template:"default",defaultTitle:i18n("Почта Mail.ru"),defaultBody:i18n("Вам пришло новое письмо"),defaultIcon:"https://img.imgsmail.ru/r/default/ico/icon-192.png",emptySubjectText:i18n("Без темы")},t=function(e){return{title:"${config.defaultTitle}",titlePlural:[i18n("{count} новых писем",{count:"{count}"}),i18n("{count} новое письмо",{count:"{count}"}),i18n("{count} новых письма",{count:"{count}"})],icon:"${config.defaultIcon}",tag:"mail.notification.${email}",description:"${config.defaultBody}",body:"${config.defaultBody}",defaultAction:{action:"octavius.open",url:e}}}(n),r=function(e){return{title:"${fetchedData.title}",titlePlural:[i18n("{count} новых писем",{count:"{count}"}),i18n("{count} новое письмо",{count:"{count}"}),i18n("{count} новых письма",{count:"{count}"})],icon:"${fetchedData.icon}",tag:"mail.notification.${email}",description:"${fetchedData.description}",body:"${fetchedData.body}",actions:[{action:"mailapi.message.markRead",title:i18n("Прочитано"),url:e+"/${fetchedData.folderId}/${fetchedData.threadId}/?x-email=${email_encoded}"},{action:"mailapi.message.remove",title:i18n("Удалить"),url:e+"/${fetchedData.folderId}/${fetchedData.threadId}/?x-email=${email_encoded}"}],defaultAction:{action:"message.open",url:e+"/${fetchedData.folderId}/${fetchedData.threadId}/?x-email=${email_encoded}"}}}(n),o=u();a.config({project:"octavius",logSilentErrors:s.SWBOX_LOG_SILENT_ERRORS,analyticsRequest:s.SWBOX_ANALYTICS_REQUEST,tokenUpdateInterval:s.SWBOX_TOKEN_UPDATE_INTERVAL,rpc:{enabled:!0,config:{urls:{project:n,token:"".concat(l.setup("baseUrl"),"v1/tokens"),sdc:l.setup("sdcUrl")}}},xray:i().getConfig(),pushHandler:{enabled:!0,config:o,templates:{default:t,mail:r},pushes:{default:e,mail:d(d({},e),{template:"mail",dataFetcher:"mailMessageData"}),promo:{}}}})};if(!m())return a;else return a.register().then((function(){if(o(),a.pushManager)a.pushManager.on("message.open",(function(t){e.go("#read-letter",{folder:t.fetchedData.folderId,letter:t.fetchedData.threadId,id:t.fetchedData.messageId})}))})).catch((function(e){if("string"==typeof e&&"The operation is insecure."===e)i().send("push_security_error",{i:"octavius"})})),a}t.ZP={fetch:function(e){return f=null!=f?f:h(e.router),Promise.resolve(m()?f:void 0)},getInstance:function(){return f}}},22023:function(e,t,n){"use strict";n.d(t,{ce:function(){return s.WJ},kr:function(){return s.kr},h:function(){return s.h},OW:function(){return f},tn:function(){return m}});var r=n(17717),a=n.n(r),i=n(54498),o=n(96053),s=n(58475),l=n(75273),c=n(93286),d=n(57045),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},f=function(e){s.WJ.support3pane=e},m=function(e){s.WJ.supportWidget=e};t.ZP={match:(0,o.Z)(["#attachment","#attachment-editor"]).exclude,fetch:function(e,t,n,r){var o=n&&n.type,f=n.value,m=r&&r.uiLayout||s.WJ;switch(o){case i.UPDATE_LAYOUT_SUPPORT_3_PANE:return u(u({},m),{support3pane:f});case i.UPDATE_LAYOUT_SUPPORT_TODO:return u(u({},m),{supportWidget:f});case i.UPDATE_LAYOUT_TYPE:return a().get("use-3pane").save({state:"3pane"===f}),u(u({},m),{type:f});case i.TOGGLE_PONY_MODE:var h=!m.ponyMode;return a().get(s.R_).save({state:h}),(0,l.Fz)("ponymode",h?1:0),u(u({},m),{ponyMode:h});case i.TOGGLE_TODO:return(0,s.Pn)("widget-todo","widget-todo"!==m.widget||!m.widgetIsOpen),u(u({},m),{widget:"widget-todo",widgetIsOpen:(0,s.yI)("widget-todo")});case i.SET_WIDGET:var p=f.widget,g=f.open;return(0,s.Pn)(p,g),u(u({},m),{widget:p,widgetIsOpen:g});case i.TOGGLE_FOLDER_SHORTCUTS:h=!m.manualShortcuts;return(0,c.ZP)(["on_shortcuts_change",h?"on":"off"]),a().get(s.XX).save({state:h}),u(u({},m),{manualShortcuts:h});case i.TOGGLE_COMPOSE_EXTEND_MODE:h=!m.composeExtended;return(0,c.ZP)(["on_compose_extend_change",h?"on":"off"]),d.ZP.set(s.VA,h),u(u({},m),{composeExtended:h})}return m}}},58475:function(e,t,n){"use strict";n.d(t,{R_:function(){return u},XX:function(){return f},VA:function(){return m},kr:function(){return h},h:function(){return g},Pn:function(){return b},yI:function(){return E},WJ:function(){return y}});var r,a,i=n(17717),o=n.n(i),s=n(21211),l=n(82646),c=n(57045),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},u="octavius-disable-air-mode",f="octavius-folder-shortcuts",m="compose:extended",h={"widget-calendar":s.WIDGET_CALENDAR,"widget-notes":s.WIDGET_NOTES,"widget-todo":s.SHOW_TODO_TOGGLE,"widget-marusia":l.MARUSIA_IN_WIDGET,"widget-weather":s.WIDGET_WEATHER,"widget-notification":s.BELL_IN_WIDGET},p=null===(r=Object.entries(h).find((function(e){return e[1]})))||void 0===r?void 0:r[0],g=!!p,v=function(){return c.ZP.get("layout_widget",{email:!0})||!1},_=function(){return c.ZP.get("layout_widgetIsOpen",{email:!0})},b=function(e,t){c.ZP.set("layout_widget",e,{email:!0}),c.ZP.set("layout_widgetIsOpen",t,{email:!0})},E=function(e){return e===v()&&_()},y=d({type:s.USE_3PANE?"3pane":"2pane",support3pane:!0,ponyMode:(a=o().get(u),!s.TOUCH_MODE&&a&&a.state),manualShortcuts:function(){var e=o().get(f);return e&&e.state}(),composeExtended:c.ZP.get(m)||!1,supportWidget:!0},function(){var e=v(),t=_();if(!!(e&&h[e]))return{widget:e,widgetIsOpen:"boolean"==typeof t?t:s.WIDGET_COLUMN_DEFAULT_OPEN};var n=[[o().get("widget-calendar"),"widget-calendar"],[o().get("todo"),"widget-todo"]].sort((function(e,t){var n,r,a=e[0],i=t[0];return a&&i&&(+!!i.exist-+!!a.exist||+i.state-+a.state||(null===(n=i.getTime)||void 0===n?void 0:n.call(i))-(null===(r=a.getTime)||void 0===r?void 0:r.call(a)))}))[0],r=n[0],a=n[1],i=a&&h[a]&&r&&r.isExist(),l=i?r.state:s.WIDGET_COLUMN_DEFAULT_OPEN,c=i?a:p;return b(c,l),{widget:c,widgetIsOpen:l}}())},29608:function(e,t,n){"use strict";n.d(t,{N6:function(){return M}});var r=n(63876),a=n.n(r),i=n(52745),o=n(70235),s=n(97899),l=n(21211),c=n(21280),d=n(82525),u=n(27642),f=n(4872),m=n.n(f),h=n(40803),p=n(53381),g=n(87623),v=n(95218),_=n(36332),b=n(73173),E=n(9125),y=n(10849),T=n(78364),A=n(8109),S=n(7202),O=n(3333),C=n(39057),w=n(55674),L=n(75273),k=n(2335),I=n(77917),R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},D=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},M=function(e,t,n,r){if(l.HIDE_TOYS===l.BL_PROP_NAME)return!1;var i=r?l.ADV_LIST_METATHREAD_CONFIG:l.ADV_LIST_DEFAULT_CONFIG,o=!(0,d.b)(i.mimic)&&I.default.isEnabled(),s=L.uZ.list2pane,c=void 0===s?{}:s,u=L.uZ.list3pane,f=void 0===u?{}:u,m=!!c.mimicId&&!!f.mimicId;if(o&&!m)return!1;var h=P(t,i,n,r),p=h.advConfig,g=h.currentFolderConfig,v=!!a().placement("list2pane"),_=!!a().placement("list3pane"),b=(0,d.b)(i.enable),E=t.support3pane,y=t.type,T=E&&"3pane"===y?_:v,A=(0,d.b)(g.enable),S=(0,d.b)(p.enable);if(!T||!function(e){var t=e.filter((function(e){return"boolean"==typeof e}));if(t.length>0)return t[t.length-1];else return!1}([b,A,S]))return!1;var O=N(p).advMinLetters;if(e.length<=O)return!1;else return!0},P=function(e,t,n,r){var a=r?l.ADV_LIST_METATHREAD_SPECIFIC_CONFIG:l.ADV_LIST_FOLDER_CONFIG,i=e.support3pane,o=e.type,s=i&&"3pane"===o?"3pane":"2pane",c=a[n]||{"2pane":{},"3pane":{}};return{advConfig:R(R({},t[s]),c[s]),currentFolderConfig:c,paneKey:s}},N=function(e){var t=e.start,n=e.interval,r=e.minLetters;return{advStart:parseInt(t,10),advInterval:parseInt(n,10),advMinLetters:parseInt(r||t,10)}},x=function(e,t,n,r,a){var i=r?l.ADV_LIST_METATHREAD_CONFIG:l.ADV_LIST_DEFAULT_CONFIG;if(M(e,t,n,r)){var o=t.support3pane&&"3pane"===t.type;if(!(l.ADS_MOVE_TOP_LINE&&(o&&l.ADS_MOVE_TOP_LINE_3PANE||!o&&l.ADS_MOVE_TOP_LINE_2PANE)&&l.NEW_TOOLBAR))for(var s=P(t,i,n,r),c=s.advConfig,d=s.paneKey,u=N(c),f=u.advStart,m=u.advInterval,h=0,g=f;g<e.length;g+=m,h++){var v=p.Z.createAdvLetter(n,g,h,d,r,a);e.splice(g,0,v)}}},F=u.Z.randomSeed();t.ZP={match:["#letters","#read-letter","#search","#search-letter"],defaults:[],fetch:function(e,t){var n=e.route&&e.route.is("#search #search-letter"),r=e.params.folder;return Promise.all([n?t("search"):t("status"),t("metathreads"),t("uiLayout"),t("uiThreadsSettings"),t("discounts")]).then((function(t){var a=t[0],d=t[1],f=t[2],p=t[3],L=t[4],R=a.letters||[],M=a.suggestLetters,P=!(!R||!R.length),N=!(!M||!M.length),U=1===a.page,H="number"==typeof a.page,B=[];if(l.ENABLE_LETTERS_DIVIDERS&&(0,c.pY)())try{B=(0,c.xR)(R,function(e){var t=e&&e.params,n=t&&t.folder;if(n===m().OUTBOX)return c.us;switch(w.Z.getSortingType()){case w.U.DateDesc:return l.ENABLE_LATEST_WITH_MONTHS_LETTERS_DIVIDERS?(0,c.Lk)():(0,c.MB)();case w.U.DateAsc:return(0,c.k9)();case w.U.FromDesc:case w.U.FromAsc:if(n===m().SENT)return l.ENABLE_AUTHOR_SEND_LETTERS_DIVIDERS?c.Rt:c.us;else return l.ENABLE_AUTHOR_LETTERS_DIVIDERS?c.aU:c.us;case w.U.SubjectDesc:case w.U.SubjectAsc:return l.ENABLE_SUBJECT_LETTERS_DIVIDERS?c.uF:c.us;default:return c.us}}(e))}catch(e){B=D([],R,!0),(0,i.coreLoggerDispatchSelfError)("insert_divder_error",e)}else B=R.slice();var Z,G,q,j,W,V,z=new u.Z(F);if(U||!H){if(function(e,t,n){return!e&&(t===m().TRASH||t===m().CHILD_TRASH||t===m().SPAM)&&n.length}(n,r,R))!function(e,t){e.unshift(O.Z.createTipLetter(t))}(B,r);var Y=N&&!P,K=Y?"suggestHeader":"header";if((P||N)&&n&&h.Z.shouldSuggestExcludedFolders())B.unshift(y.Z.createSearchActionLetter({withSuggestHeader:Y,type:K}))}if(!n||l.ADV_SEARCH_SEND_QUERY)x(B,f,r);var X,Q,J=(0,s.j8)(a);if(!n&&H&&p.paginator){for(j=0;j<J;j++)q=T.Z.createSkeletonLetter((a.offset||0)+J-j-1),B.unshift(q);var $=f.support3pane&&"3pane"===f.type,ee=(0,o.U0)($,f.ponyMode)*J,te=(0,s.ny)(a.page-1)||0,ne=Math.max(te-ee,0),re=_.Z.createHeightCompensation(ne);if(P)B.unshift(re)}var ae=k.default.isAdvVisible("spec-project-letter");for(j=0;j<B.length;j++){if(q=B[j],n)q.meta("_ui-index",j);var ie=m().all.get(r),oe=ie&&ie.isShareTake();if(n||!b.Z.isMetathread(q)){if(P&&!n&&I.default.isEnabled()&&z.random()<=.34)B.splice.apply(B,[j+1,0].concat([g.Z.createBaitLetter(j)])),j+=1}else{if(oe){B.splice(j,1);continue}if(!(G=(Z=d[q.id])&&Z.threads))continue;for(V=q.get("lastToggle"),W=(G=G.slice()).length;W--;){var se=G[W];if(!se.get("advModel"))se.setContainingMetathread(q)}if(!ae)x(G,f,q.get("metathread_data.folder"),!0,V);B.splice.apply(B,[j+1,0].concat(G,[q.getFooterModel()])),j+=G.length+1}}if(N&&(U||!H)){if(P)B.push(y.Z.createSearchActionLetter({type:"suggestSeparator"}));B.push.apply(B,M)}if(P)B.push(S.Z.createSpinnerLetter());if(r===m().INBOX&&P&&!n&&!l.WELCOME_BLOCK_DISABLED)B.unshift(C.Z.createWelcomeBlock());if(L&&P)B.unshift(v.Z.createDiscountsBlock());if(r===m().INBOX&&P&&!n)B.unshift(E.Z.createPromoBlock());if(P&&!n)B.unshift(A.Z.createSpecProjectLetter(r));if((0,s.M8)(e.router,p)&&!n&&"number"==typeof a.lettersTotal)for(X=(0,s.fE)(a),Q=(0,s.jV)(a),j=X;j<X+Q;j++)B.push(T.Z.createSkeletonLetter(j));return B}))}}},24737:function(e,t,n){"use strict";var r=n(17717),a=n.n(r),i=n(28692),o=n(54498),s=n(96053),l=n(21211),c=n(54901),d=n(61239),u=n.n(d),f=n(4872),m=n.n(f),h=n(36889),p=n.n(h),g=n(66423),v=n.n(g),_=n(63062),b=n(93286),E=function(){return(E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.Z={match:(0,s.Z)(["#attachment","#attachment-editor"]).exclude,defaults:{metathreadsSettings:{},metathreadsFiltersCount:0},fetch:function(e,t,n,r){var s=n&&n.type,d=r&&r.uiThreadsSettings;if(!d)return i.yc.group("app-fetch-ui-thd-stg-no-prev",(function(){return Promise.all([t("authUser")]).then((function(e){var t=e[0];return{threads:a().get("threads").state,metathreads:t.get("common_purpose_flags.metathreads_on"),toMyself:a().get("to-myself").state,paginator:a().get("octavius-paginator").state,metathreadsSettings:p().getMetathreadsSettingsFromVisibility(t.get("metathreads_visible")),discounts:!!a().get(l.DISCOUNTS_FLAG_NAME).state,metathreadsFiltersCount:0}}))}),{score:"fetch"});var f=function(e,t){var n={};if("boolean"!=typeof t)return n;else return Object.values(m().OWN_METATHREADS_IDS).forEach((function(r){if(!e.includes(r))n[r]=t?p().METATHREADS_STATES.ON:p().METATHREADS_STATES.OFF})),n},h=function(e){if("boolean"==typeof e){var t=f([m().TOMYSELF,m().PROMOTIONS],e);return(0,c.hM)(e).then((function(){return E(E({},d),{metathreads:e,metathreadsSettings:t})}))}},g=function(e){if(l.HIDE_METATHREADS)return d;var t=d.metathreadsSettings,n=E(E({},t),e),r=(0,c._B)(n[m().TOMYSELF]),a=m().OWN_METATHREADS_IDS.some((function(e){return e!==m().TOMYSELF&&(0,c._B)(n[e])}));return u().execute(e).then((function(){return E(E({},d),{metathreadsSettings:n,toMyself:r,metathreads:a})})).catch((function(e){var t=e.error,n=[t.status,t.message].filter((function(e){return e})).join("_");return(0,b.ZP)(["glng-user-edit-mthrds-err",n]),_.default.error({unique:!0}),d}))};return i.yc.group("app-fetch-ui-thd-stg",(function(){var e;switch(s){case o.TOGGLE_THREADS_SETTING:var t=a().get("threads"),r=!d.threads;return t.save({state:r}).then((function(){return E(E({},d),{threads:r})}));case o.TOGGLE_METATHREADS_SETTING:var i=!d.metathreads;return h(i);case o.CHANGE_METATHREADS_SETTING:i=n&&n.state;return h(i);case o.EDIT_METATHREADS_SETTINGS:var c=n&&n.settings;return g(c);case o.TOGGLE_METATHREADS_SETTINGS:i=n&&n.state,c=f([m().PROMOTIONS],i);return g(c);case o.TOGGLE_TO_MYSELF_METATHREAD:var u=n&&n.state,_=d.metathreadsSettings,b=E(E({},_),((e={})[m().TOMYSELF]=u?p().METATHREADS_STATES.ON:p().METATHREADS_STATES.OFF,e));return a().get("to-myself").save({state:u}).then((function(){return E(E({},d),{toMyself:u,metathreadsSettings:b})}));case o.TOGGLE_PAGINATOR:var y=n&&n.state;return a().get("octavius-paginator").save({state:y}).then((function(){return E(E({},d),{paginator:y})}));case o.TOGGLE_DISCOUNTS:var T=n&&n.state;return a().get(l.DISCOUNTS_FLAG_NAME).save({state:T}).then((function(){return E(E({},d),{discounts:T})}));case o.UPDATE_METATHREAD_FILTERS:if(!l.ENABLE_METATHREAD_FILTERS_SHORTCUT)return d;else return v().get("filters",{noAuto:!0}).then((function(e){var t;return E(E({},d),{metathreadsFiltersCount:(null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.length)||0})}));default:return d}}),{score:"fetch",appendix:!s?"no-act":"act"})}}},78594:function(e,t,n){"use strict";n.d(t,{y:function(){return d},A:function(){return u}});var r=n(10261),a=n(77159),i=n(48853),o=n(20799),s=n(82010),l=n(95437),c=n(57045),d=(0,r.createGlobalAction)("letter-fast-action/setFastAction",(function(e){return c.ZP.set(i.h,e,{email:!1}),{}})),u=(0,r.createGlobalAction)("letter-fast-action/callFastAction",(function(e){var t=(0,a.pJ)();if(t!==i.U.settings)l.default.handleEvent({type:t,details:{model:e}});else(0,o.Ll)(s.H.letterFastActionSettings);return{}}))},77159:function(e,t,n){"use strict";n.d(t,{sR:function(){return d},pJ:function(){return c},Ir:function(){return l}});var r=n(23220),a=n(25191),i=n(57045),o=(0,n(63975).createGlobalState)("letter-fast-action",{}),s=n(48853),l=function(){return i.ZP.get(s.h,{email:!1})||s.U.settings},c=function(){var e=l(),t=(0,a.p)().model.folder;if(e===s.U.archive&&(t.isTrash()||t.isSpam()||t.isArchive()))return s.U.remove;else return e},d=(0,r.createGlobalStateSelector)(o,c)},48853:function(e,t,n){"use strict";var r;n.d(t,{U:function(){return r},h:function(){return a}}),function(e){e.unread="togglestatus:unread",e.archive="archive",e.remove="remove",e.settings="settings"}(r||(r={}));var a="LetterFastActionKey"},27479:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r,a=n(63975),i=n(50987),o=(0,a.createGlobalState)("user/account",{accounts:[],email:null===(r=i.Z.get("initialUser"))||void 0===r?void 0:r.email})},20799:function(e,t,n){"use strict";n.d(t,{e1:function(){return s},YL:function(){return l},Ll:function(){return u},GZ:function(){return f},eY:function(){return m},dr:function(){return h},v3:function(){return p},cU:function(){return g},nC:function(){return v}});var r=n(10261),a=n(88564),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},o=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},s=(0,r.createGlobalAction)("vk-overlay/setSnackbar",(function(e){return{snackbar:e}})),l=(0,r.createGlobalAction)("vk-overlay/resetSnackbar",(function(){return{snackbar:null}})),c=(0,r.createGlobalAction)("vk-overlay/setPopout",(function(e){return{popout:e}})),d=(0,r.createGlobalAction)("vk-overlay/resetPopout",(function(){return{popout:null}})),u=(0,r.createGlobalAction)("vk-overlay/pushModal",(function(e){var t=o([],a.w.get().modalHistory,!0),n=i({},a.w.get().modalData),r="string"!=typeof e,s=r?null==e?void 0:e.id:e;if(r)n[s]=null==e?void 0:e.data;if(t.includes(s))t=t.splice(0,t.indexOf(s)+1);else t.push(s);return{modalHistory:t,modalData:n}})),f=(0,r.createGlobalAction)("vk-overlay/popModal",(function(){var e=o([],a.w.get().modalHistory,!0),t=i({},a.w.get().modalData),n=e.pop();if(n)delete t[n];return{modalHistory:e,modalData:t}})),m=(0,r.createGlobalAction)("vk-overlay/popModalHistory",(function(){var e=o([],a.w.get().modalHistory,!0);return e.pop(),{modalHistory:e,modalData:a.w.get().modalData}})),h=(0,r.createGlobalAction)("vk-overlay/popModalDataById",(function(e){var t=i({},a.w.get().modalData);return delete t[e],{modalHistory:a.w.get().modalHistory,modalData:t}})),p=(0,r.createGlobalAction)("vk-overlay/updateModalDataById",(function(e){var t,n=e.id,r=e.data;if(Object.keys(a.w.get().modalData).includes(n))return{modalHistory:a.w.get().modalHistory,modalData:i(i({},a.w.get().modalData),(t={},t[n]=r,t))};else return{modalHistory:a.w.get().modalHistory,modalData:a.w.get().modalData}})),g=(0,r.createGlobalAction)("vk-overlay/updateModalData",(function(e){var t=e.ids,n=e.data,r=i({},a.w.get().modalData),o=Array.isArray(n);return t.forEach((function(e,t){if(Object.keys(a.w.get().modalData).includes(e))if(o)r[e]=n[t];else r[e]=n})),{modalHistory:a.w.get().modalHistory,modalData:r}})),v=(0,r.createGlobalAction)("vk-overlay/resetModal",(function(){return{modalHistory:[],modalData:{}}}));a.w.on((0,r.anyOf)(s.fulfilled,l.fulfilled,c.fulfilled,d.fulfilled,u.fulfilled,f.fulfilled,h.fulfilled,m.fulfilled,v.fulfilled,p.fulfilled,g.fulfilled),(function(e){var t=e.payload;a.w.set((function(){return i(i({},a.w.get()),t)}))}))},88564:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(63975),a=(0,r.createGlobalState)("vk-overlay",{modalData:{},modalHistory:[],snackbar:null,popout:null})},82010:function(e,t,n){"use strict";var r;n.d(t,{H:function(){return r}}),function(e){e.account="account",e.letterFastActionSettings="letterFastActionSettings",e.folders="folders",e.foldersSettings="foldersSettings",e.cleanmaster="cleanmaster",e.spamWarningAlert="spamWarningAlert",e.settings="settings",e.language="language"}(r||(r={}))},15984:function(e,t,n){"use strict";n.d(t,{Wl:function(){return x},WH:function(){return G},bh:function(){return q},xS:function(){return Z},Lx:function(){return j},Ch:function(){return D},Fc:function(){return M},Y9:function(){return R},EI:function(){return N},JI:function(){return H},gy:function(){return F},Mk:function(){return B}});var r=n(60033),a=n.n(r),i=n(57123),o=n.n(i),s=n(21211),l=n(4872),c=n.n(l),d=n(39783),u=n.n(d),f=n(50241),m=n.n(f),h=n(92042),p=n.n(h),g=n(43572),v=n.n(g),_=n(73173),b=n(55674),E=n(50375),y=n(25191),T=n(54498),A=n(4183),S=n(31276),O=n(66423),C=n.n(O),w=n(17865),L=S.types.model({search:w.ZP}).create({search:(0,w.zW)()},{getRouter:y.p,getRPC:()=>C(),getDataSource:()=>({dispatch:A.default,UPDATE_ALL:T.UPDATE_ALL})}),k=function(){return(k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},I=["search_attaches","search_subject","search_snippet","thread_id"];function R(e,t,n){if(void 0===t)t={};if(void 0===n)n=0;for(var r,a,i=[],o=0;o<e.length;o++){if(r=e[o],_.Z.isMetathread(r))_.Z.patchThreadId(r),a=_.Z.map(r);else{if(a=p().all.get(r.id)){if(a.set(r,{sync:!0,clean:!0,resetChanged:!0}),Object.keys(a.changed).length)a.meta("changed",(a.meta("changed")||0)+1);if(t.currentId===r.id)t.changed=!!Object.keys(a.changed).length}else a=new(p())(r),p().all.set([a]);a.setContainingMetathread(null),a.meta("_ui-index",n+o)}i.push(a)}return i}function D(e){if(!e)return[];for(var t,n,r,a=[],i=0;i<e.length;i++){if(t=e[i],n=u().all.get(t.id))n.set(t);else n=new(u())(t),u().all.set([n]);for(var o=0;o<I.length;o++)r=I[o],n.meta(r,t[r]);n.meta("_ui-priority-index",i),a.push(n)}return a}function M(e){for(var t,n={},r=e.length;r--;)n[(t=e[r]).id]=t;return n}function P(e,t){for(var n,r=0;r<e.length;r++){if(!(n=e[r]))return!1;if(n.id===t)return!0}return!1}function N(e,t,n){var r=n.offset,a=n.limit,i=n.persistThread,o=e.slice(0,r),s=e.slice(r,r+a),l=e.slice(r+a,e.length),c=i instanceof v(),d=c?i.id:i,u=c?i:p().all.get(i);if(i&&P(s,d)&&!P(t,d)&&u&&!function(e){var t=e.getFolder();if(!t.isMetathread())return!1;var n=+t.get("id");return _.Z.all.find((function(e){return e.getMetathreadFolder()===n})).isExpanded()}(u))!function(e,t){for(var n=t.get("date"),r=0;r<e.length;r++)if(e[r].get("date")<n)return void e.splice(r,0,t);e.push(t)}(t,u);return function(e){for(var t,n={},r=[],a=0;a<e.length;a++)if(!n[(t=e[a]).id])n[t.id]=!0,r.push(t);return r}([].concat(o).concat(t).concat(l))}function x(e,t){for(var n,r=M(t),a=[],i=0;i<e.length;i++)if(!r[(n=e[i]).id])a.push(n);return a.concat(t)}function F(e){return k({},e&&e.status||{})}function U(){return o().active>0}function H(e){if(U()){if(s.IS_DEBUG)console.warn("[data-source] Изменения не были внесены в state, поскольку выполняется ".concat(o().active," действий."));return e}return null}function B(e){return H(F(e))}function Z(e,t,n){if(e instanceof E.SecureFolderNotOpenError){var r=F(n);return k(k({},r),{folders:r.folders,letters:[]})}throw e}function G(e){if("function"==typeof e.destroy)e.destroy();var t=p().all.get(e.id),n=u().all.get(e.id);if(t)t.destroy();if(n)n.destroy()}function q(){return L}var j={doRequest:function(e,t){return E.default.load(t)},concatThreadLists:x,mergeThreadLists:N,mapThreads:R,mapMessages:D,mapFolders:function(e){var t={},n=e.map((function(e){var n=c().all.get(e.id);if(n)n.set(e),n.meta("level",void 0);else n=new(c())(e),c().all.set([n]);return t[e.id.toString()]=!0,n}));return c().all.forEach((function(e){if(!t[null==e?void 0:e.get("id").toString()])c().all.remove(e)})),n},mapSharedMailboxes:function(e){if(void 0===e)e=[];var t={},n=e.map((function(e){var n,r,a,i=m().all.get(null===(n=e.owner)||void 0===n?void 0:n.email);if(i)i.set(e);else i=new(m())(k(k({},e),{id:null===(r=e.owner)||void 0===r?void 0:r.email})),m().all.set([i]);return t[null===(a=e.owner)||void 0===a?void 0:a.email]=!0,i}));return m().all.forEach((function(e){if(!t[null==e?void 0:e.get("owner.email")])m().all.remove(e)})),n},isActionLocked:U,mapCollectors:function(e){if(s.LOG_EMPTY_COLLECTORS&&!e)a().send("empty-cltrs-status",{rlog:"empty-collectors",rlog_message:{collectors:typeof e,place:"mapCollectors"}});return e||[]},getListLimit:function(){return s.LIST_LIMIT},getFilterQuery:function(){return b.Z.get()},getSortingQuery:function(){return b.Z.getSorting()},getCurrentTS:function(){return Date.now()},unreadMessagesNotificationsFix:function(e){E.default.emit("data",[e])},isSecureFolderNotOpenError:function(e){return e instanceof E.SecureFolderNotOpenError},getAllFolders:function(){return c().all.toArray()}}},52532:function(e,t,n){"use strict";n.d(t,{E:function(){return l}});var r=n(21211),a=n(4872),i=n.n(a),o=n(36889),s=n.n(o);function l(e,t,n,a){var o,l,c,d=null!==(l=null===(o=null==e?void 0:e.model)||void 0===o?void 0:o.uiThreadsSettings)&&void 0!==l?l:{};if((!d.metathreads||(null===(c=d.metathreadsSettings)||void 0===c?void 0:c[i().NEWSLETTERS])===s().METATHREADS_STATES.OFF)&&n&&!a)return!1;else return r.ACTUAL_LETTERS_DEFAULT_NEWSLETTERS&&(null==t?void 0:t.isNewsletters())||r.ACTUAL_LETTERS_DEFAULT_INBOX&&(null==t?void 0:t.isInbox())}},70235:function(e,t,n){"use strict";n.d(t,{kG:function(){return r},Au:function(){return a},U0:function(){return i}});var r=48,a=40;function i(e,t){if(e)if(t)return 82;else return 100;if(t)return a;else return r}},97899:function(e,t,n){"use strict";n.d(t,{j8:function(){return i},fE:function(){return o},jV:function(){return s},q2:function(){return l},ny:function(){return c},Kb:function(){return d},M8:function(){return u},Mn:function(){return f}});var r=n(21211),a={};function i(e){return"number"==typeof e.page?Math.max((e.page-1)*r.LIST_LIMIT-1,0):0}function o(e){return e.letters.length+i(e)}function s(e){var t=o(e);return Math.max(e.lettersTotal-t-1,0)}function l(e,t,n){if(void 0===n)n=!1;a[e]={height:t,exact:n}}function c(e){return a[e]?a[e].height:void 0}function d(e){var t=e&&e.model&&e.model.uiLayout,n=e&&e.activeRoute&&e.activeRoute.is("#search #search-letter"),a=t&&"3pane"===t.type&&t.support3pane;return r.CAN_ENABLE_PAGINATOR&&!n&&!a}function u(e,t){var n=t&&t.paginator;return d(e)&&n}function f(e){return u(e,e&&e.model&&e.model.uiThreadsSettings)}},21211:function(e,t,n){"use strict";n.r(t),n.d(t,{IS_ANDROID:function(){return y},IS_IOS:function(){return T},LIST_LIMIT:function(){return A},METATHREAD_LIMIT:function(){return S},METATHREAD_LOAD_MORE_COUNT_MAX:function(){return O},IS_DEBUG:function(){return C},STATUS_DEBOUNCE_TIMEOUT:function(){return w},LAYER_SENT_PAGE_CONFIG:function(){return L},IS_NATIVE_STICKY_DISABLED:function(){return k},ENABLE_LOGGING:function(){return I},ENABLE_AMP:function(){return R},AMP_IFRAME_PATH:function(){return D},AMP_PROXY_HOST:function(){return M},AMP_REDIRECT_URL:function(){return P},AMP_TIMEOUT:function(){return N},QUOTES_VERSION:function(){return x},LETTER_CYRILLIC_PERCENT:function(){return F},TRANSLATOR_REQUEST_TIMEOUT:function(){return U},COMPOSE_DISABLE_CLOUD_ATTACHES:function(){return H},DISABLE_SAVE_TO_CLOUD:function(){return B},COMPOSE_TRANSLATOR:function(){return Z},CKE_ENABLE_TAB:function(){return G},CKE_DEFAULT_STYLES:function(){return q},CKE_AUTOCORRECT_ALPHABET_LIST:function(){return j},CORRESPONDENTS_LIMIT:function(){return W},FULL_ATTACH_THUMB_LIMIT:function(){return V},IMAGES_EXPANDER:function(){return z},TABLES_EXPANDER:function(){return Y},IMAGES_EXPANDER_POPUP:function(){return K},TABLES_EXPANDER_POPUP:function(){return X},BL_PROP_NAME:function(){return Q},HIDE_TOYS:function(){return J},ENABLE_SMOKESCREEN:function(){return $},ENABLE_WELTER:function(){return ee},SMOKESCREEN_LOCATORS:function(){return te},HONEYPOT:function(){return ne},HONEYPOT_INTERVALS:function(){return re},API_ENCRYPTOR_CONFIG:function(){return ae},API_ENCRYPTOR_MIMIC_LIMIT:function(){return ie},ENABLE_XRAY_ENCRYPTOR:function(){return oe},ADMAN_EXP_ID:function(){return se},ADMAN_BLOCKER_IDS:function(){return le},MIMIC_EXP_ID:function(){return ce},MIMIC_PARTNER_ID:function(){return de},MIMIC_FORCE:function(){return ue},MIMIC_ENDPOINT:function(){return fe},FEATURE_UNSUBSCRIBE:function(){return me},UNSUBSCRIBE_COUNT_ALL:function(){return he},ALL_READ_METATHREADS_ONLY:function(){return pe},ALL_READ_BUTTON:function(){return ge},SETTINGS_CLEANMASTER_BUILTIN:function(){return ve},USE_3PANE:function(){return _e},ADV_LIST_PREFETCH_COUNT:function(){return be},ADV_LIST_FOLDER_CONFIG:function(){return Ee},ADV_LIST_DEFAULT_CONFIG:function(){return ye},ADV_LIST_METATHREAD_CONFIG:function(){return Te},ADV_LIST_METATHREAD_SPECIFIC_CONFIG:function(){return Ae},ADV_LIST_UPDATE_CACHE:function(){return Se},ADMAN_CUSTOM_LABEL:function(){return Oe},ADVERT_SIDEBAR_ROUNDED:function(){return Ce},ADVERT_EASY_ADV_DISABLED:function(){return we},ADVERT_EASY_ADV_EXP:function(){return Le},ENABLE_SEARCH_POLLING:function(){return ke},ENABLE_SEARCH_POLLING_2PANE_READMSG:function(){return Ie},APPROX_REQUEST_UPLOAD:function(){return Re},APPROX_REQUEST_DOWNLOAD:function(){return De},PROGRESS_FAKE_LOAD_FACTOR:function(){return Me},PROGRESS_FACTOR_LOAD_START:function(){return Pe},PROGRESS_FACTOR_UPLOAD:function(){return Ne},PROGRESS_FACTOR_DOWNLOAD:function(){return xe},FILTER_SAVE_UPDATE_TIMEOUT:function(){return Fe},DISABLE_TRANSLATE:function(){return Ue},SEARCH_HIDE_CATEGORIES:function(){return He},THREAD_LETTERS_LOAD_MORE_COUNT:function(){return Be},DYNAMIC_FAVICON:function(){return Ze},FOLDERS_SHARE_ENABLED:function(){return Ge},ADV_SLOTS:function(){return qe},SERVER_ERROR_URL:function(){return je},COMPOSE_WINDOW_ANIMATION:function(){return We},SHOW_LIST_LETTER_PAYMENT_DIES:function(){return Ve},LIST_LETTER_PAYMENT_DIES_GMAP:function(){return ze},LIST_LETTER_PAYMENT_DIES_CLOSEABLE:function(){return Ye},ADDRESS_HEADER:function(){return Ke},ADDRESS_HEADER_CALENDAR:function(){return Xe},PAYMENT_CENTER_NOT_HIDDEN:function(){return Qe},PAYMENT_CENTER_KAKTAM:function(){return Je},MONETA_POST_MESSAGE_URL_REG_EXP:function(){return $e},MONETA_BASE_URL:function(){return et},MONETA_SANDBOX:function(){return tt},SAFE_URL_LETTERS:function(){return nt},STATUS_AUTO_CALL:function(){return rt},INACTIVE_TAB_RELOAD_DURATION:function(){return at},DISABLE_DOCUMENTS_VIEW:function(){return it},VIEWER_OPEN_DOWNLOAD_IN_NEW_WINDOW:function(){return ot},DISABLE_DOCUMENTS_EDIT:function(){return st},DISABLE_DOCS_PREVIEWS:function(){return lt},VIEWER_EDITORS:function(){return ct},VIEWERS_AVAILABLE:function(){return dt},LETTER_BODY_POPUP_ALLOWED:function(){return ut},LAYER_IFRAME_PARAMS:function(){return ft},CAN_ENABLE_PAGINATOR:function(){return mt},ENABLE_NAV_UP:function(){return ht},MAX_LAYOUT_WIDTH:function(){return pt},CATEGORY_FEEDBACK:function(){return gt},CATEGORY_FEEDBACK_SUBMENU:function(){return vt},CATEGORY_FEEDBACK_SUBMENU_NOTIFY_DURATION:function(){return _t},WEBVIEW_MOBILE_MODE_ENABLED:function(){return bt},IS_TABLET:function(){return Et},OCTAVIUS_MOBILE:function(){return yt},isVkTeamsWebview:function(){return Tt},TOUCH_MODE:function(){return At},IS_TOUCH_DEVICE:function(){return St},WEBVIEW:function(){return Ot},WEBVIEW_DARK_THEME:function(){return Ct},ENABLE_WYSIWYG_STICKY:function(){return wt},DISABLE_TOOLTIPS:function(){return Lt},ADV_160_ON_SMALL_WIDTH:function(){return kt},ADV_FAST_UPDATE_TIMEOUT:function(){return It},ADV_IDLE_TIMEOUT:function(){return Rt},ADMAN_BROKER_DELAYED_FETCH_TIMEOUT:function(){return Dt},ADMAN_BROKER_IMMEDIATE_FETCH_TIMEOUT:function(){return Mt},ADV_FAST_AUTOUPDATE_TIMEOUT:function(){return Pt},ADMAN_MIMIC_ON_FAIL_RETRY_COUNT:function(){return Nt},RELEVANT_SEARCH_FTRS:function(){return xt},RELEVANT_SEARCH:function(){return Ft},COMPOSE_SUBJECT_AUTOCOMPLETE:function(){return Ut},HAS_UNIQUE_THEME_ID:function(){return Ht},UNIQUE_THEME_ID:function(){return Bt},HAS_UNIQUE_THEME_ID_LIST:function(){return Zt},UNIQUE_THEME_ID_LIST:function(){return Gt},DEFAULT_THEME_ID:function(){return qt},PAY_IMAGE_VARIANT:function(){return jt},SPECIAL_THIRD_SEPTEMBER:function(){return Wt},DISABLE_SAVE_IN_ARCHIVE:function(){return Vt},DISABLE_CREATE_EVENT:function(){return zt},DISABLE_PASSWORD_FOLDER_INFO:function(){return Yt},CALLS:function(){return Kt},CALLS_CREATE_ROOM_URL:function(){return Xt},CALLS_CREATE_ROOM_TIMEOUT:function(){return Qt},CALLS_DISABLE_COMPOSE_DROPDOWN:function(){return Jt},CALLS_DISABLE_COMPOSE_DROPDOWN_TOMYSELF:function(){return $t},CALLS_DISABLE_COMPOSE_DROPDOWN_CALL:function(){return en},CALLS_DISABLE_COMPOSE_DROPDOWN_CALENDAR:function(){return tn},CALLS_DISABLE_LETTER_CALL:function(){return nn},CALLS_DISABLE_LETTER_CALL_NEWSLETTERS:function(){return rn},CALLS_DISABLE_LETTER_HEAD_CALL:function(){return an},CALLS_DISABLE_LETTER_FOOTER_CALL:function(){return on},CALLS_DISABLE_COMPOSE_BTN:function(){return sn},DISABLE_CALLS_COMPOSE_TIP:function(){return ln},DISABLE_CALLS_TIP:function(){return cn},DISABLE_CALLS_ON_SENT_PAGE:function(){return dn},DISABLE_LETTER_CALENDAR_NEWSLETTERS:function(){return un},DISABLE_LETTER_HEAD_CALENDAR:function(){return fn},DISABLE_LETTER_FOOTER_CALENDAR:function(){return mn},DISABLE_HEAD_PRINT:function(){return hn},LETTER_TO_YOURSELF:function(){return pn},FAKE_NOTE_IN_CONTACTS:function(){return gn},SEARCH_ALL_ATTACHES:function(){return vn},ALL_ATTACHES_MAX_COUNT:function(){return _n},LIST_LETTER_ORDER:function(){return bn},TRANSACTION_HEADER:function(){return En},HIDE_METATHREADS:function(){return yn},SETTINGS_DROPDOWN_HIDE_HELP:function(){return Tn},SPAM_HELP_DISABLED:function(){return An},FORCE_CUSTOM_THREAD:function(){return Sn},CONFIRM_RECEIPT_HELP:function(){return On},CONFIRM_RECEIPT_HELP_URL:function(){return Cn},LIMIT_OF_THEME_RETRY:function(){return wn},DISABLE_FROM_MAIL_ATTACHES:function(){return Ln},FORCE_EXPANDED_ATTACH_LIST:function(){return kn},FORCE_EXPANDED_ATTACHES_MAX_TEXT_LENGTH:function(){return In},COMPOSE_SEND_USER_TRACK:function(){return Rn},COMPOSE_SEND_USER_TRACK_CONF:function(){return Dn},EXTRA_SUGGEST_SEARCH:function(){return Mn},ADMAN_USE_DIRECT_LOAD_ERROR_CALLBACK:function(){return Pn},ADMAN_USE_DIRECT_LOAD_ERROR_CALLBACK_FOR_BLOCKER:function(){return Nn},ADMAN_USE_MIMIC_ON_DIRECT_LOAD_ERROR:function(){return xn},ADMAN_USE_MIMIC_ON_MRADX_ERROR:function(){return Fn},ADMAN_CHECK_MRADX_LOAD:function(){return Un},ADMAN_REINIT_ON_DIRECT_LOAD_ERROR:function(){return Hn},ADMAN_REINIT_ON_DETECT:function(){return Bn},ADMAN_SEND_SYNC_IDS:function(){return Zn},ADMAN_SEND_HAS_VK:function(){return Gn},PREFETCH_CORRESPONDENTS_DISABLE:function(){return qn},BUILD:function(){return jn},SERVER_TIME:function(){return Wn},PORTAL_NAVI_DATA_URL:function(){return Vn},PROFILE_URL:function(){return zn},SECURITY_URL:function(){return Yn},LOGOUT_URL:function(){return Kn},ACCOUNT_CHANGE_URL:function(){return Xn},LOGOUT_REDIRECT_URL:function(){return Qn},LOGIN_REDIRECT_URL:function(){return Jn},LOGIN_URL:function(){return $n},TOUCH_URL:function(){return er},ENABLE_OPEN_TOUCH:function(){return tr},IS_READLETTER_NATIVE_STICKY_DISABLED:function(){return nr},HELP_URL:function(){return rr},HELP_3PANE:function(){return ar},HELP_THREADS:function(){return ir},HELP_METATHREADS:function(){return or},HELP_TO_MYSELF:function(){return sr},HELP_PAGINATOR:function(){return lr},CLEANMASTER_URL:function(){return cr},NOTIFICATIONS_URL:function(){return dr},FILTERS_URL:function(){return ur},SETTINGS_URL:function(){return fr},SIGNATURE_URL:function(){return mr},SUPPORTED_CUSTOM_METATHREADS:function(){return hr},SETTINGS_DROPDOWN_HIDE_TO_MYSELF:function(){return pr},WIDGETS_WITH_SHOW_LIMIT_THEME_IDS:function(){return gr},WIDGETS_SHOW_LIMIT_MAP:function(){return vr},USER_LANG:function(){return _r},PACKAGES_URL:function(){return br},MAX_ATTACHES_SIZE_LIMIT:function(){return Er},LETTER_FROM_FUTURE_THRESHOLD_TIMESTAMP:function(){return yr},LETTER_FROM_FUTURE_LOG_DATES:function(){return Tr},LETTER_FROM_FUTURE_LOG_KAKTAM:function(){return Ar},IGNORE_LOCAL_TIME:function(){return Sr},DISABLE_TIME_CORRECTION:function(){return Or},DEBUG_SERVER_TIMESTAMP:function(){return Cr},OCTAVIUS_PREFETCH:function(){return wr},ARCHIVE_DISABLED:function(){return Lr},SMART_THREAD_FETCHING:function(){return kr},SUGGEST_FROM:function(){return Ir},IS_CHROME:function(){return Rr},ADVERT_SCROLL:function(){return Dr},ADVERT_SIDEBAR_SLEEP:function(){return Mr},ADVERT_SCROLL_CONF:function(){return Pr},ADVERT_XHR_RESTORE:function(){return Nr},ADVERT_CPM_RELOAD:function(){return xr},ADVERT_CPM_RELOAD_CONF:function(){return Fr},ADVERT_CPM_EXP:function(){return Ur},ADVERT_CPM_VALUES:function(){return Hr},RB_COUNTRY_ID:function(){return Br},RB_PROVINCE_ID:function(){return Zr},RB_REGION_ID:function(){return Gr},ADVERT_VIS_CHECK:function(){return qr},ADVERT_VIS_LOG:function(){return jr},NO_MIMIC_ON_WLIST:function(){return Wr},NO_MIMIC_ON_ADBLOCK:function(){return Vr},MIMIC_IGNORE_HAS_WLIST:function(){return zr},KASPERSKY:function(){return Yr},TODO_URL:function(){return Kr},METATHREAD_TOMYSELF_SNIPPET_ITEMS_MAX_COUNT:function(){return Xr},METATHREADS_FORCED_EXP:function(){return Qr},FORCE_METATHREADS:function(){return Jr},FORCE_METATHREADS_LETTER:function(){return $r},FORCE_METATHREADS_EXP:function(){return ea},THEMES_AVAILABLE:function(){return na},DOMPURIFY:function(){return ra},ADV_SPECLINE_SLOTS:function(){return aa},ADV_SPECLINE_ENABLED:function(){return ia},ADV_SEND_MULTI_ACCOUNT_DISABLE:function(){return oa},SIDEBAR_PAY_NOTIFICATION_BADGE:function(){return sa},SHOW_TODO_TOGGLE:function(){return la},PROMO_DOMAIN_HEADER:function(){return ca},PROMO_DOMAIN_CROSS_ENABLED:function(){return da},THEMES_WIDGET_CLOUDY_ENABLED:function(){return ua},FOLDER_MAX_CHILD_LEVEL_UI:function(){return fa},PHISHING_ALERT:function(){return ma},LETTER_LIST_HIGHLIGHT_PHISHING:function(){return ha},LETTER_DATA_WHITE_LIST:function(){return pa},MESSAGE_SUGGESTS:function(){return ga},SETTINGS_AUTOREPLY_LINK:function(){return va},NAV_MY_FOLDERS_CONTAINER_ID:function(){return _a},SUGGEST_SEARCH_INTERNET:function(){return ba},SUGGEST_SEARCH_INTERNET_URL:function(){return Ea},ADV_SEARCH_EXP_ID:function(){return ya},ADV_SEARCH_SEND_QUERY:function(){return Ta},SEARCH_SIDEBARS_SWAP:function(){return Aa},WORD_BREAK_IN_TOOLTIP:function(){return Sa},COMPOSE_SLIDER_LAST_STEP_DELTA:function(){return Oa},MATCH_MEDIA_LOG:function(){return Ca},LETTER_PREVIEWS:function(){return wa},LETTER_PREVIEWS_CONFIG:function(){return La},LETTER_PREVIEW_RADAR:function(){return ka},SIDEBAR_PAY_NOTIFICATION_BADGE_SMART:function(){return Ia},BILLS_COUNTER_UPDATE_INTERVAL:function(){return Ra},BILLS_COUNTER_MAX:function(){return Da},DATES_METADATA:function(){return Ma},LAYER_UNSAFE_ATTACH:function(){return Pa},CKE_ATTACH_BASE64:function(){return Na},SIDEBAR_MENU_LIST_CONFIG:function(){return xa},RENOVATOR_DISABLED:function(){return Fa},LAYER_CONFIRM_FOLDER_CLEAR:function(){return Ua},DND_CLOUD_FILES_LIMIT:function(){return Ha},DND_CLOUD_ENABLED:function(){return Ba},DND_CLOUD_SHARE:function(){return Za},DND_NOTIFY_DURATION:function(){return Ga},CLOUD_OPEN_API_URL:function(){return qa},CLOUD_HOME_URL:function(){return ja},CLOUD_LOAD_DIRECTORY:function(){return Wa},OAUTH_CLIENT_ID:function(){return Va},CALLS_P2P:function(){return za},CALLS_BASE_URL:function(){return Ya},CALLS_P2P_OUTGOING:function(){return Ka},DARK_MODE_BASE_COLOR:function(){return Xa},DARK_MODE_MEDIA_QUERY:function(){return Qa},DARK_MODE_ASYNC:function(){return Ja},DARK_MODE_ASYNC_THRESHOLD:function(){return $a},DARK_MODE_FRAME_BUDGET:function(){return ei},DARK_MODE_SNEAKY:function(){return ti},MAX_CLOUD_STOCK_SIZE_LIMIT:function(){return ni},KASPERSKY_ENG_LOGO_LANGS:function(){return ri},DARK_MODE_BACKGROUND_ASYNC:function(){return ai},WELCOME_BLOCK_DISABLED:function(){return ii},WELCOME_BLOCK_SCROLL_HIDE_THRESHOLD:function(){return oi},WELCOME_BLOCK_UPDATE_WEATHER_INTERVAL:function(){return si},WELCOME_BLOCK_HIDE_GREETING_TIMEOUT:function(){return li},WELCOME_BLOCK_SHOW_INTERVAL:function(){return ci},WELCOME_BLOCK_SNOOZE_INTERVAL:function(){return di},WEATHER_URL:function(){return ui},SELECT_GEO_URL:function(){return fi},MARUSIA_LOGO:function(){return mi},MARUSIA_URL:function(){return hi},LAST_SEEN_ENABLE:function(){return pi},LAST_SEEN_OMICRON:function(){return gi},HEADLINE_HEIGHT:function(){return vi},PORTAL_MENU_HEIGHT:function(){return _i},FILTER_SETTINGS_DEFAULT_TEXT_VAR:function(){return bi},SETTINGS_DROPDOWN_HIDE_NOTIFICATIONS:function(){return Ei},SETTINGS_DROPDOWN_HIDE_CLEANMASTER:function(){return yi},SETTINGS_DROPDOWN_HIDE_SETTINGS:function(){return Ti},LAYER_METATHREAD_DISABLE:function(){return Ai},NO_CSS_GRID_LOG_KAKTAM:function(){return Si},VISIBILITY_WATCHER_CONFIG:function(){return Oi},FORGOT_PASSWORD_URL:function(){return Ci},ENABLE_ACTION_OVER_SELECTED:function(){return wi},SKIP_DWH:function(){return Li},WHITE_PORTAL_FORCED:function(){return ki},WHITE_PORTAL_NEWREG:function(){return Ii},WHITE_PORTAL_AVAILABLE:function(){return Ri},WHITE_PORTAL_HAS_FLAG:function(){return Di},WHITE_PORTAL_THEME:function(){return Mi},USER_LAYOUT_RESIZE:function(){return Ni},USER_LAYOUT_RESIZE_3PANE:function(){return xi},USER_LAYOUT_SAVE_TO_STORAGE:function(){return Fi},USER_LAYOUT_ENABLE_METRICS:function(){return Ui},DISCOUNTS_BLOCK:function(){return Hi},DISCOUNTS_BLOCK_DEFAULT:function(){return Bi},DISCOUNTS_FLAG_NAME:function(){return Zi},DISCOUNTS_BLOCK_LIMIT:function(){return Gi},P2P_PROMO_SHOWN_RECENTLY:function(){return qi},CSS_VARS_FALLBACK:function(){return ji},IS_RESEND_DROPDOWN_DISABLED:function(){return Wi},RELOAD_TIMEOUT:function(){return Vi},OK_RELOAD_TIMEOUT:function(){return zi},OK_RELOAD:function(){return Yi},RESIZE_UPDATE_DEBOUNCE_TIME:function(){return Ki},PROMO_LOGO_MIN_WIDTH:function(){return Xi},DISCOUNTS_MOUSE_SCROLL:function(){return Qi},PAYMENT_LETTER_UNIVERSAL:function(){return Ji},LL_UNSUBSCRIBE_NEWSLETTERS:function(){return $i},LL_UNSUBSCRIBE_NEWSLETTERS_INTERVAL:function(){return eo},LL_UNSUBSCRIBE_NEWSLETTERS_TIMEOUT:function(){return to},TWO_STEP_ENABLE_URL:function(){return no},OK_RELOAD_SHADOW:function(){return ro},IS_COMPOSE_NATIVE_ATTACH_THUMB_ROTATION:function(){return ao},CALL_TITLE_BLINK_INTERVAL:function(){return io},AUTOSAVE_DRAFT_TIMEOUT_SECONDS:function(){return oo},HIDE_NEWS_METATHREAD:function(){return so},METATHREADS_SETTINGS_ORDER:function(){return lo},MIN_LETTER_HEIGHT_STICKY:function(){return co},MIN_LETTER_HEIGHT_STICKY_WITH_ATTACHES:function(){return uo},DELAY_FOR_CANCELLATION:function(){return fo},COMPOSE_USER_LOADING_DISABLED:function(){return mo},CHANGE_EXPIRED_PASSWORD_URL:function(){return ho},ACTUAL_REASON_FEEDBACK:function(){return po},OVERSIZE_CLOUD_ATTACHES:function(){return go},OVERSIZE_CLOUD_ATTACHES_FOLDER:function(){return vo},OVERSIZE_CLOUD_ATTACHES_MOCK_CLOUD:function(){return _o},CLOUD_TARIFFS_IFRAME_URL:function(){return bo},ACTUAL_LETTERS_DEFAULT_INBOX:function(){return Eo},ACTUAL_LETTERS_DEFAULT_NEWSLETTERS:function(){return yo},LOG_DATASOURCE_PROBLEMS:function(){return To},SHOW_DEFINITELY_SPAM:function(){return Ao},ADV_EXP_ID:function(){return So},ADV_WEB_PERF_EXP_ID:function(){return Oo},ADV_DIRECT_READY_TIMEOUT:function(){return Co},ADV_TARIFF_FEATURE:function(){return wo},ADV_EXP_ID_SEND:function(){return Lo},ADV_OFF_CLOUD_GROUP:function(){return ko},ADV_OFF_NOTIFY_GROUP:function(){return Io},ADV_OFF_CONTROL_GROUP:function(){return Ro},ADV_OFF_QUERY_GROUP:function(){return Do},ADV_OFF_MONTH_GROUP:function(){return Mo},ADV_NO_ADS_PROMO_URL:function(){return Po},ADV_NO_ADS_POSTMSG_URL:function(){return No},DISCOUNT_DESCRIPTION_FROM_SUBJECT:function(){return xo},LL_UNSUBSCRIBE_NEWSLETTERS_SENDERS_LIMIT:function(){return Fo},LL_UNSUBSCRIBE_NEWSLETTERS_SHOW_LIMIT:function(){return Uo},MARUSIA_READ_LETTER:function(){return Ho},MARUSIA_SKILLSERVER_TEST:function(){return Bo},WIDGET_CLOUD_URL:function(){return Zo},WIDGET_ADDRESSBOOK_URL:function(){return Go},WIDGET_CALENDAR_URL:function(){return qo},WIDGET_X_CALENDAR_URL:function(){return jo},WIDGET_TODO_URL:function(){return Wo},WIDGET_CALLS_URL:function(){return Vo},WIDGET_PAYMENT_URL:function(){return zo},NTFR_INTERVALS:function(){return Yo},NTFR_RECONNECT_ON_FOCUS:function(){return Ko},NTFR_EXP_BACKOFF:function(){return Xo},FORCE_DISABLE_NEW_THREAD:function(){return Qo},NEW_THREAD:function(){return Jo},THREAD_WITH_RELIABLE_MARK:function(){return $o},SWBOX:function(){return es},SWBOX_LOG_SILENT_ERRORS:function(){return ts},PROMO_DISCOUNTS_COLORS:function(){return ns},DELAY_FOR_NEW_DISCOUNT:function(){return rs},DELAY_NO_DISCOUNTS_BLOCK:function(){return as},AMP_SENDER_METRICS:function(){return is},SETTINGS_DOCK_30_50_MODE:function(){return os},SETTINGS_DOCK_DISABLE_EXPAND_BUTTON:function(){return ss},SETTINGS_DOCK_DISABLE_AUTO_EXPAND:function(){return ls},SETTINGS_DOCK_START_FULL_SCREEN:function(){return cs},SETTINGS_DOCK_HIDE_CLEANMAILBOX:function(){return ds},SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED:function(){return us},SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION:function(){return fs},SETTINGS_DOCK_CLEANMASTER_USE_UNSUBSCRIBE_TITLE:function(){return ms},SETTINGS_DOCK_BROWSER_SETTINGS_TITLE:function(){return hs},SETTINGS_DOCK_APPEARANCE_TITLE:function(){return ps},SETTINGS_DOCK_CLEANMAILBOX_TITLE:function(){return gs},CANCELLATION_RESERVE_TIME:function(){return vs},FLAGS_AUTOSYNC:function(){return _s},FLAGS_AUTOSYNC_DEBOUNCE:function(){return bs},CLOUD_VIEWER_GROUPS:function(){return Es},CloudViewerEnableType:function(){return Pi},CLOUD_VIEWER_GROUP:function(){return Ts},CLOUD_VIEWER_FORCE:function(){return As},CLOUD_VIEWER_FILE_TYPES:function(){return Ss},CLOUD_VIEWER_ATTACH_TYPES:function(){return Os},CLOUD_VIEWER_FILE_EXTS:function(){return Cs},CLOUD_VIEWER_ENABLE_TYPE:function(){return ws},CLOUD_VIEWER_TEMPORARY:function(){return Ls},CLOUD_VIEWER_HOST:function(){return ks},CLOUD_HOST:function(){return Is},HEADLESS_COUNTER:function(){return Rs},WEBPUSH_METRIC_DISABLE:function(){return Ds},LETTER_CONTENT_ADV_ENABLE:function(){return Ms},MONETA_PAYMENT_LETTER_URL_REGEXP:function(){return Ps},NOTIFY_CLOSE_DELAY:function(){return Ns},ADVERT_FEEDBACK:function(){return xs},ADVERT_FEEDBACK_CONFIG2:function(){return Fs},ADVERT_FEEDBACK_TEXTS:function(){return Us},SWBOX_ANALYTICS_REQUEST:function(){return Hs},DISABLE_VK_MESSENGER:function(){return Bs},VK_MESSENGER_CHECK_VK_AUTH:function(){return Zs},VK_MESSENGER_EXTERNAL:function(){return Gs},VK_MESSENGER_CHAT_ID_BY_EMAIL:function(){return qs},VK_MESSENGER_CHAT_HREF_BASE:function(){return js},VK_MESSENGER_RESTORE_ON_REFRESH_DISABLED:function(){return Ws},VK_MESSENGER_ACTIVE_CHAT_STORAGE_KEY:function(){return Vs},VK_MESSENGER_AUTH_THROTTLE:function(){return zs},VK_MESSENGER_DISABLE_SILENT_AUTH:function(){return Ys},VK_MESSENGER_SHOW_AUTH_NOTIFY:function(){return Ks},VK_MESSENGER_LOGOUT:function(){return Xs},SWA_SUPERAPP_SILENT_URL:function(){return Qs},VK_LOGIN_DOMAIN:function(){return Js},VK_OAUTH_DOMAIN:function(){return $s},VK_CONNECT_DOMAIN:function(){return el},VK_MESSENGER_APP_ID:function(){return tl},EXPIRED_ATTACHES_DIE:function(){return nl},ATTACH_WARNING_TOOLTIP:function(){return rl},SENT_PAGE_NOTIFY:function(){return al},VK:function(){return il},IS_VK_HOST:function(){return ol},OCTAVIUS_PLACEHOLDERS_PATH:function(){return sl},VK_THEMES_LIST:function(){return ll},VK_DOMAIN:function(){return cl},DISABLE_DOMAIN_AUTHCHECK:function(){return dl},THEME_SOUZMULTFILM_MARUSIA:function(){return ul},DND_CLOUD_FOLDER_CHOICE:function(){return fl},DND_IMAGES_PATH:function(){return ml},RADAR_PROJECT:function(){return hl},LIST_ADVERT_ANIMATION:function(){return pl},EXPIRED_ATTACHES_TOOLTIP:function(){return gl},SWBOX_TOKEN_UPDATE_INTERVAL:function(){return vl},CONTRAST_LOGO_THEMES:function(){return _l},PRELOAD_RELEASE_BUNDLES_FILTER:function(){return bl},LAZY_SMOKE_SCREEN_INIT:function(){return El},RESIZER_DRAG_ICON_SHOWN:function(){return yl},CKE_CLIPBOARD_FIX:function(){return Tl},MARUSIA_READ_ALL_LETTERS:function(){return Al},CKE_AUTOCORRECT_AFTER_DELETE_CONTENTS_DISABLED:function(){return Sl},CLEANMASTER_MODAL_ACTIONS_DISABLED:function(){return Ol},MESSAGES_ATTACHES_BLOBCLOUD:function(){return Cl},MESSAGES_ATTACHES_BLOBCLOUD_PATH:function(){return wl},COMPOSE_EMOJI:function(){return Ll},COMPOSE_EMOJI_RECENTLY_COUNT:function(){return kl},EMOJI_FALLBACK:function(){return Il},SHOW_UNSUBSCRIBE_AFTER_SPAM:function(){return Rl},SHOW_UNSUBSCRIBE_AFTER_MOVE_TO_SPAM:function(){return Dl},RENDER_COMPOSE_TO_BODY_START:function(){return Ml},USE_X_CALENDAR:function(){return Pl},QUOTA_GROUP:function(){return Nl},QUOTA_AD_URL:function(){return xl},QUOTA_SPACE_URL:function(){return Fl},COMPOSE_EMOJI_FILTER:function(){return Ul},RESTORE_EXPIRED_ATTACHMENTS:function(){return Hl},RESTORE_EXPIRED_ATTACHMENTS_TIME:function(){return Bl},METATHREAD_MOVE_TO_SPAN_NOTIFY:function(){return Zl},METATHREAD_MOVE_TO_SPAN_NOTIFY_DURATION:function(){return Gl},HIDE_LOGO:function(){return ql},USE_SINGLE_TAB:function(){return jl},USE_SINGLE_TAB_WHITELIST_REGEXP:function(){return Wl},USE_SINGLE_TAB_BLACKLIST_REGEXP:function(){return Vl},HIDE_HEADLINE:function(){return zl},IS_VK_MINI_APP:function(){return Yl},JSAPI_BASE_URL:function(){return Kl},VK_MAIL_OLD_MINI_APP_URL:function(){return Xl},URL_EXTRA_PARAMS:function(){return Ql},DISABLE_MARUSIA_IN_PORTAL:function(){return Jl},SHOW_RELOAD_BUTTON:function(){return $l},SHORTCUT_LEFT_COLUMN_LIMIT:function(){return ec},DISABLE_LETTER_HEADERS_BUTTON:function(){return tc},COMPOSE_ALLOWED_TEMPLATES:function(){return nc},COMPOSE_TEMPLATES_SUBJECTS:function(){return rc},COMPOSE_TEMPLATES_URL:function(){return ac},DEFAULT_AVATAR_SRC:function(){return ic},NOADS_BUTTON_SHOW_FORCE:function(){return oc},NOADS_BUTTON_LIGHT:function(){return sc},NOADS_BUTTON_HREF:function(){return lc},NOADS_BUTTON_DELAY:function(){return cc},ENABLE_SORTING:function(){return dc},ENABLE_MULTIPLE_FILTERS:function(){return uc},FORCE_PARENTAL_CONTROL_DIE:function(){return fc},TRASH_FOLDER_ID:function(){return mc},DISABLE_DELETE_FROM_TRASH:function(){return hc},FORBID_FILTERS:function(){return pc},FORBID_SPAM:function(){return gc},FORBID_EXCLUDED_FOLDERS_SEARCH:function(){return vc},PARENTAL_CONTROL_PRIVATE_FOLDER_IDS:function(){return _c},NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID:function(){return bc},PARENTAL_CONTROL_DENY_FOLDER_ID:function(){return Ec},PARENTAL_CONTROL_APPROVE_FOLDER_ID:function(){return yc},PROMT_LOGO_HREF:function(){return Tc},POLLING_ONLY_VISIBLE:function(){return Ac},LAST_SEEN_V2_ENABLE:function(){return Sc},LETTER_LASTSEEN_REQUEST:function(){return Oc},LASTSEEN_DISABLE_PLATFORM:function(){return Cc},LASTSEEN_ONLINE_STATUS:function(){return wc},LASTSEEN_SHOW_TIME_STATUS:function(){return Lc},LASTSEEN_COMPOSE_ALLOW_GARAGE:function(){return kc},DISABLE_LEFT_COLUMN:function(){return Ic},ENABLE_XXS_BREAKPOINT:function(){return Rc},XXS_BREAKPOINT:function(){return Dc},DISABLE_DROPDOWN_ACTIONS_SHORTCUTS:function(){return Mc},HIDE_NOTIFY_CLOSE_BUTTON:function(){return Pc},HIDE_COMPOSE_CANCEL_BUTTON:function(){return Nc},HIDE_COMPOSE_WIDGETS:function(){return xc},COMPOSE_FOOTER_DROPDOWN:function(){return Fc},COMPOSE_HIDE_AVATAR:function(){return Uc},COMPOSE_DISABLE_CLICKABLE_LABELS:function(){return Hc},COMPOSE_DISABLE_TOOLBAR:function(){return Bc},COMPOSE_SHORT_ATTACH_PANEL:function(){return Zc},COMPOSE_ENABLE_TABLES:function(){return Gc},HIDE_CONTEXTMENU_ADD_CONTACT_BUTTON:function(){return qc},HIDE_CONTEXTMENU_SEARCH_BUTTON:function(){return jc},HIDE_SETTINGS_BUTTON:function(){return Wc},HIDE_CHANGE_SIGNATURE:function(){return Vc},DISABLE_COMPOSE_ATTACHMENT_CLICK:function(){return zc},MOBILE_ADDRESSBOOK_URL:function(){return Yc},ADDRESSBOOK_ICO:function(){return Kc},COMPOSE_FETCH_AUTOREPLY:function(){return Xc},SHOW_RELIABLE_SENDER_PROMO:function(){return Qc},SHOW_RELIABLE_ON_LETTER_LIST:function(){return Jc},DISABLE_GREEN_RELIABLE_ON_LETTER_LIST:function(){return $c},SHOW_OFFICIAL_SENDER_PROMO:function(){return ed},SHOW_OFFICIAL_ON_LETTER_LIST:function(){return td},DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST:function(){return nd},DARK_MODE_ROLLBACK_ON_COPY:function(){return rd},DISABLE_AUTOMATED_TRANSLATE:function(){return ad},AUTOMATED_SHOW_TRANSLATOR:function(){return id},CSAT_DISABLED:function(){return od},CSAT_DRY_RUN:function(){return sd},CSAT_DOMAIN:function(){return ld},CSAT_SURVEYS:function(){return cd},CSAT_FORCE_SHOW_SURVEY_ID:function(){return dd},CSAT_SUCCESS_HIDE_TIMEOUT:function(){return ud},CSAT_AFTER_REG_DELAY_IN_SECONDS:function(){return fd},CSAT_TRIGGERS:function(){return md},CSAT_THEME:function(){return hd},CSAT_TICK_TIMEOUT:function(){return pd},CSAT_TRIGGER_TIMEOUT:function(){return gd},HIDE_MESSAGE_FOOTER:function(){return vd},HIDE_MESSAGE_SMART_REPLY:function(){return _d},HIDE_MESSAGE_SMART_REPLY_BY_ONLY_WIDTH:function(){return bd},WEBPACK_EXP_BUILD_ID:function(){return Ed},ASYNC_RENDER_REACT_IN_WP_BUILD:function(){return yd},HIDE_WEBVIEW_TITLE:function(){return Td},HIDE_DISABLE_TO_MYSELF_METATHREAD:function(){return Ad},THREAD_SWITCH_RACE_FIX:function(){return Sd},ATTACH_ANALYTICS_EXT_DISABLED:function(){return Od},ENABLE_LIST_LETTER_ACTION_BUTTONS:function(){return Cd},HIDE_OFFICIAL_METATHREAD:function(){return wd},HIDE_SCHOOL_METATHREAD:function(){return Ld},HIDE_GAMES_METATHREAD:function(){return kd},CKE_QUOTE_PARSE_FIX_DISABLE:function(){return Id},ENABLE_OFFICIAL_LETTERS:function(){return Rd},USE_NEW_SEARCH_CATEGORY_FORMAT:function(){return Dd},SEARCH_CATEGORIES:function(){return Md},UNSUBSCRIBE_INSTEAD_SPAM:function(){return Pd},UNSUBSCRIBE_IN_MORE_DROPDOWN:function(){return Nd},R7_VIEW_ENABLED:function(){return xd},R7_EXTENSIONS_FORMATS:function(){return Fd},ENABLE_MENTIONS:function(){return Ud},MENTIONS_MARK:function(){return Hd},SETTINGS_DOCK_BROWSERSETTINGS_ENABLED:function(){return Bd},SHOW_CATEGORY_FEEDBACK_PLATE:function(){return Zd},ATTACHES_ID_REG_EXPS:function(){return Gd},MESSAGES_ID_REG_EXP:function(){return qd},VIEW_URL_IDS_VALIDATE_DISABLE:function(){return jd},METATHREAD_REDIRECT:function(){return Wd},HIDE_EMOJI_IN_SUBJECT:function(){return Vd},HIDE_EMOJI_IN_CORRESPONDENT:function(){return zd},HIDE_EMOJI_IN_SNIPPET:function(){return Yd},FOLDERS_SORT_VARIATION:function(){return Kd},COLOR_TAGS:function(){return Xd},ENABLE_COLOR_TAGS_SEARCH:function(){return Qd},SEARCH_SUGGESTS_DELAY:function(){return Jd},SEARCH_SUGGESTS_DELAY_TIME:function(){return $d},EMPTY_FOLDER_PLACEHOLDER_ENUM:function(){return ys},EMPTY_FOLDER_PLACEHOLDER:function(){return eu},LIGHT_COLOR_THEMES:function(){return tu},METATHREAD_BACK_TO_INBOX:function(){return nu},BACK_TO_PARENT_POS:function(){return ru},BACK_TO_PARENT_AT_LOGO:function(){return au},BACK_TO_PARENT_AT_LETTERS:function(){return iu},BACK_TO_PARENT_SHORTCUT:function(){return ou},PORTAL_MENU_MORE_FOLDER_ACTIONS:function(){return su},PORTAL_MENU_CLEAR_METATHREAD:function(){return lu},DESELECT_ALL_LABEL_STYLE:function(){return cu},BACK_TO_PARENT_AT_EMPTY_LETTERS:function(){return du},GO_TO_ACTION_BUTTOM:function(){return uu},B2B_INNER_ATTACHMENTS_NOTIFY:function(){return fu},SMART_CARD_ICS:function(){return mu},HIDE_RECEIPTS_METATHREAD:function(){return hu},WIDGET_ICONS_VARIANT:function(){return pu},FAKE_CREATE_TODO:function(){return gu},SHOW_PROMO_PUSH_PLATE:function(){return vu},DISABLE_OCTOPUS_CREATE_FILTER:function(){return _u},ENABLE_HIDE_TRANSLATOR:function(){return bu},SEARCH_PANEL_REACT:function(){return Eu},SEARCH_PANEL_PORTAL:function(){return yu},NEW_TOOLBAR:function(){return Tu},SEARCH_PANEL_SIZE:function(){return Au},CUSTOM_THEMES_PREVIEWS_PATHS:function(){return Su},LETTER_META_SKELETON_ENABLE:function(){return Ou},LETTER_META_SKELETON_WAIT_TIMEOUT:function(){return Cu},DISABLE_METATHREAD_CAPS:function(){return wu},ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE:function(){return Lu},FAKE_BUTTON_TYPE:function(){return ku},ENABLE_TAGS:function(){return Iu},TAGS_COLORS:function(){return Ru},TAGS_ORDER:function(){return Du},FAKE_BUTTON_DISCUSS_DOCUMENT:function(){return Mu},KASPERSKY_LOGO_HREF:function(){return Pu},KASPERSKY_LOGO_WITH_AD_DROPDOWN:function(){return Nu},KASPERSKY_ABOUT_AD_DEFAULT:function(){return xu},KASPERSKY_ABOUT_AD_RAW:function(){return Fu},PROMT_LOGO_WITH_AD_DROPDOWN:function(){return Uu},PROMT_ABOUT_AD_DEFAULT:function(){return Hu},PROMT_ABOUT_AD_RAW:function(){return Bu},TRANSLATE_ABOUT_AD:function(){return Zu},ENABLE_METATHREAD_FILTERS_SHORTCUT:function(){return Gu},LOG_FISHING_DEINIT_ERROR:function(){return qu},DISABLE_IMAGE_EXPANDER:function(){return ju},ENABLE_LETTERS_DIVIDERS:function(){return Wu},ENABLE_AUTHOR_SEND_LETTERS_DIVIDERS:function(){return Vu},ENABLE_AUTHOR_LETTERS_DIVIDERS:function(){return zu},ENABLE_SUBJECT_LETTERS_DIVIDERS:function(){return Yu},ENABLE_LATEST_WITH_MONTHS_LETTERS_DIVIDERS:function(){return Ku},FAKE_BUTTON_SIGNING:function(){return Xu},SPACE_AFTER_MORE:function(){return Qu},ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM:function(){return Ju},FAKE_GOS_TEMPLATE_SUGGESTION:function(){return $u},SEARCH_CLEAR:function(){return ef},ORDER_BUTTONS:function(){return tf},ENABLE_ADD_TAGS_TOUCH:function(){return nf},DISABLE_LETTER_ITEM_FOLDER:function(){return rf},ENABLE_LETTERS_LIST_DIVIDER_SWITCHER:function(){return af},SHOW_VK_HELP:function(){return of},VK_HELP_CHAT_ID:function(){return sf},HIDE_ICS_ATTACH:function(){return lf},SHOW_ICS_ATTACH_CALENDAR_LETTER:function(){return cf},CALENDAR_EMAIL_LIST:function(){return df},HREF_THEME_WIDGET_NEW_YEAR_2023:function(){return uf},SETTINGS_DROPDOWN_HIDE_SECURITY:function(){return ff},TRACKING_STATUS_PLATE:function(){return mf},DISABLE_FOOTER_APP_TOOLBAR:function(){return hf},CAN_SHOW_FOOTER_APP_TOOLBAR:function(){return pf},DISABLE_MOBILE_ACCOUNT_PROFILE:function(){return gf},DISABLE_MOBILE_ACCOUNT_SECURITY:function(){return vf},DISABLE_MOBILE_ACCOUNT_CHANGE_AND_ADD:function(){return _f},DISABLE_MOBILE_ACCOUNT_LOGOUT_ALERT:function(){return bf},DISABLE_MOBILE_CONTACTS:function(){return Ef},G_SELENT_OFF:function(){return yf},SMART_CARD_ML:function(){return Tf},PROMO_MANUAL_LOAD:function(){return Af},PROMO_DEBOUNCE_UPDATE:function(){return Sf},SYNC_THREAD_UPDATES:function(){return Of},THREAD_UPDATE_TIMEOUT:function(){return Cf},ADS_MOVE_TOP_LINE:function(){return wf},IOS_APP_DEEPLINK:function(){return Lf},ANDROID_APP_DEEPLINK:function(){return kf},ADS_MOVE_TOP_LINE_2PANE:function(){return Rf},ADS_MOVE_TOP_LINE_3PANE:function(){return Df},SHOW_ATTACH_SAFETY_STATUS:function(){return Mf},HAS_ATTACH_SAFETY_STATUS_BACKGROUND:function(){return Pf},ATTACH_SAFETY_STATUS_POSITION:function(){return Nf},OAUTH_HOST:function(){return xf},NEW_FEATURES_BELL:function(){return Ff},NEW_FEATURES_MEGAFON_ICON:function(){return Uf},NEW_FEATURES_SHOW_COUNT:function(){return Hf},NEW_FEATURES_LANDING_HREF:function(){return Bf},THEMES_PROJECT_NAME:function(){return Zf},PROMO_NEW_TOOLBAR:function(){return Gf},LETTER_SEND_CANCEL_TIMER_DISPLAY_TIME_AT_THE_END:function(){return qf},HIDE_CLEAR_BUTTON_ON_SPAM_FOLDER:function(){return jf},WIDGET_COLUMN:function(){return Wf},LOG_EMPTY_COLLECTORS:function(){return Vf},ENABLE_MOBILE_CSAT:function(){return zf},MOBILE_CSAT:function(){return Yf},NEW_TOOLBAR_PROJECTS_NOTES:function(){return Kf},URL_OPEN_PROJECTS_NOTES:function(){return Xf},SHOW_PLATE_NEWSLETTER_MAILING_SUBCRIBE:function(){return Qf},SHOW_SECURITY_CHECKUP_LINK_IN_SETTINGS:function(){return Jf},ACCOUNT_HOSTNAME:function(){return $f},SECURITY_CHECKUP_URL:function(){return em},CALENDAR_URL:function(){return tm},WIDGET_CALENDAR:function(){return nm},WIDGET_WEATHER:function(){return rm},WIDGET_WEATHER_FORMAT:function(){return am},WIDGET_WEATHER_MAIN_HREF:function(){return im},DEBUG_WIDGET_WEATHER_ADVICE:function(){return om},WIDGET_WEATHER_SHORT_NEAR_DAYS_FORECAST_COUNT:function(){return sm},WIDGET_WEATHER_REFETCH_INTERVAL:function(){return lm},WIDGET_WEATHER_ADVICE_DISABLED:function(){return cm},WIDGET_NOTES:function(){return dm},WIDGET_NOTES_URL:function(){return um},WIDGET_NOTES_HREF:function(){return fm},WIDGET_NOTES_HEADER_TEXT:function(){return mm},WIDGET_COLUMN_DEFAULT_OPEN:function(){return hm},HIDE_DELIMITER:function(){return pm},CSAT_ANIMATION:function(){return gm},CSAT_ANIMATION_DURATION:function(){return vm},CSAT_ANIMATION_DIRECTION:function(){return _m},CSAT_ANIMATION_GAP:function(){return bm},CALENDAR_GRAPHQL_API_URL:function(){return Em},TODO_API_URL:function(){return ym},NOTES_API_URL:function(){return Tm},WIDGET_HEADER_TYPE:function(){return Am},HAS_WIDGET_HEADER_TYPE:function(){return Sm},BELL_IN_WIDGET:function(){return Om},IFRAME_MARUSIA_URL:function(){return Cm},WEATHER_PING:function(){return wm},CALENDAR_PING:function(){return Lm},TODO_PING:function(){return km},DEFAULT_TODO_TASKS:function(){return Im},QUOTA_URL:function(){return Rm},WIDGET_QUOTA_TYPE:function(){return Dm},USE_CUSTOM_THEME_PREVIEW_NAME:function(){return Mm},APPLY_THEME_TIMEOUT:function(){return Pm},SUPPORT_WIDGET_THEME_IDS:function(){return Nm},DARK_MODE_THEMES:function(){return xm},DARK_DEFAULT_MODE_THEMES:function(){return Fm},LIGHT_DEFAULT_MODE_THEMES:function(){return Um},THEMES_PATHS_V4:function(){return Hm},CHANGE_TEXT_REMOVE_BUTTON_SIDEBAR:function(){return Bm},CHANGE_TEXT_REMOVE_BUTTON_METATHREAD_DELETE:function(){return Zm},CHANGE_TEXT_REMOVE_BUTTON_METATHREAD_EMPTY:function(){return Gm},CHANGE_ICON_REMOVE_BUTTON_METATHREAD:function(){return qm},SHOW_INVOLVEMENT_LETTER_LIST_INTEGRATION:function(){return jm},SHOW_LETTER_BODY_SELECTION_INTEGRATION:function(){return Wm},SEND_SELECTION_TEXT_LETTER_RADAR:function(){return Vm},LETTER_BODY_SELECTION_INTEGRATION_NOTES_VARIANT:function(){return zm},SHOW_SIDEBAR_UNSUBSCRIBE_BUTTON:function(){return Ym},SHOW_SIDEBAR_UNSUBSCRIBE_BUTTON_MOBILE:function(){return Km},SHOW_UNSUBSCRIBE_BUTTON_MOBILE_SETTINGS:function(){return Xm},SHOW_SPAM_WARNING_ALERT:function(){return Qm},DISABLE_LETTER_SWIPE:function(){return Jm},ENABLE_LETTER_FAST_ACTION_SWIPE:function(){return $m},USE_NEW_MOBILE_FOLDERS_MODAL:function(){return eh},BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY:function(){return th},BUTTON_MOVE_TO_SPAM_CANCEL_LEFT_POSITION:function(){return nh},ENABLE_MOBILE_SEARCH_BUTTON:function(){return rh},CREATE_NOTE_FROM_COMPOSE:function(){return ah},NOTES_URL:function(){return ih},VIEWER_ATTACH_TEMP_CLOUDSTOCK:function(){return oh},VIEWER_ATTACH_TEMP_CLOUD:function(){return sh},USE_QUEUE_PROMO_PUSH_PLATE:function(){return lh},DELAY_PROMO_PUSH_PLATE:function(){return ch},COUNT_SHOW_PROMO_PUSH_PLATE_BEFORE_DELAY:function(){return dh},USE_QUEUE_CATEGORY_FEEDBACK_PLATE:function(){return uh},MAX_COUNT_SHOW_CATEGORY_FEEDBACK_PLATE:function(){return fh},DELAY_CATEGORY_FEEDBACK_PLATE:function(){return mh},NEW_RADIO_BUTTON_CHANGE_LOCALES:function(){return hh},ADV_SIDEBAR_160_ALWAYS:function(){return ph},ADV_SIDEBAR_160_ON_WIDTH_1800:function(){return gh},ADV_SIDEBAR_160_ON_WIDTH_1420:function(){return vh},SHOW_SENDER_EMAIL_IN_SPAM_FOLDER:function(){return _h},ADV_3PANE_REDESIGN_V3:function(){return bh},COUNT_REPLAY_ANIMATION:function(){return Eh},TIMEOUT_FIRST_ANIMATION:function(){return yh},TIMEOUT_NEXT_ANIMATION:function(){return Th},EXTENSIONS_WHITE_LIST:function(){return Ah},SHOW_ATTACH_SAFETY_STATUS_TOOLTIP:function(){return Sh},PREINIT_ALL_MEDIATORS:function(){return Oh},LAZY_NONCRIT_TASKS_TIMEOUT:function(){return Ch},VKT_CLOUD_URL:function(){return wh},DARKOSHA_TABLE_BORDER_FIX_ENABLED:function(){return Lh},REDESIGN_OCTAVIUS_M_LETTER_LIST:function(){return kh},HEADLINE_CLASS:function(){return Ih},DPIP_ORIGIN_TRIAL_TOKEN:function(){return Rh},DPIP_WIDGET_CALENDAR_ENABLED:function(){return Dh},DPIP_WIDGET_WIDTH_PX:function(){return Mh},DPIP_WIDGET_HEIGHT_PX:function(){return Ph},CSAT_HIDE_AFTER_SUCCESS_HIDE_TIMEOUT:function(){return Nh},PREVENT_UPDATE_WITHOUT_INTERNET:function(){return xh}});n(11077);var r,a,i,o,s,l,c=n(21528),d=n(19275),u=n(50987),f=n(28430),m=n(54844),h=n(76493),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},g=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};if(c.default.has("octavius-iframe-themes")&&("parse"!==JSON.parse.name||2!==JSON.parse.length))try{var v=document.createElement("iframe");document.body.appendChild(v);var _=v.contentWindow,b=_.JSON.parse;v.remove();var E=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return b.call.apply(b,g([JSON,e,function(e,n){if(n instanceof _.Array)Object.setPrototypeOf(n,Array.prototype);else if(n instanceof _.Object)Object.setPrototypeOf(n,Object.prototype);if(t)return t(e,n);else return n}],n,!1))}catch(e){if(e instanceof _.SyntaxError)Object.setPrototypeOf(e,SyntaxError.prototype);throw e}};E.toString=b.toString.bind(b),JSON.parse=E}catch(e){}c.default.setURLConfig({vars:{topLevelHost:d.Z.urls.singleDomainName}});var y="Android"===c.default.getAsString("mobile-os"),T="iPhone OS"===c.default.getAsString("mobile-os"),A=c.default.getAsInt("dataset_list_limit",100),S=c.default.getAsInt("metathreads-limit",10),O=c.default.getAsInt("metathreads-more",5),C=!!c.default.getAsInt("debug",0),w=c.default.getAsInt("status-debounce-timeout",10),L={delayVisible:c.default.getAsInt("layer_sent_page_delay_visible",3e4)},k=c.default.has("is-native-sticky-disabled"),I=c.default.has("enable-logging"),R=c.default.has("enable-amp"),D=c.default.getAsURL("amp-iframe-path-v2",d.Z.urls.ampIframePath||"about:blank"),M=c.default.getAsURL("amp-proxy-host",""),P=d.Z.urls.ampRedirectUrl||"about:blank",N=c.default.getAsInt("amp-timeout",1e4),x=c.default.getAsInt("quotes-version",1),F=c.default.getAsInt("letter-cyrillic-percent",60),U=c.default.getAsInt("translation-request-timeout",6e3),H=c.default.has("compose-disable-cloud-attaches"),B=c.default.has("disable-save-to-cloud"),Z=c.default.has("compose-translator"),G=c.default.has("cke-enable-tab"),q=c.default.getAsString("cke-default-style"),j=c.default.has("cke-autocorrect-alphabet-list"),W=c.default.getAsInt("correspondents-limit",100),V=c.default.getAsInt("full-attach-thumb-limit",2),z=c.default.has("images-expander"),Y=c.default.has("tables-expander"),K=c.default.has("images-expander-popup"),X=c.default.has("tables-expander-popup"),Q=c.default.getAsString("bl-property-name"),J=c.default.has("hide-ads")||!1===d.Z[Q]?Q:!1,$=c.default.has("smokescreen")&&!J,ee=c.default.has("mimic-welter-enable"),te=c.default.getAsTypedArray("smokescreen-locators",c.default.String,["dataset","draggable","scrollable","letter-list","list-letter-bait","layout","ll","nav","metathread","mt","slot","layer","notify-stack","js-letter-list-item","js-tooltip-direction_letter-bottom","js-tooltip-direction_right","js-tooltip-direction_left","js-tooltip-direction_top"]),ne=function(e,t){if(!u.Z||!u.Z[e])return t;else return u.Z[e]}("honeypot",[]),re=c.default.getAsTypedArray("honeypot-async",c.default.Int,[1e3,2e3,3e5],"|"),ae=c.default.getAsArray("mimic-crypto-api",["plain","8192"],"|"),ie=c.default.getAsInt("mimic-api-encryptor-limit",7e3),oe=c.default.has("mimic-crypto-xray"),se=c.default.getAsInt("adv-exp-id",null),le=c.default.getAsJSON("adv-blocker-ids",{default:null}),ce=c.default.getAsInt("mimic-exp-id"),de=c.default.getAsInt("adman-mimic-partner-id"),ue=c.default.has("mimic-force"),fe=c.default.getAsURL("mimic-endpoint",""),me=c.default.has("feature-unsubscribe"),he=c.default.has("unsubscribe-count-all"),pe=c.default.has("all-read-metathreads-only"),ge=c.default.has("all-read-button"),ve=c.default.has("settings_cleanmaster_builtin"),_e=c.default.has("use-3pane")||(0,h.ry)(),be=c.default.getAsInt("adv-list-prefetch-count",1),Ee=c.default.getAsJSON("adv-list-folder-config",{500015:{enable:"false"}}),ye=c.default.getAsJSON("adv-list-default-config",{enable:"true","3pane":{start:"0"},"2pane":{start:"0"}}),Te=c.default.getAsJSON("adv-list-metathread-config",{"3pane":{interval:"10",start:"4",enable:"true"},"2pane":{interval:"10",start:"4",enable:"true"}}),Ae=c.default.getAsJSON("adv-list-metathread-specific-config",{}),Se=c.default.getAsInt("adv-list-update-cache",36e5),Oe=c.default.has("adman-custom-label"),Ce=c.default.has("advert-sidebar-rounded"),we=c.default.has("advert-easy-adv-disabled"),Le=c.default.has("advert-easy-adv-exp"),ke=c.default.has("search-polling"),Ie=c.default.has("search-polling-2pane-readmsg"),Re=(r=c.default.getAsTypedArray("progress-bar",[c.default.Int,c.default.Int,c.default.Float,c.default.Float,c.default.Float,c.default.Float],[100,1e5,.6,.1,.4,.4],"|"))[0],De=r[1],Me=r[2],Pe=r[3],Ne=r[4],xe=r[5],Fe=c.default.getAsInt("filter-save-update-timeout",200),Ue=c.default.has("disable-translate"),He=c.default.has("search-hide-categories"),Be=c.default.getAsInt("thread-letters-load-more-count",50),Ze=c.default.has("dynamic-favicon"),Ge=c.default.has("share-folders"),qe=J?Object.entries(c.default.getAsJSON("adv-new",{})).reduce((function(e,t){var n=t[0],r=t[1];if(r.counter)e[n]=r;return e}),{}):c.default.getAsJSON("adv-new",{}),je=c.default.getAsURL("server-error-page","/error-pages/500.html"),We=c.default.has("compose-window-animation"),Ve=c.default.has("show-list-letter-payment-dies"),ze=c.default.getAsJSON("list-letter-payment-dies-gmap"),Ye=c.default.has("list-letter-payment-dies-closeable"),Ke=c.default.has("address-header"),Xe=c.default.has("address-header-calendar"),Qe=c.default.has("payment-center-not-hidden"),Je=c.default.has("payment-center-kaktam"),$e=new RegExp(d.Z.urls.monetaPostMessageUrlRegExp),et="".concat(d.Z.urls.monetaBaseUrl,"?region_id=").concat(u.Z.regionId),tt=d.Z.urls.monetaSandBox,nt=new RegExp(d.Z.urls.safeUrlLetters.replace(/,/g,"|")),rt=c.default.getDuration("status-auto-call",120),at=c.default.getDuration("inactive-tab-reload-duration",120),it=c.default.has("disable-documents-view"),ot=T,st=c.default.has("disable-documents-edit"),lt=c.default.has("disable-docs-previews"),ct=c.default.getAsJSON("viewer-editors",{}),dt=c.default.getAsTypedArray("viewers-available",c.default.String,["ms","docs"]),ut=d.Z.urls["payment-popup-list-params"]||{},ft=(null===(s=null===(o=u.Z.config)||void 0===o?void 0:o.payments)||void 0===s?void 0:s["layer-iframe-params"])||{},mt=c.default.has("paginator"),ht=c.default.has("nav-up"),pt=c.default.getAsInt("max-layout-width",2150),gt=c.default.has("category-feedback"),vt=c.default.has("category-feedback-submenu"),_t=c.default.getAsInt("category-feedback-submenu",6),bt=c.default.has("enable-webview-mobile-mode"),Et=c.default.has("is-tablet")||m.Z.hasTouchPointer()&&m.Z.mac,yt=c.default.has("octavius-mobile"),Tt=bt&&(c.default.has("is-mobile-webview")||m.Z.isTouchDevice()),At=Et||Tt||yt,St=Et||yt,Ot=c.default.has("is-webview"),Ct=c.default.has("is-webview-dark-theme"),wt=!y,Lt=T,kt=c.default.has("adv-160"),It=c.default.getAsDuration("adv-fast-update-timeout",1e4),Rt=c.default.getAsDuration("adv-idle-timeout",3e5),Dt=c.default.getAsDuration("adv-delayed-fetch-timeout",2e3),Mt=c.default.getAsDuration("adv-immediate-fetch-timeout",100),Pt=c.default.getAsDuration("adv-fast-autoupdate-timeout",3e4),Nt=c.default.getAsInt("adman-mimic-on-fail-retry-count",2),xt=c.default.getAsJSON("relevant-search",null),Ft=xt||{},Ut=c.default.has("compose-subject-autocomplete"),Ht=c.default.has("user-unique-themeId"),Bt=c.default.getAsString("user-unique-themeId","default"),Zt=c.default.has("user-unique-themeId-list"),Gt=c.default.getAsString("user-unique-themeId-list","default"),qt=c.default.getAsString("default-themeId",Bt),jt=c.default.getAsString("pay-image-variant","1"),Wt=c.default.has("special-third-september"),Vt=c.default.has("disable-save-in-archive"),zt=c.default.has("disable-create-event"),Yt=c.default.has("disable-password-folder-info"),Kt=c.default.has("calls"),Xt=c.default.getAsString("calls-create-room-url","https://corsapi-test.imgsmail.ru/calls/api/v1/room"),Qt=c.default.getAsInt("calls-create-room-timeout",3e3),Jt=c.default.has("calls-disable-compose-dropdown"),$t=c.default.has("calls-disable-compose-dropdown-tomyself"),en=c.default.has("calls-disable-compose-dropdown-call"),tn=c.default.has("calls-disable-compose-dropdown-calendar"),nn=c.default.has("calls-disable-letter-call"),rn=c.default.has("calls-disable-letter-call-newsletters"),an=c.default.has("calls-disable-letter-head-call"),on=c.default.has("calls-disable-letter-footer-call"),sn=c.default.has("calls-disable-compose_btn"),ln=c.default.has("disable-calls-compose-tip"),cn=c.default.has("disable-calls-tip"),dn=c.default.has("disable-calls-on-sent-page"),un=c.default.has("disable-letter-calendar-newsletters"),fn=c.default.has("disable-letter-head-calendar"),mn=c.default.has("disable-letter-footer-calendar"),hn=c.default.has("disable-head-print"),pn=c.default.getAsString("letter-to-yourself"),gn=c.default.getAsString("fake-note-in-contacts",""),vn=c.default.has("search-all-attaches"),_n=c.default.getAsInt("search-all-attaches-max-count",5),bn=c.default.has("list-letter-order"),En=c.default.getAsJSON("transaction-header",null),yn=c.default.has("hide-metathreads"),Tn=c.default.has("settings-dropdown-hide-help"),An=c.default.has("confirm-receipt-help"),Sn=c.default.has("force-custom-thread"),On=c.default.has("confirm-receipt-help"),Cn=d.Z.urls.confirmReceiptHelp||"https://help.mail.ru/mail-help/letters/write/helpful",wn=c.default.getAsInt("limit_of_theme_retry",3),Ln=c.default.has("disable-from-mail-attaches"),kn=c.default.has("force-expanded-attach-list"),In=c.default.getAsInt("force-expanded-attach-list",200),Rn=c.default.has("compose-send-user-track"),Dn=c.default.getAsTypedArray("compose-send-user-track",c.default.Int,[100,200],"|"),Mn=c.default.has("extra-suggest-search"),Pn=c.default.has("adman-direct-error-handle"),Nn=c.default.has("adman-direct-error-blocker"),xn=c.default.has("adman-direct-error-mimic"),Fn=c.default.has("adman-use-mimic-on-mradx-error"),Un=c.default.has("adman-check-mradx-load"),Hn=c.default.has("adman-direct-error-reinit"),Bn=c.default.has("adman-reinit-on-detect"),Zn=!c.default.has("adman-disable-send-sync-ids"),Gn=!c.default.has("adman-disable-send-has-vk"),qn=c.default.has("prefetch-correspondents-disable"),jn=d.Z.build,Wn=d.Z.serverTime,Vn=c.default.getAsURL("portal-navi-data-url","https://portal.${topLevelHost}/NaviData"),zn=c.default.getAsURL("profile-url","https://id.${topLevelHost}/profile"),Yn=c.default.getAsURL("security-url","https://id.${topLevelHost}/security"),Kn=c.default.getAsURL("logout-url","https://auth.${topLevelHost}/cgi-bin/logout?next=1"),Xn=c.default.getAsURL("account-change-url","https://auth.${topLevelHost}/cgi-bin/auth?Login="),Qn=d.Z.urls.logoutRedirectUrl,Jn=d.Z.urls.loginRedirectUrl,$n=c.default.getAsURL("login-url","https://account.${topLevelHost}/login"),er=c.default.getAsURL("touch-url","https://touch.${topLevelHost}"),tr=c.default.has("enable-open-touch"),nr=k||c.default.has("is-readletter-native-sticky-disabled")||!m.Z.supportedSticky,rr=c.default.getAsURL("help-mail-url",d.Z.urls.helpMailUrl||"https://help.mail.ru/mail"),ar=d.Z.urls.help3PaneUrl,ir=d.Z.urls.helpThreadsUrl,or=d.Z.urls.helpMetathreadsUrl,sr=d.Z.urls.helpToMyselfUrl,lr=d.Z.urls.helpPaginatorUrl,cr=d.Z.urls.cleanmasterUrl||"https://e.mail.ru/settings/cleanmaster?octaviusMode=1",dr=d.Z.urls.notificationsUrl||"https://e.mail.ru/settings/general#notifications",ur=d.Z.urls.filtersUrl||"https://e.mail.ru/settings/filters",fr=c.default.getAsString("settings-url","https://e.mail.ru/settings/?octaviusMode=1"),mr=d.Z.get("urls.signatureUrl")||"https://e.mail.ru/settings/general#signature",hr=c.default.getAsArray("supported_custom_metathreads",["tomyself"]),pr=c.default.has("settings-dropdown-hide-to-myself"),gr=c.default.getAsArray("widgets-with-show-limit-theme-ids",["t5001","t5003","t5004","t1169","t5002","t5005"]),vr={};gr.forEach((function(e){vr[e]=c.default.getAsInt("widget-show-limit-".concat(e),5)}));var _r=u.Z.LANG,br=d.Z.urls.packagesUrl,Er=c.default.has("max-attaches-size-limit")?c.default.getAsInt("max-attaches-size-limit",26214400):null,yr=c.default.getAsInt("letter-from-future-threshold-timestamp",0),Tr=c.default.getAsTypedArray("letter-from-future-log-dates",c.default.String,[],"|").map((function(e){return e.replace(/_/g," ")})),Ar=c.default.has("letter-from-future-log-kaktam"),Sr=c.default.has("ignore-local-time"),Or=c.default.has("disable-time-correction"),Cr=c.default.getAsInt("debug-server-timestamp",0),wr=c.default.has("octavius-prefetch"),Lr=c.default.has("archive-disabled"),kr=c.default.has("smart-thread-fetching"),Ir=c.default.getAsJSON("suggest-from",null),Rr=c.default.has("is_chrome"),Dr=c.default.has("advert-scroll"),Mr=c.default.has("advert-sidebar-sleep"),Pr=c.default.getAsTypedArray("advert-scroll",c.default.Int,[2,1,1],"|"),Nr=c.default.has("advert-xhr-restore"),xr=c.default.has("advert-cpm-reload"),Fr=c.default.getAsTypedArray("advert-cpm-reload",c.default.Int,[1e3,0,1e3,0]),Ur=c.default.getAsString("advert-cpm-exp","0"),Hr=c.default.getAsTypedArray("advert-cpm-values",c.default.Int,[]),Br=c.default.getAsString("rb-country-id"),Zr=c.default.getAsString("rb-province-id"),Gr=c.default.getAsString("rb-region-id"),qr=c.default.getAsInt("advert-vis-check",3e3),jr=c.default.has("advert-vis-log"),Wr=c.default.has("adv-no-mimic-on-wlist"),Vr=c.default.has("adv-no-mimic-on-adblock"),zr=!c.default.has("mimic-ignore-has-white-list-disabled"),Yr=c.default.has("kaspersky"),Kr=c.default.getAsString("todo-url","https://todo.mail.ru"),Xr=c.default.getAsInt("metathread_tomyself_snippet_items_max_count",3),Qr=c.default.getAsString("octavius-notify-metathreads-forced",null),Jr=c.default.has("force-metathreads"),$r=c.default.has("force-metathreads-letter"),ea=c.default.has("force-metathreads-exp"),ta=c.default.getAsJSON("themes-available",{});if(void 0===ta.whitelist)ta.whitelist=[];if(!c.default.has("disable-default-theme"))ta.whitelist.unshift("default");if(void 0===ta.colorized)ta.colorized=!0;var na=ta,ra=c.default.has("dompurify"),aa=J?{}:c.default.getAsJSON("adv-specline",{}),ia=J?!1:c.default.has("adv-specline-enabled"),oa=c.default.has("adv-send-multi-account-disabled"),sa=c.default.has("sidebar-pay-notification-badge"),la=c.default.has("todo-toggle"),ca=c.default.getAsJSON("promo-domain-header",[]),da=c.default.has("promo-domain-cross-enabled"),ua=c.default.has("themes-widget-cloudy-enabled"),fa=4,ma="true"===c.default.getAsJSON("phishing-alert",{}).show,ha=!c.default.has("disable-letter-list-highlight-phishing"),pa=c.default.getAsJSON("letter-data-white-list",{}),ga=c.default.has("message-suggests"),va=d.Z.urls.settingsAutoReply||"/settings/autoreply",_a=c.default.getAsString("nav-my-folders-container-id","myFoldersContainer"),ba=c.default.has("suggest-search-internet"),Ea=c.default.getAsString("suggest-search-internet-url","https://go.mail.ru/search?gp=990009&frm=search_mail_sg"),ya=c.default.getAsString("adv-search-exp-id"),Ta=c.default.has("adv-search-send-query"),Aa=c.default.has("search-sidebars"),Sa=!c.default.has("disable-word-break-in-tooltip"),Oa=c.default.getAsInt("compose-slider-last-step-delta",10),Ca=c.default.has("match_media_log"),wa=c.default.has("letter-previews-config"),La=c.default.getAsJSON("letter-previews-config",{"folders-list":[],"stubs-count":0,"show-previews":!1,"go-on-server":!1}),ka=c.default.has("letter-previews-radar"),Ia=c.default.has("sidebar-pay-notification-badge-smart"),Ra=c.default.getAsInt("bills-counter-update-interval",300),Da=c.default.getAsInt("bills-counter-max",99),Ma=c.default.has("dates-metadata"),Pa=c.default.has("layer-unsafe-attach"),Na=c.default.has("cke-attach-base64"),xa=c.default.getAsJSON("sidebar-menu-list-config",[{hidden:!1,type:"calls"},{hidden:!1,type:"cloud"},{hidden:!1,type:"contacts"},{hidden:!1,type:"calendar"},{hidden:!1,type:"pay"},{hidden:!1,type:"bonus"},{hidden:!1,type:"todo"}]),Fa=c.default.has("renovator-disabled"),Ua=c.default.getAsJSON("confirm-folder-clear-config",{inbox:!0,tomyself:!0,trash:!0,child_trash:!0,deleted:!0}),Ha=c.default.getAsInt("dnd-cloud-files-limit",100),Ba=c.default.has("dnd-cloud-enabled"),Za=c.default.has("dnd-cloud-share"),Ga=c.default.getAsInt("dnd-notify-duration",6),qa=d.Z.urls.cloudOpenApiUrl||"https://openapi.cloud.mail.ru/api/v1/",ja=d.Z.urls.cloudHomeUrl||"https://cloud.mail.ru/home",Wa=d.Z.urls.cloudLoadDirectory||"/Загрузки",Va=c.default.getAsString("oauth-client-id","b4c073bb6c5a4b1b84d2c7d2a1bceb9b"),za=c.default.has("calls_p2p"),Ya=d.Z.urls.callsBaseUrl||"https://calls.mail.ru",Ka=c.default.has("calls_p2p_outgoing"),Xa=c.default.getAsJSON("dark_mode_base_color",{r:35,g:35,b:36}),Qa=c.default.has("dark_mode_media_query"),Ja=c.default.getAsEnum("dark_mode_async",["true","false","auto"],"false"),$a=c.default.getAsInt("dark_mode_async_threshold",100),ei=c.default.getAsInt("dark_mode_frame_budget",20),ti=c.default.has("dark_mode_sneaky"),ni=c.default.getAsInt("max-cloud-stock-size",2147483648),ri=c.default.getAsTypedArray("kaspersky_eng_logo_langs",c.default.String,["en_US","es_ES"]),ai=c.default.has("dark_mode_background_async"),ii=c.default.has("welcome-block-disabled"),oi=c.default.getAsInt("welcome-block-scroll-hide-threshold",1),si=c.default.getAsInt("welcome-block-update-weather-interval",600),li=c.default.getAsInt("welcome-block-hide-greeting-timeout",300),ci=c.default.getAsInt("welcome-block-show-interval",3600),di=c.default.getAsInt("welcome-block-snooze-interval",86400),ui=d.Z.urls.weatherUrl||"https://img.imgsmail.ru/static.promo/octavius/weather/",fi=d.Z.urls.selectGeoUrl||"https://mail.ru/region",mi=d.Z.urls.marusiaLogo||"https://img.imgsmail.ru/static.promo/octavius/welcome/marusia.png",hi=d.Z.urls.marusiaUrl||"https://marusia.mail.ru/",pi=c.default.has("ab-lastseen-octavius"),gi=c.default.getDataOrDefault("ab-lastseen-addressbook",null),vi="var(--vkui--octavius_size_headline_height--regular, 36px)",_i="var(--vkui--octavius_size_portal-menu_height--regular, 56px)";if(0!==(null===(l=d.Z.headline)||void 0===l?void 0:l.headlinePromoHeight))window.addEventListener("message",(function(e){var t;if(e.origin.includes("https://limg.imgsmail.ru")&&e.data.close)document.documentElement.style.setProperty("--vkui--octavius_size_headline_height--regular","".concat(null===(t=d.Z.headline)||void 0===t?void 0:t.headlineHeight,"px"),"important")}));var bi=c.default.getDataOrDefault("filter-settings-default-text-var","0"),Ei=c.default.has("settings-dropdown-hide-notifications"),yi=c.default.has("settings-dropdown-hide-cleanmaster"),Ti=c.default.has("settings-dropdown-hide-settings"),Ai=c.default.has("layer-metathread-disable"),Si=c.default.has("no-css-grid-log-kaktam"),Oi=c.default.getAsJSON("visibility-watcher-config",{errThreshold:4,checkTimeout:2e3,disabled:!1}),Ci=c.default.getAsString("forgot-password-url","https://e.mail.ru/settings/folders"),wi=c.default.has("enable_action_over_selected"),Li=c.default.has("radar-skipdwh"),ki=c.default.has("white_portal_forced"),Ii=c.default.has("white_portal_newreg"),Ri=c.default.has("white_portal_available"),Di=c.default.has("white_portal_has_flag"),Mi=c.default.getAsString("white_portal_theme","t6000");if(ki||Ii||Ri)na.whitelist.push(Mi);var Pi,Ni=c.default.has("user-layout-resize")&&!At,xi=Ni&&c.default.has("user-layout-resize-3pane"),Fi=Ni&&!c.default.has("user-layout-disable-save-to-storage"),Ui=!c.default.has("user-layout-disable-metrics"),Hi=c.default.has("discounts-block"),Bi=c.default.has("discounts-block_default"),Zi=c.default.getAsString("discounts-flag-name","discounts-v2"),Gi=c.default.getAsInt("discounts-block-limit",50),qi=c.default.getAsDuration("p2p_promo_show_recently_duration",604800),ji=c.default.has("css-vars-fallback"),Wi=c.default.has("resend-dropdown-disabled"),Vi=c.default.getAsTypedArray("deploy_switch_reload_timeout",c.default.Int,[1,60],","),zi=c.default.getAsTypedArray("deploy_ok_reload_timeout",c.default.Int,Vi,","),Yi=c.default.has("deploy_ok_reload"),Ki=c.default.getAsDuration("resize-update-debounce-time",300),Xi=c.default.getAsInt("promo-logo-min-width",210),Qi=c.default.getAsString("discounts_mouse_scroll","2pane"),Ji=c.default.has("payment-letter-universal"),$i=c.default.has("ll-unsubscribe-newsletters"),eo=c.default.getAsInt("ll-unsubscribe-newsletters-interval",3600),to=c.default.getAsInt("ll-unsubscribe-newsletters-timeout",5),no=c.default.getAsURL("2fa_enable_url","https://account.mail.ru/user/2-step-auth/enable"),ro=c.default.has("deploy_ok_shadow"),ao=c.default.has("compose-native-thumb-rotation"),io=c.default.getAsInt("call_title_blink_interval",0),oo=c.default.getAsInt("autosave-draft-timeout-seconds",60),so=c.default.has("hide_news_metathread"),lo=c.default.getAsArray("metathreads-settings-order",["games","school","newsLetters","social","toMyself","receipts","news","official","inbox"]),co=c.default.getAsInt("min-letter-height-sticky",400),uo=c.default.getAsInt("min-letter-height-sticky-with-attaches",co),fo=c.default.has("delay-for-cancellation"),mo=c.default.has("compose-user-loading-disabled"),ho=c.default.getAsURL("change-expired-password-url","https://id.mail.ru/security"),po=c.default.has("actual-reason-feedback"),go=c.default.has("oversize-cloud-attaches"),vo=c.default.getAsString("oversize-cloud-attaches-folder",Wa),_o=c.default.has("oversize-cloud-attaches-mock-cloud"),bo=d.Z.urls.cloudTariffsIframeUrl||"https://cloud.mail.ru/uploader",Eo=c.default.has("priority-messages_default"),yo=c.default.has("priority-messages-default-newsletters"),To=c.default.has("log-datasource-problems"),Ao=c.default.has("show-definitely-spam"),So=c.default.getAsString("adv-exp-id"),Oo=c.default.getAsString("adv-web-perf-exp-id"),Co=c.default.getAsInt("adman-insert-context-timeout",1800),wo=c.default.getAsString("noadsPromoTariff"),Lo=c.default.has("adv-exp-id-send"),ko=c.default.getAsArray("adv-off-cloud-group",["769"]),Io=c.default.getAsArray("adv-off-notify-group",["773"]),Ro=c.default.getAsArray("adv-off-control-group",["787"]),Do=c.default.getAsArray("adv-off-query-group",["789"]),Mo=c.default.getAsArray("adv-off-month-group",["791"]),Po=c.default.getAsString("no-ads-promo-url","https://cloud.mail.ru/promo/quota?feature=ad&utm_source=mail_disable_ad&utm_medium=cross-promo&utm_campaign=ed.quota#start"),No=c.default.getAsString("no-ads-postmsg-url","https://promo.mail.ru"),xo=c.default.has("discount-description-from-subject"),Fo=c.default.getAsInt("ll-unsubscribe-newsletters-senders-limit",3),Uo=c.default.getAsInt("ll-unsubscribe-newsletters-show-limit",3),Ho=c.default.has("marusia-read-letter"),Bo=c.default.has("marusia-skill-server-test"),Zo=d.Z.get("urls.widgetCloudUrl")||"https://cloud.mail.ru/?utm_source=octavius&utm_medium=widget_desk&utm_campaign=link_cloud",Go=d.Z.get("urls.octaviusAddressbookUrl"),qo=d.Z.get("urls.widgetCalendarUrl")||"https://calendar.mail.ru/?utm_source=octavius&utm_medium=widget_desk&utm_campaign=link_calendar",jo=d.Z.get("urls.widgetXCalendarUrl")||"https://x.calendar.mail.ru/?utm_source=octavius&utm_medium=widget_desk&utm_campaign=link_calendar",Wo=d.Z.get("urls.widgetTodoUrl")||"https://todo.mail.ru/?from=mail&utm_source=octavius&utm_medium=widget_desk&utm_campaign=link_todo",Vo=d.Z.get("urls.widgetCallsUrl")||"https://calls.mail.ru/?utm_source=octavius&utm_medium=widget_desk&utm_campaign=link_calls",zo=d.Z.get("urls.payMenuUrl")||"https://e.mail.ru/payment/center?from=mail&utm_source=octavius&utm_medium=widget_desk&utm_campaign=link_payment",Yo=c.default.getAsJSON("ntfr_intervals",{keepalive:24e4,successConnect:24e4}),Ko=c.default.has("ntfr_reconnect_on_focus"),Xo=c.default.getAsJSON("ntfr_exp-backoff",{minDelay:12e4,maxDelay:36e5,jitter:.4,factor:2}),Qo=c.default.has("force-disable-new-thread"),Jo=c.default.has("use-new-thread")&&!Qo,$o=c.default.has("thread-with-reliable-mark")&&!At,es=c.default.has("swbox"),ts=c.default.has("swbox_log-silent-errors"),ns=c.default.getAsJSON("promo-discounts-colors",{}),rs=c.default.getAsDuration("delay-for-new-discounts",1209600),as=c.default.getAsInt("empty-discounts-block-delay",604800),is=c.default.has("amp_fallback_sender_metric"),os=c.default.has("settings_dock_30_50_mode"),ss=c.default.has("settings_dock_disable_expand_button"),ls=c.default.has("settings_dock_disable_auto_expand"),cs=c.default.has("settings_dock_start_full_screen"),ds=c.default.has("settings_dock_hide_cleanmailbox"),us=c.default.has("settings_dock_cleanmaster_inline_disabled"),fs=c.default.getAsInt("settings_dock_cleanmaster_notify_duration",5),ms=c.default.has("settings_dock_cleanmaster_use_unsubscribe_title"),hs=c.default.has("settings_dock_browser_settings_title"),ps=c.default.has("settings_dock_appearance_title"),gs=c.default.has("settings_dock_cleanmailbox_title"),vs=c.default.getAsInt("cancellation-reserve-time",10),_s=c.default.has("flags_autosync"),bs=c.default.getAsInt("flags_autosync_debounce",2e3),Es={CONTROL:0,MAIL:1,CLOUD:2};!function(e){e.fileType="file_type",e.fileExt="file_ext"}(Pi||(Pi={}));var ys,Ts=c.default.getAsInt("exp-cloud-viewer-group",Es.CONTROL),As=c.default.has("exp-cloud-viewer-force"),Ss=c.default.getAsArray("exp-cloud-viewer-file-types",[]),Os=c.default.getAsArray("exp-cloud-viewer-attach-types",[]),Cs=c.default.getAsArray("exp-cloud-viewer-file-exts",[]),ws=c.default.getAsString("exp-cloud-viewer-enable-type",Pi.fileType),Ls=c.default.has("exp-cloud-viewer-temporary"),ks=c.default.getAsString("exp-cloud-viewer-host","cloud.mail.ru"),Is=c.default.getAsString("cloud-host","cloud.mail.ru"),Rs=c.default.has("headless_counter"),Ds=c.default.has("webpush_metric_disable"),Ms=c.default.has("letter-content-native-advert-enable"),Ps=new RegExp(d.Z.urls.monetaPaymentLetterUrlRegExp||"^https:\\/\\/e\\.mail\\.ru\\/"),Ns=c.default.getAsInt("notify_close_delay",4),xs=c.default.has("advert-feedback-config2"),Fs=c.default.getAsJSON("advert-feedback-config2",{}),Us=c.default.getAsJSON("advert-feedback-text",{title:i18n("Вам интересны похожие предложения?"),positiveButtonText:i18n("Интересны"),negativeButtonText:i18n("Не моё"),chance:5e3}),Hs=c.default.getAsJSON("swbox-analytics-request",{mail:!1,promo:!1}),Bs=c.default.has("disable-vk-messenger"),Zs=c.default.has("vk-messenger-check-vk-auth"),Gs=c.default.has("vk-messenger-external"),qs=c.default.getAsJSON("vk-messenger-chat-id-by-email",{}),js=c.default.getAsString("vk-messenger-chat-href-base","https://vk.com/im?sel=-"),Ws=c.default.has("vk-messenger-restore-on-refresh-disabled"),Vs="vk-messenger-active-chat",zs=c.default.getAsInt("vk-messenger-auth-throttle",1e3),Ys=c.default.has("vk-messenger-disable-silent-auth"),Ks=c.default.has("vk-messenger-show-auth-notify"),Xs=c.default.has("vk-messenger-logout"),Qs=c.default.getAsString("swa-superapp-silent-url","https://account.mail.ru/jsapi/vk/superapp/silent"),Js=c.default.getAsString("vk-login-domain","login.vk.com"),$s=c.default.getAsString("vk-oauth-domain","oauth.vk.com"),el=c.default.getAsString("vk-connect-domain","id.vk.com"),tl=c.default.getAsInt("vk-messenger-app-id",7965175),nl=c.default.has("expired-attaches-die"),rl=c.default.has("attach-warning-tooltip"),al=c.default.has("sent-page-notify"),il=c.default.has("vk"),ol=c.default.has("is-vk-host"),sl=il?"".concat(br,"/static.promo/octavius/placeholders/vk/"):"".concat(br,"/static.promo/octavius/placeholders/mail/"),ll=c.default.has("vk-themes-list"),cl=c.default.getAsString("vk-domain","vk.com"),dl=c.default.has("disable-domain-authcheck"),ul=c.default.getAsJSON("theme-souzmultfilm-marusia",{}),fl=c.default.has("dnd-cloud-folder-choice"),ml=c.default.getAsString("dnd-images-path","static.promo/cross.project.dnd/"),hl=c.default.getAsString("radar-project","octavius"),pl=c.default.has("list-advert-animation"),gl=c.default.has("expired-attaches-tooltip"),vl=c.default.getAsInt("swbox-token-update-interval",0),_l=c.default.getAsArray("contrast-logo-themes",["t6000"]),bl=c.default.getAsArray("preload-release-bundles-filter"),El=c.default.getAsBoolean("lazy-smoke-screen-init"),yl=c.default.has("resizer-drag-icon-shown"),Tl=c.default.has("cke-clipboard-fix"),Al=c.default.has("marusia-read-all-letters"),Sl=c.default.has("cke_autocorrect_afterDeleteContents_disabled"),Ol=c.default.has("cleanmaster-modal-actions-disabled"),Cl=c.default.has("messages-attaches-blobcloud"),wl=c.default.getAsString("messages-attaches-blobcloud-path","//blobcloud.e.mail.ru/upload/"),Ll=c.default.has("compose-emoji"),kl=c.default.getAsInt("compose-emoji-recently-count",30),Il=c.default.has("emoji-fallback"),Rl=c.default.has("show-unsubscribe-after-spam"),Dl=c.default.has("show-unsubscribe-after-move-to-spam"),Ml=!c.default.has("render-compose-to-body-end"),Pl=c.default.has("use-x-calendar"),Nl=c.default.getAsArray("quota-adv-exp-ids",["500","501","502","503"]),xl="https://cloud.mail.ru/promo/quota?feature=ad&utm_source=mail_disable_ad&utm_medium=cross-promo&utm_campaign=ed.quota#start",Fl="https://cloud.mail.ru/promo/quota?feature=space&utm_source=mail_2GB&utm_medium=cross-promo&utm_campaign=ed.quota#start",Ul=c.default.has("compose-emoji-filter"),Hl=c.default.has("restore-expired-attachments"),Bl=c.default.getAsInt("restore-expired-attachments",8e4),Zl=c.default.has("metathread-move-to-spam-notify"),Gl=c.default.getAsInt("metathread-move-to-spam-notify-duration",4),ql=c.default.has("hide-logo"),jl=c.default.has("use-single-tab"),Wl=c.default.getAsRegExp("use-single-tab-whitelist-regexp",""),Vl=c.default.getAsRegExp("use-single-tab-blacklist-regexp",""),zl=c.default.has("hide-headline"),Yl=c.default.has("is-vk-mini-app"),Kl=c.default.getAsString("jsapi-base-url","https://account.mail.ru/jsapi"),Xl=c.default.getAsString("vk-mail-old-mini-app-url","https://vk.com/vkmail"),Ql=p(p({},Ot?{wv:1,"wv-dark":Ct?1:0}:yt?{mv:1}:{}),Yl?{miniapp:"vk"}:{}),Jl=c.default.has("disable-marusia-in-portal"),$l=c.default.has("show-reload-button"),ec=c.default.getAsInt("shortcut-left-column-limit",36),tc=c.default.has("disable-letter-headers-button"),nc=c.default.getAsArray("compose_allowed_templates",[]),rc=c.default.getAsJSON("compose_templates_subjects",{}),ac=c.default.getAsString("compose_templates_url","https://e-mail-ru.mrgcdn.ru/static/cards/"),ic=d.Z.get("urls.avatarUrl")+"/pic?width=96&height=96",oc=c.default.has("noads-button-show-force"),sc=c.default.has("noads-button-light"),lc=c.default.getAsURL("noads-button-href","https://cloud.mail.ru/promo/quota?feature=ad#start"),cc=c.default.getAsDuration("noads-button-delay",2592e3),dc=c.default.has("enable-sorting"),uc=c.default.has("enable-multiple-filters"),fc=c.default.has("force-parental-control-die"),mc=c.default.getAsInt("trash-folder-id",500002),hc=c.default.has("disable-delete-from-trash"),pc=c.default.has("forbid-filters"),gc=c.default.has("forbid-spam"),vc=c.default.has("forbid-excluded-folders-search"),_c=c.default.getAsArray("parental-control-private-folder-ids",[]),bc=c.default.getAsString("nav-parent-private-folders-container-id","parentPrivateFoldersContainer"),Ec=c.default.getAsInt("parental-control-deny-folder-id",950),yc=c.default.getAsInt("parental-control-approve-folder-id",0),Tc=c.default.getAsURL("promt-logo-href","https://www.translate.ru/?utm_source=mail.ru&utm_medium=link&utm_campaign=brand"),Ac=c.default.has("polling_only_visible"),Sc=c.default.has("lastseen-v2"),Oc=Sc&&c.default.has("lastseen-letter-request"),Cc=c.default.has("lastseen-platform-disable"),wc=c.default.getAsString("lastseen-online-status","ONLINE"),Lc=c.default.getAsString("lastseen-show-time-status","OFFLINE"),kc=c.default.has("lastseen-compose-allow-garage"),Ic=c.default.has("disable-left-column"),Rc=c.default.has("enable-xxs-breakpoint"),Dc=c.default.getAsInt("xxs-breakpoint",760),Mc=c.default.has("disable-dropdown-actions-shortcuts"),Pc=c.default.has("hide-notify-close-button"),Nc=c.default.has("hide-compose-cancel-button"),xc=c.default.has("hide-compose-widgets"),Fc=c.default.has("compose-footer-dropdown"),Uc=c.default.has("compose-hide-avatar"),Hc=c.default.has("compose-disable-clickable-labels"),Bc=c.default.has("compose-disable-toolbar"),Zc=c.default.has("compose-short-attach-panel"),Gc=c.default.has("compose-enable-tables")&&!At,qc=c.default.has("hide-contextmenu-add-contact-button"),jc=c.default.has("hide-contextmenu-search-button"),Wc=c.default.has("hide-settings-button"),Vc=c.default.has("hide-change-signature"),zc=c.default.has("disable-compose-attachment-click"),Yc=c.default.getAsString("mobile-addressbook-url",Go),Kc=c.default.getAsString("addressbook-ico",""),Xc=c.default.has("compose-fetch-autoreply"),Qc=c.default.has("show-reliable-sender-promo"),Jc=c.default.has("show-reliable-on-list-letters"),$c=c.default.has("disable-green-reliable-on-letter-list"),ed=c.default.has("show-official-sender-promo"),td=c.default.has("show-official-on-list-letters"),nd=c.default.has("disable-green-official-on-letter-list"),rd=c.default.has("dark_mode-rollback_on_copy"),ad=c.default.has("disable-automated-translate"),id=c.default.has("automated-show-translator"),od=c.default.has("csat_disabled"),sd=c.default.has("csat_dry_run"),ld=c.default.getAsString("csat_domain",""),cd=c.default.getAsJSON("csat_surveys",{surveys:[]}),dd=c.default.getAsString("csat_force_show_survey_id"),ud=c.default.getAsInt("csat_success_hide_timeout",0),fd=24*c.default.getAsInt("csat_after_reg_delay_in_days",7)*60*60,md=c.default.getAsJSON("csat_triggers",[]),hd=c.default.getAsString("csat_theme","paradigm"),pd=c.default.getAsInt("csat_tick_timeout",5e3),gd=c.default.getAsInt("csat_trigger_timeout",1e3),vd=c.default.has("hide-message-footer"),_d=c.default.has("hide-message-smart-reply"),bd=c.default.has("hide-message-smart-reply-by-only-width"),Ed=c.default.getAsString("wp-exp-build-id","main"),yd=c.default.getAsBoolean("async-render-react-in-wp-build"),Td=c.default.has("hide-webview-title"),Ad=c.default.has("hide-disable-to-myself-metathread"),Sd=c.default.has("thread-switch-race-fix"),Od=c.default.has("attach-analytics-ext-disabled"),Cd=c.default.has("enable-list-letter-action-buttons"),wd=c.default.has("hide_official_metathread"),Ld=c.default.has("hide-school-metathread"),kd=c.default.has("hide-games-metathread"),Id=c.default.has("cke-quote-parse-fix-disable"),Rd=c.default.has("enable-official-letters"),Dd=Rd||c.default.has("use-new-search-category-format"),Md=["document_scans","order","finance","registration","travel","event",Rd?"official":"fees"].filter((function(e){return!c.default.has("disable-".concat(e))})),Pd=c.default.has("unsubscribe-instead-spam"),Nd=c.default.has("unsubscribe-in-more-dropdown"),xd=c.default.has("r7-cloud-view"),Fd=c.default.getAsArray("r7-extensions",["doc","docm","docx","dot","dotm","dotx","epub","fodt","htm","html","mht","odt","ott","rtf","djvu","xps","csv","fods","ods","ots","xls","xlsm","xlsx","xlt","xltm","xltx","fodp","odp","otp","pot","potm","potx","pps","ppsm","ppsx","ppt","pptm","pptx"]),Ud=c.default.has("enable-mentions"),Hd=c.default.getAsString("mentions-mark","@"),Bd=c.default.has("settings_dock_browsersettings_enabled")&&(c.default.has("browser-settings-mailto")||c.default.has("browser-settings-notifications-push")||c.default.has("browser-settings-notifications-web")),Zd=c.default.has("show-category-feedback-plate"),Gd=c.default.getAsJSON("viewer-attaches-id-reg-exps",{}),qd=c.default.getAsJSON("viewer-message-id-reg-exps",{}),jd=c.default.has("view-url-ids-validate-disable"),Wd=c.default.has("metathread_redirect"),Vd=c.default.has("hide-emoji-in-subject"),zd=c.default.has("hide-emoji-in-correspondent"),Yd=c.default.has("hide-emoji-in-snippet"),Kd=c.default.getAsString("folders_sort_variation"),Xd=["tagged_personal","tagged_documents","tagged_needs_reply","tagged_important","tagged_urgent"].filter((function(e){return!c.default.has("disable-".concat(e))})),Qd=c.default.has("enable-color-tags-search"),Jd=c.default.has("search-suggests-delay"),$d=c.default.getAsInt("search-suggests-delay-time",500);!function(e){e.old="old",e.oldTwoBtn="oldTwoBtn",e.new="new",e.newTwoBtn="newTwoBtn"}(ys||(ys={}));var eu=c.default.getAsString("empty-folder-placeholder",ys.old),tu=c.default.getAsArray("light-color-themes",["t4009","t4010","t4011","t4012","t4013","t4014","t4015","t4000","t2014","t2018","t1075","t2054"]),nu=c.default.has("metathread-back-to-inbox"),ru=c.default.getAsArray("back-to-parent-pos",[]),au=ru.includes("logo"),iu=ru.includes("letters"),ou=c.default.has("back-to-parent-shortcut"),su=c.default.has("portal-menu-more-folder-actions"),lu=c.default.has("portal-menu-clear-metathread"),cu=c.default.getAsString("deselect-all-label-style","back"),du=c.default.has("back-to-parent-at-empty-letters"),uu=c.default.has("go-to-action-button"),fu=c.default.has("b2b-inner-attachments-notify"),mu=c.default.has("smart-card-ics"),hu=c.default.has("hide-receipts-metathread"),pu=c.default.getAsString("widget-icons-variant",""),gu=c.default.has("fake-create-todo"),vu=c.default.has("show-promo-push-plate"),_u=c.default.has("disable-octopus-create-filter"),bu=c.default.has("enable-hide-translator"),Eu=c.default.has("new-toolbar"),yu=c.default.has("new-toolbar"),Tu=c.default.has("new-toolbar"),Au=c.default.getAsInt("search-panel-size",336),Su=c.default.getAsJSON("custom-themes-previews-paths")||{},Ou=c.default.has("letter-meta-skeleton-enable"),Cu=c.default.getAsInt("letter-meta-skeleton-timeout",3e4),wu=c.default.has("disable-metathread-caps"),Lu=c.default.has("enable-back-to-letters-shortcut-3pane"),ku=c.default.getAsString("fake-button-type"),Iu=c.default.has("enable-tags"),Ru=c.default.getAsJSON("tags-colors",{tagged_personal:"orange",tagged_documents:"purple",tagged_important:"mint",tagged_urgent:"pink",tagged_needs_reply:"sky"}),Du=c.default.getAsArray("tags-order",["tagged_personal","tagged_documents","tagged_needs_reply","tagged_important","tagged_urgent"],"|"),Mu=c.default.has("fake-button-discuss-document"),Pu=c.default.getAsURL("kaspersky-logo-href","http://www.kaspersky.ru/advert/home-security?campaign=kl_mailgroup&redef=1&THRU&referer1=kl_mailgroup_pochta&referer2=kl_mailgroup_pochta"),Nu=!c.default.has("kaspersky-logo-with-ad-dropdown-disabled"),xu=((a={})[f.Jo.Advertiser]="АО «Лаборатория Касперского»",a[f.Jo.INN_KPP]="7713140469/997750001",a[f.Jo.OGRN]="1027739867473",a),Fu=c.default.getAsJSON("kaspersky-about-ad",xu),Uu=!c.default.has("promt-logo-with-ad-dropdown-disabled"),Hu=((i={})[f.Jo.Advertiser]="ООО «ПРОМТ»",i[f.Jo.INN_KPP]="7804146852/780101001",i[f.Jo.OGRN]="1027802484160",i),Bu=c.default.getAsJSON("promt-about-ad",Hu),Zu=c.default.has("translate-about-ad"),Gu=c.default.has("enable-metathread-filters-shortcut"),qu=c.default.has("log_fishing_deinit_error"),ju=c.default.has("disable-image-expander"),Wu=c.default.has("enable-letter-dividers")&&!Et,Vu=c.default.has("enable-author-sent-letter-dividers"),zu=c.default.has("enable-author-letter-dividers"),Yu=c.default.has("enable-subject-letter-dividers"),Ku=c.default.has("enable-latest-with-months-letter-dividers"),Xu=c.default.has("fake-button-signing"),Qu=c.default.has("space-after-more"),Ju=c.default.has("accent-disabled-metathread-settings-item"),$u=c.default.getAsArray("fake-gos-template-suggestion",[]),ef=c.default.has("search-clear"),tf=c.default.getAsArray("order-buttons",[]),nf=Iu&&c.default.has("enable-add-tags-touch"),rf=c.default.has("disable-letter-item-folder"),af=c.default.has("enable-letters-list-dividers-switcher"),of=c.default.has("show-vk-help-plate"),sf=c.default.getAsString("vk-help-chat-id","217777387"),lf=c.default.has("smart-card-toggle-ics-enabled"),cf=c.default.has("smart-card-toggle-ics-calendar-letter"),df=c.default.getAsArray("calendar-email-list",["calendar@corp.mail.ru","calendar@mini-mail.ru"]),uf=c.default.getAsURL("href-theme-widget-new-year-2023","https://newyear.mail.ru/2023/?utm_source=mailtheme&utm_medium=cta&utm_campaign=newyear"),ff=c.default.has("settings-dropdown-hide-security"),mf=c.default.has("tracking-status-plate"),hf=c.default.has("disable-footer-app-toolbar"),pf=(Tt||yt)&&!hf,gf=c.default.has("disable-mobile-account-profile"),vf=c.default.has("disable-mobile-account-security"),_f=c.default.has("disable-mobile-account-change-and-add"),bf=c.default.has("disable-mobile-account-logout-alert"),Ef=c.default.has("disable-mobile-contacts"),yf=c.default.has("g-silent-off"),Tf=c.default.has("smart-card-ml"),Af=c.default.has("promo-manual-load"),Sf=c.default.has("promo-debounce-update"),Of=c.default.has("sync-thread-updates"),Cf=c.default.getAsInt("thread-update-timeout",6e4),wf=c.default.has("adv-move-top-line"),Lf=d.Z.urls.iosAppDeeplink||d.Z.urls.iosAppDownload,kf=d.Z.urls.androidAppDeeplink||d.Z.urls.androidAppDownload,If=c.default.getAsInt("adv-move-top-line"),Rf=!If||2===If,Df=!If||3===If,Mf=c.default.getAsBoolean("show-attach-safety-status",!1),Pf=c.default.getAsBoolean("has-attach-safety-status-background",!1),Nf=c.default.getAsString("attach-safety-status-position","start"),xf=c.default.getAsURL("oauth_host","https://o2.mail.ru"),Ff=c.default.has("new-features-bell"),Uf=c.default.has("new-features-megafon-icon"),Hf=c.default.getAsInt("new-features-count",3),Bf=c.default.getAsURL("new-features-landing-href","https://whatsnew.mail.ru"),Zf=c.default.getAsString("themes-project-name","octavius"),Gf=c.default.has("show-promo-new-toolbar"),qf=c.default.getAsInt("letter-send-cancel-timer-display-time-at-the-end",Number.MAX_SAFE_INTEGER),jf=c.default.has("hide-clear-button-on-spam-folder"),Wf=c.default.has("widget-column"),Vf=c.default.has("log-empty-collectors"),zf=c.default.has("enable-mobile-csat"),Yf=c.default.getAsString("mobile-csat","31"),Kf=c.default.has("new-toolbar-projects-notes"),Xf=c.default.getAsString("url-open-projects-notes","https://notes.mail.ru/create-new-note"),Qf=c.default.has("show-plate-newsletter-mailing-subscribe"),Jf=c.default.has("show-security-checkup-link-in-settings")&&!Object.values(u.Z.get("initialUser.social_bind")).includes(!0)&&"external"!==u.Z.get("initialUser.account_type"),$f=c.default.getAsURL("account-hostname","https://account.${topLevelHost}"),em=c.default.getAsString("security-checkup-url","".concat($f,"/security")),tm=c.default.getAsString("calendar-url","https://touch.calendar.mail.ru"),nm=c.default.has("widget-calendar"),rm=c.default.has("widget-weather")&&!!d.Z.weatherForecast,am=c.default.getAsEnum("widget-weather-format",["short","full"],"short"),im=c.default.getAsString("widget-weather-main-href","https://mail.ru"),om=c.default.getAsString("debug-widget-weather-advice"),sm=c.default.getAsInt("widget-weather-short-near-days-forecast-count",2),lm=1e3*c.default.getAsDuration("widget-weather-refetch-interval","3h"),cm=c.default.has("widget-weather-advice-disabled"),dm=c.default.has("widget-notes"),um=c.default.getAsString("widget-notes-url","https://notes.mail.ru"),fm=c.default.getAsString("widget-notes-href","https://trk.mail.ru/c/z0sa39"),mm=c.default.getAsString("widget-notes-header-text","Заметочный текст"),hm=c.default.has("widget-column-default-open"),pm=c.default.has("hide-delimiter"),gm=c.default.has("enable-csat-animation"),vm=c.default.getAsString("csat-animation-duration","0.25s"),_m=c.default.getAsString("csat-animation-direction","left"),bm=c.default.getAsString("csat-animation-gap","16px"),Em=c.default.getAsURL("calendar-graphql-api-url","https://corsapi.imgsmail.ru/calendar/graphql"),ym=c.default.getAsURL("todo-api-url","https://corsapi.imgsmail.ru/todo"),Tm=c.default.getAsURL("notes_api_url","https://corsapi.imgsmail.ru/notes/api/v1"),Am=c.default.getAsString("widget-header-type","none"),Sm="none"!==Am,Om=Sm&&Ff,Cm=c.default.getAsString("iframe-marusia-url","https://marusia-web.go.mail.ru"),wm=1e3*c.default.getAsDuration("weather-ping","10m")||!1,Lm=1e3*c.default.getAsDuration("calendar-ping")||!1,km=1e3*c.default.getAsDuration("todo-ping")||!1,Im=c.default.getAsInt("default-todo-tasks")||!1,Rm=c.default.getAsString("quota-url","https://cloud.mail.ru/promo/quota/"),Dm=c.default.getAsString("widget-quota-type","none"),Mm=c.default.has("use-custom-theme-preview-name"),Pm=c.default.getAsInt("theme-apply-small-timeout",3e4),Nm=c.default.getAsArray("support-widget-theme-ids",["t1154","t1155","t1189","t1190","t1168","t3002","t3015","t5001","t1169","t5003","t5004","t5002","t5005","t5007"]),xm=c.default.getAsArray("dark-mode-themes",["t5000","t5001"]),Fm=c.default.getAsArray("dark-default-mode-themes",["t5000"]),Um=c.default.getAsArray("light-default-mode-themes",["t6000","default"]),Hm=c.default.getAsJSON("themes-paths-v4",{}),Bm=c.default.has("change-text-remove-button-sidebar"),Zm=c.default.has("change-text-remove-button-metathread-delete"),Gm=c.default.has("change-text-remove-button-metathread-empty"),qm=c.default.has("change-icon-remove-button-metathread"),jm=c.default.has("show-involvement-letter-list-intergation"),Wm=c.default.has("show-letter-body-selection-integration"),Vm=c.default.has("send-selection-text-letter-radar"),zm=c.default.getAsString("letter-body-selection-integration-notes-variant","tab"),Ym=c.default.has("show-sidebar-unsubscribe-button"),Km=c.default.has("show-sidebar-unsubscribe-button-mobile"),Xm=c.default.has("show-unsubscribe-button-mobile-settings"),Qm=c.default.has("show-spam-warning-alert"),Jm=c.default.has("disable-letter-swipe"),$m=c.default.has("enable-letter-fast-action-swipe"),eh=c.default.has("use-new-mobile-folders-modal"),th=c.default.has("button-move-to-spam-cancel-primary"),nh=c.default.has("button-move-to-spam-cancel-left-position"),rh=c.default.has("enable-mobile-search-button"),ah=c.default.getAsString("create-note-from-compose",""),ih=c.default.getAsURL("notes-url","https://notes.mail.ru"),oh=c.default.getAsArray("viewer-attach-temp-cloudstock",[]),sh=c.default.getAsArray("viewer-attach-temp-cloud",[]),lh=c.default.has("use-queue-promo-push-plate"),ch=c.default.getAsInt("delay-promo-push-plate",15552e3),dh=c.default.getAsInt("count-show-promo-push-plate-before-delay",2),uh=c.default.has("use-queue-category-feedback-plate"),fh=c.default.getAsInt("max-count-show-category-feedback-plate"),mh=c.default.getAsInt("delay-category-feedback-plate",1209600),hh=c.default.has("new-radio-button-change-locales"),ph=c.default.has("adv-sidebar-160-always"),gh=c.default.has("adv-sidebar-160-on-width-1800"),vh=c.default.has("adv-sidebar-160-on-width-1420"),_h=c.default.has("show-sender-email-in-spam-folder"),bh=c.default.has("adv-3pane-redesign-v3"),Eh=c.default.getAsInt("count-replay-animation",4),yh=c.default.getAsDuration("timeout-first-animation",3e4),Th=c.default.getAsDuration("timeout-next-animation",2592e5),Ah=c.default.getAsArray("extensions-white-list",["3gp","amr","avi","bak","bmp","cat","cfg","config","cr2","css","csv","dat","db","dng","ds_store","epub","fb2","flv","gif","heic","ico","ics","ini","jpeg","jpg","json","key","log","lst","m3u","m4a","m4v","manifest","mkv","mov","mp3","mp4","mts","ne","nfo","ogg","opus","otf","p12","png","sig","svg","tif","tmp","ttf","txt","vcf","vob","wav","webm","webp","wma","wmv","xml"]),Sh=c.default.has("show-attach-safety-status-tooltip"),Oh=!c.default.has("disable-mediators-preinit"),Ch=c.default.getAsDuration("lazy-noncrit-tasks-timeout",1e4),wh=c.default.getAsString("vkt-cloud-url","vkteams://miniapp/cloud/"),Lh=c.default.has("darkosha_table_border_fix_enabled"),kh=c.default.has("redesign-octavius-m-letter-list"),Ih=c.default.getAsString("headline-class","overflow"),Rh=c.default.getAsString("dpip-origin-trial-token","ArskvbQYtf5u2TouZXHaazt6NYr1Ht7iK/KHPJr220WbYb9tskZA1F3ELn1jnJz9QOsINzaeYLtIn5NHGROh/wEAAABveyJvcmlnaW4iOiJodHRwczovL21haWwucnU6NDQzIiwiZmVhdHVyZSI6IkRvY3VtZW50UGljdHVyZUluUGljdHVyZUFQSSIsImV4cGlyeSI6MTY5NDEzMTE5OSwiaXNTdWJkb21haW4iOnRydWV9"),Dh=c.default.has("dpip-widget-calendar-enabled"),Mh=c.default.getAsInt("dpip-widget-width-px",320),Ph=c.default.getAsInt("dpip-widget-height-px",436),Nh=c.default.getAsInt("csat_hide_after_success_hide_timeout"),xh=c.default.has("prevent-update-without-internet")},19008:function(e,t,n){"use strict";n.d(t,{WE:function(){return s},Eq:function(){return l},k0:function(){return c},Mg:function(){return d},R0:function(){return u},pB:function(){return f},_u:function(){return m},hh:function(){return h},zW:function(){return p},rY:function(){return g}});var r=n(83260),a=n.n(r),i=/^['"]+([^'"]+)['"]+$/,o=["from","to","cc","bcc"];function s(e,t,n){if(void 0===t)t="from";if(void 0===n)n="";var r=e.get("correspondents.".concat(t).concat(n));if(!r||!r.length){var a=e.get("messages");if(a&&a.length)r=e.get("messages.0.correspondents.".concat(t).concat(n))}if(!r&&!n)return[];else return r}function l(e){return e.replace(i,"$1").trim()}function c(e){var t;if("string"!=typeof e)t=e.name||e.email;else t=e||i18n("<Не указано>");return l(t)}function d(e){var t;if("string"!=typeof e){var n=e.name===e.email||""===e.name;if(n)t=e.email;if(!n)t="".concat(e.name?e.name+" ":"","<").concat(e.email,">")}else t=e||i18n("<Не указано>");return l(t)}function u(e){return(e||[]).map((function(e){if(e.name===e.email||""===e.name)return e.email;else return"".concat(e.name?e.name+" ":"","<").concat(e.email,">")}))}function f(e,t){if(void 0===t)t="from";var n=".0.avatars.default";if("from"===t)return s(e,"from",n)||"";var r=s(e,"to",n),a=s(e,"cc",n);return r||a||""}function m(e,t,n){if(void 0===t)t="from";if(void 0===n)n=!1;return s(e,t).map((function(e){return n?d(e):c(e)})).join(", ")}function h(e,t){if(void 0===t)t="from";return s(e,t).map((function(e){return e.email})).join(", ")}function p(e){return i18n.plural(e,[i18n("{count} получателей",{count:e}),i18n("{count} получатель",{count:e}),i18n("{count} получателя",{count:e})])}function g(e){var t=[];return o.forEach((function(n){t=t.concat(a().pluck(s(e,n),"email"))})),t}},26499:function(e,t,n){"use strict";function r(e){return i18n.plural(e,[i18n("{count} файлов",{count:e}),i18n("{count} файл",{count:e}),i18n("{count} файла",{count:e})])}function a(e){return i18n.plural(e,[i18n("{count} файлов сохранено",{count:e}),i18n("{count} файл сохранен",{count:e}),i18n("{count} файла сохранено",{count:e})])}n.d(t,{O:function(){return r},q:function(){return a}})},37803:function(e,t,n){"use strict";function r(e){return i18n.plural(e,[i18n("{count} писем",{count:e}),i18n("{count} письмо",{count:e}),i18n("{count} письма",{count:e})])}n.d(t,{F:function(){return r}})},44438:function(e,t,n){"use strict";n.d(t,{bv:function(){return g},YX:function(){return v},FE:function(){return _},Xr:function(){return b},Ak:function(){return y},Yr:function(){return T},Zm:function(){return S},BY:function(){return C},ye:function(){return w}});var r=n(60033),a=n.n(r),i=n(19275),o=n(50987),s=n(21211),l=n(75975),c=n(25191),d=n(83260),u=n(37030),f=null,m=null,h=null,p=(0,l.v0)(1);function g(e){if(e=parseInt(e,10),"number"==typeof f)return e+f;if(s.DISABLE_TIME_CORRECTION)return e;var t=o.Z.get("initialUser")||{};if(!0===(m="boolean"==typeof t.timezone_autodetect?t.timezone_autodetect:!0)){var n=i.Z.clientTimestamp-(s.DEBUG_SERVER_TIMESTAMP>0?s.DEBUG_SERVER_TIMESTAMP:i.Z.serverTimestamp);if(n>p||s.IGNORE_LOCAL_TIME)n=0;f=10*Math.round(n/1e4)}else f=t.timezone_offset+60*(new Date).getTimezoneOffset(),h=t.timezone_offset;return e+f}var v=function(e){return 1e3*g(Math.round(e/1e3))},_=function(e){return(0,u.p6)(new Date(1e3*g(e)),[["day","numeric"],["month","long"],["year","numeric"],["hour","numeric"],["minute","2-digit"]],{literalBefore:{hour:", "}})},b=function(e){return e?(0,u.p6)(new Date(e),[["hour","numeric"],["minute","2-digit"]]):""},E=function(e,t,n){var r=function(e){try{if(e instanceof Date){var t=v(e.getTime());return new Date(t)}else if((0,d.isPositiveNumber)(e))return e=1e3*g(e),new Date(e);else return null}catch(e){return null}}(e);return r instanceof Date?(0,u.p6)(r,[["day","numeric"],["month","long"],["year",n?"numeric":void 0]]).replace(/([^\d\s]{3})[^\d\s]+/,t?"$&":"$1"):""},y=function(e,t){return E(e,t,!1)},T=function(e,t){return E(e,t,!0)},A=function(e){return(new Date).getFullYear()===e.getFullYear()};function S(e,t){var n=!1,r=null;try{var o=(0,c.p)().route.model;n=o.folder&&o.folder.isOutbox(),r=o.folder&&o.folder.id}catch(e){}var l=e;e=1e3*(t?e:g(e));var d=m?new Date:new Date(v(Date.now())),p=new Date(e);function _(e){return(0,u.p6)(e,[["day","numeric"],["month","long"]]).replace(/([^\d\s]{3})[^\d\s]+/,"$1")}var E=_(p),y=_(d);if(!n){var T=s.LETTER_FROM_FUTURE_THRESHOLD_TIMESTAMP>155e10&&e>s.LETTER_FROM_FUTURE_THRESHOLD_TIMESTAMP,S=s.LETTER_FROM_FUTURE_LOG_DATES.includes(E);if(T||S){var O={};if(T)O.dff=1;if(S)O.dill=1;var C={i:O};if(s.LETTER_FROM_FUTURE_LOG_KAKTAM)O.kaktam=1,C.rlog="octavius_future_date",C.rlog_message={isDateFromFuture:T,isDateInLogList:S,originalTimeValue:l,time:e,now:d,date:p,dateFormatted:E,nowFormatted:y,clientTimestamp:i.Z.clientTimestamp,serverTimestamp:i.Z.serverTimestamp,xHost:i.Z.xHost,timezoneOffset:f,timezoneAutodetectSetting:m,userTimezoneOffsetFromSettings:h,getTimezoneOffset:60*(new Date).getTimezoneOffset(),folderId:r,href:window.location.href,dateNow:Date.now()};a().send("future-date",C)}}if(!A(p))return(0,u.p6)(p,[["day","2-digit"],["month","2-digit"],["year","2-digit"]]);if(E===y)return b(e);else return E}function O(e){var t=(0,u.zk)(e);if(t||(0,u.gO)(e))return(0,u.kC)(t?u.FF.TODAY:u.FF.YESTERDAY)+", "+(0,u.p6)(e,[["hour","numeric"],["minute","2-digit"]]);else return(0,u.p6)(e,[["day","numeric"],["month","long"],["year",A(e)?void 0:"numeric"],["hour","numeric"],["minute","2-digit"]],{literalBefore:{hour:", "}})}var C=function(e,t){return O(new Date(1e3*(t?e:g(e))))},w=function(e){return i18n("Письмо будет отправлено {date}",{date:(0,u.kC)(O(new Date(1e3*g(e))))})}},71745:function(e,t,n){"use strict";n.d(t,{ig:function(){return s},_V:function(){return l},$r:function(){return c}});var r=n(4872),a=n.n(r),i=function(e){for(var t=[e],n=[],r=function(){var e=t.pop();n.push(e);var r=e.get("id"),i=a().all.filter((function(e){return e.get("parent")===r}));t.push.apply(t,i)};t.length>0;)r();return n.slice(1)},o=function(e){return e.reduce((function(e,t){if(t.isTrashLike()||t.isSpam()||t.isArchive())return e;else return Math.max(0,e+t.get("unread"))}),0)},s=function(e){if(void 0===e)e=!1;var t=e?a().all.filter((function(e){return e.isUser()})):a().all;return o(t)},l=function(e,t){if(void 0===t)t=!0;if(e.isTrashLike()||e.isSpam()||e.isArchive())return 0;var n=e.get("unread");if(!t||!e.isParent())return Math.max(0,n);var r=i(e);return Math.max(0,n+o(r))},c=function(e,t){if(void 0===t)t=!0;var n=e.get("messages");if(!t||!e.isParent())return Math.max(0,n);var r=i(e);return Math.max(0,n+r.reduce((function(e,t){if(t.isTrashLike()||t.isSpam()||t.isArchive())return e;else return Math.max(0,e+t.get("messages"))}),0))}},37030:function(e,t,n){"use strict";n.d(t,{kC:function(){return l},FF:function(){return c},Gh:function(){return d},zk:function(){return f},gO:function(){return m},jJ:function(){return h},p6:function(){return S}});var r=n(60033),a=n.n(r),i=n(52745),o=n(50987),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},l=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},c={TODAY:i18n("сегодня"),YESTERDAY:i18n("вчера"),TOMORROW:i18n("завтра")},d={today:i18n("сегодня"),tomorrow:i18n("завтра"),yesterday:i18n("вчера")},u=function(e){if(void 0===e)e=o.Z.LANG||"ru-RU";return e.replace(/_/g,"-")};try{(new Date).toLocaleString(u(),{day:"numeric",month:"short"})}catch(e){a().send("date-tolocalestring-err"),Date.prototype.toLocaleString=function(e,t){var n=!(!t||!t.day),r=!(!t||!t.hour),a=n===r;return(a||n?[this.getDate().toString().padStart(2,"0"),(this.getMonth()+1).toString().padStart(2,"0"),this.getFullYear().toString().slice(2)].join("."):"")+(a?", ":"")+(a||r?this.getHours()+":"+this.getMinutes().toString().padStart(2,"0"):"")}}function f(e){var t=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}var m=function(e){return f(new Date(e.getFullYear(),e.getMonth(),e.getDate()+1))},h=function(e){switch(!0){case f(e):return c.TODAY;case m(e):return c.YESTERDAY;case function(e){return f(new Date(e.getFullYear(),e.getMonth(),e.getDate()-1))}(e):return c.TOMORROW;default:return null}},p=!1;function g(e){return[{type:"weekday",value:"#"+(e.getDay()+1)},{type:"literal",value:", "},{type:"day",value:e.getDate().toString().padStart(2,"0")},{type:"literal",value:"."},{type:"month",value:(e.getMonth()+1).toString().padStart(2,"0")},{type:"literal",value:"."},{type:"year",value:e.getFullYear().toString().slice(-2)},{type:"literal",value:", "},{type:"hour",value:e.getHours().toString().padStart(2,"0")},{type:"literal",value:":"},{type:"minute",value:e.getMinutes().toString().padStart(2,"0")},{type:"literal",value:":"},{type:"second",value:e.getSeconds().toString().padStart(2,"0")}]}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p?{formatToParts:g}:Intl.DateTimeFormat.apply(Intl,e)}function _(e,t){var n;if(void 0===t)t=!0;if(a().send("intl-datetimeformat-err-".concat(e),{i:(n={},n["fb-".concat(p)]=1,n),skipdwh:!0}),t)p=!0}var b=function(e,t){try{return e()}catch(e){return t(e)}},E=function(){return{locale:b(u,(function(){return!1})),timeZone:b((function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}),(function(){return!1}))}};try{v(u(),{day:"numeric",month:"numeric",year:"numeric",hour12:!1}).formatToParts(new Date)}catch(e){_("c1")}try{v(u(),{day:"numeric",month:"long",year:"numeric",hour12:!1}).formatToParts(new Date)}catch(e){_("c2")}var y=E(),T=!1,A=function(e,t){return a().send(e,{rlog:e,rlog_message:t})},S=function(e,t,n){if(void 0===n)n={};var r,a=e instanceof Date?e:new Date(e);if(!((r=a)instanceof Date&&isFinite(+r)))return(0,i.coreLoggerDispatchKnownError)("formatdate-invalid",new RangeError("formatdate-invalid"),a),"";t=t.filter((function(e){return void 0!==e[1]}));var o=b((function(){var e;return v(null!==(e=n.locale)&&void 0!==e?e:u(),s(s(s({},Object.fromEntries(t)),{hour12:!1}),n.intlOptions)).formatToParts(a)}),(function(t){var n={e:t,isFallbackDateTimeFormat:p,originDate:e,cLogs:y,nowLogs:E()},r=t instanceof RangeError&&"Unsupported time zone specified undefined"===t.message;if(!r||!T)A("formatdate-err",n);if(r)A("formatdate-uns-timezone",n);return T||(T=r),g(a)})),l=Object.fromEntries(o.filter((function(e){return"literal"!==e.type})).map((function(e){return[e.type,e.value]})));return t.flatMap((function(e,r){var a,i,s,c,d=e[0],u=e[1],f=null!==(i=null===(a=n.literalAfter)||void 0===a?void 0:a[d])&&void 0!==i?i:r+1<t.length?null!==(c=null===(s=n.literalBefore)||void 0===s?void 0:s[t[r+1][0]])&&void 0!==c?c:function(e,t,n){var r,a=e.findIndex((function(e){var n=e.type;return t===n})),i=e.findIndex((function(e){var t=e.type;return n===t}));if(a>i)a=(r=[i,a])[0],i=r[1];if(-1!==a&&a!==i)return"literal"===e[a+1].type&&e.slice(a+2,i).every((function(t){var n=t.type,r=t.value;return"literal"!==n||r===e[a+1].value}))?e[a+1].value:void 0}(o,d,t[r+1][0]):void 0;return["hour"===d&&"24"===l[d]?"2-digit"===u?"00":"0":l[d],f&&(!n.maxLengthLiteral||n.maxLengthLiteral>=f.length)?f:" "]})).join("").trim()}},28430:function(e,t,n){"use strict";n.d(t,{Jo:function(){return r},yP:function(){return o},Qe:function(){return i}});var r,a=function(e){return function(e){return window.btoa(unescape(encodeURIComponent(e)))}(JSON.stringify(e))};function i(e){if(!e||"object"!=typeof e)return!1;else return"string"==typeof e[r.Advertiser]&&("string"==typeof e[r.INN]||"string"==typeof e[r.INN_KPP])}!function(e){e.Subject="Объект рекламы",e.Advertiser="Рекламодатель",e.INN="ИНН",e.INN_KPP="ИНН/КПП",e.OGRN="ОГРН"}(r||(r={}));var o=function(e){return"https://ads.vk.com/adv_info?data=".concat(a({fields:Object.keys(e).map((function(t){return{name:t,value:e[t]}}))}))}},81320:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var r=n(21211);function a(e,t){if(!e.all&&!e.unread)return!1;var n=t.folder;if(!n)return!1;if(!n.get("messages_unread"))return!1;if(r.ALL_READ_BUTTON)return!0;if(n.isMetathread()&&r.ALL_READ_METATHREADS_ONLY)return!0;else return!1}},54844:function(e,t,n){"use strict";var r=n(53088),a=n.n(r),i=n(72856),o=n.n(i)().matchUserAgent(navigator.userAgent);o.capabilities={"hover-support":function(){var e;if(a().hovermq)e=a().mq("(hover:hover)");else e=!a().mq("screen and (max-width: 760px)")||!a().touchevents;return e}(),"touch-support":a().touchevents||o.msie&&a().pointerevents,"sticky-support":a().csspositionsticky},o.mac=!!navigator.userAgent.match(/\bMac\b/);var s={};o.prefixedCSS=function(e){if(!s[e])s[e]=a().prefixedCSS(e);return s[e]};var l=window.navigator.userAgent.toLowerCase();o.isIE=!!l.match(/msie/),o.isSafari=/safari/.test(l)&&!/chrome/.test(l),o.isTouchDevice=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints||void 0!==window.orientation||/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(l)},o.cssPositionValueSupported=function(e){var t=document.createElement("div");try{for(var n=0,r=e;n<r.length;n++){var a=r[n];if(t.style.position=a,t.style.position===a)return a}}catch(e){return""}return""},o.hasTouchPointer=function(){var e=!1;try{e=window.matchMedia("(pointer:coarse)").matches}catch(e){}return e},o.supportedSticky=o.cssPositionValueSupported(["sticky","-webkit-sticky"]),t.Z=o},24091:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return!e.isOverMaxSize()&&!e.isLink()&&!e.isCloud()||e.isCloudStock()}},62974:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(93286),a=function(){var e;return"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.clipboard)||void 0===e?void 0:e.writeText)};t.Z=function(e){if(!a())return(0,r.ZP)("no-clipboard"),Promise.reject();else return navigator.clipboard.writeText(e)}},26812:function(e,t,n){"use strict";n.d(t,{t:function(){return f},P:function(){return u}});var r=n(21211),a=n(39939),i=n(38524),o=function(e){return" ".concat(i18n.plural(e,[i18n("и ещё {count} файлов",{count:e}),i18n("и ещё {count} файл",{count:e}),i18n("и ещё {count} файла",{count:e})]))},s=function(e,t){var n=t-1;return n>0?i18n.plural(n,[i18n("Fwd: {forwardName} (+{count} писем)",{forwardName:e,count:n}),i18n("Fwd: {forwardName} (+{count} письмо)",{forwardName:e,count:n}),i18n("Fwd: {forwardName} (+{count} письма)",{forwardName:e,count:n})]):i18n("Fwd: {forwardName}",{forwardName:e})},l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},c=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(){var e={helpers:{getAttachmentsMoreText:o,getFwdMessage:s},params:{ATTACHMENTS_RESTORE:r.RESTORE_EXPIRED_ATTACHMENTS,ATTACHMENTS_EXPIRATION_TIME:r.RESTORE_EXPIRED_ATTACHMENTS?r.RESTORE_EXPIRED_ATTACHMENTS_TIME:null}},t=a.default.user,n=t.get("common_purpose_flags.enabled_mbox_quotas"),l=t.get("mbox_quotas");if(null!==r.MAX_ATTACHES_SIZE_LIMIT&&!n)e.params.MAX_SPACE_LEFT=r.MAX_ATTACHES_SIZE_LIMIT;if(n&&l)e.params.MAX_SPACE_LEFT=(0,i.A)(l.attach);return e},f=function(e){return c(void 0,void 0,Promise,(function(){var t,r,a,i;return d(this,(function(o){switch(o.label){case 0:return t=n.e(8524).then(n.t.bind(n,68524,23)),r=u(),a=r.params,i=r.helpers,[4,t];case 1:return[2,new(0,o.sent().default)(l(l({},a),e),i)]}}))}))}},4183:function(e,t,n){"use strict";n.r(t),n.d(t,{dataSourceDispatchUpdateAll:function(){return a},default:function(){return i},dispatchAndWait:function(){return o}});var r=n(54498);function a(){return i({type:r.UPDATE_ALL,uid:void 0})}function i(e,t){if(void 0===e)e={type:r.UPDATE_ALL,uid:void 0};var a=(void 0===t?{}:t).waitForAppLoad,i=void 0===a?!1:a;return new Promise((function(t){Promise.resolve().then((function(){var r=[n(99150)];(function(n){if(n.default)n=n.default;if(i)n.loadPromise().then((function(){t(n.dispatch(e))}));else t(n.dispatch(e))}).apply(null,r)})).catch(n.oe)}))}function o(e){return new Promise((function(t,r){Promise.resolve().then((function(){var a=[n(99150)];(function(n){if(n.default)n=n.default;n.dispatch(e).then((function(e){n.one("afterchange",(function(){t(e)}))})).catch(r)}).apply(null,a)})).catch(n.oe)}))}},22469:function(e,t,n){"use strict";var r;n.d(t,{X:function(){return r}}),function(e){e.NewRange="new:range",e.heightChange="height:change",e.heightChangeClearCache="height:change:clear",e.heightChangeImmediate="height:change:immediate"}(r||(r={}))},75975:function(e,t,n){"use strict";n.d(t,{E0:function(){return r},Z7:function(){return a},xO:function(){return i},v0:function(){return o}});var r=function(e){return 1e3*e},a=function(e){return r(60*e)},i=function(e){return a(60*e)},o=function(e){return i(24*e)}},81690:function(e,t,n){"use strict";n.d(t,{P:function(){return c},h:function(){return d}});var r,a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelAnimationFrame,s=i||function(e){return window.setTimeout(e,0)},l=function(){},c=function(){function e(e){var t=this;this.fn=e,this.pending=!1,this._handle=function(){if(t.pending=!1,!t.destroyed)t.fn.apply(t,t.args),t.args=void 0}}return e.prototype.saveArgs=function(e){this.args=e},e.prototype.requestDebouncedFrame=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.saveArgs(e),!this.pending)this.pending=!0,this.requestID=s(this._handle)},e.prototype.destroy=function(){if(this.requestDebouncedFrame=l,this.destroyed=!0,s===i)o(this.requestID);else window.clearTimeout(this.requestID)},e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.saveArgs=function(e){this.args=this.args?[this.args[0].concat(e)]:e},t}(c)},22184:function(e,t){"use strict";var n=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};t.Z=n},43197:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var r=window.define;function a(e,t){!function(e,t){r(e,(function(){return t}))}(e,t),window.require([e],(function(){}))}},21280:function(e,t,n){"use strict";n.d(t,{pY:function(){return d},qF:function(){return u},xR:function(){return f},us:function(){return m},MB:function(){return T},k9:function(){return C},Lk:function(){return w},Rt:function(){return I},aU:function(){return R},uF:function(){return D}});var r=n(17717),a=n.n(r),i=n(44438),o=n(30618),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},l=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)if(t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a]))n[r[a]]=e[r[a]]}return n},c=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},d=function(){var e,t;return!(null===(t=null===(e=a().get("letters-list-dividers-disabled"))||void 0===e?void 0:e.isActive)||void 0===t?void 0:t.call(e))},u=function(e){var t,n,r;return null!==(r=null===(n=null===(t=a().get("letters-list-dividers-disabled"))||void 0===t?void 0:t.save)||void 0===n?void 0:n.call(t,{state:!e}))&&void 0!==r?r:Promise.reject()},f=function(e,t){var n=e.flatMap(t),r=0;return n.forEach((function(e){if(e.is(o.U))e.set("idx",r),r+=1})),n},m=function(e){return e},h=function(e){var t=new Date(e);return{year:t.getFullYear(),month:t.getMonth(),day:t.getDate()}},p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(new(Date.bind.apply(Date,c([void 0],e,!1)))).getTime()},g={today:i18n("Сегодня"),yesterday:i18n("Вчера"),week:i18n("Неделя"),aboveWeek:i18n("Старше недели")},v={today:"today",yesterday:"yesterday",week:"week",aboveWeek:"older_week"},_=function(e){var t=e.todayStart,n=e.yesterdayStart,r=e.weekStart,a=function(e){if(e>=t)return"today";if(e>=n)return"yesterday";if(e>=r)return"week";else return"aboveWeek"};return{getTimeOf:a,getNext:function(e,t){var n=a(e),r=a(t);if(n!==r)return r;else return null}}},b=function(e,t,n){var r=t(e(Date.now()));return{todayStart:n(r.year,r.month,r.day),yesterdayStart:n(r.year,r.month,r.day-1),weekStart:n(r.year,r.month,r.day-7)}},E=function(e){return 1e3*e},y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=o.getTimeOf,l=o.getNext,c=e[5],d=i(E(n.get("date"))),u=a[r-1]&&i(E(a[r-1].get("date"))),f=null==u||null!=c&&c?s(d):l(u,d);if(f)return{title:g[f],id:f,meta:{type:"latest",when:v[f]}};else return null},T=function(){return e=s(s({},b(i.bv,h,p)),{processTime:i.bv}),t=e.processTime,n=l(e,["processTime"]),r=_(n),function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=y.apply(void 0,c(c([e],n,!1),[t,r],!1));if(!i)return e;else return[o.Z.createDividerLetter(i.id,i.title,null,i.meta),e]};var e,t,n,r},A=function(e,t){return e.month===t.month&&e.year===t.year},S=[i18n("Январь"),i18n("Февраль"),i18n("Март"),i18n("Апрель"),i18n("Май"),i18n("Июнь"),i18n("Июль"),i18n("Август"),i18n("Сентябрь"),i18n("Октябрь"),i18n("Ноябрь"),i18n("Декабрь")],O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],l=a[r-1],c=l&&o(i(E(l.get("date")))),d=l&&{month:c.month,year:c.year},u=o(i(E(n.get("date")))),f={month:u.month,year:u.year},m=null;if(null!=s&&s||!d||!A(f,d))m="".concat(S[f.month]," ").concat(f.year);if(null!=m)return{id:"".concat(f.month,"_").concat(f.year),title:m,meta:{type:"month",date:u}};else return null},C=function(){return e={processTime:i.bv,dateFromTime:h},t=e.processTime,n=e.dateFromTime,function(e){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var i=O.apply(void 0,c(c([e],r,!1),[t,n],!1));if(!i)return e;else return[o.Z.createDividerLetter(i.id,i.title,null,i.meta),e]};var e,t,n},w=function(){return e=s(s({},b(i.bv,h,p)),{processTime:i.bv,dateFromTime:h}),t=e.weekStart,n=e.processTime,r=e.dateFromTime,a=l(e,["weekStart","processTime","dateFromTime"]),d=_(s({weekStart:t},a)),u=!1,f=!1,function(e){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var s=n(E(e.get("date"))),l=null;if(s>=t)l=y.apply(void 0,c(c([e],a,!1),[n,d,!f],!1)),f=!0;else l=O.apply(void 0,c(c([e],a,!1),[n,r,!u],!1)),u=!0;if(!l)return e;else return[o.Z.createDividerLetter(l.id,l.title,null,l.meta),e]};var e,t,n,r,a,d,u,f},L=function(e){if(!e)return null;var t=e.name,n=e.email;return t?t:n},k=function(e){if(!e)return null;var t=e[Symbol.iterator]().next(),n=t.value,r=t.done;if(!n||r)return null;else return n.toUpperCase()},I=function(e,t,n){if(e.is("flags.metathread"))return e;var r=n[t-1],a=k(L(e.get("correspondents").to[0])),i=r&&!r.is("flags.metathread")&&k(L(r.get("correspondents").to[0]));if(0===t||r.is("flags.metathread")||a!==i)return[o.Z.createDividerLetter(a||"noauthor",a||i18n("Автор не указан"),null,{type:"alpha_to",alpha:a}),e];else return e},R=function(e,t,n){if(e.is("flags.metathread"))return e;var r=n[t-1],a=k(L(e.get("correspondents").from[0])),i=r&&!r.is("flags.metathread")&&k(L(r.get("correspondents").from[0]));if(0===t||r.is("flags.metathread")||a!==i)return[o.Z.createDividerLetter(a||"noauthor",a||i18n("Автор не указан"),null,{type:"alpha_from",alpha:a}),e];else return e},D=function(e,t,n){if(e.is("flags.metathread"))return e;var r=n[t-1],a=k(e.get("subject")),i=r&&k(r.get("subject"));if(0===t||r.is("flags.metathread")||a!==i)return[o.Z.createDividerLetter(a||"nosubject",a||i18n("Без темы"),null,{type:"alpha_subj",alpha:a}),e];else return e}},24013:function(e,t,n){"use strict";function r(e,t,n){var r=[],a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;for(e=e.parentElement;e&&!a.call(e,t);){if(!n)r.push(e);else if(a.call(e,n))r.push(e);e=e.parentElement}return r}function a(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector,r=e.nextElementSibling;if(!t)return r;for(;r;){if(n.call(r,t))return r;r=r.nextElementSibling}}function i(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector,r=e.previousElementSibling;if(!t)return r;for(;r;){if(n.call(r,t))return r;r=r.previousElementSibling}}function o(e,t){e.innerHTML=t;for(var n=e.querySelectorAll("script"),r=0;r<n.length;r++){var a=n[r],i=document.createElement("SCRIPT");if(a.innerText.length)i.appendChild(document.createTextNode(a.innerText));for(var o=0;o<a.attributes.length;o++){var s=a.attributes[o];i.setAttribute(s.name,s.value)}if(a.parentNode)a.parentNode.replaceChild(i,a)}}n.d(t,{Cf:function(){return r},d9:function(){return a},U:function(){return i},oC:function(){return o}})},22385:function(e,t,n){"use strict";n.d(t,{R:function(){return s},Z:function(){return c}});var r=/[&<>"']/g;function a(e,t){return e[t]}var i=/[()"<>']/g,o=a.bind(null,{"(":"%28",")":"%29",'"':"%22","'":"%27","<":"%3C",">":"%3E"});function s(e){return encodeURI(e).replace(i,o)}var l=a.bind(null,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"});function c(e){if("string"!=typeof e)return null;else return e.replace(r,l)}},76864:function(e,t,n){"use strict";n.d(t,{Mx:function(){return o},Kf:function(){return s},iw:function(){return l},iD:function(){return c},fT:function(){return d}});var r=n(21211),a=n(50241),i=n.n(a);function o(e){return r.DISABLE_DELETE_FROM_TRASH&&!!(null==e?void 0:e.isTrashLike())}function s(e){return r.PARENTAL_CONTROL_PRIVATE_FOLDER_IDS.includes(e.id)}function l(e){return!!r.PARENTAL_CONTROL_PRIVATE_FOLDER_IDS.length&&e.some((function(e){return s(e)}))}function c(e){var t=e.type;return{archive:!1,child:!1,children:!0,id:t,name:e.name,only_web:!1,open:!0,parent:"-1",security:!1,system:!0,type:t}}var d=function(e){var t,n,r,a=null===(t=e.get("owner"))||void 0===t?void 0:t.email;return a&&(null===(r=null===(n=i().all.getMailboxByEmail(a))||void 0===n?void 0:n.get("shared_items"))||void 0===r?void 0:r.box)}},47174:function(e,t,n){"use strict";var r=n(28692),a=n(19275),i=n(21211),o=n(43845),s=n(53088),l=n.n(s),c=function(){};t.Z=function(e){var t=e.el,n=e.holder,s=e.timeout,d=void 0===s?50:s;if(!(a.Z.build||t&&n))return console.warn("gSilent function requires target elements as arguments"),c;if(a.Z.build&&(!t||!n))return c;if(!l().pointerevents)return c;var u=!1,f=function(e){if(u!==e)if(u=e,!i.G_SELENT_OFF)t.classList.toggle("g-silent",u)},m=0,h=function(){var e=Date.now()-m;if(e<d&&e>0)setTimeout(h,d-e);else{m=0;var t=u;if(t)r.yc.time("g-silent-latency-off");if(f(!1),t)(0,o.gl)((function(){r.yc.timeEnd("g-silent-latency-off",{score:"latency",dwh:!0})}))}},p=function(){var e=!u;if(e)r.yc.time("g-silent-latency-on");if(f(!0),function(){if(0===m)setTimeout(h,d);m=Date.now()}(),e)(0,o.gl)((function(){r.yc.timeEnd("g-silent-latency-on",{score:"latency",dwh:!0})}))};return n.addEventListener("scroll",p,l().passiveeventlisteners?{passive:!0}:!1),n.addEventListener("resize",p),function(){n.removeEventListener("scroll",p),n.removeEventListener("resize",p)}}},48250:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(93686),a=n(94738),i=n(81690);var o=function(){function e(e){var t=e.breakpoints,n=e.onResize,o=e.element,s=e.pureBreakpoints,l=this;this.handleResize=function(e){var t=l.breakpoints.find((function(t){if(!t.conditions)return!0;else return!!t.conditions(e)}));if("function"==typeof t.props){var n=t.props(e);if(l.pureBreakpoints&&t==l.lastBreakpoint&&(0,r.Z)(n,l.lastProps))return;l.onResize(n),l.lastProps=n}else{if(l.pureBreakpoints&&t==l.lastBreakpoint)return;l.onResize(t.props)}l.lastBreakpoint=t},this.breakpoints=t,this.onResize=n,this.pureBreakpoints=s;var c=new i.P(this.handleResize);this.validateBreakpoints(),this.resizeObserver=new a.Z((function(e){c.requestDebouncedFrame(e[0].contentRect)})),this.resizeObserver.observe(o),this.debouncer=c}return e.prototype.validateBreakpoints=function(){var e=this.breakpoints.filter((function(e){return!e.conditions}));if(0===e.length)throw new Error("No default breakpoint provided!");if(e.length>1)throw new Error("Too many default breakpoints provided, expected 1")},e.prototype.destroy=function(){this.resizeObserver.disconnect(),this.debouncer.destroy()},e}()},98957:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(19275),a=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)if(t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a]))n[r[a]]=e[r[a]]}return n};function i(e){var t,n=e.email,i=e.name,o=a(e,["email","name"]),s=r.Z.get("urls.avatarUrl");if("size"in o){var l=o.size;t="width=".concat(l,"&height=").concat(l)}else{var c=o.width,d=o.height;t="width=".concat(c,"&height=").concat(d)}var u="&email=".concat(encodeURIComponent(n)).concat(i?"&name=".concat(encodeURIComponent(i)):"");return"".concat(s,"/pic?").concat(t).concat(u)}},71603:function(e,t,n){"use strict";n.d(t,{Y:function(){return a},L:function(){return i}});var r=n(21211);function a(e,t,n){if(void 0===e)e=this.get("model");if(void 0===t)t=this.get("search");if(void 0===n)n=this.is("in-thread");if(t||n||!r.GO_TO_ACTION_BUTTOM)return"none";try{var a=e.getGoToActionMeta();if(!a)return"none";else return a.description?"full":"compact"}catch(e){return"none"}}function i(e,t,n,r,i){var o=a(e,n,!1);if("none"===o)return 0;if(!r)return 32;var s="compact"===o?-20:0;if(t||i)return 20+s;else return s}},18053:function(e,t,n){"use strict";n.d(t,{K:function(){return a},Z:function(){return l}});var r,a,i=n(21211),o=n(93286);!function(e){e.Calls="calls",e.CloudDnD="cloud-dnd",e.Default="default",e.Calendar="calendar",e.Todo="todo",e.Notes="notes"}(a||(a={}));var s=((r={})[a.Calls]=["calls.api"],r[a.CloudDnD]=["cloud.openapi.dnd"],r[a.Default]=[],r[a.Calendar]=["calendar.calendars.read","calendar.events.read"],r[a.Todo]=["todo.api"],r[a.Notes]=["notes.write"],r);function l(e){if(void 0===e)e=a.Default;return new Promise((function(t,r){n.e(9318).then(n.t.bind(n,69318,23)).then((function(n){n.init({clientId:i.OAUTH_CLIENT_ID,scopes:s[e]}),n.setOAuthHost(i.OAUTH_HOST),n.auth((function(e){var a=e.status,i=e.access_token;if(a!==n.AUTH_CONNECTED)r(a);t(i)}))})).catch((function(e){r(e)}))})).catch((function(t){return(0,o.ZP)({type:"oauth-err_".concat(e),rlog:"octavius_error_oauth",rlog_message:t}),Promise.reject(t)}))}},16458:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(4872),a=n.n(r),i=n(73173);function o(e,t){if(e){var n=e.filter((function(e){return e.getFolder&&!i.Z.isMetathreadFooter(e)})),r={all:0,unread:0,read:0,flagged:0,noflagged:0,spam:0,nospam:0,noarchive:0,metathread:0,fromTrustedMailer:0};if(n.forEach((function(e){var n=e.getFolder();if(e.get("flags.metathread")){var i=e.get("metathread_data.folder");n=a().get(i),s(r,n),r.metathread++}else if(!t)if(e.is("flags.unread")?r.unread++:r.read++,e.is("flags.flagged")?r.flagged++:r.noflagged++,r.all++,e.is("flags.newsletter")&&e.is("flags.show_definitely_spam")&&e.is("flags.have_unsubscribe_list"))r.fromTrustedMailer++;n.isSpam()?r.spam++:r.nospam++,!n.isArchive()&&r.noarchive++})),t)s(r,t);return r}}function s(e,t){e.unread+=t.get("messages_unread"),e.read+=t.get("messages_total")-t.get("messages_unread"),e.flagged+=t.get("messages_flagged"),e.noflagged+=t.get("messages_total")-t.get("messages_flagged"),e.all+=t.get("messages_total")}},75705:function(e,t,n){"use strict";function r(){return Math.floor(Date.now()/1e3)}n.d(t,{V:function(){return r}})},30698:function(e,t,n){"use strict";var r=n(21528);t.Z=function(e){return Object.keys(r.default.list).filter((function(t){return t.startsWith(e)})).map((function(e){var t=r.default.getAsString(e);if(!r.default.has(e))return"-".concat(e);else return"".concat(e).concat(t?":".concat(t):"")})).join(" ")}},83183:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(21211),a={remove_from_sender_name:r.HIDE_EMOJI_IN_CORRESPONDENT,remove_from_snippet:r.HIDE_EMOJI_IN_SNIPPET,remove_from_subject:r.HIDE_EMOJI_IN_SUBJECT}},44866:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(60033),a=n.n(r),i=n(21211);function o(e){if(i.HEADLESS_COUNTER)try{if(!document.head||!document.body)a().send("headless_counter",{rlog:"octavius_headless_log",rlog_message:{id:e,body:!!document.body,head:!!document.head}})}catch(t){a().send("headless_counter_error",{rlog:"octavius_headless_log",rlog_message:{id:e,error:t}})}}},43845:function(e,t,n){"use strict";n.d(t,{HA:function(){return f},gl:function(){return m},Vn:function(){return h},rz:function(){return p},_j:function(){return g},Fc:function(){return b},PI:function(){return E},pn:function(){return y},gH:function(){return T},qh:function(){return O}});var r=n(60033),a=n.n(r),i=n(52745),o=n(21211),s=n(73513),l=n(25191),c=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=[],f=[],m=function(e){return requestAnimationFrame(e)};function h(e){u.push(e)}function p(e){f.push(e)}function g(e,t){if(void 0===t)t=u;m((function n(){var r=t.shift();if(r)r(e),m(n)}))}var v=new Set,_={js:"script",css:"style"};function b(e){var t,n=e.jsMap,r=e.staticHost,s=e.filter,l=null!==(t=null==n?void 0:n.paths)&&void 0!==t?t:{},c=new Set(Object.values(l).flat());return function(e){var t=e.jsMap;Object.entries(t["assets-".concat(o.WEBPACK_EXP_BUILD_ID)]).flatMap((function(e){var t=e[0];return e[1].map((function(e){return[t,e]}))})).forEach((function(e){var t,n,l,d=e[0],u=e[1];if(Array.isArray(s)&&(s.includes("ALL")||s.includes(d))){var f={};if(!c.has(u)&&!v.has(u)){v.add(u);var m=document.createElement("link"),h=null===(l=u.match(/\.([^.]*)$/))||void 0===l?void 0:l[1];if(h){var p=_[h];if(p)m.as=p,m.rel="preload",m.crossOrigin="anonymous",m.href="".concat(r).concat(u),m.addEventListener("error",(function(e){var t;null===(t=window.coreLogger)||void 0===t||t.dispatchError(e,{bundleName:d,path:u},{category:"nxt-preload",tag:i.Tag.Known})})),m.addEventListener("load",(function(){a().send("next-preload",{i:f,skipdwh:!0})})),document.head.appendChild(m),f["chgr_".concat(d)]=1,f["bndl_".concat(function(e){var t,n,r,a=null===(t=e.match(/\/([^/.]+)\./))||void 0===t?void 0:t[1];if(!a)return e.slice(-8);else return null!==(r=null===(n=a.match(/^(.+)-/))||void 0===n?void 0:n[1])&&void 0!==r?r:a.slice(0,8)}(u))]=1,f["exp_".concat(o.WEBPACK_EXP_BUILD_ID)]=1,a().send("app-bdl-preload",{i:f});else a().send("next-preload-notype",{i:(n={},n["b_".concat(u.slice(0,8))]=1,n["ext_".concat(h)]=1,n),skipdwh:!0})}else a().send("next-preload-noext",{i:(t={},t["b_".concat(u.slice(8))]=1,t),skipdwh:!0})}}}))}}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];g((0,l.p)(),f),s.$.apply(void 0,e)}function y(e){var t=null;return function(){if(null===t)t=e();return t}}function T(e,t){var n=this;if(void 0===t)t={};var r=null;return function(){return c(n,void 0,void 0,(function(){return d(this,(function(n){switch(n.label){case 0:return[4,t.holdUntil];case 1:if(n.sent(),null===r)r=e();return[2,r]}}))}))}}var A=new WeakMap,S=new WeakMap;function O(e,t){if(A.set(e,t),!S.has(e))S.set(e,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return A.get(e).apply(void 0,t)}));return S.get(e)}},14077:function(e,t,n){"use strict";n.d(t,{fS:function(){return a},sD:function(){return i},x9:function(){return o},NL:function(){return s},JM:function(){return l},F9:function(){return c},gA:function(){return d}});var r=n(21211);function a(e,t,n){var r=n.search?"#search-letter":"#read-letter",a=n.router[r],i=function(e,t,n){var r=n.threadsEnabled,a=n.isSearch,i=e.meta("thread_id")||e.get("thread_id")||e.id,o=null;if(a&&!r&&!e.meta("thread_id"))o=e.get("folder"),i="0:".concat(e.id,":").concat(o||"0");return{threadId:i,letterId:e.id,folderId:o||t.id}}(e,t,{threadsEnabled:n.threads,isSearch:n.search}),o=i.threadId,s=i.letterId,l=i.folderId;return a.getUrl({letter:o,folder:l,id:s},"inherit")}function i(e,t){var n;if(!e||"function"!=typeof e.getFolder||"function"!=typeof(null===(n=e.getFolder())||void 0===n?void 0:n.isParentalControl))return!1;else return r.ENABLE_LIST_LETTER_ACTION_BUTTONS&&!t&&e.getFolder().isParentalControl()}function o(e){return r.SHOW_OFFICIAL_ON_LETTER_LIST&&!r.DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST&&e.is("flags.official")}function s(e){return r.SHOW_OFFICIAL_ON_LETTER_LIST&&(e.is("flags.official")||e.is("flags.official_newsletter"))}function l(e){return r.SHOW_RELIABLE_ON_LETTER_LIST&&!r.DISABLE_GREEN_RELIABLE_ON_LETTER_LIST&&e.is("flags.bimi_important_msg")}function c(e){return r.SHOW_RELIABLE_ON_LETTER_LIST&&(e.is("flags.bimi_important_msg")||e.is("flags.bimi_msg"))}function d(e){if(!e)return!1;else return e.get("correspondents.to.length")+e.get("correspondents.cc.length")>1}},54901:function(e,t,n){"use strict";n.d(t,{hM:function(){return d},DC:function(){return u},dR:function(){return f},Oi:function(){return m},Zh:function(){return h},Sv:function(){return p},_B:function(){return g}});var r=n(21528),a=n(96323),i=n(12386),o=n(36889),s=n.n(o),l=n(66423),c=n.n(l);function d(e){return c().post("user/edit",{common_purpose_flags:{metathreads_on:e}}).then((function(){r.default.import({metathreads:{state:e}})}))}function u(e){return(0,a.M)((0,i.u)(e))}function f(){return i18n("Отметить всё прочитанным")}function m(e,t){if(void 0===t)t=!1;var n=u(e);return i18n("Удалить")+(t?"":" ".concat(n))}function h(e){var t;return e.isInMetathread&&e.isInMetathread()?e.getContainingMetathread().getFolder():null===(t=e.getFolder)||void 0===t?void 0:t.call(e)}function p(e){switch(e){case s().METATHREADS_STATES.ON:return{isOn:!0,isHiddenOnLetterList:!1};case s().METATHREADS_STATES.HIDDEN:return{isOn:!0,isHiddenOnLetterList:!0};case s().METATHREADS_STATES.OFF:default:return{isOn:!1,isHiddenOnLetterList:!1}}}function g(e){switch(e){case s().METATHREADS_STATES.ON:case s().METATHREADS_STATES.HIDDEN:return!0;case s().METATHREADS_STATES.OFF:default:return!1}}},73513:function(e,t,n){"use strict";n.d(t,{$:function(){return c},i:function(){return u}});var r=n(28692),a=n(21211),i=n(25191),o=new Set,s=!1,l={readletter_3pane:["letters","readletter"],letters_3pane:["letters"],letters_2pane:["letters"],readletter_2pane:["readletter"]};function c(e){var t=(0,i.p)().route.id.replace(/[#-]/g,"");if("readletter"===t)r.yc.timeEnd("letter-open",{appendix:a.USE_3PANE?"3pane":"2pane",score:"route"});if(!(s||"letters"!==t&&"readletter"!==t))!function(e,t,n){o.add(t);for(var a="".concat(n,"_").concat(e),i=0,c=l[a];i<c.length;i++){var d=c[i];if(!o.has(d))return}r.yc.timeEnd("app-full-mount",{appendix:a,score:"app:ready",dwh:{}}),s=!0}(a.USE_3PANE?"3pane":"2pane",e,t)}var d=null;function u(e){if(e&&d!==e)d=e,r.yc.timeEnd("letter-update",{appendix:a.USE_3PANE?"3pane":"2pane",score:"route"})}},90065:function(e,t,n){"use strict";var r=n(50678);t.Z=function(e,t){if(void 0===t)t=!1;return Object.keys(e).map((function(n){if(t)return(0,r.Z)(n)+"="+(0,r.Z)(e[n]);else return n+"="+e[n]})).join("&")}},72727:function(e,t,n){"use strict";n.r(t),n.d(t,{OpenerTarget:function(){return r},default:function(){return i}});var r,a=n(21211);function i(e,t){if(void 0===t)t=r.blank;if(a.USE_SINGLE_TAB&&(null===a.USE_SINGLE_TAB_WHITELIST_REGEXP||void 0===a.USE_SINGLE_TAB_WHITELIST_REGEXP?void 0:a.USE_SINGLE_TAB_WHITELIST_REGEXP.test(e))&&!(null===a.USE_SINGLE_TAB_BLACKLIST_REGEXP||void 0===a.USE_SINGLE_TAB_BLACKLIST_REGEXP?void 0:a.USE_SINGLE_TAB_BLACKLIST_REGEXP.test(e)))t=r.self;for(var n=new URL(e,window.location.origin),i=0,o=Object.entries(a.URL_EXTRA_PARAMS);i<o.length;i++){var s=o[i],l=s[0],c=s[1];n.searchParams.append(l,null==c?void 0:c.toString())}if(e=n.toString(),a.IS_CHROME)window.open(e,t,"toolbar=yes, location=yes, status=yes, menubar=yes, scrollbars=yes, noopener=true");else{var d=window.open(e,t);if(d)d.focus();if(d)d.opener=null}}!function(e){e.blank="_blank",e.self="_self",e.parent="_parent",e.top="_top"}(r||(r={}))},33506:function(e,t,n){"use strict";var r;n.d(t,{bG:function(){return r},oK:function(){return a},S0:function(){return i}}),function(e){e.awaiting="awaiting",e.success="success",e.error="error"}(r||(r={}));var a={CHANGE_PAYMENT_STATUS:"CHANGE_PAYMENT_STATUS",PAYMENT_IN_PROGRESS:"PAYMENT_IN_PROGRESS",FINISH_GROUP_FINE_PAY:"FINISH_GROUP_FINE_PAY"},i={MONETA:"moneta"}},16244:function(e,t,n){"use strict";n.d(t,{Vm:function(){return f},JW:function(){return m}});var r=n(28692),a=n(43845),i={},o=0,s=0,l=null,c=null,d={"Ctrl+A":"sel-all",Del:"del",V:"move",E:"arch",".":"more",N:"compose"},u=[{name:"folder",test:function(e,t){return t.navFolderId}},{name:"list-item",test:function(e,t){return e.is("#letters")&&t.letterId}},{name:"list-item-sel",test:function(e,t){return e.is("#letters")&&t.letterCheckbox}},{name:"search",test:function(e,t){return t.searchInput}}],f=function(e){e.on("before-route",(function(){o=performance.now()})),e.on("route-end",(function(){(0,a.gl)((function(){var t,n=performance.now(),a=(null===(t=e.route)||void 0===t?void 0:t.id.replace(/[^\w_-]/g,""))||"unk";if(1)r.yc.add("app-route-change",o,n,{score:"route",appendix:a,dwh:!0})}))})),document.addEventListener("mousedown",(function(e){var t=e.target;s=performance.now(),c=null,l=t}),!0),document.addEventListener("click",(function(){(0,a.gl)((function(){var t,n=function(){if(!c){c={};try{do{var e=l.dataset||i;c.navFolderId=c.navFolderId||e.folderLinkId,c.letterId=c.letterId||e.uidlId&&e.id,c.letterSelect=c.letterSelect||"checkbox"===l.type,c.ctrl=c.ctrl||d[e.titleShortcut],l=l.parentNode}while(l)}catch(e){}l=null}return c}(),a=null===(t=u.find((function(t){var r=t.test;return!r||r(e.route,n)})))||void 0===t?void 0:t.name,o=n.ctrl,f=performance.now();if(r.yc.add("app-click-latency",s,f,{score:"latency",dwh:!0}),a)r.yc.add("app-click-latency",s,f,{score:"latency",appendix:a});if(o)r.yc.add("app-click-latency",s,f,{score:"latency",appendix:"".concat(a,"-").concat(o)})}))}))},m=function(){return o}},29404:function(e,t,n){"use strict";n.d(t,{aS:function(){return i},tA:function(){return o},u:function(){return s},fo:function(){return l}});var r=n(52532),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function i(e,t){var n=!e.get("model").is("flags.".concat(t));return"toggle_".concat(t,"_").concat(n)}function o(e){var t=e.get("model");return{id:t&&t.id,model:t}}function s(e){var t=e.get("letter");return{id:e.get("letter-id")||t&&t.id,model:t}}function l(e){var t,n=e.get("model");if(n){var i=e.get("router");return a({id:n.id,model:n,show_relevant:+(0,r.E)(i,null===(t=n.getFolder)||void 0===t?void 0:t.call(n),n.get("flags.newsletter"),n.get("transaction_category")),priority:+n.get("flags.is_relevant"),folder_id:n.get("folder")},n.get("actual_probability")&&{ml_model:n.get("actual_probability").split(":")[0]})}}},96387:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(25709),o=n.n(i);t.Z={getSlot:function(e,t,n){if(void 0===t)t="themes";if(void 0===n)n=0;var r=e?"/widgets/".concat(t,"/").concat(e,"/"):"/widgets/".concat(t,"/");if(n&&!isNaN(Number(n)))r+="?preview="+Number(n);return o()(r,null,{force:!0}).then((function(e){return e.body})).catch((function(r){throw a().send("get_slot_err_".concat(e),{rlog:"get_slot",rlog_message:{error:r,type:t,id:e,preview:n}}),r}))}}},70325:function(e,t,n){"use strict";var r=n(18053),a=n(25709),i=n.n(a),o=n(93286),s=n(57045),l=n(96911),c=n.n(l),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)if(t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a]))n[r[a]]=e[r[a]]}return n},f=function(e){return"Bearer ".concat(e)},m=function(e){return 401===e.status},h=!1;function p(e,t){var n=c()();if(e["X-Request-Id"]=n,t)e[t]=n}t.Z=function(e,t,n){if(void 0===n)n={};var a=n.authorizationFormatter,l=void 0===a?f:a,c=n.isAuthError,g=void 0===c?m:c,v=n.headers,_=void 0===v?{}:v,b=n.customRequestIdHeader,E=n.oauthFeature,y=n.canceller,T=u(n,["authorizationFormatter","isAuthError","headers","customRequestIdHeader","oauthFeature","canceller"]),A=s.ZP.get("oauth-token");return(h?Promise.resolve(A):(0,r.Z)(E).then((function(e){return s.ZP.set("oauth-token",e),h=!0,e}))).then((function(n){var r=d(d({},_),{Authorization:l(n)});p(r,b);var a=i()(e,t,d(d({},T),{headers:r,withoutRequestId:!0}));return null==y||y.set(a),a})).catch((function(n){if(g(n)&&h)return(0,o.ZP)({type:"oauth-request_retry",intervals:[[E]]}),(0,r.Z)(E).then((function(n){s.ZP.set("oauth-token",n);var r=d(d({},_),{Authorization:l(n)});return p(r,b),i()(e,t,d(d({},T),{headers:r,withoutRequestId:!0}))}));var a=n.error,c=n.responseText,u=n.status;if("parsererror"===a&&""===c&&200===u)return Promise.resolve(n.data);else return Promise.reject(n)}))}},31086:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(94738),a=n(83260),i=n.n(a);function o(e){if(1===e.length)return e[0];for(var t={},n=0,r=e;n<r.length;n++)for(var a=r[n][0],i=0,o=Object.keys(a);i<o.length;i++){var s=o[i];t[s]=a[s]}return[t]}function s(){var e,t,n={};return{set:function(t,n,r){if(void 0===n)n=150;if(void 0===r)r=!1;if(!e)e=r?i().debounce(t,n,null):function(e,t,n){var r=!1,a=!1,i=[];return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(r)a=!0,i.push(o);else e.apply(null,o),r=!0,setTimeout((function(){if(r=!1,a)e.apply(null,n(i)),a=!1,i=[]}),t)}}(t,n,o),window.addEventListener("resize",e)},observe:function(a,i){if(!e)throw new Error("Please use .set() first to initialize Resizer.");if(!t)window.removeEventListener("resize",e),t=new r.Z((function(t){for(var n={},r=0,a=t;r<a.length;r++){var i=a[r],o=i.target.__resizerKey__;if(void 0!==o)n[o]=i.contentRect}e(n)}));if(n[i])t.unobserve(n[i]);t.observe(a),n[i]=a,a.__resizerKey__=i},unobserve:function(r){var a=r.__resizerKey__;if(t){if(n[a])t.unobserve(r),n[a]=void 0;if(0===Object.keys(a).length)t.disconnect(),t=void 0,n={},window.addEventListener("resize",e)}},unbind:function(){if(e)window.removeEventListener("resize",e),e=null;if(t)t.disconnect(),t=void 0,n={}}}}},27642:function(e,t){"use strict";function n(){return Math.floor(4294967296*Math.random())}var r=function(){function e(e){var t=void 0===e?[n(),n(),n(),n()]:e,r=t[0],a=t[1],i=t[2],o=t[3];this.a=r,this.b=a,this.c=i,this.d=o}return e.randomSeed=function(){return[n(),n(),n(),n()]},e.prototype.random=function(){var e=this.b<<9,t=5*this.a;return t=9*(t<<7|t>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=e,this.d=this.d<<11|this.d>>>21,(t>>>0)/4294967296},e}();t.Z=r},4727:function(e,t,n){"use strict";n.d(t,{Rc:function(){return d}});var r=n(60033),a=n.n(r),i="".concat("smime",".").concat("p7m"),o="".concat("smime",".").concat("p7s"),s="".concat("smime",".").concat("p7z"),l="".concat("smime",".").concat("p7c"),c=[i,o,s,l];function d(e){var t=e.map((function(e){var t=e.get("name"),n=e.get("content_type"),r="application/pkcs7-mime"===n||"application/pkcs7-signature"===n,a="wrng",c=!1;switch(!0){case t.endsWith(".p7m"):a="p7m",c=t===i&&"application/pkcs7-mime"===n;break;case t.endsWith(".p7s"):a="p7s",c=t===o&&"application/pkcs7-signature"===n;break;case t.endsWith(".p7z"):a="p7z",c=t===s&&"application/pkcs7-mime"===n;break;case t.endsWith(".p7c"):a="p7c",c=t===l&&"application/pkcs7-mime"===n}if(r||"wrng"!==a)return{contentType:n,filename:t,extension:a,specCompliant:c};else return null})).filter((function(e){return!!e}));if(0!==t.length)if(!(t.length>1)){var n=t[0],r=[];if(n.specCompliant)r.push("spec");else r.push("nospec");if(r.push(n.extension),c.includes(n.filename))r.push(n.filename.replace(".",""));switch(n.contentType){case"application/pkcs7-mime":r.push("pkcs7mime_".concat(n.extension));break;case"application/pkcs7-signature":r.push("pkcs7sig_".concat(n.extension))}a().send("smime",{i:r})}else a().send("smime",{i:["many"]})}},21091:function(e,t,n){"use strict";function r(e){if("number"==typeof e&&e>0){var t={count:e};return i18n.plural(e,[i18n("Вы успешно отписались от {count} рассыльщиков",t),i18n("Вы успешно отписались от {count} рассыльщика",t),i18n("Вы успешно отписались от {count} рассыльщиков",t)])}return i18n("Вы успешно отписались")}n.d(t,{I:function(){return r}})},79929:function(e,t,n){"use strict";n.r(t),n.d(t,{ACTIONS_ARCHIVE:function(){return a.a},ACTIONS_ARCHIVE_S:function(){return o.a},ACTIONS_CALL:function(){return l.a},ACTIONS_CLOSE_BIG:function(){return d.a},ACTIONS_CLOSE:function(){return f.a},ACTIONS_CLOUD_UPLOAD:function(){return h.a},ACTIONS_COMPOSE:function(){return g.a},ACTIONS_DELETE:function(){return _.a},ACTIONS_DELETE_S:function(){return E.a},ACTIONS_DISLIKE:function(){return T.a},ACTIONS_DISLIKE_S:function(){return S.a},ACTIONS_DOWNLOAD:function(){return C.a},ACTIONS_FAVORITE_S:function(){return L.a},ACTIONS_FAVORITE_ON:function(){return I.a},ACTIONS_FAVORITE_OFF:function(){return D.a},ACTIONS_FORWARD:function(){return P.a},ACTIONS_FORWARD_SMALL:function(){return x.a},ACTIONS_LIKE:function(){return U.a},ACTIONS_PIN:function(){return B.a},ACTIONS_FORWARD_REPLY_SMALL:function(){return G.a},ACTIONS_REPLY:function(){return j.a},ACTIONS_REPLY_S:function(){return V.a},ACTIONS_REPLY_ALL:function(){return Y.a},ACTIONS_REPLY_SMALL:function(){return X.a},ACTIONS_SELECT_ALL:function(){return J.a},ACTIONS_SORT:function(){return ee.a},ACTIONS_EDIT:function(){return ne.a},ACTIONS_ADD:function(){return ae.a},ACTIONS_ADD_BIG:function(){return oe.a},ACTIONS_FILTER:function(){return le.a},ACTION_FOLDER_MOVE:function(){return de.a},ACTIONS_COPY:function(){return fe.a},ACTIONS_PRINT:function(){return he.a},ACTIONS_WINDOW_MINIMIZE:function(){return ge.a},ACTIONS_FAVORITE_ALT:function(){return _e.a},ACTIONS_RATING:function(){return Ee.a},ACTIONS_PLAY:function(){return Te.a},ACTIONS_POSTPONE_ALT:function(){return Se.a},ACTIONS_MOON:function(){return Ce.a},ACTIONS_SUN:function(){return Le.a},ACTIONS_DOWNLOAD_ALT:function(){return Ie.a},ACTIONS_TAB_ADD:function(){return De.a},CATEGORIES_ACCESS:function(){return Pe.a},CATEGORIES_ACCESS_S:function(){return xe.a},CATEGORIES_CLOUD:function(){return Ue.a},CATEGORIES_CURRENCY_ROUBLE:function(){return Be.a},CATEGORIES_CURRENCY_ROUBLE_S:function(){return Ge.a},CATEGORIES_DRAFTS_S:function(){return je.a},CATEGORIES_DRAFTS:function(){return Ve.a},CATEGORIES_FLIGHT:function(){return Ye.a},CATEGORIES_FLIGHT_S:function(){return Xe.a},CATEGORIES_GOVERNMENT:function(){return Je.a},CATEGORIES_SCHOOL:function(){return et.a},CATEGORIES_SCHOOL_S:function(){return nt.a},CATEGORIES_GAMES:function(){return at.a},CATEGORIES_GAMES_S:function(){return ot.a},CATEGORIES_GOVERNMENT_S:function(){return lt.a},CATEGORIES_RECEIPTS:function(){return dt.a},CATEGORIES_RECEIPTS_S:function(){return ft.a},CATEGORIES_MAIL:function(){return ht.a},CATEGORIES_MAIL_S:function(){return gt.a},CATEGORIES_MAIL_ALT:function(){return _t.a},CATEGORIES_MAILINGS:function(){return Et.a},CATEGORIES_MAILINGS_S:function(){return Tt.a},CATEGORIES_TICKET:function(){return St.a},CATEGORIES_TICKET_S:function(){return Ct.a},CATEGORIES_FEES:function(){return Je.a},CATEGORIES_DISCOUNTS:function(){return Lt.a},CATEGORIES_CAMERA:function(){return It.a},CATEGORIES_SUBSCRIPTIONS:function(){return Dt.a},CATEGORIES_SUBSCRIPTIONS_S:function(){return Pt.a},CATEGORIES_SCAN:function(){return xt.a},CATEGORIES_SCAN_S:function(){return Ut.a},CATEGORIES_ADDRESSBOOK_WEBVIEW:function(){return Bt.a},CATEGORIES_DOCUMENT:function(){return Gt.a},CATEGORIES_WEATHER_OUTLINE:function(){return jt.a},CATEGORIES_NOTES_OUTLINE:function(){return Vt.a},NAVIGATION_ARCHIVE:function(){return Yt.a},NAVIGATION_APPS:function(){return Xt.a},NAVIGATION_ARROW_NEXT:function(){return Jt.a},NAVIGATION_ARROW_PREVIOUS:function(){return en.a},NAVIGATION_ARROW_SWIPE:function(){return nn.a},NAVIGATION_ARROW_LIST_NEXT:function(){return an.a},NAVIGATION_ARROW_LIST_PREVIOUS:function(){return sn.a},NAVIGATION_ARROW_UP:function(){return cn.a},NAVIGATION_ARROW_DOWN:function(){return un.a},NAVIGATION_CALENDAR_MONTH:function(){return mn.a},NAVIGATION_CART:function(){return pn.a},NAVIGATION_CART_S:function(){return vn.a},NAVIGATION_DROP_DOWN:function(){return bn.a},NAVIGATION_VIEW_PINTEREST:function(){return yn.a},NAVIGATION_DROP_DOWN_SMALL:function(){return An.a},NAVIGATION_DROP_DOWN_BIG:function(){return On.a},NAVIGATION_DROP_PREVIOUS:function(){return wn.a},NAVIGATION_DROP_PREVIOUS_BIG:function(){return kn.a},NAVIGATION_DROP_UP:function(){return Rn.a},NAVIGATION_DROP_UP_SMALL:function(){return Mn.a},NAVIGATION_DROP_UP_BIG:function(){return Nn.a},NAVIGATION_DROP_NEXT:function(){return Fn.a},NAVIGATION_DROP_NEXT_BIG:function(){return Hn.a},NAVIGATION_FOLDER:function(){return Zn.a},NAVIGATION_FOLDER_S:function(){return qn.a},NAVIGATION_FOLDER_HIDDEN:function(){return Wn.a},NAVIGATION_MENU:function(){return zn.a},NAVIGATION_MENU_S:function(){return Kn.a},NAVIGATION_MORE:function(){return Qn.a},NAVIGATION_MORE_VERTICAL:function(){return $n.a},NAVIGATION_NOTIFICATION:function(){return tr.a},NAVIGATION_SEARCH:function(){return rr.a},NAVIGATION_SEARCH_S:function(){return ir.a},NAVIGATION_SETTINGS:function(){return sr.a},NAVIGATION_SETTINGS_S:function(){return cr.a},NAVIGATION_TIP_ROUND:function(){return ur.a},NAVIGATION_ZOOM_IN_ALT:function(){return mr.a},NAVIGATION_ZOOM_OUT_ALT:function(){return pr.a},NAVIGATION_ZOOM_OVERLAY:function(){return vr.a},NAVIGATION_ZOOM_OUT_OVERLAY:function(){return br.a},NAVIGATION_USERS:function(){return yr.a},NAVIGATION_USERS_S:function(){return Ar.a},NAVIGATION_USER_S:function(){return Or.a},NAVIGATION_ADD_USER:function(){return wr.a},NAVIGATION_DRAG_INDICATOR:function(){return kr.a},NAVIGATION_TIP:function(){return Rr.a},NAVIGATION_TIP_S:function(){return Mr.a},NAVIGATION_ARCHIVE_S:function(){return o.a},NAVIGATION_ARROW_LIST_NEXT_S:function(){return Nr.a},NAVIGATION_ARROW_NEXT_S:function(){return Fr.a},NAVIGATION_MAP_PIN_OUTLINE:function(){return Hr.a},STATUS_ATTACH:function(){return Zr.a},STATUS_ATTACH_S:function(){return qr.a},STATUS_BLOCK:function(){return Wr.a},STATUS_BREAKING:function(){return zr.a},STATUS_DONE:function(){return Kr.a},STATUS_DONE_BIG:function(){return Qr.a},STATUS_DONE_ROUND:function(){return $r.a},STATUS_DONE_OUTLINE:function(){return ta.a},STATUS_ERROR:function(){return ra.a},STATUS_LINK:function(){return ia.a},STATUS_LOCK_OFF:function(){return sa.a},STATUS_LOCK_OFF_SMALL:function(){return ca.a},STATUS_LOCK_ON:function(){return ua.a},STATUS_LOCK_ON_SMALL:function(){return ma.a},MOBILE:function(){return pa.a},STATUS_TIME:function(){return va.a},STATUS_TIME_S:function(){return ba.a},STATUS_UNREAD:function(){return ya.a},STATUS_WARNING_ROUND:function(){return Aa.a},STATUS_WARNING_TRIANGLE:function(){return Oa.a},STATUS_READ:function(){return wa.a},LAPTOP:function(){return ka.a},STATUS_TAG:function(){return Ra.a},STATUS_MENTION:function(){return Ma.a},WYSIWYG_MAIL_READ:function(){return Na.a},WYSIWYG_TRANSLATE:function(){return Fa.a},WYSIWYG_ARROW:function(){return Ha.a},ATTACH_ARCHIVE:function(){return Za.a},ATTACH_ARCHIVE_S:function(){return qa.a},ATTACH_ANDROID:function(){return Wa.a},ATTACH_AUDIO:function(){return za.a},ATTACH_CALENDAR:function(){return Ka.a},ATTACH_CHART:function(){return Qa.a},ATTACH_DOC:function(){return $a.a},ATTACH_EBOOK:function(){return ti.a},ATTACH_EXE:function(){return ri.a},ATTACH_VIRUS:function(){return ii.a},ATTACH_HTML:function(){return si.a},ATTACH_JSON:function(){return ci.a},ATTACH_MAIL:function(){return ui.a},ATTACH_MARKDOWN:function(){return mi.a},ATTACH_PICTURE:function(){return pi.a},ATTACH_PLAYLIST:function(){return vi.a},ATTACH_PRESENTATION:function(){return bi.a},ATTACH_PDF:function(){return yi.a},ATTACH_PSD:function(){return Ai.a},ATTACH_SKETCH:function(){return Oi.a},ATTACH_SOURCE:function(){return wi.a},ATTACH_SPREADSHEET:function(){return ki.a},ATTACH_TEXT:function(){return Ri.a},ATTACH_UNKNOWN:function(){return Mi.a},ATTACH_VCARD:function(){return Ni.a},ATTACH_VIDEO:function(){return Fi.a},ATTACH_WEBFEED:function(){return Hi.a},LOGOTYPES_IDEA:function(){return Zi.a},CATEGORIES_SELF_MAIL:function(){return qi.a},CATEGORIES_SELF_MAIL_S:function(){return Wi.a},CATEGORIES_ADDRESSBOOK:function(){return zi.a},SOCIAL_VK:function(){return Ki.a},MAIL_20_STATUS_LOCK_OFF_SMALL:function(){return Qi.a},MAIL_20_STATUS_LOCK_ON_SMALL:function(){return $i.a},MAIL_20_ACTIONS_FORWARD_REPLY_SMALL:function(){return to.a},MAIL_20_ACTIONS_FORWARD_SMALL:function(){return ro.a},MAIL_20_ACTIONS_REPLY_SMALL:function(){return io.a},COLOR_TAG:function(){return so.a},THUMB_ANDROID_PACKAGE:function(){return co.a},THUMB_ARCHIVE:function(){return fo.a},THUMB_AUDIO:function(){return ho.a},THUMB_CALEDAR:function(){return go.a},THUMB_CARD:function(){return _o.a},THUMB_CHART:function(){return Eo.a},THUMB_DOCUMENT:function(){return To.a},THUMB_EBOOK:function(){return So.a},THUMB_EMAIL:function(){return Co.a},THUMB_EXCEL_ONLINE:function(){return Lo.a},THUMB_EXE:function(){return Io.a},THUMB_FOLDER:function(){return Do.a},THUMB_FOLDER_CAMERA:function(){return Po.a},THUMB_FOLDER_SHARED:function(){return xo.a},THUMB_FOLDER_VIRUS:function(){return Uo.a},THUMB_HTML:function(){return Bo.a},THUMB_JSON:function(){return Go.a},THUMB_MARKDOWN:function(){return jo.a},THUMB_PDF:function(){return Vo.a},THUMB_PHOTOSHOP:function(){return Yo.a},THUMB_PICTURE:function(){return Xo.a},THUMB_PLAIN_TEXT:function(){return Jo.a},THUMB_PLAYLIST:function(){return es.a},THUMB_POWERPOINT_ONLINE:function(){return ns.a},THUMB_PRESENTATION:function(){return as.a},THUMB_SOURCE:function(){return os.a},THUMB_SPREADSHEET:function(){return ls.a},THUMB_UNKNOWN:function(){return ds.a},THUMB_VIDEO:function(){return fs.a},THUMB_VIRUS:function(){return hs.a},THUMB_WEB_FEED:function(){return gs.a},THUMB_WORD_ONLINE:function(){return _s.a},STATUS_RELIABLE_SENDER_DARK:function(){return Es.a},STATUS_RELIABLE_SENDER_LIGHT:function(){return Ts.a},STATUS_OFFICIAL_SENDER_DARK:function(){return Ss.a},STATUS_OFFICIAL_SENDER_LIGHT:function(){return Cs.a},CHECK_SHIELD:function(){return Ls.a},KASPERSKY_LOGO_ENG:function(){return Is.a},KASPERSKY_LOGO_RUS:function(){return Ds.a},KASPERSKY_LOGO_ALTER_ENG:function(){return Ps.a},KASPERSKY_LOGO_ALTER_RUS:function(){return xs.a},STATIC_PROMT:function(){return Us.a},STATIC_PROMT_WITH_LOGO:function(){return Bs.a},EMPTY_FOLDER_PLACEHOLDER:function(){return Gs.a},TRASH_PLACEHOLDER:function(){return js.a},SPAM_PLACEHOLDER:function(){return Vs.a},LOCK_PLACEHOLDER:function(){return Ys.a},NO_SEARCH_PLACEHOLDER:function(){return Xs.a},NO_TEMPLATES_PLACEHOLDER:function(){return Js.a},NO_SELECT_PLACEHOLDER:function(){return el.a},NO_LETTER_PLACEHOLDER:function(){return nl.a},COLOR_TAG_SUGGEST_LIGHT:function(){return al.a},COLOR_TAG_SUGGEST_DARK:function(){return ol.a},WIDGET_HEADER_ICON:function(){return ll.a},WIDGET_NOTIFICATION_ICON:function(){return dl.a},WIDGET_TODO_ICON:function(){return fl.a},WIDGET_NOTES_ICON:function(){return hl.a},UNION_CHEVRON_DOWN_OUTLINE_28:function(){return gl.a},UNION_ADD_24:function(){return _l.a},UNION_ADD_20:function(){return El.a},UNION_USER_OUTLINE_20:function(){return Tl.a},UNION_LOCK_OUTLINE_20:function(){return Sl.a},UNION_DOOR_ARROW_RIGHT_OUTLINE_20:function(){return Cl.a},UNION_MESSAGE_OUTLINE_20:function(){return Ll.a},UNION_HORSE_TOY_OUTLINE_20:function(){return Il.a},UNION_USER_SQUARE_OUTLINE_20:function(){return Dl.a},UNION_ARROW_UTURN_LEFT_OUTLINE_20:function(){return Pl.a},UNION_ADVERTISING_OUTLINE_20:function(){return xl.a},UNION_ARROW_RIGHT_OUTLINE_20:function(){return Ul.a},UNION_DROPDOWN_16:function(){return Bl.a},UNION_FAVORITE_OUTLINE_20:function(){return Gl.a},UNION_FOLDER_OUTLINE_20:function(){return jl.a},UNION_ADD_OUTLINE_28:function(){return Vl.a},UNION_GEAR_OUTLINE_20:function(){return Yl.a},UNION_REMOVE_CIRCLE_OUTLINE_20:function(){return Xl.a},PICTURE_IN_PICTURE_16X9_OUTLINE_24:function(){return Jl.a}});var r=n(90316),a=n.n(r),i=n(64412),o=n.n(i),s=n(27774),l=n.n(s),c=n(84543),d=n.n(c),u=n(44788),f=n.n(u),m=n(47030),h=n.n(m),p=n(19820),g=n.n(p),v=n(20905),_=n.n(v),b=n(65519),E=n.n(b),y=n(83569),T=n.n(y),A=n(29946),S=n.n(A),O=n(27723),C=n.n(O),w=n(17673),L=n.n(w),k=n(30916),I=n.n(k),R=n(20427),D=n.n(R),M=n(5712),P=n.n(M),N=n(58394),x=n.n(N),F=n(99687),U=n.n(F),H=n(56824),B=n.n(H),Z=n(97305),G=n.n(Z),q=n(81446),j=n.n(q),W=n(36287),V=n.n(W),z=n(56394),Y=n.n(z),K=n(71167),X=n.n(K),Q=n(8306),J=n.n(Q),$=n(32288),ee=n.n($),te=n(18285),ne=n.n(te),re=n(29675),ae=n.n(re),ie=n(57155),oe=n.n(ie),se=n(49336),le=n.n(se),ce=n(13052),de=n.n(ce),ue=n(79709),fe=n.n(ue),me=n(42034),he=n.n(me),pe=n(63757),ge=n.n(pe),ve=n(17468),_e=n.n(ve),be=n(7862),Ee=n.n(be),ye=n(21933),Te=n.n(ye),Ae=n(77223),Se=n.n(Ae),Oe=n(78547),Ce=n.n(Oe),we=n(28048),Le=n.n(we),ke=n(78210),Ie=n.n(ke),Re=n(63519),De=n.n(Re),Me=n(33949),Pe=n.n(Me),Ne=n(44897),xe=n.n(Ne),Fe=n(37967),Ue=n.n(Fe),He=n(92661),Be=n.n(He),Ze=n(60209),Ge=n.n(Ze),qe=n(63627),je=n.n(qe),We=n(31428),Ve=n.n(We),ze=n(42727),Ye=n.n(ze),Ke=n(41613),Xe=n.n(Ke),Qe=n(18654),Je=n.n(Qe),$e=n(17118),et=n.n($e),tt=n(95031),nt=n.n(tt),rt=n(46938),at=n.n(rt),it=n(70377),ot=n.n(it),st=n(7178),lt=n.n(st),ct=n(39092),dt=n.n(ct),ut=n(57227),ft=n.n(ut),mt=n(1706),ht=n.n(mt),pt=n(60057),gt=n.n(pt),vt=n(59109),_t=n.n(vt),bt=n(41552),Et=n.n(bt),yt=n(41563),Tt=n.n(yt),At=n(29185),St=n.n(At),Ot=n(41129),Ct=n.n(Ot),wt=n(38378),Lt=n.n(wt),kt=n(21558),It=n.n(kt),Rt=n(82665),Dt=n.n(Rt),Mt=n(42641),Pt=n.n(Mt),Nt=n(99443),xt=n.n(Nt),Ft=n(16224),Ut=n.n(Ft),Ht=n(60167),Bt=n.n(Ht),Zt=n(94793),Gt=n.n(Zt),qt=n(18478),jt=n.n(qt),Wt=n(62949),Vt=n.n(Wt),zt=n(68420),Yt=n.n(zt),Kt=n(77793),Xt=n.n(Kt),Qt=n(23102),Jt=n.n(Qt),$t=n(26771),en=n.n($t),tn=n(60427),nn=n.n(tn),rn=n(58516),an=n.n(rn),on=n(38325),sn=n.n(on),ln=n(95876),cn=n.n(ln),dn=n(14829),un=n.n(dn),fn=n(31265),mn=n.n(fn),hn=n(40319),pn=n.n(hn),gn=n(85468),vn=n.n(gn),_n=n(50878),bn=n.n(_n),En=n(23911),yn=n.n(En),Tn=n(98511),An=n.n(Tn),Sn=n(24190),On=n.n(Sn),Cn=n(23962),wn=n.n(Cn),Ln=n(54120),kn=n.n(Ln),In=n(14353),Rn=n.n(In),Dn=n(83833),Mn=n.n(Dn),Pn=n(76169),Nn=n.n(Pn),xn=n(52863),Fn=n.n(xn),Un=n(40897),Hn=n.n(Un),Bn=n(8293),Zn=n.n(Bn),Gn=n(27254),qn=n.n(Gn),jn=n(61411),Wn=n.n(jn),Vn=n(77599),zn=n.n(Vn),Yn=n(63654),Kn=n.n(Yn),Xn=n(18424),Qn=n.n(Xn),Jn=n(53278),$n=n.n(Jn),er=n(97878),tr=n.n(er),nr=n(22196),rr=n.n(nr),ar=n(14156),ir=n.n(ar),or=n(84920),sr=n.n(or),lr=n(63581),cr=n.n(lr),dr=n(88957),ur=n.n(dr),fr=n(48386),mr=n.n(fr),hr=n(89612),pr=n.n(hr),gr=n(9205),vr=n.n(gr),_r=n(69079),br=n.n(_r),Er=n(59074),yr=n.n(Er),Tr=n(42133),Ar=n.n(Tr),Sr=n(5251),Or=n.n(Sr),Cr=n(6019),wr=n.n(Cr),Lr=n(74197),kr=n.n(Lr),Ir=n(88650),Rr=n.n(Ir),Dr=n(11571),Mr=n.n(Dr),Pr=n(33379),Nr=n.n(Pr),xr=n(52433),Fr=n.n(xr),Ur=n(12009),Hr=n.n(Ur),Br=n(90536),Zr=n.n(Br),Gr=n(91716),qr=n.n(Gr),jr=n(39735),Wr=n.n(jr),Vr=n(86317),zr=n.n(Vr),Yr=n(63201),Kr=n.n(Yr),Xr=n(73413),Qr=n.n(Xr),Jr=n(73097),$r=n.n(Jr),ea=n(88918),ta=n.n(ea),na=n(89138),ra=n.n(na),aa=n(62334),ia=n.n(aa),oa=n(65310),sa=n.n(oa),la=n(93524),ca=n.n(la),da=n(99329),ua=n.n(da),fa=n(51027),ma=n.n(fa),ha=n(68682),pa=n.n(ha),ga=n(7375),va=n.n(ga),_a=n(31532),ba=n.n(_a),Ea=n(99681),ya=n.n(Ea),Ta=n(39746),Aa=n.n(Ta),Sa=n(74345),Oa=n.n(Sa),Ca=n(45066),wa=n.n(Ca),La=n(20487),ka=n.n(La),Ia=n(25565),Ra=n.n(Ia),Da=n(77843),Ma=n.n(Da),Pa=n(17599),Na=n.n(Pa),xa=n(51490),Fa=n.n(xa),Ua=n(42289),Ha=n.n(Ua),Ba=n(34863),Za=n.n(Ba),Ga=n(89882),qa=n.n(Ga),ja=n(31588),Wa=n.n(ja),Va=n(7756),za=n.n(Va),Ya=n(26562),Ka=n.n(Ya),Xa=n(30047),Qa=n.n(Xa),Ja=n(32702),$a=n.n(Ja),ei=n(6532),ti=n.n(ei),ni=n(63814),ri=n.n(ni),ai=n(33409),ii=n.n(ai),oi=n(83459),si=n.n(oi),li=n(66354),ci=n.n(li),di=n(58085),ui=n.n(di),fi=n(43745),mi=n.n(fi),hi=n(56156),pi=n.n(hi),gi=n(91299),vi=n.n(gi),_i=n(30593),bi=n.n(_i),Ei=n(48078),yi=n.n(Ei),Ti=n(68566),Ai=n.n(Ti),Si=n(70765),Oi=n.n(Si),Ci=n(2301),wi=n.n(Ci),Li=n(844),ki=n.n(Li),Ii=n(21600),Ri=n.n(Ii),Di=n(30126),Mi=n.n(Di),Pi=n(39853),Ni=n.n(Pi),xi=n(46192),Fi=n.n(xi),Ui=n(87154),Hi=n.n(Ui),Bi=n(38812),Zi=n.n(Bi),Gi=n(46026),qi=n.n(Gi),ji=n(48214),Wi=n.n(ji),Vi=n(57940),zi=n.n(Vi),Yi=n(15982),Ki=n.n(Yi),Xi=n(34244),Qi=n.n(Xi),Ji=n(46900),$i=n.n(Ji),eo=n(77402),to=n.n(eo),no=n(60814),ro=n.n(no),ao=n(34429),io=n.n(ao),oo=n(66314),so=n.n(oo),lo=n(8015),co=n.n(lo),uo=n(43263),fo=n.n(uo),mo=n(39704),ho=n.n(mo),po=n(84281),go=n.n(po),vo=n(81429),_o=n.n(vo),bo=n(7001),Eo=n.n(bo),yo=n(14835),To=n.n(yo),Ao=n(3825),So=n.n(Ao),Oo=n(48887),Co=n.n(Oo),wo=n(36781),Lo=n.n(wo),ko=n(49451),Io=n.n(ko),Ro=n(24832),Do=n.n(Ro),Mo=n(79267),Po=n.n(Mo),No=n(30120),xo=n.n(No),Fo=n(44273),Uo=n.n(Fo),Ho=n(69229),Bo=n.n(Ho),Zo=n(54993),Go=n.n(Zo),qo=n(16969),jo=n.n(qo),Wo=n(73026),Vo=n.n(Wo),zo=n(3747),Yo=n.n(zo),Ko=n(7400),Xo=n.n(Ko),Qo=n(64330),Jo=n.n(Qo),$o=n(33678),es=n.n($o),ts=n(87278),ns=n.n(ts),rs=n(27415),as=n.n(rs),is=n(65243),os=n.n(is),ss=n(11366),ls=n.n(ss),cs=n(85580),ds=n.n(cs),us=n(54099),fs=n.n(us),ms=n(44217),hs=n.n(ms),ps=n(91853),gs=n.n(ps),vs=n(54799),_s=n.n(vs),bs=n(30118),Es=n.n(bs),ys=n(81720),Ts=n.n(ys),As=n(74425),Ss=n.n(As),Os=n(51642),Cs=n.n(Os),ws=n(79624),Ls=n.n(ws),ks=n(19508),Is=n.n(ks),Rs=n(8127),Ds=n.n(Rs),Ms=n(99551),Ps=n.n(Ms),Ns=n(73600),xs=n.n(Ns),Fs=n(66895),Us=n.n(Fs),Hs=n(94100),Bs=n.n(Hs),Zs=n(51443),Gs=n.n(Zs),qs=n(37945),js=n.n(qs),Ws=n(78331),Vs=n.n(Ws),zs=n(2440),Ys=n.n(zs),Ks=n(10164),Xs=n.n(Ks),Qs=n(79123),Js=n.n(Qs),$s=n(82778),el=n.n($s),tl=n(25905),nl=n.n(tl),rl=n(75631),al=n.n(rl),il=n(79588),ol=n.n(il),sl=n(2461),ll=n.n(sl),cl=n(76608),dl=n.n(cl),ul=n(65192),fl=n.n(ul),ml=n(79677),hl=n.n(ml),pl=n(56614),gl=n.n(pl),vl=n(15391),_l=n.n(vl),bl=n(51437),El=n.n(bl),yl=n(48482),Tl=n.n(yl),Al=n(12650),Sl=n.n(Al),Ol=n(87473),Cl=n.n(Ol),wl=n(52614),Ll=n.n(wl),kl=n(15204),Il=n.n(kl),Rl=n(61755),Dl=n.n(Rl),Ml=n(7407),Pl=n.n(Ml),Nl=n(22674),xl=n.n(Nl),Fl=n(61651),Ul=n.n(Fl),Hl=n(14310),Bl=n.n(Hl),Zl=n(87087),Gl=n.n(Zl),ql=n(25616),jl=n.n(ql),Wl=n(38077),Vl=n.n(Wl),zl=n(18394),Yl=n.n(zl),Kl=n(39679),Xl=n.n(Kl),Ql=n(29807),Jl=n.n(Ql)},11077:function(e,t,n){"use strict";var r=n(21528),a=n(52745),i=n(19275);if(r.default.setFeaturesToSalt(["adv-list-default-config"]),r.default.config({onParseFail:function(e,t){(0,a.coreLoggerDispatchSelfError)("features_err",e,{featureName:t})}}),r.default.import(i.Z.get("sotaFeatures")||{},r.Source.Onlineconf),r.default.importFromString(i.Z.get("sotaMigrationConfigFeatures")||"",r.Source.Slot),r.default.import(i.Z&&i.Z.omicron&&i.Z.omicron.Config,r.Source.Omicron),i.Z.get("isFtrsConfigurable")){var o=window.location.search.match(/[?&]ftrs=([^&]*)/);if(o)try{var s=window.decodeURIComponent(o[1]);r.default.importFromString(s,r.Source.GetParam)}catch(e){console.log(e)}}},90557:function(e,t,n){"use strict";n.d(t,{qh:function(){return r.qh},MV:function(){return a},Bv:function(){return i},bE:function(){return o},Zz:function(){return s},HP:function(){return l},dU:function(){return c},fA:function(){return d},BA:function(){return u},fO:function(){return f},Y0:function(){return m},y6:function(){return h},Af:function(){return p},Jg:function(){return g},GZ:function(){return v},JV:function(){return _},jU:function(){return b},TG:function(){return E},L3:function(){return y},Bx:function(){return T},xn:function(){return A},Ru:function(){return S},FV:function(){return O},yF:function(){return C},mV:function(){return w},L0:function(){return L},Jw:function(){return k},UC:function(){return I},j7:function(){return R},cH:function(){return D},xv:function(){return M},AQ:function(){return P},HE:function(){return N},C5:function(){return x},es:function(){return F},nJ:function(){return U},OE:function(){return H},Wt:function(){return B},yy:function(){return Z},E6:function(){return G},Yo:function(){return q},$S:function(){return j},mD:function(){return W},Bo:function(){return V},Os:function(){return z},eX:function(){return Y},uO:function(){return K},nM:function(){return X},fY:function(){return Q},f5:function(){return J},YC:function(){return $},w2:function(){return ee},ZZ:function(){return te},hj:function(){return ne},Ll:function(){return re}});var r=n(43845);function a(e){return e.default}var i=(0,r.pn)((function(){return n.e(7449).then(n.t.bind(n,77449,23)).then((function(e){return(0,e.default)()}))})),o=(0,r.pn)((function(){return Promise.resolve().then(n.t.bind(n,1751,23))})),s=(0,r.pn)((function(){return n.e(2550).then(n.t.bind(n,72550,23)).then((function(e){return e.default}))})),l=(0,r.pn)((function(){return n.e(7622).then(n.t.bind(n,37622,23))})),c=(0,r.pn)((function(){return n.e(1276).then(n.t.bind(n,1276,23)).then(a)})),d=(0,r.pn)((function(){return n.e(2048).then(n.t.bind(n,52048,23))})),u=(0,r.pn)((function(){return n.e(4073).then(n.t.bind(n,64073,23)).then((function(){return window.key}))})),f=(0,r.pn)((function(){return n.e(2018).then(n.t.bind(n,2018,23))})),m=((0,r.pn)((function(){return n.e(664).then(n.bind(n,20664))})),(0,r.pn)((function(){return Promise.all([n.e(1924),n.e(2503)]).then(n.bind(n,42503))}))),h=(0,r.pn)((function(){return n.e(923).then(n.bind(n,86088))})),p=(0,r.pn)((function(){return n.e(923).then(n.bind(n,72595))})),g=(0,r.pn)((function(){return n.e(923).then(n.bind(n,71331))})),v=(0,r.pn)((function(){return n.e(923).then(n.bind(n,89302))})),_=(0,r.pn)((function(){return n.e(923).then(n.bind(n,82646))})),b=(0,r.pn)((function(){return n.e(923).then(n.bind(n,19352)).then(a)})),E=(0,r.gH)((function(){return n.e(923).then(n.bind(n,80720))})),y=(0,r.pn)((function(){return n.e(4957).then(n.bind(n,94957))})),T=(0,r.pn)((function(){return n.e(8907).then(n.bind(n,18907)).then(a)})),A=(0,r.pn)((function(){return Promise.all([n.e(8524),n.e(4709)]).then(n.bind(n,84709)).then(a)})),S=(0,r.pn)((function(){return Promise.all([n.e(8524),n.e(4709),n.e(2387),n.e(4260)]).then(n.bind(n,44260)).then(a)})),O=(0,r.pn)((function(){return Promise.resolve().then(n.bind(n,92049)).then(a)})),C=(0,r.pn)((function(){return n.e(8250).then(n.bind(n,88052)).then(a)})),w=(0,r.pn)((function(){return n.e(5933).then(n.bind(n,75933)).then(a)})),L=(0,r.pn)((function(){return n.e(2387).then(n.bind(n,72387)).then(a)})),k=(0,r.pn)((function(){return n.e(2790).then(n.bind(n,42790)).then(a)})),I=(0,r.pn)((function(){return n.e(5048).then(n.bind(n,15048)).then(a)})),R=(0,r.pn)((function(){return n.e(1759).then(n.bind(n,41759)).then(a)})),D=(0,r.pn)((function(){return n.e(3225).then(n.bind(n,63225)).then(a)})),M=(0,r.pn)((function(){return n.e(5043).then(n.bind(n,45043)).then(a)})),P=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,48478)).then(a)})),N=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,71795)).then(a)})),x=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,64169)).then(a)})),F=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,93819)).then(a)})),U=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,99549)).then(a)})),H=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,40456)).then(a)})),B=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,95212)).then(a)})),Z=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,84455)).then(a)})),G=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,57228)).then(a)})),q=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,97078)).then(a)})),j=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,81614)).then(a)})),W=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,64299)).then(a)})),V=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,82975)).then(a)})),z=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,17821)).then(a)})),Y=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,10275)).then(a)})),K=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,7497)).then(a)})),X=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,3857)).then(a)})),Q=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,4979)).then(a)})),J=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,47740)).then(a)})),$=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,10866)).then(a)})),ee=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,4889)).then(a)})),te=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,17858)).then(a)})),ne=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,74528)).then(a)})),re=(0,r.pn)((function(){return n.e(5033).then(n.bind(n,88910)).then(a)}))},88570:function(e,t,n){"use strict";n.r(t),n.d(t,{AddressbookManager:function(){return O}});var r,a=n(17717),i=n.n(a),o=n(13620),s=n(43055),l=n(54498),c=n(86145),d=n(21211),u=n(18440),f=n.n(u),m=n(13624),h=n.n(m),p=n(66423),g=n.n(p),v=n(78267),_=n(63062),b=n(2418),E=n(93043),y=n(90557),T=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),A={emails:[],promise:null},S=function(){var e,t=null===(e=i().get("octavius-tooltip-p2p-kitty"))||void 0===e?void 0:e.time;if(!t)return!1;else return Math.floor(Date.now()/1e3)-t<d.P2P_PROMO_SHOWN_RECENTLY},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:h()},dataSource:{class:c.Z,events:["actionend"]},widget:{class:E.Z,events:["addressbook:open"]},"contextmenu-correspondent":{class:b.Z,events:["addressbook:addcontact","addressbook:opencontact"]},"compose-app":{lazy:y.xn,events:["addressbook:addcontact","addressbook:opencontact"],attrs:{getLastSeen:function(e){return e.getLastSeen}}},letter:{lazy:y.FV,events:["addressbook:refetchcontacts"],attrs:{checkContactPossessing:function(e){return e.checkContactPossessing},getLastSeen:function(e){return e.getLastSeen}}}}},t.prototype.renderAddressbook=function(e){if(A.emails=[],v.default.open("addressbook",{router:this.get("router"),openEmail:e,callsPromo:S()},{"close-on-esc":!1}),d.CALLS_P2P_OUTGOING){var t=i().get("used-p2p-addressbook");if(!t||!t.state)t.save({state:!0,time:!0})}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details;switch(t){case"actionend":if(n.action.type!==l.NAVIGATE)return!1;if("contacts"===n.request.alias)this.renderAddressbook();break;case"addressbook:open":this.renderAddressbook();break;case"addressbook:addcontact":g().call("ab/contacts/add",{contacts:[{nick:n.name,emails:[n.email]}]}).then((function(){_.default.add({text:i18n("Добавлен в адресную книгу")},n.scope?n.scope:"default"),A.emails=A.emails.filter((function(e){return e!==n.email}))}));break;case"addressbook:refetchcontacts":if(!d.PREFETCH_CORRESPONDENTS_DISABLE)A.emails=n,A.promise=(0,o.l)({emails:n});break;case"addressbook:opencontact":this.renderAddressbook(n.email)}return!1},t.prototype.checkContactPossessing=function(e){var t=Array.isArray(e)?e:[e];if(t.every((function(e){return A.emails.includes(e)}))&&A.promise)return A.promise;else return(0,o.l)({emails:t})},t.prototype.getLastSeen=function(e,t){var n=(void 0===t?{}:t).allowUseGarage,r=void 0===n?!1:n;return(0,s.v)({emails:e,only_memcache:!r})},t}(f().Mediator);t.default=f().Mediator.createFromClass("addressbook-manager",O)},72595:function(e,t,n){"use strict";n.r(t),n.d(t,{CalendarManager:function(){return w}});var r,a=n(60033),i=n.n(a),o=n(19275),s=n(21211),l=n(18440),c=n.n(l),d=n(19008),u=n(72727),f=n(39783),m=n.n(f),h=n(92042),p=n.n(h),g=n(13624),v=n.n(g),_=n(57579),b=n(38205),E=n(92203),y=n(93610),T=n(43353),A=n(47334),S=n(90557),O=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),C=["calendar:create","calendar:createnew","calendar:createbyselection"],w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:v()},letter:{lazy:S.FV,events:C},"calendar-button":{class:b.Z,events:C},"contextmenu-message":{class:y.Z,events:C},"dropdown-actions":{class:T.Z,events:C},"compose-dropdown":{class:E.Z,events:C},"list-letter-common":{class:A.Z,events:C},SelectionContextMenuIntegration:{events:C}}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details,r=n.model,a=n.createContent,i=n.description,o={type:t}.type.split(":").pop();if("createnew"===o)return this.doAction(o,m().getSafe(),a);var s=this.get("router.model.letter");return this.doAction(o,r||s,a,i)},t.prototype.doAction=function(e,t,n,r){if(t){if(t instanceof p()&&t.get("messages.length"))t=t.getExpandMessage();if(!s.USE_X_CALENDAR){if("create"===e){var a=this.constructForm(t);document.body.appendChild(a),_.Z.go(a),document.body.removeChild(a)}else if("createnew"===e){var i=o.Z.get("urls.calendarUrl")||"//calendar.mail.ru";(0,u.default)(i+"?action=eventCreate")}return!1}else this.createEventInXCalendar(e,t,n,r)}},t.prototype.createEventInXCalendar=function(e,t,n,r){var a=o.Z.get("urls.xCalendarUrl")||"//x.calendar.mail.ru",i=this.getCategory(t),s="create"===e||"createbyselection"===e?{action:"createEvent",title:this.getSummary(t,255),emails:!i?this.getAttendees(t,100):null,description:"createbyselection"===e?this.getSelectionDescription(r):this.getDescription(t,1e3),createContent:n}:{action:"createEvent",createContent:n};(0,u.default)("".concat(a,"?").concat(this.getCalendarCreateQueryParamsString(a,s)))},t.prototype.getCalendarCreateQueryParamsString=function(e,t){var n=4096-"".concat(e,"?").length;return Object.entries(t).filter((function(e){return e[1]})).reduce((function(e,t){var r,a=t[0],o=t[1],s="".concat(e,"&").concat(v().queryString.stringify(((r={})[a]=o,r)));if(s.length>n)return i().send("clnd_create_".concat(a,"_limit")),e;else return s}),"")},t.prototype.constructForm=function(e){var t=document.createElement("form");t.setAttribute("method","post"),t.setAttribute("target","_blank"),t.setAttribute("action",o.Z.get("urls.calendarUrl")||"//calendar.mail.ru"),t.setAttribute("style","position: absolute;left: -1000px;top: -1000px;width: 0px;height: 0px;");var n=this.constructFormData(e);return Object.keys(n).forEach((function(e){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",e),r.setAttribute("value",n[e]),t.appendChild(r)})),t},t.prototype.constructFormData=function(e){return{description:this.getDescription(e),summary:this.getSummary(e),attendees:this.getAttendees(e),category:this.getCategory(e),dtfrom:this.getPriorityDate(e)}},t.prototype.getSummary=function(e,t){var n=(e.get("subject")||i18n("<Без темы>")).replace(/(((Fwd|Re)[?[\d]*]?:[\s]*)+)/i,"").trim();if(n.length>t)return n.slice(0,t-3)+"...";else return n},t.prototype.getDescription=function(e,t){if(void 0===t)t=1500;var n=(e.get("body.text")||e.get("snippet")||"").trim();if(n.length>t)n=n.slice(0,t-3)+"...";return n},t.prototype.getSelectionDescription=function(e,t){if(void 0===t)t=1500;if(e.length>t)e=e.slice(0,t-3)+"...";return e},t.prototype.getAttendees=function(e,t){return(0,d.rY)(e).slice(0,t).join(",")},t.prototype.getCategory=function(e){var t=e.get("transaction_category"),n=e.getFolder(),r=n.isMetathread()&&n.get("type");return t||r||""},t.prototype.getPriorityDate=function(e){return e.get("dates_metadata.priority_date.timestamp",void 0)},t}(c().Mediator);t.default=c().Mediator.createFromClass("calendar-manager",w)},22737:function(e,t,n){"use strict";n.r(t),n.d(t,{FAKE_BUTTON_IN_COMPOSE_DROPDOWN_STORAGE_KEY:function(){return ne}});var r,a=n(51955),i=n(17717),o=n.n(i),s=n(60033),l=n.n(s),c=n(36822),d=n.n(c),u=n(54498),f=n(86145),m=n(22023),h=n(97899),p=n(21211),g=n(18440),v=n.n(g),_=n(4183),b=n(22385),E=n(72727),y=n(50),T=n.n(y),A=n(6116),S=n.n(A),O=n(39783),C=n.n(O),w=n(66298),L=n.n(w),k=n(92042),I=n.n(k),R=n(13624),D=n.n(R),M=n(39939),P=n(85271),N=n(50542),x=n(76024),F=n(63062),U=n(47759),H=n(92203),B=n(43353),Z=n(92049),G=n(82609),q=n(84015),j=n(53485),W=n(27853),V=n(13839),z=n(39385),Y=n(35108),K=n(90557),X=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},J=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ee=["compose:new","compose:reply","compose:replyall","compose:forward","compose:preload","compose:draft","compose:template","compose:schedule","compose:smartreply","compose:tomyself","compose:opennote"],te=/,(?=(?:[^"]*"[^"]*")*[^"]*)/,ne="fake-button-in-compose-dropdown";var re=function(e,t){if(void 0===t)t=te;if(!e)return[];else return e.split(t).map((function(e){return e.trim()})).filter((function(e){return e})).map(a.checkTextValidity).filter((function(e){return e.valid})).map((function(e){return{email:e.email,name:e.name}}))},ae=/(?:mailto:)?(.*)/;var ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return X(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:D(),events:["beforeroute","route","reloadend"],handleEvent:"handlePilotEvent"},dataSource:{class:f.Z,events:["actionend"],handleEvent:"handleDataSourceActionEnd"},"portal-menu":{class:j.ZP,events:ee},"webview-mobile-header":{class:Y.Z,events:ee},"webview-mobile-footer":{events:["compose:new"]},sidebar:{class:W.Z,events:ee},"sidebar-folders":{class:V.Z,events:ee},"compose-dropdown":{class:H.Z,events:ee},thread:{class:z.Z,events:ee},letter:{events:ee},dropdownActions:{class:B.Z,events:ee},"compose-windows":{lazy:K.Ru,events:["window-show","window-hide","window-collapsed-hide","window-extend"],attrs:{"paginator-visible":function(e){return((0,h.Mn)(e.get("router"))||p.ENABLE_NAV_UP)&&e._isPaginatorVisible},extended:function(e){return e.isExtended()}},handleEvent:"handleWindowState"},"dataset-letters":{class:Z.default,events:ee},octopus:{class:G.Z,events:["compose:new"]},"paginator-container":{class:q.Z,events:["show","hide"],handleEvent:"handlePaginatorVisibility"},"layer-sent-page":{lazy:K.L0,events:["compose:draft"]}}},t.prototype.toggleExtendMode=function(){(0,_.default)({type:u.TOGGLE_COMPOSE_EXTEND_MODE,uid:void 0})},t.prototype.isExtended=function(){return(this.get("router.model.uiLayout")||m.ce).composeExtended},t.prototype.handleWindowState=function(e){switch(e.type){case"windowextend":return this.toggleExtendMode(),!1;default:this.handleChangeVisibility(e)}},t.prototype.handleChangeVisibility=function(e){var t=e.type;if("windowcollapsedhide"!==t){var n=this.get("thread");if(n)n.set("load-draft-disabled","windowshow"===t)}U.default.update()},t.prototype.handlePaginatorVisibility=function(e){switch(e.type){case"show":this._isPaginatorVisible=!0;break;case"hide":this._isPaginatorVisible=!1}},t.prototype.handleDataSourceActionEnd=function(e){if(e.details.action.type===u.TOGGLE_COMPOSE_EXTEND_MODE)return!0;else return!1},t.prototype.handleEvent=function(e){var t=e.type,n=e.details,r=e.originalEvent,a=t.split(":").pop(),i=(null==n?void 0:n.model)||n;if("new"===a&&r)if(r.metaKey||r.ctrlKey)return!1;else r.preventDefault();if("preload"===a)N.default.preload();else if("smartreply"===a){var o=L().all.get(i.id).get("replies")[n.key]+"\x3c!--focus--\x3e";N.default.open({mode:"smartreply",model:i,body:o})}else if("tomyself"===a){var s=M.default.user,c=s.get("name"),d=c.first,u=c.last,f=s.getEmail();N.default.open({mode:"new",correspondents:{to:[{email:f,name:[d,u].filter((function(e){return!!e})).join(" ")||f}]}})}else if("opennote"===a)l().send("p_sidebar-folders_cdd_note_click"),(0,E.default)(p.URL_OPEN_PROJECTS_NOTES);else i=this._isMessage(i)?i:this.get("router.model.letter"),N.default.open({mode:a,model:i,source:null==n?void 0:n.source})},t.prototype._isMessage=function(e){return e&&(e instanceof I()||e instanceof C())},t.prototype.getAttachesFromUrl=function(e,t){var n=t.composeaction,r=t.composeid,a=e.cloud_files_ids,i=void 0===a?"":a,o=[];if("forward-file"===n&&r)try{o=r.split(",").map((function(e){var t=e.split(";");return{letterId:t[0],attachIdInLetter:t.slice(1).join(";")}}))}catch(e){l().send("compose-fwdfile-parseerr",{rlog:"compose-route",rlog_message:{type:"compose-fwdfile-parseerr",error:e}})}var s=o.map((function(e){var t=e.letterId,n=e.attachIdInLetter;return C().findOne({id:t}).then((function(e){var r=e.get("attaches.list").get(n);return T().from(new(S())({name:r.get("name"),size:r.get("size"),id:t,folder:e.get("folder"),n:r.get("id").split(";")}))}))})),c=[];try{if(c=JSON.parse(i),!Array.isArray(c))c=[];else c=c.map((function(e){return d().findOne(e).then((function(e){return T().fromAsync(e)}))}))}catch(e){c=[]}return s.concat(c)},t.prototype.getReplyOptionsFromUrl=function(e){var t=e.composeaction,n=e.composeid,r="new",a=Promise.resolve(null);if("drafts"===t)t="draft";if("replyall"===t||"reply"===t||"forward"===t||"draft"===t)r=t,a=C().findOne({id:n});return{mode:r,modelPromise:a}},t.prototype.getRouteParams=function(e){return J(this,void 0,void 0,(function(){var t,n,r,a,i,s,c,d,u,f,m,h,p,g,v,_,E,y,T,A,S,O,C,w;return $(this,(function(L){var k,I;if(t=e.activeUrl.query,n=e.activeRequest.params,k=t,I={},Object.entries(k).forEach((function(e){var t=e[0],n=e[1];if("string"==typeof n)I[t.toLowerCase()]=n})),a=(r=I).subject,i=void 0===a?"":a,s=r.body,c=void 0===s?"":s,d=r.mailto,u=r.calls,f=r["create-call"],m=r["template-name"],h=r["from-mailto-handler"],l().send("compose_get_params",{dwh:{subject:Boolean(i),body:Boolean(c),mailto:Boolean(d),calls:Boolean(u),"create-call":Boolean(f),"template-name":Boolean(m),"from-mailto-handler":Boolean(h)}}),h)null==(p=o().get("from-mailto-handler-count"))||p.save({hit:!0});if(g=this.getAttachesFromUrl(r,n),v=this.getReplyOptionsFromUrl(n),_=v.modelPromise,E=v.mode,y=function(e){if(!e)return{};l().send("mailto_link");var t=e.match(ae)[1],n=t.indexOf("?"),r={};if(-1!==n){var a=t.slice(n+1),i=t.slice(0,n),o=i?re(i,"%2C%20"):[],s=a.split(/&amp;|&/g).filter((function(e){return e})),c={};return s.forEach((function(e){var t=e.split("="),n=t[0],r=t[1];if(n&&r)try{c[n]=decodeURIComponent(r)}catch(e){}})),["to","cc","bcc"].forEach((function(e){r[e]=re(c[e])})),r.to=r.to.concat(o),Q(Q({},c),r)}return{to:re(t)}}(d),T=y.subject?y.subject:i,A=y.body?y.body:c,S="",O=!1,"string"==typeof A)if(S=(0,b.Z)(A),O=!!S.length,u){if(S=P.Z.getTemplate(S),!T)T=P.Z.getSubject();l().send("calls_insert_fromquery")}else S="<div>".concat(S,"</div>");return S=S.replace(/[\n]/g,"<br/>"),C={},["to","cc","bcc"].forEach((function(e){C[e]=re(r[e]).concat(y[e]||[])})),w={mode:E,body:S,correspondents:C,subject:T,createCall:f&&!A.length,additionalOptions:{prefilledBody:O,attachFiles:g,templateName:m}},[2,_.then((function(e){return Q(Q({},w),{model:e})}),(function(){return F.default.error({text:i18n("Не удалось найти исходное письмо")},"compose-notify"),Q(Q({},w),{model:null,mode:"new"})}))]}))}))},t.prototype.handleRoute=function(e){var t=e.type,n=e.target;if(!("compose"===n.activeRequest.alias))return!1;switch(t){case"beforeroute":N.default.preload(),x.default.add();break;case"route":this.getRouteParams(n).then((function(e){var t=e.createCall,n=e.model,r=e.mode,a=e.correspondents,i=e.body,o=e.subject,s=e.additionalOptions;if(t&&!o)o=P.Z.getSubject();var c=N.default.open({mode:r,model:n,correspondents:a,body:i,subject:o,additionalOptions:s});if(t)P.Z.createRoom().then((function(e){var t=P.Z.getTemplate(e);c.then((function(){N.default.insertHtml(t)}))})).catch((function(e){if("ratelimit"===e)F.default.error({text:i18n("Достигнут лимит создания звонков. Попробуйте позже.")},"compose-notify");else F.default.error({text:i18n("Не удалось создать ссылку на звонок")},"compose-notify")})),l().send("calls_create_fromquery");return c})).then((function(){x.default.remove()}))}return!1},t.prototype.handlePilotEvent=function(e){if("reloadend"===e.type)this.getList("compose-windows").forEach((function(e){return e.render()}));else return this.handleRoute(e)},t}(v().Mediator);t.default=v().Mediator.createFromClass("compose-manager",ie)},14198:function(e,t,n){"use strict";n.r(t),n.d(t,{FilterManager:function(){return g}});var r,a=n(18440),i=n.n(a),o=n(92042),s=n.n(o),l=n(13624),c=n.n(l),d=n(55674),u=n(46637),f=n(19413),m=n(82609),h=n(53485),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filters={all:!0,unread:!1,flagged:!1,with_attachments:!1},t.sortingType="D",t}return p(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:c(),events:["beforeroute","route","routeend"]},filters:{class:u.Z,events:["filterchange","filterclick","resetall"],attrs:{filter:function(e){return e.filters},sortingType:function(e){return e.sortingType}}},sortings:{class:f.Z,events:["sortingclick"],attrs:{sortingType:function(e){return e.sortingType}}},"portal-menu":{class:h.ZP,attrs:{filter:function(e){return e.filters},sortingType:function(e){return e.sortingType}}},octopus:{class:m.Z,attrs:{filter:function(e){return e.filters}},events:["filterclick"]}}},t.prototype.handleEvent=function(e){var t,n=this.get("router"),r=n.activeRoute,a=n.activeRequest,i=a.params.folder,o=n.route,l=o?o.params.letter:void 0,c=(null!==(t=n.route)&&void 0!==t?t:{}).request,u=(void 0===c?{}:c).query,f=(void 0===u?{}:u)["to-parent-button"],m=void 0===f?null:f;switch(e.type){case"filterclick":if("all"===e.details)d.Z.resetFilters();else d.Z.applyFilter(e.details);n.go("#letters",{preserveFilters:"true",folder:i},m&&{"to-parent-button":m});break;case"sortingclick":if(e.details!==this.sortingType)d.Z.applySorting(e.details),n.go("#letters",{preserveFilters:"true",preserveSortings:"true",folder:i},m&&{"to-parent-button":m});break;case"resetall":d.Z.resetFilters(),d.Z.resetSorting(),n.go("#letters",{preserveFilters:"true",preserveSortings:"true",folder:i},m&&{"to-parent-button":m});break;case"beforeroute":var h=r.is("#letters #read-letter")?n.activeUrl.query:{},p=l&&s().get(l);if(d.Z.set(h),p&&!d.Z.isLetterInFilter(p))window.history.replaceState(null,null,a.href),n.nav(a.href);break;case"routeend":this.filters=d.Z.getFilterConfig(),this.sortingType=d.Z.getSortingType(),this.updateAll()}},t}(i().Mediator);t.default=i().Mediator.createFromClass("filter-manager",g)},24583:function(e,t,n){"use strict";n.r(t);var r,a=n(54498),i=n(86145),o=n(99150),s=n(21211),l=n(18440),c=n.n(l),d=n(4183),u=n(83183),f=n(88141),m=n.n(f),h=n(4872),p=n.n(h),g=n(39783),v=n.n(g),_=n(92042),b=n.n(_),E=n(15907),y=n(13624),T=n.n(y),A=n(78267),S=n(50375),O=n(93286),C=n(96384),w=n(41860),L=n(9842),k=n(64391),I=n(94716),R=n(20450),D=n(16730),M=n(37874),P=n(54213),N=n(70757),x=n(39385),F=n(90557),U=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return U(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:T()},"context-menu":{class:w.Z,events:["read","clear","remove","add","edit","lock","unlock","share","disable:tomyself"],attrs:{"to-myself-enabled":function(e){return e.get("router.model.uiThreadsSettings").toMyself}}},"metathread-head-common":{class:I.Z,events:["clear","read"]},"metathread-head-compact":{class:R.Z,events:["clear","read"]},"metathread-head-compact-expanded":{class:D.Z,events:["clear","read"]},"nav-folders":{class:M.Z,events:["clear"]},"portal-menu-element":{class:N.Z,events:["clear"]},"new-folder-btn":{class:P.Z,events:["add"]},"mobile-folders-settings-modal":{events:["add"]},"layer-metathreads-settings":{lazy:F.xv,attrs:{metathreadsSettings:function(e){return e.get("router.model.uiThreadsSettings").metathreadsSettings}}},"list-letter-tip":{class:L.Z,events:["clear"]},"list-nested-moveto-folder":{class:k.Z,events:["add"]},"settings-dock":{attrs:{metathreadsSettings:function(e){return e.get("router.model.uiThreadsSettings").metathreadsSettings}}},thread:{class:x.Z},"confirm-delete-folder":{lazy:F.cH}}},t.prototype.handleEvent=function(e){if((0,i.J)(e)){var t=e.type,n=e.details.model;if("add"===t||n){var r={type:t};this.doAction(r,n)}}},t.prototype.clear=function(e){var t=this;A.default.open("confirm-clear-folder",{model:e,mobile:E.default.isLessThen("xs")},{dimmer:!0,compact:!0,resolvable:!0,"reject-on-close":!0,mobile:E.default.isLessThen("xs")}).then((function(){e.cleanup().then((function(){return o.default.updateAll()})).then((function(){if(t.get("router.model.folder.id")===e.id){t.get("router").go("#letters",{folder:e.id})}if("#read-letter"===t.get("router.route.id")){var n=t.get("thread");if(n){var r=n.get("model");v().fetchData({id:r.get("expand"),folder_id:e.id,remove_emoji_opts:u.Y},!0,!0).then((function(e){n._loadDraft(new(b())({expand:r.get("expand"),messages:[e]}))}))}}}))})).catch((function(e){if(e)throw e}))},t.prototype.read=function(e){m().execute({flag:"unread",state:!1,folderFrom:e.get("id")})},t.prototype.doAction=function(e,t){var n=this;if("read"===e.type)this.read(t);else if("clear"===e.type)this.clear(t);else if("remove"===e.type)this.remove(t);else if("add"===e.type)this.add(t);else if("share"===e.type)this.share(t);else if("edit"===e.type)if(t.get("open"))this.edit(t);else(0,C.Z)(t).then((function(e){if(e)n.edit(t)}));else if("unlock"===e.type)(0,C.Z)(t).then(this.invalidateCacheAndUpdateAll.bind(this));else if("lock"===e.type)t.secureClose().then(this.invalidateCacheAndUpdateAll.bind(this));else if("disable:tomyself"===e.type)this.disableToMyself(t)},t.prototype.add=function(e){A.default.open("create-folder",{model:e,mode:"new"},{dimmer:!0,"dimmer-color":"transparent",compact:!0,resolvable:!0,"reject-on-close":!0,"close-on-esc":!1,mobile:E.default.isLessThen("xs"),"hide-headline":E.default.isLessThen("xs")}).catch((function(e){if(e)throw e}))},t.prototype.share=function(e){A.default.open("share-folder",{model:e,handleFinal:null},{dimmer:!0,"dimmer-color":"transparent",compact:!0,resolvable:!0,"reject-on-close":!0}).catch((function(e){if(e)throw e}))},t.prototype.edit=function(e){A.default.open("create-folder",{model:e,mode:"edit"},{dimmer:!0,"dimmer-color":"transparent",compact:!0,resolvable:!0,"reject-on-close":!0,"close-on-esc":!1,mobile:E.default.isLessThen("xs"),"hide-headline":E.default.isLessThen("xs")}).catch((function(e){if(e)throw e}))},t.prototype.remove=function(e){var t=this;A.default.open("confirm-delete-folder",{model:e,mobile:E.default.isLessThen("xs")},{dimmer:!0,compact:!0,resolvable:!0,"reject-on-close":!0,mobile:E.default.isLessThen("xs"),"hide-headline":E.default.isLessThen("xs")}).then((function(){var n=t.get("confirm-delete-folder");e.remove().then((function(){return o.default.updateAll()}),(function(e){var r=t.handleFolderRemoveErrors(e);throw n.set({error:r,processing:!1}),e})).then((function(){if(t.get("router.model.folder.id")===e.id){t.get("router").go("#letters",{folder:p().TYPE_INBOX})}n.broadcast("layer:close")}),(function(){}))})).catch((function(e){if(e)throw e}))},t.prototype.disableToMyself=function(e){var t=this,n=function(){(0,d.dispatchAndWait)({type:a.TOGGLE_TO_MYSELF_METATHREAD,state:!1}).then((function(){if((0,O.ZP)({type:"tomyself-disable",intervals:[["fldr-ctx-menu",1]]}),t.get("router.model.folder.id")===e.id){t.get("router").go("#letters",{folder:p().TYPE_INBOX})}t.updateAll()}))};if(s.LAYER_METATHREAD_DISABLE)A.default.open("disable-metathread",{model:e},{dimmer:!0,resolvable:!0,"close-on-dimmer":!0,"reject-on-dimmer":!0,"close-on-esc":!1,"reject-on-close":!0}).then((function(){n()})).catch((function(e){if(e)throw e}));else n()},t.prototype.invalidateCacheAndUpdateAll=function(e){if(e)S.default.invalidateCache(),o.default.dispatch({type:a.UPDATE_ALL,priority:T().Loader.PRIORITY_LOW})},t.prototype.handleFolderRemoveErrors=function(e){var t="unknownError",n={"ids[0]":{is_collector_root:"isCollectorRoot",invalid:"systemFolder",not_exists:"folderNotExists",unknown:"invalidFolder"}},r=e.body;return Object.keys(r).forEach((function(e){if(e in n){var a=r[e].error;if(a in n[e])t=n[e][a];else t=n[e].unknown}else t="unknownError"})),t},t}(c().Mediator);t.default=c().Mediator.createFromClass("folders-actions",H)},70614:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r=function(e,t){if(!e||!t)return null;var n=e.get("parent");return t.find((function(e){var t=e.id;return n===t}))}},15907:function(e,t,n){"use strict";n.r(t),n.d(t,{getColumnContentWidth:function(){return Ee},layoutManager:function(){return we}});var r,a,i=n(17717),o=n.n(i),s=n(60033),l=n.n(s),c=n(54498),d=n(86145),u=n(99150),f=n(22023),m=n(21211),h=n(18440),p=n.n(h),g=n(4183),v=n(21280),_=n(74509),b=n(82855),E=n(37791),y=n(13624),T=n.n(y),A=n(2335),S=n(74456),O=n(47759),C=n(93286),w=n(57045),L=n(84427),k=n(52935),I=n(79087),R=n(81061),D=n(41860),M=n(93610),P=n(26578),N=n(43353),x=n(46637),F=n(31931),U=n(13944),H=n(91622),B=n(17914),Z=n(39846),G=n(47334),q=n(9842),j=n(35056),W=n(82997),V=n(12043),z=n(59921),Y=n(16730),K=n(94389),X=n(82609),Q=n(84015),J=n(58049),$=n(16330),ee=n(60319),te=n(59193),ne=n(13839),re=n(84561),ae=n(39385),ie=n(83260),oe=n.n(ie),se=n(90557),le=n(67808),ce=n(88255),de=n(89302),ue=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fe=function(){return(fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},me="(min-width: 1200px) and (max-width: 1260px) and (min-height: 800px)",he=(0,E.createMediaQueryMatch)(),pe=!0,ge=!1,ve=le.wJ,_e=le.gG,be=function(e){if(m.ADV_SIDEBAR_160_ALWAYS||m.ADV_SIDEBAR_160_ON_WIDTH_1800&&e<1800||m.ADV_SIDEBAR_160_ON_WIDTH_1420&&e<1420)return 40;else return 60};(a=document.documentElement.style).setProperty("--column-right-with-widget","320px"),a.setProperty("--column-right-space-left","8px"),a.setProperty("--column-right-space-right","8px");function Ee(e){return 4*e}function ye(e){return Ee(e)}function Te(e){if(0===e)return 0;else return 4*e+8}var Ae=function(e){var t=window.coreLogger;null==t||t.addToMetaData(e)},Se=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vkui--octavius_size_layout_width_min--regular"))||0,Oe=window.matchMedia("(orientation: landscape)"),Ce=function(e){function t(){var t=e.call(this)||this;t.size="m",t.verticalSize="m",t.maxWidth=1260,t.adv160ColumnRight=void 0,t.adv160ColumnRight3pane=void 0,t.columnRight=60,t.defaultColumnRight=60,t.columnSidebar=70,t.columnRightSidebar=!1,t.support3pane=!0,t.supportWidget=!1,t.supportSticky=!0,t.supportHeadline=!0,t.supportComposeExtend=!0,t.paymentDieWithIndentOn3Pane=!1,t.searchSuggestCount=5,t.forceShortcuts=!1,t.performanceTrace="track",t.updateCustomColumnsDebounced=oe().debounce(t.updateCustomColumns,m.RESIZE_UPDATE_DEBOUNCE_TIME,t),t._createMedia(),t._registerQueries(),window.addEventListener("resize",t.updateCustomColumnsDebounced.bind(t,!0)),t.updateAll();var n=function(e){var t=document.createElement("div");try{for(var n=0,r=e;n<r.length;n++){var a=r[n];if(t.style.display=a,t.style.display===a)return{value:a,error:""}}}catch(e){return{value:"",error:e}}return{value:"",error:""}}(["-ms-grid","grid"]);if(!n.value)l().send("no-grid-support",m.NO_CSS_GRID_LOG_KAKTAM&&{rlog:"octavius-no-grid-support",rlog_message:{"octavius-no-grid-support":!0,error:n.error}});return u.default.one("actionend",(function(){var e=o().get("octavius"),n=o().get("ignore-ponymode-experiment"),r=e&&e.isActive()&&e.getCount("show"),a=t.getUiLayout().ponyMode;if(!n||!n.state)if(r)if(!a)if(!(t.maxWidth>1420))(0,g.default)({type:c.TOGGLE_PONY_MODE,uid:void 0}),n.save({state:!0}),(0,C.ZP)("force_ponymode");else n.save({state:!0});else n.save({state:!0})})),"2pane"===t.getType()?A.default.setActiveListPlacement("list2pane"):A.default.setActiveListPlacement("list3pane"),t}return ue(t,e),t.prototype.getComponentsSpec=function(){var e=this;return{router:{class:T(),events:["route"]},layout:{class:H.ZP,attrs:{type:function(e){return e.getType()},size:function(e){return e.size},mobile:function(e){return e.isLessThen("xs")},isMoreThen:function(e){return e.isMoreThen},isLessThen:function(e){return e.isLessThen},"left-column":function(e){return e.getLeftColumn()},"right-column":function(e,t){return function(e,t){if(m.NEW_TOOLBAR)return e._getColumnRight();else return"portal"===t.get("id")?e._getDefaultColumnRight():e.columnRight}(e,t)},"sidebar-column":function(e){return e.getSidebarColumn()},"support-compose-extend":function(e){return e.supportComposeExtend},showWidget:function(e){return e.showWidget()},showWidgetColumn:function(e){return e.showWidgetColumn()},"is-shortcut-left":function(e){return e.getLeftColumn()<=m.SHORTCUT_LEFT_COLUMN_LIMIT},"max-width":function(){return m.MAX_LAYOUT_WIDTH},"is-advert-scroll":function(){return m.ADVERT_SCROLL}},events:[H.eN.LayoutResize],handleEvent:"handleLayoutEvent"},"application-mail":{attrs:{mobile:function(e){return e.isLessThen("xs")}}},"compose-collapsed":{class:R.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}},WidgetColumn:{attrs:{showWidgetColumn:function(e){return e.showWidgetColumn()},widgetIsOpen:function(e){return e.widgetIsOpen()},widgetType:function(e){return e.widgetType()}},events:[ce.tY]},"portal-menu":{attrs:{layoutType:function(e){return e.getType()},"small-search":function(e){return e.isLessThen("s")},mobile:function(e){return e.isLessThen("xs")},"search-column":function(e){return ye(e._getDefaultColumnRight())},"right-column":function(e){return e._getColumnRight()},"main-column":function(e){return e.getMainColumn()}}},"settings-dock":{events:["layout:toggle","shortcuts:toggle","lettersdividers:toggle"],attrs:{type:function(e){return e.getType()},support3pane:function(e){return e.support3pane},"can-toggle-shortcuts":function(e){return e.canToggleShortcuts()},"manual-shortcuts":function(e){return e.getUiLayout().manualShortcuts},"can-toggle-letters-dividers":function(){return m.ENABLE_LETTERS_LIST_DIVIDER_SWITCHER&&m.ENABLE_LETTERS_DIVIDERS},"letters-dividers-enabled":function(e){return e.isLettersListDividersEnabled()}}},settings:{class:te.Z,events:["layout:toggle","shortcuts:toggle",ce.tY],attrs:{type:function(e){return e.getType()},support3pane:function(e){return e.support3pane},"can-toggle-shortcuts":function(e){return e.canToggleShortcuts()},"manual-shortcuts":function(e){return e.getUiLayout().manualShortcuts}}},filters:{class:x.Z,events:["layout:toggle","shortcuts:toggle"],attrs:{type:function(e){return e.getType()},support3pane:function(e){return e.support3pane},"sidebar-column":function(e){return e.getSidebarColumn()},"can-toggle-shortcuts":function(e){return e.canToggleShortcuts()},"manual-shortcuts":function(e){return e.getUiLayout().manualShortcuts}}},headline:{class:F.Z,attrs:{enabled:function(e){return e.supportHeadline}}},letter:{lazy:se.FV,attrs:{"sticky-reduce-all-texts":function(e){return e.getMainColumn()<200},"sticky-reduce-one-text":function(e){return e.getMainColumn()<230},"sticky-reduce-reply":function(e){return e.getMainColumn()<160},"sticky-position":function(e){var t={},n=4*e.columnRight+8,r=4*e.getLeftColumn()+1;if("3pane"===e.getType())r=4*(e.getLeftColumn()+e.getSidebarColumn())+1;if(e.maxWidth>m.MAX_LAYOUT_WIDTH)t.maxWidth=m.MAX_LAYOUT_WIDTH-r-n;return t.left=r,t.right=n,t},mobile:function(e){return e.isLessThen("xs")}}},"letter-swipe-actions":{class:Z.Z,attrs:{"layout-size":function(e){return e.size},"layout-type":function(e){return e.getType()}}},"metathread-head-compact-expanded":{class:Y.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}},"layer-confirm-clear-folder":{class:U.default,attrs:{mobile:function(e){return e.isLessThen("xs")}}},"layer-window":{attrs:{mobile:function(e){return e.isLessThen("xs")},slim:function(e){return e.isLessThen("s")}}},"layer-sent-page":{attrs:{slim:function(e){return e.isLessThen("s")}}},"letter-body":{class:B.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}},"list-letter-tip":{class:q.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}},"list-letter-compact":{attrs:{"payment-die-with-indent":function(e){return e.paymentDieWithIndentOn3Pane},"layout-type":function(e){return e.getType()}}},"list-letter-common":{class:G.Z,attrs:{"layout-type":function(e){return e.getType()}}},metathread:{class:V.Z,attrs:{"short-text":function(e){return e.isLessThen("m")},"short-dropdown":function(e){return e.isShortColumn()}}},"dropdown-actions":{class:N.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}},"context-menu":{class:D.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}},octopus:{class:X.Z,attrs:{isHorizontal:function(e){return e.isHorizontal()},mobile:function(e){return e.isLessThen("xs")},is3Pane:function(e){return"3pane"===e.getType()}}},"metathread-footer":{class:z.Z,attrs:{"short-text":function(e){return e.isShortColumn()}}},"attach-list":{class:I.Z,attrs:{"save-to-cloud":function(e){return e.isMoreThen("xxs")},mobile:function(e){return e.isLessThen("xs")}}},"search-panel":{class:ee.Z,attrs:{leftColumn:function(e){return e.getLeftColumn()},rightColumn:function(e){return ye(e._getDefaultColumnRight())},layoutType:function(e){return e.getType()},size:function(e){return e.size},maxWidth:function(){return m.MAX_LAYOUT_WIDTH},onlyIcon:function(e){return e.isLessThen("s")&&!m.NEW_TOOLBAR}}},slot:{class:re.Z,attrs:{"right-column":function(e){return Ee(e.columnRight)}}},"noads-button":{class:K.default,attrs:{isSmallAdvColumnRight:function(t){return m.ADV_160_ON_SMALL_WIDTH?t.columnRight===e._getAdv160ColumnRight():!1},"right-column":function(e){return Ee(e.columnRight)}}},"ad-feedback":{class:k.Z,attrs:{"right-column":function(e){return Ee(e.columnRight)}}},thread:{class:ae.Z,attrs:{"sticky-disabled":function(e){return!e.supportSticky},mobile:function(e){return e.isLessThen("xs")}}},"promo-block-letter":{class:J.Z,attrs:{support3pane:function(e){return e.support3pane}}},"list-letter-welcome":{class:j.Z,attrs:{type:function(e){return e.getType()},ponyMode:function(e){return e.getUiLayout().ponyMode}}},"list-letter-welcome-suggestions":{class:W.Z,attrs:{ponyMode:function(e){return e.getUiLayout().ponyMode}}},"sidebar-folders":{class:ne.Z,attrs:{size:function(e){return e.size},layoutType:function(e){return e.getType()}}},"paginator-container":{class:Q.Z,attrs:{type:function(e){return e.getType()},"right-column":function(e){return Te(e._getColumnRight())},"left-column":function(e){return Te(e._getColumnLeft())},"sidebar-column":function(e){return 4*e.getSidebarColumn()},"max-breakpoint":function(e){return e.maxBreakpoint},"right-offset":function(e){return e._getRightOffset()}}},renovator:{class:$.Z,attrs:{type:function(e){return e.getType()}}},discounts:{class:P.Z,attrs:{width:function(e){if("3pane"===e.getType()&&e.getSidebarColumn()<le.wJ)return"small";else return"default"}}},"vk-messenger-provider":{attrs:{offset:function(e){return Te(e._getColumnRight())}}},"vkui-overlay-modals":{attrs:{mobile:function(e){return e.isLessThen("xs")}}},"data-source":{class:d.Z,events:["actionend"]},"contextmenu-message":{class:M.Z,attrs:{mobile:function(e){return e.isLessThen("xs")}}}}},t.prototype.isVertical=function(e){return e===this.verticalSize},t.prototype.isHorizontal=function(){return Oe.matches},t.prototype.isShortColumn=function(){return 70===this.getSidebarColumn()&&"3pane"===this.getType()},t.prototype.isMoreThen=function(e){return le.J7.indexOf(this.size)>le.J7.indexOf(e)},t.prototype.isLessThen=function(e){return le.J7.indexOf(this.size)<le.J7.indexOf(e)},t.prototype.getLeftColumn=function(){var e,t;return null!==(t=null===(e=this.customLayout.main)||void 0===e?void 0:e.left)&&void 0!==t?t:this.columnLeft},t.prototype.getSidebarColumn=function(){var e,t;return null!==(t=null===(e=this.customLayout.main)||void 0===e?void 0:e.sidebar)&&void 0!==t?t:this.columnSidebar},t.prototype.getMainColumn=function(){if("3pane"===this.getType())return this.getCurrentLayoutWidth()-this.getSidebarColumn()-this.getLeftColumn()-this.columnRight;else return this.getCurrentLayoutWidth()-this.getLeftColumn()-this.columnRight},t.prototype.canToggleShortcuts=function(){return!this.forceShortcuts&&!m.USER_LAYOUT_RESIZE},t.prototype.getType=function(){return"3pane"===this.getUiLayout().type&&this.support3pane?"3pane":"2pane"},t.prototype._getAdv160ColumnRight=function(){if(void 0!==this.adv160ColumnRight)return this.adv160ColumnRight;else return"3pane"===this.getType()?this.adv160ColumnRight3pane:void 0},t.prototype._getDefaultColumnRight=function(){if(m.ADV_160_ON_SMALL_WIDTH){var e=this._getAdv160ColumnRight();if(e)return e}return this.defaultColumnRight},t.prototype._getColumnRight=function(){var e=this._getDefaultColumnRight();if(this.showWidgetColumn())return 2+(this.widgetIsOpen()?82:0);if(this.showWidget())return e;if(m.HIDE_TOYS===m.BL_PROP_NAME)return 0;else return e},t.prototype.hideAds=function(){return m.HIDE_TOYS===m.BL_PROP_NAME},t.prototype.canShowWidget=function(){return f.h&&m.HIDE_TOYS===m.BL_PROP_NAME&&this.supportWidget&&(0,de.canTodoBeShown)(this.get("router"))},t.prototype.canShowTodo=function(){return m.SHOW_TODO_TOGGLE&&this.canShowWidget()},t.prototype.showWidget=function(){return this.getUiLayout().widgetIsOpen&&this.canShowWidget()},t.prototype.widgetType=function(){return this.getUiLayout().widget},t.prototype.widgetIsOpen=function(){return m.HIDE_TOYS===m.BL_PROP_NAME&&this.getUiLayout().widgetIsOpen},t.prototype.showWidgetColumn=function(){return m.WIDGET_COLUMN&&this.canShowWidget()},t.prototype.handleMedia=function(e){var t=this;if(e=void 0===e?this._query:this._query=e,this.updateQuery(e),pe)(0,f.OW)(this.support3pane),(0,f.tn)(this.supportWidget),pe=!1,this.updateCustomColumnsDebounced(!0),this.updateAll(),Ae({support3pane:this.support3pane});else Promise.all([(0,g.default)({type:c.UPDATE_LAYOUT_SUPPORT_3_PANE,value:this.support3pane,uid:void 0},{waitForAppLoad:!0}),(0,g.default)({type:c.UPDATE_LAYOUT_SUPPORT_TODO,value:this.supportWidget,uid:void 0},{waitForAppLoad:!0})]).then((function(){t.updateAll()}))},t.prototype._logMediaQueryRace=function(e){var t;ge=!0,l().send("media-query-race",{i:(t={},t[e]=1,t)});var n=m.MATCH_MEDIA_LOG?JSON.stringify({queries:he.getCurrentSnapshot(),width:window.innerWidth,height:window.innerHeight}):"nolog";(0,S.Z)("trackJS").then((function(t){return t.addErrorFromApp(new Error("media-query-race: "+e+", "+n),"media-query-race")}))},t.prototype.updateQuery=function(e){var t=this;if(!this.media)return this._logMediaQueryRace("nomedia"),this._createMedia(),void this._registerQueries();var n=this.media[e];if(n){if(ge)ge=!1,l().send("media-query-race",{i:{ok:1}});var r=n.size,a=this.size;if(r&&a&&r!==a)(0,C.ZP)(["on_layout_resize",r]);if(!a)if((0,C.ZP)(["user_visit_size",r]),n.maxBreakpoint)(0,C.ZP)(["user_visit_size_max"]);this.support3pane=n.support3pane,this.supportWidget=n.supportWidget,this.mediaKeys.forEach((function(e){var r=n[e];if(!(r instanceof Function))t[e]=r}));var i=["forceShortcuts"];if(i.forEach((function(e){var r=n[e];t[e]=r instanceof Function?r(t):r})),this.mediaKeys.forEach((function(e){var r=n[e];if(r instanceof Function&&!i.includes(e))t[e]=r(t)})),("xs"===a||"xxs"===a)&&"_timers"in window)delete window._timers.ready_app;this.updateCustomColumns()}else if(this._logMediaQueryRace("noeffects"),this.media[me])this.updateQuery(me)},t.prototype.setLayout=function(e){var t=this;if("2pane"===e||"3pane"===e)"2pane"===e?A.default.setActiveListPlacement("list2pane"):A.default.setActiveListPlacement("list3pane"),(0,C.ZP)(["on_layout_change",e]),Ae({layoutType:e}),(0,g.default)({type:c.UPDATE_LAYOUT_TYPE,value:e,uid:void 0}).then((function(){t.handleMedia(),O.default.update()}))},t.prototype.handleEvent=function(e){var t=this,n=e.type,r=e.details,a=r&&r.from;switch(n){case"layout:toggle":var i="3pane"===this.getUiLayout().type?"2pane":"3pane";return(0,C.ZP)({type:"toggle-layout-".concat(i),intervals:[["".concat(a),1]]}),this.setLayout(i),!1;case"shortcuts:toggle":var o=!this.get("router.model.uiLayout").manualShortcuts;return(0,C.ZP)({type:"toggle-shortcuts-".concat(o?"on":"off"),intervals:[["".concat(a),1]]}),(0,g.default)({type:c.TOGGLE_FOLDER_SHORTCUTS,uid:void 0}).then((function(){t.handleMedia(),O.default.update()})),!1;case"route":return this.updateQuery(this._query),!1;case"actionend":return this.onDataSourceActionEnd(e);case"lettersdividers:toggle":var s=!this.isLettersListDividersEnabled();(0,v.qF)(s).then((function(){u.default.dispatch({type:c.TOGGLE_LETTERS_LIST_DIVIDERS,priority:T().Loader.PRIORITY_LOW}),l().send("letters-dividers-".concat(s?"on":"off"))}))}},t.prototype.isLettersListDividersEnabled=function(){return m.ENABLE_LETTERS_DIVIDERS&&(0,v.pY)()},t.prototype.getCurrentLayoutWidth=function(){return(0,_.uZ)(Se,window.innerWidth,m.MAX_LAYOUT_WIDTH)/4},t.prototype.storeLayoutWidth=function(e){if(this.layout.main=e,m.USER_LAYOUT_SAVE_TO_STORAGE)w.ZP.set("octavius-custom-layout",fe(fe({},w.ZP.get("octavius-custom-layout")),this.layout));this.customLayout.main=e},t.prototype.getLayouts=function(e){var t=(void 0===e?{}:e).id;return this.getList("layout").filter((function(e){return null==t||e.get("id")===t}))},t.prototype.applyLayoutWidth=function(e,t){var n=t.storeValue,r=t.showResizeState,a=t.onlyId;if(this.customLayout.main=e,this.columnLeft=e.left,this.getLayouts({id:a}).forEach((function(t){t.onResize(e,r)})),n)this.storeLayoutWidth(e)},t.prototype.updateCustomColumns=function(e){if(void 0===e)e=!1;if(b.Z.reset(),this.layout.main)this.updateCustomColumn(this.layout.main);if(e)this.updateAll()},t.prototype.getSizeLimits=function(){var e=_.zG.left;if(m.DISABLE_LEFT_COLUMN&&this.isLessThen("xs"))e=0;else if(this.getUiLayout().ponyMode)e=13;return{min:fe(fe({},_.zG),{left:e}),max:_.B1}},t.prototype.updateCustomColumn=function(e,t){var n=void 0===t?{}:t,r=n.storeValue,a=void 0===r?!1:r,i=n.snapToRecommendedSize,o=void 0===i?!0:i,s=n.showResizeState,l=void 0===s?!1:s,c=n.shouldUpdate,d=n.onlyId,u=this.getSizeLimits(),f=u.min,h=u.max,p={left:this.getLeftColumn(),sidebar:this.getSidebarColumn()},g={left:e.left||this.getLeftColumn(),sidebar:e.sidebar||this.getSidebarColumn()},v={minSizes:fe(fe({},f),{right:this.columnRight}),maxSizes:fe(fe({},h),{right:this.columnRight})},b="3pane"===this.getType(),E=(b?_.s0:_.N9)(g,this.getCurrentLayoutWidth(),v);if(o)E.left=(0,_.Il)(E,{left:function(e){return(0,_.Zp)(e,m.SHORTCUT_LEFT_COLUMN_LIMIT,f.left)}},this.getType()).left;if(!c||c(p,E))this.applyLayoutWidth(b?(0,_.ei)(E,["left","sidebar"]):(0,_.ei)(E,["left"]),{storeValue:a,showResizeState:l,onlyId:d})},t.prototype.handleLayoutEvent=function(e){var t;switch(e.type){case H.eN.LayoutResize:var n=e.details,r=n.width/4;if(this.updateCustomColumn(((t={})[n.column]=r,t),{storeValue:!0,snapToRecommendedSize:n.resizeEnd,showResizeState:!n.resizeEnd,shouldUpdate:function(e,t){if("sidebar"===n.column&&t.left<e.left)return!1;if("sidebar"===n.column&&r>e.sidebar&&t.sidebar<e.sidebar)return!1;else return!0}}),n.resizeEnd)if(this.getLayouts().forEach((function(e){e.onResizeEnd()})),m.USER_LAYOUT_ENABLE_METRICS)l().send("resize_layout_column_".concat(n.column));return n.resizeEnd}return!1},t.prototype.onDataSourceActionEnd=function(e){switch(e.details.action.type){case c.SET_WIDGET:case c.TOGGLE_TODO:return this.handleMedia(),!0}return!1},t.prototype._registerQueries=function(){var e=this;Object.keys(this.media).forEach((function(e){he.register(e,"screen and "+e)}));var t=function(t){var n=t.filter((function(t){return e.media[t]}));e.handleMedia(n[0])};t(he.getCurrentMatches()),he.on("change",t)},t.prototype.getUiLayout=function(){return this.get("router.model.uiLayout")||f.ce},t.prototype.shortcutsEnabled=function(e){return this.forceShortcuts&&!e||this.getUiLayout().manualShortcuts},t.prototype._getShortColumnLeft=function(){if(this.getUiLayout().ponyMode)return 13;else return 15},t.prototype._getColumnLeft=function(){var e=this.get("router.route"),t=!e||e.is("#search"),n=this.getUiLayout();if(m.DISABLE_LEFT_COLUMN&&this.isLessThen("xs"))return 0;if(this.shortcutsEnabled(t))return this._getShortColumnLeft();if(n.ponyMode)return 58;else return 58},t.prototype._getRightOffset=function(){return L.i.isOpen()?72:8},t.prototype._createMedia=function(){var e,t=this;if(!this.media){this.layout=m.USER_LAYOUT_SAVE_TO_STORAGE?w.ZP.get("octavius-custom-layout")||{}:{},this.customLayout={};var n=this._getColumnLeft.bind(this),r=this._getColumnRight.bind(this),a=((e={})["(max-width: ".concat(m.XXS_BREAKPOINT,"px)")]={size:m.ENABLE_XXS_BREAKPOINT?"xxs":"xs",maxWidth:m.XXS_BREAKPOINT,columnLeft:n,columnRight:r,defaultColumnRight:0,columnRightSidebar:!0,support3pane:!1,supportWidget:!1,supportSticky:!1,supportHeadline:!0,supportComposeExtend:!1,forceShortcuts:!0,searchSuggestCount:3},e["(min-width: ".concat(m.XXS_BREAKPOINT,"px) and (max-width: 960px)")]={size:"xs",maxWidth:960,columnLeft:n,columnRight:r,defaultColumnRight:0,columnRightSidebar:!0,support3pane:!1,supportWidget:!1,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!1,forceShortcuts:!0,searchSuggestCount:3},e["(min-width: 960px) and (max-width: 1140px)"]={size:"s",maxWidth:1200,columnLeft:n,columnRight:r,adv160ColumnRight:40,defaultColumnRight:be(960),columnRightSidebar:!1,support3pane:!1,supportWidget:!1,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!1,forceShortcuts:!0,searchSuggestCount:3},e["(min-width: 1140px) and (max-width: 1200px)"]={size:"s",maxWidth:1200,columnLeft:n,columnRight:r,adv160ColumnRight:40,defaultColumnRight:be(1140),columnRightSidebar:!1,support3pane:!1,supportWidget:!1,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,forceShortcuts:!0,searchSuggestCount:5},e["(min-width: 1200px) and (max-width: 1260px)"]={size:"m",maxWidth:1260,columnLeft:n,columnRight:r,adv160ColumnRight:40,defaultColumnRight:be(1200),columnSidebar:70,columnRightSidebar:!1,support3pane:!0,supportWidget:!1,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,paymentDieWithIndentOn3Pane:!1,searchSuggestCount:5,forceShortcuts:function(e){return"3pane"===e.getType()}},e["(min-width: 1260px) and (max-width: 1420px)"]={size:"m",maxWidth:1420,columnLeft:n,columnRight:r,adv160ColumnRight3pane:40,defaultColumnRight:be(1260),columnSidebar:ve,columnRightSidebar:!1,support3pane:!0,supportWidget:function(e){return"3pane"!==e.getType()},supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,paymentDieWithIndentOn3Pane:!0,searchSuggestCount:5,forceShortcuts:function(e){return"3pane"===e.getType()}},e["(min-width: 1420px) and (max-width: 1600px)"]={size:"l",maxWidth:1600,columnLeft:n,columnRight:r,defaultColumnRight:be(1420),columnSidebar:ve,columnRightSidebar:!1,support3pane:!0,supportWidget:!0,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,paymentDieWithIndentOn3Pane:!0,searchSuggestCount:5},e["(min-width: 1600px) and (max-width: 1800px)"]={size:"l",maxWidth:1800,columnLeft:n,columnRight:r,defaultColumnRight:be(1600),columnSidebar:ve,columnRightSidebar:!1,support3pane:!0,supportWidget:!0,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,paymentDieWithIndentOn3Pane:!0,searchSuggestCount:5},e["(min-width: 1800px) and (max-width: 1920px)"]={size:"xl",maxWidth:1920,columnLeft:function(e){var n=t.getUiLayout();if(t.shortcutsEnabled())return t._getColumnLeft();if(n.ponyMode)return"3pane"===e.getType()?58:63;else return"3pane"===e.getType()?58:68},columnRight:r,defaultColumnRight:be(1800),columnSidebar:_e,columnRightSidebar:!1,support3pane:!0,supportSticky:!0,supportWidget:!0,supportHeadline:!0,supportComposeExtend:!0,paymentDieWithIndentOn3Pane:!0,searchSuggestCount:5},e["(min-width: 1920px) and (max-width: ".concat(m.MAX_LAYOUT_WIDTH,"px)")]={size:"xxl",maxWidth:m.MAX_LAYOUT_WIDTH,columnLeft:function(){var e=t.getUiLayout();if(t.shortcutsEnabled())return t._getColumnLeft();if(e.ponyMode)return 63;else return 68},columnRight:r,defaultColumnRight:be(1920),columnSidebar:100,columnRightSidebar:!1,support3pane:!0,supportWidget:!0,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,searchSuggestCount:5},e["(min-width: ".concat(m.MAX_LAYOUT_WIDTH,"px)")]={size:"xxl",maxBreakpoint:!0,maxWidth:1/0,columnLeft:function(){var e=t.getUiLayout();if(t.shortcutsEnabled())return t._getColumnLeft();if(e.ponyMode)return 63;else return 68},columnRight:r,defaultColumnRight:be(m.MAX_LAYOUT_WIDTH),columnSidebar:_e,columnRightSidebar:!1,support3pane:!0,supportWidget:!0,supportSticky:!0,supportHeadline:!0,supportComposeExtend:!0,paymentDieWithIndentOn3Pane:!0,searchSuggestCount:5},e),i={"(max-height: 670px)":{verticalSize:"s",searchSuggestCount:3},"(min-height: 670px) and (max-height: 800px)":{verticalSize:"l",searchSuggestCount:3},"(min-height: 800px)":{verticalSize:"l",searchSuggestCount:5}},o={},s=l(a);l(i).forEach((function(e){s.add(e)})),Object.keys(a).forEach((function(e){Object.keys(i).forEach((function(t){o["".concat(e," and ").concat(t)]=Object.assign({},a[e],i[t])}))})),this.media=o,this.mediaKeys=s}function l(e){return new Set(Object.values(e).flatMap(Object.keys))}},t}(p().Mediator),we=p().Mediator.createFromClass("layout-manager",Ce);t.default=we},74509:function(e,t,n){"use strict";n.d(t,{ei:function(){return i},zG:function(){return l},B1:function(){return u},uZ:function(){return p},Il:function(){return v},s0:function(){return _},N9:function(){return b},Zp:function(){return E}});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},a=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)if(t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a]))n[r[a]]=e[r[a]]}return n};function i(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})}var o=["left","sidebar","content","right"],s=["left","main","right"],l={left:15,main:150,sidebar:70,content:150,right:60},c=i(l,o),d=i(l,s),u={left:104,sidebar:1/0,content:1/0,main:408,right:60},f=i(u,o),m=i(u,s);function h(e){return Object.values(e).reduce((function(e,t){return e+t}))}function p(e,t,n){if(t<e)return e;if(t>n)return n;else return t}function g(e,t,n){var a,i,o=n.minSizes,s=n.maxSizes,l=n.priorityColumns,c=(a=e,i=function(e,t){if(!t)return o[e];else return p(o[e],t,s[e])},Object.keys(a).reduce((function(e,t){return e[t]=i(t,a[t]),e}),{})),d=r(r({},o),c);if(h(d)<=t)return d;var f=h(o);if(f>t)console.error("minSizes provided are not suitable for current width! ".concat(JSON.stringify({minSizes:o,availableWidth:t})));var m=r({},o),g=t-f;return(l||Object.keys(e)).concat(["right","content","main","sidebar","left"].filter((function(t){return!e.hasOwnProperty(t)}))).forEach((function(t){if(!(g<=0)){var n=p(o[t],e[t],Math.min(u[t],o[t]+g));m[t]=n,g-=n-o[t]}})),m}function v(e,t,n){var a={left:t.left(e.left)},i="3pane"===n?"content":"main";return a[i]=e[i]+(e.left-a.left),r(r({},e),a)}function _(e,t,n){if(void 0===n)n={};var s=n.minSizes,l=void 0===s?c:s,d=n.maxSizes,u=void 0===d?f:d,m=a(n,["minSizes","maxSizes"]);return g(i(e,["left","sidebar"]),t,r(r({},m),{minSizes:i(l,o),maxSizes:i(u,o)}))}function b(e,t,n){var r=void 0===n?{}:n,a=r.minSizes,o=void 0===a?d:a,l=r.maxSizes,c=void 0===l?m:l;return g(i(e,["left"]),t,{minSizes:i(o,s),maxSizes:i(c,s)})}function E(e,t,n){if(e<=t)return n;else return e}},67808:function(e,t,n){"use strict";n.d(t,{tK:function(){return r},wJ:function(){return a},gG:function(){return i},J7:function(){return o}});var r=4*n(21211).SHORTCUT_LEFT_COLUMN_LIMIT-7,a=80,i=100,o=["xxs","xs","s","m","l","xl","xxl"]},95437:function(e,t,n){"use strict";n.r(t);var r=n(60033),a=n.n(r),i=n(50987),o=n(54498),s=n(99150),l=n(52532),c=n(21211),d=n(18440),u=n.n(d),f=n(19008),m=n(12386),h=n(54901),p=n(72727),g=n(96596),v=n.n(g),_=n(32636),b=n.n(_),E=n(83407),y=n.n(E),T=n(48969),A=n.n(T),S=n(13548),O=n.n(S),C=n(98745),w=n.n(C),L=n(56553),k=n.n(L),I=n(88141),R=n.n(I),D=n(64854),M=n.n(D),P=n(91777),N=n.n(P),x=n(7087),F=n.n(x),U=n(4872),H=n.n(U),B=n(39783),Z=n.n(B),G=n(92042),q=n.n(G),j=n(15907),W=n(57147),V=n(90421),z=n(82855),Y=n(11532),K=n(29018),X=n(73173),Q=n(13624),J=n.n(Q),$=n(55674),ee=n(2335),te=n(50542),ne=n(74456),re=n(78267),ae=n(63062),ie=n(93286),oe=n(96384),se=n(98064),le=n(41542),ce=n(2418),de=n(93610),ue=n(59470),fe=n(48653),me=n(46276),he=n(43353),pe=n(6119),ge=n(41026),ve=n(47334),_e=n(64391),be=n(94716),Ee=n(20450),ye=n(16730),Te=n(37874),Ae=n(82609),Se=n(53485),Oe=n(39385),Ce=n(35108),we=n(90557),Le=function(){return(Le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},ke=0,Ie=["move","drop","remove","archive","spam","unspam","superspam","mark:readed","mark:allreaded","mark:unreaded","mark:flagged","mark:unflagged","mark:unpinned","togglestatus:unread","togglestatus:flagged","metathreadtogglestatus:unread","search:from","print","download","headers","newtab","forward","redirect","correspondent:search","click:letter","letter:prev","letter:next","confirmreceipt"],Re=["mark:readed","mark:unreaded","togglestatus:unread","mark:flagged","mark:unflagged","togglestatus:flagged","spam","unspam","move","remove","archive"],De="stay",Me="next",Pe="folder",Ne="search",xe={archive:function(){return i18n("Перемещено в архив")},"markas.flagged.true":function(){return i18n("Помечено флажком")},"markas.flagged.false":function(){return i18n("Снят флажок")},"markas.unread.true":function(){return i18n("Помечено непрочитанным")},"markas.unread.false":function(){return i18n("Помечено прочитанным")},"spam.true":function(e){if("number"==typeof e&&e>0){var t={count:e};return i18n.plural(e,[i18n("{count} писем перемещены в спам",t),i18n("{count} письмо перемещено в спам",t),i18n("{count} письма перемещены в спам",t)])}return i18n("Перемещено в спам")},"spam.false":function(){return i18n("Перемещено из папки «Спам»")},delete:function(){return i18n("Письмо удалено")},confirmreceipt:function(){return i18n("Прочтение подтверждено")},moveto:function(e){var t=e,n=i18n("Перемещено в папку"),r=(j.default.isLessThen("xs")?ae.default.MAX_LENGTH_SMALL:ae.default.MAX_LENGTH)-n.length-6;if(t.length>r)t=t.slice(0,Math.max(0,r-1))+"…";return"".concat(n," «").concat(t,"»")},"moveto.metathread.action":function(){return i18n("Невозможно переместить системную папку. Перенести остальные письма в спам?")},"moveto.metathread":function(){return i18n("Невозможно переместить системную папку")}};t.default=u().Mediator.create("letters-actions",{_isNavigateProcessing:!1,defaults:function(){var e=this;K.Z.on("mark:readed",(function(t){le.Z.subscribe((function(){e.doAction({type:"mark:readed",target:"thread-scroller"},[t])}))}))},actions:{spam:F(),mark:k(),move:M(),remove:O(),archive:b(),markAll:R(),moveAll:N(),removeAll:w(),archiveAll:y(),confirmreceipt:A()},components:{router:{class:J()},"nav-folders":{class:Te.Z,events:["move","drop"],handleEvent:"handleMoveTo"},"dataset-letters":{events:Ie,attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},octopus:{class:Ae.Z,events:["mark:allreaded"],attrs:{"read-all-in-progress":function(e){return e.readAllInProgress}}},"portal-menu":{class:Se.ZP,events:Ie,attrs:{readAllInProgress:function(e){return e.readAllInProgress}}},"webview-mobile-header":{class:Ce.Z,events:Ie},letter:{lazy:we.FV,events:Ie},dropdownActions:{class:he.Z,events:Ie},"letter-list-item":{class:pe.Z,events:Ie},"list-letter-common":{class:ve.Z,events:Ie,attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},"list-letter-common-touch":{events:Ie},"list-letter-compact":{events:Ie,attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},"list-letter-compact-touch":{events:Ie},"layer-move-to-folder":{events:["move"]},"layer-confirm-move-to-spam":{events:["spam:force","remove"]},thread:{class:Oe.Z,events:Ie,attrs:{direction:function(e){return e.direction}}},"contextmenu-message":{class:de.Z,events:Ie},"contextmenu-selection":{class:fe.Z,events:Ie},"contextmenu-metathread":{class:ue.Z,events:Ie},"contextmenu-correspondent":{class:ce.Z,events:Ie},"layer-create-folder":{lazy:we.j7,events:Ie},"list-nested-moveto-folder":{class:_e.Z,events:Ie},"metathread-head-common":{class:be.Z,events:["metathreadtogglestatus:unread"]},"metathread-head-compact":{class:Ee.Z,events:["metathreadtogglestatus:unread"]},"metathread-head-compact-expanded":{class:ye.Z,events:["metathreadtogglestatus:unread"]},"letter-meta":{class:ge.Z,events:["spam","remove","move"]},"discounts-item":{class:me.Z,events:Ie},"settings-dock":{},"letter-swipe-actions":{events:Ie}},handleMoveTo:function(e){var t=e.details,n={type:"move",folderTo:t.id},r=W.default.getModels();if(!r.length)return!1;var a=r[0].getFolder();if(a.isShareTake()||t.isShareTake()){var i=a.isShareTake()!==t.isShareTake()||a.get("owner").email!==t.get("owner").email,o=!t.checkGrant(H().SHARE_GRANTS.move)||!a.checkGrant(H().SHARE_GRANTS.move),s=t.isSpam()&&!a.checkGrant(H().SHARE_GRANTS.move_to_spam),l=t.isArchive()&&!a.checkGrant(H().SHARE_GRANTS.move_to_archive),c=t.isTrashLike()&&!a.checkGrant(H().SHARE_GRANTS.remove);if(i||o||s||l||c){var d=i?"betweenUsers":void 0;return se.Z.renderAccess({mode:se.Z.MODS.NOT_ENOUGH_RIGHTS,type:d,email:t.isShareTake()?t.get("owner").email:a.get("owner").email}),!1}}if(r.some((function(e){return e.getFolder().id!==n.folderTo||X.Z.isMetathread(e)})))v().wrap("moveTo",{folderTo:t},this.doAction(n,r));else(0,ie.ZP)("illegal_move"),v().add("illegal_move",{folderTo:t})},setReadAllInProgress:function(e){this.readAllInProgress=e,this.updateAll()},handleFolderAllRead:function(e){var t=this;if(void 0===e)e="";(0,ie.ZP)(["letter-action","all-read",e]),this.setReadAllInProgress(!0),R().execute({flag:"unread",state:!1,folderFrom:this.get("router.model.folder.id")}).then((function(){(0,ie.ZP)(["letter-action","all-read","success",e]),t.setReadAllInProgress(!1),ae.default.add({text:t.getNotifyText({name:"markas.unread.false",params:{}})})})).then((function(){var e=q().all.filter({folder:t.get("router.model.folder.id")}).toArray();t.hideUnsubscribeSender(e)})).catch((function(){(0,ie.ZP)(["letter-action","all-read","error",e]),t.setReadAllInProgress(!1)}))},handleEvent:function(e){var t,n,r,a=this,i=e.type,o=e.details,s=void 0===o?{}:o;if(this._isNavigateProcessing)return!1;var l=s.get&&s.attrs&&s.get("model")||s.model,c=s.get&&s.attrs&&s.get("actionCallback")||s.actionCallback;switch(i){case"letter:next":this.direction="next";break;case"letter:prev":this.direction="prev";break;case"click:letter":var d=W.default.getAllModels().indexOf(s);if(this.direction=null,this.prevIdx>-1)this.direction=d>=this.prevIdx?"next":"prev";this.prevIdx=d;break;case"correspondent:search":this.doSearch("from",s.email,l);break;case"mark:allreaded":var u=this.get("router.model.folder"),m="";if(u.isMetathread())m="metathread";if(u.isTrashLike())m="trash";if(u.isSpam())m="spam";if(m)return this.handleFolderAllRead(m),!1;var h=[];return h.push(u),re.default.open("confirm-folder-readed",{models:h},{dimmer:!0,compact:!0,resolvable:!0}).then((function(e){if("ok"===(void 0===e?{resolveType:"error"}:e).resolveType)a.handleFolderAllRead()})),!1;default:var p="2pane"===j.default.getType(),g=!!this.get("router.model.route.params.message"),v=this.get("router.model.route.params.message"),_=g?Z().all.get(v):this.get("router.model.letter"),b=W.default.getModels(),E=s.selection&&(!_||!p&&b.length),y=void 0;if(E)y="function"==typeof b.toArray?b.toArray():b;else y=l||_||[];var T=[].concat(y),A=void 0;if(T.length){var S={type:i,actionCallback:c,parentThread:s.parentThread};if("move"===i)S.folderTo=s.id;if("archive"===i)S.folderTo=null===(n=null===(t=H().all)||void 0===t?void 0:t.find((function(e){return e.isArchive()})))||void 0===n?void 0:n.get("id");if(i.startsWith("search:"))A=(0,f.WE)(l||_),this.doSearch(i,null===(r=null==A?void 0:A[0])||void 0===r?void 0:r.email,l);else if("forward"===i)this.doForward(T);else if("download"===i)this.doDownload(T[0]);else if("redirect"===i)this.doRedirect(T[0]);else if("newtab"===i)this.doNewTab(T[0]);else if("print"===i||"headers"===i)this.doNewTab(T[0],i);else this.doAction(S,T,E)}}},sendActionRadar:function(e,t,n){var r,a=this.get("router"),i=a.model.folder,o=n.replace(/:/g,"_"),s="on",c="";if(W.default.isFolderSelected()||e.models&&e.models.length>1)s="mass",r=!0;if(W.default.isFolderSelected())if(c="-all",i&&"remove"===o)if(i.isTrashLike())o="trash_clear",c="";else if(i.isSpam())o="spam_clear",c="";var d=[];if(void 0!==e.folderTo)d.push(["folder-to_".concat(e.folderTo),1]);if(void 0!==e.folderFrom)d.push(["folder-from_".concat(e.folderFrom),1]);if(void 0!==e.flag&&void 0!==e.state)d.push(["".concat(e.flag,"_").concat(e.state),1]);if(void 0!==e.spam)d.push(["spam_".concat(e.spam),1]);var u={};if(e.models.length&&Re.includes(n)){var f=e.models.length,m=0,h=0,p=0,g=0,v=0,_=0,b=0,E=!1;e.models.forEach((function(e){if(e instanceof q()||e instanceof Z()){if(e.get("flags.is_relevant"))h++;if(e.get("flags.is_relevant")&&e.get("flags.unread"))p++;if(e.get("flags.newsletter")&&e.get("flags.show_definitely_spam")&&e.get("flags.have_unsubscribe_list"))b++;if(e.get("flags.unread"))m++;if(e.get("flags.subject_has_emojis"))g++;if(e.get("flags.snippet_has_emojis"))v++;if(e.get("flags.sender_has_emojis"))_++;if((0,l.E)(a,i,e.get("flags.newsletter"),e.get("transaction_category")))E=!0}})),u.dwh={count:f,unread_priority_count:p,has_unread_priority_letters:p>0,has_letters_from_trusted_mailer:b>0,need_hide_emoji_in_subject:g>0,need_hide_emoji_in_snippet:v>0,need_hide_emoji_in_correspondent:_>0,letters_from_trusted_mailer_count:b,unread_count:m,priority_count:h,has_priority_letters:h>0,folder_id:i.get("id"),show_relevant:+E};var y=e.models[0];if(!r){u.dwh.message_id=e.models[0].get("id");var T=y.get("actual_probability");if(T)u.dwh.ml_model=T.split(":")[0];var A=y.get("flags.bimi_important_msg")||y.get("flags.bimi_msg"),S=y.get("flags.official")||y.get("flags.official_newsletter");if(A)u.dwh.isReliable=A;if(S)u.dwh.isOfficial=S;var O=a.route.is("#read-letter");u.dwh.read_letter=+O}}(0,ie.ZP)(Le({chain:[s,"action",o+c],intervals:d.length&&d},u))},doAction:function(e,t,n){for(var r=this,i=[],o=[],s=[],l=!1,d=!1,u=0;u<t.length;u++){if(t[u].get("flags.metathread"))i.push(t[u]);else o.push(t[u]);if(t[u].get("flags.show_definitely_spam"))l=!0;if(t[u].get("flags.have_unsubscribe_list"))s.push(t[u])}var f={models:o},h=this.get("router"),p=e.type;if("remove"===e.type&&!h.model.folder.isTrashLike())f.folderTo=c.TRASH_FOLDER_ID;else if("spam"===e.type)f.spam=!0,f.spamConfirm=l,s=c.SHOW_UNSUBSCRIBE_AFTER_SPAM?s:[];else if("spam:force"===e.type)e.type="spam",f.spam=!0;else if("unspam"===e.type)e.type="spam",f.spam=!1;else if("superspam"===e.type)e.type="spam",f.spam=!0,f.verified=!0;else if(e.type.startsWith("mark:")){if(/readed/.test(e.type))f.flag="unread";else if(/pinned/.test(e.type))f.flag="pinned";else f.flag="flagged";f.state=/:(unreaded|flagged)/.test(e.type),f.target=e.target,e.type="mark"}else if(e.type.startsWith("togglestatus:"))f.flag=e.type.split(":").pop(),f.state=!o[0].is("flags.".concat(f.flag)),e.type="mark";else if(e.type.startsWith("metathreadtogglestatus:")){f.flag=e.type.split(":").pop(),f.state=!i[0].is("flags.".concat(f.flag));var g=i[0].get("metathread_data.folder"),v=H().get(g),_=v&&!v.isSecureOpen(),b="unread"===f.flag&&!1===f.state&&v&&v.get("messages_unread")>10;if(!_&&!b)i[0].set("flags.".concat(f.flag),f.state);e.type="mark"}else if("move"===e.type){if(f.folderTo=e.folderTo,f.folderTo===H().SPAM.toString())f.spamConfirm=l,s=c.SHOW_UNSUBSCRIBE_AFTER_MOVE_TO_SPAM?s:[],d=!!i.length}else if("confirmreceipt"===e.type)f.model=t[0];else if("archive"===e.type)f.folderTo=e.folderTo;if(W.default.isFolderSelected()&&n)e.type+="All";f.folderFrom=h.model.folder.id,f.parentThread=e.parentThread,this.sendActionRadar(f,e,p),z.Z.reset(),W.default.reset();var E=H().get(f.folderFrom),y=H().get(String(f.folderTo)),T=[],A=[],S="moveAll"===e.type||"removeAll"===e.type,O="removeAll"===e.type,C=!1,w=!1;if(!c.LAYER_CONFIRM_FOLDER_CLEAR.disable)C=S&&c.LAYER_CONFIRM_FOLDER_CLEAR[E.get("type")]&&(null==y?void 0:y.isTrashLike()),w=O&&c.LAYER_CONFIRM_FOLDER_CLEAR[E.get("type")]&&E.isTrashLike();else C=S&&E.isInbox()&&y.isTrashLike();if(o.length){if(C)e.type="moveAll",T.push(E);if(w)e.type="removeAll",T.push(E);var L=e.type;if("remove"===L){var k=e.actionCallback?!0:!!i.length;this.pushRemoveActions(A,o,f,{silent:k,actionCallback:e.actionCallback})}else A.push((function(){r.executeAction(L,f,o,{silent:!d&&!!i.length})}))}if(d){var I=i.map((function(e){return(0,m.u)(e)}));return(0,ie.ZP)({type:"notify-moveto-spam-metathread-show",dwh:{names:I,letters:o.length,with_action:!0===c.METATHREAD_MOVE_TO_SPAN_NOTIFY}}),this._showDisableMoveToSpamNotify(Le(Le({},f),{actionType:e.type}),A,s)}if(!e.type.endsWith("All")&&i.length)e.type+="All";for(var R=[],D=0,M=i;D<M.length;D++){var P=M[D],N={};Object.assign(N,f),delete N.models,N.folderFrom=P.get("metathread_data.folder"),R.push(N)}if(R.length){if(("moveAll"===e.type||"removeAll"===e.type)&&y.isTrashLike())e.type="moveAll",R.forEach((function(e){T.push(H().get(e.folderFrom))}));A.push((function(){R.forEach((function(t,n){return r.executeAction(e.type,t,[],{silent:!!n})}))}))}if(!T.length)this._executeWithSpamCheck(Le(Le({},f),{actionType:e.type}),A,s);else re.default.open("confirm-folder-clear",{action:e,models:T},{dimmer:!0,compact:!0,mobile:j.default.isLessThen("xs")}).then((function(e){e.on("success",(function(){A.forEach((function(e){return e()})),i.forEach((function(e){e.set("_metathreadExpanded",!1)})),e.broadcast("layer:close"),a().send("folder-clear-success")}))}))},_executeWithSpamCheck:function(e,t,n){if(!e.spamConfirm||!c.SHOW_DEFINITELY_SPAM)t.forEach((function(e){return e()}));else this._manageSpamLayer(e,n)},_manageSpamLayer:function(e,t){if(void 0===t)t=[];var n=t.length?"unsubscribe":"confirm";(0,ie.ZP)({type:"layer-confirm-move-to-spam_open",dwh:{type:n,action_type:e.actionType}}),re.default.open("confirm-move-to-spam",{models:e.models,actionType:e.actionType,unsubscribeModels:t,type:n},{dimmer:!0,"dimmer-color":"transparent",compact:!0,resolvable:!0,mobile:j.default.isLessThen("xs"),"reject-on-close":!0}).catch((function(e){if(e)(0,ie.ZP)({type:"confirm-move-to-spam-error",i:{type:n},skipdwh:!0})}))},_showDisableMoveToSpamNotify:function(e,t,n){var r=this;if(c.METATHREAD_MOVE_TO_SPAN_NOTIFY&&t.length){var a=!1,i=ae.default.add({text:this.getNotifyText({name:"moveto.metathread.action",params:{}}),actions:[{text:i18n("Переместить")}],duration:c.METATHREAD_MOVE_TO_SPAN_NOTIFY_DURATION,inline:!1,qa:"notify-moveto-spam-metathread-action"});null==i||i.on("action",(function(){a=!0,(0,ie.ZP)({type:"notify-moveto-spam-metathread"}),i.close()})),null==i||i.on("closed",(function(){if(a)r._executeWithSpamCheck(e,t,n)}))}else ae.default.add({text:this.getNotifyText({name:"moveto.metathread",params:{}}),qa:"notify-moveto-spam-metathread"})},pushRemoveActions:function(e,t,n,r){var a=this,i=[],o=[];if(t.forEach((function(e){if(e.getFolder().isTrashLike())i.push(e);else o.push(e)})),o.length)e.push((function(){a.executeAction("move",Le(Le({},n),{folderTo:c.TRASH_FOLDER_ID,models:o}),o,r)}));if(i.length)e.push((function(){a.executeAction("remove",Le(Le({},n),{models:i}),i,r)}))},openSecureFolderIfNeeded:function(e){if(void 0!==e.folderTo)return H().findOne(e.folderTo).then((function(e){if(!e.isSecureOpen())return(0,oe.Z)(e);else return!0})).then((function(e){if(!e)return Promise.reject()}));else return Promise.resolve()},optimisticNavigate:function(e,t,n,r){var a,i=this,o=this.get("router").request,s=["mark","markAll"].includes(e),l="confirmreceipt"===e,c=this.get("router.model.letter"),d=o.route.is("#search #search-letter");if(!n.length&&!d||!c)return!1;if(!n.length&&d){if(r.some((function(e){return o.params.id===e.id})))a=c}else a=n.find((function(e){return e.id===c.id}));if(!a)return!1;if(!s&&r&&1===r.length&&!(r[0]instanceof q())){if(a.get("messages").filter((function(e){return e.getFolder()===a.getFolder()})).length>1)t.action=De;else a.destroy()}if(!o.route.is("#read-letter #search-letter")||s||l)return!1;else return this.doNavigateAction(t).catch((function(e){return i.onActionFail(e)})),!0},executeAction:function(e,t,n,r){var a=this;if(void 0===r)r={silent:!1};if(this._isNavigateProcessing)return Promise.resolve();var i=this.getThreads(n),l=this.getNavigationPlan(n,i),c=this.optimisticNavigate(e,l,i,n);return Promise.resolve().then((function(){return a.openSecureFolderIfNeeded(t)})).then((function(){return s.default.dispatch({type:o.EXECUTE_JSSDK_ACTION,action:a.actions[e],uid:ke++,params:t})})).then((function(e){if(null!==e&&null!==e.jssdkAction.result)return(null==r?void 0:r.actionCallback)&&(null==r||r.actionCallback(e.jssdkAction)),a.onActionDone(e.jssdkAction,i,r,c)}),(function(e){var t;(0,ie.ZP)({type:"letter-action-failure",rlog:"letter-action-failure",rlog_message:{logScope:JSON.stringify(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.logScope)}})})).then((function(){ee.default.updateOnAction()})).catch((function(e){return a.onActionFail(e)}))},onActionDone:function(e,t,n,r){var a,i,l,c=this,d=this.get("router").request,u=e.models,f="mail.MarkAs"===e.name||"mail.MarkAsAll"===e.name||"mail.ConfirmReceipt"===e.name,m=e.name.endsWith("All"),h=!0;if(f&&e.models&&e.models.length<2)h=!1;if("mail.Delete"===e.name||m||"mail.ConfirmReceipt"===e.name)h=!1;if((null===(a=H().all.get(e.params.folderFrom))||void 0===a?void 0:a.isShareTake())&&("mail.MoveTo"===e.name&&(null==e?void 0:e.folderTo.isTrashLike())||"mail.Archive"===e.name||"mail.Spam"===e.name))h=!1;var p=!0;if(n.silent||u&&u.length<2&&"mail.MarkAs"===e.name)p=!1;if(!f)W.default.cleanSelection("mail.Delete"===e.name);else if(f&&!d.route.is("#search #search-letter")&&d.params.folder!=e.params.folderFrom&&m)W.default.reset();if("mail.Delete"===e.name||"mail.MoveTo"===e.name||"mail.Spam"===e.name||"mail.Archive"===e.name){var g=(u||[]).filter((function(e){return e instanceof q()})),v=(u||[]).filter((function(e){return!(e instanceof q())})),_=null===(i=e.params)||void 0===i?void 0:i.parentThread,b=1===v.length&&0===g.length,E=_&&(null===(l=_.get("messages"))||void 0===l?void 0:l.length)<=1,y="mail.Delete"===e.name||"mail.Spam"===e.name&&e.params.spam||"mail.MoveTo"===e.name&&(e.params.folderTo==H().TRASH||e.params.folderTo==H().CHILD_TRASH),T=d.route.is("#search #search-letter");if((!b||E||y)&&!T||y&&T)s.default.dispatch({type:o.DESTROY_THREADS_AND_MESSAGES,models:{threads:g,messages:v}})}if(("mail.Delete"===e.name||"mail.MoveTo"===e.name||"mail.Archive"===e.name||"mail.Spam"===e.name)&&d.route.is("#search-letter"))s.default.dispatch({type:o.UPDATE_SEARCH});var A=this._isAutoMoveVisible(e);if(!r)s.default.updateAll();Promise.resolve().then((function(){if(p){var t={text:c.getNotifyText(e),actions:h?[{text:i18n("Отменить")}]:[],shortcut:h?"ctrl+z|command+z: 'action'":null};if(A)t.actions.unshift({text:i18n("Перемещать автоматически"),event:"createfilter"}),t.direction="bottom";var n=ae.default.add(t);if(h&&n)n.on("action",(function(t){if("createfilter"===t.details)V.default.openCreateFilter({models:e.models,move:+e.folderTo.id});else n.close(),e.undo().then((function(){return c.onActionUndo(e)}))}))}})).then((function(){if(f){var t=e.params,n=t.models,r=t.flag,a=t.state;if("unread"===r&&!1===a)c.hideUnsubscribeSender(n)}})).catch((function(){return c.onActionFail(e)}))},doSearch:function(e,t,n){var r,a=this.get("router"),i=((r={})["q_"+e.split(":").pop()]=t,r);if(n&&n instanceof Z()){var o=n.getFolder();if(o.isShareTake()){var s=o.getServiceSharedParent();if(null==s?void 0:s.get("id"))i.q_folder=s.get("id")}}a.go("#search",{},i)},getLetterUrl:function(e,t){return this.get("router").getUrl("#!septimaReadmsg",{letterId:e.get("expand")||e.get("id"),folderId:e.get("folder"),mod:t})},doNewTab:function(e,t){(0,p.default)(this.getLetterUrl(e,t))},doForward:function(e){var t=this.get("router.route.params.part");if(e.reduce((function(e,t){return e+t.get("length")||1}),0)>50)ae.default.add({type:ae.default.types.error,text:i18n("Можно переслать не более {count} писем. Возможно, вы выделили цепочки, поэтому писем слишком много.",{count:50}),inline:!1});else{var n=e.map((function(e){if(e instanceof q())if(t)return e.get("messages")[0].fetch();else return e.fetch({offset:0,limit:50});else return e.fetch()}));Promise.all(n).then((function(e){var t=e.reduce((function(e,t){if(t instanceof q())t.get("messages").forEach((function(t){e.push(t)}));else e.push(t);return e}),[]),n=function(){var e=t.map((function(e){return{id:e.get("id"),folder:e.get("folder"),name:(e.get("subject")||"Untitled")+".eml",size:e.get("size"),n:[]}}));te.default.open({mode:"new",forward:e})},r=function(){var e=[];if(!t.some((function(t){var n=t.getFolder(),a=n.isSecureOpen();if(a){if(t.is("flags.secure"))e.push(t)}else(0,oe.Z)(n).then((function(e){if(e)r()}));return!a})))Promise.all(e.map((function(e){return e.fetch()}))).then(n)};r()}))}},doRedirect:function(e){re.default.open("letter-redirect",{model:e},{dimmer:!0,compact:!0}).then((function(e){e.on("success",(function(){e.broadcast("layer:close")}))}))},doDownload:function(e){location.href=this.getLetterUrl(e,"download")},_isAutoMoveVisible:function(e){var t=e.folderTo;if(!t)return!1;if(j.default.isLessThen("xs"))return!1;else return!c.FORBID_FILTERS&&"mail.MoveTo"===e.name&&(t.isMetathread()||!(t.isSystem()||t.isArchive()))&&!t.isShareTake()},onActionUndo:function(){s.default.updateAll()},onActionFail:function(e){var t=!0,n=!1;if(e&&e.error&&"cancel"===e.error.by)t=!1;if(e&&e.error&&!e.error.body)n=!0;if(e&&t)(0,ne.Z)("trackJS").then((function(t){return t.addErrorFromApp(e.error,"octavius_lt-actions_err")})),ae.default.add({type:ae.default.types.error,text:i18n("Что-то пошло не так!"),unique:n})},getThreads:function(e){var t=this.get("router").request.route;if(!e.length)return e;if(e[0]instanceof q())return e;if(t.is("#search #search-letter"))return[];var n=this.getCurrentFolder();return e.map((function(e){return q().getListByMessageId(e.id).find((function(e){return(0,h.Zh)(e).id==n}))})).filter((function(e){return e}))},getCurrentFolder:function(){return this.get("router").route.params.folder},getNavigationPlan:function(e,t){var n,r=this.getCurrentFolder(),a=this.get("router"),o=a.request.params.message,s=a.request.route,l=a.model.letter,c=i.Z.get("initialUser.messages.after_delete");if("msglist"===c&&s.is("#read-letter"))return{action:Pe,folder:r};if("msglist"===c&&s.is("#search-letter"))return{action:Ne};if(!e.length)return{action:Pe,folder:r};if(!(1!==e.length||e[0]instanceof q()||t[0]||s.is("#search #search-letter")))return{action:Pe,folder:r};if(t.length>1)return{action:Pe,folder:r};if(l&&$.Z.has()){for(var d=a.model.letters,u=d.indexOf(l);d[u]&&u<d.length;)if(d[++u]&&$.Z.isLetterInFilter(d[u])){n=d[u].id;break}}else if(l&&!o){var f=this.get("router.model.letterNeighbours");n=f&&f.next&&(f.next.id||f.next.threadId)}if(!n)if(s.is("#search-letter"))return{action:Ne};else return{action:Pe,folder:r};return{action:Me}},doNavigateAction:function(e){var t=this;this._isNavigateProcessing=!0;var n=this.get("router"),r=Promise.resolve();switch(e.action){case De:break;case Me:r=Y.Z.goToLetter("next");break;case Ne:r=n.go("#search",{},"inherit");break;case Pe:r=n.go("#letters",{folder:e.folder,preserveFilters:!0})}return r.then((function(){t._isNavigateProcessing=!1})).catch((function(e){return t._isNavigateProcessing=!1,Promise.reject(e)}))},getNotifyText:function(e){var t=e.name.replace("mail.","").toLowerCase(),n=e.params,r=H().get(n.folderTo),a=r&&r.get("name")||"",i=t;if(t.endsWith("all"))i=i.replace("all","");switch(i){case"markas":i+=".".concat(n.flag,".").concat(n.state);break;case"spam":i+=".".concat(n.spam),a=e.params.models.length}var o=xe[i];return o&&o(a)},hideUnsubscribeSender:function(e){var t,n;if(Array.isArray(e)){var r=this.get("router.model.unsubscribeList"),a=null==r?void 0:r.actualSenders;if(a){for(var i=r.hidden,l=[],c=function(e){var r=null===(n=null===(t=(0,f.WE)(e,"from"))||void 0===t?void 0:t[0])||void 0===n?void 0:n.email;if(!!r&&!!a.find((function(e){return e.sender===r}))&&!(null==i?void 0:i.includes(r)))l.push(r)},d=0,u=e;d<u.length;d++){c(u[d])}if(l.length)s.default.dispatch({type:o.HIDE_UNSUBSCRIBE_SENDER,senders:l})}}}})},46655:function(e,t,n){"use strict";var r;n.d(t,{G:function(){return r}}),function(e){e.onBottom="scroll:onbottom",e.loadMore="lettersloader:loadmore"}(r||(r={}))},82646:function(e,t,n){"use strict";n.r(t),n.d(t,{MarusiaManager:function(){return u},MARUSIA_IN_WIDGET:function(){return m}});var r,a=n(21211),i=n(18440),o=n.n(i),s=n(52950),l=n(90557),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.marusiaGetParams=!1,t}return c(t,e),t.prototype.getComponentsSpec=function(){return{"marusia-read-letter-button":{class:s.Z,events:["marusia:read:letter:click"]},letter:{lazy:l.FV,attrs:{"marusia-portal-enabled":function(e){return e.isMarusiaInPortalEnabled()}}},"themes-widget-souzmultfilm":{lazy:l.fY,events:["marusia:start:command","marusia:open"],attrs:{"marusia-portal-enabled":function(e){return e.isMarusiaInPortalEnabled()}}},WidgetHeader:{attrs:{marusiaGetParams:function(e){return e.marusiaGetParams}}},MarusiaIframe:{attrs:{marusiaGetParams:function(e){return e.marusiaGetParams}}}}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details,r=void 0===n?{}:n;if("marusia:read:letter:click"===t)return this.readLetter(r.model);if("marusia:start:command"===t)return this.startWithCommand(r.command);if("marusia:open"===t)return this.openMarusia(r.getParams);else return},t.prototype.isMarusiaInPortalEnabled=function(){var e,t;return!a.DISABLE_MARUSIA_IN_PORTAL&&!!(null===(t=null===(e=window.__PH)||void 0===e?void 0:e.isMarusiaMenuEnabled)||void 0===t?void 0:t.call(e))},t.prototype.openMarusia=function(e){var t,n;if(void 0===e)e={};if(!m)null===(n=null===(t=window.__PH)||void 0===t?void 0:t.marusiaMenu)||void 0===n||n.show(e);else this.marusiaGetParams=e},t.prototype.subGetParams=function(e){return d(d({},a.MARUSIA_SKILLSERVER_TEST&&{skillserver_type:"mailskill"}),e&&{timestamp:Date.now()})},t.prototype.readLetter=function(e){var t=e.get("id"),n=d({start_with_event:"read_single_message_event",intent_data:JSON.stringify({uidl:t})},this.subGetParams(!0));this.openMarusia(n)},t.prototype.mailCheckStatus=function(){var e=d({start_with_event:"mail_check_status_event"},this.subGetParams(!0));this.openMarusia(e)},t.prototype.startWithCommand=function(e){var t=d({start_with_command:e},this.subGetParams(!0));this.openMarusia(t)},t}(o().Mediator),f=o().Mediator.createFromClass("marusia-manager",u),m=f.isMarusiaInPortalEnabled()&&a.HAS_WIDGET_HEADER_TYPE;t.default=f},40803:function(e,t,n){"use strict";var r=n(15984),a=n(21211),i=n(18440),o=n.n(i),s=n(25403),l=n(4872),c=n.n(l),d=n(1745),u=n(13624),f=n.n(u),m=n(75273),h=n(93286),p=n(17865),g=n(57986),v=n(82609),_=n(60319),b=n(13839),E=n(32849);t.Z=o().Mediator.create("search-manager",{defaults:function(){this._lazyReactionSetup=!1},components:{router:{class:f(),events:["beforeroute","routeend"]},"search-panel":{class:_.Z,events:["search-panel:focus","search-panel:blur","back"],attrs:{active:function(e){return e.isActive()}}},"sidebar-folders":{class:b.Z,attrs:{hideComposeBtn:function(e){return e.isActive()&&a.HIDE_HEADLINE&&a.NEW_TOOLBAR}}},"search-mobile-panel":{events:["searchpanel:focus","searchpanel:blur","back"],attrs:{active:function(e){return e.isActive()},searching:function(e){return e.isSearchRoute()}}},"sidebar-search":{class:E.Z,events:["search-sidebar:focus"]},octopus:{class:v.Z,events:["search:set-in-excluded-folders"],attrs:{"show-search-in-excluded-folders":function(e){return e.shouldSuggestExcludedFolders()},"search-in-excluded-folders-url":function(e){return e.getInExcludedFoldersUrl()},"search-has-operands":function(e){return e.hasOperands()}}},"list-letter-search-action":{class:g.Z,events:["search:set-in-excluded-folders"]},"dataset-letters":{events:["click:letter"],attrs:{"search-in-excluded-folders":function(e){return e.isInExcludedFolders()},"search-in-excluded-folders-url":function(e){return e.getInExcludedFoldersUrl()},"search-has-operands":function(e){return e.hasOperands()}}}},handleEvent:function(e){var t,n=e.type,i=this.get("router"),o=this.components["search-panel"][0];switch(n){case"click:letter":this.sendSearchPositionRadar(e);break;case"searchpanel:focus":this._isFocused=!0;break;case"searchsidebar:focus":return o.focus(),!1;case"searchpanel:blur":this._isFocused=!1;break;case"search:setinexcludedfolders":var s=e.details,l=(0,r.bh)(),c=l&&l.search;if(c)c.setInExcludedFolders(s);break;case"beforeroute":if(i.route.is("#search"))(0,m.Gv)("exp_id"),(0,m.Gv)("search_query");break;case"routeend":if(i.route.is("#search")){if(a.ADV_SEARCH_EXP_ID)(0,m.Fz)("exp_id",a.ADV_SEARCH_EXP_ID);var d=i.request.query.q_query;if(a.ADV_SEARCH_SEND_QUERY&&d)(0,m.Fz)("search_query",d)}break;case"back":if(null===(t=null==o?void 0:o.reset)||void 0===t||t.call(o),i.route.is("#search #search-letter"))i.go("#letters")}},getSearch:function(){var e=(0,r.bh)();return e&&e.search},isActive:function(){var e=this.get("router"),t=this.getSearch(),n=!t||t.empty;if(e.route.is("#search"))return!0;else if(e.route.is("#search-letter"))return a.SEARCH_PANEL_PORTAL||this._isFocused||this.isLoading();else return this._isFocused||!n},isSearchRoute:function(){return this.get("router").route.is("#search")},isLoading:function(){var e=this,t=this.getSearch();if(t&&!this._lazyReactionSetup)this._lazyReactionSetup=!0,(0,d.reaction)((function(){return t.progress}),(function(){e.updateAll()}));return t&&t.progress},isInExcludedFolders:function(){var e=this.getSearch();return e&&e.in_excluded_folders},shouldSuggestExcludedFolders:function(){if(a.FORBID_EXCLUDED_FOLDERS_SEARCH)return!1;var e=this.getSearch();if(!e)return!1;if(this.isInExcludedFolders())return!1;var t=e.currentMailbox;if(e.isMyMailboxSelected)return!0;else return c().all.toArray().some((function(e){var n;return e.isShareTake()&&(null===(n=e.get("owner"))||void 0===n?void 0:n.email)===t.email&&(e.isSpam()||e.isTrash())}))},getInExcludedFoldersUrl:function(){var e=this.getSearch(),t=Object.assign({},e.routerQuery);t[p.Yz.IN_EXCLUDED_FOLDERS]=1;var n=f().queryString.stringify(t);return"?".concat(n)},hasOperands:function(){var e=this.getSearch();return!(!e||!e.hasOperands)},sendSearchPositionRadar:function(e){var t=this.get("router");if(t.route.is("#search")){var n=e.details&&e.details.index||0,r=Math.floor(Date.now()/1e3),i=t.model.search,o=i.search_id,l=i.doneRelevantSearch;(0,h.ZP)({chain:["search_letter_click"],value:n});var c=a.RELEVANT_SEARCH;if(c.group){var d=l?[["suc",n]]:void 0,u=l?l.group:c.group;(0,h.ZP)({chain:["search_position_g_".concat(u)],intervals:d,value:n})}var f=(0,s.i)(t.model.search,n);(0,h.ZP)({chain:["search_position"],intervals:f,dwh:{search_id:o,timestamp:r}})}}})},19352:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r,a=n(17717),i=n.n(a),o=n(60033),s=n.n(o),l=n(54498),c=n(97899),d=n(21211),u=n(18440),f=n.n(u),m=n(69832),h=n.n(m),p=n(4183),g=n(72727),v=n(4872),_=n.n(v),b=n(36889),E=n.n(b),y="cleanmailbox:open",T=n(13624),A=n.n(T),S=n(39939),O=n(78267),C=n(63062),w=n(47759),L=n(93286),k=n(84427),I=n(90926),R=n(46637),D=n(58730),M=n(37874),P=n(59193),N=n(10154),x=n(90557),F=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U=function(){return(U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},H={help3pane:d.HELP_3PANE,threads:d.HELP_THREADS,metathreads:d.HELP_METATHREADS,"to-myself":d.HELP_TO_MYSELF,paginator:d.HELP_PAGINATOR},B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._metathreadsFiltersCountLoading=!1,t}return F(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:A()},"settings-dock":{events:["threads:toggle","metathreads:settings:updated","help:open","metathreads:filters:create","metathreads:filters:update","logs:click","support_vk:click","settings:close",y],attrs:{userLang:function(){return d.USER_LANG},threads:function(e){return e.get("router.model.uiThreadsSettings").threads},metathreadsData:function(e){return e.getMetathreadsData()},metathreadsFiltersCount:function(e){return e.getMetathreadsFiltersCount()},metathreadsFiltersCountLoading:function(e){return e.getMetathreadsFiltersCountLoading()}}},useUserLang:{attrs:{userLang:function(){return d.USER_LANG}}},settings:{class:P.Z,events:["settings:click","settings:open"]},filters:{class:R.Z,events:["help:open","settings:click","threads:toggle","metathreads:toggle","notifications:click","cleanmaster:click","logs:click","language:click","tomyself:toggle","paginator:toggle","priority:messages:toggle","metathreads:settings:open"],attrs:{threads:function(e){return e.get("router.model.uiThreadsSettings").threads},metathreadsSettings:function(e){return e.get("router.model.uiThreadsSettings").metathreadsSettings},"to-myself":function(e){return e.get("router.model.uiThreadsSettings").toMyself},"can-toggle-paginator":function(e){return(0,c.Kb)(e.get("router"))},"help-links":function(){return H},"hide-help":function(){return d.SETTINGS_DROPDOWN_HIDE_HELP},"hide-metathreads":function(){return d.HIDE_METATHREADS},"hide-to-myself":function(){return d.SETTINGS_DROPDOWN_HIDE_TO_MYSELF}}},"layer-metathreads-settings":{lazy:x.xv,events:["metathreads:settings:open","metathreads:settings:updated","metathreads:filters:create","metathreads:filters:update","help:open"],attrs:{metathreadsData:function(e){return e.getMetathreadsData()},metathreadsFiltersCount:function(e){return e.getMetathreadsFiltersCount()},metathreadsFiltersCountLoading:function(e){return e.getMetathreadsFiltersCountLoading()}}},"nav-folders":{class:M.Z,events:["settings:click"]},"category-feedback":{class:I.Z,attrs:{metathreads:function(e){return e.get("router.model.uiThreadsSettings").metathreads}}},letter:{lazy:x.FV,attrs:{metathreads:function(e){return e.get("router.model.uiThreadsSettings").metathreads}}},"settings-help-link":{class:N.Z,events:["help:open"]},"mobile-sidebar":{class:D.Z,events:["settings:click"]}}},t.prototype.handleEvent=function(e){switch(e.type){case"settings:open":this.onSettingsDockOpen();break;case"settings:close":this.onSettingsDockClose();break;case"help:open":this.onHelpOpen(e.details);break;case"metathreads:filters:create":this.onCreateFilter();break;case"metathreads:filters:update":this.updateFilter();break;case y:this.onSettingsDockCleanmailboxOpen();break;case"settings:click":this.onSettingsClick();break;case"notifications:click":this.onNotificationsClick();break;case"cleanmaster:click":this.onCleanmasterClick();break;case"logs:click":(0,x.L3)().then((function(e){e.sendLogs()}));break;case"language:click":this.onLanguageClick();break;case"threads:toggle":return this.onThreadsToggle(e.details),!1;case"metathreads:toggle":return this.onMetaThreadsToggle(e.details),!1;case"tomyself:toggle":return this.onToMyselfToggle(),!1;case"paginator:toggle":return this.onPaginatorToggle(),!1;case"metathreads:settings:open":this.onMetathreadsSettingsOpen(e.details);break;case"support_vk:click":this.onHelpVK()}},t.prototype.onSettingsDockClose=function(){var e=this.get("settings-dock");null==e||e.set({show:!1,startSection:"appearance"}),w.default.update()},t.prototype.onSettingsDockOpen=function(){var e=this.get("settings-dock");null==e||e.set({show:!0}),w.default.update()},t.prototype.onSettingsMetathreadsOpen=function(){var e=this.get("settings-dock");null==e||e.set({show:!0,startSection:"metathreads"})},t.prototype.onSettingsDockCleanmasterOpen=function(){var e=this.get("settings-dock");null==e||e.set({show:!0,startSection:"cleanmaster"})},t.prototype.onSettingsDockAppearanceOpen=function(){var e=this.get("settings-dock");null==e||e.set({show:!0,startSection:"appearance"})},t.prototype.onSettingsDockCleanmailboxOpen=function(){var e=this.get("settings-dock");null==e||e.set({show:!0,startSection:"cleanmailbox"})},t.prototype.onSettingsDockBrowserSettingsOpen=function(){var e=this.get("settings-dock");null==e||e.set({show:!0,startSection:"browsersettings"})},t.prototype.onCleanmasterClick=function(){(0,g.default)(d.CLEANMASTER_URL)},t.prototype.onHelpOpen=function(e){if("string"!=typeof e)(0,g.default)(d.HELP_URL);else(0,g.default)(H[e])},t.prototype.updateFilter=function(){var e=this;this._metathreadsFiltersCountLoading=!0,(0,p.default)({type:l.UPDATE_METATHREAD_FILTERS,uid:void 0}).then((function(){e._metathreadsFiltersCountLoading=!1}))},t.prototype.onCreateFilter=function(){O.default.open("edit-settings-filter",{filterModel:(new(h())).toJSON()},{dimmer:!0})},t.prototype.getMetathreadsFiltersCountLoading=function(){return this._metathreadsFiltersCountLoading},t.prototype.getMetathreadsFiltersCount=function(){return this.get("router.model.uiThreadsSettings").metathreadsFiltersCount},t.prototype.onMetathreadsSettingsOpen=function(e){var t=!!this.get("router.model.folders").find((function(e){return e.isNews()})),n=U(U({},e),{newsMetathreadFolder:t});O.default.open("metathreads-settings",n,n)},t.prototype.onNotificationsClick=function(){(0,g.default)(d.NOTIFICATIONS_URL)},t.prototype.onSettingsClick=function(){(0,g.default)(d.SETTINGS_URL)},t.prototype.onThreadsToggle=function(e){var t=e&&e.from,n=!this.get("router.model.uiThreadsSettings").threads;(0,L.ZP)({type:"threads-toggle-".concat(n?"on":"off"),intervals:[["".concat(t),1]]}),(0,p.default)({type:l.TOGGLE_THREADS_SETTING,uid:void 0})},t.prototype.onMetaThreadsToggle=function(e){var t=e&&e.from,n=!this.get("router.model.uiThreadsSettings").metathreads;if((0,L.ZP)({type:"metathreads-toggle-".concat(n?"on":"off"),intervals:[["".concat(t),1]]}),!n&&d.METATHREADS_FORCED_EXP)(0,L.ZP)({type:"metathreads-forced-exp-off",dwh:{group:d.METATHREADS_FORCED_EXP.split("|")[0],folder:"folder"}});(0,p.default)({type:l.TOGGLE_METATHREADS_SETTING,uid:void 0})},t.prototype.onLanguageClick=function(){O.default.open("change-language",{currentLang:d.USER_LANG},{dimmer:!0,compact:!0,resolvable:!0,"reject-on-close":!0}).then((function(e){var t=void 0===e?{resolveType:"error",lang:d.USER_LANG}:e,n=t.resolveType,r=t.lang;if("ok"===n&&d.USER_LANG!==r)S.default.user.save("lang",r).then((function(){(0,L.ZP)(["settings-manager","save-lang",r]),window.location.reload()})).catch((function(){(0,L.ZP)(["settings-manager","save-lang-error"])}))})).catch((function(e){if(e)throw e}))},t.prototype.onToMyselfToggle=function(){var e=this;if(!this.get("router.model.uiThreadsSettings").toMyself)return(0,p.default)({type:l.TOGGLE_TO_MYSELF_METATHREAD,state:!0,uid:void 0}),void(0,L.ZP)({type:"tomyself-enable",intervals:[["settings",1]]});var t=this.get("router.model.folders").find((function(e){return e.isToMyself()}));if(!t)return(0,L.ZP)("tomyself-disable-no-folder"),void C.default.error({unique:!0});var n=function(){if((0,p.default)({type:l.TOGGLE_TO_MYSELF_METATHREAD,state:!1,uid:void 0}),(0,L.ZP)({type:"tomyself-disable",intervals:[["settings",1]]}),e.get("router.model.folder.id")===t.id){e.get("router").go("#letters",{folder:_().TYPE_INBOX})}};if(d.LAYER_METATHREAD_DISABLE)O.default.open("disable-metathread",{model:t},{dimmer:!0,resolvable:!0,"close-on-dimmer":!0,"reject-on-dimmer":!0,"close-on-esc":!1,"reject-on-close":!0}).then((function(){n()})).catch((function(e){if(e)throw e}));else n()},t.prototype.onPaginatorToggle=function(){var e=!this.get("router.model.uiThreadsSettings").paginator;(0,p.default)({type:l.TOGGLE_PAGINATOR,state:e,uid:void 0}),(0,L.ZP)({type:"paginator-".concat(e?"enable":"disable"),intervals:[["settings",1]]})},t.prototype.isNewsShown=function(){var e=i().get("news-subscription-badge");return e&&e.isActive()},t.prototype.onDiscountsToggle=function(e){var t=this;return s().send("discounts_switch_".concat(e),{i:{"from-popup":1}}),(0,p.default)({type:l.TOGGLE_DISCOUNTS,state:e,uid:void 0}).then((function(){t.updateAll()}))},t.prototype.isMetathreadOff=function(e){var t=this.get("router.model.uiThreadsSettings").metathreadsSettings;return(void 0===t?{}:t)[e]===E().METATHREADS_STATES.OFF},t.prototype.getMetathreadsData=function(){var e=this.get("router.model.uiThreadsSettings"),t=e.metathreadsSettings,n=void 0===t?{}:t,r=e.discounts,a=d.HIDE_METATHREADS,i=d.SETTINGS_DROPDOWN_HIDE_TO_MYSELF&&this.isMetathreadOff(_().TOMYSELF),o=d.HIDE_NEWS_METATHREAD&&this.isMetathreadOff(_().NEWS),s=d.HIDE_OFFICIAL_METATHREAD&&this.isMetathreadOff(_().OFFICIAL),l=d.HIDE_RECEIPTS_METATHREAD&&this.isMetathreadOff(_().RECEIPTS),c=d.HIDE_SCHOOL_METATHREAD&&this.isMetathreadOff(_().SCHOOL),u=d.HIDE_GAMES_METATHREAD&&this.isMetathreadOff(_().GAMES);return[{type:"toMyself",folderId:_().TOMYSELF,title:i18n("Письма себе"),text:i18n("Письма, отправленные на свой адрес электронной почты"),icon:"FOLDER_TOMYSELF",state:n[_().TOMYSELF],isHidden:i||a},{type:"newsLetters",folderId:_().NEWSLETTERS,title:i18n("Рассылки"),text:i18n("Письма от интернет-магазинов, акции и скидки. Рекламные рассылки."),icon:"FOLDER_NEWSLETTERS",state:n[_().NEWSLETTERS],isHidden:a&&this.isMetathreadOff(_().NEWSLETTERS),subSettings:[d.DISCOUNTS_BLOCK&&{type:"checkbox",value:r,testId:"discounts",text:i18n("Показывать актуальные скидки"),onChange:this.onDiscountsToggle.bind(this)}]},{type:"social",folderId:_().SOCIAL,title:i18n("Социальные сети"),text:i18n("Уведомления из «ВКонтакте», «Одноклассников» и других соцсетей"),icon:"FOLDER_SOCIAL",state:n[_().SOCIAL],isHidden:a&&this.isMetathreadOff(_().SOCIAL)},{type:"news",folderId:_().NEWS,title:i18n("Новости"),text:i18n("Уведомления от новостных сайтов, дайджесты"),icon:"FOLDER_NEWS",state:n[_().NEWS],isHidden:o||a},{type:"official",folderId:_().OFFICIAL,title:i18n("Госписьма"),text:i18n("Рассылки от государственных сервисов"),icon:"FOLDER_OFFICIAL",state:n[_().OFFICIAL],isHidden:s||a},{type:"receipts",folderId:_().RECEIPTS,title:i18n("Чеки"),text:i18n("Письма с подтверждениями оплат в магазинах и сервисах"),icon:"FOLDER_RECEIPTS",state:n[_().RECEIPTS],isHidden:l||a},{type:"school",folderId:_().SCHOOL,title:i18n("Учёба"),text:i18n("Письма про учёбу и на школьную тематику"),icon:"FOLDER_SCHOOL",state:n[_().SCHOOL],isHidden:c||a,sortOrder:d.METATHREADS_SETTINGS_ORDER.indexOf("school")},{type:"games",folderId:_().GAMES,title:i18n("Игры"),text:i18n("Всё, что связано с играми"),icon:"FOLDER_GAMES",state:n[_().GAMES],isHidden:u||a,sortOrder:d.METATHREADS_SETTINGS_ORDER.indexOf("games")}].map((function(e){return U({sortOrder:d.METATHREADS_SETTINGS_ORDER.indexOf(e.type)},e)}))},t.prototype.onHelpVK=function(){k.i.open({chatId:d.VK_HELP_CHAT_ID})},t}(f().Mediator),Z=f().Mediator.createFromClass("settings-manager",B)},9789:function(e,t,n){"use strict";n.d(t,{r:function(){return r},O:function(){return a}});var r={letterActionClick:"sharefolders:accessletter:click",openShare:"sharefolders:opensharefolders",openShareOpportunities:"shareopportunities:openshareopportunities",denySharedFolder:"sharefolders:denysharedfolder"},a="actionend"},24578:function(e,t,n){"use strict";n.r(t),n.d(t,{ShareFoldersManager:function(){return E}});var r,a=n(54498),i=n(86145),o=n(99150),s=n(21211),l=n(18440),c=n.n(l),d=n(13624),u=n.n(d),f=n(39939),m=n(98064),h=n(41860),p=n(90557),g=n(9789),v=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=!1,b=Object.values(g.r),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:u()},dataSource:{class:i.Z,events:[g.O]},letter:{lazy:p.FV,events:b},"context-menu":{class:h.Z,events:b}}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details;if(s.FOLDERS_SHARE_ENABLED)switch(t){case g.O:if(n.action.type!==a.NAVIGATE||_)return!1;var r=this.getShareActionParamsFromUrl(n.request);if(r)m.Z.renderAccess(r),_=!0;break;case g.r.letterActionClick:var i=e.originalEvent,l=e.details;i.preventDefault(),i.stopImmediatePropagation();var c=i.currentTarget.getAttribute(l.attrName),d=new(u().URL)(c),f=this.getShareActionParamsFromUrl(d);if(f)m.Z.renderAccess(f);break;case g.r.openShare:var h=e.details.model;m.Z.renderShare({model:h,allFolders:o.default.getData().folders});break;case g.r.openShareOpportunities:m.Z.renderShareOpportunities({});break;case g.r.denySharedFolder:h=e.details.model;m.Z.renderDenySharedFolder({model:h})}},t.prototype.getShareActionParamsFromUrl=function(e){var t=null==e?void 0:e.query["share-folders"];if(!t)return null;if("confirm"===t||"reject"===t){var n=e.query,r=n.grant,a=n.salt,i=n.sign,o=n.csrf,s=n.folders,l=n.timestamp,c=n.owner;return{mode:t,grant:r,salt:a,sign:i,csrf:o,folderIds:s.split(",").map(Number),timestamp:Number(l),ownerEmail:c}}if("resend"===t){var d=e.query,u=d.glasha;s=d.folders;return{mode:t,grant:r=d.grant,folderIds:s.split(",").map(Number),email:u,user:f.default.user}}return null},t}(c().Mediator);t.default=c().Mediator.createFromClass("share-folders-manager",E)},10705:function(e,t,n){"use strict";n.r(t);var r=n(17717),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(75298),c=n(41027),d=n(90926),u=n(46276),f=n(41026),m=n(94389),h=n(82609),p=n(42180),g=n(90018),v=n(49649),_=n(51474),b=n(60319),E=n(59193),y=n(27853),T=n(13839),A=n(39385),S=n(90557),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},C=function(){return c.Z.getSelectedModel().isDarkMode()},w={darkMode:C},L={"dark-mode":C};t.default=s().Mediator.create("themes-manager",{components:{"themes-manager":{class:l.Z,events:["themes:apply","themes:reload"],handleEvent:"onLoadTheme"},"layer-create-folder":{lazy:S.j7,attrs:L},"layer-edit-settings-filter":{lazy:S.UC,attrs:L},octopus:{class:h.Z,attrs:{isDarkDefaultMode:function(){return c.Z.getSelectedModel().isDarkDefaultMode()},isLightDefaultMode:function(){return c.Z.getSelectedModel().isLightDefaultMode()},isLoadedTheme:function(){return void 0!==c.Z.getSelectedModel().id},isLightColorTheme:function(){return i.LIGHT_COLOR_THEMES.includes(c.Z.getSelectedModel().id)}}},"react-async":{class:_.Z,attrs:w},useDarkMode:{attrs:w},"vk-messenger-provider":{attrs:w},"react-2kit-async":{class:v.Z,attrs:w},"compose-app":{lazy:S.xn,attrs:w},ToDoIframe:{attrs:w},CalendarIframe:{attrs:w},MarusiaIframe:{attrs:w},"new-features-dropdown":{attrs:w},"settings-dock":{attrs:Object.assign({theme:function(){return c.Z.getSelectedModel()}},w),events:["theme:select"],handleEvent:"onThemeSelect"},"dataset-letters":{attrs:w},settings:{class:E.Z,events:["themes:panel"],handleEvent:"onPanelOpen"},sidebar:{class:y.Z,attrs:{"widget-enabled":function(e){return e.isThemeSupportWidget()}}},"sidebar-folders":{class:T.Z,attrs:{"widget-enabled":function(e){return e.isThemeSupportWidget()}}},"noads-button":{class:m.default,attrs:{isDarkMode:C}},"themes-widget":{lazy:S.Ll,attrs:{id:function(e){return e.getThemeId()},data:function(e){return e.getThemeData()},widgetData:function(e){return e.getThemeWidgetData()}}},thread:{class:A.Z,attrs:O(O({},L),{isDarkDefaultMode:function(){return c.Z.getSelectedModel().isDarkDefaultMode()},isLightDefaultMode:function(){return c.Z.getSelectedModel().isLightDefaultMode()}})},"panel-with-selected":{class:p.Z,attrs:L},"letter-meta":{class:f.Z,attrs:L},"search-panel":{class:b.Z,attrs:w},"category-feedback":{class:d.Z,attrs:L},"drag-and-drop":{attrs:L},"layer-metathreads-settings":{lazy:S.xv,attrs:L},"portal-menu-logo":{class:g.Z,attrs:{theme:function(){return c.Z.getSelectedModel().id}}},discounts:{class:u.Z,attrs:L},useIsDarkMode:{attrs:{isDarkMode:C}}},getThemeId:function(){return c.Z.getSelectedModel().id},getThemeData:function(){return c.Z.getSelectedModel().widget.data},getThemeWidgetData:function(){return c.Z.getSelectedModel().widgetData},isThemeSupportWidget:function(){return c.Z.getSelectedModel().isSupportWidget()&&!this.hideWidget()},hideWidget:function(){var e=this.getThemeId();if("t2052"===e&&!i.THEMES_WIDGET_CLOUDY_ENABLED)return!0;if(!i.WIDGETS_WITH_SHOW_LIMIT_THEME_IDS.includes(e))return!1;if("t5002"===e&&Math.floor((new Date("2020-01-06").getTime()-Date.now()).valueOf()/1e3)<0)return!0;if("t5003"===e||"t1169"===e||"t5004"===e){var t=a().get("t5003-widget");return i.WIDGETS_SHOW_LIMIT_MAP.t5003<(t&&t.getCount("show"))||t&&t.state}var n=a().get("".concat(e,"-widget"));return i.WIDGETS_SHOW_LIMIT_MAP[e]<(n&&n.getCount("show"))||n&&n.state},markWidgetAsShowed:function(){if(c.Z.getSelectedModel().isSupportWidget()){var e=this.getThemeId();if("t5003"===e||"t1169"===e||"t5004"===e){return(t=a().get("t5003-widget"))&&t.save({hit:!0})}if(i.WIDGETS_WITH_SHOW_LIMIT_THEME_IDS.includes(e)){var t;return(t=a().get("".concat(e,"-widget")))&&t.save({hit:!0})}}},onLoadTheme:function(e){var t,n,r=Array.from(document.body.classList).filter((function(e){return e.startsWith("theme-")})),a=["theme-".concat(e.id)];if(e.isDarkMode())a.push("g-dark-mode");else r.push("g-dark-mode");(t=document.body.classList).remove.apply(t,r),(n=document.body.classList).add.apply(n,a),this.markWidgetAsShowed()},onThemeSelect:function(e){var t,n=null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.model;if(n)c.Z.setTheme(n,!0)}})},29018:function(e,t,n){"use strict";var r,a=n(60033),i=n.n(a),o=n(54498),s=n(86145),l=n(21211),c=n(18440),d=n.n(c),u=n(92042),f=n.n(u),m=n(13624),h=n.n(m),p=n(93286),g=n(91622),v=n(92049),_=n(15045),b=n(39385),E=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._letterPosition={},t._ignoreAutoRead={},t.currentReadingMessageId=null,t.currentReadingMessageIndex=null,t.isScrollRadarSent=!1,t}return E(t,e),t.prototype.defaults=function(){var e=this;f().all.on("change",(function(t){var n=e.get("thread"),r=e.get("scrollable");if(n&&r)e.checkHandleMessageRemoved(t)}))},t.prototype.getComponentsSpec=function(){return{router:{class:h(),events:[]},dataSource:{class:s.Z,events:["actionend"]},thread:{class:b.Z,events:["letter:resize","letter:expand:attaches","letter:collapse","force:recalc"]},letter:{class:v.default,events:[]},scrollable:{class:_.Z,events:["scroll:onbottom","scroll:change"]},layout:{class:g.ZP}}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details,r=this.get("thread"),a=this.get("scrollable");if(r&&a)switch(t){case"scroll:change":this.onOnlyScroll();case"force:recalc":this.onScroll();break;case"scroll:onbottom":this.emit("thread:nextpage");break;case"letter:resize":case"letter:expand:attaches":this.onLetterExpanded(n);break;case"letter:collapse":return this.handleMessageCollapsed(n),!1;case"actionend":if(n&&n.action.type===o.NAVIGATE)this.onNewThread(!0)}},t.prototype.getModel=function(){return this.get("thread").get("model")},t.prototype.onNewThread=function(e){if(e)this.get("scrollable").reset(),this._ignoreAutoRead={},this._letterPosition={},this.isScrollRadarSent=!1;this.onScroll()},t.prototype.getEdges=function(){var e=this.get("scrollable"),t=e.el.getBoundingClientRect(),n=t.top,r=t.bottom,a=r-n;return{top:n,bottom:r,height:a,readline:r-a/3,direction:e.getScrollDir()||"down"}},t.prototype.getLetterBlockInstances=function(e){if(null==e||null==this.getList("letter"))return[];else return this.getList("letter")},t.prototype.onScroll=function(){var e=this.get("thread"),t=e&&e.get("model");if(e&&t){for(var n=this.getLetterBlockInstances(e),r=this.getEdges(),a=this._letterPosition,i=this.getIgnoredLetters(),o=null,s=!1,l=0;l<n.length;l++){var c=n[l].get("model"),d=c.get("id"),u=e.get("model").get("messages").last().id===d,f=e.get("model").get("messages").first().id===d,m=this.getLetterPosition(n[l],r,u,f);if(m.sticky)o=d;if(m.topMost)s=!0,this.currentReadingMessageId=d,this.currentReadingMessageIndex=e.get("model").get("messages").indexOf(c);if(m.readline&&c.is("flags.unread")&&!i[d])i[d]=!0,(0,p.ZP)(["letter","open","unread"]),this.emit("mark:readed",c);a[d]=m}if(!s)this.currentReadingMessageId=null;e.isStickyEnabled()&&this.setSticky(o)}},t.prototype.onOnlyScroll=function(){if(!this.isScrollRadarSent)i().send("letter_scroll"),this.isScrollRadarSent=!0},t.prototype.setSticky=function(e){var t=this.get("thread"),n=t.get("sticky"),r=this._letterPosition[e];if(e&&r.sticky){var a={head:r.stickyHead,footer:r.stickyFooter,headFade:r.stickyHeadFade,footerFade:r.stickyFooterFade,bottom:r.bottom,top:r.top,id:e};(!n||n.id!==e||n.head!==a.head||n.footer!==a.footer)&&t.set("sticky",a)}else n&&t.set("sticky",null)},t.prototype.onLetterExpanded=function(e){var t=e.get("id"),n=this.getEdges(),r=this.getLetterView(t);if(null!=r)n.direction="down",this._letterPosition[t]=this.getLetterPosition(r,n),this.setSticky(t)},t.prototype.getLetterPosition=function(e,t,n,r){if(void 0===n)n=!1;if(void 0===r)r=!1;n=!l.IS_READLETTER_NATIVE_STICKY_DISABLED&&n,r=!l.IS_READLETTER_NATIVE_STICKY_DISABLED&&r;var a={};if(!e.el)return{};var i=e.el.getBoundingClientRect(),o=i.top,s=i.bottom,c=i.height;if(s<t.top||o>t.bottom)a.visible=!1;else{if(a.visible=!0,o<t.readline)a.readline=!0;if(o<=t.top)a.topMost=!0;if("down"==t.direction){if(o<t.readline&&c>t.height)a.sticky=!0,a.stickyFooter=!0,a.stickyFooterFade=!0,a.bottom=0;if((o<t.top||n)&&c>t.height)a.sticky=!0,a.stickyHead=!0,a.top=t.top;if(s<t.bottom&&!n)a.stickyHead=!1,a.stickyFooter=!1,a.sticky=!1}else{if((s>t.readline||n)&&c>t.height)a.sticky=!0,a.stickyHead=!0,a.stickyHeadFade=!0,a.top=t.top;if(o<t.readline&&(s>t.bottom||n)&&c>t.height)a.sticky=!0,a.stickyFooter=!0,a.bottom=0;if(o>t.top&&!r&&a.stickyFooter)a.stickyHead=!1,delete a.top;if(o>t.top&&!a.stickyFooter)a.stickyHead=!1,a.stickyFooter=!1,a.sticky=!1}}return a},t.prototype.getLetterView=function(e){var t=this.get("thread");return this.getLetterBlockInstances(t).find((function(t){return t.get("model").get("id")==e}))},t.prototype.resetScroll=function(){this.get("scrollable").reset()},t.prototype.getIgnoredLetters=function(){var e=this.get("thread").get("model"),t=this._ignoreAutoRead[e.get("id")]||{};return e.get("messages").forEach((function(n){var r=n.get("folder")==e.get("folder");if(!(t[n.get("id")]||n.get("flags.unread")&&r))t[n.id]=!0})),t},t.prototype.checkHandleMessageRemoved=function(e){var t,n;if(null===(t=null==e?void 0:e.changes)||void 0===t?void 0:t.includes){if(this.currentReadingMessageId&&null!=this.currentReadingMessageIndex&&e.changes.includes("messages")){var r=this.get("thread"),a=r&&r.get("model");if(r&&a){var o=a.get("messages"),s=o[this.currentReadingMessageIndex];if(this.currentReadingMessageId!==s.get("id")){if(!(null==o?void 0:o.includes))i().send("threads-no-includes",{rlog:"octavius-threads-no-includes",rlog_message:{varType:typeof o,includes:typeof(null==o?void 0:o.includes),length:null==o?void 0:o.length}});if(-1===o.indexOf(this.currentReadingMessageId))(0,p.ZP)("thread_scroll-to-next"),this.currentReadingMessageId=null,r.scheduleScrollLetterIntoView(s.get("id"))}}}}else i().send("threads-no-evt-changes",{rlog:"octavius-threads-no-evt-changes",rlog_message:{type:null==e?void 0:e.type,changes:null==e?void 0:e.changes,changed:null==e?void 0:e.changed,allChanged:null==e?void 0:e.allChanged,target_id:null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.id}})},t.prototype.handleMessageCollapsed=function(e){if(this.currentReadingMessageId===e.get("id")){this.get("thread").scheduleScrollLetterIntoView(this.currentReadingMessageId),this.currentReadingMessageId=null}},t}(d().Mediator);t.Z=d().Mediator.createFromClass("thread-scroller",y)},88255:function(e,t,n){"use strict";n.d(t,{tY:function(){return r},a_:function(){return a},jY:function(){return i},_:function(){return o},XL:function(){return s}});var r="todo:toggle",a="todo:iframe:message",i="actionend",o="widgetcolumn:unmount",s="widgetcolumn:setwidget"},89302:function(e,t,n){"use strict";n.r(t),n.d(t,{FROM_TODO_READY:function(){return v},canTodoBeShown:function(){return _},TodoManager:function(){return b}});var r,a=n(54498),i=n(86145),o=n(22023),s=n(21211),l=n(18440),c=n.n(l),d=n(4183),u=n(72727),f=n(13624),m=n.n(f),h=n(39939),p=n(88255),g=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v="todo:ready";function _(e){var t=null==e?void 0:e.route;return t&&!t.is("#search")&&!t.is("#search-letter")}var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:m(),events:["routeend"]},"settings-dock":{attrs:{canToggleTodo:function(e){return e.canToggleTodo()},todo:function(e){return e.isActive()}},events:[p.tY]},ToDoIframe:{events:[p.a_]},WidgetColumn:{events:[p._,p.XL]},dataSource:{class:i.Z,events:[p.jY]}}},t.prototype.handleEvent=function(e){switch(e.type){case p.tY:return this.toggleTodo();case p.a_:return this.handlePostMessage(e);case p.XL:return this.setWidget(e.details.value)}},t.prototype.handlePostMessage=function(e){var t,n;if(!(null===(n=null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.data)||void 0===n?void 0:n.type))return!1;var r=e.details.data;switch(r.type){case"todo:start":return this.sendMessageToTodo(e,{type:"todo:email",email:h.default.user.getEmail()});case"todo:open":return this.openTodo(r)}},t.prototype.openTodo=function(e){return(0,u.default)("".concat(s.TODO_URL).concat(e.path||"")),!1},t.prototype.sendMessageToTodo=function(e,t){return e.details.data.sendAns(t),!1},t.prototype.canToggleTodo=function(){return!s.WIDGET_COLUMN&&s.SHOW_TODO_TOGGLE&&s.HIDE_TOYS===s.BL_PROP_NAME&&_(this.get("router"))&&this.isSupportTodo()},t.prototype.getUILayout=function(){return this.get("router.model.uiLayout")||o.ce},t.prototype.isActive=function(){return"widget-todo"===this.getUILayout().widget&&this.getUILayout().widgetIsOpen},t.prototype.isSupportTodo=function(){return this.getUILayout().supportWidget},t.prototype.toggleTodo=function(){return(0,d.default)({type:a.TOGGLE_TODO,uid:void 0}),!1},t.prototype.setWidget=function(e){return(0,d.default)({type:a.SET_WIDGET,uid:void 0,value:e}),!1},t}(c().Mediator);t.default=c().Mediator.createFromClass("todo-manager",b)},73704:function(e,t,n){"use strict";var r,a=n(54498),i=n(86145),o=n(99150),s=n(21211),l=n(18440),c=n.n(l),d=n(19008),u=n(4183),f=n(21091),m=n(96596),h=n.n(m),p=n(27245),g=n.n(p),v=n(4872),_=n.n(v),b=n(13624),E=n.n(b),y=n(66423),T=n.n(y),A=n(63062),S=n(93286),O=n(43353),C=n(47334),w=n(30240),L=n(90557),k=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},R=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},D=["unsubscribe","moveallfrom","markallfrom"],M={markallfrom:function(){return i18n("Помечено прочитанным")},unsubscribe:function(e){return(0,f.I)(e)},moveallfrom:function(){return i18n("Перемещено в папку «Корзина»")},fail:function(){return i18n("Что-то пошло не так")},"unsubscribe:from:ll":function(e){var t={sender:e.name||e.email};return i18n("Вы отписались от писем «{sender}»",t)}},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionsFinished=!1,t.shouldAbort={},t}return k(t,e),t.prototype.getComponentsSpec=function(){return{router:{class:E()},unsubscribe:{lazy:L.mV,events:D,attrs:{"actions-finished":function(e){return e.hasActionsFinished()}}},"dropdown-actions":{class:O.Z,events:D},"list-letter-unsubscribe":{class:w.Z,events:["unsubscribe:from:ll","unsubscribe:update"],attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},"list-letter-common":{class:C.Z,events:["unsubscribe:from:ll","unsubscribe:update","letter:intersect:viewport","letter:hide:unsubscribe:sender"],attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},"list-letter-compact":{events:["unsubscribe:from:ll","unsubscribe:update","letter:intersect:viewport","letter:hide:unsubscribe:sender"],attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},"dataset-letters":{events:["unsubscribe:from:ll","unsubscribe:update","letter:hide:unsubscribe:sender"],attrs:{unsubscribeList:function(e){var t;return null===(t=e.get("router.model.unsubscribeList"))||void 0===t?void 0:t.actualSenders}}},"data-source":{class:i.Z,events:["actionend"]},"layer-confirm-move-to-spam":{events:["unsubscribe"]}}},t.prototype.handleEvent=function(e){var t=e.type,n=e.details,r=void 0===n?{}:n;switch(this.actionsFinished=!1,t){case"unsubscribe":this.doUnsubscribe({type:t,params:r},{silent:r.silent});break;case"markallfrom":var a={from:i=Array.isArray(r.from)?r.from:[r.from],action:"unset",marks:["unread"],only_newsletters:!0};this.doMarkAllFrom({type:t,params:a});break;case"moveallfrom":var i=Array.isArray(r.from)?r.from:[r.from];a={folder:_().TRASH,from:i,only_newsletters:!0};this.doMoveAllFrom({type:t,params:a});break;case"unsubscribe:from:ll":this.doUnsubscribeFromLL({type:t,sender:r.sender});break;case"actionend":this.handleActionEnd(r.action);break;case"letter:intersect:viewport":var o=r.uid,s=r.sender;this.handleIntersectViewport({uid:o,sender:s})}},t.prototype.doUnsubscribe=function(e,t){var n=this,r=e.type,a=e.params,i=a.ids,o=a.position;if(!i)return!1;else return T().get("messages/services/unsubscribe",{ids:i}).then((function(){return n.onActionDone(r,I(I({},t),{position:o}))})).catch((function(){return n.onActionFail(r)}))},t.prototype.doMoveAllFrom=function(e){var t=this,n=e.type,r=e.params,a=r.folder,i=r.from;if(!r||!a||!i)return!1;if(!this.isSenderFromValid(i))return!1;else return T().get("messages/move/all",r).then((function(){return t.onActionDone(n)})).catch((function(){return t.onActionFail(n)}))},t.prototype.doMarkAllFrom=function(e){var t=this,n=e.type,r=e.params,a=r.action,i=r.marks,o=r.from;if(!(r&&a&&i&&o))return!1;if(!this.isSenderFromValid(o))return!1;if("set"!==a&&"unset"!==a)return!1;else return T().get("messages/marks/all",r).then((function(){return t.onActionDone(n)})).catch((function(){return t.onActionFail(n)}))},t.prototype.onActionDone=function(e,t){var n=this;if(void 0===t)t={silent:!0};var r="moveallfrom"===e?this.backToFolder():o.default.updateAll(),a=t.position;r.then((function(){var r={text:n.getNotifyText(e)};if(!(null==t?void 0:t.silent))A.default.add(r);n.actionsFinished=!0,n.updateAll(),h().add("unsubscribe action ok",e),(0,S.ZP)({type:"".concat(e,"_action-success"),dwh:{position:a}})})).catch((function(){return n.onActionFail(e)}))},t.prototype.onActionFail=function(e){this.actionsFinished=!0,this.updateAll(),h().add("unsubscribe action failed",e),(0,S.ZP)("".concat(e,"_action-error")),A.default.add({type:A.default.types.error,text:this.getNotifyText("fail")})},t.prototype.isSenderFromValid=function(e){return e.every((function(e){return/@/.test(e)}))},t.prototype.getNotifyText=function(e,t){return M[e](t)},t.prototype.hasActionsFinished=function(){return this.actionsFinished},t.prototype.backToFolder=function(){var e,t,n=this.get("router"),r=null===(t=null===(e=n.route)||void 0===e?void 0:e.params)||void 0===t?void 0:t.folder;return n.go("#letters",{folder:r,preserveFilters:!0})},t.prototype.doUnsubscribeCleanMaster=function(e){return g().execute({method:g().Methods.Unsubscribe,emails:[e]}).then((function(){return(0,S.ZP)({type:"unsub_clnmstr",dwh:{sender:e}})}))},t.prototype.findLetterBySender=function(e,t){return e.filter((function(e){var n,r,a=e.get("model"),i=null===(r=null===(n=(0,d.WE)(a,"from"))||void 0===n?void 0:n[0])||void 0===r?void 0:r.email;if(!t)return!1;else return t.includes(i)}))},t.prototype.updateUnsubscribeList=function(e){var t=this.components["list-letter-common"],n=this.components["list-letter-compact"];this.findLetterBySender(R(R([],t,!0),n,!0),e).forEach((function(e){return e.broadcast("unsubscribe:update")}))},t.prototype.handleActionEnd=function(e){var t=e.type,n=e.sender;if(t===a.DELETE_SENDER_FROM_UNSUBSCRIBE_LIST||t===a.HIDE_UNSUBSCRIBE_SENDER)this.updateUnsubscribeList([n])},t.prototype.deleteSenderFromUnsubscribeList=function(e){var t=this;(0,u.default)({type:a.DELETE_SENDER_FROM_UNSUBSCRIBE_LIST,senders:e,uid:void 0}).then((function(){t.updateUnsubscribeList(e)}))},t.prototype.doUnsubscribeFromLL=function(e){var t=this,n=e.type,r=e.sender,a=r.email,i=A.default.add({text:this.getNotifyText(n,r),actions:[{text:i18n("Отменить")}],duration:s.LL_UNSUBSCRIBE_NEWSLETTERS_TIMEOUT,qa:"notify-ll-unsubscribe"});if(i)i.on("action",(function(){t.shouldAbort[a]=!0,(0,S.ZP)({type:"unsub_clnmstr_cancel_clk",dwh:{sender:a}}),i.close()})),i.on("closed",(function(){if(!t.shouldAbort[a])t.doUnsubscribeCleanMaster(a).then((function(){t.deleteSenderFromUnsubscribeList([a])})).catch((function(e){var t=e.error;A.default.error({unique:!0}),(0,S.ZP)({chain:["unsub_clnmstr_err",t.status,t.message],dwh:{sender:a}})}));else t.shouldAbort[a]=!1}))},t.prototype.handleIntersectViewport=function(e){var t=e.uid,n=e.sender;(0,u.default)({type:a.COUNT_UNSUBSCRIBE_VIEW,uid:t,sender:n.email,priority:E().Loader.PRIORITY_LOW})},t}(c().Mediator);t.Z=c().Mediator.createFromClass("unsubscribe-actions",P)},53381:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});var r=n(84118),a="advModel",i=r.Z.extend({className:"models.AdvLetter"});i.createAdvLetter=function(e,t,n,o,s,l){var c=r.Z.createModel(i,"adv::".concat(e,"_").concat(t,"_").concat(o),a);return c.set("inMetathread",s,!0),c.set("metathreadLastToggle",l,!0),c.set("position",t),c.set("index",n),c},i.isAdv=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},95218:function(e,t,n){"use strict";var r=n(84118),a="discountsBlockLetter",i=r.Z.extend({className:"models.DiscountsBlockLetter"});i.createDiscountsBlock=function(){return r.Z.createModel(i,"discountsBlockLetter",a)},i.isDiscountsBlock=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},30618:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(84118),a="dividerModel",i=r.Z.extend({className:"models.DividerModel"});i.createDividerLetter=function(e,t,n,o){var s=r.Z.createModel(i,"divider-".concat(e),a);return s.set("title",t),s.set("counter",n),s.set("meta",o),s},i.isDivider=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},9125:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var r=n(84118),a="promoBlockLetter",i=r.Z.extend({className:"models.PromoBlockLetter"});i.createPromoBlock=function(){return r.Z.createModel(i,"promoBlockLetter",a)},i.isPromoBlock=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},10849:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(43572),a=n.n(r)().extend({className:"models.SearchActionLetter"}),i="searchActionLetter";a.createSearchActionLetter=function(e){var t,n=e.withSuggestHeader,r=e.type,o="searchActionLetter::".concat(r),s=a.all.getSafe(o);if(s.set(((t={id:o,withSuggestHeader:n,type:r})[i]=!0,t)),!s)a.all.set([s]);return s},a.isSearchAction=function(e){return e.is(i)},t.Z=a},8109:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var r=n(84118),a="specProjectLetter",i=r.Z.extend({className:"models.SpecProjectLetter"});i.createSpecProjectLetter=function(e){var t="specProjectLetter::".concat(e);return r.Z.createModel(i,t,a)},i.isSpecProjectLetter=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},3333:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var r=n(84118),a="tipLetter",i=r.Z.extend({className:"models.TipLetter"});i.createTipLetter=function(e){var t=r.Z.createModel(i,"tip:".concat(e),a);return t.set("folder",e),t},i.isTip=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},39057:function(e,t,n){"use strict";var r=n(84118),a="welcomeBlockLetter",i=r.Z.extend({className:"models.WelcomeBlockLetter",constructor:function(){r.Z.prototype.constructor.apply(this,arguments),this.set({withGreeting:!0,height:0})}});i.createWelcomeBlock=function(){return r.Z.createModel(i,"welcomeBlockLetter",a)},i.isWelcomeBlock=function(e){return r.Z.isDatasetModel(e,a)},t.Z=i},84627:function(e,t,n){"use strict";n.r(t),n.d(t,{vkMessengerLoader:function(){return r}});var r=n(84427).i},55674:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var r,a=n(50987),i=n(21211);!function(e){e.DateAsc="d",e.DateDesc="D",e.SubjectAsc="s",e.SubjectDesc="S",e.FromAsc="f",e.FromDesc="F"}(r||(r={}));var o={D:{type:"date",order:"desc"},F:{type:"from",order:"desc"},S:{type:"subject",order:"desc"},d:{type:"date",order:"asc"},f:{type:"from",order:"asc"},s:{type:"subject",order:"asc"}},s={all:!0,unread:!1,flagged:!1,with_attachments:!1},l=a.Z.get("initialUser.messages.sort")||o.D,c=Object.keys(o).find((function(e){return o[e].type===l.type&&o[e].order===l.order}))||"D",d=i.ENABLE_SORTING?c:void 0;t.Z={getQuery:function(e){var t={};if(Object.entries(s).forEach((function(e){var n=e[0],r=e[1];if("all"!==n&&r)t["".concat("filter_").concat(n)]=1})),e)t.sort=d;return t},getFilterConfig:function(){return s},getSortingType:function(){return d},toggleFilter:function(e){if(s.hasOwnProperty(e))s[e]=!s[e]},applyFilter:function(e){if(!i.ENABLE_MULTIPLE_FILTERS)Object.keys(s).forEach((function(e){s[e]=!1})),this.toggleFilter(e);else{if(this.toggleFilter(e),Object.entries(s).filter((function(e){var t=e[0],n=e[1];return"all"!==t&&n})).length)s.all=!1;else s.all=!0}},applySorting:function(e){d=e||"D"},resetFilters:function(){Object.keys(s).forEach((function(e){s[e]=!1})),s.all=!0},resetSorting:function(){this.applySorting("D")},set:function(e){var t=Object.keys(e).filter((function(e){return e.startsWith("filter_")}));if(t.length)if(i.ENABLE_MULTIPLE_FILTERS){var n=!1;if(t.forEach((function(e){var t=e.replace("filter_","");if(s.hasOwnProperty(t)&&"all"!==t)s[t]=!0,n=!0})),n)s.all=!1}else{var r=t[0].replace("filter_","");if(s.hasOwnProperty(r)&&"all"!==r)this.applyFilter(r)}else this.resetFilters();if(i.ENABLE_SORTING&&e.sort&&o[e.sort])this.applySorting(e.sort)},has:function(){return!!Object.entries(s).filter((function(e){var t=e[0],n=e[1];return"all"!==t&&n})).length},isFilter:function(e){return s[e]},get:function(){if(s.all)return{};var e={};return Object.entries(s).forEach((function(t){var n=t[0],r=t[1];if("all"!==n&&r)e[n]=r})),e},getSorting:function(){return o[d]||{}},isLetterInFilter:function(e){return!this.has()||this.isFilter("flagged")&&e.is("flags.flagged")||this.isFilter("unread")&&e.is("flags.unread")||this.isFilter("with_attachments")}}},25191:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var r=function(){return window.app}},45209:function(e,t,n){"use strict";n.d(t,{h7:function(){return u},Qn:function(){return f},nE:function(){return m}});var r,a=n(60033),i=n.n(a),o=n(21211),s=(n(88695),n(66423)),l=n.n(s),c=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},d=c(c([],o.ADV_OFF_QUERY_GROUP,!0),o.ADV_OFF_MONTH_GROUP,!0);function u(){var e=o.ADV_EXP_ID&&d.includes(o.ADV_EXP_ID),t=o.ADV_TARIFF_FEATURE===r.alreadyNoAds;return e&&!t}function f(){if(!o.ADV_EXP_ID_SEND||!u())return Promise.resolve(null);else return l().call("/api/v1/prodsubs/noads/available").catch((function(e){i().send("noads_req_err",{rlog:"noads_req_err",rlog_message:{error:e}})}))}!function(e){e.alreadyNoAds="already_noads"}(r||(r={}));var m=function(e){window.open(e),window.addEventListener("message",(function(e){var t=e.data;if(e.origin===o.ADV_NO_ADS_POSTMSG_URL&&"refresh"===t)window.location.reload()}))}},75273:function(e,t,n){"use strict";n.d(t,{zZ:function(){return g},YM:function(){return v},gU:function(){return _},Hr:function(){return b},ao:function(){return E},pT:function(){return y},Yk:function(){return T},i$:function(){return O},Fz:function(){return C},Gv:function(){return w},uZ:function(){return L},pb:function(){return k},ap:function(){return M},oD:function(){return P},OP:function(){return U}});var r=n(29155),a=n(21528),i=n(17717),o=n.n(i),s=n(60033),l=n.n(s),c=n(19275),d=n(50987),u=n(58475),f=n(21211),m=n(82525),h=n(57045),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},g=function(){return 10},v={immediateFetchTimeout:f.ADMAN_BROKER_IMMEDIATE_FETCH_TIMEOUT,delayedFetchTimeout:f.ADMAN_BROKER_DELAYED_FETCH_TIMEOUT},_=function(){return r.default.hasBlocker()},b=function(){return r.default.hasAdBlock()},E=function(){var e;return null===(e=r.default.hasAdBlockWhiteList)||void 0===e?void 0:e.call(r.default)},y=function(){return r.default.getExpId()};if(r.default.injector)r.default.injector.set("onClickWithBlockerWhitelistHosts",c.Z.urls.mimicWhitelistUrls);var T={preview:location.search.match(/[?&]preview=(\d+)/)&&RegExp.$1,siteId:105,version:"octavius"};function A(e){var t=e.origin,n=e.data;if("https://ad.mail.ru"===t&&n){window.removeEventListener("message",A);var r="connected"===n||"not_authorized"===n?1:0;h.ZP.set("trgVkAuth",r,{email:!1})}}if(f.ADMAN_SEND_HAS_VK)!function(){window.addEventListener("message",A);var e=document.createElement("iframe");e.style.display="none",e.src="//ad.mail.ru/dist/vkAuth.html",document.body.appendChild(e)}();var S=function(){var e={},t=new URLSearchParams(window.location.search);if(t.has("newreg"))e.mail_event="registration";else if(t.has("authid")||t.has("back"))e.mail_event="login";e.ponymode=u.WJ.ponyMode?1:0,e.in3paneMetathread=0,e.userid=d.Z.get("initialUser.email"),e.rounded=f.ADVERT_SIDEBAR_ROUNDED?1:0;var n=o().get("octavius-easy-ads"),r=(null==n?void 0:n.isExist())?null==n?void 0:n.isActive():f.ADVERT_EASY_ADV_EXP;if(!f.ADVERT_EASY_ADV_DISABLED&&r)e.easyadv=1;if(f.ADMAN_SEND_SYNC_IDS){var a=h.ZP.get("rb_sync_id",{email:!1});if(a)Object.assign(e,a);var i=(0,h.fo)().get("rb_sync_id",{email:!1});if(i)Object.assign(e,i)}if(f.ADMAN_SEND_HAS_VK){if(1==h.ZP.get("trgVkAuth",{email:!1}))e.vk=1}if(f.ADV_WEB_PERF_EXP_ID)e.web_perf_exp_id=f.ADV_WEB_PERF_EXP_ID;return e}(),O=function(){return S},C=function(e,t){S[e]=t},w=function(e){return delete S[e]},L={},k={};f.ADV_SPECLINE_ENABLED&&Object.assign(f.ADV_SLOTS,f.ADV_SPECLINE_SLOTS),Object.entries(f.ADV_SLOTS).forEach((function(e){var t=e[0],n=e[1],r=n.slot,a=n.limit,i=n.autoUpdate,o=n.onAutoUpdate,s=n.renderThrottling,l=n.handlePageVisibility,c=n.counter,d=n.urlChangeOnly,u=n.statId,h=n.mimicId,p=n.mimicLimit,v=void 0===p?a:p,_=n.width;L[t]={id:r,name:t,counter:(0,m.b)(c),urlChangeOnly:(0,m.b)(d),limit:parseInt(a,10),statId:u,mimicId:h,mimicLimit:parseInt(v,10),onAutoUpdate:(0,m.b)(o)},k[t]={siteZone:g,name:t,slot:r,autoUpdate:parseInt(i,10),renderThrottling:parseInt(s,10),handlePageVisibility:(0,m.b)(l),calculateHeight:"sidebar"===t||"sidebar-small"===t,width:parseInt(_,10),heightCoef:f.ADVERT_SCROLL_CONF[1],rbParams:O,renderOnCreate:!1,bannerEvents:["banner:started","banner:finished","popup_open","popup_close"]}}));var I={isDarkTheme:!1,siteBgColor:"ffffff",urlColor:"999999",hoverColor:"000000",bg:"ffffff",bgHover:"ffffff",borderColor:"ffffff",textColor:"000000",titleColor:"005bd1",titleHoverColor:"000000",listBg:"f0f5ff",listBgHover:"f0f5ff",listBorderColor:"ffffff",listTitleColor:"005bd1",listTitleHoverColor:"005bd1",listTextColor:"333333",listButtonBgColor:"ffffff",listButtonTextColor:"333333",listButtonBorderColor:"e2e2e1",listButtonBorderHoverColor:"005BD1",listButtonTextHoverColor:"005BD1",listButtonBgHoverColor:"ffffff",sentMsgOkBg:"ffffff",sentMsgOkBgHover:"ffffff",sentMsgOkBorderColor:"e0e0e0",sentMsgOkTextColor:"000000",sentMsgOkTitleColor:"005bd1",sentMsgOkTitleHoverColor:"000000"},R={isDarkTheme:!0,siteBgColor:"000000",urlColor:"9C9C9C",hoverColor:"ffffff",bg:"000000",bgHover:"000000",borderColor:"000000",textColor:"ffffff",titleColor:"0667FF",titleHoverColor:"ffffff",listBg:"151515",listBgHover:"151515",listBorderColor:"1F1F1F",listTitleColor:"589BFF",listTitleHoverColor:"589BFF",listTextColor:"333333",listButtonBgColor:"313131",listButtonTextColor:"D7D7D7",listButtonBorderColor:"313131",listButtonBorderHoverColor:"414141",listButtonTextHoverColor:"D7D7D7",listButtonBgHoverColor:"414141",sentMsgOkBg:"313131",sentMsgOkBgHover:"313131",sentMsgOkBorderColor:"1D1D1D",sentMsgOkTextColor:"ffffff",sentMsgOkTitleColor:"0667FF",sentMsgOkTitleHoverColor:"ffffff"},D={"2pane":{ponymode:{isPonymode:!0,advHeight:40,imgWrapperHeight:36,imgWrapperWidth:95,imgHeight:95,imgWidth:95,titleLineHeight:20,titleFontSize:13,infoLineHeight:17,infoFontSize:13,infoMarginTop:0,infoWidth:670,descriptionLineHeight:20,descriptionFontSize:13},notPonymode:{isPonymode:!1,advHeight:48,imgWrapperHeight:42,imgWrapperWidth:110,imgHeight:110,imgWidth:110,titleLineHeight:20,titleFontSize:15,infoLineHeight:17,infoFontSize:13,infoMarginTop:0,infoWidth:670,descriptionLineHeight:20,descriptionFontSize:13}},"3pane":{ponymode:{isPonymode:!0,advHeight:81,imgWrapperHeight:56,imgWrapperWidth:90,imgHeight:90,imgWidth:90,titleLineHeight:20,titleFontSize:15,infoLineHeight:16,infoFontSize:11,infoMarginTop:2,descriptionLineHeight:18,descriptionFontSize:12},notPonymode:{isPonymode:!1,advHeight:101,imgWrapperHeight:56,imgWrapperWidth:100,imgHeight:100,imgWidth:100,titleLineHeight:20,titleFontSize:15,infoLineHeight:16,infoFontSize:11,infoMarginTop:10,descriptionLineHeight:18,descriptionFontSize:13}}},M=function(e){var t=O(),n=t.in3paneMetathread,r=t.ponymode;return D[e][r||n?"ponymode":"notPonymode"]},P={top:"dcdcdc",topHover:"ffffff",bg:"333333"},N=a.default.getAsJSON("adv-theme-new",{}),x=a.default.getAsJSON("adv-theme-viewer",{}),F=a.default.getAsJSON("adv-theme-dark",{});function U(e){return p(p({},I),e.isDarkMode()?R:null)}Object.assign(I,N),Object.assign(R,F),Object.assign(P,x);var H=function(){if("_timers"in window)delete window._timers.ready_app;document.removeEventListener("visibilitychange",H)};if(document.addEventListener("visibilitychange",H),window.__PH&&!f.ADV_SEND_MULTI_ACCOUNT_DISABLE)window.__PH.loadAccountsList((function(e){if(e&&e.accounts){var t=e.accounts.filter((function(e){return!e.active})).map((function(e){return e.email}));if(t.length)C("email",t.join(","))}}));if(f.ADVERT_XHR_RESTORE){var B=["init"];try{XMLHttpRequest.prototype.send()}catch(e){try{if(e.stack.includes("Object.sendWrapper")){B.push("detect");var Z=document.createElement("iframe");Z.style.display="none",Z.src="about:blank",document.body.appendChild(Z),XMLHttpRequest.prototype.send=Z.contentWindow.XMLHttpRequest.prototype.send,B.push("restore"),document.body.removeChild(Z)}}catch(e){}}l().send("adman-xhr-fix",{i:B})}},88451:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(25709),s=n.n(o),l=n(83260),c=n.n(l),d="^(("+window.location.protocol+")?//"+window.location.host+")?/",u=new RegExp(d+"api-proxy"),f=new RegExp(d+"api/v1(.*)$"),m=new RegExp(d+"api/v1/(messages/attaches/add|user/signature/attaches/add|ab/import)"),h=i.API_ENCRYPTOR_CONFIG[0],p=i.API_ENCRYPTOR_CONFIG[1],g={endpoint:"/api/v1",type:h,key:i.API_ENCRYPTOR_CONFIG[2],limit:p,getUrl:function(e){if(e.match(f)&&!e.match(m))return f.exec(e)[3];if(e.match(u))return e;else return}};function v(e,t){if(e.length<t)return e}function _(e,t){var n=t.settings,r=e.getUrl(n.url);if(r){var a=n.params||n.data;if(!a||"string"==typeof a||c().isPlainObject(a)){var o=void 0,s=0===r.indexOf("/api-proxy/rb-mimic/v1/")?i.API_ENCRYPTOR_MIMIC_LIMIT:p;if(a){if(r+=r.includes("?")?"&":"?","string"==typeof a)o=v(c().param({__urlp:r+a}),s);else if(o=v(r+c().param(a),s))o={__urlp:o}}else o=v(c().param({__urlp:r}),s);if(o)if(n.url=e.endpoint,n.method="POST",n.type="POST",n.data=o,delete n.params,n.headers)n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"}}}var b={encryptorOptions:g,enable:function(){if(s().on("start",(function(e,t){t.on("beforesend",(function(e){_(g,{settings:e})}))})),i.ENABLE_XRAY_ENCRYPTOR)a().setConfig({beforeSend:function(e,t){return _(g,{settings:t}),!0}})},initXHR:function(e,t){return _(e,t)}};t.Z=b},2335:function(e,t,n){"use strict";n.r(t),n.d(t,{SLOTS_EXCEPT_SENT:function(){return O},sidebarPlacementsList:function(){return M},Adman:function(){return a.a}});var r=n(63876),a=n.n(r),i=n(60033),o=n.n(i),s=n(21211),l=n(89629),c=n.n(l),d=n(96596),u=n.n(d),f=n(25191),m=n(75273),h=n(88451),p=n(29678),g=n(26699),v=n(93286),_=n(41027),b=n(83260),E=n.n(b),y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},T=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},S={sidebar:s.ADV_FAST_UPDATE_TIMEOUT,list2pane:s.ADV_FAST_UPDATE_TIMEOUT,list3pane:s.ADV_FAST_UPDATE_TIMEOUT,"sidebar-small":s.ADV_FAST_UPDATE_TIMEOUT},O=["sidebar","list2pane","list3pane"];function C(e){if(void 0===e)e=!1;return T(this,void 0,void 0,(function(){var t;return A(this,(function(r){switch(r.label){case 0:return p.locator.setup({enable:!0}),h.Z.enable(),[4,Promise.resolve().then((function(){if(!n.m[77917]){var e=new Error("Module '77917' is not available (weak dependency)");throw e.code="MODULE_NOT_FOUND",e}return n(77917)}))];case 1:if((t=r.sent()).default.subscribeToggleOn("routeend"),e)t.default.router.reload();return[2]}}))}))}if(s.ADMAN_USE_DIRECT_LOAD_ERROR_CALLBACK&&(!s.ADMAN_USE_DIRECT_LOAD_ERROR_CALLBACK_FOR_BLOCKER||(0,m.gU)())){var w="direct"+Math.random().toString(36).slice(2);window[w]=function(e){return T(void 0,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:if(!s.ADMAN_USE_MIMIC_ON_DIRECT_LOAD_ERROR||!s.ENABLE_SMOKESCREEN)return[3,2];else return delete window[w],[4,C(s.ADMAN_REINIT_ON_DIRECT_LOAD_ERROR&&s.ADMAN_REINIT_ON_DETECT)];case 1:return t.sent(),(0,v.ZP)("adman_direct_error_reinit"),[3,3];case 2:e(),(0,v.ZP)("adman_direct_error_target"),t.label=3;case 3:return u().add("ADMAN.DIRECT_LOAD_ERROR"),(0,v.ZP)("adman_direct_error"),[2]}}))}))},(0,m.Fz)("directLoadErrorCallback",w)}if(s.ADMAN_CHECK_MRADX_LOAD)!function(){T(this,void 0,void 0,(function(){var e;return A(this,(function(t){switch(t.label){case 0:(0,v.ZP)("adman_mradx_check"),e=s.ADMAN_USE_MIMIC_ON_MRADX_ERROR&&s.ENABLE_SMOKESCREEN,t.label=1;case 1:return t.trys.push([1,7,,10]),[4,fetch("https://r.mradx.net/img/66/8C6015.svg")];case 2:if(!t.sent().ok)return[3,3];else return(0,v.ZP)("adman_mradx_ok"),[3,6];case 3:if(!e)return[3,5];else return[4,C()];case 4:t.sent(),t.label=5;case 5:(0,v.ZP)("adman_mradx_error"),t.label=6;case 6:return[3,10];case 7:if(t.sent(),!e)return[3,9];else return[4,C()];case 8:t.sent(),t.label=9;case 9:return(0,v.ZP)("adman_mradx_exception"),[3,10];case 10:return[2]}}))}))}();if((0,m.gU)())try{var L=CSSStyleDeclaration.prototype.setProperty;CSSStyleDeclaration.prototype.setProperty=function(e,t,n){try{if("display"===e&&"none"===t&&"important"===n)try{throw new Error}catch(e){if(!e.stack.toString().includes("hideViaDisplayProperty"))return L.apply(this,arguments);else return L.call(this,"display","")}else return L.apply(this,arguments)}catch(e){}}}catch(e){}var k=new(a().Broker)(m.YM,m.Yk),I=[],R=[],D=function(){function e(){var e=this;this.check=function(t,n){var r=m.uZ[t];if(!r.onAutoUpdate&&n)return!1;if(r.urlChangeOnly)return e.checkUrlChanged();else return!0}}return e.prototype.checkUrlChanged=function(){var e=(0,f.p)(),t=e.request;if(e.isReady&&t!==this.lastRequest)return this.lastRequest=t,!0;else return!1},e}(),M=Object.keys({sidebar:!0,"sidebar-small":!0}),P="sidebar",N=null,x=function(e){var t=Object.keys(a().placements());return e.reduce((function(e,n){return e=e.concat(t.filter((function(e){return e.match(n)})))}),[])};function F(e){if(void 0===e)e=0;if(s.ADVERT_CPM_VALUES[e])return s.ADVERT_CPM_VALUES[e];else return s.ADVERT_CPM_RELOAD_CONF[2]}var U=[];var H=E().debounce((function(){(0,m.Fz)("min_cpm",F()),U.forEach(B)}),1e3,null);function B(e){function t(t){var n=e.getExcludeFromAllPlacements();e.setExcludeFromAllPlacements(!0),e.render(!0,t).then(Z.onPlacementRender.bind(Z,e),(function(){return null})),e.setExcludeFromAllPlacements(n)}e.removeListener("adv-render-success",H);var n=null,r=0,a=!1;e.addListener("adv-render-success",(function(e){var i=e.name,o=e.banner,l=e.isAutoUpdate;if(clearTimeout(n),(0,m.Fz)("min_cpm",F()),a)a=!1;else if(o)(0,v.ZP)(["adman_cpm",s.ADVERT_CPM_EXP,i,"success_try",String(r)]),r=0;else if(r++<function(){var e=s.ADVERT_CPM_VALUES.length;if(e>0)return e-1;else return s.ADVERT_CPM_RELOAD_CONF[1]}())(0,m.Fz)("min_cpm",F(r)),n=setTimeout((function(){t(l)}),s.ADVERT_CPM_RELOAD_CONF[0]);else{if(r=0,s.ADVERT_CPM_RELOAD_CONF[3])a=!0,(0,m.Gv)("min_cpm"),t(l);(0,v.ZP)(["adman_cpm",s.ADVERT_CPM_EXP,i,"not_found"])}}))}var Z={_slotsState:{},dwhData:null,_listAdvertCurrent:null,_listAdvertNext:null,_isFeedback2step:!1,_isFirstRender:!0,_isFeedbackActive:s.ADVERT_FEEDBACK,activeListPlacement:"list2pane",visibleAdv:{"spec-project-letter":!1},setVisibleAdv:function(e,t){this.visibleAdv[e]=t},isAdvVisible:function(e){return this.visibleAdv[e]},init:function(){var e=this;this.successSlotHandler=this.handleSlotSuccess.bind(this),this.failSlotHandler=this.handleSlotFail.bind(this),Object.keys(m.uZ).forEach((function(t){var n=null,r=m.uZ[t];if(r.counter)n=(new D).check;var i=y(y({},m.pb[t]),{needRenderTogether:n,excludeFromAllPlacements:r.urlChangeOnly,expId:(0,m.pT)()}),o=new(a().Slot)(r,k),l=new(a().Placement)(i,o);if(l.setExpIdGetter((function(){return(0,m.pT)()})),"sidebar"===l.name)l.setBannerEventListener((function(e){switch(e.type){case"popup_open":case"banner:started":l.sleep(!0,!0);break;case"popup_close":case"banner:finished":l.wakeUp(!0,!0)}}));if("counter-top"===l.name)!function(e){function t(){(0,m.Gv)("mail_event"),e.removeListener("adv-render-fail",t),e.removeListener("adv-render-success",t)}e.addListener("adv-render-fail",t),e.addListener("adv-render-success",t)}(l);if(s.ADVERT_CPM_RELOAD&&!r.counter)!function(e){U.push(e),e.once("adv-render-success",H)}(l);o.on("adv-fetch-success",(function(){return e.successSlotHandler(o,l)})),o.on("adv-fetch-fail",(function(){return e.failSlotHandler(o,l,!1)})),o.on("adv-fetch-force-fail",(function(){return e.failSlotHandler(o,l,!0)})),I.push(o),R.push(l),e._slotsState[t]={status:null,retry:s.ADMAN_MIMIC_ON_FAIL_RETRY_COUNT}})),this._updateBrokerTheme(_.Z.getSelectedModel()),a().attachBroker(k),a().addSlots(I),a().addPlacements(R),a().on("adv-render-fail",this.handleRenderFail.bind(this))},update:function(e){var t=this;if(void 0===e)e={};var n=e.ignoreThrottling,r=void 0===n?!1:n,i=e.forceThrottlingTS,o=void 0===i?{}:i,l=e.isForced,c=void 0===l?!1:l,d=e.isAutoUpdate,u=void 0===d?!1:d,f=Date.now();if(Object.values(a().placements()).filter((function(e){var t=e.name,n=m.uZ[t];if(n.counter&&!n.urlChangeOnly)return!1;if(c)return!0;if("sent"===t)return!1;else return!/list/.test(t)})).forEach((function(e){var n=e.name,a=m.uZ[n],i=m.pb[n],s=o[n]||i.renderThrottling;if(a.counter&&a.urlChangeOnly)e.renderTogether(!0);else if(r)e.render(!0,u).then(t.onPlacementRender.bind(t,e),(function(){return null}));else if(f-e.getLastRenderTS()>s)e.render(!1,u).then(t.onPlacementRender.bind(t,e),(function(){return null}))})),this._fastAutoUpdate)this._scheduleAutoUpdate(s.ADV_FAST_AUTOUPDATE_TIMEOUT,S)},updateOnAction:function(){var e=this;window.clearTimeout(this._idleTimer),this._enableFastAutoUpdate(),this._idleTimer=window.setTimeout((function(){e._disableFastAutoUpdate(),(0,v.ZP)("adv_user-idle")}),s.ADV_IDLE_TIMEOUT),(0,v.ZP)("adv_update-on-action"),this.update({forceThrottlingTS:S})},_enableFastAutoUpdate:function(){this._fastAutoUpdate=!0},_disableFastAutoUpdate:function(){this._fastAutoUpdate=!1},_scheduleAutoUpdate:function(e,t){var n=this;(0,v.ZP)("adv_schedule-autoupdate"),window.clearTimeout(this._scheduleUpdateTimer),this._scheduleUpdateTimer=window.setTimeout((function(){n.update({forceThrottlingTS:t,isAutoUpdate:!0})}),e)},sleep:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=x(e);n.forEach((function(e){if(a().placement(e))a().sleep(e,!0)}))},wakeUp:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=x(e);n.forEach((function(e){if(a().placement(e))a().wakeUp(e)}))},_activeSidebarPlacementFromWidth:function(e){return 160===e?"sidebar-small":"sidebar"},toggleActiveSidebarPlacement:function(e){var t=this._activeSidebarPlacementFromWidth(e);if(t===P)return null;var n=a().placement(P);if(n)n.sleep(),n.detachFromContainer();P=t;var r=a().placement(t);if(r)r.wakeUp(!1,!0);return r},getActiveSidebarPlacement:function(){return P},toggleMimic:function(e){if(I.forEach((function(t){t.forceFail=e})),k.clearBatches(),R.forEach((function(e){e.clearPendingRender()})),(0,v.ZP)(["adman_mimic_toggle",e]),e)o().setConfig({defaultParams:{dwh:{mimic:1}}})},hasRequest:function(){return Object.values(this._slotsState).some((function(e){return e.status}))},handleSlotSuccess:function(e){var t=this._slotsState[e.name];if("fail"===t.status||"pending"===t.status)(0,v.ZP)({type:"adman_was_fail",intervals:[[e.name,1]]});if(t.status="success",t.retry=s.ADMAN_MIMIC_ON_FAIL_RETRY_COUNT,(0,v.ZP)(["adman_slot_success"]),!this._successOnWLRadarSent&&(0,m.ao)())(0,v.ZP)("adman_success_on_WL"),this._successOnWLRadarSent=!0},handleSlotFail:function(e,t,n,r){var a=m.uZ[e.name].mimicId,i=this._slotsState[e.name];if(n){if((0,v.ZP)(["adman_slot","force-fail"]),i.status="fail",a){if(t.name.includes("list2pane"))t.name="list2pane";else if(t.name.includes("list3pane"))t.name="list3pane";g.Z.insert(e,t,this.onPlacementRender.bind(this,t),r)}}else if("success"===i.status||"pending"===i.status){if("success"===i.status)(0,v.ZP)({type:"adman_was_success",intervals:[[e.name,1]]});if(i.status="pending",i.retry--<=0)(0,v.ZP)({type:"adman_after_retry",intervals:[[e.name,1]]}),(0,v.ZP)(["adman_slot","fail"]),this.emit("slot:fail",e,t),i.status="fail",g.Z.insert(e,t,this.onPlacementRender.bind(this,t),r)}else(0,v.ZP)(["adman_slot","fail"]),this.emit("slot:fail",e,t),i.status="fail"},handleRenderFail:function(e){window.require(["trackJS"],(function(t){t.sendRadar("banners",{adman:!0,error:e.error,params:{slot:e.banner.slot,banner:e.banner.banner,test_id:e.testId,site_id:e.siteId,sz:e.siteZone}},"octavius_banners")}))},handleThemeApply:function(e){var t=this;if(N!==e.id)a().clearCache(),Promise.all([n.e(5217),n.e(9308),n.e(7604),n.e(1438),n.e(2708)]).then(n.bind(n,26235)).then((function(n){n.default.FeastBlock.clearLetterListItemAdvCache(),t._updateBrokerTheme(e),t.update({ignoreThrottling:!0,isForced:!0})}))},_updateBrokerTheme:function(e){N=e.id,(0,m.Fz)("isDarkTheme",e.isDarkMode()?1:0),k.setTheme(new(a().Theme)((0,m.OP)(e)))},onPlacementRender:function(e,t){var n=this,r=e.name;if(("sidebar"===r||"sidebar-small"===r)&&t&&this._isFeedbackActive){var a=t.dwhChain,i=t.processed;if(a&&!i)t.processed=!0,setTimeout((function(){for(var e=0,t=a;e<t.length;e++){var r=t[e];n.sidebarVisibleCallback(r)}}),s.ADV_DIRECT_READY_TIMEOUT)}},sidebarVisibleCallback:function(e){this.emit("sidebar:visible"),this.dwhData=e;var t=this._isFeedback2step?"ad-feedback-2-upd":"ad-feedback-upd",n={dwh:y({state:t},e)};if(!this._isFirstRender)o().send(t,n);this._isFirstRender=!1},showAdFeedback:function(){var e=s.ADVERT_FEEDBACK_CONFIG2.chance;if(!e)return!1;else return s.ADVERT_FEEDBACK&&Math.random()<1/e},setFeedback2Step:function(){this._isFeedback2step=!0},setFeedbackUnactive:function(){this._isFeedbackActive=!1},on:function(e,t){this.emitter.addListener(e,t)},off:function(e,t){this.emitter.removeListener(e,t)},setActiveListPlacement:function(e){this.activeListPlacement=e}};c().apply(Z),Z.init(),_.Z.themes.one("usertheme:apply",(function(e){Z._updateBrokerTheme(e)})),_.Z.themes.on("themes:apply",Z.handleThemeApply.bind(Z)),t.default=Z},29678:function(e,t,n){"use strict";n.r(t),n.d(t,{locator:function(){return o},selector:function(){return s}});var r=n(91140),a=n(50987),i=n(21211),o=new r.Z({match:i.SMOKESCREEN_LOCATORS,styleSheetsOptions:{stylesAlwaysInHead:!0,substituteRelative:!0,justOneSelectorArr:a.Z.oneSelectorRules}}),s=o.selector.bind(o)},26699:function(e,t,n){"use strict";var r,a=n(21528),i=n(96419),o=n.n(i),s=n(60033),l=n.n(s),c=n(19275),d=n(50987),u=n(21211),f=n(96596),m=n.n(f),h=n(75273),p=n(88451),g=n(29678),v=n(93286),_=n(41027),b={lazyInit:function(){if(r=o()({previewId:location.search.match(/[?&]preview=(\d+)/)&&RegExp.$1,pageId:String(u.MIMIC_PARTNER_ID),expId:u.MIMIC_EXP_ID,ignoreTimeout:!0,project:"octavius",features:a.default,locator:g.locator,logger:m(),xray:l(),email:d.Z.get("initialUser").email,broker:{getUrl:function(e){return u.MIMIC_ENDPOINT+"/"+e},handleResponse:function(e,t){var n=t.response&&t.response.result||{},r=t.ajaxOptions||{};r.url="/api/v1/rb-mimic/"+e,m().add("mimic response",{ajax:r,status:t.status,result:n});var a=r.__ts,i=(new Date).getTime()-a,o={};if(o[e+"-hit"]=i,t.xhr)o[e+"-h_"+t.xhr.status]=i;if(n.status)o[e+"-a_"+n.status]=i;l().send("mimic-api",{i:o})},APIEncryptor:{encryptorOptions:p.Z.encryptorOptions,initXHR:p.Z.initXHR}}}),(0,h.ao)())(0,v.ZP)("adman_mimic_on_wl")},setLayoutManager:function(e){this.layoutManager=e},insert:function(e,t,n,a){if(void 0===a)a=0;if(!r)this.lazyInit();var i=h.uZ[t.name],o=this.layoutManager.isLessThen("xs")?"3pane":this.layoutManager.getType();_.Z.load().then((function(){var e=_.Z.getSelectedModel(),s=_.Z.getModel(c.Z.themeId),l=e;if(s)l=e.isApplyed()?e:s;var d={index:a,type:t.name,limit:i.mimicLimit,statId:i.statId,slotId:i.mimicId,originalSlotId:i.id,sidebarSmall:160===t._width,theme:(0,h.OP)(l),sizes:(0,h.ap)(o),pane:o},f=t._container;if(f&&t.active&&!i.counter&&(!u.NO_MIMIC_ON_WLIST||!(0,h.ao)()||u.MIMIC_IGNORE_HAS_WLIST))r.insert(f,d).then((function(e){if(t.setLastRenderTS(),n)n(e)})).catch((function(e){if(u.IS_DEBUG)console.error(e)}))}))}};t.Z=b},39939:function(e,t,n){"use strict";n.r(t),n.d(t,{NO_AUTH_ROUTES:function(){return p},default:function(){return g}});var r,a,i=n(19275),o=n(89629),s=n.n(o),l=n(96596),c=n.n(l),d=Promise.resolve(s().apply({show:function(){var e=this,t=c().scope("service/authgate",{auth:i.Z.auth});Promise.resolve().then(n.bind(n,21334)).then((function(n){var r=n.default;t.call((function(){return Promise.resolve(r.relogin()).then((function(n){t.add("email",{email:n}),r.keepalive(),e.emit("auth",n)}))}))}))}})),u=n(36889),f=n.n(u),m=n(25191),h=n(66423),p=["#error"];n.n(h)().errorHandler.push({status:"denied:user",process:function(e){var t=(0,m.p)();if(p.includes(t.route.id))return null;if(!a)a=new Promise((function(t){d.then((function(n){n.show(),n.one("auth",(function(n){a=null,e.data.email=n,t()}))}))}));return a}});var g=s().apply({version:"0.1.0",user:null,isAuth:function(){return!!this.user},setUser:function(e){return this.user=f().map(e),this.trigger("login",this.user),e},login:function(){return r=r||this.loadUser().then((function(e){return Promise.resolve().then(n.bind(n,21334)).then((function(e){return e.default.keepalive()})),e}))},loadUser:function(){var e=this;return f().login().then((function(t){return e.setUser(t),t})).catch((function(){return e.user}))}})},21334:function(e,t,n){"use strict";n.r(t);var r=n(21528),a=n(14671),i=n(19275),o=n(50987),s=n(21211),l=n(25191),c=n(45648);function d(e){window.location.href=e+"?page=".concat(encodeURIComponent(window.location.href))+"&allow_external=1"}function u(e){var t=r.default.has("disable-choice"),n=i.Z.get("urls.loginUrl")||"https://account.mail.ru/login";if(!t)c.default.load().then((function(){var t=Object.assign({page:location.protocol+"//"+location.host,allow_external:!0,modal:!1,opener:"octavius",mode:"simple",lang:"ru_RU"},e),r=__PH.authForm;if(!r.isVisible()){var a=(0,l.p)();if(a&&a.isReady){if(e.modal)document.body.style.overflow="hidden";r.show(t)}else d(n)}}));else d(n)}function f(){return(0,a.S)(window.vkMiniApp).catch((function(){var e=(0,l.p)();return e.go("#error",{},e.activeUrl.query)}))}function m(){var e;if(s.IS_VK_MINI_APP&&(null===(e=window.vkMiniApp)||void 0===e?void 0:e.authorized))return f();else return u({modal:!0,formType:"relogin",email:__PH.activeUser(),email_vkc_auth:o.Z.get("initialUser.vkc_user_id")?"1":""})}t.default={login:function(){return new Promise((function(){return u()}))},relogin:function(){return new Promise((function(){return m()}))},keepalive:function(){c.default.load().then((function(){__PH.on("authLost",(function(){return m()})),__PH.on("loginRequest",(function(){return u()})),__PH.on("authChange",(function(e){var t,n=e.data.email;if(s.IS_VK_MINI_APP&&(null===(t=window.vkMiniApp)||void 0===t?void 0:t.authorized))return f();if(!s.DISABLE_DOMAIN_AUTHCHECK)if(n.endsWith("@".concat(s.VK_DOMAIN))||!s.IS_VK_HOST)if(!n.endsWith("@".concat(s.VK_DOMAIN))||s.IS_VK_HOST)location.replace("/inbox");else location.replace(i.Z.get("urls.vkMailUrl"));else location.replace(i.Z.get("urls.baseMailUrl"));else location.replace("/inbox")}))}))}}},85271:function(e,t,n){"use strict";n.d(t,{X:function(){return g}});var r,a,i=n(55535),o=n(17717),s=n.n(o),l=n(60033),c=n.n(l),d=n(50987),u=n(21211),f=n(89629),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},p=null,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.loadTools=function(){return!a&&(a=n.e(9318).then(n.t.bind(n,69318,23)).then((function(e){return e.init({clientId:"b4c073bb6c5a4b1b84d2c7d2a1bceb9b",scopes:["calls.api"]}),{oauth:e}}))),a},t.prototype.createRoom=function(){var e=this;return new Promise((function(t,n){if("function"!=typeof window.fetch)c().send("calls_create_error_fetch-unsupported"),n("fetch-unsupported");var r=setTimeout((function(){c().send("calls_create_error_timeout"),n("timeout")}),u.CALLS_CREATE_ROOM_TIMEOUT);e.loadTools().then((function(e){var a=e.oauth;a.auth((function(e){var i=e.status,o=e.access_token;if(i!==a.AUTH_CONNECTED)c().send("calls_create_error_oauth",{rlog:"calls_error_oauth",rlog_message:JSON.stringify(i)}),n("oauth");fetch(u.CALLS_CREATE_ROOM_URL,{method:"POST",headers:{Authorization:"Bearer "+o}}).then((function(e){if(clearTimeout(r),e.ok)e.json().then((function(e){if(!e.url)c().send("calls_create_error_invalid-body"),n("invalid-body");c().send("calls_create_success"),t(e.url);var r=s().get("used-calls");if(!r||!r.state)null==r||r.save({state:!0,time:!0})}));else if(429===e.status)c().send("calls_create_error_ratelimit"),n("ratelimit");else c().send("calls_create_error_api_"+e.status),n("api")})).catch((function(e){clearTimeout(r),c().send("calls_create_error_network",{rlog:"calls_error_api",rlog_message:JSON.stringify(e)}),n("network")}))}))})).catch((function(e){c().send("calls_create_error_load",{rlog:"calls_error",rlog_message:JSON.stringify(e)}),n("load")}))}))},t.prototype.getTemplate=function(e){var t=i18n("Перейдите по ссылке, чтобы подключиться к звонку:");return"".concat(t,' <a href="').concat(e,'" data-call-url="').concat(e,'">').concat(e,"</a><br/>\x3c!--focus--\x3e")},t.prototype.getPlannedTime=function(e){var t=((e||new Date).getHours()+((e||new Date).getMinutes()>49?2:1))%24;return(t<10?"0":"")+t+":00"},t.prototype.getSubject=function(){return i18n("Приглашение на звонок")},t.prototype.getCallsAPIClient=function(){var e=this;if(!p)p=(0,i.createCallsAPIClient)({callBaseUrl:u.CALLS_BASE_URL,email:d.Z.initialUser.email,incomingCalls:u.CALLS_P2P,xraySend:c().send.bind(c()),onShow:function(t){return e.emit("update",h({action:"start"},t))},onHide:function(){return e.emit("update",{action:"end"})}});return p},t}(n.n(f)());t.Z=new g},5339:function(e,t,n){"use strict";n.r(t),n.d(t,{EntityType:function(){return o},Errors:function(){return r},PromiseStatus:function(){return a},default:function(){return v}});var r,a,i,o,s=n(21211),l=n(18053),c=n(60033),d=n.n(c),u=n(70325),f=n(93286),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},h=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};!function(e){e.ResponseNotOK="response_not_ok",e.RequestError="request_err",e.ResponseNoAuth="response_no_auth",e.ResponseParentNotFound="response_parent_not_found",e.RequestAborted="request_aborted"}(r||(r={})),function(e){e.fulfilled="fulfilled",e.rejected="rejected"}(a||(a={})),function(e){e.UserInfo="user/info",e.Create="private/create",e.Share="private/share",e.MakeDirectory="private/mkdir",e.List="private/list",e.Move="private/move",e.AgreeLa="user/agree-la",e.Delete="private/delete",e.Quota="user/quota"}(i||(i={})),function(e){e.directory="d",e.file="f"}(o||(o={}));var p=null,g=null,v=new(function(){function e(){this.ABORT_STATUS_CODE=0,this.NO_AUTH_STATUS_CODE=403,this.PARENT_NOT_FOUND_CODE=404}return e.prototype.getRequestParams=function(e){var t=this;if(void 0===e)e="GET";return{type:e,processData:!1,customRequestIdHeader:"X-Req-ID",isAuthError:function(e){return e.status===t.NO_AUTH_STATUS_CODE},oauthFeature:l.K.CloudDnD}},e.prototype.getResponseInfo=function(e){var t=e||{};return{status:t.status,body:t.body,options:t.options,url:t.url}},e.prototype.getErrorInfo=function(e){var t=e||{};return{status:t.status,url:t.url,errorText:t.error,responseText:t.responseText,statusText:t.statusText,body:t.body}},e.prototype.isAgreedLA=function(){var e=this;if(p)return Promise.resolve(p);var t="".concat(s.CLOUD_OPEN_API_URL).concat(i.UserInfo),n=m({force:!0},this.getRequestParams());return(0,u.Z)(t,null,n).then((function(e){var t;return t=(null==e?void 0:e.body)||{},p=t["agreed-la"],g=t.upload_url,p})).catch((function(t){var n=t.status,a=r.RequestError;if("number"==typeof n){(0,f.ZP)(["cld-openapi-user-info-err",n]),a=n===e.NO_AUTH_STATUS_CODE||n===e.PARENT_NOT_FOUND_CODE?r.ResponseNoAuth:r.ResponseNotOK}else(0,f.ZP)("cld-openapi-user-info-err-nost");return Promise.reject({type:a,err:e.getResponseInfo(t)})}))},e.prototype.prepareFolder=function(e,t){if(void 0===t)t=s.CLOUD_LOAD_DIRECTORY;if(e.length<=1)return Promise.resolve(t);var n=(new Date).toLocaleString().replace(/:/g,"-"),r="".concat(t,"/").concat(n);return this.createFolder(r)},e.prototype.withCreateFolder=function(e,t){var n=this;return this.getFoldersTree().then((function(r){var a=null==r?void 0:r.map((function(e){return e.path}));if(!(null==a?void 0:a.find((function(t){return t===e}))))return n.createFolder(e).then(t);else return t(e)}))},e.prototype.getErrorByStatus=function(e){var t=this.NO_AUTH_STATUS_CODE,n=this.PARENT_NOT_FOUND_CODE;switch(e){case this.ABORT_STATUS_CODE:return r.RequestAborted;case t:return r.ResponseNoAuth;case n:return r.ResponseParentNotFound;default:return r.ResponseNotOK}},e.prototype.createFiles=function(e,t,n){var a=this;if(void 0===t)t=s.CLOUD_LOAD_DIRECTORY;if(void 0===n)n={};var i=h([],e,!0).sort((function(e,t){return e.size-t.size})),o=i[0],l=i.slice(1);return this.withCreateFolder(t,(function(t){return a.prepareFolder(e,t).then((function(e){return a.createFile(o,e,n).then((function(t){var n=l.map((function(t){return a.createFile(t,e)}));return Promise.allSettled(h([Promise.resolve(t)],n,!0))})).catch((function(t){var n=t.type;if([r.ResponseParentNotFound,r.ResponseNoAuth].includes(n))return Promise.reject(t);var i=l.map((function(t){return a.createFile(t,e)}));return Promise.allSettled(h([Promise.reject(t)],i,!0))}))}))})).catch((function(e){var t=l.map((function(){return Promise.reject(m(m({},e),{type:"".concat(e.type,"_1st")}))}));return Promise.allSettled(h([Promise.reject(e)],t,!0))}))},e.prototype.createFile=function(e,t,n){var a=this;if(void 0===t)t="";if(void 0===n)n={};var i=m(m({force:!0},this.getRequestParams("PUT")),n);if(!g)return Promise.reject({type:r.RequestError,err:"no upload_url"});var o="".concat(g).concat(t,"/").concat(e.name.normalize("NFC"));return(0,u.Z)(o,e,i).then((function(e){return null==e?void 0:e.body})).catch((function(e){var t=e.status,n=r.RequestError;if("number"==typeof t)(0,f.ZP)(["cld-openapi-create-file-err",t]),n=a.getErrorByStatus(t);else(0,f.ZP)("cld-openapi-create-file-err-nost");return Promise.reject({type:n,err:a.getResponseInfo(e)})}))},e.prototype.createWebLink=function(e){var t=this,n=m({force:!0},this.getRequestParams("POST")),a="".concat(s.CLOUD_OPEN_API_URL).concat(i.Share).concat(e);return(0,u.Z)(a,null,n).then((function(e){var t;return null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.url})).catch((function(e){var n=e.status,a=r.RequestError;if("number"==typeof n)(0,f.ZP)(["cld-openapi-create-weblink-err",n]),a=n===t.NO_AUTH_STATUS_CODE?r.ResponseNoAuth:r.ResponseNotOK;else(0,f.ZP)("cld-openapi-create-weblink-err-nost");return Promise.reject({type:a,err:t.getResponseInfo(e)})}))},e.prototype.createFolder=function(e){var t=this,n=m({force:!0},this.getRequestParams("POST")),a="".concat(s.CLOUD_OPEN_API_URL).concat(i.MakeDirectory).concat(e);return(0,u.Z)(a,null,n).then((function(e){var t;return null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.path})).catch((function(e){var n=e.status,a=r.RequestError;if("number"==typeof n)(0,f.ZP)(["cld-openapi-mkdir-err",n]),a=t.getErrorByStatus(n);else(0,f.ZP)("cld-openapi-mkdir-err-nost");return Promise.reject({type:a,err:t.getResponseInfo(e)})}))},e.prototype.getFolderContent=function(e){var t=this;if(void 0===e)e="/";var n="".concat(s.CLOUD_OPEN_API_URL).concat(i.List).concat(e),a=m({force:!0},this.getRequestParams());return(0,u.Z)(n,null,a).then((function(e){return null==e?void 0:e.body})).catch((function(e){var n=e.status,a=r.RequestError;if(n)(0,f.ZP)(["cld-openapi-list-err",n]),a=n===t.NO_AUTH_STATUS_CODE?r.ResponseNoAuth:r.ResponseNotOK;return Promise.reject({type:a,err:e})}))},e.prototype.getFoldersTree=function(){return this.getFolderContent().then((function(e){var t,n;return null===(n=null===(t=e.list)||void 0===t?void 0:t.filter((function(e){return"folder"===e.kind})))||void 0===n?void 0:n.map((function(e){return e}))}))},e.prototype.move=function(e,t,n){var a=this;if(void 0===n)n=!1;if(e===t)return Promise.resolve(null);var o="".concat(s.CLOUD_OPEN_API_URL).concat(i.Move),l=m({force:!0},this.getRequestParams("POST")),c={src_path:e,dst_path:t,overwrite:n};return(0,u.Z)(o,JSON.stringify(c),l).then((function(e){return null==e?void 0:e.body})).catch((function(e){var t=e.status,n=r.RequestError;if(t)(0,f.ZP)(["cld-openapi-move-err",t]),n=t===a.NO_AUTH_STATUS_CODE?r.ResponseNoAuth:r.ResponseNotOK;return Promise.reject({type:n,err:e})}))},e.prototype.delete=function(e){var t=this,n="".concat(s.CLOUD_OPEN_API_URL).concat(i.Delete).concat(e),a=m({force:!0},this.getRequestParams("POST"));return(0,u.Z)(n,null,a).then((function(e){return null==e?void 0:e.body})).catch((function(e){var n=e.status,a=r.RequestError;if(n)(0,f.ZP)(["cld-openapi-delete-err",n]),a=n===t.NO_AUTH_STATUS_CODE?r.ResponseNoAuth:r.ResponseNotOK;return Promise.reject({type:a,err:e})}))},e.prototype.agreeLa=function(){var e="".concat(s.CLOUD_OPEN_API_URL).concat(i.AgreeLa),t=this.getRequestParams("POST");return(0,u.Z)(e,null,t).catch((function(e){return Promise.reject({err:e})}))},e.prototype.getUserQuota=function(){var e=this,t="".concat(s.CLOUD_OPEN_API_URL).concat(i.Quota),n=this.getRequestParams();return(0,u.Z)(t,null,n).then((function(e){return null==e?void 0:e.body})).catch((function(t){return Promise.reject(e.getErrorInfo(t))}))},e.prototype.getQuotaDWH=function(e){return function(e,t){return e().then((function(e){return e})).catch((function(e){d().send("union_quota",{i:"error",rlog:"union_quota_err",rlog_message:{err:e,placement:t}})}))}(this.getUserQuota.bind(this),e).then((function(t){if(t){var n=t.quota,r=t.used.total;return{client_id:"UA-43037165-12",size_quota:r,free_quota:n-r,placement:e}}}))},e}())},50542:function(e,t,n){"use strict";n.r(t);var r,a,i,o=n(99150),s=n(21211),l=n(26812),c=n(83183),d=n(56220),u=n(96596),f=n.n(u),m=n(39783),h=n.n(m),p=n(15907),g=n(93286),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},_=f().getScope("compose.mail.ru");function b(e,t,n){if(a=new e({items:[],router:app,layout:p.default}),t.register(a),n.register(a),!i)i=function(){if(!s.RENDER_COMPOSE_TO_BODY_START)return document.body;var e=document.createElement("div"),t=document.body,n=t.firstChild;if(n)t.insertBefore(e,n);else t.appendChild(e);return e}();return a.renderTo(i),a}function E(){return!r&&(r=new Promise((function(e){var t;Promise.all([Promise.resolve().then(n.bind(n,39939)),n.e(8524).then(n.t.bind(n,68524,23)),Promise.all([n.e(8524),n.e(4709),n.e(2387),n.e(4260)]).then(n.bind(n,44260)),Promise.resolve().then(n.bind(n,22737)),Promise.resolve().then(n.bind(n,63298)),Promise.all([n.e(4131),n.e(1836)]).then(n.t.bind(n,71836,23)),Promise.resolve().then(n.t.bind(n,36876,23)),n.e(4824).then(n.bind(n,44824)),(t=["compose.mail.ru"],new Promise((function(e){window.require(t,e)})))]).then((function(t){e({authService:t[0].default,MessageFormData:t[1].default||t[1],view:b(t[2].default,t[3].default,t[4].default),ui:t[8]})}))}))),r}var y={open:function(e){var t=this;return E().then((function(n){var r=e.mode;if(s.COMPOSE_USER_LOADING_DISABLED||"template"===r){var a=n.authService.user;return t._open(v({user:a,tools:n},e))}else return n.authService.loadUser().then((function(r){return t._open(v({user:r,tools:n},e))}))}))},_open:function(e){var t=this,n=e.user,r=e.mode,a=e.tools,i=e.source,u=e.forward,f=e.correspondents,m=e.model,p=e.body,v=e.subject,b=e.additionalOptions,E=(0,d.M9)(n),y=o.default.getData(),T=y.collectors,A=y.aliases;(0,g.ZP)(["compose_open",r]),_.add("compose open mode",r);var S=(0,l.P)(),O=S.params,C=S.helpers;return new a.MessageFormData(O,C).create({mode:r,source:i,forward:u,from:n.getEmail(),collectors:T,aliases:A,correspondents:f,signature:E,model:m,body:p,subject:v,remove_emoji_opts:c.Y}).then((function(e){if(s.CKE_DEFAULT_STYLES){var t=e.get("body.html");e.set("body.html",'<div id="cke-editable-custom" style="'.concat(s.CKE_DEFAULT_STYLES,'">').concat(t,"</div>"))}return a.view.add(e,b),e}),(function(){if("draft"===r&&i)t.open({mode:i.mode,model:new(h())({id:i.id}),body:p,correspondents:f})}))},add:function(e,t){var n=void 0===t?{}:t,r=n.autosend,a=void 0===r?!1:r,i=n.isDragAndDrop,o=n.dragAndDropItem;return E().then((function(t){return t.view.add(e,{autosend:a,isDragAndDrop:i,dragAndDropItem:o}),e}))},preload:function(){return E()},getView:function(){return a},onSent:function(e,t){return E().then((function(n){return n.view.layerPromise=t,n.view.onSent(e),e}))},onFailSent:function(e,t){return E().then((function(n){return n.view.onFailSent(e,t),e}))},isComposeActive:function(){if(a&&a.isMounted())return a.is("active");else return!1},insertHtml:function(e){this.getView().insertHtml(e)}};t.default=y},66225:function(e,t){"use strict";var n;t.Z={setup:function(e){var t=new e({router:app});t.renderTo(document.body),n=t},teardown:function(){n.destroy(),n=null},show:function(e,t){this.getInstance().onContextmenu(e,t)},getInstance:function(){return n}}},37714:function(e,t,n){"use strict";n.d(t,{j:function(){return v}});var r=n(21211),a=n(22385),i=n(76037),o=n.n(i),s=n(53152),l=n.n(s),c=n(60680),d=n.n(c),u=n(13624),f=n.n(u),m=n(66423),h=n.n(m),p=n(78267),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},v="Почтовые вложения",_={all:Object.entries(r.VIEWER_EDITORS).reduce((function(e,t){var n=t[0],r=t[1];return e[n]=g(g({},r),{supportedTypes:r.supportedTypes&&r.supportedTypes.split(","),id:n,priority:parseInt(r.priority,10)}),e}),{}),createCloudFolder:function(){return d().execute({add:[{folder:"/",name:v}]}).catch((function(e){var t=e.error;if("exists"===t.get("body.home.error"))return Promise.resolve(t);else if(t.get("status")==h().statuses.payment_required&&"cloud_not_exists"===t.get("body.error"))p.default.open("cloud-unavailable",{},{dimmer:!0,compact:!0,"close-on-dimmer":!0,"close-on-esc":!0,resolvable:!0}).then((function(){window.close()}),(function(){window.close()}));else return Promise.reject(null)}))},downloadToCloud:function(e,t,n){var r;if("cloud_stock"===t){var a=n.split(":");r=l().execute({folder:"/Почтовые вложения",files:[{bundle_id:a[0],file_id:a[1]}]}).then((function(e){return Promise.resolve(e.result.get("body[0][0]"))}),(function(){return Promise.reject(null)}))}else r=o().execute({folder:"/Почтовые вложения",need_real_filename:!1,ids:["".concat(e,";").concat(n)]}).then((function(e){return Promise.resolve(e.result.get("body[0]"))}),(function(){return Promise.reject(null)}));return r},open:function(e,t){var n=this,r=t.messageId,i=t.attachType,o=t.attachId;return this.createCloudFolder().then((function(){return n.downloadToCloud(r,i,o).catch((function(){return Promise.reject(null)}))})).then((function(e){return h().token().then((function(t){return Promise.resolve({token:t,fileName:e})}))})).then((function(t){var n=t.fileName,r=t.token,i=f().queryString.stringify({"x-email":h().setup().email,token:r,from:"mail"}),o="https://cloud.mail.ru/"+e+"/edit/home"+(0,a.R)(n)+"?"+i;location.assign(o)})).catch((function(){return Promise.reject("Не получилось открыть файл в редакторе")}))}};t.Z=_},53785:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(28692),a=n(21211),i=n(60040),o={base:"https://img.imgsmail.ru/hb/e.mail.ru/static/",folder:"emoji",ext:".svg",className:"emoji",attributes:function(){return{"data-type":"emoji-icon-fallback"}},callback:function(e,t){var n=t.base,r=t.size,a=t.ext;return"".concat(n).concat(r,"/").concat(e).concat(a)}},s={parse:function(e){if(!e)return"";else return i.Z.parse(e,o)},selector:'[data-type="emoji-icon-fallback"]'},l=function(e,t){if(a.EMOJI_FALLBACK&&e)r.yc.time("emoji-fallback"),s.parse(e),r.yc.timeEnd("emoji-fallback",{appendix:t})};t.Z=s},57579:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(21528),a=n(21211),i=n(54844),o=(e,t)=>new RegExp("^(https?:)?//([\\w\\.\\-]+\\.)?"+t).test(e),s=n(55540),l=n(88695),c=location.protocol,d=location.hostname,u=location.pathname,f=new RegExp("^"+c+"//"+d+"("+u+"|/)#"),m=document.createElement("div"),h=new(function(){function e(){this.ERROR_HASH_URL="ERROR_HASH_URL",this.ERROR_EMPTY_URL="ERROR_EMPTY_URL",this.ERROR_NO_INFO_CHECK="ERROR_NO_INFO_CHECK"}return e.prototype.removeRedirectFromLinks=function(e){for(var t=e.length;t--;)this.getNodeInfo(e[t])},e.prototype.removeRedirectFromText=function(e){m.innerHTML=e;for(var t=m.querySelectorAll("a"),n=t.length;n--;)this.getNodeInfo(t[n]);return m.innerHTML},e.prototype.getNodeInfo=function(e){var t=e.__originUrl||e.href||e.action,n={};if(!t)return console.warn("[fishing] no url in node"),n;try{var a=e.innerHTML,l=e.childNodes,c=e.tagName,d=(0,s.Z)(t),u=r.default.has("clicker-proxy")?r.default.get("clicker-proxy").data:"checklink.mail.ru";if(d.url&&o(t,u)){var m=(0,s.Z)(d.url);Object.assign(d,m)}if(["check","url","u","js"].forEach((function(e){n[e]=d[e]})),t.includes("#")&&f.test(t))(n={})[t]="";if(n.check&&n.url&&!n.u){if(!n.js&&"FORM"!==c)t=t.replace(/^([^#]+)/,"$1&js=1");if("https:"==location.protocol&&/^http/i.test(n.url)||i.Z.isIE)n.redir=1}if(n.real=t,n.attr=e.href?"href":"action",n.u)n.check=1,n.url=n.u,n.noajax=1;if(n.check&&n.url){if(e.target="_blank",e.__originUrl=n.real,e.setAttribute(n.attr,"A"===c||n.u?n.url:t),e.removeAttribute("onclick"),i.Z.isIE&&"A"===c&&1==l.length&&3==l[0].nodeType)e.innerHTML=a}else n.url=t}catch(e){console.warn("[fishing] error caught",e)}return n},e.prototype.revertUrl=function(e){var t=this.getNodeInfo(e),n=e.href,r="A"===e.tagName;if(t.check&&r)e.href=t.real,setTimeout((function(){e.href=n}),300)},e.prototype.verify=function(e,t){if(void 0===t)t={};var n=this.getNodeInfo(e),r="FORM"===e.tagName,a=t.sync,i=void 0===a?!1:a,o=t.callback,s=i?void 0===o?{resolve:function(){},reject:function(e){return e}}:o:Promise,l=n.url;if(!l)return s.reject(this.ERROR_EMPTY_URL);if(l.includes("#")&&e.hostname===location.hostname&&(e.pathname===location.pathname||"/"===e.pathname))return s.reject(this.ERROR_HASH_URL);if(n.noajax&&!r)return s.resolve();if(!n.check)return s.reject(this.ERROR_NO_INFO_CHECK);else return s.reject()},e.prototype.go=function(e,t,n){if(void 0===t)t=!1;if(void 0===n)n={};if(e.__originUrl)e.__originUrl=(0,l.Z)(e.__originUrl,n);var r=this.getNodeInfo(e),i="FORM"===e.tagName,o=r[r.redir||r.noajax?"real":"url"],s=null;if(r.redir)o+="&redir=1";if(i)document.createElement("form").submit.call(e);else{if(a.IS_CHROME)s=window.open(o,"_blank","toolbar=yes, location=yes, status=yes, menubar=yes, scrollbars=yes, noopener=true");else s=t||window.open(o);if(s)s.opener=null}},e}())},74456:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r={};function a(e){if(!r[e])r[e]=new Promise((function(t,n){window.require([e],(function(r){if(!r)n(new Error('Module "'.concat(e,'" is undefined')));else t(r)}))}));return r[e]}},38524:function(e,t,n){"use strict";n.d(t,{A:function(){return s},Z:function(){return f}});var r=n(21211),a=n(50),i=n.n(a),o=n(39939);function s(e){return 1024*e}var l=null;function c(e){i().MAX_AS_LINK_SIZE=r.MAX_CLOUD_STOCK_SIZE_LIMIT;var t=e.get("common_purpose_flags.enabled_mbox_quotas"),n=e.get("mbox_quotas");if(null!==r.MAX_ATTACHES_SIZE_LIMIT&&!t)i().MAX_SIZE=r.MAX_ATTACHES_SIZE_LIMIT;if(t&&n)i().MAX_SIZE=s(n.attach),i().MAX_AS_LINK_SIZE=s(n.link_attach)}var d=function(e,t){return c(t)};function u(){var e=o.default.user;c(e),null==l||l.off("change",d),e.on("change",d),l=e}function f(){o.default.on("login",u)}},82921:function(e,t,n){"use strict";var r=n(21211),a=n(74456),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.Z=function(e){return(0,a.Z)("lastseen.strings").then((function(t){if(!e)return null;if(e.status_id!==r.LASTSEEN_SHOW_TIME_STATUS)return e;var n=t.default({unixTimestamp:e.timestamp});return i(i({},e),{status:n||e.status})}))}},50375:function(e,t,n){"use strict";n.r(t),n.d(t,{SecureFolderNotOpenError:function(){return h},isJSSDKCompliantObject:function(){return p}});var r,a=n(21211),i=n(89629),o=n.n(i),s=n(83183),l=n(4872),c=n.n(l),d=n(66423),u=n.n(d),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function h(e){if(Error.call(this),this.name="Secure Folder Not Open Error",this.folderId=e,Error.captureStackTrace)Error.captureStackTrace(this,h);else this.stack=new Error("empty").stack}function p(e){return!(!e||"object"!=typeof e||"function"!=typeof e.is||"function"!=typeof e.get)}h.prototype=Object.assign(Object.create(Error.prototype),{constructor:h,getFolderId:function(){return this.folderId}});var g=new(function(e){function t(){var t=e.call(this)||this;return t.rpcRequestResults={},t.foldersLastModified={},t.latestFoldersList=null,t}return f(t,e),t.getCacheKey=function(e){var t,n,r=Object.keys(e.filters||{});return r.sort(),e.folder+":"+e.offset+":"+e.limit+":"+r.join("")+":"+"".concat(null===(t=e.sort)||void 0===t?void 0:t.type,"-").concat(null===(n=e.sort)||void 0===n?void 0:n.order)},t.getTimestamp=function(){return Math.floor(.001*Date.now())},t.prototype.load=function(e){var n=this;e.folder=parseInt(e.folder||0,10),e.offset=e.offset||0,e.limit=e.limit||a.LIST_LIMIT,e.filters=e.filters||{},e.sort=e.sort||{};var r=c().all.get(e.folder);if(r&&!r.isSecureOpen())return Promise.reject(new h(r.get("id")));var i=t.getCacheKey(e),o=t.getTimestamp(),l=this.foldersLastModified[i];if(o===l)l--;var d=!r||r.isNewsletters(),f=m(m(m({folder:e.folder,limit:e.limit,filters:e.filters,sort:e.sort,last_modified:e.time||l||1,force_custom_thread:a.FORCE_CUSTOM_THREAD,supported_custom_metathreads:a.SUPPORTED_CUSTOM_METATHREADS},d&&{pinned_limit:a.DISCOUNTS_BLOCK?a.DISCOUNTS_BLOCK_LIMIT:0}),a.FOLDERS_SORT_VARIATION&&{folders_sort_variation:a.FOLDERS_SORT_VARIATION}),{remove_emoji_opts:s.Y});if(e.offset_id)f.offset_id=e.offset_id,delete f.last_modified;else f.offset=e.offset;return u().get("threads/status/smart",f).catch((function(e){var t=n.rpcRequestResults[i],r=e.get("status"),o=e.get("body");if(403===r&&"twostep_required"===o)window.location.href=a.TWO_STEP_ENABLE_URL;if(403===r&&"password_expired"===o)window.location.href=a.CHANGE_EXPIRED_PASSWORD_URL;if(!p(e)||304!==r&&500!==r)throw e;if(n.latestFoldersList&&t)return m(m({},t),{folders:n.latestFoldersList});if(500===r)throw e;return u().get("threads/status/smart",m(m({},f),{last_modified:1}))})).catch((function(e){if(p(e)&&e.is("invalid")&&"not_open"===e.get("body.folder.error"))throw new h(f.folder);throw e})).then((function(e){if(p(e))e={folders:e.body.folders,userGrants:e.body.user_grants,threads:e.body.threads,threadsTotal:e.body.threads_total,mboxSize:e.body.mbox_size,collectors:e.body.collectors,lastModified:e.get("lastModified"),discounts:e.body.discounts};return n.rpcRequestResults[i]=e,n.latestFoldersList=e.folders,n.foldersLastModified[i]=e.lastModified,e}))},t.prototype.invalidateCache=function(){this.rpcRequestResults={},this.foldersLastModified={}},t}(o()));t.default=g},63062:function(e,t,n){"use strict";n.r(t);var r=n(21211),a=n(93286),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},o=i18n("Что-то пошло не так"),s={type:"",text:"",qa:"notify-item",actions:[],duration:r.NOTIFY_CLOSE_DELAY,inline:!0,className:"",unique:!1},l={};t.default={isReady:function(e){if(void 0===e)e="default";return!!l[e]},setup:function(e,t){if(void 0===t)t="default";l[t]=e},add:function(e,t){if(void 0===t)t="default";var n=l[t],r=i(i({},s),e);if(n){if(r.type===this.types.error)if((0,a.ZP)("notify_error"),r.text.includes(o))(0,a.ZP)("notify_error_unknown");return n.add(r)}else console.warn("Нет очереди ошибок для отображения в нотификациях")},error:function(e,t){if(void 0===t)t="default";this.add(i({type:this.types.error,text:o+"!"},e),t)},setData:function(e,t,n){if(void 0===n)n="default";l[n].setData(e.idx,t)},getContainer:function(e){var t;if(void 0===e)e="default";return null===(t=l[e])||void 0===t?void 0:t.el},types:{error:"error",success:"success",default:""},MAX_LENGTH:44,MAX_LENGTH_SMALL:32}},45648:function(e,t,n){"use strict";n.r(t);var r,a=n(50987),i=n(71745),o=n(24013),s=n(4872),l=n.n(s),c=n(29678),d=n(83260),u=n.n(d)().debounce((function(){window.__PH&&window.__PH.updateCounter({mail:(0,i.ig)()})}),100,null);t.default={load:function(){if(!r)r=Promise.resolve(a.Z.get("headline")).then((function(e){var t=document.querySelector("#headline");if(t.childNodes.length&&window.__PH)return t.style.visibility="visible",void l().all.on("change reset",u);try{var n=document.querySelector((0,c.selector)("#headline .headline"));(0,o.oC)(n,e)}catch(e){}l().all.on("change reset",u)}));return r},setColorTheme:function(e){var t,n;null===(n=null===(t=window.__PH)||void 0===t?void 0:t.setColorTheme)||void 0===n||n.call(t,e)}}},47759:function(e,t,n){"use strict";n.r(t);n(57463),n(40181),n(22284);var r=n(52745),a=n(19275),i=n(20799),o=n(82010),s=n(21211),l=n(4308),c=n(98957),d=n(43845),u=n(66423),f=n.n(u),m=n(74456),h=n(93286),p=n(77917);function g(e){return document.querySelector((0,p.selector)(".".concat(l.H).concat(e)))}var v,_,b=function(){(0,i.Ll)(o.H.cleanmaster)},E="octavius";function y(){return E}function T(){return document.querySelector((0,p.selector)(".renovator"))}var A=function(){function e(){var e=this;if(s.PROMO_DEBOUNCE_UPDATE){var t=this.update,n=!1,r=!1;this.update=function(a){if(r=r||a,!n)n=!0,(0,d.gl)((function(){t.call(e,r),n=!1}))}}}return e.prototype.load=function(){if(!v)v=Promise.all([(0,m.Z)("2promo"),Promise.resolve().then(n.bind(n,15907))]).then((function(e){var t=e[0],n=e[1];return[new t({RPC:f(),radar:h.ZP,selector:p.selector,getElementByPromoId:g,getThemeId:y,omicron:a.Z.get("omicron"),showCleanmasterModal:b,getAvatarPath:c.Z}),n]})).catch((function(e){return(0,r.coreLoggerDispatchError)(e,{location:"promo-load"}),[]}));return v},e.prototype.update=function(e){if(void 0===e)e=!s.PROMO_MANUAL_LOAD;var t=v||e&&this.load();if(t){var r=Promise.all([n.e(3778),n.e(7550)]).then(n.bind(n,97550)).then((function(e){return e.default})).then((function(e){return e.instanceDeferred.promise})).then((function(e){return e.isVisible()})).catch((function(){return!1}));Promise.all([t,r]).then((0,d.qh)(this,(function(e){var t=e[0],n=t[0],r=t[1],a=e[1];if(n&&!(null==r?void 0:r.default.isLessThen("xs"))&&!a)n.update()}))),this.updateRenovator()}},e.prototype.applyTheme=function(e){if(e&&e.isDarkMode){var t=e.isDarkMode()?"octaviusBlack":"octavius";if(E!==t)E=t,this.update()}},e.prototype.updateRenovator=function(){if(!s.RENOVATOR_DISABLED)this.loadRenovator().then((function(e){null==e||e.update()}))},e.prototype.hideRenovator=function(){if(!s.RENOVATOR_DISABLED)this.loadRenovator().then((function(e){null==e||e.hide()}))},e.prototype.loadRenovator=function(){if(!_)_=(0,m.Z)("renovator").then((function(e){return new e({getThemeId:y,getContainer:T})})).catch((function(e){(0,r.coreLoggerDispatchSelfError)("renovator-load",e)}));return _},e.prototype.isNotifyVisible=function(){return this.load().then((function(e){return e[0].isNotifyVisible()}))},e}();t.default=new A},61799:function(e,t,n){"use strict";var r=n(93286);t.Z=r.Xz.RadarDecorator},93286:function(e,t,n){"use strict";n.d(t,{$V:function(){return R},ZP:function(){return D},Xz:function(){return I}});var r=n(68675),a=n.n(r),i=n(60033),o=n.n(i),s=n(4872),l=n.n(s),c=n(39939),d={events:[],broadcast:!0,prop:"radar-id"},u=(n(11077),n(21528)),f=n(43197),m=n(96596),h=n.n(m),p=n(25709),g=n.n(p),v=n(19275),_=n(50987),b=n(74456);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){if((t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}(0,f.t)("features",u.default),(0,f.t)("request",g()),(0,f.t)("cfg",v.Z),(0,f.t)("cfgUser",_.Z),(0,f.t)("service/auth",c);class A{constructor(){this.handlePerformanceLogReady=this.handlePerformanceLogReady.bind(this);var e=null;this.ductusPromise=new Promise(t=>{e=t}),(0,b.Z)("ductus/ductus-octavius").then(t=>{this.ductusDispatch=t.standalone({project:"octavius",config:{traffic:{timings:[{"1m":6e4},{"5m":3e5},{"10m":6e5},{"1h":36e5},{"1d":864e5},{"2d":1728e5}]},performanceLog:{sessionStorage:u.default.has("perflog_session_storage"),chunkLength:parseInt((u.default.get("perflog_chunk_length")||{}).data,10),chunks:parseInt((u.default.get("perflog_chunks")||{}).data,10),onReady:this.handlePerformanceLogReady}}}),e()})}dispatch(e){try{if("function"!=typeof this.ductusDispatch)return void this.ductusPromise.then(()=>{this.dispatch(e)});this.ductusDispatch({type:e.type,payload:y({},e)})}catch(e){console.error(e),h().add(e)}}loadPerformanceLog(){try{if(this.ductusLoadPerformanceLog)return this.ductusLoadPerformanceLog()}catch(e){console.error(e),h().add(e)}return{ductusError:"no performance log"}}handlePerformanceLogReady(e){this.ductusLoadPerformanceLog=e}}var S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},O=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},C=/:/g;function w(e){return e.replace(C,"_")}function L(e){return w(e.filter((function(e){return e})).join("_"))}function k(e,t){var n;if(Array.isArray(e))return{chain:(n=L(e)).split("_"),type:n,value:t};if("object"==typeof e){if(Array.isArray(e.chain))n=L(e.chain);else n=w(e.type);return S(S({},e),{chain:n.split("_"),type:n})}return{chain:(n=w(String(e))).split("_"),type:n,value:t}}var I=new(function(){function e(){var e=this;this.send=this.send.bind(this),this.ductus=new A,this.RadarDecorator=a(),a().addAdapter(r.FeastAdapter),a().defaults=d,a().register((function(t,n){e.send(k(n))}))}return e.prototype.init=function(e){this.layout=e},e.prototype.sendLoadInfo=function(e,t){this.send({type:"hit",meta:{socialBind:c.default.user.get("social_bind")}}),this.send({type:"send_timings",data:{loadTime:e,timers:t}});var n=c.default.user.get("parental_control_mode");if(n&&"off"!==n)this.send({type:"hit_pcm",intervals:[[n,1]]})},e.prototype.sendArchiveFoldersInfo=function(){var e=l().all;null==e||e.forEach((function(e){if(e.isArchive()&&!e.isSystem())o().send("user-have-archive-folder",{dwh:{id:e.id}})}))},e.prototype.send=function(e,t,n){if(void 0===t)t=1;var r=k(e,t);if(r.value=null==r.value?1:r.value,r.meta=r.meta&&"object"==typeof r.meta?r.meta:{},this.layout)r.meta.layoutSize=this.layout.size,r.meta.layoutType="2pane"===this.layout.getType()?"2":"3",r.meta.layoutSettingsType="2pane"===this.layout.getUiLayout().type?"2":"3";var a=c.default.user;if(r.meta.email=a&&a.getEmail(),r.meta.themeId=a&&a.get("theme"),r.meta.folders=l().all,n)r.data={},Object.keys(n).forEach((function(e){r.data[e]=n[e]}));this.ductus.dispatch(r)},e.prototype.loadPerformanceLog=function(){return this.ductus.loadPerformanceLog()},e}());function R(e){var t=e.prefix,n=e.radar,r=void 0===n?I.send:n,a=e.data,i=void 0===a?null:a,o=void 0!==t;return function(e,n){if(!o&&!i)return r(e,n);if(Array.isArray(e))return e=O([t],e,!0),r({chain:e,data:i},n);if("object"==typeof e){var a=e.chain||e.type.split("_");return r(S(S({},e),{chain:O([t],a,!0),data:i}))}return r({type:"".concat(t,"_").concat(e),data:i},n)}}var D=I.send},6703:function(e,t,n){"use strict";n.d(t,{L1:function(){return a},He:function(){return i},UN:function(){return o}});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function a(e,t){if(!e)return!1;var n=e.formName,r=e.partId,a=e.snippet,i=(null==n?void 0:n.value)&&r;if(t)return!(!i||!(null==a?void 0:a.value));else return!!i}function i(e){if(!e)return null;else return e.map((function(e){var t=r({},e.toJSON());return t.partId=t.part_id,t}))}function o(e,t,n){if(e){var r=e.attachesCount,i=e.vertical,o=null;if(n&&n.length)o=n;else o=t;if(o){var s=0,l=o.filter((function(e){if(a(e,i)&&s<r)return s++,!0;else return!1})),c=function(e,t){return t.filter((function(t){return!e.some((function(e){return e.partId===t.partId}))}))}(l,t);return{attachesList:l.length?l:null,moreAttachesList:c.length?c:null}}}}},59626:function(e,t,n){"use strict";n.d(t,{hj:function(){return d},Ef:function(){return u},nF:function(){return f},fy:function(){return m}});var r=n(60033),a=n.n(r),i=n(21211),o=n(39783),s=n.n(o),l=n(6703),c=function(e){return null==e?void 0:e.map((function(e){var t=e,n=e.name;if("string"==typeof n)return t;else return t.formName=n,t.name=null==n?void 0:n.value,t}))};function d(e,t){if(void 0===e)e=this.get("model");if(void 0===t)t=this.get("search");if(t){var n=e.meta("search_attaches");if(n)return c(n)}}function u(e,t){if(void 0===e)e=this.get("model");if(void 0===t)t=this.get("search");if(t){var n=e.get("all_attaches")||[];return c(n).filter((function(e){return(0,l.L1)(e,!1)}))}if(f(e))return e.get("attaches.list")}function f(e){if(void 0===e)e=this.get("model");if(!(i.LETTER_PREVIEWS&&i.LETTER_PREVIEWS_CONFIG["show-previews"]&&e.get("attachments_count")))return!1;var t=Number(e.get("folder"));return(i.LETTER_PREVIEWS_CONFIG["folders-list"]||[]).includes(t)}function m(e){if(void 0===e)e=this.get("model");if(i.LETTER_PREVIEW_RADAR)a().send("lp-msg-attch-req");if(!i.LETTER_PREVIEWS_CONFIG["go-on-server"])return Promise.resolve(null);var t=e.get("attaches.list");if(t.length>0)return Promise.resolve((0,l.He)(t));else{var n=e.get("expand");return s().findAttaches(n).then((function(t){!function(e){if(i.LETTER_PREVIEW_RADAR)e.forEach((function(e){var t=e.thumbnails.image,n=Object.values(t)[0];if(n.length>0){var r=new URL(n).hostname;r=r.replace(/\./g,"-"),a().send("lp-host-".concat(r))}}))}(t.body);var r=e.setFormAttaches(n,t);return a().send("previews_req_success"),(0,l.He)(r)})).catch((function(e){a().send("previews_req_error",{rlog:"previews_req_error",rlog_message:JSON.stringify(e)})}))}}},41861:function(e,t,n){"use strict";n.d(t,{O:function(){return o},i:function(){return s}});var r,a=n(21211).ALL_ATTACHES_MAX_COUNT;function i(e,t,n,i,o){if(void 0===e)e=!1;if(void 0===t)t=0;if(void 0===n)n=0;if(void 0===i)i=0;if(void 0===o)o=0;if(n){var s=n+i;return s<a?s:a}var l=e?r.compact:r.incompact;if(i||o){var c=i+o;return c<l?c:l}return t<l?t:l}function o(e,t,n){if(t&&t.length){if(!n||!n.length){return{vertical:!1,attachesCount:i(e,t.length)}}var r=function(e){var t=0,n=0,r=0;return e.forEach((function(e){var a,i=e.snippet,o=e.formName;if(!i.color.length)if(!(null===(a=null==o?void 0:o.color)||void 0===a?void 0:a.length)||!i.value)r++;else t++;else n++})),{nameMatches:t,snippetMatches:n,hasNoSnippet:r}}(n),a=r.nameMatches,o=r.snippetMatches,s=r.hasNoSnippet,l=i(e,t.length,o,a,s);return{vertical:Boolean(o),attachesCount:l}}}function s(e){var t=e.vertical,n=e.attachesCount;if(!t)return 36;else return 48*n+8*(n-1)}!function(e){e[e.incompact=2]="incompact",e[e.compact=1]="compact"}(r||(r={}))},96384:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(78267),a={};function i(e){if(!e)return Promise.reject();var t=e.get("id");return Promise.resolve().then(n.bind(n,15907)).then((function(t){var n,a=null===(n=null==t?void 0:t.default)||void 0===n?void 0:n.isLessThen("xs");return r.default.open("secure-folder",{model:e},{dimmer:!0,compact:!0,"close-on-esc":!0,mobile:a})})).then((function(e){return new Promise((function(n){e.on("cancel",(function(){delete a[t],n(!1)})),e.on("success",(function(){delete a[t],n(!0)}))}))}))}},98064:function(e,t,n){"use strict";var r=n(99150),a=n(78267),i=n(50375),o={onLayerClose:function(){i.default.invalidateCache(),r.default.updateAll()},renderLayer:function(e){var t=e.layerName,n=e.params;n.onLayerClose=this.onLayerClose,a.default.open(t,n,{"close-on-esc":!1})},renderAccess:function(e){this.renderLayer({layerName:"share-folder-action",params:e})},renderShare:function(e){this.renderLayer({layerName:"share-folder",params:e})},renderShareOpportunities:function(e){this.renderLayer({layerName:"share-opportunities",params:e})},renderDenySharedFolder:function(e){this.renderLayer({layerName:"deny-shared-folder",params:e})},MODS:{NOT_ENOUGH_RIGHTS:"not_enough_rights"}};t.Z=o},68032:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"+":107,"[":219,"]":221,"\\":220,"|":220,"?":191,"&":55},o={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91,cmd:91},s={Up:"↑",Down:"↓",Left:"←",Right:"→"},l=/Up|Down|Left|Right/;function c(e){return i[e]||e.toUpperCase().charCodeAt(0)}function d(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var u=function(){function e(){this.el=document,this._handlers={},this.service=!0,this._collection=this.el.getElementsByClassName("js-shortcut"),this._stopSequence=this._stopSequence.bind(this),this._keydownHandler=this._keydownHandler.bind(this),document.addEventListener("keydown",this._keydownHandler)}return e.prototype._keydownHandler=function(e){var t=window.key;if(function(e){var t=e.target||e.srcElement,n=t.tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n||t.isContentEditable)}(e)&&!e.isDefaultPrevented()&&(e.keyCode!=i.esc||t&&"all"==t.getScope()))for(var n,r,a=e.keyCode,o=this._collection,s=this._getPressedModes(e),l=0;l<o.length;l++)if(n=o[l],r=this._compareKey(a,this.getShortcuts(n),s))if(e.preventDefault(),r.sequence&&!this._isSequence()){this._startSequence(a);break}else if(this._doAction(n,r)){if("function"==typeof Event){var c=new Event("ui-abstract-action");n.dispatchEvent(c)}else{(c=document.createEvent("CustomEvent")).initCustomEvent("ui-abstract-action",!1,!1,void 0),n.dispatchEvent(c)}break}},e.prototype.getShortcuts=function(e){var t=this.getShortcutAttribute(e),n=this._handlers;if(!n[t])n[t]=function(e){var t,n,r,a,i,s,l,d,u,f=[];if(!(t=e.replace(/\s/g,"")))return f;var m=t.split("',");for(i=0;i<m.length;i++){if(u="",""==(n=m[i].split(":"))[n.length-1])n[n.length-2]+=":",n.pop();if(2==n.length)if(n[1]=n[1].replace(/'/g,""),n[1]&&"true"!=n[1])u=n[1];if(""==(n=(n=n[0]).split("|"))[n.length-1])n[n.length-2]+="|",n.pop();for(s=0;s<n.length;s++){if(""==(r=(t=n[s]).split(","))[r.length-1])r[r.length-2]+=",",r.pop();if(d={shortcut:t},""==(t=r[0].split("+"))[t.length-1])t[t.length-2]+="+",t.pop();if(a=[],t.length>1){for(a=t.slice(0,t.length-1),l=0;l<a.length;l++)a[l]=o[a[l]];t=[t[t.length-1]]}if(t=t[0],d.code=c(t),d.mods=a,2==r.length)d.sequence=c(r[1]);if(u)d.uiname=u;f.push(d)}}return f}(t);return n[t]},e.prototype._getPressedModes=function(e){var t=[];if(e.shiftKey)t.push(o.shift);if(e.altKey)t.push(o.alt);if(e.ctrlKey)t.push(o.ctrl);if(e.metaKey)t.push(o.cmd);return t},e.prototype._compareKey=function(e,t,n){var r,a,i,o,s=!1;for(a=0;a<t.length;a++){if(r=t[a],this._isSequence())s=e==r.sequence;else if(e==r.code){for(s=!0,o=r.mods,i=0;i<o.length;i++)if(!d(o[i],n)){s=!1;break}if(n.length>o.length)s=!1}if(s){s=r;break}}return s},e.prototype._startSequence=function(e){if(!this._isSequence())this._sequenceCode=e,this._sequence=setTimeout(this._stopSequence,1e3)},e.prototype._stopSequence=function(){clearTimeout(this._sequence),this._sequence=-1,this._sequenceCode=-1},e.prototype._isSequence=function(){return this._sequence>0},e.prototype.getShortcutAttribute=function(e){var t=a().Block.get(e);return(t?t.get("shortcut"):e.getAttribute("data-shortcut"))||""},e.prototype.getShortcutItems=function(){return this._collection},e.getShortcutTitle=function(t,n){if(void 0===n)n=!1;if(!t)return"";if(void 0===n)n=!!navigator.userAgent.match(/\bMac\b/);if("|"!=(t=t.replace(/\s/g,"").replace(/command/g,"cmd"))&&t.includes("|"))if(n&&t.includes("cmd")){t=t.split("|");for(var r=0;r<t.length;r++)if(t[r].includes("cmd")){t=t[r];break}}else t=t.split("|")[0];if(t.includes(":'true'"))t=(t=(t=t.split(":'true'")[0]).split("',"))[t.length-1];if(t.includes(":'"))return"";else return e.formatShortcutHint(t)},e.formatShortcutHint=function(t){var n="";if(t)if(","!=t&&t.includes(","))n=t.split(",").map(e.formatShortcutHint).join(", ");else n=t.split("+").map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("+");if(n.match(l))for(var r in s)n=n.replace(r,s[r]);return n},e}();t.Z=u},57045:function(e,t,n){"use strict";n.d(t,{Vq:function(){return m},fo:function(){return h}});var r=n(11764),a=n(60033),i=n.n(a),o=n(50987),s=(0,r.LN)({disabled:!1,keyPattern:function(e){return"".concat(o.Z.get("initialUser.email")||"",":").concat(e)},onerror:function(e,t,n,r,a){i().send("stg-".concat(e,"-").concat(t),{rlog:"octavius_app_storage_err",rlog_message:{storage:e,method:t,key:r,value:a,error:n}})}}),l=s[0],c=s[1],d=s[2],u=function(e){var t;return(null!==(t=e&&e.email)&&void 0!==t?t:!0)?{}:{keyPattern:!1}},f=function(){function e(t){if(void 0===t)t="localStorage";if(this.storage=d,t===e.LOCAL_STORAGE)this.storage=l;else if(t===e.SESSION_STORAGE)this.storage=c}return Object.defineProperty(e,"LOCAL_STORAGE",{get:function(){return"LOCAL_STORAGE"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SCOPE_STORAGE",{get:function(){return"SCOPE_STORAGE"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SESSION_STORAGE",{get:function(){return"SESSION_STORAGE"},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t,n){this.storage.setAsJSON(e,t,u(n))},e.prototype.get=function(e,t){return this.storage.getAsJSON(e,u(t))},e.prototype.remove=function(e,t){this.storage.removeItem(e,u(t))},e}();function m(){return new f(f.SCOPE_STORAGE)}function h(){return new f(f.SESSION_STORAGE)}t.ZP=new f(f.LOCAL_STORAGE)},41027:function(e,t,n){"use strict";var r,a=n(21528),i=n(19275),o=n(50987),s=n(21211),l=n(43197),c=n(74456),d=n(75298),u=new d.Z,f={themes:u,load:function(){if(!r)(r=(0,c.Z)("themes.outsource/all.config")).then((function(e){var t;if(s.VK_THEMES_LIST)t=o.Z.get("config.themes.vklist")||"default";else t=o.Z.get("config.themes.list")||"default";u.setup({config:e.themes,path:window.require.s.contexts._.config.paths["themes.outsource"].replace("/".concat(o.Z.BUILD_LANG),"")}),u.import(t)}));return r},getColorizedModels:function(){return this.getAllModels().filter((function(e){return e.colorized}))},getModels:function(){return this.getAllModels().filter((function(e){return!e.colorized}))},getAllModels:function(){var e=u.getModels(),t=s.THEMES_AVAILABLE.whitelist,n=s.THEMES_AVAILABLE.colorized;return e.filter((function(e){return e.colorized&&n||t.includes(e.id)}))},getDefaultModel:function(){return u.getDefaultModel()},getModel:function(e){return u.getModel(e)},getSelectedModel:function(){return u.model},setTheme:function(e,t){return u.setTheme(e,t)},setThemeById:function(e){var t=this.getModel(e);this.setTheme(t,!0).catch((function(){}))},getCurrentThemeId:function(){return i.Z.themeId},applyUserTheme:function(){var e=this,t=a.default.getAsString("user-unique-themeId")||a.default.getAsString("themeId")||i.Z.themeId;if("default"===t)t=a.default.getAsString("default-themeId")||"default";var n=a.default.getAsString("user-unique-themeId-list");if(n&&!n.includes(t))t=n.split(",")[0];var r=a.default.getAsString("themeVariant");u.emit("usertheme:apply",new d.t(t)),this.load().then((function(){var n=e.getModel(t);if(n&&r)n.variants=[r];var a=e.getDefaultModel(),i=n||a;u.setTheme(i,!1).then((function(){return i}),(function(){return Promise.reject()})).catch((function(){u.setTheme(a).catch((function(){}))}))}))}};(0,l.t)("service/themes.setup",f),t.Z=f},75298:function(e,t,n){"use strict";n.d(t,{t:function(){return _}});var r,a=n(48543),i=n(60033),o=n.n(i),s=n(52745),l=n(19275),c=n(21211),d=n(89629),u=n.n(d),f=n(75975),m=n(96387),h=n(39939),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=(0,f.Z7)(10),v=(0,f.Z7)(1),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.store=function(){return h.default.user.save("theme",this.id)},t}(a.t),b=function(){};_.setupSettings({DARK_DEFAULT_MODE_THEMES:c.DARK_DEFAULT_MODE_THEMES,DARK_MODE_THEMES:c.DARK_MODE_THEMES,LIGHT_DEFAULT_MODE_THEMES:c.LIGHT_DEFAULT_MODE_THEMES,SUPPORT_WIDGET_THEME_IDS:c.SUPPORT_WIDGET_THEME_IDS,WHITE_PORTAL_THEME:c.WHITE_PORTAL_THEME,APPLY_THEME_TIMEOUT:c.APPLY_THEME_TIMEOUT,USE_CUSTOM_THEME_PREVIEW_NAME:c.USE_CUSTOM_THEME_PREVIEW_NAME,CUSTOM_THEMES_PREVIEWS_PATHS:c.CUSTOM_THEMES_PREVIEWS_PATHS,getWidgetDataRequestURL:function(e){return e.id},getWidgetDataTransport:function(e){if(e)return m.Z.getSlot(e);(0,s.coreLoggerDispatchKnownError)("gtslterrnll",new TypeError("get_slot_err: id null"),{id:e,WHITE_PORTAL_THEME:c.WHITE_PORTAL_THEME,"cfg.themeId":l.Z.themeId})},parseWidgetData:function(e){return e.data}});var E=function(){function e(){u().apply(this),this.retryCount=0,this.model=new _,this.models=[]}return e.prototype.setup=function(e){Object.assign(this,e)},e.prototype.import=function(e){var t=this,n=e.split(",");if(c.HAS_UNIQUE_THEME_ID)n=[c.UNIQUE_THEME_ID];if(c.HAS_UNIQUE_THEME_ID_LIST)n=c.UNIQUE_THEME_ID_LIST.split(",");this.models=n.filter((function(e){return t.config[e]})).map((function(e){return new _(e,c.THEMES_PROJECT_NAME,t.config[e],t.path)}))},e.prototype.getDefaultModel=function(){return this.getModel(c.DEFAULT_THEME_ID)},e.prototype.getModel=function(e){return this.getModels().find((function(t){return t.id===e}))},e.prototype.getModels=function(){return this.models},e.prototype.setThemeInterval=function(e){var t=this;if(clearInterval(this.timer),e.isNeedLoadData())this.timer=setInterval((function(){e.apply(!0).then((function(){t.emit("themes:reload",e)}),b)}),g);else if(e.isNeedAutoUpdate())this.timer=setInterval((function(){e.checkVariant()}),v)},e.prototype.setDefaultTheme=function(){var e=this,t=this.getDefaultModel();this.model=t,t.apply(!1).then((function(){e.setThemeInterval(t),e.emit("themes:apply",t)}),b)},e.prototype.setTheme=function(e,t){var r=this,a=this.model.id,i=e.id===this.model.id?Promise.resolve():e.apply(!!this.model.id);if(!this.model.id)this.model=e;var s=new Promise((function(t,n){i.then((function(){r.model=e,r.setThemeInterval(e),r.emit("themes:apply",e),t(void 0)}),(function(){var a=function(){if(r.retryCount<c.LIMIT_OF_THEME_RETRY)e.apply(!1).then((function(){r.model=e,r.setThemeInterval(e),r.emit("themes:apply",e),o().send("theme_retry_ok"),t(void 0)}),(function(){r.retryCount++,a()}));else{if(r.retryCount=0,e.id===r.model.id)r.setDefaultTheme(),o().send("failed_retry_page_load");else o().send("failed_retry_theme_change");n()}};if(e.id)a();else r.setDefaultTheme(),o().send("unknown_theme")}))}));if(Promise.all([s,Promise.resolve().then(n.bind(n,45648))]).then((function(t){t[0];t[1].default.setColorTheme(e.isDarkMode()?"dark":"default")})).catch(b),t)s.then((function(){e.store()})).then((function(){o().send("themes_select",{dwh:{theme_from:a,theme_to:e.id}})})).catch(b);return s},e}();t.Z=E},41542:function(e,t,n){"use strict";var r,a=n(21211),i=Symbol("cancel"),o=l(),s=new Set;function l(){return new Promise((function(e,t){r=function(){return t(i)}}))}t.Z={scheduleThreadUpdate:function(e){if(a.SYNC_THREAD_UPDATES){var t=r,n=l(),i=new Promise((function(e){return setTimeout((function(){e(0)}),a.THREAD_UPDATE_TIMEOUT)}));if(o=Promise.race([e,n,i]),s.size>0)t(),this._updateSubscriptions()}},subscribe:function(e){var t=this;if(!a.SYNC_THREAD_UPDATES)return e(),function(){};return s.add(e),this._subscribe(e),function(){s.delete(e),r(),t._updateSubscriptions()}},_subscribe:function(e){o.then((function(){s.delete(e),e()})).catch((function(e){if(e!==i)throw e}))},_updateSubscriptions:function(){var e=this;s.forEach((function(t){e._subscribe(t)}))}}},31744:function(e,t,n){"use strict";n.r(t);var r=n(21211),a=n(18053),i=n(88695),o=n(70325),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},u=function(){function e(){this.createRequestApiOAuthOptions=function(t,n){if(void 0===t)t="GET";if(void 0===n)n={};return s(s({},n),{type:t,oauthFeature:a.K.Todo,isAuthError:e.isAuthError})}}return e.prototype.getStatus=function(t){if(void 0===t)t={last_updated:0,show_inbox:!0};return l(this,void 0,Promise,(function(){return c(this,(function(n){return[2,(0,o.Z)((0,i.Z)(e.getApiUrl("status"),t),null,this.createRequestApiOAuthOptions("GET")).then((function(e){return null==e?void 0:e.body}))]}))}))},e.UNAUTHORIZED_CODE=401,e.getApiUrl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d([r.TODO_API_URL,"api/v1"],e,!0).join("/")},e.isAuthError=function(t){return t.status===e.UNAUTHORIZED_CODE},e}();t.default=new u},8387:function(e,t,n){"use strict";var r=n(45730),a=n.n(r),i=n(87032),o=n(60033),s=n.n(o),l=n(21211),c=n(50678),d=n(72727),u=n(88695),f=n(50),m=n.n(f),h=n(39939),p=n(63062),g=n(29434),v=null;function _(e){return e&&"get"in e&&"function"==typeof e.get}function b(e){var t=!0;if(l.CLOUD_VIEWER_FORCE)return t;var n=e.map((function(e){return new(m())({name:e.get("name"),type:e.get("type")})})),r=l.CLOUD_VIEWER_ENABLE_TYPE===l.CloudViewerEnableType.fileType,a=r?l.CLOUD_VIEWER_FILE_TYPES:l.CLOUD_VIEWER_FILE_EXTS;if(n.length&&a&&l.CLOUD_VIEWER_ATTACH_TYPES)t=!n.some((function(e){var t=e.getExtension(),n=g.extToPrimitiveKind[t]||"other",i=r?n:t,o=e.get("type");return!a.includes(i)||!l.CLOUD_VIEWER_ATTACH_TYPES.includes(o)})),function(e){var t={};e.forEach((function(e){var n=e.getExtension(),r=g.extToPrimitiveKind[n]||"other",a=e.get("type"),i="".concat(a,"_").concat(r);if(void 0===t[i])t[i]=0;t[i]++})),Object.keys(t).forEach((function(e){s().send("exp-cloud-viewer_fa_".concat(e),{v:t[e],dwh:{count:t[e]}})}))}(n);else t=!1;return t}t.Z={open:function(e){var t=this,n=e.attachment,r=e.message,o=e.msgId,s=e.router,d=e.modal,f=void 0===d?!1:d,m=e.newWindow,h=void 0===m?!1:m,p=e.attachmentId,g=void 0===p?"":p,v=o||r.get("id"),E=r.get("folder"),y=g;if(!y)y=_(n)?n.get("id"):n.id;var T=_(n)?n.get("type"):n.type;if(!T)T=(0,i.getAttachTypeByAttachId)(y,{attachesRegExps:l.ATTACHES_ID_REG_EXPS});var A=r.get("attaches.list"),S=(0,c.Z)(y),O=function(){if(!S)return Promise.reject(new Error("encodeURI error"))};if(l.WEBVIEW){O();var C={back_url:s.request.href},w=(0,u.Z)("https://".concat(l.CLOUD_VIEWER_HOST,"/attaches/").concat(v,"%3B").concat(S),C);return a().send("OpenLink",{url:w}).catch((function(e){return console.error("VKTeamsBridge attach error: ",e)}))}if(h){O();var L=b(A);return this.openInNewWindow({folderId:E,messageId:v,encodedAttachId:S,router:s,isSupportCloudViewer:L,attachType:T}),Promise.resolve()}return new Promise((function(e){t.loadTools().then((function(t){var a=new(0,t[0])({models:A,message:r,attachment:n,modal:f});a.renderTo(document.body),e(a)}))}))},openTemporary:function(e){var t=e.messageId,n=e.attachment,r=e.formData,a=e.router,o=n.get("id"),s=(0,c.Z)(o),d=b(r.attachments);if(!l.CLOUD_VIEWER_TEMPORARY)d=!1;return this.openInNewWindow({temporary:!0,messageId:t,encodedAttachId:s,router:a,isSupportCloudViewer:d,attachType:i.AttachType.Temporary}),Promise.resolve()},openInNewWindow:function(e){var t=e.temporary,n=void 0===t?!1:t,r=e.messageId,a=e.folderId,o=e.encodedAttachId,c=e.router,u=e.isSupportCloudViewer,f=e.attachType,m=function(e,t){if(l.CLOUD_VIEWER_FORCE)return"f";if(e&&!l.CLOUD_VIEWER_TEMPORARY)return"t-".concat(l.CLOUD_VIEWER_GROUP);var n="";if(e&&l.CLOUD_VIEWER_TEMPORARY)n="-t";var r="".concat(n);if(t&&l.CLOUD_VIEWER_GROUP)return"sg".concat(r,"-").concat(l.CLOUD_VIEWER_GROUP);if(!t&&l.CLOUD_VIEWER_GROUP)return"nsg".concat(r,"-").concat(l.CLOUD_VIEWER_GROUP);if(t)return"sng".concat(r);else return"nsng".concat(r)}(n,u);s().send("exp-cloud-viewer_".concat(m));var g={"folder-id":a,"x-email":h.default.user.getEmail(),cvg:m};if(u&&l.CLOUD_VIEWER_GROUP===l.CLOUD_VIEWER_GROUPS.CLOUD){var v={encodedAttachId:o,messageId:r,queryParams:g,host:l.CLOUD_VIEWER_HOST,attachType:f},_={attachesRegExps:l.ATTACHES_ID_REG_EXPS,messageIdsRegExps:l.MESSAGES_ID_REG_EXP},b={validateIds:!l.VIEW_URL_IDS_VALIDATE_DISABLE,regExps:_},E=(0,i.generateCloudViewerUrl)(v,b),y=E.result,T=E.error;if(T)return s().send("gen_viewer_url_fail",{i:T,rlog:"gen_viewer_url_fail",rlog_message:{project:"octavius",url:y,error:T,inputData:v,options:b}}),void p.default.error({text:i18n("Просмотр недоступен")});else return s().send("gen_viewer_url_ok"),void(0,d.default)(y)}window.open(c.getUrl(n?"#attachment-temporary":"#attachment",{message:r,id:o,path:""},g))},loadTools:function(){if(v)return v;else return v=Promise.all([Promise.all([n.e(4131),n.e(1937),n.e(1254),n.e(4359)]).then(n.bind(n,33230)),n.e(9651).then(n.t.bind(n,69651,23))])}}},84427:function(e,t,n){"use strict";n.d(t,{i:function(){return g}});var r,a=n(21211),i=n(4183),o=n(96596),s=n.n(o),l=n(74509),c=n(57045),d=n(41027),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},f=s().getScope("vk-messenger-loader"),m=null,h=(null===(r=null===d.Z||void 0===d.Z?void 0:d.Z.getSelectedModel())||void 0===r?void 0:r.isDarkMode())||!1,p=4*l.zG.right,g={isLoaded:function(){return!!m},open:function(e){return Promise.all([n.e(478),n.e(6748)]).then(n.bind(n,56748)).then((function(t){return f.add("open",e),(m=t.vkMessenger).open(u({darkMode:h,offset:p,onClose:g.onClose},e))}))},setThemeMode:function(e){if(f.add("setThemeMode, darkMode:",e),h=e,m)m.setThemeMode(e)},setOffset:function(e){if(f.add("setOffset, offset:",e),p=e,m)m.setOffset(e)},restoreOnReload:function(){if(f.add("try restoreOnReload"),!a.VK_MESSENGER_RESTORE_ON_REFRESH_DISABLED){var e=c.ZP.get(a.VK_MESSENGER_ACTIVE_CHAT_STORAGE_KEY);if(e)f.add("restoreOnReload: open chat for:",e),g.open({chatId:e});else f.add("restoreOnReload: no active chat id",e)}else f.add("restoreOnReload: feature disabled")},isOpen:function(){return g.isLoaded()&&m.isOpen()},onClose:function(){(0,i.dataSourceDispatchUpdateAll)()}}},68021:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var r={FILTER:"filter",CATEGORY:"category",QUERY:"query",FOLDER:"folder",DATE:"date",MESSAGE:"message",MAILBOX:"mailbox",ADDRESSEE:"addressee"}},17865:function(e,t,n){"use strict";n.d(t,{Yz:function(){return q},ZP:function(){return J},zW:function(){return $}});var r=n(73928),a=n(17177),i=n(4673),o=n(4872),s=n.n(o),l=n(1745),c=n(31276),d=n(39939),u=n(42765),f=n(68021),m=c.types.model("SearchDateOperand",{date:c.types.Date,dateEnd:c.types.maybe(c.types.union(c.types.Date,c.types.null)),lapse:c.types.optional(c.types.number,0)}),h=c.types.model("SearchMailboxOperand",{id:c.types.union(c.types.number,c.types.string),email:c.types.string}),p=c.types.model("SearchOperandState",{type:c.types.enumeration(Object.values(f.q)),subtype:c.types.maybe(c.types.union(c.types.enumeration(Object.values(r.OperandFilterTypes)),c.types.enumeration(Object.values(r.ColorTagTypes)),c.types.enumeration(Object.values(r.CategoryTypes)),c.types.enumeration(Object.values(r.OperandQueryTypes)))),value:c.types.maybe(c.types.union(c.types.string,c.types.number,m,h,c.types.undefined))}).actions(e=>({setType(t){e.type=t},setSubtype(t){e.subtype=t},setValue(t){e.value=t}})),g=c.types.model("SearchOperand",{current:p,next:c.types.maybe(p)}).views(e=>({get type(){return e.current.type},get subtype(){return e.current.subtype},get value(){return e.current.value},get editing(){return!!e.next}})).actions(e=>({applyChanges(){var t=e.next;if(e.editing)e.current.type=t.type,e.current.subtype=t.subtype,e.current.value=(0,c.isStateTreeNode)(t.value)?(0,c.getSnapshot)(t.value):t.value,e.next=void 0},setType(t){e.applyChanges(),e.current.type=t},setSubtype(t){e.applyChanges(),e.current.subtype=t},setValue(t){if(t!==e.value)e.next=e.next||(0,c.getSnapshot)(e.current),e.next.value=t}})),v=n(32704),_=n(21211),b=n(18199),E=n.n(b),y=n(5190),T=c.types.model("SearchCorrespondents",{from:c.types.maybe(c.types.string),to:c.types.maybe(c.types.string)}),A=c.types.model("SearchFlags",{unread:c.types.boolean,flagged:c.types.boolean,attach:c.types.boolean}),S=c.types.model("SearchQuery",{query:c.types.maybe(c.types.string),subject:c.types.maybe(c.types.string),folder:c.types.maybe(c.types.number),transaction_category:c.types.maybe(c.types.union(c.types.enumeration(Object.values(r.ColorTagTypes)),c.types.enumeration(Object.values(r.CategoryTypes)))),correspondents:c.types.maybe(T),flags:c.types.maybe(A),interval:c.types.maybe(y.Z),all_attaches:c.types.maybe(c.types.boolean),in_excluded_folders:c.types.maybe(c.types.boolean)}),O=c.types.model("SuggestOperand",{value:c.types.string,type:c.types.enumeration(Object.values(r.OperandSuggestAddTypes))}),C={[r.OperandSuggestAddTypes.FROM]:e=>{var t=e.trim();if(!t||t.split(" ").length>1)return!1;if(!_.SUGGEST_FROM)return!1;if(_.SUGGEST_FROM.all)return!0;if(_.SUGGEST_FROM.keywords&&_.SUGGEST_FROM.keywords.length)return _.SUGGEST_FROM.keywords.some(e=>{if(e&&"R"===e[0]&&"_"===e[1])try{return new RegExp(e.slice(2)).test(t)}catch(e){return!1}return t.toLowerCase()===e.toLowerCase()});else return!1},[r.OperandSuggestAddTypes.SEARCH_INTERNET]:e=>{var t=e.trim();if(!_.SUGGEST_SEARCH_INTERNET)return!1;else return t.split(" ").length>1}};function w(e,t){return e.findIndex(e=>e.type===t)}var L,k,I,R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},D=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},M=0;function P(e){return"string"==typeof e&&!!e.length}var N=c.types.model("SearchQueryWordSuggest",{word:c.types.string}),x=c.types.model("SearchQueryAddressbookSuggest",{name:c.types.string,email:c.types.string}),F=c.types.model("SearchQueryMessageSuggest",{email:c.types.string,name:c.types.string,subject:c.types.string,messageId:c.types.string,threadId:c.types.string,folder:c.types.string}),U=c.types.model("SearchQueryRequestSuggest",{query:S,overall_count:0,two_weeks_count:0,timestamp:c.types.optional(c.types.Date,new Date),empty:!1}).actions((function(e){return{fromRPC:function(t){if(e.overall_count=t.overall_count,e.two_weeks_count=t.two_weeks_count,e.timestamp=new Date(1e3*t.timestamp),delete(t=R({},t)).overall_count,delete t.two_weeks_count,delete t.timestamp,t.correspondents){if(!P(t.correspondents.from))delete t.correspondents.from;if(!P(t.correspondents.to))delete t.correspondents.to}if(Object.keys(t).length)e.query=t;else e.empty=!0}}}));function H(e,t,n){var r="".concat(t,"::").concat(n.query,"::").concat(n.limit);if(r===k)return Promise.resolve(L);if(_.SEARCH_SUGGESTS_DELAY&&t.includes("messages/search/suggest"))return window.clearTimeout(I),new Promise((function(a){I=window.setTimeout((function(){return e.get(t,n).then((function(e){k=r,L=e,a(e)}))}),_.SEARCH_SUGGESTS_DELAY_TIME)}));else return e.get(t,n).then((function(e){return k=r,L=e,e}))}var B=c.types.model("SearchQuerySuggests",{requests:c.types.optional(c.types.array(U),[]),words:c.types.optional(c.types.array(N),[]),contacts:c.types.optional(c.types.array(x),[]),messages:c.types.optional(c.types.array(F),[]),operands:c.types.optional(c.types.array(O),[])}).actions((function(e){return{fetch:(0,c.flow)((function(t){var n,r,a,i,o,s,l,d,u,f,m=t.query,h=t.limit,p=void 0===h?5:h,g=t.force,v=void 0===g?!1:g;return D(this,(function(t){switch(t.label){case 0:if(n=++M,r=(0,c.getEnv)(e),!(a=r.getRPC&&r.getRPC()))return console.warn("No RPC in ENV"),[2];if(i=m?"messages/search/suggest":"messages/search/requests",v)k=null;if(o={query:m,limit:p},_.MESSAGE_SUGGESTS)o.instant_search=1;return[4,Promise.all([H(a,i,o),m?(h=m,g={limit:p},E().execute({search:h||"",limit:g.limit}).then((function(e){return e.result.contacts.map((function(e){return e.name=e.display_name,e}))}))):Promise.resolve()])];case 1:if(s=t.sent(),l=s[0],d=s[1],n!==M)return[2];else return e.requests=(l.body.requests||[]).map((function(e){var t=U.create({query:{}});return t.fromRPC(e),t})).filter((function(e){return!e.empty})),e.words=(l.body.suggests||[]).slice(0,p).map((function(e){return{word:e}})),e.contacts=d||[],u=l.body.instant_search_response?l.body.instant_search_response.messages:[],f=u.map((function(e){if(e.correspondents&&e.correspondents.from&&0!==e.correspondents.from.length)e.email=e.correspondents.from[0].email,e.name=e.correspondents.from[0].name;else e.email="",e.name="";return e.messageId=e.id,e.threadId=e.thread_id,e})),e.messages=(f||[]).slice(0,p),[2]}var h,g}))}))}})).actions((function(e){return{addOrUpdateSuggestOperand:function(t,n){if(void 0===n)n=void 0;var r=w(e.operands,t);if(!(r>=0))e.operands.push(O.create({type:t,value:n}));else{e.operands[r].value=n}},clearSuggestOperands:function(){e.operands.clear()},removeSuggestOperand:function(t){var n=w(e.operands,t);if(-1!==n)e.operands.splice(n,1)}}})).actions((function(e){return{computeOperands:function(t,n){if(!t||n)e.clearSuggestOperands();Object.values(r.OperandSuggestAddTypes).forEach((function(n){if(C[n](t))e.addOrUpdateSuggestOperand(n,t);else e.removeSuggestOperand(n)}))}}}));var Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},G=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},q={QUERY:"q_query",SUBJECT:"q_subj",FOLDER:"q_folder",CATEGORY:"q_tcategory",CC_FROM:"q_from",CC_TO:"q_to",FLAG_UNREAD:"q_read",FLAG_FLAGGED:"q_flag",FLAG_ATTACH:"q_attach",INTERVAL_DATE:"q_date",INTERVAL_DATE_LAPSE:"q_date_lapse",IN_EXCLUDED_FOLDERS:"q_trash"};function j(e){if(void 0!==e)return String(e)}function W(e){if(void 0===e)return e;else return parseInt(e,10)}function V(e){return"true"===(e=String(e))||"1"===e}var z,Y,K,X=[].concat(Object.values(r.OperandFilterTypes)).concat(_.SEARCH_CATEGORIES).concat(_.ENABLE_COLOR_TAGS_SEARCH?_.COLOR_TAGS:null).concat(Object.values(r.OperandQueryTypes)).reduce((function(e,t){return e[t]=!0,e}),{}),Q={unread:r.OperandFilterTypes.UNREAD,flagged:r.OperandFilterTypes.FLAGGED,attach:r.OperandFilterTypes.ATTACH},J=c.types.model("Search",{response:c.types.optional(v.ZP,{}),smartInput:(0,a.createModel)(g),value:c.types.string,displayedFilter:c.types.optional(c.types.string,""),suggests:B,totalSuggests:0,selectedSuggest:-1,progress:!1,loading:!1,in_excluded_folders:!1}).views((function(e){return{get hasOperands(){return!(!e.smartInput.operands||!e.smartInput.operands.length)},get allMailboxes(){var e=s().all.toArray().filter((function(e){return e.isServiceShared()})).map((function(e){return{email:e.get("owner").email,name:e.get("owner").name,id:e.get("id")}})),t=d.default.user,n={email:t.getEmail(),name:t.getFullName(),id:"-1024"};return G([n],e,!0)}}})).views((function(e){return{get query(){var t={};if(e.smartInput.operands.forEach((function(e){switch(e.type){case f.q.FOLDER:t.folder=e.value;break;case f.q.QUERY:(0,u.qI)(t,e);break;case f.q.CATEGORY:t.transaction_category=e.subtype;break;case f.q.FILTER:(0,u.SJ)(t,e);break;case f.q.DATE:t.interval=i.ZP.fromDateAndLapse(e.value).normalize().toRPCInterval();break;case f.q.MAILBOX:t.mailbox=e.value.id}})),t.mailbox)t.folder=t.folder||t.mailbox,delete t.mailbox;if(e.hasOperands)t.in_excluded_folders=e.in_excluded_folders;return t}}})).views((function(e){return{get empty(){return!Object.keys(e.query).length},get currentMailbox(){var t=e.query;return this.getMailboxByFolder(t.folder)}}})).views((function(e){return{get isMyMailboxSelected(){return"-1024"===e.currentMailbox.id},get folders(){var t=e.response,n=e.query,r=e.currentMailbox,a=t.folders||[],i=void 0!==n.folder;if(i)a=G([v.RK.create({id:n.folder.toString(),found:0})],a,!0);var o={};return a.forEach((function(e,t){if(0===t&&i||function(e){var t=e.folderModel;if(!t)return!1;if("-1024"===r.id)return!t.isShareTake();else return t.isShareTake()&&!t.isServiceShared()&&t.get("owner").email===r.email}(e))o[e.idNumber]=e})),Object.values(o)}}})).views((function(e){return{get hiddenSuggestMap(){var t=e.query,n=e.currentMailbox,a=e.isMyMailboxSelected,i=e.folders,o=e.displayedFilter,l=Z({},X),c=function(e){return!o||o===e};if(l[f.q.CATEGORY]=c(f.q.CATEGORY),l[f.q.FILTER]=c(f.q.FILTER),l[f.q.FOLDER]=!0,l[f.q.DATE]=c(f.q.DATE),l[r.OperandQueryTypes.FROM]=!0,l[r.OperandQueryTypes.TO]=!0,l[r.OperandQueryTypes.SUBJECT]=!0,l[r.OperandQueryTypes.QUERY]=!0,_.ENABLE_COLOR_TAGS_SEARCH)l.COLOR_TAG_CUSTOM=!0;if(s().all.hasSharedTake()){var d=e.allMailboxes,m=s().all.get(t.folder),h=d.filter((function(e){var t=e.id;if("-1024"===t)return!1;var n=s().all.get(t);return n&&!(0,u.Fv)(m,n)}));l[f.q.MAILBOX]=h.length&&c(f.q.MAILBOX)?h:!1}if(t.transaction_category&&!o)l[f.q.CATEGORY]=!1,Object.values(r.CategoryTypes).forEach((function(e){l[e]=!1})),l.COLOR_TAG_CUSTOM=!1;if(!o){if(t.flags)if(Object.keys(Q).forEach((function(e){if(t.flags[e])l[Q[e]]=!1})),t.flags.attach&&t.flags.flagged&&t.flags.unread)l[f.q.FILTER]=!1;if(t.correspondents){if(t.correspondents.from)l[r.OperandQueryTypes.FROM]=!1;if(t.correspondents.to)l[r.OperandQueryTypes.TO]=!1}if(t.interval)l[f.q.DATE]=!1;if(void 0!==t.subject)l[r.OperandQueryTypes.SUBJECT]=!1;if(void 0!==t.query)l[r.OperandQueryTypes.QUERY]=!1}var p=n.id!==t.folder,g=void 0!==t.folder,v=!i.length;if(g&&(a||p||v)||e.empty)l[f.q.FOLDER]=!1;if(_.SEARCH_HIDE_CATEGORIES)l[f.q.CATEGORY]=!1;if(!_.ENABLE_COLOR_TAGS_SEARCH)l.COLOR_TAG_CUSTOM=!1;return l}}})).views((function(e){return{get enabledQueryOptions(){var t=e.hiddenSuggestMap;return Object.values(r.OperandQueryTypes).reduce((function(e,n){if(t[n])return e|r.OperandQueryOptions[n];else return e}),0)},get countedMailboxes(){var t=e.allMailboxes,n=e.response,r=n.count,a=n.folders,i=void 0===a?[]:a,o=t[0],s=t.slice(1),l=0,c=s.map((function(e){var t=i.find((function(t){return t.id.toString()===e.id.toString()})),n=t?t.found:0;return l+=n,Z(Z({},e),{found:n})})),d=r-l,u=Z(Z({},o),{found:d});return G([u],c,!0)}}})).views((function(e){return{get routerQuery(){var t,n=((t={})[q.QUERY]=e.query.query,t[q.SUBJECT]=e.query.subject,t[q.FOLDER]=e.query.folder,t[q.CATEGORY]=e.query.transaction_category,t[q.CC_FROM]=e.query.correspondents&&e.query.correspondents.from,t[q.CC_TO]=e.query.correspondents&&e.query.correspondents.to,t[q.FLAG_UNREAD]=e.query.flags&&e.query.flags.unread?1:void 0,t[q.FLAG_FLAGGED]=e.query.flags&&e.query.flags.flagged?1:void 0,t[q.FLAG_ATTACH]=e.query.flags&&e.query.flags.attach?1:void 0,t[q.IN_EXCLUDED_FOLDERS]=e.query.in_excluded_folders?1:void 0,t),r=e.query.interval;if(r)n=Z(Z({},n),i.ZP.fromRPCInterval(r).toQuery());return Object.keys(n).forEach((function(e){if(void 0===n[e])delete n[e]})),n}}})).actions((function(e){return{setProgress:function(t){if(e.progress=!!t,!t)clearTimeout(K)},setResponse:function(t){e.response.count=t.found.count,e.response.folders=t.found.folders,e.response.dates=t.found.dates}}})).actions((function(e){return{setValue:function(t){e.value=t},setSuggestsInfo:function(t){var n=t.totalSuggests,r=void 0===n?e.totalSuggests:n,a=t.selectedSuggest,i=void 0===a?e.selectedSuggest:a;e.totalSuggests=r,e.selectedSuggest=i},setLoading:function(t){if(e.loading=!!t,!t)e.setProgress(!1)},reloadLetters:function(){var t=(0,c.getEnv)(e),n=t.getDataSource&&t.getDataSource();if(n)n.dispatch({type:n.UPDATE_ALL})},setInExcludedFolders:function(t){e.in_excluded_folders=!!t}}})).actions((function(e){return{setQuery:function(t){var n=!!W(t.in_excluded_folders);e.setInExcludedFolders(n);var r=s().all.get(t.folder),a=e.currentMailbox,i=e.isMyMailboxSelected;if(n&&r&&!r.isSpam()&&!r.isTrash()){if(i)delete t.folder;if(!i)t.folder=a.id}(0,u.UG)(e.smartInput,t)},setResponseAndProgress:function(t,n){e.setResponse(t),e.setProgress(n)},appendSearchQuery:function(t){if(t){e.setValue("");var n=e.smartInput.operands.find((function(e){return e.subtype===r.OperandQueryTypes.QUERY}));if(n)return n.setValue(n.value+" "+t),n.applyChanges();e.smartInput[a.SmartInputActions.PUSH]({current:{type:f.q.QUERY,subtype:r.OperandQueryTypes.QUERY,value:t}})}}}})).actions((function(e){return{syncWithRouteQuery:function(t){var n={query:j(t[q.QUERY]),subject:j(t[q.SUBJECT]),folder:W(t[q.FOLDER]),transaction_category:j(t[q.CATEGORY]),in_excluded_folders:W(t[q.IN_EXCLUDED_FOLDERS])};if(void 0!==t[q.CC_FROM]||void 0!==t[q.CC_TO])n.correspondents={from:j(t[q.CC_FROM]),to:j(t[q.CC_TO])};if(void 0!==t[q.FLAG_UNREAD]||void 0!==t[q.FLAG_FLAGGED]||void 0!==t[q.FLAG_ATTACH])n.flags={unread:V(t[q.FLAG_UNREAD]),flagged:V(t[q.FLAG_FLAGGED]),attach:V(t[q.FLAG_ATTACH])};var r=i.ZP.fromQuery(t);if(r)n.interval=r.normalize().toRPCInterval();if(!_.ENABLE_COLOR_TAGS_SEARCH&&_.COLOR_TAGS.includes(t[q.CATEGORY]))delete n.transaction_category;e.setQuery(n)},getLetterHref:function(t){var n=(0,c.getEnv)(e);return(n.getRouter&&n.getRouter())["#read-letter"].getUrl({letter:t.threadId,folder:t.folder,id:t.messageId},"inherit")},goToLetter:function(t){if(void 0===t)t=void 0;var n=(0,c.getEnv)(e),r=n.getRouter&&n.getRouter(),a=this.getLetterHref(t);r.nav(a,{initiator:"popstate"})},goToLetterAndClear:function(e){if(void 0===e)e=void 0;this.goToLetter(e),this.clear()},getMailboxByFolder:function(t){var n=e.allMailboxes,r=s().all.get(t);if(!t||!r||!r.isShareTake())return n.find((function(e){return"-1024"===e.id}));else return n.find((function(e){return e.email===r.get("owner").email}))},applyMailboxOperand:function(t){if(t&&t.id!==e.currentMailbox.id)if(this.removeOperand(f.q.FOLDER),this.removeOperand(f.q.MAILBOX),"-1024"!==t.id)(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.PUSH,args:[{current:{type:f.q.MAILBOX,value:t}}]})},applyFolderOperand:function(t){if(s().all.hasSharedTake()){var n=this.getMailboxByFolder(t);this.applyMailboxOperand(n)}(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.PUSH,args:[{current:{type:f.q.FOLDER,value:t}}]})},applyOperand:function(t,n,r){if(void 0===r)r=void 0;if(t!==f.q.QUERY&&e.value)e.appendSearchQuery(e.value);if(e.value="",t!==f.q.MAILBOX)if(t!==f.q.FOLDER)(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.PUSH,args:[{current:{type:t,subtype:n,value:r}}]});else this.applyFolderOperand(r);else this.applyMailboxOperand(r)},setOperandActive:function(t,n,r){if(void 0===n)n=void 0;if(void 0===r)r=void 0;var i=e.smartInput,o=(0,u.bB)(i,t,n);if(o<0)this.applyOperand(t,n,r),o=(0,u.bB)(i,t,n);if(o>=0)(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.SET_OPERAND_FLAGS,args:[o,{active:!0,editing:!0}]})},setInputActive:function(){var t=e.smartInput.operands,n=t.length,r=t[t.length-1];if(r&&(r.type===f.q.DATE||r.type===f.q.FOLDER))n--;(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.SET_OPERAND_FLAGS,args:[n,{active:!0,editing:!0}]})},applyOperandAndFocus:function(e,t,n){if(void 0===n)n=void 0;this.applyOperand(e,t,n),this.setInputActive()},setDisplayedFilters:function(t){e.displayedFilter=t||""},removeOperand:function(t,n){var r=e.smartInput,i=(0,u.bB)(r,t,n);if(i>=0)r[a.SmartInputActions.SPLICE](i,1)},clear:function(){e.value="",e.displayedFilter="",e.selectedSuggest=-1,e.in_excluded_folders=!1,(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.CLEAR}),z=void 0,clearTimeout(Y),Y=void 0},updateOperand:function(t,n,r,a){var i=(0,u.Sb)(e.smartInput,t,n);if(i&&void 0!==r)i.setSubtype(r);if(i&&void 0!==a)i.setValue(a),i.applyChanges()},updateOperandSubtypeAndFocus:function(t,n){t.setSubtype(n);var r=e.smartInput.operands.findIndex((function(e){return t===e}));(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.SET_OPERAND_FLAGS,args:[r,{active:!0,editing:!1}]})},updateOperandSubtypeAndBlur:function(t,n){t.setSubtype(n),(0,c.applyAction)(e.smartInput,{name:a.SmartInputActions.DEACTIVATE_ALL})}}})).extend((function(e){return(0,l.reaction)((function(){return e.value}),(function(){e.suggests.computeOperands(e.value,e.hasOperands)})),(0,l.reaction)((function(){return e.query}),(function(){if(e.setLoading(!0),void 0===Y)Y=setTimeout((function(){Y=void 0;var t=!z;if(t||!(0,u.co)(e.query,z)){z=e.query;var n=(0,c.getEnv)(e),r=n.getRouter&&n.getRouter();if(!r||!r.activeRoute.is("#search")&&!r.activeRoute.is("#search-letter")&&e.empty)return void e.setLoading(!1);if(r.route.is("#search-letter")&&t)return;r.go("#search",{},e.routerQuery).then((function(){e.setLoading(!1)})),K=setTimeout((function(){e.setProgress(!0)}),100)}}),100)})),{}}));function $(){return{smartInput:{},value:"",suggests:{}}}},42765:function(e,t,n){"use strict";n.d(t,{qI:function(){return d},SJ:function(){return u},co:function(){return m},Fv:function(){return h},UG:function(){return g},Sb:function(){return v},bB:function(){return _}});var r=n(73928),a=n(17177),i=n(4673),o=n(4872),s=n.n(o),l=n(68021),c=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};function d(e,t){switch(t.subtype){case r.OperandQueryTypes.FROM:e.correspondents=e.correspondents||{},e.correspondents.from=t.value;break;case r.OperandQueryTypes.TO:e.correspondents=e.correspondents||{},e.correspondents.to=t.value;break;case r.OperandQueryTypes.SUBJECT:e.subject=t.value;break;case r.OperandQueryTypes.QUERY:e.query=t.value}}function u(e,t){switch(t.subtype){case r.OperandFilterTypes.UNREAD:e.flags=e.flags||{},e.flags.unread=!0;break;case r.OperandFilterTypes.FLAGGED:e.flags=e.flags||{},e.flags.flagged=!0;break;case r.OperandFilterTypes.ATTACH:e.flags=e.flags||{},e.flags.attach=!0}}function f(e,t){return Object.keys(e).every((function(n){if(e[n]===t[n])return!0;if("flags"===n&&t.flags){var r=e.flags,a=t.flags;return r.unread===a.unread&&r.flagged===a.flagged&&r.attach===a.attach}if("correspondents"===n&&t.correspondents){var o=e.correspondents,s=t.correspondents;return o.from===s.from&&o.to===s.to}if("interval"===n&&t.interval){var l=i.ZP.fromRPCInterval(e.interval).normalize(),c=i.ZP.fromRPCInterval(t.interval).normalize();return l.equals(c)}return!1}))}function m(e,t){return f(e,t)&&f(t,e)}function h(e,t){if(!e||!t||!t.isServiceShared())return!1;if(!e.get("owner")||!t.get("owner"))return!1;else return e.get("owner").email===t.get("owner").email}function p(e,t){var n=t.type,r=t.subtype,i=t.value;e[a.SmartInputActions.PUSH]({current:{type:n,subtype:r,value:i}})}function g(e,t){var n={},o=[];function d(t,r){if(!n[t]&&void 0!==r)switch(n[t]=!0,t){case"folder":var a=s().all.get(r);if(a.isShareTake()){var o=s().all.find((function(e){return h(a,e)}));p(e,{type:l.q.MAILBOX,value:{id:o.get("id"),name:a.get("owner").name,email:a.get("owner").email}})}if(!a.isServiceShared())p(e,{type:l.q.FOLDER,value:r});break;case"transaction_category":return p(e,{type:l.q.CATEGORY,subtype:r});case"interval":return p(e,{type:l.q.DATE,value:i.ZP.fromRPCInterval(r).toDateAndLapse()});case"subject":case"query":return p(e,{type:l.q.QUERY,subtype:t,value:r});case"flags.unread":case"flags.flagged":case"flags.attach":return r&&p(e,{type:l.q.FILTER,subtype:t.split(".")[1]});case"correspondents.from":case"correspondents.to":return p(e,{type:l.q.QUERY,subtype:t.split(".")[1],value:r})}}c([],e.operands,!0).forEach((function(e){var a=function(e,t,n,a){switch(n.type){case l.q.FILTER:if(!(o=e.flags&&(n.subtype===r.OperandFilterTypes.UNREAD&&e.flags.unread||n.subtype===r.OperandFilterTypes.FLAGGED&&e.flags.flagged||n.subtype===r.OperandFilterTypes.ATTACH&&e.flags.attach)))a.push(n);return"flags.".concat(n.subtype);case l.q.CATEGORY:if(!e.transaction_category)a.push(n);return"transaction_category";case l.q.QUERY:var o=n.subtype===r.OperandQueryTypes.SUBJECT&&void 0!==e.subject||n.subtype===r.OperandQueryTypes.QUERY&&void 0!==e.query||e.correspondents&&(n.subtype===r.OperandQueryTypes.FROM&&void 0!==e.correspondents.from||n.subtype===r.OperandQueryTypes.TO&&void 0!==e.correspondents.to),c=n.subtype===r.OperandQueryTypes.FROM||n.subtype===r.OperandQueryTypes.TO;if(!o)return a.push(n);if(c)n.setValue(e.correspondents[n.subtype]);else n.setValue(e[n.subtype]);if(c)return"correspondents.".concat(n.subtype);else return n.subtype;case l.q.FOLDER:if(!(f=s().all.get(e.folder)))return a.push(n),l.q.FOLDER;if(f.isServiceShared())return a.push(n),l.q.FOLDER;if(n.value!==e.folder)n.setValue(e.folder);return l.q.FOLDER;case l.q.DATE:if(!(o=void 0!==e.interval))a.push(n);else{var d=i.ZP.fromDateAndLapse(n.value).normalize(),u=i.ZP.fromRPCInterval(e.interval).normalize();if(!d.equals(u))n.setValue(u.toDateAndLapse())}return"interval";case l.q.MAILBOX:var f;if(!(f=s().all.get(e.folder)))a.push(n);if(f.isServiceShared()&&n.value.id.toString()!==f.get("id").toString())n.setValue({id:f.get("id"),name:f.get("owner").name,email:f.get("owner").email});return l.q.FOLDER}}(t,0,e,o);n[a]=!0})),o.forEach((function(t){var n=e.operands.findIndex((function(e){return e===t}));if(n>=0)e[a.SmartInputActions.SPLICE](n,1)})),Object.keys(t).forEach((function(e){if("flags"===e||"correspondents"===e)Object.keys(t[e]||{}).forEach((function(n){return d("".concat(e,".").concat(n),t[e][n])}));else d(e,t[e])}))}function v(e,t,n){return e.operands.find((function(e){return e.type===t&&e.subtype===n}))}function _(e,t,n){return e.operands.findIndex((function(e){return e.type===t&&e.subtype===n}))}},76493:function(e,t,n){"use strict";n.d(t,{ry:function(){return c},fb:function(){return d}});var r=n(21528),a=n(17717),i=n.n(a),o=n(60033),s=n.n(o),l=function(){if(!r.default.has("force-3pane-exp")||i().get("use-3pane").isExist()||!new URLSearchParams(window.location.search).has("newreg"))return"noexp";else return r.default.getAsBoolean("force-3pane-exp",!1)?"3pane":"2pane"},c=function(){return"3pane"===l()},d=function(){var e=l();if("noexp"!==e)i().get("use-3pane").save({state:"3pane"===e,close:"3pane"===e,time:!0}).then((function(){s().send("force_3pane_experiment",{dwh:{state:"3pane"===e}})}))}},52935:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(95037),c=n.n(l),d=n(2335),u=n(51474),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.Z=s().Block.extend({name:"ad-feedback",template:c(),blocks:{"react-async":u.Z},defaults:{disabled:!0,step:1},immutable:!0,storedDwh:null,constructor:function(){s().Block.apply(this,arguments),this.onActionPositiveClick=this.onActionPositiveClick.bind(this),this.onActionNegativeClick=this.onActionNegativeClick.bind(this),this.onActionUnknownClick=this.onActionUnknownClick.bind(this),this.on1StepClick=this.on1StepClick.bind(this),this.onNotInterestingClick=this.onNotInterestingClick.bind(this),this.onAlreadyPurchasedClick=this.onAlreadyPurchasedClick.bind(this),this.onOtherClick=this.onOtherClick.bind(this),this.onCancelClick=this.onCancelClick.bind(this)},didMount:function(){var e=this;a().send("ad-feedback-show",{dwh:{state:"ad-feedback-show"}}),d.default.on("sidebar:visible",(function(){return e.handleSidebarAdVisible()}))},destroyElement:function(){d.default.setFeedbackUnactive(),this.el.parentNode.removeChild(this.el)},handleSidebarAdVisible:function(){this.set("disabled",!1)},sendFeedback:function(e,t){var n={dwh:f({state:e},t)};a().send(e,n)},onActionPositiveClick:function(){var e=d.default.dwhData;this.sendFeedback("ad-feedback-positive",e),this.destroyElement()},onActionNegativeClick:function(){var e=d.default.dwhData;this.sendFeedback("ad-feedback-negative",e),this.on1StepClick(e)},onActionUnknownClick:function(){var e=d.default.dwhData;this.sendFeedback("ad-feedback-unknown",e),this.destroyElement()},getTextData:function(){var e=i.ADVERT_FEEDBACK_TEXTS.title,t=i.ADVERT_FEEDBACK_TEXTS.positiveButtonText,n=i.ADVERT_FEEDBACK_TEXTS.negativeButtonText,r=i.ADVERT_FEEDBACK_TEXTS.unknownButtonText;return{title:e||i18n("Вам интересны похожие предложения?"),positiveButtonText:t||i18n("Интересны"),negativeButtonText:n||i18n("Не моё"),unknownButtonText:r}},on1StepClick:function(e){if(i.ADVERT_FEEDBACK_CONFIG2.step2enable)this.set("step",2),d.default.setFeedback2Step(),this.storedDwh=e,this.sendFeedback("ad-feedback-2-show",e);else this.destroyElement()},onNotInterestingClick:function(){this.sendFeedback("ad-feedback-2-not-intr",this.storedDwh),this.destroyElement()},onAlreadyPurchasedClick:function(){this.sendFeedback("ad-feedback-2-alrd-prchsd",this.storedDwh),this.destroyElement()},onOtherClick:function(){this.sendFeedback("ad-feedback-2-other",this.storedDwh),this.destroyElement()},onCancelClick:function(){this.sendFeedback("ad-feedback-2-cancel",this.storedDwh),this.destroyElement()}})},79087:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(26499),c=n(91779),d=n(28652),u=n.n(d),f=n(54844),m=n(24091),h=n(31086),p=n(78267),g=n(61799),v=n(93286),_=n(7974),b=n(12199),E=new h.Z;t.Z=s().Block.extend((0,g.Z)({events:[{name:"attach-list-cloud",rename:"to-cloud"},"download-link","thumb-download","thumb-open","thumb-cloud"]})({name:"attach-list",template:u(),isolateEvents:!1,mods:{fileSize:c.j,fileCount:l.O},blocks:{"attach-thumb":_.Z,ico:b.Z},events:{expand:"onExpandClick",collapse:"onCollapseClick","thumb-rendered":"onThumbRendered","download-link":"onDownloadLink","attaches-status-click":"onAttachesStatusClick","attaches-status-hover":"onAttachesStatusHover"},attrChanged:{expanded:function(e){var t=e?"attach-list-expanded":"attach-list-collapsed";this.broadcast(t),this.showMore()}},defaults:{models:[],"disable-save-to-cloud":i.DISABLE_SAVE_TO_CLOUD,"total-size":0,"download-link":"",itemsRendered:0,"disable-save-in-archive":i.DISABLE_SAVE_IN_ARCHIVE},didMount:function(){var e=this.showMore.bind(this);if(this.el&&E.set((function(){setTimeout(e,200)})),this.downloadBtn=this.el.querySelector('[data-name="download-link"]'),this.downloadBtn)this.downloadBtn.addEventListener("click",this.onDownload.bind(this),!0)},didUpdate:function(){this.broadcast("force-recalc")},didUnmount:function(){E.unbind()},onExpandClick:function(){this.set("expanded",!0)},onCollapseClick:function(){this.set("expanded",!1)},hasSaveToCloudAll:function(){return this.is("save-to-cloud")&&this.get("models").some(m.z)},fullLimit:function(){return i.FULL_ATTACH_THUMB_LIMIT},onThumbRendered:function(e){var t=this.get("itemsRendered"),n=this.get("models").length;if(t++,this.set("itemsRendered",t,!0),t===n)this.showMore(),this.forceExpandedAttaches()},showMore:function(){var e=this.refs.thumbs,t=this.refs.container;if(e&&t)this.set("showmore",t.scrollWidth<e.scrollWidth)},forceExpandedAttaches:function(){if(this.get("showmore")&&i.FORCE_EXPANDED_ATTACH_LIST&&this.get("letter-length")<=i.FORCE_EXPANDED_ATTACHES_MAX_TEXT_LENGTH)this.set("expanded",!0),(0,v.ZP)("force_expanded_attach-list")},isStickyEnabled:function(){return!i.IS_NATIVE_STICKY_DISABLED&&f.Z.capabilities["sticky-support"]},onDownloadLink:function(){this.broadcast("attachment:analytics",{models:this.get("models"),event:"download_archv"})},onDownload:function(e){var t=this;if(1===this.get("models").length)if(i.LAYER_UNSAFE_ATTACH){var n=this.get("models")[0];if(n.isUnsafe()){var r=n.getExtension(),a=n.getName();p.default.open("unsafe-attach",{filename:a,extension:r},{dimmer:!0,compact:!0,resolvable:!0,"reject-on-close":!0}).then((function(e){if("ok"===(void 0===e?{resolveType:"error"}:e).resolveType)window.open(t.downloadBtn.getAttribute("href"),"download-frame")})).catch((function(e){if(e)throw e})),e.preventDefault()}}},onAttachesStatusClick:function(){a().send("attaches-status-click_action",{dwh:{reason:"click"}})},onAttachesStatusHover:function(){a().send("attaches-status-click_action",{dwh:{reason:"hover"}})}}))},7974:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(91779),s=n(44438),l=n(53526),c=n.n(l),d=n(24091),u=n(72727),f=n(50),m=n.n(f),h=n(78267),p=n(63062),g=n(93286),v=n(16111),_=n(51474);t.Z=i().Block.extend({name:"attach-thumb",template:c(),blocks:{"react-async":_.Z},attrChanged:{"save-to-cloud":function(){if(this.thumbBlock)this.thumbBlock.setData(this.getParams()),this.thumbBlock.render()}},defaults:{"attach-warning-tooltip":r.ATTACH_WARNING_TOOLTIP},events:{},isImage:function(){return this.get("model").isImage()},isDoc:function(){var e=this.get("model");return e.isPreviewFromDocs()||e.isCloudStock()},isBigAttach:function(){var e=this.get("model");return e.isLink()||e.isCloud()||e.isCloudStock()},getAttachSize:function(){var e=this.get("model");return(0,o.j)(e.get("size"))},getIcon:function(){return this.get("model").getExtension()},getDownloadUrl:function(){return this.get("model").getDownloadUrl()},getThumbImage:function(){if(!this.get("attach-warning-tooltip")||!this.isInfected()){var e=this.get("model"),t=e.isFromDocs()?m().THUMBNAIL_SIZE_L:m().THUMBNAIL_SIZE_M,n=e.getThumbnailUrl(t);if((this.is("full")||this.is("responsive"))&&e.isImage()&&!e.isFromDocs())if(n=e.getThumbnailUrl(m().THUMBNAIL_SIZE_ORIGINAL)||n,e.isPreviewFromDocs()||e.isCloudStock())n=e.getPreviewUrl()||n;if(!e.isFromDocs()||!e.isCloudStock())if(!r.DISABLE_DOCS_PREVIEWS||!e.isFromDocs()&&!e.isPreviewFromDocs())return n}},getTitles:function(){var e=this.get("model");return{downloadTitle:i18n("Скачать"),downloadTooltip:i18n("Скачать")+" (".concat((0,o.j)(e.get("size")),")"),uploadTitle:i18n("В Облако"),uploadTooltip:i18n("Сохранить в Облако"),mainTitle:e.get("duedate")?"".concat(e.get("name"),". ")+i18n("Ссылка доступна до")+" "+(0,s.FE)(e.get("duedate")):e.get("name")}},canSaveToCloud:function(){var e=this.get("model");return(0,d.z)(e)},getParams:function(){var e=this.get("model");this.unsafe=e.isUnsafe(),this.extension=e.getExtension(),this.filename=e.getName();var t=e.isLink()||e.isCloud()||e.isCloudStock(),n=this.is("save-to-cloud")&&!e.isLink()&&!e.isCloud(),a=this.getThumbImage(),i=this.is("full")?i18n("Скачать"):"",l=i18n("Скачать")+" (".concat((0,o.j)(e.get("size")),")"),c=this.is("full")?i18n("В Облако"):"",d=i18n("Сохранить в Облако"),u=e.get("duedate")?"".concat(e.get("name"),". ")+i18n("Ссылка доступна до")+" "+(0,s.FE)(e.get("duedate")):e.get("name"),f={isDeferred:!1,showFilenameTitle:!1,filename:{name:e.get("name")},imageUrl:a,icon:e.getExtension(),type:e.getPrimitiveType(),mainTitle:u,isDocument:a&&e.isFromDocs()&&!e.isImage(),controls:{bottom:{left:{items:[{block:"btn",params:{text:i,title:l,href:e.getDownloadUrl(),icon:"system_download",name:"download",mods:["bare"],target:e.isCloud()||r.VIEWER_OPEN_DOWNLOAD_IN_NEW_WINDOW?"_blank":v.e}}]},right:{items:[]}}}};return n&&f.controls.bottom.left.items.push({block:"btn",params:{text:c,title:d,icon:"to-cloud",name:"cloud",mods:["bare"]}}),t&&f.controls.bottom.right.items.push({block:"btn",params:{title:u,icon:"compose_link",name:"link",mods:["bare","visible","round","green"]}}),f},sendAnalytics:function(e){this.broadcast("attachment:analytics",{models:[this.get("model")],event:e})},didMount:function(){this.onDownload=this.onDownload.bind(this),this.onCloudUpload=this.onCloudUpload.bind(this),this.onOpen=this.onOpen.bind(this),this.broadcast("thumb-item-rendered",this.get("model")),this.sendAnalytics("show")},onDownload:function(e){var t=this;this.broadcast("download",this.get("model")),this.sendAnalytics("download");var n=this.get("model").isCloud()||r.VIEWER_OPEN_DOWNLOAD_IN_NEW_WINDOW?"_blank":v.e;if(r.LAYER_UNSAFE_ATTACH&&this.unsafe)h.default.open("unsafe-attach",{filename:this.filename,extension:this.extension},{dimmer:!0,compact:!0,resolvable:!0,"reject-on-close":!0}).then((function(e){if("ok"===(void 0===e?{resolveType:"error"}:e).resolveType)window.open(t.getDownloadUrl(),n)})).catch((function(e){if(e)throw e})),e.preventDefault()},onCloudUpload:function(){if(this.get("model").isOverMaxLinkSize())return(0,g.ZP)("big_attach_cl_save"),void p.default.error({text:i18n("Что-то пошло не так")});this.broadcast("cloud",this.get("model"))},onOpen:function(){this.sendAnalytics("open");var e=this.get("model");if(!e.isOverMaxLinkSize())this.broadcast("open",this.get("model"));else{var t=e.getDownloadUrl();(0,u.default)(t)}},isInfected:function(){return this.get("model").isInfected()},getQaId:function(){var e=this.get("model");return"".concat(e.get("name")).concat(this.isInfected()?":infected":"")}})},38205:function(e,t,n){"use strict";var r=n(50987),a=n(18440),i=n.n(a),o=n(18156),s=n.n(o),l=n(75975),c=n(93286),d=n(45114);t.Z=i().Block.extend({name:"calendar-button",template:s(),blocks:{button2:d.Z},defaults:{model:null,"dates-metadata":null},attrChanged:{"dates-metadata":function(e){this.get("model").set("dates_metadata.priority_date",e)}},_getCalendarButtonText:function(){var e=this.get("dates-metadata"),t=r.Z.get("LANG");if(e){var n=new Date(1e3*e.timestamp),a=n.getTime()+(0,l.Z7)(n.getTimezoneOffset()),i=t.split("_")[0]||"ru",o=new Date(n.setTime(a)).toLocaleTimeString(i,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"});if("ru"===i)o=o.replace(","," в");return i18n("Напомнить {dateWhen}",{dateWhen:o})}return i18n("Создать событие")},_getRadarPrefix:function(){return"footer-calendar"+(this.get("dates-metadata")?"_metadata":"")},didMount:function(){(0,c.ZP)("thread_letter_footer-calendar_"+(this.get("dates-metadata")?"metadata-render":"render"))}})},81061:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(64571),s=n.n(o),l=n(61799),c=n(45114),d=n(12199);t.Z=i().Block.extend((0,l.Z)({events:[{name:"window-expand",rename:"expand"}]})({name:"compose-collapsed",blocks:{button2:c.Z,ico:d.Z},defaults:{compact:!1,mobile:!1,"is-webview":r.WEBVIEW,"is-octavius-mobile":r.OCTAVIUS_MOBILE,"disable-footer-app-toolbar":r.DISABLE_FOOTER_APP_TOOLBAR},events:{},template:s(),isolateEvents:!1,getMessages:function(){return{draft:function(e){return i18n("Черновик {draftId}",e)}}},isWebviewMobileMode:function(){return this.attrs.mobile&&(this.attrs["is-webview"]||this.attrs["is-octavius-mobile"])&&!this.attrs["disable-footer-app-toolbar"]&&this.attrs.isRouteWithFooter}}))},92203:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(11403),s=n.n(o),l=n(61799),c=n(94993);t.Z=i().Block.extend((0,l.Z)({events:[{name:"click-radar",rename:"click"},"mount"]})({name:"compose-dropdown",template:s(),defaults:{expanded:!1,"radar-id":"cdd","disabled-tomyself":r.CALLS_DISABLE_COMPOSE_DROPDOWN_TOMYSELF,"disabled-call":r.CALLS_DISABLE_COMPOSE_DROPDOWN_CALL,"disabled-calendar":r.CALLS_DISABLE_COMPOSE_DROPDOWN_CALENDAR,"disable-calls-tip":r.DISABLE_CALLS_TIP},blocks:{dropdown:c.Z},events:{"dropdown:toggle":"onDropdownToggle"},checkHasFeature:function(e){switch(e){case"note":return r.NEW_TOOLBAR_PROJECTS_NOTES}return!1},needShowButton:function(e){return this.checkHasFeature(e)},onDropdownToggle:function(e){this.set("expanded",e.details.state)}}))},2418:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(3275),c=n(66866),d=n.n(c),u=n(62974),f=n(50542),m=n(82921),h=n(86450),p=n(60847),g=n.n(p),v=s().Block.extend({name:"lastseen",template:g(),defaults:{loading:!0,client:"",text:""},getIcon:function(){if(i.LASTSEEN_DISABLE_PLATFORM)return null;else return"web"===this.get("client")?"laptop":"mobile"}}),_=n(56302),b=n(95470),E=n(55426),y=n(72727),T=n(85271),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},S=s().Block.extend({name:"contextmenu-correspondent",template:d(),blocks:{list:_.Z,avatar:h.Z,"list-item":b.Z,spinner:E.Z,lastseen:v},events:{"compose:to":"onComposeCreateTo","call:to":"onCallTo",copy:"onCopyEmail"},defaults:{type:"correspondent",model:null,isInAddressbook:!1,checkingPossession:!0,isShouldCheckPossession:!0,lastSeen:{status:"",client_type:""},hideAddContactButton:i.HIDE_CONTEXTMENU_ADD_CONTACT_BUTTON,hideSearchButton:i.HIDE_CONTEXTMENU_SEARCH_BUTTON,extraDetails:{mobile:!1}},didMount:function(){var e=this;Promise.resolve().then((function(){var t=[n(95437),n(88570)];(function(t,n){t.default.register(e),n.default.register(e)}).apply(null,t)})).catch(n.oe)},getUserName:function(e){return e.name.length?e.name:e.email.split("@")[0]},didUnmount:function(){this.clipboard&&this.clipboard.destroy()},onShow:function(){var e=this,t=this.get("model");t.checkContactPossessing(t.email).then((function(n){var r=n.payload,a=r.contacts[t.email];if(e.sendLastSeenRadars(a),i.LAST_SEEN_V2_ENABLE&&a)(0,m.Z)(a).then((function(n){e.set({isInAddressbook:r[t.email],checkingPossession:!1,lastSeen:n,isOnline:a.status_id===i.LASTSEEN_ONLINE_STATUS})}));else e.set(A({isInAddressbook:r[t.email],checkingPossession:!1},i.LAST_SEEN_ENABLE?{lastSeen:a}:{}))}))},onBeforeHide:function(){this.clipboard&&this.clipboard.destroy()},onComposeCreateTo:function(e){var t=e.details;("default"in f.default&&"open"in f.default.default?f.default.default:f.default).open({correspondents:{to:[t]}})},canCallTo:function(e){return i.CALLS_P2P_OUTGOING&&T.Z.getCallsAPIClient().canCallTo([e.email])[0].canCall},onCallTo:function(e){var t=e.details,n=this.getLastseenKey(t);T.Z.getCallsAPIClient().callTo([t.email],{lastSeenKey:n}).then((function(e){if(e.redirectUrl)(0,y.default)(e.redirectUrl)}))},onCopyEmail:function(){var e=this.get("model");(0,u.Z)(e.email)},isLastSeenPossible:function(){return i.LAST_SEEN_ENABLE||i.LAST_SEEN_V2_ENABLE},sendLastSeenRadars:function(e){if(i.LAST_SEEN_ENABLE||i.LAST_SEEN_V2_ENABLE)a().send("lastseen-".concat((null==e?void 0:e.status_id)?"status":"empty"),{skipdwh:!0});if(i.LAST_SEEN_V2_ENABLE)a().send("lastseen-v2-contextmenu-".concat((null==e?void 0:e.status_id)?"status":"empty"),{skipdwh:!0})},getHighResolutionAvatar:function(e){if(!this.isLastSeenPossible()&&e)return e.avatars.default;else return e&&(0,l.Q)(e.email,e.name,180)},getLastseenKey:function(e){if(i.LAST_SEEN_ENABLE||i.LAST_SEEN_V2_ENABLE){var t=this.get("lastSeen"),n=""+Date.now()+Math.floor(1e4*Math.random());return a().send("lastseen-oncall",{dwh:{email:e.email,ls_key:n,ls_status:(null==t?void 0:t.status_id)||"empty",ls_platform:null==t?void 0:t.client_type}}),n}}})},41860:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(88412),c=n.n(l),d=n(76864),u=n(66005),f=n(72727),m=n(4872),h=n.n(m),p=n(56302),g=n(95470);t.Z=s().Block.extend({name:"contextmenu-folder",template:c(),blocks:{list:p.Z,"list-item":g.Z},events:{newtab:"onNewTab"},folder2icoMap:u.ZP,defaults:{type:"folder",model:null,"folders-share-enabled":i.FOLDERS_SHARE_ENABLED,"new-tab-available":!i.USE_SINGLE_TAB},didMount:function(){var e=this;Promise.resolve().then((function(){var t=[n(24578),n(15907),n(24583)];(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){t.default.register(e)}))}).apply(null,t)})).catch(n.oe)},isDisableEdit:function(){return!this.get("model").isEditable()},showDenySharedFolder:function(){var e=this.get("model");return e.isShareTake()&&!(0,d.fT)(e)},isDisableShare:function(){return!this.get("model").isSharable()},isDisableShareOpportunities:function(){return this.get("model").isShareTake()},canAddSubfolder:function(){return this.get("model").canAddSubfolder()},isDisableCreate:function(){if(this.get("model").isShareTake())return!this.canAddSubfolder();else return!1},getRemoveText:function(){if(i.CHANGE_TEXT_REMOVE_BUTTON_SIDEBAR)return i18n("Удалить все письма");else return i18n("Очистить содержимое")},getCreateText:function(){var e=this.get("model"),t=i18n("Добавить вложенную папку");if(e.isShareTake())return t;else return this.canAddSubfolder()?t:i18n("Добавить папку")},getDisplayParentFolder:function(){for(var e=function(e){return h().get(e.get("parent"))},t=e(this.get("model"));t&&t.getChildLevel()>=h().MAX_CHILD_LEVEL;)t=e(t);return t||null},onNewTab:function(e){var t;e.preventDefault();var n=this.get("router"),r=this.get("model"),i=n.getUrl("#letters",{folder:r.get("id")});(0,f.default)(i),a().send("click_new_page",{dwh:{object:"folder",screen:null===(t=null==n?void 0:n.route)||void 0===t?void 0:t.id}})},isEnableClear:function(){var e=this.get("model");return e.isClearable()&&!(0,d.Mx)(e)},isEnableRemove:function(){return this.get("model").isRemovable(!0)}})},93610:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(31322),c=n.n(l),d=n(90557),u=n(4872),f=n.n(u),m=n(92042),h=n.n(m),p=n(78267),g=n(38003),v=n(973),_=n(56302),b=n(95470);t.Z=s().Block.extend((0,v._U)({name:"contextmenu-message",template:c(),blocks:{list:_.Z,"list-item":b.Z},events:{"click:move":"onClickMove",newtab:"onNewTab"},defaults:{type:"message",model:null,selectable:!0,"archive-disabled":i.ARCHIVE_DISABLED,"invite-call":i.CALLS&&!i.CALLS_DISABLE_LETTER_CALL},hasSelectButton:v.IA,isContainedInMetaThread:v.Zh,checkFolderGrant:v.gW,isEnableMark:v.ni,isEnableMoveToSpam:v.wY,isEnableMoveToArchive:v.zr,isEnableRemove:v._x,isEnableMove:v.GK,isEnableFilterCreate:v.jc,isRemoveVisible:v.AJ,didMount:function(){var e=this;Promise.all([Promise.resolve().then(n.bind(n,95437)),Promise.resolve().then(n.bind(n,57147)),Promise.resolve().then(n.bind(n,90421)),(0,d.Af)(),(0,d.Jg)(),Promise.resolve().then(n.bind(n,15907))]).then((function(t){var n=t[0].default,r=t[1].default,a=t[2].default,i=t[3].default,o=t[4].default,s=t[5].default;n.register(e),r.register(e),a.register(e),i.register(e),o.register(e),s.register(e)}));var t=this.get("model");if(t&&t.hasOwnProperty("folders"))this.set("folders",t.folders);if(t&&t.hasOwnProperty("selectable"))this.set("selectable",t.selectable)},isNewTabAvailable:function(){return!i.USE_SINGLE_TAB&&this.get("model")instanceof h()},isShowCallendarButton:function(){var e=this.get("model"),t=i.FEATURE_UNSUBSCRIBE&&e&&e.get("flags.newsletter")&&i.DISABLE_LETTER_CALENDAR_NEWSLETTERS;return!this.is("disable-create-event")&&!t},onNewTab:function(e){var t;e.preventDefault();var n=this.get("router");a().send("click_new_page",{dwh:{object:"message",screen:null===(t=null==n?void 0:n.route)||void 0===t?void 0:t.id}})},isShowCallsButton:function(){var e=this.get("model"),t=i.FEATURE_UNSUBSCRIBE&&e&&e.get("flags.newsletter")&&i.CALLS_DISABLE_LETTER_CALL_NEWSLETTERS;return this.is("invite-call")&&!t},getParentThread:function(){var e=this.get("extraDetails");return null==e?void 0:e.parentThread},onClickMove:function(){var e=this.ids["move-to"],t={folders:this.get("folders"),model:this.get("model"),parentThread:this.getParentThread()};if(this.is("mobile"))p.default.open("move-to-folder",t,{dimmer:!0,mobile:!0,resolvable:!1});else g.Z.open("moveto-folder",t,e);e.set("selected",!0)},isEnableCall:function(){return this.checkFolderGrant(f().SHARE_GRANTS.reply)},shouldDisplayFilter:function(){return!i.FORBID_FILTERS&&!this.get("deselectAll")&&!this.is("mobile")},shouldDisplaySearch:function(){return!this.is("mobile")},shouldDisplaySpam:function(){var e=this.get("model").getFolder();return!i.FORBID_SPAM&&!e.isSpam()&&!this.get("deselectAll")}}))},59470:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(15230),c=n.n(l),d=n(76864),u=n(72727),f=n(90557),m=n(4872),h=n.n(m),p=n(92042),g=n.n(p),v=n(38003),_=n(56302),b=n(95470);t.Z=s().Block.extend({name:"contextmenu-metathread",template:c(),blocks:{list:_.Z,"list-item":b.Z},events:{metathreadnewtab:"onNewtab","click:move":"onClickMove"},defaults:{type:"metathread",model:null,"archive-disabled":i.ARCHIVE_DISABLED},didMount:function(){var e=this;Promise.all([Promise.resolve().then(n.bind(n,95437)),Promise.resolve().then(n.bind(n,57147)),Promise.resolve().then(n.bind(n,90421)),(0,f.Af)()]).then((function(t){var n=t[0].default,r=t[1].default,a=t[2].default,i=t[3].default;n.register(e),r.register(e),a.register(e),i.register(e)}));var t=this.get("model");if(t&&t.folders)this.set("folders",t.folders)},onNewtab:function(e){var t;e.preventDefault();var n=this.get("router"),r=this.get("model").get("metathread_data.folder"),i=n.getUrl("#letters",{folder:r});(0,u.default)(i),a().send("click_new_page",{dwh:{object:"metathread_".concat(r),screen:null===(t=null==n?void 0:n.route)||void 0===t?void 0:t.id}})},isNewTabAvailable:function(){return!i.USE_SINGLE_TAB&&this.get("model")instanceof g()},onClickMove:function(){var e=this.ids["move-to"],t={folders:this.get("folders"),model:this.get("model"),selectedMetathreads:!0};v.Z.open("moveto-folder",t,e),e.set("selected",!0)},isEnableMoveToArchive:function(){return this.get("model").get("metathread_data.folder").checkGrant(h().SHARE_GRANTS.move_to_archive)},isEnableRemove:function(){return this.get("model").get("metathread_data.folder").checkGrant(h().SHARE_GRANTS.remove)},isRemoveVisible:function(){return!(0,d.Mx)(this.get("model").get("metathread_data.folder"))},getRemoveButtonIcon:function(){if(i.CHANGE_ICON_REMOVE_BUTTON_METATHREAD)return"navigation:folder_hidden";else return"delete"},getRemoveButtonText:function(){var e=this.get("model"),t=e&&e.getFolder();if(t&&t.isTrashLike())return i18n("Удалить навсегда");if(i.CHANGE_TEXT_REMOVE_BUTTON_METATHREAD_DELETE)return i18n("Удалить все письма");if(i.CHANGE_TEXT_REMOVE_BUTTON_METATHREAD_EMPTY)return i18n("Очистить содержимое");else return i18n("Удалить")}})},48653:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(73057),s=n.n(o),l=n(16458),c=n(38003),d=n(973),u=n(56302),f=n(95470);t.Z=i().Block.extend((0,d._U)({name:"contextmenu-selection",template:s(),blocks:{list:u.Z,"list-item":f.Z},events:{"click:move":"onClickMove"},defaults:{type:"selection",model:null,selectable:!0,"archive-disabled":r.ARCHIVE_DISABLED},hasSelectButton:d.IA,isContainedInMetaThread:d.Zh,checkFolderGrant:d.gW,isEnableMark:d.ni,isEnableMoveToSpam:d.wY,isEnableMoveToArchive:d.zr,isEnableRemove:d._x,isEnableMove:d.GK,isEnableFilterCreate:d.jc,isRemoveVisible:d.AJ,didMount:function(){var e=this;Promise.resolve().then((function(){var t=[n(95437),n(57147),n(90421)];(function(t,n,r){var a=t.default,i=n.default,o=r.default;if(e.isMounted())a.register(e),i.register(e),o.register(e)}).apply(null,t)})).catch(n.oe);var t=this.get("model");if(t&&t.get("selectable"))this.set("selectable",t.get("selectable"))},getSelectedStats:function(){return(0,l.Z)(this.get("selected"),this.get("selected-folder"))},onClickMove:function(){var e=this.ids["move-to"],t=this.get("model"),n=[];if(t&&t.hasOwnProperty("folders"))n=t.folders;var r={folders:n,model:this.get("selected"),lettersFoldersIds:this.get("letters-folders-ids"),selectedMetathreads:this.get("selected-metathreads"),selection:this.get("if-folder-selected")};c.Z.open("moveto-folder",r,e),e.set("selected",!0)},shouldDisplayFilter:function(e){return!(r.FORBID_FILTERS||this.get("if-folder-selected")||e&&e.metathread)},shouldDisplaySpam:function(e){return!(r.FORBID_SPAM||this.get("model").getFolder().isSpam()||this.get("if-folder-selected")||e&&e.metathread)}}))},973:function(e,t,n){"use strict";n.d(t,{IA:function(){return c},Zh:function(){return d},gW:function(){return u},ni:function(){return f},wY:function(){return m},zr:function(){return h},_x:function(){return p},AJ:function(){return g},GK:function(){return v},jc:function(){return _},_U:function(){return b}});var r=n(91140),a=n(76864),i=n(4872),o=n.n(i),s=n(77917),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function c(){return this.get("selectable")&&!this.isContainedInMetaThread()}function d(){var e=this.get("router"),t=e&&e.model&&e.model.folder,n=this.get("model");return(n&&n.getFolder())!==t}function u(e){return this.get("model").checkGrant(e)}function f(){return this.checkFolderGrant(o().SHARE_GRANTS.mark_as_important)}function m(){return this.checkFolderGrant(o().SHARE_GRANTS.move_to_spam)}function h(){return this.checkFolderGrant(o().SHARE_GRANTS.move_to_archive)}function p(){return this.checkFolderGrant(o().SHARE_GRANTS.remove)}function g(){return!(0,a.Mx)(this.get("model").getFolder())}function v(){return this.checkFolderGrant(o().SHARE_GRANTS.move)}function _(){return!this.get("model").getFolder().isShareTake()}var b=r.Z.createWelterDecorator((function(e){return l({},e)}),s.withWelter)},69335:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(21211),a=n(18440),i=n.n(a),o=n(81903),s=n.n(o),l=n(90557),c=n(4872),d=n.n(c),u=n(39783),f=n.n(u),m=n(92042),h=n.n(m),p=n(61799),g=n(77917),v=n(38003),_=n(2418),b=n(43870),E=n.n(b),y=n(72727),T=n(85271),A=n(50542),S=n(56302),O=n(95470),C=i().Block.extend({name:"contextmenu-correspondents",template:E(),blocks:{list:S.Z,"list-item":O.Z},events:{"compose:to":"onComposeCreateTo","call:to":"onCallTo"},defaults:{type:"correspondents",model:{clipboardText:"",contacts:[],type:"correspondents"}},didMount(){var e=this.refs["js-copy"],t=this.get("model");e.setAttribute("data-clipboard-text",t.clipboardText),(0,l.Zz)().then((0,l.qh)(this,t=>{this.clipboard=this.isMounted()?new t(e):null}))},destroyClipboard(){this.clipboard&&this.clipboard.destroy(),this.clipboard=null},didUnmount(){this.destroyClipboard()},onBeforeHide(){this.destroyClipboard()},onComposeCreateTo(e){var t=e.details;("default"in A.default&&"open"in A.default.default?A.default.default:A.default).open({correspondents:{to:t}})},canCallTo:e=>r.CALLS_P2P_OUTGOING&&T.Z.getCallsAPIClient().canCallTo(e.map(e=>e.email)).some(e=>e.canCall),onCallTo(e){var t=e.details;T.Z.getCallsAPIClient().callTo(t.map(e=>e.email)).then(e=>{if(e.redirectUrl)(0,y.default)(e.redirectUrl)})}}),w=n(41860),L=n(93610),k=n(59470),I=n(48653),R={thread:L.Z,letter:L.Z,selection:I.Z,folder:w.Z,metathread:k.Z,correspondent:_.Z,correspondents:C},D=document.getElementsByClassName(g.default.lookup("scrollable")),M=i().Block.extend((0,p.Z)({id:function(e){var t;return"contextmenu-"+(null===(t=null==e?void 0:e.block)||void 0===t?void 0:t.get("type"))},explicit:!0})({name:"contextmenu",template:s(),blocks:{},events:{"menu-toggle":"onMenuClick"},defaults:{type:"",expanded:!1,x:0,y:0},notVisualAttributes:{type:!0},attrChanged:{expanded:function(e){var t=this;if(this[e?"$on":"$off"](this.el.ownerDocument,"click","handleOutside"),this[e?"$on":"$off"](this.el.ownerDocument.defaultView,"resize","handleOutside"),this[e?"$on":"$off"](this.el.ownerDocument.defaultView,"blur","handleOutside"),[].forEach.call(D,(function(n){t[e?"$one":"$off"](n,"scroll","handleOutside")})),!e)v.Z.close()}},didMount:function(){var e=this;Promise.resolve().then((function(){var t=[n(57147)];(function(t){var n=t.default;if(e.isMounted())n.register(e)}).apply(null,t)})).catch(n.oe),this.onEscape=function(t){t.stopImmediatePropagation(),e.hide()}},didUnmount:function(){this.destroyBlock()},onContextmenu:function(e,t){e.preventDefault(),this.createMenu(e,t),this.setCoordinates(e),this.show()},setCoordinates:function(e){var t,n,r=e.originalEvent,a=this.refs.block,i=r.clientX,o=r.clientY,s=window.innerWidth,l=window.innerHeight,c=a.offsetWidth,d=a.offsetHeight;if(s-i-8-4>c)t=i+4;else if(i-8-4>c)t=i-c-4;else t=s-c-8;if(l-o>d)n=o;else n=o-(d-(l-o));this.set({x:t,y:n})},createMenu:function(e,t){var n=this.getEventType(e),r=R[n],a=this.get("type");if(r)if(n!==a){this.destroyBlock();var i=new("default"in r&&"blockName"in r.default&&"render"in r.default?r.default:r)({model:e.details,router:this.get("router"),extraDetails:t},this.getChildContext());this.block=i,i.renderTo(this.refs.block)}else this.block.set({model:e.details,extraDetails:t})},show:function(){var e=this;this.set("expanded",!1),Promise.resolve(this.block.onShow&&this.block.onShow()).then((function(){e.set("expanded",!0),e.radar("show"),(0,l.BA)().then((0,l.qh)(e,(function(t){t("escape",e.onEscape)})))}))},hide:function(){this.set("expanded",!1),this.onHide()},setStyle:function(){return"left: ".concat(this.get("x"),"px;top: ").concat(this.get("y"),"px")},handleOutside:function(e){if(!e||2!==e.button||"contextmenu"===e.type)if(!e.target.window){if(!this.el.contains(e.target))this.hide()}else this.hide();else e.preventDefault()},getBlock:function(){return this.block},destroyBlock:function(){if(this.block)this.block.onDestroy&&this.block.onDestroy(),this.block.destroy(),this.set("type",""),this.block=null,this.refs.block.innerHTML="",v.Z.destroy()},getEventType:function(e){var t=e.details,n="";if(!t)return n;if(t instanceof d())n="folder";if(t instanceof f())n="letter";if(t instanceof h())n="thread";if(String(t.id).match("multithreadFixId"))n="metathread";if("correspondent"===t.type)n="correspondent";if("correspondents"===t.type)n="correspondents";if(this.checkIfSelection(t))n="selection";return n},checkIfSelection:function(e){var t=this.isSelectedMatchToClicked(e);return r.ENABLE_ACTION_OVER_SELECTED&&e&&e.isLetterSelected&&!t},isSelectedMatchToClicked:function(e){var t=this.get("selected-map"),n=this.get("selected-length");return t[e.id]&&1===n},onHide:function(){var e=this;if(this.block)this.block.onBeforeHide&&this.block.onBeforeHide(),(0,l.BA)().then((0,l.qh)(this,(function(t){t.unbind("escape",e.onEscape)})))},onMenuClick:function(e){if(!e.isDefaultPrevented()||this.is("expanded"))e.preventDefault(),this.hide()}}))},56706:function(e,t,n){"use strict";n.d(t,{Z:function(){return b},v:function(){return _}});var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(30098),c=n.n(l);var d=n(4872),u=n.n(d),f=n(75273),m=n(77917),h=n(15045),p="function"==typeof window.requestAnimationFrame,g="scrollBehavior"in document.documentElement.style;function v(e){if(!p)window.setTimeout(e,16);else window.requestAnimationFrame(e)}function _(e){if(i.LETTER_PREVIEW_RADAR){var t=0,n=e.find((function(e){return e.get("folder")}));if(n){var r=Number(n.get("folder"));if(e.forEach((function(e){var n=e.get("attachments_count"),r=e.meta("previews");if(n&&!r)t+=n,e.meta("previews",!0)})),r!==u().TOMYSELF&&r!==u().INBOX)r="oth";if(t>0)a().send("lp-count-".concat(r),{v:t})}}}var b=s().Block.extend((0,m.withWelter)({name:"dataset",template:c(),performanceTrace:"track",isolateEvents:!1,blocks:{},defaults:{models:[],"item-height":0,persist:!1,"select-mode":!1},attrChanged:{models:function(){delete this.scrollTop,this.handleScroll()},"x-ponymode":function(e){(0,f.Fz)("ponymode",e?1:0)}},handleSelected:function(e){e.details.invert("selected")},handlePrepareDragElement:function(e,t,n){console.warn("".concat(this.block,"#handlePrepareDragElement — not implemented"),n)},constructor:function(){s().Block.apply(this,arguments),this.handleScroll=this.handleScroll.bind(this),this.handleAnimationFrame=this.handleAnimationFrame.bind(this),this._visibleBlockMeasures={},this._itemsCached={},this.height=0,this._blockMeasures={},this._animation=void 0},didMount:function(){var e=this.el,t=h.Z.getScrollableBlock(this);if(t.el)e=t.el;if(this._scrollable=e||document.body,this.$on(this._scrollable,"scroll","handleScroll"),this.handleScroll(!0),window.addEventListener)window.addEventListener("resize",this.handleScroll)},didUpdate:function(e){var t=this.is("select-mode");if(!t)for(var n in this.attrs)if("key"!==n&&"models"!==n)if(e[n]!=this.attrs[n]){t=!0;break}this.updateItems(t)},didUnmount:function(){for(var e in window.removeEventListener("resize",this.handleScroll),this._itemsCached)this.removeItemInstance(this._itemsCached[e]);this._itemsCached=void 0},handleScroll:function(e,t){if(void 0===e)e=null;if(void 0===t)t=!1;if(this._scrollable){var n=!e,r=this._scrollable.scrollTop,a=this.scrollTop;if(r<0)r=0;if(t||r!==a){var i=this.visibleElementTop,o=this.visibleElementBottom,s=this._scrollable.clientHeight;if(!this._animation){if(null!==i&&null!==o&&i<r&&o>r+s)n=!0;if(this.scrollTop=r,this.viewHeight=s,!n)this.updateItems();this.callScrollEventHandler({scrollTop:r,dataset:this})}}}},updateScroll:function(){this.handleScroll(null,!0)},getHeightForItem:function(e){var t=this.get("item-height");if("function"==typeof t)return t(e);else return t},getItemPersist:function(e){var t=this.get("persist");if("function"==typeof t)return t(e);else return!0===t},recalculateVisibleRange:function(){var e,t=this.get("models"),n=parseInt(this.get("bottom-spacer"),10)||300,r=parseInt(this.get("top-spacer"),10)||300;this._blockMeasures={};var a,i,o=this.visibleElementTop,s=this.visibleElementBottom,l=this.viewHeight,c=this.scrollTop,d=Math.max(c-r,0),u=c+l+n,f={models:[],offset:0,placeholder:{top:0,height:0}};o=null,s=null;for(var m,h=0,p=0;p<t.length;p++)if(m=t[p],a=this.getHeightForItem(m),i=this.getItemPersist(m),h+=a,f.placeholder.height+=a,this._blockMeasures[m.id]={offset:h,height:a},!i&&h<d)f.placeholder.top+=a;else if(i||h-a<=u)if(f.models.push({model:m,index:p}),!i)if(null===o)o=h-a,f.offset=p;else s=h;return this.visibleElementTop=o,this.visibleElementBottom=s,this.height=h,this._lastCalculatedRange=f,null===(e=this.get("handle-new-range"))||void 0===e||e(f),f},updateItems:function(e){if(void 0===e)e=!1;var t=this.recalculateVisibleRange(),n=this.refs.items;if(n){n.style.height=t.placeholder.height+"px",n.style.paddingTop=t.placeholder.top+"px";var r,a={mounts:[],updates:[],partialUpdates:{}};_(t.models.map((function(e){return e.model})));for(var i=0;i<t.models.length;i++)if((r=this.createItemElement(e,a,t.models[i].model,t.models[i].index,t.models.length))&&r!==n.children[i])n.insertBefore(r,n.children[i]);var o=n.children.length,l=t.models.length;for(i=l;i<o;i++)n.removeChild(n.children[l]);var c={},d=Math.max(a.mounts.length,a.updates.length);for(i=0;i<d;i++){if(i<a.mounts.length)a.mounts[i].$handleEvent({type:"$mount"});if(i<a.updates.length)s().Block.__callDidUpdate(a,i,c)}this.collectGarbageFromCache(e);var u=this.get("items-update");if(u)u(!this._itemsUpdated),this._itemsUpdated=!0}},collectGarbageFromCache:function(e){if(void 0===e)e=!1;var t;for(var n in this._itemsCached){if(t=this._itemsCached[n],e&&0===t.hits)this.removeItemInstance(t),delete this._itemsCached[n];if(t.hits>0)t.hits--}},removeItemInstance:function(e,t){if(void 0===t)t=!1;if(e.onRemove)e.onRemove();if(s().vdom.destroy(e.virtualNode),t&&e.element&&e.element.parentNode)e.element.parentNode.removeChild(e.element)},createItemElement:function(e,t,n,r,a){var i=this,o="".concat(n.id,"__").concat(n.cid),l=this.get("item-context")(n,r,a),c=this._itemsCached[o];if(c){if(c.hits++,!e)e=!function(e,t){var n,r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var i=0;i<r.length;i++)if(e[n=r[i]]!==t[n])return!1;return!0}(l,c.context);if(c.context=l,e)this.updateItemFragment(c,t,n,r,a);return c.element}var d={tag:"MAIN",attrs:{},events:{},children:[],dom:{firstElementChild:null}};if(this.getTemplateMatch("dataset-item")(d,"".concat(this.key,"::createItemElement::").concat(o),(function(e){return e}),t,n,r,a,l),d.children.length){if(d=s().vdom.create(d),c={key:o,context:l,element:d.dom.firstElementChild,virtualNode:d,hits:1},this._itemsCached[o]=c,n.on){var u=function(){if(i.isMounted())i.removeItemInstance(c,!0),delete i._itemsCached[o]};n.on("destroy",u),c.onRemove=function(){n.off("destroy",u)},n.on("destroy",u)}return c.element}},updateItemFragment:function(e,t,n,r,a){var i={tag:"MAIN",attrs:{},events:{},children:[]};this.getTemplateMatch("dataset-item")(i,"".concat(this.key,"::createItemElement::").concat(e.key),(function(e){return e}),t,n,r,a,e.context),e.virtualNode=s().vdom.update(e.virtualNode,i)},getLastCalculatedRange:function(){return this._lastCalculatedRange||this.recalculateVisibleRange()},callScrollEventHandler:function(e){var t=this.get("handle-scroll");if("function"==typeof t)t(e)},getBlockMeasuresByModelId:function(e){return this._blockMeasures[e]},getScrollTop:function(){return this.scrollTop||this._scrollable&&this._scrollable.scrollTop},getViewHeight:function(){return this.viewHeight},isScrolledToBottom:function(){var e=this.get("models");if(!e)return!1;if(!e.length)return!0;var t=e[e.length-1].id,n=this.getBlockMeasuresByModelId(t);if(!n)return!1;else return this.getScrollTop()+this.getViewHeight()>=n.offset},scrollTo:function(e,t){var n=this._scrollable;if(n){var r,a="smooth",i="auto";if(t&&void 0!==t.behavior)a=t.behavior;if(t&&void 0!==t.duration)i=t.duration;if(g&&"smooth"===a&&"auto"===i)return n.scrollTo({top:e,behavior:a}),Promise.resolve();if("instant"===a)return n.scrollTop=e,Promise.resolve();if("auto"===i)i=1e3;var o=new Promise((function(e){r=e})),s=Date.now(),l={start:n.scrollTop,end:e,duration:i,promise:o,resolve:r,startTs:s,lastTs:s};if(!this._animation)v(this.handleAnimationFrame);return this._animation=l,o}},handleAnimationFrame:function(){var e=this._animation,t=this._scrollable,n=this.height;if(e){var r=Date.now(),a=e.startTs+e.duration;if(Math.abs(r-a)<10||r>a)return t.scrollTop=e.end,this._animation=void 0,this.handleScroll({},!0),void e.resolve();var i=r-e.lastTs,o=(e.end-e.start)*(i/e.duration),s=t.scrollTop+o;s=Math.max(s,0),s=Math.min(s,n),t.scrollTop=s,e.lastTs=r,v(this.handleAnimationFrame)}}}))},46276:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(19275),o=n(18440),s=n.n(o),l=n(44438),c=n(35373),d=n.n(c),u=n(62974),f=n(39783),m=n.n(f),h=n(63062),p=n(93286),g=n(86450),v=n(12199),_=n(49649),b=s().Block.extend({name:"discounts-item",template:d(),blocks:{avatar:g.Z,ico:v.Z,"react-2kit-async":_.Z},notVisualAttributes:{defaultVisible:!0},mods:{formatDate:function(e){if(e.is_default)return"";else return i18n("до {date}",{date:(0,l.Ak)(e.date,!0)})}},defaults:{title:i18n("Название скидки"),text:i18n("Краткое описание скидки с условиями, при которых она действительна."),image:void 0,colors:{},defaultImage:i.Z.get("urls.avatarUrl")+"/pic?width=90&height=90",disabled:!1,width:"default",endDateNewLine:!1},events:{"discounts-click":"handleClick","promocode-click":"handlePromocodeClick"},isCopySupported:u.w,constructor:function(){s().Block.apply(this,arguments),this.handleSwitch=this.handleSwitch.bind(this)},didMount:function(){var e=this.refs.tag,t=this.refs["end-date"];if(e&&t)if(e.getBoundingClientRect().top!==t.getBoundingClientRect().top)this.set({endDateNewLine:!0})},handlePromocodeClick:function(){var e=this;if((0,u.w)())(0,u.Z)(this.get("promocodes")[0]).then((function(){h.default.add({qa:"discount-copy-promocode",text:i18n("Промокод скопирован")});var t=m().all.get(e.get("model").id);(0,p.ZP)({type:"discount_promocode_copy",dwh:{letterId:null==t?void 0:t.get("id"),jsonld:null==t?void 0:t.get("discount.from_jsonld")}})})).catch((function(){(0,p.ZP)("discount_promocode_copy_error")}))},handleSwitch:function(e){a().send("discounts_switch_".concat(e),{i:{"from-item":1}}),this.broadcast("switch",e)},getBrandLogo:function(){return i.Z.get("urls.logoLetterUrl")},handleClick:function(){if(this.is("href")&&this.is("model")){var e=m().all.get(this.get("model").id),t=e.get("thread_id"),n=e.get("flags.unread");a().send("open_discount_thread",{dwh:{from:"discount_block",threadId:t,letterId:e.get("id"),unread:n,defaultVisible:this.get("defaultVisible"),jsonld:e.get("discount.from_jsonld"),relevant:e.get("flags.is_relevant")}})}},getLastPromocode:function(){var e=this.get("promocodes");return e&&e[0]&&e[0].toUpperCase()}});t.Z=b},26578:function(e,t,n){"use strict";var r=n(17717),a=n.n(r),i=n(54498),o=n(21211),s=n(18440),l=n.n(s),c=n(78067),d=n.n(c),u=n(4183),f=n(75705),m=n(14077),h=n(39783),p=n.n(h),g=n(46276),v=n(90557),_=l().Block.extend({name:"discounts",template:d(),blocks:{"discounts-item":g.Z},lazyBlocks:{gallery:v.yF},defaults:{_progress:!1,discounts:[],disableDiscountsBlock:!0,visibleItemsCount:0},events:{"discounts:switch":"handleDiscountsSwitch","gallery:scroll:end":"handleGalleryScrollEnd","all:blocks:visible":"handleGalleryScrollEnd","gallery:blocks:rendered":"handleGalleryBlocksRendered"},getDiscountColors:function(e){return o.PROMO_DISCOUNTS_COLORS[e]},getThreadImage:function(e){var t=p().all.get(e);return null==t?void 0:t.get("correspondents.from.0.avatars.default")},getThreadHref:function(e){var t=p().all.get(e),n=this.get("folder");return(0,m.fS)(t,n,{router:this.get("router"),threads:this.is("threadsEnabled"),search:this.is("search")})},getModel:function(e){return p().all.get(e)},handleDiscountsSwitch:function(e){var t=this;this.set("_progress",!0),(0,u.default)({type:i.TOGGLE_DISCOUNTS,state:!!e.details,uid:void 0}).then((function(){t.set("_progress",!1)}))},getGalleryControls:function(){var e=["touch"];if(this.is("3pane")){if(e.push("arrows_bottom","pages"),"all"==o.DISCOUNTS_MOUSE_SCROLL)e.push("mouse")}else if(e.push("arrows_middle"),"all"==o.DISCOUNTS_MOUSE_SCROLL||"2pane"==o.DISCOUNTS_MOUSE_SCROLL)e.push("mouse");return e.join(",")},handleGalleryScrollEnd:function(){var e=a().get(o.DISCOUNTS_FLAG_NAME);if(!e.getCount("show"))e.save({hit:!0})},handleGalleryBlocksRendered:function(e){if(this.isMounted())this.set({visibleItemsCount:e.details.visibleItemsCount})},isNewDiscount:function(e){var t=p().all.get(e),n=null==t?void 0:t.get("date"),r=(0,f.V)();return(null==t?void 0:t.get("flags.unread"))&&n&&r<n+o.DELAY_FOR_NEW_DISCOUNT},didMount:function(){this.set({disableDiscountsBlock:!!a().get(o.DISCOUNTS_FLAG_NAME).getCount("show")})}});t.Z=_},43353:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(21211),a=n(18440),i=n.n(a),o=n(41501),s=n.n(o),l=n(76864),c=n(29404),d=n(4872),u=n.n(d),f=n(78267),m=n(61799),h=n(38003),p=n(94993),g=n(12199),v=n(56302),_=n(95470),b=n(75589),E=n(21827),y=n.n(E),T=n(54844),A=n(68032),S=i().Block.extend({name:"shortcut-hint",template:y(),defaults:{shortcut:"","shortuc-mac":"","is-mac":T.Z.mac},getShortcut:function(){var e=this.get("shortcut-mac"),t=this.get("shortcut");if(this.get("is-mac")&&e)return A.Z.getShortcutTitle(e);else return A.Z.getShortcutTitle(t)}}),O={newsletters:"categories:mailings",social:"navigation:users",news:"categories:subscriptions",official:"categories:government",receipts:"categories:receipts",travel:"categories:flight",event:"categories:ticket",finance:"categories:currency_rouble",registration:"categories:access",order:"navigation:cart",fees:"categories:government",uncategorized:"categories:mail",tomyself:"categories:self_mail",school:"categories:school",games:"categories:games"},C=i().Block.extend((0,m.Z)({id:"dropdown",events:[{name:"compose:reply",data:c.tA},{name:"compose:replyall",data:c.tA},{name:"compose:forward",data:c.tA},{name:"mark:readed",data:c.tA},{name:"mark:unreaded",data:c.tA},{name:"mark:flagged",data:c.tA},{name:"mark:unflagged",data:c.tA},{name:"remove",data:c.tA},{name:"archive",data:c.tA},{name:"spam",data:c.tA},{name:"unspam",data:c.tA},{name:"superspam",data:c.tA},{name:"click:move",data:c.tA},{name:"search:from",data:c.tA},{name:"calendar:create",data:c.tA},{name:"print",data:c.tA},{name:"calls:invite",data:c.tA},{name:"settingsfilters:create",data:c.tA},{name:"forward",data:c.tA},{name:"translator:show",rename:"trans:click"},{name:"download",rename:"download:eml"},{name:"headers",rename:"headers:open"},"click:category-feedback","click:letter-more","newtab"]})({name:"dropdown-actions",template:s(),isolateEvents:!1,blocks:{dropdown:p.Z,list:v.Z,"list-nested":b.Z,"list-item":_.Z,ico:g.Z,"shortcut-hint":S},defaults:{"nestedmenu-expanded":!1,"selection-actions":!1,"more-expanded":!1,translate:!1,"archive-force-disabled":r.ARCHIVE_DISABLED,"new-tab-available":!r.USE_SINGLE_TAB,"disable-shortcuts":r.DISABLE_DROPDOWN_ACTIONS_SHORTCUTS},events:{"click:move":"onMoveToClick","click:category-feedback":"onCategoryFeedbackClick","click:letter-more":"onLetterMoreClick","dropdown-change":"onDropdownChangeState","click:unsubscribe":"onUnsubscribeClick"},didUnmount:function(){h.Z.destroy()},didUpdate:function(){if(this._scrollToLastItem&&this.get("more-expanded")){var e=this.refs.list.parentNode;try{e.scrollTo({top:1e4,behavior:"smooth"})}catch(t){e.scrollTop=1e4}this._scrollToLastItem=null}},onLetterMoreClick:function(){this._scrollToLastItem=!0,this.set("more-expanded",!0)},onUnsubscribeClick:function(e){var t=e.details.selectedLettersIds;this.broadcast("unsubscribe",{ids:t,position:"more-dropdown"})},onMoveToClick:function(){if(this.is("touch")){var e=this.get("model");f.default.open("move-to-folder",{letter:e},{dimmer:!0,mobile:!0,resolvable:!0})}else this.toggleSubmenu("moveto-folder")},onCategoryFeedbackClick:function(){this.toggleSubmenu("category-feedback")},toggleSubmenu:function(e){if(!this.get("nestedmenu-expanded")){var t=this.ids[e],n={folders:this.get("folders"),model:this.get("model"),"dark-mode":this.get("dark-mode"),metathreads:this.get("metathreads"),parentThread:this.get("parentThread")};h.Z.open(e,n,t)}},onDropdownChangeState:function(e){if(!e.details.state)h.Z.close(),this.set({"nestedmenu-expanded":!1,"more-expanded":!1})},getCategoryIcon:function(e,t){var n=e.get("transaction_category"),r=t.isMetathread()&&t.get("type"),a=n||r||"uncategorized";return{name:a,icon:O[a]}},getCurrentFoldersIds:function(){if(this.get("route").is("#read-letter #search-letter")){return[this.get("model").get("folder")]}var e=this.get("lettersFoldersIds");if(e.length)return e;else return[this.get("folder").id]},checkFolderGrant:function(e){return this.getCurrentFoldersIds().every((function(t){return u().all.get(t).checkGrant(e)}))},isEnableReply:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.reply)},isEnableForward:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.forward)},isEnableRedirect:function(){return this.checkFolderGrant(u().SHARE_GRANTS.redirect_everywhere)},isEnableForwardAsAttach:function(){return this.checkFolderGrant(u().SHARE_GRANTS.forward_as_attachment)},isEnableMove:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.move)},isEnableRemove:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.remove)},isRemoveVisible:function(){return!(0,l.Mx)(this.get("folder"))},isEnableMark:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.mark_as_important)},isEnableMoveToSpam:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.move_to_spam)},isEnableMoveToArchive:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(u().SHARE_GRANTS.move_to_archive)},isEnablePrint:function(){return this.isEverySelectedFoldersMine()},isEnableDownload:function(){return this.isEverySelectedFoldersMine()},isEnableServiceHeaders:function(){return!r.DISABLE_LETTER_HEADERS_BUTTON&&this.isEverySelectedFoldersMine()},isEnableCall:function(){return this.checkFolderGrant(u().SHARE_GRANTS.reply)},isEnableFilterCreate:function(){return this.isEverySelectedFoldersMine()},isEverySelectedFoldersMine:function(){return this.getCurrentFoldersIds().every((function(e){return!u().all.get(e).isShareTake()}))}}))},94993:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(57450),o=n.n(i),s=n(54844),l=n(61799),c=n(38003),d=n(45114),u=n(91622),f=n(15045),m=n(90557);t.Z=a().Block.extend((0,l.Z)()({name:"dropdown",template:o(),defaults:{expanded:!1,"disable-expand-top":!1,"disable-expand-center":!1,"expand-top":!1,"expand-left":!1,"expand-center":!1,"scroll-style":"normal","calculated-expand-left":!1,"hover-support":s.Z.capabilities["hover-support"],"auto-close":!0},blocks:{button2:d.Z},events:{"ctrl-click":"handleToggle","list-click":"handleListClick"},didMount:function(){var e=this,t=f.Z.getScrollableBlock(this),n=u.ZP.getLayoutById("main");this.container=this.attrs.container||t&&t.el||n&&n.el||document.body,this.hide=this.hide.bind(this),this.onEscape=function(t){t.stopImmediatePropagation(),e.hide()},window.addEventListener("resize",this.hide)},didUnmount:function(){window.removeEventListener("resize",this.hide)},getUnblockedDirections:function(e){var t=this;return e.filter((function(e){return!t.is("disable-expand-".concat(e))}))},getHorizontalDirections:function(){return this.get("expand-left")?["left","right"]:["right","left"]},getPreferredHorizontalDirection:function(e,t,n){var r=this.getHorizontalDirections(),a=t.width,i={left:n.right-e.left,right:e.right-n.left},o=r.find((function(e){return i[e]-a>0}));if(o)return o;else return r[0]},attrChanged:{expanded:function(e){var t=this;if(this[e?"$on":"$off"](this.el.ownerDocument,"click","handleOutsideTap"),this[e?"$on":"$off"](this.el.ownerDocument,"contextmenu","handleOutsideTap"),this[e?"$on":"$off"](this.refs.list,"scroll","closeSubmenu"),this[e?"$one":"$off"](this.el.ownerDocument.defaultView,"resize","closeSubmenu"),(0,m.BA)().then((0,m.qh)(this,(function(n){if(e)n("escape",t.onEscape);else n.unbind("escape",t.onEscape)}))),e&&!this.is("touch-nav")){this.set({"expand-top":!1,"expand-center":!1,"calculated-expand-left":!1}),this.refs.list.style["max-height"]=null,this.refs.list.style.left=null,this.refs.list.style.right=null;var n=this.refs.list.getBoundingClientRect(),r=this.refs.list.parentNode.getBoundingClientRect(),a=this.container.getBoundingClientRect(),i=n.height,o=n.width,s=a.bottom-r.bottom-i,l=r.top-a.top-i,c="left"===this.getPreferredHorizontalDirection(a,n,r);this.set("calculated-expand-left",c);var d={bottom:{space:s-10,activate:function(e){var n=i- -e;t.refs.list.style["max-height"]="".concat(n,"px")}},top:{space:l-10,activate:function(e){t.set("expand-top",!0);var n=i- -e;t.refs.list.style["max-height"]="".concat(n,"px")}},center:{space:a.height-i-20,activate:function(){t.set("expand-center",!0);var e=-r.top+a.top+10,n=c?-o:0,i=a.height-20;t.refs.list.style.top="".concat(e,"px"),t.refs.list.style.left="".concat(n,"px"),t.refs.list.style["max-height"]="".concat(i,"px")}}},u=this.getUnblockedDirections(["bottom","top","center"]);if(0===u.length)return void console.warn("Нет направления, куда мог бы открыться дропдаун");if(u.some((function(e){var t=d[e];if(t.space<0)return!1;else return t.activate(t.space,!0),!0})))return;var f=this.getUnblockedDirections(["center","bottom","top"])[0],h=d[f];h.activate(h.space,!1)}this.broadcast("dropdown-change-state",{state:e})}},handleListClick:function(e){if(this.is("auto-close")&&this.is("expanded"))this.handleToggle(e)},handleOutsideTap:function(e){if(!this.el.contains(e.target))this.hide()},handleToggle:function(e){var t=this.is("expanded");if(!e.isDefaultPrevented()||t)e.preventDefault(),this.invert("expanded"),this.broadcast("dropdown-change-state",{state:!t})},hide:function(){this.set("expanded",!1)},closeSubmenu:function(){c.Z.close()}}))},46637:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r,a,i=n(21211),o=n(18440),s=n.n(o),l=n(56020),c=n.n(l),d=n(36889),u=n.n(d),f=n(61799),m=n(38003),h=n(24052),p=n.n(h),g=n(83076),v=n.n(g),_=n(4685),b=s().Block.extend({name:"filters-control",template:p(),defaults:{"pony-mode":!1,iconOnly:!1},getControlText:function(){var e=this.get("full"),t=this.get("default-filter-text"),n=this.get("filters"),r=this.get("sortingType");if(e){if(r&&"D"!==r&&n.length>1)return"".concat(v()("Фильтры"),": ").concat(n.length,", ").concat(new _.ZP(r).controlText);if(r&&"D"!==r&&1===n.length&&"all"!==n[0].type)return"".concat(n[0].text,", ").concat(new _.ZP(r).controlText);if(r&&"D"!==r)return new _.ZP(r).controlText;if(n.length>1)return"".concat(v()("Фильтры"),": ").concat(n.length);if(n.length)return"".concat(n[0].text)}if(r&&"D"!==r)return new _.ZP(r).controlText;if(1===n.length&&"all"===n[0].type)return t;if(n.length>1)return v()("Фильтры");else return n[0].text},getControlIcons:function(){return this.get("filters").map((function(e){return e.icon}))},getActiveFilters:function(){return this.get("filters").map((function(e){return e.type})).join(",")},getActiveFiltersAndSorting:function(){var e=this.get("sortingType");return"".concat(this.getActiveFilters(),"|").concat(e)},isFixedWidthFilterText:function(){if(i.PORTAL_MENU_MORE_FOLDER_ACTIONS)return this.isFixedWidthFilterTextWithKebab();var e=this.get("sidebar-column");if(this.get("full"))return{fixed:e<75,width:"maxWidth150"};var t=this.get("filters");if(3===Object.keys(t).length&&e<80)return{fixed:!0,width:"maxWidth80"};if(3===Object.keys(t).length&&e>=100)return{fixed:!0,width:"maxWidth80"};if(2===Object.keys(t).length&&e<75)return{fixed:!0,width:"maxWidth100"};else return{fixed:!1,width:""}},useNewToolbar:function(){return i.NEW_TOOLBAR},isFixedWidthFilterTextWithKebab:function(){var e=this.get("sidebar-column"),t=this.get("pony-mode"),n=this.get("filters"),r=Object.keys(n).length,a=this.get("sortingType");if(this.get("full")){if(e<79)return{fixed:!0,width:"maxWidth100"};if(e<93)return{fixed:!0,width:"maxWidth150"};if(e>=100&&e<109)return{fixed:!0,width:"maxWidth100"};else return{fixed:e<75||e>=109&&e<123,width:!t?"maxWidth100":"maxWidth150"}}if("3pane"===this.get("layoutType")){if(!t){if(e<74){if(a&&"D"!==a&&r<1)return{fixed:!0,width:"maxWidth100"};if(r<=1)return{fixed:!0,width:"maxWidth80"};if(r<=2)return{fixed:!0,width:"maxWidth60"};else return{fixed:!0,width:"maxWidth40"}}if(e<79)return{fixed:!0,width:"maxWidth60"};if(e<88)return{fixed:!0,width:"maxWidth80"}}if(e<73)return{fixed:!0,width:"maxWidth60"};if(e<77||e>=100&&e<107)return{fixed:!0,width:"maxWidth80"}}if(3===Object.keys(n).length&&e<80)return{fixed:!0,width:"maxWidth80"};if(3===Object.keys(n).length&&e>=100)return{fixed:!0,width:"maxWidth80"};if(2===Object.keys(n).length&&e<75)return{fixed:!0,width:"maxWidth100"};else return{fixed:!1,width:""}}}),E=n(75589),y=n(93185),T="all",A="unread",S="flagged",O="with_attachments",C=((r={})[T]=i18n("Все письма"),r[A]=i18n("Непрочитанные"),r[S]=i18n("С флажком"),r[O]=i18n("С вложениями"),r),w=((a={})[T]="",a[A]="point",a[S]="flag",a[O]="attach",a);function L(e){this.type=e||T,this.text=C[this.type],this.icon=w[this.type]}var k=[new L(T),new L(A),new L(S),new L(O)],I={filter:i18n("Фильтр"),view:i18n("Вид")},R=s().Block.extend((0,f.Z)({id:"filter",explicit:!0,events:[{name:"threads:toggle",rename:"threads_toggle",immediate:!0},{name:"metathreads:settings:open",rename:"metathreads_settings_toggle",immediate:!0},{name:"priority:messages:toggle",rename:"priority_messages_click",immediate:!0},{name:"ponymode:toggle",rename:"ponymode_click",immediate:!0},{name:"help:open",rename:"help_open"},{name:"layout:toggle",rename:"layout_toggle",immediate:!0},{name:"shortcuts:toggle",rename:"shortcuts_toggle",immediate:!0}]})({name:"filters",template:c(),blocks:{"filters-control":b,select:y.Z,"list-nested":E.Z},defaults:{expanded:!1,filter:{all:!0,unread:!1,flagged:!1,with_attachments:!1},"pony-mode":!1,autochange:!0,iconOnly:!1,alignLeft:!1},events:{"select:item-change":"onFilterChange","select:item-click":"onFilterClick","select:list-toggle":"onToggle","select:sorting-open-submenu":"openSortingSubmenu","select:reset-all":"resetFiltersAndSortings","filters:unselectable-item-click":"onUnselectableItemClick"},filters:k,getFilter:function(e){return k.find((function(t){return t.type===e}))},isShowResetAll:function(){return!(this.get("filter").all&&(0,_.sY)(this.get("sortingType")))},onFilterChange:function(){},isFilterOn:function(e){return this.get("filter")[e]},onFilterClick:function(e){var t=e.details,n=this.isFilterOn(t.type)?"_off":"_on";n="all"===t.type?"_on":n;var r="".concat(t.type,"_click").concat(i.ENABLE_MULTIPLE_FILTERS?n:"");this.radar(r),this.broadcast("filterclick",t.type)},openSortingSubmenu:function(){this.radar("open_sorting_submenu"),m.Z.open("sorting",{},this.ids.sorting)},resetFiltersAndSortings:function(){this.radar("reset_filters_and_sorting"),this.broadcast("resetall"),this.ids.select.hide()},onToggle:function(e){if(e.details)this.radar("click-on");else m.Z.close()},getSelectedFilterIndexes:function(){var e=this,t=[];return Object.entries(this.get("filter")).forEach((function(n){var r=n[0];if(n[1])t.push(e.filters.findIndex((function(e){return e.type===r})))})),t},isSortingEnable:function(){return i.ENABLE_SORTING},getSettings:function(){if(!this.get("has-metathreads-settings"))return null;var e=this.get("metathreadsSettings");return[{type:"metathreads",text:i18n("Умная сортировка писем"),isOn:e&&Object.values(e).some((function(e){return e===u().METATHREADS_STATES.ON||e===u().METATHREADS_STATES.HIDDEN})),couldToggle:!this.get("hide-metathreads")||!this.get("hide-to-myself"),event:"metathreads:settings:open",helpLink:"metathreads",from:"filter",metathreadsSettings:e},{type:"threads",text:i18n("Группировка по отправителю"),isOn:this.get("threads"),couldToggle:!0,event:"threads:toggle",from:"filter",helpLink:"threads"},{type:"layout",text:i18n("Список писем с колонкой письма"),isOn:"3pane"===this.get("type"),couldToggle:this.get("support3pane"),event:"layout:toggle",from:"filter",helpLink:"help3pane"},{type:"ponyMode",text:i18n("Компактный вид"),isOn:this.get("ponymode"),couldToggle:this.get("can-toggle-ponymode"),event:"ponymode:toggle",from:"filter"},{type:"shortcuts",text:i18n("Скрывать список папок"),isOn:this.get("manual-shortcuts"),couldToggle:this.get("can-toggle-shortcuts"),event:"shortcuts:toggle",from:"filter"}]},onUnselectableItemClick:function(e){var t=e.details,n=t.event;if(n)this.broadcast(n,t);this.ids.select.broadcast("list-hide")},isAlignRight:function(){return this.attrs.alignRight||!this.attrs.alignLeft&&!i.HIDE_METATHREADS&&"3pane"!==this.get("type")},getDefaultFilterText:function(){return I.filter},didUnmount:function(){m.Z.destroy()}}))},31931:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(19679),s=n.n(o),l=n(45648);function c(){var e=document.querySelector("#headline");if(e&&!r.HIDE_HEADLINE)e.style.display="block"}function d(){var e=document.querySelector("#headline");if(e)e.style.display="none"}var u=i().Block.extend({name:"headline",template:s(),blocks:{},defaults:{visible:!0,enabled:!0},attrChanged:{enabled:function(e){e?c():d()}},didMount:function(){l.default.load()}});u.hide=d,u.show=c,t.Z=u},12199:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(53993),o=n.n(i),s=n(79929),l={"16-archive":"navigation:archive","16-arrow-back":"navigation:drop_previous_big","16-arrow-down-small":"navigation:drop_down_small","16-arrow-down":"navigation:drop_down_big","16-arrow-up-small":"navigation:drop_up_small","16-arrow-up":"navigation:drop_up_big","16-attach":"status:attach","16-auth":"categories:access","16-burger":"navigation:menu","16-calendar-month":"navigation:calendar_month","16-check-read":"wysiwyg:mail_read","16-checked":"status:done","16-clock":"status:time","16-close":"actions:close_big","16-cloud":"categories:cloud","16-compose":"actions:compose","16-currency-ruble":"categories:currency_rouble","16-delete":"actions:delete","16-download":"actions:download","16-draft":"categories:drafts","16-fees":"categories:fees","16-flag":"actions:favorite_on","16-filter":"actions:filter","16-folder":"navigation:folder","16-folder-move":"action:folder_move","16-forward-small":"actions:forward_small","16-forward":"actions:forward","16-government":"categories:government","16-receipts":"categories:receipts","16-important-round":"status:warning_round","16-important-triangle":"status:warning_triangle","16-important":"status:error","16-inbox":"categories:mail","16-link":"status:link","16-lock-off":"status:lock_off_small","16-lock-on":"status:lock_on_small","16-minimize":"actions:window_minimize","16-more-hor":"navigation:more","16-more-vert":"navigation:more_vertical","16-orders":"navigation:cart","16-pin":"actions:pin","16-point":"status:unread","16-reminder":"navigation:notification","16-reply-all":"actions:reply_all","16-reply-forward-small":"actions:forward_reply_small","16-reply-small":"actions:reply_small","16-reply":"actions:reply","16-search":"navigation:search","16-select-all":"actions:select_all","16-setting":"navigation:settings","16-spam-off":"actions:like","16-spam-on":"actions:dislike","16-tickets":"categories:ticket","16-travel":"categories:flight","16-school":"categories:school","16-games":"categories:games","20-checked":"status:done_big"},c={xs:12,s:20,m:20,l:20,xl:24,xxl:32},d=/:/g;t.Z=a().Block.extend({name:"ico",template:o(),blocks:{},immutable:!0,defaults:{size:"s",secondary:!1,"remove-fill":!0},getSvgName:function(){var e=this.get("name"),t={xs:12,s:16,m:16,l:20,xl:20,xxl:20}[this.get("size")||"s"];return null!=t?"".concat(t,"-").concat(e):e},getByOldName:function(){return this.getByName(l[this.getSvgName()])},getByName:function(e){if(void 0===e)e=null;e=function(e){return e.toUpperCase().replace(d,"_")}(e||this.get("name"));var t=s[e],n=this.get("size");if(c[n])t.attrs.width=c[n],t.attrs.height=c[n];return t},getSvgVDom:function(){var e=this.getByOldName()||this.getByName(),t=this.get("name"),n=this.get("remove-fill");if(e||!t)return function(e,t){for(var n=[],r=[{node:e,siblings:n}],a=function(){var e=r.pop(),n=e.node,a=n.name,i=n.attrs,o=n.childs,s=e.siblings,l={};i&&Object.keys(i).forEach((function(e){if(!t||"fill"!==e)l[e]=i[e]}));var c=[];o&&o.forEach((function(e){r.push({node:e,siblings:c})})),s.unshift({tag:a||"",attrs:l,children:c})};r.length>0;)a();return n[0]}(e||{},n);else console.error("Icon not found: ".concat(t))},getVDomAttrPairs:function(e){return e&&e.attrs&&Object.keys(e.attrs).map((function(t){return{key:t,value:e.attrs[t]}}))||[]}})},55220:function(e,t,n){"use strict";n.r(t);var r=n(21211),a=n(18440),i=n.n(a),o=n(10454),s=n.n(o),l=n(90557),c=n(2335),d=n(63062),u=n(93286),f=n(11594),m=n(73649),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.default=i().Block.extend({name:"layer-window",template:s(),isolateEvents:!1,_layerKey:0,blocks:{dimmer:f.Z,"notify-stack":m.Z},events:{"dimmer:click":"onDimmerClick"},defaults:{active:!1,"close-on-dimmer":!0,"close-on-esc":!0,compact:!1,dimmer:!1,silent:!1,"dimmer-color":"",fullscreen:!1,mobile:!1,foreground:r.TOUCH_MODE,"reject-on-close":!1,"reject-on-dimmer":!1,resolvable:!1,"hide-headline":!1},attrChanged:{"close-on-esc":function(e){(0,l.BA)().then((0,l.qh)(this,(function(t){t.setScope(e?"all":"layer-no-shortcuts")})))},mobile:function(e){if(this.block)if(!this.block.is("responsive"))e?this.hide():this.show();else this.block.set("mobile",e)},slim:function(e){if(this.block)this.block.set("slim",e)},active:function(e){var t=this;(0,l.BA)().then((0,l.qh)(this,(function(n){if(e&&t.is("close-on-esc")||e&&t.is("reject-on-dimmer"))n("escape",t.onEscape);else n.unbind("escape",t.onEscape)})))}},didMount:function(){var e=this;d.default.setup(this.ids["notify-stack"],"layer-window"),Promise.resolve().then(n.bind(n,15907)).then((function(t){t.default.registerInstanceByName("layer-window",e)})),this.onEscape=function(t){t.stopImmediatePropagation(),e.onHide("escape")}},setLayer:function(e,t){var n=i().Mediator.getAll();n.forEach((function(t){t.registerComponent(e.prototype.name,e)}));var r=new e(h(h({},t),{mobile:this.is("mobile"),slim:this.is("slim")})),a=this.getBlockPromise(r);return r.on("layer:hide",this.onHide.bind(this,"action_hide")),r.on("layer:close",this.onHide.bind(this,"action_close")),r.on("layer:dimmer:click",this.onDimmerClick.bind(this)),r.renderTo(this.refs.block),this.block=r,n.forEach((function(e){e.register(r)})),this.show(),a},getBlockPromise:function(e){var t=this;if(!this.is("resolvable"))return Promise.resolve(e);else return this._layerResolved=!1,new Promise((function(n,r){t._rejectLayer=r,t._resolveLayer=n,e.on("layer:resolve",(function(r){e.off("layer:resolve",n),t._layerResolved=!0;var a=r.details,i=a.resolveData;if(a.close)t.onHide("action_close");n(i)}))}))},onHide:function(e){if(void 0===e)e="unknown";if(this.is("active")){var t=this.block.name;if(this.block.onBeforeHide){var n=this.block.onBeforeHide();if(null==n?void 0:n.stopHiding)return}if(this.block.destroy(),this.block=null,this.hide(),this.is("resolvable"))if(this.is("reject-on-close"))!this._layerResolved&&this._rejectLayer();else!this._layerResolved&&this._resolveLayer();if((0,u.ZP)([t,"hide",e]),this.showTS)(0,u.ZP)([t,"visible"],new Date-this.showTS);this.broadcast("window:close"),c.default.wakeUp.apply(c.default,c.SLOTS_EXCEPT_SENT),c.default.updateOnAction()}},onDimmerClick:function(e){if(this.is("close-on-dimmer"))if(e.target===this.refs.container)this.onHide("dimmer")},show:function(){this.showTS=new Date,this.set("active",!0),this.block.set("visible",!0),(0,u.ZP)([this.block.name,"show"]),c.default.sleep.apply(c.default,c.SLOTS_EXCEPT_SENT)},hide:function(){if(this.set("active",!1),this.block)this.block.set("visible",!1)},useNewToolbar:function(){return r.NEW_TOOLBAR},getBlock:function(){return this.block}})},2613:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(50959),o=n.n(i),s=n(45114);t.Z=a().Block.extend({name:"layer",template:o(),blocks:{button2:s.Z},isIframe:function(){return"iframe"===this.get("name")}})},91622:function(e,t,n){"use strict";n.d(t,{eN:function(){return r},ZP:function(){return g},Nx:function(){return m}});var r,a,i=n(21211),o=n(18440),s=n.n(o),l=n(86669),c=n.n(l),d=function(){function e(e,t,n){var r=this;this.resizeWatchMouseDown=function(e){e.preventDefault(),r.dX=0,r.clientX=e.clientX,r.toggleMouseListeners(!0)},this.resizeWatchMouseMove=function(e){r.dX=e.clientX-r.clientX,r.clientX=e.clientX,r.updateWidth(r.width+r.dX)},this.resizeWatchMouseUp=function(e){e.preventDefault(),r.toggleMouseListeners(!1);var t=r.width+r.dX;r.dX=0,r.updateWidth(t,!0)},this.resizer=e,this.getWidth=t,this.clientX=0,this.width=this.getWidth(),this.dX=0,this._updateWidth=n,this.resizeWatchAttach()}return e.prototype.destroy=function(){this.resizer.removeEventListener("mousedown",this.resizeWatchMouseDown)},e.prototype.updateWidth=function(e,t){if(void 0===t)t=!1;var n=Math.round(e);this._updateWidth(n,t)},e.prototype.setWidth=function(e){this.width=e},e.prototype.toggleMouseListeners=function(e){var t=e?document.addEventListener:document.removeEventListener;t("mousemove",this.resizeWatchMouseMove),t("mouseup",this.resizeWatchMouseUp)},e.prototype.resizeWatchAttach=function(){this.resizer.addEventListener("mousedown",this.resizeWatchMouseDown)},e}(),u=n(77917);!function(e){e.LayoutResize="layout:resize"}(r||(r={}));var f=new Promise((function(e){a=e})),m=function(){return f},h={name:"layout",template:c(),isolateEvents:!1,blocks:{},defaults:{"hide-ads":i.HIDE_TOYS===i.BL_PROP_NAME,"left-column":0,"right-column":0,"right-column-indented":i.ADVERT_SIDEBAR_ROUNDED,"sidebar-column":0,"is-shortcut-left":!1,"is-shortcut-right":!1,"is-advert-scroll":!1,"vertical-fit":!1,resizable:!1,type:"2pane",id:null,group:null,"hide-headline":i.HIDE_HEADLINE,"new-toolbar":i.NEW_TOOLBAR},performanceTrace:!0,setSearchPlace:function(){if(this.attrs.mobile&&(i.OCTAVIUS_MOBILE||i.WEBVIEW))f=new Promise((function(e){a=e}));else a(this.refs["no-headline-search"])},didUpdate:function(){this.setSearchPlace(),this.updateColumnSizes(),this.registerResize3pane()},updateColumnSizes:function(e){if(void 0===e)e={};var t=this.getLeftColumnWidth(e.left),n=this.getRightColumnWidth(),r=this.getSidebarColumnWidth(e.sidebar);this.el.style.setProperty("--left-column-width","".concat(t,"px")),this.el.style.setProperty("--right-column-width","".concat(n,"px")),this.el.style.setProperty("--sidebar-column-width","".concat(r,"px"))},getLeftColumnWidth:function(e){return 4*(e||this.get("left-column"))},getRightColumnWidth:function(){return 4*this.get("right-column")+(this.get("showWidgetColumn")?0:12)},getSidebarColumnWidth:function(e){return 4*(e||this.get("sidebar-column"))},didMount:function(){if(this.onResize=this.onResize.bind(this),this.setSearchPlace(),this.updateColumnSizes(),this.is("resizable"))this.registerResize()},didUnmount:function(){var e,t;null===(e=this.resizeWatcher)||void 0===e||e.destroy(),null===(t=this.resizeWatcherSidebar)||void 0===t||t.destroy()},registerResize:function(){var e=this,t=this.refs["left-column"],n=this.refs["left-column-resizer"];if(t&&n)this.resizeWatcher=new d(n,(function(){return t.getBoundingClientRect().width}),(function(t,n){return e.broadcast(r.LayoutResize,{column:"left",width:t,id:e.get("id"),group:e.get("group"),resizeEnd:n}),!1}));this.registerResize3pane()},registerResize3pane:function(){var e,t=this;null===(e=this.resizeWatcherSidebar)||void 0===e||e.destroy();var n=this.refs["sidebar-column"],a=this.refs["sidebar-column-resizer"];if(this.is("sidebar-resizable")&&a)this.resizeWatcherSidebar=new d(a,(function(){return n.getBoundingClientRect().width}),(function(e,n){return t.broadcast(r.LayoutResize,{column:"sidebar",width:e,id:t.get("id"),group:t.get("group"),resizeEnd:n}),!1}))},onResize:function(e,t){var n,r;if(t)this.el.classList.toggle("layout_resizing",!0);this.updateColumnSizes(e),null===(n=this.resizeWatcher)||void 0===n||n.setWidth(4*e.left),null===(r=this.resizeWatcherSidebar)||void 0===r||r.setWidth(4*e.sidebar),this.el.classList.toggle("layout_left_shortcut",e.left<i.SHORTCUT_LEFT_COLUMN_LIMIT)},onResizeEnd:function(){this.el.classList.toggle("layout_resizing",!1)},_getInlineStyle:function(){var e="max-width: ".concat(this.get("max-width"),"px;"),t="--left-column-width: ".concat(this.getLeftColumnWidth(),"px;"),n="--right-column-width: ".concat(this.getRightColumnWidth(),"px;"),r="--sidebar-column-width: ".concat(this.getSidebarColumnWidth(),"px;");return"".concat(e," ").concat(t," ").concat(n," ").concat(r)},useWidgetColumn:function(){return i.WIDGET_COLUMN}},p=s().Block.extend((0,u.withWelter)(h));p.getLayoutById=function(e){return p.getInstances().find((function(t){return t.get("id")===e}))};var g=p},19291:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(6889),c=n.n(l),d=n(72727),u=n(39939),f=n(61799),m=n(93286),h=n(90557);t.Z=s().Block.extend((0,f.Z)({id:"amp",events:["mount","error"]})({name:"letter-body-amp",template:c(),performanceTrace:"track",didUpdate:function(e){if(e["dark-mode"]!==this.attrs["dark-mode"]&&this.AMPViewer)this.AMPViewer.setTheme(this.is("dark-mode"))},didMount:function(){var e,t=this,n=this.get("model"),r=n&&n.get("body.amp");if(r)this._fallbackPixel=i.AMP_SENDER_METRICS&&n&&(null===(e=n.get("meta"))||void 0===e?void 0:e.find((function(e){return e&&"object"==typeof e&&"http://schema.org"===e["@context"]&&"Action"===e["@type"]&&"AMP4Email"===e.agent&&"ValidationError"===e.name&&"string"==typeof e.url}))),(0,h.fA)().then((0,h.qh)(this,(function(e){var n,o=e.createAmpViewer;if(t.isMounted()){if(t.AMPViewer=o({iframeSrc:i.AMP_IFRAME_PATH,cdnHost:"amp-lib/",proxyHost:i.AMP_PROXY_HOST,debug:i.IS_DEBUG,timeout:i.AMP_TIMEOUT,errorRadars:!0,senderMetrics:{fallback:null===(n=t._fallbackPixel)||void 0===n?void 0:n.url}}),t.AMPViewer.setup(),t.AMPViewer.on("error",t.handleError.bind(t)),t.AMPViewer.on("navigate",t.handleNavigate.bind(t)),t.AMPViewer.on("radar",t.handleRadar.bind(t)),t.el.appendChild(t.AMPViewer.iframe),t.AMPViewer.onChangeCssSelectorTheme((function(e){t.broadcast("change-css-selector-theme",e)})),t.AMPViewer.setTheme(t.is("dark-mode")),t.AMPViewer.loadLetter({content:r,fromEmail:t.getFromEmail(),toEmail:t.getToEmail()}),t._fallbackPixel)a().send("amp_fallback_pixel-exists");t.broadcast("force-recalc")}})));else this.broadcast("error")},getFromEmail:function(){return this.get("model").get("correspondents.from.0.email")},getToEmail:function(){var e=u.default.user;return e&&e.getEmail()},didUnmount:function(){if(this.AMPViewer)this.AMPViewer.teardown()},handleError:function(e){var t=this;i.IS_DEBUG&&console.error("Error from AMP Viewer",e);var n=this.getFromEmail(),r=this.getToEmail();if(window.require(["trackJS"],(function(t){t.sendRadar("amp_log-error",{fromEmail:n,toEmail:r,error:e},"octavius_amp-error")})),/^(js|timeout|validation|message_parse|lib_untrusted)$/.test(e.type))window.setTimeout((function(){if(t._fallbackPixel)a().send("amp_fallback_tracked");else a().send("amp_fallback_untracked");t.broadcast("error")}),1)},handleNavigate:function(e){var t=e.href,n=document.createElement("a");if(n.href=t,!n.hostname)t=i.AMP_REDIRECT_URL;(0,d.default)(t)},handleRadar:function(e){(0,m.ZP)({type:"amp_".concat(e.t),intervals:e.i,value:void 0===e.v?1:e.v})}}))},17914:function(e,t,n){"use strict";n.d(t,{u:function(){return C},Z:function(){return w}});var r=n(28692),a=n(52745),i=n(21211),o=n(18440),s=n.n(o),l=n(88285),c=n.n(l),d=n(43845),u={"letter:render":[1600,2600,3600],"letter:ready":[2100,3600,5600]},f=n(16244),m=n(25191),h=n(39939),p=n(53785),g=n(93286),v=n(77917),_=n(45114),b=n(56882),E=n(15498),y=n(90557),T=n(3275),A={findQuoteRoot(e){var t=[...e.querySelectorAll((0,v.selector)(".mail-quote-collapse"))].filter(e=>!e.closest((0,v.selector)(".mail-quote-collapse .mail-quote-collapse")));if(t.length>1)return null;else return t[0]},split(e,t){try{var n=!1,r=this.findQuoteRoot(e);if(!r)return{bodyEl:e,quoteEl:null,newQuotesFound:!1};var a=e.querySelector((0,v.selector)('[data-type="body"]')),i=e.querySelector((0,v.selector)('[data-type="sender"]'));if(a&&!a.children.length)(0,g.ZP)(["quotes","new","empty"]);if(a&&a.children.length&&i)n=!0,(r=document.createElement("div")).appendChild(a),r.appendChild(i);else r.parentElement.removeChild(r);return{bodyEl:e,quoteEl:r,newQuotesFound:n}}catch(n){return e.innerHTML=t,(0,g.ZP)(["quotes","error","split"]),{bodyEl:e,quoteEl:null,newQuotesFound:!1}}},format:e=>[...e.querySelectorAll((0,v.selector)('[data-type="body"]'))].reduceRight((t,n)=>{var r=n.getAttribute("data-quote-id"),a=e.querySelector((0,v.selector)("".concat('[data-type="sender"]','[data-quote-id="').concat(r,'"]'))),i="",o="",s="",l="",c=!1,d=!1,u=n.innerHTML;if(a)i=a.getAttribute("data-name"),o=a.getAttribute("data-timestamp"),s=a.getAttribute("data-email"),l=(0,T.Q)(s,i,90);if(o)c=!0;if(!i&&!s)d=!0,i=i18n("Аноним"),l="";if(a)a.parentNode.removeChild(a);if(n.parentNode)n.parentNode.removeChild(n);return t.push({id:r,body:u,name:i,timestamp:o,email:s,avatar:l,anonymous:d,isSenderFully:c}),t},[]).reverse(),formatFallback:e=>(e.style.display="",e.outerHTML)},S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},O=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};var C={name:"letter-body",immutable:!0,template:c(),defaults:{bodyHtml:"","body-raw":"",collapsed:null,collapsable:!0,"collapsed-default":null,"flags-threads":!1,"features-blockquote":!1,"features-blockquote-thread":!1,id:null,ponymode:!1,"quotes-formatted":[],"quotes-raw":"","quotes-mode-raw":!0,"dark-mode":!1,message:null,"current-user":null},notVisualAttributes:{bodyHtml:!1},blocks:{button2:_.Z,"html-parser":b.Z,"letter-blockquote":E.Z},events:{"blockquote:toggle":"onBlockquoteToggle","letter:zoom":"onLetterZoom"},attrChanged:{id:function(e,t){if(e&&t&&e!==t)this.renderBody()}},didMount:function(){var e=this;this.renderBody().then((0,y.qh)(this,(function(){e.asyncDidMountRender()})))},asyncDidMountRender:function(){var e=this;if(this.isMounted()){["reminder-created","reminder-remind","new-receipt","payed-receipt-succeed","sub-created"].forEach((function(t){O([],e.el.querySelectorAll('[data-id="'.concat(t,'"]')),!0).forEach((function(t){return e.$on(t,"click","handleClickMonetaLink")}))})),O([],this.el.querySelectorAll("[data-moneta]"),!0).forEach((function(t){return e.$on(t,"click","handleClickMonetaPayment")})),this.highlightCurrentUserMention(),O([],this.el.querySelectorAll("[data-sig]"),!0).forEach((function(t){e.$on(t,"click","handleClickFinePayment"),e.$on(t,"contextmenu","handleClickRightFinePayment")})),O([],this.el.querySelectorAll('[data-id="tomyself"]'),!0).forEach((function(t){return e.$on(t,"click","handleClickToMyself")})),Object.entries(i.LETTER_BODY_POPUP_ALLOWED).forEach((function(t){var n=t[0],r=t[1];O([],e.el.querySelectorAll(r.selector),!0).forEach((function(t){return e.$on(t,"click",(function(t){return e.handleClickAllowedAttr(t,r,n)}))}))})),Object.entries(i.LETTER_DATA_WHITE_LIST).forEach((function(t){var n=t[0],r=t[1],a=null;if(r.limit&&r.limit>1)a=Array.from(e.el.querySelectorAll(r.selector)).slice(0,r.limit);else a=[e.el.querySelector(r.selector)];a.filter(Boolean).forEach((function(t){e.$on(t,"click",(function(t){if(r.preventEvent)t.preventDefault(),t.stopImmediatePropagation();e.handelDataAttributeClick({event:t,params:r,type:n})}))}))}))}},handelDataAttributeClick:function(e){var t=e.event,n=e.params,r=e.type,a=S(S({},n),{type:r});this.broadcast("data-attr-click",a,t)},didUpdate:function(e){if(this.get("dark-mode")!=e["dark-mode"])this.applyDarkosha()},didUnmount:function(){if(this._darkosha)this._darkosha.destroy()},handleClickAllowedAttr:function(e,t,n){var r=S(S({},t),{skin:n});this.broadcast("allowedattrclick",r,e),(0,g.ZP)({type:"letter-body_payment-btn_click_".concat(t.radarName)})},handleClickRightFinePayment:function(e){this.broadcast("finepaymentright",this,e),(0,g.ZP)({type:"letter-body_payment-btn_rclk_finepayment_gd-exp"})},handleClickFinePayment:function(e){this.broadcast("finepayment",this,e),(0,g.ZP)({type:"letter-body_payment-btn_click_finepayment_gd-exp"})},handleClickToMyself:function(e){this.broadcast("tomyselfclick",this,e),(0,g.ZP)({type:"letter-body_myslf-btn_click"})},handleClickMonetaLink:function(e){var t=e.target.getAttribute("data-id"),n=e.target.getAttribute("data-selector").split(":"),r=n[0],a=n[1];(0,g.ZP)({type:"moneta_click_".concat(t,"_").concat(r),dwh:{merchant:a}})},handleClickMonetaPayment:function(e){this.broadcast("monetapayment",this,e),(0,g.ZP)({type:"letter-body_payment-btn_click_moneta"})},getOrCreateDarkosha:function(){var e=this._createConfiguredDarkosha;if(!this._darkosha&&e)this._darkosha=e(this.el,this.is("dark-mode"));return this._darkosha},applyDarkosha:function(e){if(void 0===e)e=!1;if(e&&this._darkosha)this._darkosha.destroy(),this._darkosha=void 0;var t=this.getOrCreateDarkosha();if(t)if(this.is("dark-mode"))t.transform();else t.rollback()},renderBody:function(){var e=this,t=(0,m.p)().previousRoute?"warm":"cold";r.yc.time("letter-body-render");var n,o=document.createElement("div"),s=this.get("bodyHtml").replace(/<base .*?>/g,""),l=s.length/1024,c=l<=30?"less_30K":l<=100?"less_100K":l<=500?"less_500K":l<=1e3?"less_1M":"more_1M",h=Promise.all([(0,y.Y0)().catch((function(e){return(0,a.coreLoggerDispatchError)(e,null,"lazy-dark"),null})),(i.DOMPURIFY?(n=s,(0,y.Bv)().then((function(e){return e.sanitize(n)}))):Promise.resolve(s)).catch((function(e){return(0,a.coreLoggerDispatchError)(e,null,"dom-sanitize"),s}))]).then((function(t){var n=t[0],r=t[1];if(e.isMounted()){e._createConfiguredDarkosha=null==n?void 0:n.createConfiguredDarkosha,o.innerHTML=r;var a=A.split(o),i=a.bodyEl,s=a.quoteEl,l=a.newQuotesFound;if(e.set("body-raw",i.innerHTML),e.rerenderParser("body-parser"),s){var c=e.is("flags-threads"),u=e.is("features-blockquote")&&!c||e.is("features-blockquote-threads")&&c;return e.el.classList.add((0,v.selector)(".letter-body_hidden").replace(".","")),new Promise((function(t){(0,d.gl)((function(){if(e.isMounted()){var n=l&&u?"new":"old";(0,g.ZP)(["quotes","show",n]),e.format(n,s),e.el.classList.remove((0,v.selector)(".letter-body_hidden").replace(".",""))}e.broadcast("force-recalc"),t()}))}))}else e.broadcast("force-recalc")}})).catch((function(e){(0,a.coreLoggerDispatchError)(e,null,"letter-body")}));return h.then((function(){if(e.isMounted())e.applyDarkosha();(0,p.u)(e.el,"ltr-body"),(0,d.gl)((function(){r.yc.timeEnd("letter-body-render",{score:u["letter:render"],appendix:c}),r.yc.add("letter-ready",(0,f.JW)(),void 0,{score:u["letter:ready"],appendix:t})}))})),h},format:function(e,t){var n=!1;if("new"===e)try{n=this.formatNew(t)}catch(e){(0,g.ZP)(["quotes","error","format-new"]),n=this.formatFallback(t)}else n=this.formatFallback(t);n&&this.triggerBlockquoteChange()},formatNew:function(e){var t=A.format(e);return this.set({collapsable:this.is("flags-threads"),"quotes-mode-raw":!1,"quotes-formatted":t}),0!==t.length},formatFallback:function(e){if(e){var t=A.formatFallback(e);return this.set({collapsable:this.is("flags-threads"),"quotes-mode-raw":!0,"quotes-raw":t}),this.rerenderParser("quote-parser"),""!==t}},rerenderParser:function(e){try{this.ids[e].rerender()}catch(t){(0,g.ZP)(["letter-body","error",e])}},isCollapsed:function(){var e=this.get("collapsed");if(null==e)return this.is("collapsed-default");else return e},triggerBlockquoteChange:function(){this.broadcast("resize")},onBlockquoteToggle:function(){if(this.set("collapsed",!this.isCollapsed()),this.triggerBlockquoteChange(),this.applyDarkosha(!0),!this.isCollapsed())this.asyncDidMountRender()},onLetterZoom:function(){this.broadcast("resize")},highlightCurrentUserMention:function(){var e=h.default.user.getEmail();this.el.querySelectorAll("a[data-mention]").forEach((function(t){if(t.dataset.mentionEmail===e)t.classList.add("highlighted"),t.setAttribute("data-test-highlighted","true")}))}},w=s().Block.extend(C)},4076:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(96284),o=n.n(i),s=n(90557),l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;if(r=0,a)i=[2&i[0],a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}if(a[2])o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};t.Z=a().Block.extend({name:"letter-calendar",template:o(),defaults:{html:"","dark-mode":!1},didUpdate:function(e){if(this.get("dark-mode")!=e["dark-mode"])this.applyDarkosha()},didUnmount:function(){if(this._darkosha)this._darkosha.destroy()},didMount:function(){var e=this.get("calendars");if(e.length){var t=e.map((function(e){return e.html}));this.set("html",t.join("<br/>")),this.applyDarkosha()}},getOrCreateDarkosha:function(){return l(this,void 0,Promise,(function(){var e;return c(this,(function(t){switch(t.label){case 0:if(this._darkosha)return[3,2];else return[4,(0,s.Y0)()];case 1:e=t.sent().createConfiguredDarkosha,this._darkosha=e(this.el,this.is("dark-mode")),t.label=2;case 2:return[2,this._darkosha]}}))}))},applyDarkosha:function(e){var t=this;if(void 0===e)e=!1;if(e&&this._darkosha)this._darkosha.destroy(),this._darkosha=void 0;this.getOrCreateDarkosha().then((function(e){if(e)if(t.is("dark-mode"))e.transform();else e.rollback()}))}})},37240:function(e,t,n){"use strict";var r=n(21528),a=n(21211),i=n(18440),o=n.n(i),s=n(19008),l=n(96319),c=n.n(l);t.Z=o().Block.extend({name:"letter-contact",template:c(),blocks:{},mods:{correspondent:s.k0},defaults:{active:!1,contact:{},dir:"to",isCurrent:!1,dangerous:!1,mode:void 0},isNameWithEmailMode:function(){var e=this.get("dangerous");return r.default.has("letter-show-email")&&"name-with-email"===this.get("mode")&&!e},getContact:function(){var e=this.get("isCurrent"),t=this.get("dir"),n=this.get("contact"),r=this.get("dangerous"),i=this.get("folder"),o=a.SHOW_SENDER_EMAIL_IN_SPAM_FOLDER&&i&&i.isSpam();if(e&&"from"!==t)return i18n("вам");else if(r||o)return n.email;else return(0,s.k0)(n)}})},99105:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(19275),a=n(97899),i=n(21211),o=n(18440),s=n.n(o),l=n(99931),c=n.n(l),d=n(44866),u=n(46655),f=n(41054),m=n.n(f),h=Math.abs,p=Math.max;function g(e){e.preventDefault(),e.stopPropagation()}function v(e,t,n){e&&e.dragHandleEvent&&e.dragHandleEvent({type:t,target:n,currentTarget:e})}var _=s().Block.extend({name:"draggable",template:m(),defaults:{tolerance:10,enabled:!0},notVisualAttributes:{tolerance:!0,enabled:!0},attrChanged:{enabled:function(e){this.toggleDraggable(e)}},didMount:function(){if(this.is("enabled"))this.toggleDraggable(!0)},toggleDraggable:function(e){var t=this;if(e)this._drag=null,this._handleDragAwaiting=function(e){return t.handleDragAwaiting(e)},this._handleDragMove=function(e){return t.handleDragMove(e)},this._handleDragEnd=function(e){return t.handleDragEnd(e)},this.$on(this.el,"mousedown",this._handleDragAwaiting);if(!e)this.cancelDrag(!0),this.$off(this.el,"mousedown",this._handleDragAwaiting)},handleDragAwaiting:function(e){if(0===e.button){if(void 0!==this.getIdByEl(e.target))this._drag={active:!1,clientX:e.clientX,clientY:e.clientY,target:e.target},this.$on(document,"mousemove",this._handleDragMove),this.$on(document,"mouseup",this._handleDragEnd)}},handleDragMove:function(e){var t=this._drag,n=e.target,r=e.clientX,a=e.clientY;if(t.active||!(p(h(t.clientX-r),h(t.clientY-a))<this.get("tolerance"))){if(g(e),!t.active)t.active=!0,t.el=document.createElement("div"),t.el.style.position="fixed",t.el.style.zIndex="10000",this.prepareDragElement(t.el,e),document.body.appendChild(t.el),document.body.classList.add("draggable"),this.broadcast("drag:start"),this.el.addEventListener("click",g,!0);t.el.style.left=r+5+"px",t.el.style.top=a+5+"px";var i=document.elementFromPoint(r,a);do{if(null==i?void 0:i.dragHandleEvent)break}while(i&&(i=i.parentNode));if(t.overEl!==i)v(t.overEl,"dragleave",n),t.overEl=i,v(t.overEl,"dragenter",n);v(i,"dragmove",n)}},handleDragEnd:function(e){if(!this._drag||!this._drag.active)this.cancelDrag(!0);if(this._drag)g(e),v(this._drag.overEl,"drop",e.target),this.cancelDrag(!1)},cancelDrag:function(e){var t,n=this;if(this.$off(document,"mousemove",this._handleDragMove),this.$off(document,"mouseup",this._handleDragEnd),e)null===(t=this.el)||void 0===t||t.removeEventListener("click",g,!0);if(!e)this.timerId=setTimeout((function(){var e;null===(e=n.el)||void 0===e||e.removeEventListener("click",g,!0)}),0);if(this._drag)this._drag.el&&this._drag.el.parentNode&&this._drag.el.parentNode.removeChild(this._drag.el),this._drag=null,document.body.classList.remove("draggable"),this.broadcast("drag:end")},getIdByEl:function(e){var t;if(e=e.closest("[data-draggable-id]"))t=e.dataset.draggableId;return t},prepareDragElement:function(e,t){var n=this.getIdByEl(this._drag.target);if(void 0!==n)this.broadcast("preparedragelement",{el:e,id:n},t)},didUnmount:function(){if(this.is("enabled"))this.toggleDraggable(!1);clearTimeout(this.timerId)}}),b=n(51474),E=n(15045),y=n(53595),T=s().Block.extend({name:"letter-list",template:c(),component:y.Z,events:{preparedragelement:"onPrepareDragElement","paginator:up":"onPaginatorUp"},blocks:{scrollable:E.Z,"react-async":b.Z,draggable:_},defaults:{models:[],"nav-up-enabled":i.ENABLE_NAV_UP,"qa-enabled":r.Z.get("qa"),"hide-ads":i.HIDE_TOYS===i.BL_PROP_NAME},constructor:function(){s().Block.apply(this,arguments),this.onScrollToBottom=this.onScrollToBottom.bind(this),this.onScroll=this.onScroll.bind(this),this.onPrepareDragElement=this.onPrepareDragElement.bind(this),this.onPaginatorUp=this.onPaginatorUp.bind(this),(0,d.b)("letter-list-constructor")},didMount:function(){(0,d.b)("letter-list-mount")},didUnmount:function(){},onScrollToBottom:function(e){this.broadcast(u.G.loadMore,e)},onScroll:function(e){var t=e.scrollTop>0;if(this.get("nav-up")!==t)this.set("nav-up",t)},onPaginatorUp:function(){var e,t;null===(t=null===(e=this.ids.reactList)||void 0===e?void 0:e.getComponent())||void 0===t||t.scrollToTop()},onPrepareDragElement:function(e){var t,n;null===(n=null===(t=this.ids.reactList)||void 0===t?void 0:t.getComponent())||void 0===n||n.onPrepareDragElement(e)},isScrollableSilent:function(){var e=this.get("router");return(0,a.Mn)(e)&&!this.get("route").is("#search #search-letter")},isTouchDevice:function(){return i.TOUCH_MODE}})},41026:function(e,t,n){"use strict";var r=n(21528),a=n(17717),i=n.n(a),o=n(60033),s=n.n(o),l=n(19275),c=n(50987),d=n(21211),u=n(18440),f=n.n(u),m=n(7005),h=n.n(m),p=n(4183),g=n(75705),v=n(72727),_=n(33440),b=n(19352),E=n(25191),y=n(66423),T=n.n(y),A=n(39939),S=n(74456),O=n(63062),C=n(47759),w=n(77917),L=n(57045),k=n(90557),I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.Z=f().Block.extend({name:"letter-meta",template:h(),defaults:{html:"",showSkeleton:!1},loadingPlateTimer:null,constructor:function(){f().Block.apply(this,arguments),this.destroyElementOnError=this.destroyElementOnError.bind(this),this.destroySkeleton=this.destroySkeleton.bind(this)},didMount:function(){var e;if(d.TRACKING_STATUS_PLATE&&(null===(e=this.get("model").get("transaction_metadata"))||void 0===e?void 0:e.get("statement_status")))s().send("appl_state_plate_letter_open")},didUnmount:function(){this.unrenderUI(),clearTimeout(this.loadingPlateTimer),this.refs.container.removeEventListener("letter-meta-loaded",this.destroySkeleton),this.refs.container.removeEventListener("letter-meta-loading-err",this.destroyElementOnError)},didUpdate:function(){if(this.ui)this.ui.update(this.getParams())},attrChanged:{model:function(){this.renderUI()}},getParams:function(){var e=this.get("model"),t=this.get("metadata")?this.get("metadata").getAttributes():null,n=e.get("messages"),a=this.get("ponymode"),o=this.is("dark-mode"),s=this.get("sender"),d=A.default.user,u=this.get("calendar"),f=this.get("promoDomainPlate"),m=this.get("needHideAttach");return{model:e,features:r.default,flags:i(),cfg:l.Z,storage:L.ZP,octavius:!0,lang:c.Z.get("LANG"),email:d&&d.getEmail(),calendar:u,onPopupToggle:this.onPopupToggle,selector:w.selector,dataSourceDispatch:p.default,metadata:t,message:e,messages:n,ponymode:a,darkMode:o,sender:s,icsWithAttachToggle:m,onStatusClick:this.onStatusClick.bind(this),promoDomainPlate:f,onPromoDomainClose:this.onPromoDomainClose.bind(this),onBlockPhishingLetter:this.onBlockPhishingLetter.bind(this),onActualFeedback:this.onActualFeedback.bind(this),onEternalDislike:this.onEternalDislike.bind(this),onNewsletterMailingPlateChoice:this.onNewsletterMailingPlateChoice.bind(this),onCategoryFeedback:this.onCategoryFeedback.bind(this),onCategoryFeedbackPlateShow:this.onCategoryFeedbackPlateShow.bind(this),onWindowOpen:this.onWindowOpen,onAttachesCloudSave:this.onAttachesCloudSave.bind(this),onBlockFilteredLetter:this.onBlockFilteredLetter.bind(this),onApproveFilteredLetter:this.onApproveFilteredLetter.bind(this),createSmartCardConfirmPopup:this.createSmartCardConfirmPopup.bind(this),onSmartCardError:this.onSmartCardError.bind(this),onPromoPushPlateShow:this.onPromoPushPlateShow.bind(this),onPromoPush:this.onPromoPush.bind(this),onPromoPushSettings:this.onPromoPushSettings.bind(this),onDeleteMLCardSuccess:this.onDeleteMLCardSuccess.bind(this),onDeleteMLCardError:this.onDeleteMLCardError.bind(this),onToggleIcsAttachClick:this.onToggleIcsAttachClick.bind(this),MailGettersMessageMeta:_,RPC:T()}},renderUI:function(){var e=this;this.unrenderUI();var t=performance.now(),n=A.default.user,a=this.is("dark-mode"),i={message:this.get("model"),features:r.default,promoDomainPlate:this.get("promoDomainPlate"),sender:this.get("sender"),type:this.get("type")};if(this.get("needSkeleton")&&!this.loadingPlateTimer)this.waitForLoadingPlate();(0,S.Z)("letter.meta").then((function(t){return e.isMounted()&&t&&t(I({loadPath:window.require.toUrl("letter.meta.js").replace("letter.meta.js",""),email:n&&n.getEmail(),darkMode:a,MailGettersMessageMeta:_},i))})).then((function(n){if(!n||!e.isMounted())return!1;e.ui=new n(e.refs.container),e.ui.renderWrapper(I(I({},e.getParams()),{timingStart:t,timingNow:function(){return performance.now()}}));var r=e.refs.container.children.length;C.default.update(),e.broadcast("render",{showed:r})}))},unrenderUI:function(){this.ui&&this.ui.destroy(),this.ui=null},onPopupToggle:function(e){(0,k.BA)().then((0,k.qh)(this,(function(t){t.setScope(e?"layer-no-shortcuts":"all")})))},onStatusClick:function(e){this.broadcast("letterclick",{uidl:e})},onPromoDomainClose:function(){this.broadcast("promodomainclose")},onBlockPhishingLetter:function(){var e=this.get("model");this.broadcast("spam",{model:e})},onActualFeedback:function(e){var t=this.get("model");T().call("messages/services/ispriority",{ids:[t.get("messages.0.id")],is_priority:e})},onEternalDislike:function(e,t){var n=this.get("model");T().call("messages/services/ispriority",{ids:[n.get("messages.0.id")],is_priority:t,permanent_priority:!0})},onCategoryFeedbackPlateShow:function(e){var t;if(d.USE_QUEUE_CATEGORY_FEEDBACK_PLATE){var n=L.ZP.get("letter.meta-category-feedback-shows")||{};if(null===(t=this.get("onShowCategoryFeedbackPlate"))||void 0===t||t(),!n.hasOwnProperty(e))n[e]={countShows:0,time:0};n[e].countShows++,n[e].time=(0,g.V)(),L.ZP.set("letter.meta-category-feedback-shows",n)}},onNewsletterMailingPlateChoice:function(e){var t=this.get("model"),n=(L.ZP.get("newsletter-mailing-choiced-list")||"").split(","),r=t.get("correspondents.from.0.email");n.push(r),L.ZP.set("newsletter-mailing-choiced-list",n.join(","));var a=e?i18n("Рассылка подтверждена"):i18n("Вы успешно отписались");O.default.add({text:a,qa:"newsletter-mailing-plate-choice-".concat(e?"sub":"unsub")})},onCategoryFeedback:function(e,t){var n=this.get("model");if(!t)T().call("messages/services/category/feedback",{id:n.get("messages.0.id"),category:e});else T().call("messages/services/category/feedback",{id:n.get("messages.0.id"),other_category:t})},onWindowOpen:function(e){(0,v.default)(e)},onAttachesCloudSave:function(){this.broadcast("attaches-cloud-save",this.get("model").getAttachmentsList())},onBlockFilteredLetter:function(){s().send("rl_btn_block"),this.broadcast("move",{id:d.PARENTAL_CONTROL_DENY_FOLDER_ID,model:this.get("model")})},onApproveFilteredLetter:function(){s().send("rl_btn_approve"),this.broadcast("move",{id:d.PARENTAL_CONTROL_APPROVE_FOLDER_ID,model:this.get("model")})},createSmartCardConfirmPopup:function(e,t){var n=this;Promise.all([(0,S.Z)("react"),(0,S.Z)("blitz")]).then((function(r){var a=r[0],i=r[1].LayerManager;if(n.isMounted()){var o=n.layerManager||new i;o.setup(n.el,{popup:!1,radarPrefix:"smart-card"});var s=o.openLayer(a.createElement(e,I(I({},t),{onClose:function(){if(t.onClose(),o)o.destroyLayer(s)}})),{noPanelWrap:!0,responsive:"auto"}).id}}))},onSmartCardError:function(){O.default.add({text:i18n("Временно не работает. Попробуйте попозже"),qa:"clnd-smart-card-notify-err"})},onPromoPushPlateShow:function(){if(d.USE_QUEUE_PROMO_PUSH_PLATE){var e=+L.ZP.get("letter.meta-promo-push-show")||0;L.ZP.set("letter.meta-promo-push-show",e+1)}},onPromoPush:function(e,t){var n;return null===(n=(0,E.p)().model.swBox.pushManager)||void 0===n?void 0:n.forCurrentEmail().set({active:!0}).then((function(){s().send(["notifications-push","switch","on"],{dwh:{source:"letter-promo"}}),O.default.add({text:e})})).catch((function(e){s().send(["notifications-push","switch","error"],{rlog:"push-switch-error",rlog_message:{error:e,on:!0}}),O.default.add({type:"error",text:t})}))},onPromoPushSettings:function(){b.default.onSettingsDockBrowserSettingsOpen()},onDeleteMLCardSuccess:function(){O.default.add({text:i18n("Событие удалено из календаря"),qa:"clnd-ml-card-del-success"}),this.unrenderUI()},onDeleteMLCardError:function(){O.default.add({text:i18n("Временно не работает. Попробуйте попозже"),qa:"clnd-ml-card-del-err"})},waitForLoadingPlate:function(){this.set("showSkeleton",!0),this.loadingPlateTimer=setTimeout(this.destroyElementOnError,d.LETTER_META_SKELETON_WAIT_TIMEOUT),this.refs.container.addEventListener("letter-meta-loaded",this.destroySkeleton),this.refs.container.addEventListener("letter-meta-loading-err",this.destroyElementOnError)},onSkeletonMount:function(){s().send("lm-skeleton-show")},destroySkeleton:function(){clearTimeout(this.loadingPlateTimer),this.loadingPlateTimer=null,this.set("showSkeleton",!1)},destroyElementOnError:function(){s().send("lm-skeleton-destroy",{rlog:"calendar_smart_card_logs",rlog_message:{message:"skeleton-destroy-on-timeout",letterId:this.get("model").id}}),this.destroySkeleton()},onToggleIcsAttachClick:function(e){this.broadcast("toggle-ics",{isOpen:e})}})},92049:function(e,t,n){"use strict";n.r(t),n.d(t,{blockSpec:function(){return Ae},default:function(){return Se}});var r=n(45730),a=n.n(r),i=n(17717),o=n.n(i),s=n(73928),l=n(60033),c=n.n(l),d=n(52745),u=n(13620),f=n(50987),m=n(21211),h=n(18440),p=n.n(h),g=n(3275),v=n(19008),_=n(44438),b=n(75320),E=n.n(b),y=n(98631),T=n(54844);function A(e){return m.SAFE_URL_LETTERS.test(e)}var S=n(4183),O=n(48250),C=n(30698),w=n(83183),L=n(14077),k=n(90065),I=n(72727),R=n(88695),D=n(29404),M=n(31086),P=n(4727),N=n(4872),x=n.n(N),F=n(33440),U=n(39783),H=n.n(U),B=n(9789),Z=n(85271),G=n(66225),q=n(78267),j=n(47759),W=n(61799),V=n(93286),z=n(77917),Y=n(57045),K=n(8387),X=n(84427),Q=n(79087),J=n(86450),$=n(98039),ee=n(45114),te=n(38205),ne=n(94993),re=n(43353),ae=n(12199),ie=n(17914),oe=n(19291),se=n(4076),le=n(59574),ce=n(15598),de=n(37240),ue=n(41026),fe=n(45069),me=n(71474),he=n(56302),pe=n(95470),ge=n(52950),ve=n(62718),_e=n(90557),be=function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},Ee=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},ye=(0,M.Z)(),Te={head:{offsetSide:"top",offsetPadding:"paddingTop",className:"letter__head"},footer:{offsetSide:"bottom",offsetPadding:"paddingBottom",className:"letter__footer"}},Ae={name:"letter",template:E(),performanceTrace:"track",isolateEvents:!1,updateLastSeenUnsubscribe:null,mods:{correspondent:v.k0,correspondentsCount:v.zW,getLocaleDateFull:_.BY},isFooterHiddenRadarSended:!1,isSmartReplyHiddenRadarSended:!1,blocks:{avatar:J.Z,"attach-list":Q.Z,badge:$.Z,button2:ee.Z,"calendar-button":te.Z,dropdown:ne.Z,"dropdown-actions":re.Z,"letter-calendar":se.Z,"letter-body":ie.Z,"letter-confirm-receipt":ce.Z,"letter-contact":de.Z,"letter-body-amp":oe.Z,"letter-category":le.Z,"letter-status2":fe.Z,"letter-tooltip":me.Z,translator:ve.Z,ico:ae.Z,"letter-meta":ue.Z,list:he.Z,"list-item":pe.Z,"marusia-rl-button":ge.Z},lazyBlocks:{unsubscribe:_e.mV},events:{"attaches:cloud:all":"onAttachmentsCloud","attaches:cloud:one":"onAttachmentCloud","attaches:open":"onAttachmentClick",clickavatar:"onContactShow","contact:click":"onContactShow","details:expand":"onToggleDetails","letter:body:allowedattrclick":"onAllowedAttrClick","letter:body:data-attr:click":"onLetterDataAttributeClick","letter:body:finepayment":"onFinePaymentClick","letter:body:finepaymentright":"onFinePaymentRightClick","letter:body:monetapayment":"onMonetaPaymentClick","letter:body:tomyself":"onToMyselfClick","letter:draft:forward":"onLetterComposeFromDraft","letter:draft:reply":"onLetterComposeFromDraft","letter:draft:replyall":"onLetterComposeFromDraft","translator:close:click":"onTranslatorClose","translator:hide:click":"onTranslatorHide","translator:original:click":"onTranslatorOriginal","translator:retry:click":"onTranslatorTranslate","translator:translate:click":"onTranslatorTranslate","letter-tooltip:show-images:click":"onTooltipShowImagesClick","letter-tooltip:close":"onTooltipClose","amp:error":"onAmpError","dark-mode:toggle":"onDarkModeToggle","calls:groupcall":"onCallTo","details:collapse":"onToggleDetails","vk-messenger:open":"onVkMessengerOpen","amp:change-css-selector-theme":"setCssSelectorThemeAMP"},defaults:{"disable-category":!0,"hover-support":T.Z.capabilities["hover-support"],"native-sticky":!m.IS_READLETTER_NATIVE_STICKY_DISABLED,"is-translator-error":!1,"is-translator-visible":!1,"is-translator-loading":!1,"is-translator-forced-shown":!1,"is-automated-show-translator-radar-send":!1,"is-letter-in-english-radar-send":!1,"is-letter-translated":!1,model:null,"dates-metadata":null,ponymode:!1,"quotes-collapsed-default":!0,"smart-reply-on":!0,sticky:null,"sticky-head":!1,"sticky-footer":!1,"enable-body-scale":!1,"max-scale":.5,"enable-amp":m.ENABLE_AMP,"feature-unsubscribe":m.FEATURE_UNSUBSCRIBE,"disable-translate":m.DISABLE_TRANSLATE,"disable-create-event":m.DISABLE_CREATE_EVENT,"invite-call":m.CALLS,"disable-head-calendar":m.DISABLE_LETTER_HEAD_CALENDAR,"disable-head-call":m.CALLS_DISABLE_LETTER_HEAD_CALL,"disable-head-print":m.DISABLE_HEAD_PRINT,"disable-calendar-newsletters":m.DISABLE_LETTER_CALENDAR_NEWSLETTERS,"disable-call-newsletters":m.CALLS_DISABLE_LETTER_CALL_NEWSLETTERS,"disable-footer-calendar":m.DISABLE_LETTER_FOOTER_CALENDAR,"disable-footer-call":m.CALLS_DISABLE_LETTER_FOOTER_CALL,"disable-call":m.CALLS_DISABLE_LETTER_CALL,"disable-calls-tip":m.DISABLE_CALLS_TIP,"enable-tags":m.ENABLE_TAGS,"translator-default-from":"en","translator-default-to":"ru","amp-error":!1,isThemedAMP:!0,"address-header-calendar":m.ADDRESS_HEADER&&m.ADDRESS_HEADER_CALENDAR,"dark-mode-enabled":!0,"category-feedback":m.CATEGORY_FEEDBACK_SUBMENU,"is-tooltip-visible":!0,"marusia-read-all-letters":m.MARUSIA_READ_ALL_LETTERS,"smart-card-ics":m.SMART_CARD_ICS,"show-attach-safety-status":m.SHOW_ATTACH_SAFETY_STATUS,"has-attach-safety-status-background":m.HAS_ATTACH_SAFETY_STATUS_BACKGROUND,"attach-safety-status-position":m.ATTACH_SAFETY_STATUS_POSITION},attrChanged:{model:function(e){var t=this;if(window.setTimeout((function(){var t=e.get("attaches").list;(0,V.ZP)("letter_attaches",t.length);try{(0,P.Rc)(t)}catch(e){}}),500),this.isSmartRepliesAvailable(e)){this.set("smart_replies_ready",!!e.getSmartReply());var n=e.is("flags.smart_reply_stage")?"_stage":"";(0,V.ZP)("smart_replies"+n+"_try-show"),e.fetchSmartReply().then((function(e){if(t.set("smart_replies",e.get("replies")),(0,V.ZP)("smart_replies"+n+"_show"),e.is("is_default"))(0,V.ZP)("smart_replies_default"+n+"_show");j.default.update()}),(function(){(0,V.ZP)("smart_replies"+n+"_show-fail")}))}},sticky:function(e,t){if(e=e||{},(t=t||{}).head!==e.head)this.updateSticky("head",e.top,e.headFade,!!e.maxWidth);if(t.footer!==e.footer)this.updateSticky("footer",e.bottom,e.footerFade,!!e.maxWidth)},"sticky-position":function(e){var t=this.get("sticky");if(t)this.updateSticky("head",t.top,!1,!!e.maxWidth),this.updateSticky("footer",t.bottom,!1,!!e.maxWidth)},"dates-metadata":function(e){this.get("model").set("dates_metadata.priority_date",e)}},constructor:function(){p().Block.apply(this,arguments)},getOriginalEvent:function(e){return this.reactComponent?e.originalEvent:e.originalEvent.originalEvent},updateOnlineStatus:function(e){if(e&&m.LETTER_LASTSEEN_REQUEST){var t=e.status_id===m.LASTSEEN_ONLINE_STATUS;c().send("lastseen-v2-letter-".concat(t?"online":"offline"),{skipdwh:!0}),this.set("isOnline",t)}},updateSenderLastSeen:function(){var e=this;if(m.LETTER_LASTSEEN_REQUEST){var t=this.get("model").get("correspondents.from.0"),n=this.get("getLastSeen");null==n||n([t.email]).then((function(n){var r=n.payload[t.email];e.updateOnlineStatus(r)}))}},_windowResizeListeners:{},didMount:function(){var e=this.get("model");this.updateSenderLastSeen();var t=this.getMessageCorrespondents().concat(e.get("correspondents").from||[]).map((function(e){return e.email}));this.broadcast("addressbook:refetchcontacts",t),this._sendVkMessengerEvent("open_mail_with_vk_messenger");var n=this.updateOnlineStatus.bind(this);if(this.updateLastSeenUnsubscribe=u.l.fulfilled.subscribe((function(t){var r=t.payload;if(null==r?void 0:r.contacts){var a=e.get("correspondents.from.0"),i=r.contacts[a.email];if(i)n(i)}})),this.updateStickyStatus=this.updateStickyStatus.bind(this),this.stickyDisabled=!1,!this.is("readonly")){var r=z.default.lookup("scrollable_content"),a=z.default.lookup("panel-with-selected"),i=this.el.closest(".".concat(r))||this.el.closest(".".concat(a));if(!i){var o=this.get("router");return void(0,d.coreLoggerDispatchSelfError)("lttr-rsz-obsrvr",new Error('element parameter is not of type "Element"'),{routeId:o&&o.route&&o.route.id,smokeScreenServiceEnabled:z.default.isEnabled(),isPreviewMode:this.is("preview-mode"),scrollableContent:r,panelWithSelected:a})}this.adaptiveHandler=new O.O({pureBreakpoints:!0,breakpoints:[{conditions:function(t){return e.is("attaches.list.length")&&e.checkGrant(x().SHARE_GRANTS.view_attachment)?t.height<m.MIN_LETTER_HEIGHT_STICKY_WITH_ATTACHES:t.height<m.MIN_LETTER_HEIGHT_STICKY},props:{element:"footer",disableSticky:!0,position:0,fade:!this.get("sticky")}},{props:{element:"footer",disableSticky:!1,position:0,fade:!this.get("sticky")}}],onResize:this.updateStickyStatus,element:i})}},didUnmount:function(){var e,t,n=this;Object.keys(this._windowResizeListeners).forEach((function(e){return n._stopStickyTracking(n._windowResizeListeners[e])})),ye.unbind(),null===(e=this.updateLastSeenUnsubscribe)||void 0===e||e.call(this),null===(t=this.adaptiveHandler)||void 0===t||t.destroy()},onAttachmentClick:function(e){var t=this.get("model"),n=this.get("router"),r=this.get("route"),a=e.details;if(a.get("flags.eml")){var i=t.get("folder"),o=r.params.part?r.params.letter:"0:".concat(t.id,":").concat(i);(0,I.default)(n.getUrl("#read-letter",{folder:i,letter:o,part:a.id}))}else K.Z.open({attachment:a,message:t,router:n,newWindow:!0})},onAttachmentCloud:function(e){this.onAttachmentsCloud(be(be({},e),{details:[e.details]}))},onAttachmentsCloud:function(e){var t=this.get("model"),n=e.details.filter((function(e){return!e.isLink()&&!e.isCloud()}));this.broadcast("attachments:tocloud",{message:t,attachments:n})},onLetterDataAttributeClick:function(e){var t=e.details,n=this.getOriginalEvent(e);switch(t.type){case"share-folder-access":this.broadcast(B.r.letterActionClick,t,n);break;case"mentions":if(!m.ENABLE_MENTIONS)break;var r=e.target.dataset.mentionEmail,i=e.target.dataset.mentionName;e.originalEvent=n,e.details.email=r,e.details.name=i,e.details.avatars={"50x50":(0,g.Q)(r,i,50),default:(0,g.Q)(r,i,90)},this.onContactShow(e);break;case"data-cloud-vkt-redirect":if(m.WEBVIEW){var o=n.currentTarget.getAttribute(t.attrName);a().send("OpenLink",{url:o}).catch((function(e){return console.error("VKTeamsBridge cloud redirect error: ",e)}))}else(0,I.default)(n.currentTarget.href)}},onAllowedAttrClick:function(e){var t=e.details,n=this.getOriginalEvent(e),r=n.target.getAttribute("data-url");if(A(r)){n.preventDefault(),n.stopImmediatePropagation();var a=t.skin;if(t.uidl){var i=this.get("model").id;r=(0,R.Z)(r,{uidl:i})}q.default.openIframeLayer({paramsKey:a,additionalParams:{url:r},factoryParams:{dimmer:!0,"close-on-esc":!0}})}},onToggleDetails:function(){this.set("details-expanded",!this.get("details-expanded"))},formFinePaymentUrl:function(e){var t=e.target.dataset,n={id:t.id,sig:t.sig,uidl:this.get("model").id,from:"letter_gd-exp",mp:"web",ftrs:(0,C.Z)("gibdd")};return"/fines/pay?".concat((0,k.Z)(n))},onFinePaymentRightClick:function(e){var t=this.getOriginalEvent(e),n=t.target.dataset,r=n.id,a=n.sig,i=this.formFinePaymentUrl(t),o=A(i);if(r&&a&&o)t.target.setAttribute("href",i)},onFinePaymentClick:function(e){var t=this.getOriginalEvent(e),n=t.target.dataset,r=n.id,a=n.sig,i=this.formFinePaymentUrl(t),o=A(i);if(r&&a&&o)t.preventDefault(),t.stopImmediatePropagation(),q.default.openIframeLayer({paramsKey:"gibdd_group",additionalParams:{url:i},factoryParams:{dimmer:!0,"close-on-esc":!0}})},onMonetaPaymentClick:function(e){var t=this.getOriginalEvent(e),n=t.target.getAttribute("data-url");if(A(n)){t.preventDefault(),t.stopImmediatePropagation();var r=t.target.getAttribute("data-moneta"),a=680,i=683,o="payment";if("unsubscribe"===r)a=420,i=341,o="unsubscribe";else if("subscribe"===r)o="subscribe";n=(n=n.replace(m.MONETA_PAYMENT_LETTER_URL_REGEXP,window.location.origin+"/")).replace("__monetaUidl__",this.get("model").id);var s={dimmer:!0,from:"letter",scenario:o};if(m.PAYMENT_CENTER_NOT_HIDDEN)s["close-on-dimmer"]=!1;n=(0,y.Z)(n,{from:"letter",mp:"web"}),q.default.open("moneta",{url:n,width:a,height:i},s)}},onToMyselfClick:function(){q.default.open("confirm-tomyself-enable",{},{compact:!0,dimmer:!0,resolvable:!0,"close-on-dimmer":!1,"close-on-esc":!1,"reject-on-close":!0}).then((function(){if(!o().get("to-myself").isActive())(0,S.default)({type:"TOGGLE_TO_MYSELF_METATHREAD",state:!0,uid:void 0}),(0,V.ZP)("letter_myself_on")})).catch((function(e){if(e)throw(0,V.ZP)("ltr_mslf_open_err_".concat(e)),e}))},onLetterComposeFromDraft:function(e){var t=e.type,n=e.details,r=t.split(":").pop(),a=n.model,i=n.draftId;this.broadcast("compose:draft",{model:new(H())({id:i}),source:{id:a.get("id"),mode:r}})},onContactShow:function(e){e.details.type="correspondent",e.details.checkContactPossessing=this.get("checkContactPossessing"),e.details.messageModel=this.get("model"),G.Z.show(e,{mobile:this.get("mobile")})},onTranslatorClose:function(){this.broadcast("translator:close",{model:this.get("model"),block:this})},onTranslatorHide:function(){this.broadcast("translator:hide",{model:this.get("model"),block:this})},onTranslatorOriginal:function(e){var t=e.details;this.broadcast("letter:original",{options:t,model:this.get("model"),block:this})},onTranslatorTranslate:function(e){var t=e.details;this.broadcast("letter:translate",{options:t,model:this.get("model"),block:this})},onTooltipShowImagesClick:function(){var e=this.get("model");H().fetchData({id:e.get("id"),folder_id:e.get("folder"),bulk_show_images:!0,remove_emoji_opts:w.Y},!0,!0).then((function(t){var n=e.getTranslationLast()||{},r=n.fromlang,a=n.tolang;if(r&&a)e.resetTranslation(r,a,"body.html");var i=t.body;e.setCachedBody(i),e.set(t)}))},onTooltipClose:function(){this.set("is-tooltip-visible",!1)},onVkMessengerOpen:function(e){var t=this,n=e.details;if(this._sendVkMessengerEvent("in_mail_toolbar_click_vk_messenger"),!m.VK_MESSENGER_EXTERNAL)X.i.open({chatId:n,onShow:function(){t._sendVkMessengerEvent("in_mail_open_vk_messenger")},darkMode:this.is("dark-mode")});else(0,I.default)(n)},isLetterTranslated:function(){return this.is("is-letter-translated")},isTranslationLoading:function(){return this.is("is-translator-loading")},isTranslatorVisible:function(){var e=this.get("model"),t=e.is("flags.in_english"),n=o().get("translator-hide").isActive(),r=this.get("is-translator-forced-shown"),a=f.Z.get("LANG");if(this.get("is-translator-visible"))return!0;if(m.ENABLE_HIDE_TRANSLATOR&&n)return!1;if(t&&!this.get("is-letter-in-english-radar-send"))c().send("letter_in_english",{dwh:{letterId:e.id,user_english:"en_US"===a}}),this.set("is-letter-in-english-radar-send",!0,!0);if(m.AUTOMATED_SHOW_TRANSLATOR&&!r&&!this.is("preview-mode")&&t&&"en_US"!==a){if(!this.get("is-automated-show-translator-radar-send"))c().send("letter_translator_show",{dwh:{letterId:e.id,automated_show:!0,in_english:t}}),this.set("is-automated-show-translator-radar-send",!0,!0);return!0}return!1},isTooltipVisible:function(){return!this.is("preview-mode")&&this.is("is-tooltip-visible")},isImagesHiddenTooltipVisible:function(){var e=this.get("model"),t=e.get("images"),n=e.getFolder(),r=e.getCachedBody();return n.isSpam()&&t.exists&&t.hidden&&!r},getAttachmentsDowloadLink:function(){var e=this.get("model"),t=e.getAttachmentsDowloadLink();if(!t&&1===e.get("attaches.list.length")){t=e.get("attaches.list.0").getDownloadUrl()}return t},getLetterBody:function(){var e=this.getLetterBodyTranslation(),t=this.get("model"),n=t.get("images"),r=t.getCachedBody();if(n.exists&&n.hidden&&r&&r.html)t.set("body.html",r.html);return e||t.get("body.html")},getLetterBodyKey:function(){var e=this.getLetterBodyTranslation(),t=this.get("model"),n=t.getTranslationLast()||{},r=n.fromlang,a=n.tolang,i=this.get("model").id,o=e?"".concat(r,":").concat(a):"",s=t.get("images.hidden")?1:0,l=this.isDarkMode()?1:0;return"".concat(i,"_").concat(o,"_").concat(l,"_").concat(s)},getLetterBodyTranslation:function(){var e=this.get("model"),t=e.getTranslationLast()||{},n=t.fromlang,r=t.tolang;if(!(this.isLetterTranslated()&&this.isTranslatorVisible()&&n&&r))return"";else return e.getTranslation(n,r,"body.html")},getMessageCorrespondents:function(){var e=this.get("model").get("correspondents"),t=e.to,n=void 0===t?[]:t,r=e.cc,a=void 0===r?[]:r,i=e.bcc,o=void 0===i?[]:i;return[].concat.call([],n,a,o)},isLetterIdEq:function(e){return e===this.get("model").id},canCallTo:function(e){var t=Ee(Ee(Ee([],e.get("correspondents.from")||[],!0),e.get("correspondents.to")||[],!0),e.get("correspondents.cc")||[],!0);return m.CALLS_P2P_OUTGOING&&Z.Z.getCallsAPIClient().canCallTo(t.map((function(e){return e.email}))).some((function(e){return e.canCall}))},onCallTo:function(e){var t=e.details,n=Ee(Ee(Ee([],t.get("correspondents.from")||[],!0),t.get("correspondents.to")||[],!0),t.get("correspondents.cc")||[],!0);Z.Z.getCallsAPIClient().callTo(n.map((function(e){return e.email}))).then((function(e){if(e.redirectUrl)(0,I.default)(e.redirectUrl)}))},updateStickyStatus:function(e){var t=e.element,n=e.disableSticky,r=e.position,a=e.fade;this.stickyDisabled=n,this.updateSticky(t,r,a)},updateSticky:function(e,t,n,r){var a,i;if(void 0===r)r=!1;var o=this.get("sticky-position");if(null!=o){var s=o.right,l=o.left,c=o.width,d=Te[e],u=d.offsetSide,f=d.offsetPadding,h=d.className,p=this.el.getElementsByClassName(h)[0];if(p){var g=p.getBoundingClientRect().height;if(void 0!==t&&!this.stickyDisabled){if(c)p.style.width=c+"px",p.style.left="",p.style.right="";else p.style.width="",p.style.left=l+"px",p.style.right=s+"px";if(!m.IS_READLETTER_NATIVE_STICKY_DISABLED)this.set("sticky-".concat(e),!0),p.style[u]="0px";else p.style[u]=t+"px",this.el.style[f]=g+"px",this.set(((a={})["sticky-".concat(e)]=!0,a["sticky-".concat(e,"-fade")]=n,a)),r?this._startStickyTracking(p,h,o):this._stopStickyTracking(h)}else p.style[u]="",p.style.left="",p.style.right="",p.style.width="",this.el.style[f]="",this.set(((i={})["sticky-".concat(e)]=!1,i["sticky-".concat(e,"-fade")]=!1,i),!1)}}},_startStickyTracking:function(e,t,n){if(this._windowResizeListeners[t])this._stopStickyTracking(t);var r=function(){if(window.innerWidth>n.maxWidth+n.left+n.right)e.style.left="",e.style.right="",e.style.width="".concat(n.maxWidth,"px");else e.style.left="".concat(n.left,"px"),e.style.right="".concat(n.right,"px"),e.style.width=""};window.addEventListener("resize",r),this._windowResizeListeners[t]=r,r()},_stopStickyTracking:function(e){var t=this._windowResizeListeners[e];if(t)delete this._windowResizeListeners[e],window.removeEventListener("resize",t)},_showDropdownCallButton:function(){var e=this._showUnsubscribeButton()&&this.is("disable-call-newsletters");return this.is("invite-call")&&!this.is("disable-call")&&!e},_showHeadCallButton:function(){var e=this._showUnsubscribeButton()&&this.is("disable-call-newsletters");return this.is("invite-call")&&!this.is("disable-call")&&!this.is("disable-head-call")&&!e},_showDropdownCalendarButton:function(){var e=this._showUnsubscribeButton()&&this.is("disable-calendar-newsletters");return!this.is("disable-create-event")&&!e},_showHeadCalendarButton:function(){var e=this._showUnsubscribeButton()&&this.is("disable-calendar-newsletters");return!this.is("disable-create-event")&&!this.is("disable-head-calendar")&&!e},_showUnsubscribeButton:function(){if(this.get("mobile"))return!1;var e=this.get("model");if(e.getFolder().isSpam())return!1;else return this.is("feature-unsubscribe")&&e.get("flags.newsletter")},_showVkMessengerButton:function(){var e=this.get("transaction-metadata");if(!e)return!1;if(!e.get("vk_chat_href"))return!1;else return!0},_getVkMessengerParams:function(){var e=this.get("transaction-metadata"),t=null==e?void 0:e.get("vk_chat_href"),n=null==e?void 0:e.get("vk_chat_id"),r=null==e?void 0:e.get("shop_name");return{href:m.VK_MESSENGER_EXTERNAL?t:n,text:r?i18n("Чат с {shopName}",{shopName:r}):i18n("Чат в VK")}},_sendVkMessengerEvent:function(e){if(this._showVkMessengerButton()){var t=this.get("model"),n=this.get("transaction-metadata"),r={is_order:t.get("transaction_category")===s.CategoryTypes.ORDER,letter_id:t.get("id"),partner_email:t.get("correspondents.from.0.email"),partner_name:n.get("shop_name")};if("open_mail_with_vk_messenger"!==e)r.destination=m.VK_MESSENGER_EXTERNAL?"outside":"inside";if("in_mail_open_vk_messenger"===e)r.from="toolbar";c().send(e,{dwh:r})}},_showFilterButton:function(){return!m.FORBID_FILTERS},_showSpam:function(){var e=this.get("model").getFolder();return!m.FORBID_SPAM&&!e.isSpam()},_showUnsubscribeInMoreMenu:function(){var e=this.get("model"),t=e.is("flags.newsletter")&&e.is("flags.show_definitely_spam")&&e.is("flags.have_unsubscribe_list");return m.UNSUBSCRIBE_IN_MORE_DROPDOWN&&t},hasReplyAll:function(e){return(0,L.gA)(e)},isAMPLetter:function(){var e=this.get("model");return m.ENABLE_AMP&&!this.is("amp-error")&&e.get("body.amp")},isAMPLetterWithoutTheme:function(){return this.isAMPLetter()&&!this.is("isThemedAMP")},isDarkMode:function(){return this.isDarkModePossible()&&this.is("dark-mode-enabled")},isDarkModePossible:function(){return!this.isAMPLetterWithoutTheme()&&this.is("dark-mode")},onAmpError:function(){this.set("amp-error",!0)},setCssSelectorThemeAMP:function(e){var t=e.details;this.set("isThemedAMP",t)},onDarkModeToggle:function(){this.radar(["turn-on",this.is("dark-mode-enabled")?"light-mode":"dark-mode"]),this.invert("dark-mode-enabled")},isProbablyPhishing:function(){var e=this.get("model");return m.PHISHING_ALERT&&e.get("flags.maybe_phishing")},checkFolderGrant:function(e){return this.get("model").checkGrant(e)},isEnableReply:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(x().SHARE_GRANTS.reply)},useNewToolbar:function(){return m.NEW_TOOLBAR},isShowSmartReplyAndMarusia:function(){var e,t;if(!m.HIDE_MESSAGE_SMART_REPLY&&!m.HIDE_MESSAGE_SMART_REPLY_BY_ONLY_WIDTH)return!0;var n=this.reactComponent?null===(t=null===(e=this.letterBody)||void 0===e?void 0:e.current)||void 0===t?void 0:t.el:this.refs["letter-body"],r=window.innerHeight,a=null==n?void 0:n.clientWidth,i=this.isSmartReplyHiddenRadarSended,o=!1,s="";if(m.HIDE_MESSAGE_SMART_REPLY_BY_ONLY_WIDTH)o=a<650||!a,s="_width";if(m.HIDE_MESSAGE_SMART_REPLY)o=r<800&&a<650||!a;if(o&&!i)c().send("letter_hide_smart-reply".concat(s)),this.isSmartReplyHiddenRadarSended=!0;return!o},isShowFooter:function(){var e,t;if(!m.HIDE_MESSAGE_FOOTER)return!0;var n=this.reactComponent?null===(t=null===(e=this.letterBody)||void 0===e?void 0:e.current)||void 0===t?void 0:t.el:this.refs["letter-body"],r=window.innerHeight,a=null==n?void 0:n.clientWidth,i=this.isFooterHiddenRadarSended,o=r<800&&a<650||!a;if(o&&!i)c().send("letter_hide_footer"),this.isFooterHiddenRadarSended=!0;return!o},isEnableCall:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(x().SHARE_GRANTS.reply)},isEnableForward:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(x().SHARE_GRANTS.forward)},isEnableMark:function(){if(this.attrs["disable-edit"])return!1;else return this.checkFolderGrant(x().SHARE_GRANTS.mark_as_important)},isEnableAttach:function(){return this.checkFolderGrant(x().SHARE_GRANTS.view_attachment)},isDatesMetadataEnabled:function(){var e=this.get("dates-metadata");return m.DATES_METADATA&&e},isEnableConfirmationReceipt:function(){var e=this.get("model"),t=e.is("flags.receipt"),n=this.is("preview-mode"),r=!e.getFolder().isShareTake();return Boolean(!n&&t&&r)},isSmartRepliesAvailable:function(e){return this.is("smart-reply-on")&&e.is("flags.smart_reply")&&!this.is("readonly")},isMarusiaReadLetterEnabled:function(){var e,t=this.get("model");return m.MARUSIA_READ_LETTER&&!(null===(e=t.getFolder())||void 0===e?void 0:e.isSecure())&&this.isSmartRepliesAvailable(t)},getMarusiaReadLetterRadarPrefix:function(){return m.MARUSIA_READ_ALL_LETTERS?"all":"smart"},hasCloudStockAttach:function(){var e;return!!(null!==(e=this.get("model").getAttachmentsList())&&void 0!==e?e:[]).find((function(e){return e.isCloudStock()}))},getLetterMetaHeaderType:function(e){if(e.get("flags.maybe_phishing"))return"phishing";if(m.EXPIRED_ATTACHES_DIE&&this.hasCloudStockAttach())return"expired_attaches";else return null},isShowFakeCreateTodo:function(){if(!m.FAKE_CREATE_TODO)return!1;else return!Y.ZP.get("create_todo_fake_button_shown")},isAllExtensionsInWhiteList:function(e){return e.every((function(e){var t,n,r=(t=e.attributes.name,n=t.lastIndexOf(".")+1||t.length,t.slice(n).toLowerCase());return r&&m.EXTENSIONS_WHITE_LIST.includes(r)}))},isEveryStrictlyUnsafe:function(e){return e.map((function(e){return e.attributes.flags.unsafe})).every((function(e){return e}))},isAllScanResolutionsOf:function(e,t){return e.map((function(e){return e.attributes.scan})).every((function(e){return e===t}))},isAllTypesOf:function(e,t){return e.map((function(e){return e.attributes.type})).every((function(e){return t.includes(e)}))},getAttachSafetyStatus:function(){var e=this.get("model").attributes.attaches.list;if(!this.isEveryStrictlyUnsafe(e)&&this.isAllScanResolutionsOf(e,"healthy")&&this.isAllExtensionsInWhiteList(e)){if(this.isAllTypesOf(e,["cloud","cloud_stock"]))return c().send("attaches-status_view",{dwh:{status:"healthy"}}),"healthy";if(this.isAllTypesOf(e,["attach","cloud","cloud_stock"]))return c().send("attaches-status_view",{dwh:{status:"probablyHealthy"}}),"probablyHealthy"}return null},hasSmartCardIcsMeta:function(e){return!!(0,F.getCalendarIcsEvent)(e)}},Se=p().Block.extend((0,W.Z)({explicit:"radar",events:[{name:"mount",data:D.tA},{name:"unmount",data:D.tA},{name:"compose:reply",data:D.tA},{name:"compose:replyall",data:D.tA},{name:"compose:forward",data:D.tA},{name:"compose:smartreply",data:D.tA},{name:"togglestatus:unread",rename:function(e){return(0,D.aS)(e,"unread")}},{name:"togglestatus:flagged",rename:function(e){return(0,D.aS)(e,"flagged")}}]})(Ae))},11726:function(e,t,n){"use strict";n.d(t,{dj:function(){return l},RL:function(){return c},Bw:function(){return d},RO:function(){return m},OY:function(){return h},KF:function(){return p},Wv:function(){return g},Ml:function(){return v}});var r,a=n(21211),i=n(39783),o=n.n(i),s=n(83260),l={},c=o().PAYMENT_META_SKINS,d=function(e){return Date.now()>1e3*e},u=function(e,t){return t.some((function(t){return!!e[t]}))},f=((r={})[c.PROMO]=function(e){return u(e,["description","receiver"])},r[c.DATASET]=function(e){return u(e,["address","period","payer","description"])},r[c.GIBDD]=function(e){var t=u(e,["article_koap_description","violation_place"]),n=u(e,["car_number","driver_license","CTC","date_violation","receiver"]),r=(0,s.isPositiveNumber)(e.date_deadline);return t&&(n||r)},r[c.MOBILES_PAYMENT]=function(e){return!(!e.phone||!e.recharge_threshold)},r[c.SIMPLE]=function(e){return!!e.comment},r[c.MONETA]=function(e){return!(!e.receipt_data||!e.provider)},r[c.MOS_RU]=function(e){return!(!e.receipt_data||!e.provider)},r);function m(e){return e.replace(/:\d+$/,"")}function h(e,t,n,r,i){if(void 0===e)e=this.get("model");if(void 0===t)t=this.get("hidden-payment-dies");if(void 0===n)n=this.get("pony-mode");if(void 0===r)r=this.get("search");if(void 0===i)i=this.is("in-thread");if(r||i||!a.SHOW_LIST_LETTER_PAYMENT_DIES||a.LIST_LETTER_PAYMENT_DIES_CLOSEABLE&&""===t[m(e.id)])return"none";try{var o=e.getPaymentMeta();if(!o||o.skin===c.UNIVERSAL)return"none";else return f[o.skin](o)&&!n?"full":"compact"}catch(e){return"none"}}function p(){var e=this.get("model").getPaymentMeta(),t="2pane"===this.get("layout-mode"),n=!(e.skin!==c.PROMO||!e.preview_image),r=!!(a.LIST_LETTER_PAYMENT_DIES_GMAP&&e.skin===c.GIBDD&&e.latitude&&e.longitude);return t&&(n||r)}function g(){var e=this.meta,t=this["in-thread"];if(!e)return!1;else return t||"full"===this.getPaymentDieDisplayMode()&&!p.call(this)&&!(e.skin===c.MOBILES_PAYMENT&&e.provider_logo)}function v(e,t){if(void 0===e)e=this.get("model");if(void 0===t)t=this.is("in-thread");try{var n=e.getPaymentMeta();if(!n||!a.PAYMENT_LETTER_UNIVERSAL)return!1;else return!t&&n.skin===c.UNIVERSAL}catch(e){return!1}}},26694:function(e,t,n){"use strict";n.d(t,{kB:function(){return h},Q4:function(){return g},R5:function(){return v},dy:function(){return _},if:function(){return b},Mg:function(){return E},lB:function(){return y},JP:function(){return T},g:function(){return A},n3:function(){return S},RD:function(){return O},Ko:function(){return C},dP:function(){return w},oV:function(){return L},V_:function(){return k},a0:function(){return I},OA:function(){return R},J6:function(){return D}});var r=n(91140),a=n(21211),i=n(19008),o=n(44438),s=n(4872),l=n.n(s),c=n(92042),d=n.n(c),u=n(77917),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},m=["to","cc"];function h(){return this.get("model").get("subject")||i18n("<Без темы>")}function p(e,t,n){if(n){switch(+e.get("folder")){case l().SENT:case l().DRAFTS:case l().OUTBOX:return"to"}}return t}function g(){var e=this.get("model"),t=p(e,this.get("main-field"),this.get("search"));return(0,i.pB)(e,t)}function v(){var e=this.get("model");return a.PHISHING_ALERT&&e.get("flags.maybe_phishing")}function _(e){if(void 0===e)e=!1;var t=this.get("model"),n=this.get("folder"),r=p(t,this.get("main-field"),this.get("search"));if("from"===r){var o=this.isProbablyPhishing(),s=a.SHOW_SENDER_EMAIL_IN_SPAM_FOLDER&&n&&n.isSpam();if(o||s)return(0,i.hh)(t);else return(0,i._u)(t,r,e)}return m.reduce((function(n,r){var a=(0,i._u)(t,r,e);if(a)n.push(a);return n}),[]).join(", ")}function b(){return a.LETTER_LIST_HIGHLIGHT_PHISHING&&this.isProbablyPhishing()}function E(){var e,t=this.get("model");if("from"===p(t,this.get("main-field"),this.get("search")))e=(0,i.WE)(t).map((function(e){return(0,i.Mg)(e)}));else e=m.reduce((function(e,n){return e=e.concat((0,i.WE)(t,n).map((function(e){return(0,i.Mg)(e)})))}),[]);if(0===e.length)return i18n("Получатель не указан");if(e.length<=3)return e.join(", ");if(e.length>3){var n=e.length-3;return e.length=3,e.join(", ")+" "+i18n("и ещё")+" "+(0,i.zW)(n)}}function y(e){var t=this.get("model");return(0,o.BY)(t.get("date"),e)}function T(){var e=this.getSubject();if(e.length>130)e=e.slice(0,130)+"…";return e}function A(){var e=this.get("model").get("length");return e>1?e:0}function S(){var e=this.get("model"),t=e.get("transaction_category"),n=e.getFolder();if(t&&!n.isSpam()&&!this.shouldHideTransactionCategory())return t;else return null}function O(){return this.get("model").isHigh()}function C(){return!this.get("disable-subject")&&(this.getCounter()||this.getCategory()||this.isImportant())}function w(){var e=this.get("model");return this.get("search")?e.meta("search_snippet.value"):e.get("snippet")}function L(){if(!(this.get("model")instanceof d()||this.is("search")))return"".concat(this.is("in-metathread")?"metathread-":"","letter-item:priority-subject:").concat(this.getSubject());else return"".concat(this.is("in-metathread")?"metathread-":"","letter-item:subject:").concat(this.getSubject())}function k(e,t){var n;if(void 0===e)e=this.get("model");try{var r=t||this.get("unsubscribeList");if(!a.LL_UNSUBSCRIBE_NEWSLETTERS||!r||!e.is("flags.unread"))return null;var o=e.get("id"),s=null===(n=(0,i.WE)(e,"from"))||void 0===n?void 0:n[0];return r.find((function(e){return e.id===o&&e.sender===(null==s?void 0:s.email)}))?s:null}catch(e){return null}}function I(e){if(void 0===e)e=this.get("model");var t=this.getUnsubscribeSender(e);if(t)this.broadcast("letter:intersect:viewport",{uid:e.get("id"),sender:t})}var R=r.Z.createWelterDecorator((function(e){return f(f({},e),{minSize:1,maxSize:3,depth:3,tags:{a:30,div:40,span:30},attrs:{className:30,id:30,"data-id":30,"data-draggable-id":30,title:30,href:[333,function(e,t){if("a"===t.tag)return"/inbox/1:".concat(e(),":0/?")}]},enabled:function(e){return!1!==e.get("welter")}})}),u.withWelter),D=r.Z.createWelterDecorator((function(e){return f(f({},e),{tags:{a:20,span:80}})}),R)},47334:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var r=n(21211),a=n(18440),i=n.n(a),o=n(44438),s=n(55752),l=n.n(s),c=n(14077),d=n(29404),u=n(53785),f=n(61799),m=n(6703),h=n(59626),p=n(41861),g=n(53263),v=n(34734),_=n(35521),b=n.n(_),E=n(94005),y=n(26694),T=i().Block.extend((0,y.J6)({name:"list-letter-avatar",rootClassName:"ll-av",template:b(),immutable:!0,isolate:!0,blocks:{checkbox:E.Z},events:{"click:btn":"onClick"},defaults:{"disable-select":!1,"disable-hover":!1,"img-src":r.DEFAULT_AVATAR_SRC,indent:!1,size:"common",state:!1,priority:!1,"light-priority":!1,isThreadWithReliableMark:r.THREAD_WITH_RELIABLE_MARK},didMount:function(){this.el.classList.add("stop-animate")},onClick:function(e){if(!this.is("disable-select"))e.stopPropagation(),this.broadcast("toggle",this,e)},getImgSrc:function(){return'background-image: url("'.concat(this.get("img-src")||r.DEFAULT_AVATAR_SRC,'");')},checkReliable:c.F9,checkOfficial:c.NL})),A=n(95159),S=n(11726),O=n(19008),C=n(98086),w=n.n(C),L=i().Block.extend({name:"list-letter-correspondent",rootClassName:"ll-crpt",template:w(),immutable:!0,isolate:!0,isolateEvents:!0,defaults:{state:"",dangerous:!1},mods:{correspondent:O.k0}}),k=n(62216),I=n.n(k),R=n(12199),D=i().Block.extend((0,y.J6)({name:"list-letter-flag-status",rootClassName:"ll-fs",template:I(),immutable:!0,isolate:!0,blocks:{ico:R.Z},defaults:{state:!1,"disable-hover":!1},notVisualAttributes:{model:!0,"disable-hover":!0},getTitle(){return this.get("state")?i18n("Снять флажок"):i18n("Пометить флажком")}})),M=n(19274),P=n(37587),N=n(47576),x=n(88488),F=n(62733),U=n(48597),H=n(427),B=n(42350),Z=n(24871),G=n(84893),q=n(93441),j=n(92323),W=n(30240),V=i().Block.extend((0,y.OA)((0,f.Z)({id:"letter-item",events:[{name:"clickavatar",rename:function(e){return e.is("selected")?"deselect":"select"}},{name:"togglestatus:unread",rename:function(e){return(0,d.aS)(e,"unread")}},{name:"togglestatus:flagged",rename:function(e){return(0,d.aS)(e,"flagged")}}]})({name:"list-letter-common",rootClassName:"llc",template:l(),immutable:!0,isolate:!0,performanceTrace:!0,blocks:{delimeter:g.Z,"read-status":Z.Z,avatar:T,badge:A.Z,correspondent:L,"flag-status":D,"schedule-status":G.Z,subject:j.Z,snippet:q.Z,"attach-status":v.Z,folder:M.Z,"payment-die":F.Z,"payment-button":x.Z,"preview-attaches":H.Z,order:N.Z,stub:B.Z,unsubscribe:W.Z,"payment-universal-die":U.Z},defaults:{"disable-letter-item-folder":r.DISABLE_LETTER_ITEM_FOLDER,selected:!1,"disable-subject":!1,search:!1,indent:!1,messagesAttaches:null,fetchAttaches:!1,"layout-mode":"2pane",isThreadWithReliableMark:r.THREAD_WITH_RELIABLE_MARK,"enable-tags":r.ENABLE_TAGS},notVisualAttributes:{"list-index":!0},mods:{letterDate:o.Zm,scheduleDate:o.ye},constructor:function(){i().Block.apply(this,arguments),this.meta=this.get("model").getPaymentMeta()},didMount:function(){this.handleIntersectViewport(),(0,u.u)(this.refs.title,"ll-cmn")},didUpdate:function(){(0,u.u)(this.refs.title,"ll-cmn")},getAttachesPreviewCondition:function(){return!(this.get("fetchAttaches")&&!this.get("messagesAttaches"))&&"none"===S.OY.call(this)},getSubject:y.kB,getImageSrc:y.Q4,isProbablyPhishing:y.R5,isCorrespondentDangerous:y.if,getCorrespondent:y.dy,getCorrespondentTooltip:y.Mg,getDateTooltip:y.lB,getCounter:y.g,getCategory:y.n3,getAllAttaches:h.Ef,getSearchAttaches:h.hj,getAttaches:m.UN,getAttachesModes:p.O,isImportant:y.RD,hasBadge:y.Ko,getSnippetValue:y.dP,getPaymentDieDisplayMode:S.OY,shouldShowUniversalPaymentDie:S.Ml,shouldHideTransactionCategory:S.Wv,showOrder:P.D,getTransactionMetadata:P.S,rootQaId:y.oV,letterDate:o.Zm,getUnsubscribeSender:y.V_,handleIntersectViewport:y.a0,checkOfficialGreen:c.x9,checkImportantReliable:c.JM})))},37587:function(e,t,n){"use strict";n.d(t,{S:function(){return i},D:function(){return o}});var r=n(19008),a=n(21211);function i(e,t){if(void 0===e)e=this.get("model");if(void 0===t)t=this.get("search");if(!t&&e){var n=e.get("transaction_metadata");return n?n.getAttributes():null}}function o(e,t){var n,i;if(!t||!e)return!1;var o=null===(i=null===(n=(0,r.WE)(e))||void 0===n?void 0:n[0])||void 0===i?void 0:i.email;if(!a.TRANSACTION_HEADER||"string"!=typeof o)return!1;var s=Object.values(a.TRANSACTION_HEADER).find((function(e){return e.shops.some((function(e){return new RegExp(e).test(o)}))}));return a.LIST_LETTER_ORDER&&s&&!!(t&&t.item_list&&t.item_list.length)}},88488:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(17720),s=n.n(o),l=n(98631),c=n(4183),d=n(30698),u=n(90065),f=n(72727),m=n(33506),h=n(55540),p=n(78267),g=n(93286),v=n(57045),_=n(11726),b=n(83260),E=function(){return(E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.Z=i().Block.extend({name:"list-letter-payment-button",rootClassName:"ll-pb",template:s(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{},defaults:{},mods:{},constructor:function(){i().Block.apply(this,arguments),this.onPostMessage=this.onPostMessage.bind(this)},didMount:function(){var e=this.get("model").id;if(this.is("standalone")&&!_.dj.hasOwnProperty(e)){_.dj[e]="";var t=this.get("model").getPaymentMeta(),n=t.skin,r=t.merchant_id;(0,g.ZP)({type:"ll-pd-show-".concat(n),dwh:{uidl:e,displayMode:"compact",layoutMode:this.get("layout-mode"),ponyMode:this.is("pony-mode"),merchantId:r}})}},getTitle:function(){var e=this.get("model").getPaymentMeta();switch(e.status){case m.bG.awaiting:return i18n("Идёт оплата");case m.bG.success:return i18n("Оплачено")}switch(e.skin){case _.RL.SIMPLE:return i18n("Помочь");case _.RL.MOBILES_PAYMENT:return i18n("Пополнить");case _.RL.GIBDD:var t=e.date_deadline_discount,n=e.amount,r=e.amount_with_discount,a=(0,b.isNumber)(t)&&!(0,_.Bw)(t)&&(0,b.isPositiveNumber)(r);return i18n("Оплатить {amount} ₽",{amount:(a?r:n).replace(".",",")});default:if(!e.amount)return i18n("Оплатить");else return i18n("Оплатить {amount} ₽",{amount:e.amount.replace(".",",")})}},onPostMessage:function(e){var t=e.details,n=t.message,r=t.layer;if("iframeClose"===n.m_type)r.broadcast("layer:close");var a=this.get("model"),i=a.getPaymentMeta();if(i.skin===_.RL.GIBDD){if(n.type===m.oK.PAYMENT_IN_PROGRESS&&"loading"===n.status)v.ZP.set("fines_shapshot",null);if(n.type===m.oK.FINISH_GROUP_FINE_PAY)(0,c.dataSourceDispatchUpdateAll)()}if(n.type===m.oK.CHANGE_PAYMENT_STATUS)a.setPaymentMeta(E(E({},i),{status:n.status})),(0,g.ZP)({type:"ll-pb-status-change-".concat(i.skin),dwh:{uidl:this.get("model").id}})},handleClick:function(e){var t=this.get("model").getPaymentMeta(),n=t.skin,a=t.payment_url,i=t.status,o=t.merchant_id;if(![m.bG.awaiting,m.bG.success].includes(i)){e.preventDefault();var s=this.get("model").id;switch(n){case _.RL.MONETA:var l=r.LAYER_IFRAME_PARAMS[_.RL.MONETA]||{},c=this._modifyPaymentUrl(a);p.default.open("moneta",E({url:c},l),{dimmer:!0,from:"list"});break;case _.RL.MOS_RU:(0,f.default)(a);break;default:var d=n===_.RL.GIBDD?"gibdd_group":n;p.default.openIframeLayer({paramsKey:d,additionalParams:{url:this._modifyPaymentUrl(a)},factoryParams:{"close-on-esc":!0},onPostMessage:this.onPostMessage})}var u=n===_.RL.GIBDD?"_gd-exp":"";(0,g.ZP)({type:"ll-pb-click-".concat(n).concat(u),dwh:{uidl:s,displayMode:this.is("standalone")?"compact":"full",layoutMode:this.get("layout-mode"),ponyMode:this.is("pony-mode"),merchantId:o}})}},getQaId:function(){var e=this.get("model").getPaymentMeta().status,t=this.is("standalone")?":standalone":"",n=e&&"error"!==e?":".concat(e):"";return"payment-button".concat(t).concat(n)},_modifyPaymentUrl:function(e){var t=(0,l.Z)(e,{from:"list",mp:"web"}).split("?"),n=t[0],r=t[1],a="",i="die-list";if(this.get("model").getPaymentMeta().skin===_.RL.GIBDD)a=(0,d.Z)("gibdd"),i="die-list_gd-exp";var o=E(E({},(0,h.Z)(r)),{from:i,mp:"web",ftrs:a});return"".concat(n,"?").concat((0,u.Z)(o))}})},48597:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(18440),a=n.n(r),i=n(88431),o=n.n(i),s=n(93286),l=n(14871),c=n.n(l),d=n(72727),u=n(33506),f=n(88695),m=n(78267),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},p=a().Block.extend({name:"list-letter-payment-universal-button",rootClassName:"ll-pub",template:c(),events:{"payment-button:click":"onClick"},constructor:function(){a().Block.apply(this,arguments),this.onPostMessage=this.onPostMessage.bind(this)},getTitle:function(){var e,t,n,r,a=null===(e=this.get("model"))||void 0===e?void 0:e.getPaymentMeta();if(!a)return"";var i=a.status,o=a.amount,s=a.buttons,l=a.status_texts,c=null==l?void 0:l[i];switch(i){case u.bG.awaiting:return c||i18n("Идёт оплата");case u.bG.success:return c||i18n("Оплачено")}var d=null===(t=null==s?void 0:s.payment)||void 0===t?void 0:t.text_on_list;if(d)return d;var f=null!==(r=null===(n=null==s?void 0:s.payment)||void 0===n?void 0:n.text)&&void 0!==r?r:i18n("Оплатить");return"".concat(f).concat(o?" ".concat(o," ₽"):"")},shouldShowButton:function(){var e=this.get("model").getPaymentMeta();if(!e)return!0;else return!e.status||e.status===u.bG.error},onPostMessage:function(e){var t=e.details,n=t.message,r=t.layer,a=this.get("model"),i=a.getPaymentMeta();if("object"==typeof i&&"object"==typeof n){var o=i.skin,l=i.merchant_id,c=i.merchant_type,d=i.amount,f=i.version,m=n.status,p=n.type;if("iframeClose"===n.m_type)r.broadcast("layer:close");if(p===u.oK.CHANGE_PAYMENT_STATUS)return a.setPaymentMeta(h(h({},i),{status:m})),(0,s.ZP)({type:"ll-pub_stts_chng_".concat(l,"_").concat(m),dwh:{uidl:a.id,skin:o,amount:d,status:m,merchant_id:l,merchant_type:c,version:f}});else return}},onClick:function(e){var t=this.get("model"),n=t.getPaymentMeta();if("object"==typeof n){var r=n.skin,a=n.amount,i=n.status,o=n.buttons.payment,l=o.url,c=o.iframe_size,f=n.version,p=n.merchant_id,g=n.merchant_type;if(i!==u.bG.awaiting&&i!==u.bG.success)if(e.preventDefault(),c){var v=c.split("x"),_=v[0],b=v[1],E={uidl:t.id,skin:r,amount:a,status:i,merchant_id:p,merchant_type:g,version:f},y={url:this._modifyPaymentUrl(l,f),width:_,height:b};if(g===u.S0.MONETA)m.default.open("moneta",h(h({},y),{"close-on-esc":!0,dwhMetrics:E}),{dimmer:!0});else m.default.openIframeLayer({additionalParams:y,factoryParams:{"close-on-esc":!0},onPostMessage:this.onPostMessage});(0,s.ZP)({type:"ll-pub_clck_".concat(p),dwh:E})}else(0,d.default)(l)}},_modifyPaymentUrl:function(e,t){return(0,f.Z)(e,{from:"die_oct_ll_".concat(t),mp:"web"})},getTestId:function(){var e,t,n=null===(t=null===(e=this.get("model"))||void 0===e?void 0:e.getPaymentMeta())||void 0===t?void 0:t.status;return"ll-pay-uni-btn:".concat(null!=n?n:"btn")}}),g=a().Block.extend({name:"list-letter-payment-universal-die",template:o(),rootClassName:"ll-pud",constructor:function(){a().Block.apply(this,arguments),this.meta=this.get("model").getPaymentMeta()},blocks:{"payment-button":p},didMount:function(){var e=this.meta,t=e.skin,n=e.merchant_id,r=e.merchant_type,a=e.amount,i=e.status,o=e.version,l=this.get("model").id;(0,s.ZP)({type:"ll-pud_shw_".concat(n),dwh:{uidl:l,skin:t,amount:a,status:i,merchant_id:n,merchant_type:r,version:o}})},getDescription:function(){var e,t,n,r,a,i=null===(n=null===(t=null===(e=this.meta)||void 0===e?void 0:e.description)||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.value})))||void 0===n?void 0:n.filter((function(e){return e})),o=null==i?void 0:i.join(", "),s=null===(r=null==this?void 0:this.meta)||void 0===r?void 0:r.header;return null!==(a=o||s)&&void 0!==a?a:""},getTestId:function(){var e,t=null===(e=this.meta)||void 0===e?void 0:e.merchant_type;return"ll-pay-uni-die:".concat(t)}})},57986:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(48317),s=n.n(o),l=n(25403),c=n(61799),d=n(93286),u=n(53263);t.Z=i().Block.extend((0,c.Z)({events:[{name:"search:set-in-excluded-folders",rename:"search:excluded"}]})({name:"list-letter-preview-action",template:s(),defaults:{"pony-mode":!1},blocks:{delimeter:u.Z},getFormattedSuggestQueries:l.I,didMount:function(){var e=this.get("model").get("type");if("suggestHeader"===e||"suggestSeparator"===e)(0,d.ZP)("suggest_search_query_show")},shouldSuggestSearchInExcludedFolders:function(){return!r.FORBID_EXCLUDED_FOLDERS_SEARCH}}))},62161:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(64800),o=n.n(i),s=n(68275),l=n(79622),c=n(12199);t.Z=a().Block.extend({name:"list-letter-preview-attaches-item",rootClassName:"ll-sai",template:o(),blocks:{ico:c.Z,highlighter:l.Z},defaults:{"layout-mode":"2pane",vertical:!1,"last-attach":!1},events:{click:"onAttachClick"},getAttachmentIcon:s.EY,onAttachClick:function(e){e.preventDefault();var t=this.get("model"),n=this.get("attach"),r=n.partId,a=(0,s.zM)(r),i=t.get("expand")||t.get("id");this.broadcast("attachments:openviewer",{message:t,attachment:n,attachmentId:a,msgId:i,from:"ll-prvw-itm"})},getQaId:function(){var e=this.get("attach").formName;return"ll-preview-attaches-item:".concat(null==e?void 0:e.value)}})},14334:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(2694),o=n.n(i),s=n(68275),l=a().Block.extend({name:"list-letter-preview-attaches-more",rootClassName:"ll-sam",template:o(),attachmentDropdownChange:function(e){this.set("dropdown-open",e)},getAttachmentItems:function(){var e=this;return this.get("items").reduce((function(t,n){var r,a;return t.concat({title:null===(r=n.formName)||void 0===r?void 0:r.value,extension:(0,s.a_)(null===(a=n.formName)||void 0===a?void 0:a.value),onClick:function(t){t.preventDefault();var r=e.get("model"),a=n.partId,i=(0,s.zM)(a),o=r.get("expand")||r.get("id");if(!(i.split(";").length>2))e.broadcast("attachments:openviewer",{message:r,attachment:n,attachmentId:i,msgId:o,from:"ll-prvw-more"});else e.broadcast("moreinvalid")}})}),[])}});l.resetAttachmentDropdown=function(){l.getInstances().forEach((function(e){if(e.get("dropdown-open"))e.set("dropdown-open",!1)}))},t.Z=l},427:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(68818),o=n.n(i),s=n(68275),l=n(62161),c=n(14334);t.Z=a().Block.extend({name:"list-letter-preview-attaches",rootClassName:"ll-sa",template:o(),blocks:{"preview-attaches-item":l.Z,"preview-attaches-more":c.Z},defaults:{"layout-mode":"2pane"},getAttachmentExtension:s.a_})},42350:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(70958),s=n.n(o);t.Z=i().Block.extend({name:"list-letter-preview-stub",rootClassName:"ll-preview-stub",template:s(),getArrayOfAttachesStubs:function(){for(var e=this.get("attachesCount"),t=this.get("isCompact"),n=[],a=r.LETTER_PREVIEWS_CONFIG["stubs-count"],i=t?a-1:a,o=Math.min(i,e),s=0;s<o;s++)n.push({type:"normal",key:s});if(e>i)n.push({type:"small",key:n.length});return n}})},54415:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(97216),o=n.n(i),s=n(55426);t.Z=a().Block.extend({name:"list-letter-spinner",template:o(),immutable:!0,defaults:{hidden:!0},attrChanged:{hidden:function(e){var t;null===(t=this.get("model"))||void 0===t||t.set("visible",!e),this.broadcast("state:toggle")}},blocks:{spinner:s.Z}})},30240:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(72967),o=n.n(i),s=n(61799),l=n(93286);t.Z=a().Block.extend((0,s.Z)({events:[]})({name:"list-letter-unsubscribe",rootClassName:"ll-unsubscribe",template:o(),defaults:{unsubscribeSender:null},events:{"unsubscribe:ll:click":"onClick"},blocks:{},didMount:function(){var e;(0,l.ZP)({type:"unsub_unread_newsl_ll_show",dwh:{sender:null===(e=this.get("unsubscribeSender"))||void 0===e?void 0:e.email}})},onClick:function(e){var t=e.details.sender;this.broadcast("unsubscribe:from:ll",{sender:t}),(0,l.ZP)({type:"unsub_unread_newsl_ll_clck",dwh:{sender:t.email}})}}))},87401:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r,a=n(18440),i=n.n(a),o=n(79737),s=n.n(o),l=n(94993),c=n(12199),d=n(56302),u=n(95470);!function(e){e.PIN="welcomeblock:pin",e.SELECT_GEO="welcomeblock:selectgeo",e.SNOOZE="welcomeblock:snooze"}(r||(r={})),t.Z=i().Block.extend({name:"list-letter-welcome-dropdown-actions",rootClassName:"wlcm-d-a",template:s(),immutable:!0,isolate:!0,isolateEvents:!0,blocks:{dropdown:l.Z,ico:c.Z,list:d.Z,"list-item":u.Z},defaults:{compact:!1,pin:!1,selectGeo:!0,snooze:!0}})},82997:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r,a=n(18440),i=n.n(a),o=n(59172),s=n.n(o),l=n(12199);!function(e){e.SuggestionClick="suggestion:click"}(r||(r={})),t.Z=i().Block.extend({name:"list-letter-welcome-suggestions",template:s(),immutable:!0,defaults:{items:[],events:r,ponyMode:!1},blocks:{ico:l.Z},events:{}})},35056:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r,a=n(21211),i=n(18440),o=n.n(i),s=n(17723),l=n.n(s),c=n(61799),d=n(87401),u=n(82997),f=n(37030),m={night:i18n("Доброй ночи"),morning:i18n("Доброе утро"),day:i18n("Добрый день"),evening:i18n("Добрый вечер")};!function(e){e.MOUNT="listletterwelcome:mount",e.SHOW="listletterwelcome:show",e.HIDE="listletterwelcome:hide"}(r||(r={}));var h=!1,p=!1;t.Z=o().Block.extend((0,c.Z)({id:"ll-wlcm",events:["weather","logo"],explicit:!0})({name:"list-letter-welcome",template:l(),immutable:!0,defaults:{expanded:!1,type:"2pane",ponyMode:!1,marusiaLogo:a.MARUSIA_LOGO,marusiaUrl:a.MARUSIA_URL,weatherUrl:a.WEATHER_URL,skillsEnabled:!1},blocks:{"list-letter-welcome-dropdown-actions":d.Z,"list-letter-welcome-suggestions":u.Z},events:{logo:"onLogoClick",expand:"onExpandClick"},attrChanged:{model:function(e,t){null==t||t.off("change",this.onModelChange),e.on("change",this.onModelChange)}},constructor:function(){o().Block.apply(this,arguments),this.onModelChange=this.onModelChange.bind(this)},didMount:function(){this.broadcast(r.MOUNT)},didUpdate:function(){var e=this.get("model");if(null==e?void 0:e.is("visible")){if(!h)h=!0,this.radar("show")}else if(!p)p=!0,this.radar("hide")},didUnmount:function(){this.broadcast(r.HIDE)},onModelChange:function(e){var t;if(null===(t=e.changed)||void 0===t?void 0:t.hasOwnProperty("hidden"))this.broadcast(e.changed.hidden?r.HIDE:r.SHOW)},onLogoClick:function(){},onExpandClick:function(){this.set("expanded",!this.get("expanded"))},getImage:function(){return'background-image: url("'.concat(this.get("marusiaLogo"),'");')},getUsername:function(){var e=this.get("current-user");if(!e)return"";else return e.get("name.first")},getHeader:function(){var e=this.getUsername(),t=this.get("model");if(!(null==t?void 0:t.is("withGreeting")))return this.getDate("3pane"===this.get("type"));if(e)return i18n("{hello}, {username}",{hello:this.getGreeting(),username:e});else return i18n("Доброе утро")},getGreeting:function(){var e=(new Date).getHours();switch(!0){case e<6:return m.night;case e<12:return m.morning;case e<18:return m.day;default:return m.evening}},getDate:function(e){return(0,f.kC)((0,f.p6)(new Date,[["weekday","long"],["day","numeric"],["month","long"]],{literalAfter:{weekday:", ",day:" "}})).replace(/([^\d\s]{3})[^\d\s]+$/,e?"$1":"$&")},getWeatherData:function(){var e=this.get("model");return null==e?void 0:e.get("weatherData")},getSuggestions:function(){return[{skill:"music",icon:"https://img.imgsmail.ru/static.promo/octavius/welcome/ic_music.svg",title:"Музыка",text:"Поставь что-нибудь весёлое"},{skill:"answers",icon:"https://img.imgsmail.ru/static.promo/octavius/welcome/ic_fact.svg",title:"Ответы",text:"Где находится Эльбрус?"},{skill:"calc",icon:"https://img.imgsmail.ru/static.promo/octavius/welcome/ic_calculator.svg",title:"Калькулятор",text:"Сложи числа"},{skill:"timer",icon:"https://img.imgsmail.ru/static.promo/octavius/welcome/ic_timer.svg",title:"Таймер",text:"Установи таймер"}]}}))},64391:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(48218),s=n.n(o),l=n(66005),c=n(98957),d=n(4872),u=n.n(d),f=n(39939);t.Z=i().Block.extend({name:"list-nested-moveto-folder",template:s(),events:{},defaults:{model:null,folders:null,selection:!1,"allow-new-folder":!1,"allow-move":!0},folder2icoMap:l.ZP,getFolderIco:l.qc,hasSharedFolders:!1,attrChanged:{models:function(){var e=this.get("folders");this.hasSharedFolders=u().all.hasSharedTake.call(e)}},didMount:function(){var e=this;if(this.is("allow-move"))Promise.resolve().then((function(){var t=[n(95437)];(function(t){t.default.register(e)}).apply(null,t)})).catch(n.oe)},getMessagesFolders:function(){var e=this.get("model");if(e&&!Array.isArray(e)){var t=e.get("folder");if(e.get("flags.metathread"))t=e.get("metathread_data.folder");return[u().get(t)]}return this.get("lettersFoldersIds").map((function(e){return u().get(e)}))},showFolder:function(e){var t=this.getMessagesFolders()[0];if(null==t?void 0:t.isShareTake()){if(!e.isShareTake())return!1;if(e.get("owner").email!==t.get("owner").email)return!1;else return!0}if(e.isShareTake())return!1;else return!0},isDisabled:function(e){var t=this;if(e.isShareTake()&&e.isRoot())return!0;if(!e.checkGrant(u().SHARE_GRANTS.move))return!0;else return this.getMessagesFolders().some((function(n){if(e.isSpam()&&(!n.checkGrant(u().SHARE_GRANTS.move_to_spam)||t.get("selectedMetathreads")))return!0;if(e.isArchive()&&!n.checkGrant(u().SHARE_GRANTS.move_to_archive))return!0;if(e.isTrashLike()&&!n.checkGrant(u().SHARE_GRANTS.remove))return!0;else return e.id==n.id}))},getFolderLevel:function(e){if(!this.hasSharedFolders)return e.getChildLevel();if(this.isMyFoldersContainer(e))return 0;if(e.isShareTake())return e.getChildLevel();else return e.getChildLevel()+1},getLimitedFolderLevel:function(e){var t=this.getFolderLevel(e);return Math.min(r.FOLDER_MAX_CHILD_LEVEL_UI,t)},getAvatar:function(e,t){return(0,c.Z)({email:e,name:t,size:45})},getMyFoldersContainerAvatar:function(){var e=f.default.user,t=e.getEmail(),n=e.get("nick");if(!t||!n)return null;else return this.getAvatar(t,n)},getSharedTakeDirAvatar:function(e){var t=e.get("owner"),n=t.email,r=t.name;if(!n||!r)return null;else return this.getAvatar(n,r)},showMyFoldersContainer:function(){var e=this.getMessagesFolders()[0];return this.hasSharedFolders&&!(null==e?void 0:e.isShareTake())},isMyFoldersContainer:function(e){var t=e.get("id");return this.getMyFoldersContainerId()===t},getMyFoldersContainerId:function(){return r.NAV_MY_FOLDERS_CONTAINER_ID},getMyFoldersContainerName:function(){return i18n("Мои папки")},disableCreateFolder:function(){var e=this.getMessagesFolders()[0];if(!e.isShareTake())return!1;else return u().all.toArray().filter((function(t){var n,r;return(null===(n=e.get("owner"))||void 0===n?void 0:n.email)===(null===(r=t.get("owner"))||void 0===r?void 0:r.email)})).every((function(e){return!(e.canAddSubfolder()&&e.checkGrant(u().SHARE_GRANTS.move))}))}})},19413:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(33833),o=n.n(i),s=n(61799),l=n(56302),c=n(95470),d=n(4685);t.Z=a().Block.extend((0,s.Z)({id:"filter",explicit:!0})({name:"list-nested-sorting",template:o(),events:{"list:item-click":"onSortingClick"},blocks:{list:l.Z,"list-item":c.Z},defaults:{sortingType:"D"},sortings:d.$P,onSortingClick:function(e){var t=e.details,n="sorting_".concat(t.type,"_click");this.radar(n),this.broadcast("sortingclick",t.type)},didMount:function(){var e=this;Promise.resolve().then((function(){var t=[n(14198)];(function(t){t.default.register(e)}).apply(null,t)})).catch(n.oe)}}))},4685:function(e,t,n){"use strict";var r,a;n.d(t,{sY:function(){return u},ZP:function(){return h},$P:function(){return p}});var i="D",o="d",s="f",l="F",c="s",d="S",u=function(e){return e===i},f=((r={})[i]=i18n("Сначала новые"),r[o]=i18n("Сначала старые"),r[s]=i18n("Автор: от А до Я"),r[l]=i18n("Автор: от Я до А"),r[c]=i18n("Тема: от А до Я"),r[d]=i18n("Тема: от Я до А"),r),m=((a={})[i]=i18n("Сначала новые"),a[o]=i18n("Сначала старые"),a[s]=i18n("Автор: А - Я"),a[l]=i18n("Автор: Я - А"),a[c]=i18n("Тема: А - Я"),a[d]=i18n("Тема: Я - А"),a);function h(e){this.type=e||i,this.text=f[this.type],this.controlText=m[this.type]}var p=[new h(i),new h(o),new h(s),new h(l),new h(c),new h(d)]},52950:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var r=n(21211),a=n(18440),i=n.n(a),o=n(6073),s=n.n(o),l=n(33440),c=n(93286),d=n(45114),u={name:"marusia-read-letter-button",rootClassName:"marusia-rl-button",template:s(),blocks:{button2:d.Z},events:{"marusia:rl:button:click":"onClick"},didMount:function(){if(this.isMounted())this.radarSend("show")},onClick:function(e){var t=e.details.model;e.originalEvent.stopImmediatePropagation(),this.broadcast("marusia:read:letter:click",{model:t}),this.radarSend("click",t)},radarSend:function(e,t){if(void 0===t)t=this.get("model");var n=(0,l.getCategoriesFromMeta)(t);(0,c.ZP)({type:"marusia-rl-".concat(e,"_").concat(this.get("radar-prefix")),dwh:{categories:n||[]}})},getLogoSrc:function(){return"".concat(r.PACKAGES_URL,"/static.promo/marusia/marusia-shadow.png")}};t.Z=i().Block.extend(u)},59921:function(e,t,n){"use strict";var r=n(54498),a=n(21211),i=n(18440),o=n.n(i),s=n(38791),l=n.n(s),c=n(4183),d=n(13624),u=n.n(d),f=n(61799),m=n(53263),h=n(72656);t.Z=o().Block.extend((0,f.Z)({id:"metathread-footer",events:[{name:"more-link-click",rename:function(e){return"load-more_"+e.getMetathreadId()}},{name:"folder-link-click",rename:function(e){return"folder_"+e.getMetathreadId()}}]})({name:"metathread-footer",template:l(),blocks:{delimeter:m.Z,link:h.Z},defaults:{model:null,ponymode:!1,router:null,"short-text":!1},events:{"more-link-click":"handleLoadMoreClick"},constructor:function(){o().Block.apply(this,arguments),this.renderFromModel=this.renderFromModel.bind(this)},renderFromModel:function(){this.render()},didMount:function(){var e;null===(e=this.get("model").get("metathread"))||void 0===e||e.on("change",this.renderFromModel)},didUnmount:function(){var e;null===(e=this.get("model").get("metathread"))||void 0===e||e.off("change",this.renderFromModel)},handleLoadMoreClick:function(){(0,c.default)({type:r.LOAD_MORE_METATHREAD,model:this.get("model").get("metathread"),priority:u().Loader.PRIORITY_LOW,uid:void 0})},canLoadMore:function(){var e=this.get("model").get("metathread");if(e.isLimitReached())return!1;var t=e.getLimit();return Math.ceil(t/a.METATHREAD_LIMIT)<a.METATHREAD_LOAD_MORE_COUNT_MAX},getLinkHref:function(){return this.get("router").getUrl("#letters",{folder:this.getMetathreadId()})},getGoToFolderText:function(){var e=i18n("Перейти в папку");if(this.is("short-text"))return e;var t=this.get("model").get("metathread").getMetathreadFolderName();return e+" «".concat(t,"»")},getMetathreadId:function(){return this.get("model").get("metathread").getMetathreadFolder()}}))},68869:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(11832),s=n.n(o);t.Z=i().Block.extend({name:"metathread-title",rootClassName:"mt-t",template:s(),immutable:!0,isolate:!0,defaults:{"pony-mode":!1,title:"",type:"social",unread:!1,"disable-metathread-caps":r.DISABLE_METATHREAD_CAPS}})},12043:function(e,t,n){"use strict";n.d(t,{G:function(){return T}});var r=n(60033),a=n.n(r),i=n(54498),o=n(21211),s=n(18440),l=n.n(s),c=n(14142),d=n.n(c),u=n(54844),f=n(4183),m=n(547),h=n(4872),p=n.n(h),g=n(61799),v=n(96384),_=n(53263),b=n(94716),E=n(20450),y=n(16730),T={name:"metathread",template:d(),performanceTrace:"track",isolateEvents:!1,mods:{},blocks:{delimeter:_.Z,"metathread-head-common":b.Z,"metathread-head-compact":E.Z,"metathread-head-compact-expanded":y.Z},defaults:{compact:!1,expanded:!1,first:!1,model:null,ponymode:!1,selected:!1,"short-dropdown":!1,"short-text":!1,sticky:!1,redirectExp:o.METATHREAD_REDIRECT},events:{"click:metathread-item":"onMetathreadItemClick",scrollintoself:"scrollIntoSelf"},onMetathreadItemClick:function(e){var t,n,r,s=this;if(!e.isDefaultPrevented()&&!e.isPropagationStopped()){var l=this.get("model"),c=null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.getMetathreadFolder();if(!l.isExpanded()&&null!=c)a().send("letter-metathread-open",{dwh:{folder:l.getMetathreadFolderName(),folderID:c,ponymode:(null===(n=this.props)||void 0===n?void 0:n.compact)||(null===(r=this.attrs)||void 0===r?void 0:r.compact)?"3pane":"2pane"}});if(!o.METATHREAD_REDIRECT)if(!this.is("sticky"))(0,f.default)({type:i.TOGGLE_METATHREAD,state:!l.isExpanded(),uid:void 0,model:l}).then((function(){var e,t,n=!l.isExpanded()?"collapse":"expanded";a().send("letter-metathread-".concat(n),{dwh:{folder:l.getMetathreadFolderName(),folderID:c,ponymode:(null===(e=s.props)||void 0===e?void 0:e.compact)||(null===(t=s.attrs)||void 0===t?void 0:t.compact)?"3pane":"2pane"}})})),this.broadcast("expand:toggle");else this.scrollIntoSelf();else this.onMetathreadItemClickRedirect(e)}},onMetathreadItemClickRedirect:function(e){var t,n=this,r=null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.getMetathreadFolder();a().send("metathread-redirect",{dwh:{folder:r}});var i=e.originalEvent;if(!i||!(0,m.c)(i)){var o=this.get("router");if(o)e.preventDefault(),p().findOne(r).then((function(e){(e.isSecureOpen()?Promise.resolve(!0):(0,v.Z)(e)).then((function(e){if(e)o.nav(n.getUrl()),n.broadcast("navigate:with:back:to:parent",{id:"#letters",params:{folder:r}})}))}))}},getUrl:function(){var e=this.get("router");if(!e)return null;var t=this.get("model").getMetathreadFolder();return e.getUrl("#letters",{folder:t},o.METATHREAD_BACK_TO_INBOX&&{"to-parent-button":"1"})},scrollIntoSelf:function(){this.broadcast("scrollintomodel",{index:this.get("index")})},getMetathreadId:function(){return this.get("model").getMetathreadFolder()},isStickyEnabled:function(){return!o.IS_NATIVE_STICKY_DISABLED&&u.Z.capabilities["sticky-support"]}};t.Z=l().Block.extend((0,g.Z)({events:[{name:"click:metathreadavatar",rename:function(e){return(e.is("selected")?"deselect_":"select_")+e.getMetathreadId()}},{name:"click:cleanmaster",rename:function(e){return"contextmenu_cleanmaster_".concat(e.getMetathreadId())}},{name:"click:metathread-link",rename:function(e){return"contextmenu_folder_".concat(e.getMetathreadId())}},{name:"click:metathread-item",rename:function(e){return(e.is("compact")?"3pane":"2pane")+"_"+(e.get("model").isExpanded()?"collapse":"expand")+"_"+e.getMetathreadId()}},{name:"scrollintomodel",rename:"scroll-to-sticky"}]})(T))},58730:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(81596),s=n.n(o),l=n(72727),c=n(45114),d=n(37874),u=n(15045);t.Z=i().Block.extend({name:"mobile-sidebar",template:s(),blocks:{"nav-folders":d.Z,button2:c.Z,scrollable:u.Z},events:{"folder:click":"onFolderClick","reload:click":"onReloadClick","contacts:open":"onContactsClick"},defaults:{open:!1,"folder-active":void 0,"hide-settings-button":r.HIDE_SETTINGS_BUTTON,"show-reload-button":r.SHOW_RELOAD_BUTTON,showUnsubscribeButton:r.SHOW_SIDEBAR_UNSUBSCRIBE_BUTTON_MOBILE},attrChanged:{"folder-active":function(){this.broadcast("mobilesidebar:close")}},onFolderClick:function(e){if(e.details.id==this.get("folder-active"))this.broadcast("mobilesidebar:close")},onReloadClick:function(){location.reload()},onContactsClick:function(){(0,l.default)(r.MOBILE_ADDRESSBOOK_URL)},isOpen:function(){return this.is("open")}})},37874:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var r=n(60033),a=n.n(r),i=n(20799),o=n(82010),s=n(21211),l=n(18440),c=n.n(l),d=n(12386),u=n(37803),f=n(71745),m=n(25918),h=n.n(m),p=n(54844),g=n(76864),v=n(66005),_=n(98957),b=n(547),E=n(4872),y=n.n(E),T=n(39939),A=n(66225),S=n(61799),O=n(93286),C=n(96384),w=n(77917),L=n(57045),k=n(86450),I=n(98039),R=n(45114),D=n(12199),M=n(60532),P=n.n(M),N=c().Block.extend({name:"nav",template:P(),defaults:{"hover-support":p.Z.capabilities["hover-support"]},blocks:{ico:D.Z},getMyFoldersItem:function(){var e=this.get("models");if(!y().all.hasSharedTake.call(e)&&!this.get("has-parent-private-folders"))return null;var t=this.get("has-parent-private-folders")?i18n("Детские папки"):i18n("Мои папки");if(this.myFoldersItem&&this.myFoldersItem.get("name")===t)return this.myFoldersItem;else return this.myFoldersItem=new(y())((0,g.iD)({type:s.NAV_MY_FOLDERS_CONTAINER_ID,name:t})),this.myFoldersItem},getParentPrivateFoldersItem:function(){if(!this.get("has-parent-private-folders"))return null;if(this.parentPrivateFoldersItem)return this.parentPrivateFoldersItem;else return this.parentPrivateFoldersItem=new(y())((0,g.iD)({type:s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID,name:i18n("Скрытые папки")})),this.parentPrivateFoldersItem},getParentPrivateFolders:function(e){return e.filter((function(e){return(0,g.Kf)(e)}))},getCommonFolders:function(e){return e.filter((function(e){return!(0,g.Kf)(e)}))}}),x=n(54213),F=n(51474),U=n(90557),H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},B=L.ZP.get("folders:expanded")||{},Z=p.Z.capabilities["touch-support"],G=N.extend((0,S.Z)({explicit:"radar"})({name:"nav-folders",template:h(),isolateEvents:!1,blocks:{ico:D.Z,nav:N,button2:R.Z,badge:I.Z,"new-folder-btn":x.Z,avatar:k.Z,"react-async":F.Z},folder2shortcutMap:{inbox:"g,i",drafts:"g,d",sent:"g,s"},displayedShortcut:["parental_control","inbox","sent","drafts","outbox","archive","spam","trash","child_trash"],events:{foldertoggle:"onFolderClick",folderclick:"onFolderLinkClick",rightclick:"onRightClick"},defaults:{short:!1,active:null,"handle-drop":!1,router:null,"counters-off":!1,"with-clear":!1,mobile:s.TOUCH_MODE,"without-press-context-menu":!1,"read-only":!1,hasSharedFolders:!1,lastOfMyFoldersId:!1,"has-parent-private-folders":!1,"has-virtual-containers":!1,"parent-private-folders-container-id":s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID,"show-unsubscribe-button":!1},attrChanged:{active:function(e){var t=y().all.get(e);if(t){var n=t.get("parent");if(this.isFolderInMyFoldersContainer(t))n=s.NAV_MY_FOLDERS_CONTAINER_ID;else if((0,g.Kf)(t))n=s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID;if(-1!=n&&!B[n])this.toggleFolderExpand(n)}},models:function(){var e=this.get("models"),t=y().all.hasSharedTake.call(e)||(0,g.iw)(e);if(t||t!==this.get("has-virtual-containers")||(0,g.iw)(e)!==this.get("has-parent-private-folders"))this.set({"has-parent-private-folders":(0,g.iw)(e),"has-virtual-containers":t,lastOfMyFoldersId:this.getLastOfMyFoldersId()})}},didMount:function(){var e=this;if(this._dragExpandedFolders=[],this.highlight=null,Z)(0,U.dU)().then((function(t){if(e.isMounted()){var n=new t.Manager(e.el),r=new t.Press({time:500});n.add(r),n.on("press",(function(t){var n,r,a=t.target.closest("[data-folder-link-id]");if(a){var i=y().all.get(a.dataset.folderLinkId),o=H(H({},t),{originalEvent:t.srcEvent,details:i});if(null===(r=(n=e.attrs).onPress)||void 0===r||r.call(n,i),e.attrs["without-press-context-menu"])return;e.onRightClick(o)}}))}}))},$handleEvent:function(e){var t=this;if(c().Block.prototype.$handleEvent.call(this,e),this.mounted&&this.get("handle-drop")&&("$created"===e.type||"$mount"===e.type))this.el.dragHandleEvent=function(e){return t.dragHandleEvent(e)}},didUnmount:function(){this.el.dragHandleEvent=null},dragHandleEvent:function(e){var t=this,n=e.target,r=null;if(this.el){if("drop"===e.type){var a=y().all.get(this.highlight);a&&this.broadcast("drop",a)}else for(var i=w.default.lookup("nav__item");n!==document;){if("string"==typeof n.className&&n.className.includes(i)){var o=c().Block.get(n);r=o?o.get("model").id:null;break}n=n.parentNode}if(this.highlight!==r)this.highlight=r;switch(e.type){case"dragleave":case"drop":clearTimeout(this._dragFolderExpandTimer),this._lastFolderId=null,this._dragCollapseTimeout=setTimeout((function(){for(;t._dragExpandedFolders.length;)t.toggleFolderExpand(t._dragExpandedFolders.pop())}),600);break;case"dragenter":clearTimeout(this._dragCollapseTimeout);break;case"dragmove":if(r&&this._lastFolderId!==r)if(clearTimeout(this._dragFolderExpandTimer),this._lastFolderId=r,!this.isExpanded(r))this._dragFolderExpandTimer=setTimeout((function(){t.toggleFolderExpand(r),t._dragExpandedFolders.push(r)}),600)}if(this.get("short"))switch(e.type){case"dragenter":clearTimeout(this._onDragOverTimer),this._onDragOverTimer=setTimeout((function(){t.broadcast("drag:over")}),1e3);break;case"dragleave":case"drop":clearTimeout(this._onDragOverTimer),this.highlight=null}}},onFolderClick:function(e){var t=e.details.get("model").id;this.toggleFolderExpand(t)},toggleFolderExpand:function(e){var t=!0;if(B[e])B[e]=!1,t=!1;else B[e]=!0;L.ZP.set("folders:expanded",B),this.radar([t?"expand":"collapse"]),this.render()},isExpanded:function(e){if(void 0===B[e]){if(this.isMyFoldersContainerById(e)||this.isParentPrivateFoldersContainerById(e))return B[e]=!0,B[e];var t=y().all.get(e);if(t&&t.getChildLevel()!==t.getMaxChildLevel())B[e]=!t.get("security")}return B[e]||!1},isFolderParentsExpanded:function(e){if(!this.get("has-virtual-containers")&&e.isRoot())return!0;if(this.get("has-virtual-containers")){if(this.isFoldersContainer(e))return!0;if(e.isRoot())return this.isMyFoldersContainerExpanded()}var t=e.get("parent"),n=y().all.get(t),r=n.getChildLevel()>=Math.min(n.getMaxChildLevel(),s.FOLDER_MAX_CHILD_LEVEL_UI);return this.isExpanded(t)||r?this.isFolderParentsExpanded(n):!1},isFolderExpanded:function(e){if(this.is("touch-nav"))return!0;if(this.is("expand-all"))return!0;if(this.get("has-parent-private-folders")&&e.isRoot()&&(0,g.Kf)(e)&&!this.isParentPrivateFoldersContainer(e))return this.isExpanded(s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID)&&(!e.get("children")||this.isExpanded(e.id));if(this.isFolderInMyFoldersContainer(e))return this.isMyFoldersContainerExpanded()&&(!e.get("children")||this.isExpanded(e.id));if(e.isRoot()&&!e.get("children"))return!0;if(!this.isFolderParentsExpanded(e))return!1;if(e.getChildLevel()===e.getMaxChildLevel())return!0;if(!e.isParent())return!0;else return this.isExpanded(e.id)},getFolderUrl:function(e){if(this.attrs["read-only"])return"";var t=this.get("router"),n=e.get("id");if(e.isServiceShared())n=this.getFirstSubFolderId(n)||n;if(this.isMyFoldersContainerById(n))n=y().INBOX;var r=null;if(this.get("showBackToParentFolder")&&n==t.route.params.folder)r={"to-parent-button":1};return t&&t.getUrl("#letters",{folder:n},r)},onFolderLinkClick:function(e){var t,n,r=this,i=e.details.id,o=this.get("router");if(i!=y().SPAM||!s.SHOW_SPAM_WARNING_ALERT||o.route.params.folder===y().SPAM)null===(n=(t=this.attrs).onFolderClick)||void 0===n||n.call(t,y().all.get(i));if(!e.isDefaultPrevented()&&!this.attrs["read-only"]){if(this.get("has-virtual-containers")){var l=y().all.get(i),c=null==l?void 0:l.get("parent");switch(!0){case this.isMyFoldersContainerById(i):c=s.NAV_MY_FOLDERS_CONTAINER_ID,i=y().INBOX;break;case this.isParentPrivateFoldersContainerById(i):c=s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID,i=this.getFirstParentControlFolder();break;case null==l?void 0:l.isServiceShared():c=l.get("id"),i=this.getFirstSubFolderId(i)||i}if(!B[c])this.toggleFolderExpand(c)}var d=e.originalEvent;if(!d||!(0,b.c)(d))if(e.preventDefault(),o)return y().findOne(i).then((function(e){if(r.radar(e.get("type")),a().send("select_metathread_folder_navigate",{dwh:{category:i,name:e.get("name")}}),!e.isSecureOpen())(0,C.Z)(e).then((function(e){return e&&r.goToFolder(i)}));else r.goToFolder(i)})),!0}},goToFolder:function(e){if(this.isMounted()){var t=this.get("router"),n=null;if(this.get("showBackToParentFolder")&&e==t.route.params.folder)n={"to-parent-button":1};if(e==y().SPAM&&t.route.params.folder!==y().SPAM&&s.SHOW_SPAM_WARNING_ALERT)(0,i.Ll)(o.H.spamWarningAlert),a().send("open-spamWarningAlert-modal");else t&&t.go("#letters",{folder:e},n,{force:!0});var r=(0,d.R)(y().all.get(e));if(a().send("go_to_folder",{i:{id:e},dwh:{id:e,name:r,folderPos:y().all.indexOf(e),foldersQty:y().all.length}}),(0,O.ZP)({chain:["go","to","folder"],data:{folder:e}}),y().all.get(e).isShareTake())a().send("open_shared_folder")}},getMyFoldersContainerMessagesCount:function(){if(this.isMyFoldersContainerExpanded())return 0;else return y().all.reduce((function(e,t){if(t.isShareTake())return e;if(!t.isRoot())return e;if((0,g.Kf)(t))return e;else return e+(0,f._V)(t,!0)}),0)},getParentPrivateFoldersContainerMessagesCount:function(){if(this.isExpanded(s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID))return 0;else return y().all.reduce((function(e,t){if(!t.isRoot())return e;if(!(0,g.Kf)(t))return e;else return e+(0,f._V)(t,!0)}),0)},unreadWithChild:function(e){if(this.isMyFoldersContainer(e))return this.getMyFoldersContainerMessagesCount();if(this.isParentPrivateFoldersContainer(e))return this.getParentPrivateFoldersContainerMessagesCount();else return(0,f._V)(e)},getUnreadCount:function(e){if(this.isMyFoldersContainer(e))return this.getMyFoldersContainerMessagesCount();if(this.isParentPrivateFoldersContainer(e))return this.getParentPrivateFoldersContainerMessagesCount();else return this.isFolderExpanded(e)?(0,f._V)(e,!1):(0,f._V)(e)},getTotalCount:function(e){return this.isFolderExpanded(e)?(0,f.$r)(e,!1):(0,f.$r)(e)},isShortcut:function(e){var t=e.get("type");return e.get("system")&&this.displayedShortcut.includes(t)&&!e.isShareTake()},onRightClick:function(e){if(!this.attrs["without-press-context-menu"]){if(this.get("has-virtual-containers")){var t=e.details.id;if(this.isMyFoldersContainerById(t)||this.isParentPrivateFoldersContainerById(t)||this.isOtherUserFoldersContainerById(t))return void e.preventDefault()}if(!this.get("touch"))A.Z.show(e)}},getFolderType:v.wv,getFolder2IcoMap:function(){return this.is("ponymode")?v.IR:v.ZP},getFolderIco:function(e){return(0,v.qc)(e,this.getFolder2IcoMap())},getFolderTitle:function(e){if(this.is("mobile"))return null;if(this.is("short"))return e.get("name");if(!e.isSecureOpen())return i18n("{folderName}, защищено паролем",{folderName:e.get("name")});if(this.isFoldersContainer(e)&&this.isFolderExpanded(e))return e.get("name");var t=this.getTotalCount(e),n=this.getUnreadCount(e),r=e.get("name");if(!t&&!n)return"".concat(r,", ").concat(i18n("нет писем"));if(t){var a=(0,u.F)(t);r+=", ".concat(a)}if(n){var i={count:n};a=i18n.plural(n,[i18n("{count} непрочитанных",i),i18n("{count} непрочитанное",i),i18n("{count} непрочитанных",i)]);r+=", ".concat(a)}return r},isClearBtnVisible:function(e){return this.attrs["with-clear"]&&(e.isTrashLike()||e.isSpam()&&!s.HIDE_CLEAR_BUTTON_ON_SPAM_FOLDER)&&0!==e.get("messages_total")&&e.checkGrant(y().SHARE_GRANTS.remove)&&!(0,g.Mx)(e)},isMyFoldersContainer:function(e){var t=e.get("id");return this.isMyFoldersContainerById(t)},isMyFoldersContainerById:function(e){return e===s.NAV_MY_FOLDERS_CONTAINER_ID},isMyFoldersContainerExpanded:function(){return this.isExpanded(s.NAV_MY_FOLDERS_CONTAINER_ID)},isOtherUserFoldersContainerById:function(e){var t=y().all.get(e);return t&&t.isRoot()&&t.isShareTake()},isOtherUserFoldersContainer:function(e){return e.isServiceShared()},isParentPrivateFoldersContainerById:function(e){return e===s.NAV_PARENT_PRIVATE_FOLDERS_CONTAINER_ID},isParentPrivateFoldersContainer:function(e){return this.isParentPrivateFoldersContainerById(e.get("id"))},isFoldersContainer:function(e){return this.isMyFoldersContainer(e)||this.isOtherUserFoldersContainer(e)||this.isParentPrivateFoldersContainer(e)},getFolderLevel:function(e){if(!this.get("has-virtual-containers"))return e.getChildLevel();if(this.isMyFoldersContainer(e)||this.isParentPrivateFoldersContainer(e))return 0;if(e.isShareTake())return e.getChildLevel();else return e.getChildLevel()+1},getLimitedFolderLevel:function(e){var t=this.getFolderLevel(e);return Math.min(s.FOLDER_MAX_CHILD_LEVEL_UI,t)},isLastOfMyFolders:function(e){return e.get("id")===this.get("lastOfMyFoldersId")},getAvatar:function(e){var t,n;if(this.isMyFoldersContainer(e)){t=(r=T.default.user).getEmail(),n=r.getFullName()}else{var r;t=(r=e.get("owner")).email,n=r.name}if(!t)return null;else return(0,_.Z)({email:t,name:n,size:45})},getTitle:function(e){if(this.isOtherUserFoldersContainer(e)){return e.get("owner").email}return e.get("name")},isFolderExpandControlsVisible:function(e){var t=e.getChildLevel();return e.get("children")&&!this.is("touch-nav")&&!this.is("short")&&!this.is("expand-all")&&s.FOLDER_MAX_CHILD_LEVEL_UI>t&&e.getMaxChildLevel()>t},getLastOfMyFoldersId:function(){var e=this.get("models")||[];e=e.filter((function(e){return!(0,g.Kf)(e)}));var t=Array.prototype.findIndex.call(e,(function(e){return e.isShareTake()}));if(-1===t)return e[e.length-1].get("id");else return e[t-1].get("id")},getFirstSubFolderId:function(e){var t=this.get("models")||[],n=Array.prototype.find.call(t,(function(t){return t.get("parent")===e}));return null==n?void 0:n.get("id")},getFirstParentControlFolder:function(){var e=this.get("models")||[],t=Array.prototype.find.call(e,g.Kf);return null==t?void 0:t.get("id")},isFolderInMyFoldersContainer:function(e){return this.get("has-virtual-containers")&&e.isRoot()&&!e.isShareTake()&&!(0,g.Kf)(e)&&!this.isParentPrivateFoldersContainer(e)}}))},54213:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(22350),s=n.n(o),l=n(45114);t.Z=i().Block.extend({name:"new-folder-btn",template:s(),events:{openPopup:"openPopup"},blocks:{button2:l.Z},didMount:function(){var e=this;Promise.resolve().then(n.bind(n,24583)).then((function(t){t.default.register(e)}))},openPopup:function(){this.broadcast("add",{model:{params:{isSidebar:this.get("isSidebar")}}})},useNewToolbar:function(){return r.NEW_TOOLBAR}})},94389:function(e,t,n){"use strict";n.r(t);var r,a=n(17717),i=n.n(a),o=n(60033),s=n.n(o),l=n(21211),c=n(18440),d=n.n(c),u=n(31263),f=n.n(u),m=n(75705),h=n(45209),p=n(5339),g=n(51474);t.default=d().Block.extend({name:"noads-button",template:f(),immutable:!0,blocks:{"react-async":g.Z},defaults:{hide:(r=i().get("octavius-button-noads"),r&&r.state&&r.getTimeDelta((0,m.V)())<l.NOADS_BUTTON_DELAY)},events:{"action:click":"onActionClick"},dwh:null,constructor:function(){d().Block.apply(this,arguments),this.onActionClick=this.onActionClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this)},didMount:function(){var e=this;Promise.resolve().then((function(){var t=[n(15907),n(10705)];(function(t,n){t.default.register(e),n.default.register(e)}).apply(null,t)})).catch(n.oe),s().send("noads_button_show",{i:l.ADV_EXP_ID})},onActionClick:function(){s().send("noads_button_click",{i:l.ADV_EXP_ID}),(0,h.nE)(l.NOADS_BUTTON_HREF)},onCloseClick:function(e){e.stopPropagation(),this.set("hide",!0),i().get("octavius-button-noads").save({state:!0,time:!0}),s().send("noads_button_close",{i:l.ADV_EXP_ID})},getButtonContent:function(){return i18n("Убрать рекламу")},isButtonLight:function(){return l.NOADS_BUTTON_LIGHT},getDwhPromise:function(){if(!this.dwh)this.dwh=p.default.getQuotaDWH("noads_btn");return this.dwh}})},73649:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(21211),a=n(18440),i=n.n(a),o=n(90945),s=n.n(o),l=n(15907),c=n(795),d=n.n(c),u=n(45114),f=n(12199),m=i().Block.extend({name:"notify",template:d(),isolateEvents:!1,blocks:{button2:u.Z,ico:f.Z},events:{"notify-close":"close"},defaults:{touch:r.OCTAVIUS_MOBILE,duration:0,closed:!1,"hide-close-button":r.HIDE_NOTIFY_CLOSE_BUTTON},isOctaviusMobile:()=>r.OCTAVIUS_MOBILE,didMount(){this.delay()},delay(){window.clearTimeout(this._id);var e=this.get("duration");if(e)this._id=setTimeout(()=>this.close(),1e3*e)},close(){if(window.clearTimeout(this._id),!this.destroyed&&!this.get("closed"))this.set("closed",!0),this.broadcast("closed")}}),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},p=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};window.__notifyDebugList=[];var g=i().Block.extend({name:"notify-stack",_notifyKey:0,blocks:{notify:m},events:{closed:"handleClose"},defaults:{items:null,animated:!1,"mobile-footer":r.CAN_SHOW_FOOTER_APP_TOOLBAR},attrChanged:{animated:function(e){var t=this;if(clearTimeout(this._animatedTimeout),e)this._animatedTimeout=setTimeout((function(){return t.set("animated",!1)}),400)}},template:s(),activeByContent:{},didMount:function(){this.set("items",p([],this.get("items")||[],!0),!0)},isTouch:function(){var e;return(null===(e=null===l.default||void 0===l.default?void 0:l.default.isLessThen)||void 0===e?void 0:e.call(l.default,"xs"))||r.OCTAVIUS_MOBILE},handleClose:function(e){var t=this;return setTimeout((function(){return t.remove(e.details)}),400),!1},add:function(e){var t=this;if(this.isMounted()){var n=++this._notifyKey,r=Object.assign({},e,{_key:n}),a=Object.assign({},r);if(window.__notifyDebugList.length>500)window.__notifyDebugList=[];window.__notifyDebugList.push(a);var o=r.unique,s=r.onTop,l=void 0===s?!1:s,c=o&&this.getContentId(r),d=[].concat(this.get("items")||[]);if(o){var u=this.activeByContent[c];if(u)return u}if(l)d.unshift(r);else d.push(r);if(r.idx=n,this.set({animated:!0,items:d}),r.item)r.item.renderComponentToNode(this.refs[n]),r.item.props.onDestroy=function(){t.remove(r)};else{var f=i().Block.get(this.refs[n]);if(!f)return;if(f.idx=n,o)this.activeByContent[c]=f;return f}}},remove:function(e){if(this.isMounted()){var t=e.idx||e;if(t){var n=[].concat(this.get("items")),r=n.findIndex((function(e){return e.idx===t}));if(r<0)return;var a=this.getContentId(n[r]);delete this.activeByContent[a],n.splice(r,1),this.set("items",n)}}},getContentId:function(e){return e.type+":"+e.text},setData:function(e,t){if(this.isMounted()){var n=[].concat(this.get("items")),r=n.findIndex((function(t){return t.idx===e}));if(!(r<0))n[r]=h(h({},n[r]),t),this.set({items:n})}}})},82609:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(54498),o=n(21211),s=n(18440),l=n.n(s),c=n(1109),d=n.n(c),u=n(81320),f=n(4183),m=n(4872),h=n.n(m),p=n(13624),g=n.n(p),v=n(50375),_=n(61799),b=n(93286),E=n(96384),y=n(45114),T=n(72656),A={"empty-inbox-folder":"ic_empty-folder","empty-folder":"ic_empty-folder","no-select":"ic_no-select","no-templates":"ic_no-templates","no-drafts":"ic_no-templates","no-search":"ic_no-search",spam:"ic_spam",trash:"ic_trash","secure-folder":"ic_lock","secure-search":"ic_lock","no-letter":"ic_no-letter"};t.Z=l().Block.extend((0,_.Z)({events:["settingsfilters:create","compose:new","filterclick","secure:opencurrent","mark:allreaded",{name:"search:set-in-excluded-folders",rename:"search:excluded"}]})({name:"octopus",template:d(),events:{goToInbox:"goToInbox"},defaults:{fallback:0,type:"empty-inbox-folder"},_autoShow:!0,blocks:{link:T.Z,button2:y.Z},isSearchSecureNotOpen:function(){var e=this.get("router");return(e&&e.model.search.error)instanceof v.SecureFolderNotOpenError},getSearchSecureTargetFolderId:function(){if(!this.isSearchSecureNotOpen())return null;else return this.get("router").model.search.error.getFolderId()},getSearchSecureTargetFolderName:function(){var e=this.getSearchSecureTargetFolderId(),t=h().all.get(e);if(t)return t.get("name");else return""},getMessages:function(){return{noSpam:i18n("В вашей почте{br}нет спама",{"unsafe-br":"<br />"}),noDrafts:i18n("У вас нет незаконченных{br}или неотправленных писем",{"unsafe-br":"<br />"}),secureSearch:i18n("Доступ в папку «{folderName}» запрещён",{folderName:this.getSearchSecureTargetFolderName()})}},getNoSearchMessages:function(){return{title:i18n("По вашему запросу ничего не{space}найдено",{"unsafe-space":"&nbsp;"}),subtitle:i18n("Можно поискать похожие письма в{space}папках «Спам» и{space}«Корзина»",{"unsafe-space":"&nbsp;"})}},goToInbox:function(e){var t=e.details;a().send("go-to-inbox",{dwh:{folder_id:t.folderId}}),this.get("router").go("#letters",{folder:h().TYPE_INBOX})},getType:function(){var e=this.get("type"),t=this.get("folder");switch(e){case"empty-folder":if(!t.isSecureOpen())return"secure-folder";if(t.isInbox()&&!t.isRoot())return"empty-folder";if(t.isInbox())return"empty-inbox-folder";if(t.isTrashLike()&&t.isRoot())return"trash";if(t.isSpam()&&t.isRoot())return"spam";if(t.isTemplates())return"no-templates";if(t.isDrafts()&&t.isRoot())return"no-drafts";break;case"no-search":if(this.isSearchSecureNotOpen())return"secure-search";else return e;case"no-select":case"no-letter":return e}return"empty-folder"},getCurrentPlaceholder:function(){return o.EMPTY_FOLDER_PLACEHOLDER},getIconType:function(){return A[this.getType()]},isShareTake:function(){return this.get("folder").isShareTake()},isShareGive:function(){return this.get("folder").isShareGive()},isNewDesign:function(){return[o.EMPTY_FOLDER_PLACEHOLDER_ENUM.new,o.EMPTY_FOLDER_PLACEHOLDER_ENUM.newTwoBtn].includes(o.EMPTY_FOLDER_PLACEHOLDER)},getIcon:function(){var e=this.getIconType();if(this.isNewDesign()){var t=this.generateIconFilename();return"".concat(o.OCTAVIUS_PLACEHOLDERS_PATH).concat(e,"/").concat(t)}else return"".concat(o.OCTAVIUS_PLACEHOLDERS_PATH).concat(e,".svg")},isVK:function(){return o.VK},getEmptyStateType:function(){switch(this.getType()){case"empty-folder":return"EMPTY_FOLDER";case"trash":return"TRASH";case"spam":return"SPAM";case"secure-folder":return"LOCK";case"no-search":return"NO_SEARCH";case"no-templates":return"NO_TEMPLATES";case"no-select":return"NO_SELECT";case"no-letter":return"NO_LETTER";default:return"EMPTY_FOLDER"}},isDefaultTheme:function(){return this.get("isLightDefaultMode")||this.get("isDarkDefaultMode")},generateIconFilename:function(){if(this.get("isLightDefaultMode"))return o.NEW_TOOLBAR?"light-new-nav.png":"light.png";else if(this.get("isDarkDefaultMode"))return"dark.png"},isAllreadButtonVisible:function(){return(0,u.R)(this.get("filter"),this.get("model"))},didMount:function(){var e,t=this,n=this.get("router"),r=this.get("folder"),a=this.getSearchSecureTargetFolderId();if(this.isSearchSecureNotOpen()||r&&!r.isSecureOpen()&&this._autoShow)this._autoShow=!1,(0,E.Z)(r||h().all.get(a)).then((function(e){if(n&&n.route.is("#search #search-letter"))return(0,f.default)({type:i.UPDATE_SEARCH,priority:g().Loader.PRIORITY_LOW,uid:void 0});if(e)t.destroy(),(0,f.dataSourceDispatchUpdateAll)()}));(0,b.ZP)({chain:["mount","octopus"],dwh:{type:this.get("type"),folder_id:null===(e=this.get("folder"))||void 0===e?void 0:e.id}})},isInSharedMailbox:function(){var e=this.get("folder");return null==e?void 0:e.isShareTake()},shouldDisplayFilter:function(){return!(o.DISABLE_OCTOPUS_CREATE_FILTER||o.FORBID_FILTERS||this.isInSharedMailbox()||this.is("mobile"))}}))},84015:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(46982),s=n.n(o);t.Z=i().Block.extend({name:"paginator-container",template:s(),defaults:{type:"3pane","right-column":0,"left-column":0,"sidebar-column":0,"right-offset":0,"mobile-view":r.CAN_SHOW_FOOTER_APP_TOOLBAR,"max-breakpoint":!1,visible:!r.NEW_TOOLBAR},broadcastVisibilityEvent:function(e){if(e)this.broadcast("show");else this.broadcast("hide")},didMount:function(){this.broadcastVisibilityEvent(this.is("visible"))},didUpdate:function(e){var t=this.is("visible");if(e.visible!==t)this.broadcastVisibilityEvent(t)},didUnmount:function(){this.broadcastVisibilityEvent(!1)},getMaxLayoutWidth:function(){return r.MAX_LAYOUT_WIDTH}})},42180:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(21211),a=n(18440),i=n.n(a),o=n(37803),s=n(84661),l=n.n(s),c=n(92042),d=n.n(c),u=n(73173),f=n(97702),m=n.n(f),h=n(98039),p=n(14604),g=n(25206),v=n(10429),_=n(68869),b=i().Block.extend({name:"metathread-preview",template:m(),defaults:{model:null},blocks:{"metathread-avatar":p.Z,"metathread-title":_.Z,"metathread-snippet":g.Z,"metathread-snippet-tomyself":v.Z,badge:h.Z},getMetathreadData(){return this.get("model").get("metathread_data")}}),E=n(53485),y=n(39385),T=i().Block.extend({name:"panel-with-selected",template:l(),blocks:{thread:y.Z,"metathread-preview":b},attrChanged:{selected:function(e){var t,n=e[e.length-1],r=n;if(n&&!(n instanceof d()))r=d().getSafe(n.meta("thread_id")),t=n.id;var a=r&&u.Z.isMetathread(r);function i(){if(!t&&r&&r.get("messages").length)t=r.get("messages").eq(0).id;this.set({"is-metathread":a,"selected-last-thread":r,"expand-letter-id":t}),this.render()}if(r&&!r.isDataFully()&&!a)r.fetch().then(i.bind(this));else i.apply(this)}},didMount:function(){var e=this.el,t=e.style,n=e.offsetParent;t.marginTop=n.scrollTop+"px",this.$on(n,"scroll",(function(){t.marginTop=n.scrollTop+"px"}))},didUnmount:function(){this.el.style.marginTop=""},useNewThread:function(){return r.NEW_THREAD},didUpdate:function(e){var t=this.attrs,n=t.folder,r=t.selectFolder,a=t.selected,i=t.route.is("#search #search-letter");if(void 0!==n&&void 0!==r&&void 0!==a&&void 0!==i&&(e.folder!==n||e.selectFolder!==r||e.selected!==a||e.searchRoute!==i))this.set("searchRoute",i),this.set("selectedCount",(0,E.Nw)({folder:n,selectFolder:r,selected:a},{searchRoute:i}))},getSelectedLetterCountText:function(){var e=this.get("selectedCount");return r.NEW_TOOLBAR&&e?(0,o.F)(e):""}})},70757:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(65474),c=n.n(l),d=n(29404),u=n(4872),f=n.n(u),m=n(78267),h=n(61799),p=n(45114),g=n(94993),v=n(43353),_=n(46637),b=n(91622),E=n(64391),y=n(90557);t.Z=s().Block.extend((0,h.Z)({prop:"type",events:[{name:"move:click",rename:"mobile",data:d.u},{name:"remove",data:d.u,default:!0},{name:"archive",data:d.u,default:!0},{name:"spam",data:d.u,default:!0},{name:"unspam",data:d.u,default:!0},{name:"move",data:d.u,default:!0},{name:"translate",data:d.u,default:!0},{name:"compose:reply",data:d.u,default:!0},{name:"compose:replyall",data:d.u,default:!0},{name:"compose:forward",data:d.u,default:!0},{name:"compose:new",default:!0},{name:"mark:readed",default:!0},"select:all","select:drop","letter:prev","letter:next","letter:back","search:back","back:to:parent:folder"]})({name:"portal-menu-element",template:c(),isolateEvents:!1,blocks:{button2:p.Z,dropdown:g.Z,"dropdown-actions":v.Z,filters:_.Z,"list-nested-moveto-folder":E.Z},lazyBlocks:{unsubscribe:y.mV},defaults:{"has-metathreads-settings":!1,deselectLabelReset:"reset"===i.DESELECT_ALL_LABEL_STYLE||i.NEW_TOOLBAR},events:{"folders-toggle":"onFoldersToggle","move:click":"onMoveToClick","folder:click":"onFolderClick",clearActiveFolder:"onClearActiveFolder","mark:allreaded:before":"onMarkAllreadedBefore"},didMount:function(){if("backToParentFolder"===this.get("type")&&!this.get("hidden")){var e=this.get("folder"),t=this.get("parentFolder");a().send("back-to-parent-show",{dwh:{pos:"logo",folder:null==e?void 0:e.id,parentFolder:null==t?void 0:t.id}})}},useReactSearchPanel:function(){return i.SEARCH_PANEL_REACT},usePortalSearchPanel:function(){return i.SEARCH_PANEL_PORTAL},useNewToolbar:function(){return i.NEW_TOOLBAR},getBackIcon:function(){if(!this.useNewToolbar())return"arrow-back";if("deselect-back"===this.get("type"))return"actions:close_big";else return"navigation:arrow_previous"},onFoldersToggle:function(e){this.set("folder-overflow",e.details.state)},onFolderClick:function(e){this.broadcast("move",Object.assign(e.details,{selection:!0,model:void 0}))},onMoveToClick:function(){m.default.open("move-to-folder",{folders:this.get("folders"),letter:this.get("model")},{dimmer:!1,mobile:!0,resolvable:!1})},getCurrentFoldersIds:function(){var e=this.get("store");if(e.route.is("#read-letter #search-letter")){return[e.letter.get("folder")]}var t=this.get("lettersFoldersIds");if(t.length)return t;else return[e.folder.id]},checkFolderGrant:function(e){return this.getCurrentFoldersIds().every((function(t){return f().all.get(t).checkGrant(e)}))},onClearActiveFolder:function(){var e=this.get("store").folder;a().send("folder-more-clear-click",{dwh:{folder:e.id}}),this.broadcast("clear",{model:e})},onMarkAllreadedBefore:function(){var e=this.get("store").folder;a().send("folder-more-allread-click",{dwh:{folder:e.id}}),this.broadcast("mark:allreaded")},getClearActiveFolderLabel:function(){var e=this.get("store").folder;if(e.isInbox()||e.isNewsletters()||e.isToMyself()||e.isOfficial())return"".concat(i18n("Удалить")," ").concat(e.attributes.name.toLowerCase());else return i18n("Удалить все письма")},isEnableReply:function(){if(this.get("disabled"))return!1;else return this.checkFolderGrant(f().SHARE_GRANTS.reply)},isEnableForward:function(){if(this.get("disabled"))return!1;else return this.checkFolderGrant(f().SHARE_GRANTS.forward)},isEnableMove:function(){if(this.get("disabled"))return!1;else return this.checkFolderGrant(f().SHARE_GRANTS.move)},isEnableRemove:function(){if(this.get("disabled"))return!1;else return this.checkFolderGrant(f().SHARE_GRANTS.remove)},isEnableMoveToSpam:function(){if(this.get("disabled"))return!1;else return this.checkFolderGrant(f().SHARE_GRANTS.move_to_spam)},isEnableMoveToArchive:function(){if(this.get("disabled"))return!1;else return this.checkFolderGrant(f().SHARE_GRANTS.move_to_archive)},isShowUnspam:function(){if(this.get("disabled"))return!1;var e=this.get("store").letter;return(this.get("store").folder||e.getFolder()).isShareTake()},getParentFolderName:function(){var e;return null===(e=this.get("parentFolder"))||void 0===e?void 0:e.get("name")},needBackToParentShortcut:function(){return i.BACK_TO_PARENT_SHORTCUT},getMainFrame:function(){return i.NEW_TOOLBAR?b.ZP.getLayoutById("main").refs["main-frame"]:null}}))},90018:function(e,t,n){"use strict";var r,a=n(60033),i=n.n(a),o=n(19275),s=n(21211),l=n(18440),c=n.n(l),d=n(21074),u=n.n(d),f=n(48250),m=n(70614),h=n(70757),p=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};function g(){var e=document.createElement("a");return e.href=o.Z.urls.logoUrl,e.hostname=window.location.hostname,e.pathname="/imgsmail"+e.pathname,e.pathname}!function(e){e.src="src",e.bgSrcAdaptive="bg_src_adaptive",e.bgSrcBig="bg_src_big",e.bgSrcSmall="bg_src_small"}(r||(r={}));var v={name:"portal-menu-logo",template:u(),blocks:{"portal-menu-element":h.Z},events:{"logo-load-error":"handleLogoLoadError","logo-load-success":"handleLogoLoadSuccess","logo-click":"onLogoClick"},defaults:{"logo-load-err":!1,enableBackToParentShortcut:s.BACK_TO_PARENT_SHORTCUT,ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE:s.ENABLE_BACK_TO_LETTERS_SHORTCUT_3PANE},hideLogo:s.HIDE_LOGO,constructor:function(){c().Block.prototype.constructor.apply(this,arguments),this.onResize=this.onResize.bind(this)},didMount:function(){var e=this,t=o.Z.get("logo.breakpoints")?o.Z.get("logo.breakpoints").map((function(e){var t=e.width,n=e.height,r=e.compact;return{conditions:function(e){return e.width>=t},props:{width:t,height:n,compact:r,"hide-scale-logo":!1}}})):[];this.adaptiveHandler=new f.O({pureBreakpoints:!0,breakpoints:p(p([],t,!0),[{conditions:function(t){var n=t.width;if("bg"!==e.getLogoKind())return!1;else return n<e.getBgLogoConfig().fullSizeMinWidth},props:{compact:!0,"hide-scale-logo":!1}},{conditions:function(){return"bg"===e.getLogoKind()},props:function(){return{compact:!1,"hide-scale-logo":!1}}},{conditions:function(e){return e.width>=232},props:{compact:!1,"hide-scale-logo":!1}},{conditions:function(e){return e.width>=128},props:function(){return{compact:!1,"hide-scale-logo":!0}}},{props:{compact:!0,"hide-scale-logo":!0}}],!1),element:this.el,onResize:this.onResize})},getBgLogoConfig:function(){var e=this.getLogo();return{fullSizeMinWidth:s.PROMO_LOGO_MIN_WIDTH,bgAdaptive:e.bgAdaptive}},getLogo:function(){return o.Z.get("logo")},getLogoMod:function(e,t,n){if(e.scale)return"scale";else return"".concat(n?"pony":"normal","_").concat(t?"compact":"wide")},getLogoSize:function(e,t,n){if(e.scale&&this.get("hide-scale-logo"))return{height:0,width:0};if(e.scale)return{width:"100%",height:"auto"};if(e.breakpoints)return{width:this.get("width"),height:this.get("height")};var r=e.sizes[this.getLogoMod(e,t,n)];if(r)return r;else return{width:0,height:0}},getVkSrc:function(e,t,n){if(void 0===n)n=this.get("theme");var r="light";if(s.CONTRAST_LOGO_THEMES.includes(n))r="contrast";var a="https://img.imgsmail.ru/static.promo/logo/rebranding/vk_with_stroke_".concat(r,".svg");if(t)a="https://img.imgsmail.ru/static.promo/logo/rebranding/vk_".concat(r,".svg");if(e.en_lang)a=a.replace(".svg","_en.svg");return a},isRebranding:function(e){return e.rebranding},isMediumRebrandingLogo:function(e,t){if(!e.rebranding||t)return!1;var n=e.en_lang?161:179;return this.get("width")<n},getLogoWidth:function(e,t,n){return this.getLogoSize(e,t,n).width},getLogoHeight:function(e,t,n){return this.getLogoSize(e,t,n).height},getLogoTitle:function(e){return e.title||i18n("Почта Mail.ru")},getLogoTitleBrand:function(e){return e.titleBrand||i18n("Экосистема VK")},getLogoHref:function(e){return e.href},getLogoHrefBrand:function(e){return e.hrefBrand},getLogoTarget:function(e){return e.target},getLogoTargetBrand:function(e){return e.targetBrand},getLogoAlt:function(e){return e.alt||i18n("Почта Mail.ru")},getLogoAltBrand:function(e){return e.altBrand||i18n("Экосистема VK")},handleLogoLoadError:function(e){var t=e.target;this.set("logo-load-err",!0),t.src=g()},handleLogoLoadSuccess:function(e){var t=e.target;if((o.Z.logo.bgBig||o.Z.logo.bgSmall)&&t.src!==g())this.set("logo-load-err",!1)},getActiveLogoKey:function(e,t){if(void 0===t)t=this.getLogo();switch(!0){case t.bgAdaptive&&!e:return r.bgSrcAdaptive;case t.bgBig&&!e:return r.bgSrcBig;case t.bgSmall&&e:return r.bgSrcSmall;default:return r.src}},getLogoSrcFromKey:function(e,t,n){if(void 0===t)t=this.get("theme");if(void 0===n)n=this.getLogo();return n["".concat(t,"_").concat(e)]||n[e]},getLogoKind:function(){var e=this.getLogo(),t=e.bgBig,n=e.bgSmall,r=e.bgAdaptive;if(t||n||r)return"bg";else return"normal"},isActiveLogoAdaptive:function(e){return e===r.bgSrcAdaptive},findParentFolder:function(){return(0,m.g)(this.get("folder"),this.get("folders"))},needBackToParentFolderButton:function(){return this.get("needBackToParentFolder")&&s.BACK_TO_PARENT_AT_LOGO&&s.METATHREAD_BACK_TO_INBOX},getAdaptiveLogo:function(e){if(void 0===e)e=this.getLogo();var t=this.get("theme");return this.getLogoSrcFromKey(r.bgSrcAdaptive,t,e)},didUnmount:function(){this.adaptiveHandler.destroy()},onResize:function(e){this.set(e)},onLogoClick:function(){var e=o.Z.get("rbLogo"),t=Object.keys(e).length>0,n=this.getLogo(),r=t?"unknown":"default",a=n&&n.banner_id?n.banner_id:r;if("unknown"!==a)i().sendImmediately("portal-menu-logo_".concat(a,"_click"));else i().sendImmediately("portal-menu-logo_error",{rlog:"portal-menu-logo_unknown-banner-id",rlog_message:{logo:n}})}};t.Z=c().Block.extend(v)},53485:function(e,t,n){"use strict";n.d(t,{u7:function(){return V},ZP:function(){return Y},r1:function(){return H},Nw:function(){return q},RP:function(){return G},wM:function(){return B},$U:function(){return W},Jj:function(){return j},_I:function(){return z}});var r,a,i,o,s,l,c=n(21528),d=n(21211),u=n(18440),f=n.n(u),m=n(16007),h=n.n(m),p=n(81320),g=n(81690),v=n(76864),_=n(16458),b=n(14077),E=n(70614),y=n(15907),T=n(67808),A=n(94738),S=n(39939),O=n(47759),C=n(61799),w=n(46637),L=n(91622),k=n(70757),I=n(90018),R=n(60319),D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};!function(e){e.more="more",e.remove="remove",e.archive="archive",e.spam="spam",e.unsubscribe="unsubscribe",e.unspam="unspam",e.move="move",e.read="read",e.replyAll="reply-all",e.reply="reply",e.forward="forward"}(l||(l={}));var M={order:[l.remove,l.move,l.spam,l.unsubscribe,l.unspam,l.archive,l.read,l.more,l.replyAll,l.reply,l.forward]},P=[{minWidth:852,meta:{"no-short-reply":!0}},{minWidth:772},{minWidth:704,modifiers:(r={},r[l.archive]={short:!0},r[l.unsubscribe]={short:!0},r)},{minWidth:656,modifiers:(a={},a[l.archive]={short:!0},a[l.unsubscribe]={short:!0},a[l.spam]={short:!0},a[l.unspam]={short:!0},a)},{minWidth:584,modifiers:(i={},i[l.archive]={short:!0},i[l.unsubscribe]={short:!0},i[l.spam]={short:!0},i[l.unspam]={short:!0},i[l.move]={short:!0},i)},{minWidth:528,modifiers:(o={},o[l.remove]={short:!0},o[l.archive]={short:!0},o[l.unsubscribe]={short:!0},o[l.spam]={short:!0},o[l.unspam]={short:!0},o[l.move]={short:!0},o)},{minWidth:0,modifiers:(s={},s[l.remove]={short:!0},s[l.archive]={short:!0},s[l.unsubscribe]={short:!0},s[l.spam]={short:!0},s[l.unspam]={short:!0},s[l.move]={short:!0},s[l.replyAll]={short:!0},s[l.reply]={short:!0},s[l.read]={short:!0},s[l.forward]={short:!0},s)}],N=P.map((function(e){return D(D({},e),{minWidth:e.minWidth-236})})),x=(N.map((function(e){return D(D({},e),{minWidth:e.minWidth+44})})),function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)}),F=P.map((function(e){return x(x({},e),{minWidth:e.minWidth+48})})),U=N.map((function(e){return x(x({},e),{minWidth:e.minWidth+48})}));function H(e){var t,n,r,a,i,o,s,l,u,f=e.model,m=e.layoutType,h=e.selectMode,p=e.letterNotFound,g=!!(null===(t=e.route)||void 0===t?void 0:t.is("#read-letter #search-letter"))&&!e.selectMode&&!p,_="3pane"===m,E="2pane"===m,y=e.selectedStats||Object.create(null),T=!!(null===(n=e.route)||void 0===n?void 0:n.is("#search #search-letter")),A=!!(null===(r=e.route)||void 0===r?void 0:r.is("#letters #read-letter"))&&!!(null===(a=e.route)||void 0===a?void 0:a.filterQuery.has()),O=e.ponyMode,C=g&&!!(null===(i=e.route)||void 0===i?void 0:i.params.part),w=g?e.letter:null,L=w&&w.id,k=w&&w.get("messages").first(),I=(0,b.gA)(k),R=g&&!(null===(o=e.folder)||void 0===o?void 0:o.isSpam())||y.nospam>0,D=g&&!!(null===(s=e.folder)||void 0===s?void 0:s.isSpam())||y.spam>0,M=c.default.has("has-super-spam")||S.default.user.is("has_super_spam"),P=g&&!!(null===(l=e.letterNeighbours)||void 0===l?void 0:l.prev),N=g&&!!(null===(u=e.letterNeighbours)||void 0===u?void 0:u.next),x=!h,F=w&&w.get("flags.newsletter")&&d.FEATURE_UNSUBSCRIBE;return{store:f,letterNotFound:p,selectedStats:y,layoutType:m,readMode:g,selectMode:h,searchRoute:T,filterRoute:A,ponyMode:O,isDisableEdit:C,letter:w,letterId:L,isReplyAll:I,is3Pane:_,is2Pane:E,isSpam:R,isUnspam:D,hasPrev:P,hasNext:N,hasSuperSpam:M,shouldShowSearch:x,isNewsletter:F,isRemoveVisible:!(0,v.Mx)(e.folder)}}function B(e){var t=e.isSpam,n=e.letter,r=e.readMode,a=e.selectMode,i=e.selectedStats;if(!t)return!1;if(n&&r)return n.is("flags.newsletter")&&n.is("flags.show_definitely_spam")&&n.is("flags.have_unsubscribe_list");if(a){return i.fromTrustedMailer===i.all}return!1}var Z=function(e,t,n,r,a){var i=t.selectMode,o=t.readMode,s=t.selectedStats,l=t.isSpam,c=t.isUnspam,u=t.hasSuperSpam,f=t.isDisableEdit,m=t.letter,h=t.isReplyAll,p=t.isNewsletter,g=t.isRemoveVisible,v=a.unsubscribeInsteadSpam,_=a.unsubscribeInMoreDropdown;return{archive:{if:!e.folder.isArchive()&&!d.ARCHIVE_DISABLED,disabled:f},forward:{if:o,letter:m,disabled:f},move:{"radar-id":i?"selected":"letter-header",folders:e.folders,disabled:f},remove:{if:g,disabled:f},read:{"radar-id":i?"selected":"letter-header",if:i&&s.unread>0},reply:{if:o,letter:m,short:r["no-short-reply"]?!1:h,disabled:f},"reply-all":{if:o&&h,letter:m,disabled:f},spam:{if:!d.FORBID_SPAM&&l&&!v,disabled:f||i&&(e.deselectAll||s.metathread)},unsubscribe:{if:v,letter:m,disabled:f||i&&(e.deselectAll||s.metathread)},unspam:{if:c,disabled:f||i&&e.deselectAll},more:Object.assign({if:o||i},i?{read:s.unread>0,unread:s.read>0,flag:s.noflagged>0,unflag:s.flagged>0,print:1===s.all,archive:!n.archive&&s.noarchive&&!d.ARCHIVE_DISABLED,spam:!d.FORBID_SPAM&&!n.unspam&&l&&!s.metathread,spamDisabled:f||i&&(e.deselectAll||s.metathread),spamAbovePrint:!d.FORBID_SPAM&&!s.metathread&&v,unsubscribeAbovePrint:_,unspam:!n.spam&&c,superspam:u&&!s.metathread&&!e.deselectAll,forward:!s.metathread&&!e.deselectAll,"create-filter":!d.FORBID_FILTERS&&!s.metathread&&!e.deselectAll}:o&&{readletter:!0,print:!0,"invite-call":d.CALLS&&!d.CALLS_DISABLE_LETTER_CALL&&!(p&&d.CALLS_DISABLE_LETTER_CALL_NEWSLETTERS),"create-event":!(d.DISABLE_CREATE_EVENT||p&&d.DISABLE_LETTER_CALENDAR_NEWSLETTERS),"create-filter":!d.FORBID_FILTERS,translate:!d.DISABLE_TRANSLATE,"disable-edit":f,read:m.is("flags.unread"),unread:!m.is("flags.unread"),flag:!m.is("flags.flagged"),unflag:m.is("flags.flagged"),archive:!n.archive&&!m.getFolder().isArchive()&&!d.ARCHIVE_DISABLED,spam:!d.FORBID_SPAM&&!n.spam&&l,spamAbovePrint:!d.FORBID_SPAM&&v,unsubscribeAbovePrint:_,unspam:!n.unspam&&c,superspam:u})}},G=function(e,t){var n=e.readMode,r=e.letter,a=e.selectMode,i=e.searchRoute,o=t.selected;if(n&&r)return{ids:[r.get("expand")||"".concat(r.id).split(":")[1]],senders:[r.get("correspondents.from.0.email")]};if(!a)return{};else return{ids:o.map((function(e){if(i)return"".concat(e.id);else return e.get("expand")||"".concat(e.id).split(":")[1]})),senders:o.map((function(e){return e.get("correspondents.from.0.email")}))}},q=function(e,t){var n=e.selected,r=e.selectFolder,a=e.folder;return t.searchRoute?n.length:(0,_.Z)(n,r?a:void 0).all},j=function(e){var t=e.is2Pane;if(y.layoutManager.isLessThen("s"))return!0;if(d.NEW_TOOLBAR&&y.layoutManager.getMainColumn()<180&&t)return!0;else return y.layoutManager.isLessThen("l")&&y.layoutManager["left-column"]>75},W=function(e,t,n){var r=e.selectedCount,a=e.sidebarColumn,i=e.newToolbar,o=t.sortingType,s=t.filter,l=t.ponyMode,c=n.is2Pane;if(r)return!1;if(c)return d.PORTAL_MENU_MORE_FOLDER_ACTIONS?y.layoutManager.getMainColumn()+y.layoutManager.columnRight<250:y.layoutManager.isLessThen("m");if(null!=a||(a=y.layoutManager.getSidebarColumn()),a<=T.wJ+(d.PORTAL_MENU_MORE_FOLDER_ACTIONS?5:0))return!0;if(d.PORTAL_MENU_MORE_FOLDER_ACTIONS&&a<108&&l)return!0;if((!s.all||o&&"D"!==o||i)&&a<=T.gG)return!0;if(y.layoutManager.getLeftColumn()<=d.SHORTCUT_LEFT_COLUMN_LIMIT&&a<=T.gG)return!0;else return!1},V={name:"portal-menu",template:h(),blocks:{layout:L.ZP,"portal-menu-element":k.Z,"portal-menu-logo":I.Z,"search-panel":R.Z,filters:w.Z},events:{},defaults:{selected:[],readAllInProgress:!1},attrChanged:{selected:function(){if(this.isMounted())this.set("selectedStats",this.getSelectedStats())},selectMode:function(){O.default.update()}},constructor:function(){f().Block.prototype.constructor.apply(this,arguments),this.setDefaultBreakpoint(),this.handleResize=this.handleResize.bind(this),this.frameDebouncer=new g.P(this.handleResize),this.createResizeObserver()},useReactSearchPanel:function(){return d.SEARCH_PANEL_REACT},usePortalSearchPanel:function(){return d.SEARCH_PANEL_PORTAL},setDefaultBreakpoint:function(){this._currentBreakpoint=F[F.length-1]},didMount:function(){this.updateListeners()},isSelectAllVisible:function(e){return(0,p.R)(e,this.get("model"))},isAllReadVisible:function(){return this.isSelectAllVisible(this.get("filter"))&&!this.get("read-all-in-progress")},isRemoveAllVisible:function(){if(!d.PORTAL_MENU_CLEAR_METATHREAD)return!1;var e=this.get("folder"),t=this.get("filter"),n=this.get("sortingType");if(!t.all||n&&"D"!==n)return!1;else return!this.get("selectMode")&&e.isMetathread()&&e.isClearable()},needMoreLettersActions:function(){var e="3pane"===this.get("layoutType"),t=this.get("selectMode");return d.PORTAL_MENU_MORE_FOLDER_ACTIONS&&e&&!t&&(this.isAllReadVisible()||this.isRemoveAllVisible())},needBackToParentFolder:function(){return!(!this.get("showBackToParentFolder")||!(0,E.g)(this.get("folder"),this.get("folders")))},hasLetterCount:function(){return function(e){var t=e.filter,n=e.folder;if(t.all)return n.is("messages_total");else return(!t.flagged||n.is("messages_flagged"))&&(!t.unread||n.is("messages_unread"))&&(!t.with_attachments||n.is("messages_with_attachments"))}(this.getAttrs())},getPaddingLeft:function(e,t,n){if("2pane"==e)if(n&&t)return 32;else return 28;if(n)if(t)return 20;else return 16;return 24},getPaddingRight:function(e,t,n){if(!t)return 20;if("3pane"==e.type)if(n)return 8;else return 14;return 0},getSelectedCount:function(){return q(this.getAttrs(),{searchRoute:this.getAttrs().route.is("#search #search-letter")})},getSelectedStats:function(){return(0,_.Z)(this.get("selected"))},isShortButtonSelectAll:function(e,t,n,r){return W({selectedCount:t},{sortingType:r,filter:n},{is2Pane:"2pane"===e.type})},isRemoveAllButtonShort:function(){return this.get("main-column")+this.get("right-column")<=275},getAttrs:function(){return this.attrs},isShortTextAllRead:function(){return j(H(this.getAttrs()))},getCurrentBreakpoint:function(){var e=this.getAttrs(),t=H(e),n=M;return function(e,t,n,r){var a,i,o,s=B(t),l={unsubscribeInMoreDropdown:s&&d.UNSUBSCRIBE_IN_MORE_DROPDOWN,unsubscribeInsteadSpam:s&&d.UNSUBSCRIBE_INSTEAD_SPAM},c=(null!==(a=null==n?void 0:n.order)&&void 0!==a?a:r.order).map((function(e){if("string"==typeof e)return{type:e};else return e})),u=null!==(i=null==n?void 0:n.modifiers)&&void 0!==i?i:{},f=null!==(o=n.meta)&&void 0!==o?o:{},m=c.reduce((function(e,t){return e[t.type]=!0,e}),{}),h=Z(e,t,m,f,l);return{actionsList:c.map((function(e){var t=h[e.type],n=u[e.type];if(t||n)return Object.assign(e,t,n);else return e})),globals:t}}(e,t,this._currentBreakpoint,n)},getSelectedLettersIdsAndSenders:G,didUpdate:function(){this.updateListeners()},createResizeObserver:function(){var e=this;this.resizeObserver=new A.Z((function(t){e.frameDebouncer.requestDebouncedFrame(t)}))},updateListeners:function(){if(this.resizeObserver.disconnect(),this.refs["actions-list"])this.resizeObserver.observe(this.refs["actions-list"])},didUnmount:function(){this.resizeObserver.disconnect()},handleResize:function(e){if(this.refs["actions-list"]){for(var t=e[0].contentRect.width,n=this.is("selectMode")?U:F,r=[-1,n.length-1];r[1]-r[0]>1;){var a=(r[1]+r[0]-(r[1]+r[0])%2)/2;r[+(n[a].minWidth<=t)]=a}var i=n[r[1]];if(this._currentBreakpoint!==i)if(this._currentBreakpoint=i,this.isMounted())this.render()}}},z=(0,C.Z)({id:function(e){return e.is("selectMode")?"head-select":"head"}}),Y=f().Block.extend(z(V))},58049:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(53107),o=n.n(i),s=n(47759);t.Z=a().Block.extend({name:"promo-block-letter",template:o(),attrChanged:{support3pane:function(){if(this.refs.container&&this.refs.container.children.length)this.update()},hidden:function(e){if(e)this.el.style.display="none";else this.el.style.display=""}},update:function(){s.default.update(),this.mutationCallback()},didMount:function(){var e=this.mutationCallback.bind(this);this.observer=new MutationObserver(e),this.observer.observe(this.el,{childList:!0,subtree:!0}),this.update()},didUnmount:function(){this.observer.disconnect()},mutationCallback:function(){this.broadcast("promoblockletter:render")}})},22083:function(e,t,n){"use strict";var r=n(17717),a=n.n(r),i=n(19275),o=n(21211),s=n(18440),l=n.n(s),c=n(12947),d=n.n(c),u=n(46345),f=n.n(u),m=n(79445),h=n.n(m),p=n(39939),g=n(93286),v=n(41026);t.Z=l().Block.extend({name:"promo-domain-die",template:d(),blocks:{"letter-meta":v.Z},events:{"letter-meta:promodomainclose":"onPromoDomainClose"},defaults:{promoDomainModel:new(h()),promoDomainPlate:"",senderEmail:"","dark-mode":!1,receivers:[]},constructor:function(){l().Block.apply(this,arguments)},attrChanged:{senderEmail:function(e){if(e)this.onGetPromoDomainPlate()},receivers:function(){this.onGetPromoDomainPlate()}},onGetPromoDomainPlate:function(){var e=this;this.set("promoDomainPlate","");var t=this.get("model"),n=!!i.Z.get("qa"),r=this.get("senderEmail"),a=p.default.user,s=a&&a.getEmail();f().execute({method:f().CONFIG,email:s,senderEmail:r,config:o.PROMO_DOMAIN_HEADER,isAutotest:n,isClosable:o.PROMO_DOMAIN_CROSS_ENABLED,isToMyself:t&&t.isToMyself()},{silent:!0}).then((function(t){var n=t&&t.result;if(n)e.set("promoDomainPlate",n)})).catch((function(){return(0,g.ZP)("get-user-promoplates-config-err")}))},onPromoDomainClose:function(){var e=!!i.Z.get("qa"),t=this.get("promoDomainPlate");f().execute({method:f().HIDE,promoDomainPlates:[t],isAutotest:e}).catch((function(){return(0,g.ZP)("user-promoplates-hide-err")})),this.set("promoDomainPlate","")},checkPromoDomainPlate:function(){if(!o.PROMO_DOMAIN_HEADER.length)return!1;var e=a().get("to-myself").isActive(),t=this.get("promoDomainPlate");if(!this.get("promoDomainModel").checkPlate({promoDomainPlate:t,toMyselfFlag:e}))if(t="",o.PROMO_DOMAIN_CROSS_ENABLED)this.onPromoDomainClose();else this.set("promoDomainPlate",t);return!!t}})},49649:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(57833),o=n.n(i),s=n(35485),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};t.Z=a().Block.extend({name:"react-2kit-async",template:o(),defaults:{component:null},constructor:function(){var e=this;a().Block.apply(this,arguments),this._reactAsyncCore=new s.E((function(t){return t.getDep("@mail/vkui/2kit")[e.get("component")]}),[],{provideTheme:!0})},didMount:function(){this._setProps(),this._reactAsyncCore.mount(this.el)},didUnmount:function(){this._reactAsyncCore.umount()},set:function(){a().Block.prototype.set.apply(this,arguments),this._setProps()},getComponent:function(){return this._reactAsyncCore.getComponent()},_setProps:function(){if(this.isMounted()){var e=l({},this.getAttrsSnapshot());this._reactAsyncCore.setProps(e)}}})},35485:function(e,t,n){"use strict";n.d(t,{E:function(){return d}});var r=n(81171),a=n(21211),i=n(63745),o=n(59333),s=n(74456),l=n(42339),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},d=function(){function e(t,l,c){if(void 0===l)l=[];if(void 0===c)c={};var d=this;if(this._options=c,this._loadPromise=Promise.resolve(),this._depsLoaded=!0,this._props={},this._mounted=!1,this._componentGetter=t,!a.ASYNC_RENDER_REACT_IN_WP_BUILD)e._depsMap.react=i,e._depsMap["react-dom"]=o,e._depsMap["@mail/vkui/2kit"]=r;else l.push(["react",Promise.resolve().then(n.t.bind(n,63745,23))],["react-dom",Promise.resolve().then(n.t.bind(n,59333,23))],["@mail/vkui/2kit",(0,s.Z)("@mail/vkui/2kit")]);if(this._options.customNode)l.push(["",Promise.resolve(this._options.customNode).then((function(e){d._customNode=e}))]);var u=l.filter((function(t){var n=t[0];return!n||!(n in e._depsMap)}));if(u.length)this._depsLoaded=!1,this._loadPromise=Promise.all(u.map((function(e){return e[1]}))).then((function(t){d._depsLoaded=!0,t.forEach((function(t,n){var r=u[n][0];if(r)e._depsMap[r]=t}))}))}return e.prototype.loadPromise=function(){return this._loadPromise},e.prototype.depsLoaded=function(){return this._depsLoaded},e.prototype.getDep=function(t){return e._depsMap[t]},e.prototype.setProps=function(e){if(this._props=e,this._mounted)this._renderReact()},e.prototype._mountWhenDepsLoaded=function(e){this._mounted=!0,this._node=this._customNode||e,this._renderReact()},e.prototype.mount=function(e){var t=this;if(!this.depsLoaded())this.loadPromise().then((function(){t._mountWhenDepsLoaded(e)}));else this._mountWhenDepsLoaded(e)},e.prototype.umount=function(){var e=this._node;if(this._mounted=!1,e&&this._depsLoaded)this.getDep("react-dom").unmountComponentAtNode(e)},e.prototype.getComponent=function(){var e;return null===(e=this._componentRef)||void 0===e?void 0:e.current},e.prototype._renderReact=function(){var e;if(this._depsLoaded&&this._mounted){var t=this.getDep("react"),n=this.getDep("react-dom");this._componentRef=t.createRef();var r=t.createElement(this._componentGetter(this),c(c({},this._props),{_node:this._node,ref:this._componentRef}),null),a=r;if(this._options.useErrorBoundary)a=t.createElement(l.Z,{id:null!==(e=this._options.blockRadarId)&&void 0!==e?e:"react"},r);n.render(a,this._node)}},e._depsMap={},e}()},51474:function(e,t,n){"use strict";var r=n(19275),a=n(18440),i=n.n(a),o=n(61271),s=n.n(o),l=n(35485);t.Z=i().Block.extend({name:"react-async",template:s(),defaults:{component:null,themeId:"default"},constructor:function(){i().Block.apply(this,arguments);var e=this.get("componentClass"),t=e instanceof Promise,r=this.get("component"),a="component-".concat(r);this._reactAsyncCore=new l.E((function(n){var i;if(e&&!t)return e;if(e&&t){var o=n.getDep(a);return(null==o?void 0:o.default)||o}var s=n.getDep("ui-react");return null!==(i=s[r])&&void 0!==i?i:null==s?void 0:s.default[r]}),e?t?[[a,e]]:[]:[["ui-react",Promise.all([n.e(5217),n.e(9308),n.e(7604),n.e(1438),n.e(2708)]).then(n.bind(n,26235))]],{useErrorBoundary:this.get("useErrorBoundary"),blockRadarId:this.get("blockRadarId"),customNode:this.get("customNode")})},didMount:function(){this._setProps(),this._reactAsyncCore.mount(this.el)},didUnmount:function(){this._reactAsyncCore.umount()},set:function(){i().Block.prototype.set.apply(this,arguments),this._setProps()},getComponent:function(){return this._reactAsyncCore.getComponent()},_setProps:function(){if(this.isMounted()){var e=this.getAttrsSnapshot();e.qaEnabled=!!r.Z.get("qa"),e.darkMode=this.get("darkMode"),this._reactAsyncCore.setProps(e)}}})},16330:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(41035),o=n.n(i),s=n(47759);t.Z=a().Block.extend({name:"renovator",template:o(),defaults:{isLettersRoute:!1,type:"2pane"},attrChanged:{isLettersRoute:function(e){if(e)s.default.updateRenovator();else s.default.hideRenovator()}}})},15045:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(19275),o=n(21211),s=n(18440),l=n.n(s),c=n(98370),d=n.n(c),u=n(54844),f=n(47174),m=n(53088),h=n.n(m),p=n(93286),g=n(83260),v=n.n(g),_=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame,b=!(!window.performance||"function"!=typeof performance.now||"function"!=typeof _),E={name:"scrollable",template:d(),isolate:!1,gSilentUnsubscribe:null,scrollUnsubscribe:null,wasPopstate:!1,blocks:{},defaults:{name:"default",substrated:!1,"measure-fps":!1,silent:!1,"scroll-style":"traditional","full-height":!1},_scrollingPid:void 0,_scrollingFrames:0,_scrollingStartTs:0,didMount:function(){var e=this;if(this._lastScrollTop=0,this._scrollDirection=null,this.emitOnTop=parseInt(this.attrs["emit-ontop"],10)||null,this.emitOnBottom=parseInt(this.attrs["emit-onbottom"],10)||null,this.handleScrollChange=v().debounce(this.handleScrollChange,250,this),this.sendOnBottomAnalytics=v().debounce((function(){if("function"==typeof e.isMounted&&"function"==typeof e.get&&e.isMounted()&&e.attrs)a().send("".concat(e.get("name"),"_scroll-onbottom"))}),250,this),this.emitOnTop||this.emitOnBottom){var t=this.handleScroll.bind(this);this.el.addEventListener("scroll",t,h().passiveeventlisteners?{passive:!0}:!1),this.scrollUnsubscribe=function(){return e.el.removeEventListener("scroll",t)}}if(!u.Z.isIE)this.gSilentUnsubscribe=(0,f.Z)({el:this.refs.container||this.el.firstChild,holder:this.el});this.handleScrollEnd=this.handleScrollEnd.bind(this),this.handleAnimationFrame=this.handleAnimationFrame.bind(this),this.broadcast("scrollable:mount",{scrollableElement:this.el,name:this.attrs.name})},didUnmount:function(){this.gSilentUnsubscribe&&this.gSilentUnsubscribe(),this.scrollUnsubscribe&&this.scrollUnsubscribe(),this.broadcast("scrollable:unmount",{scrollableElement:this.el,name:this.attrs.name})},getScrollDir:function(){return this._scrollDirection},getScrollPos:function(){var e={x:0,y:0};if(this.el&&void 0!==this.el.scrollLeft)e={x:this.el.scrollLeft,y:this.el.scrollTop};return e},scrollTo:function(e,t){if(this.isMounted())e=!e&&0!==e?!1:parseInt(e,10),!1!==(t=!t&&0!==t?!1:parseInt(t,10))&&(this.el.scrollTop=t),!1!==e&&(this.el.scrollLeft=e)},reset:function(){this.scrollTo(0,0)},handleScroll:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight,a=n+t.offsetHeight,i=n-this._lastScrollTop>0;if(this._lastScrollTop=n,this._scrollDirection=i?"down":"up",!this.is("silent")){if(this.emitOnBottom&&i&&a+this.emitOnBottom>=r)this.broadcast("scroll:onbottom"),this.sendOnBottomAnalytics();if(this.emitOnTop&&!i&&n<this.emitOnTop)this.broadcast("scroll:ontop");this.broadcast("scroll:change",n)}if(this.handleScrollChange(),b&&this.is("measure-fps")){if(!this._scrollingPid)this._scrollingFrames=0,this._scrollingStartTs=performance.now(),_(this.handleAnimationFrame);window.clearTimeout(this._scrollingPid),this._scrollingPid=window.setTimeout(this.handleScrollEnd,200)}},handleScrollChange:function(){if(!!i.Z.qa&&this.isMounted()&&this.el)this.el.setAttribute("data-qa-value",this._lastScrollTop)},handleScrollEnd:function(){if(delete this._scrollingPid,!this.destroyed&&!this.zombie){var e=(performance.now()-this._scrollingStartTs)/1e3,t=Math.round(this._scrollingFrames/e);if((0,p.ZP)({type:"fps_scroll_".concat(this.get("name")),value:t,intervals:[["old",t]]}),o.IS_DEBUG)console.log("FPS",this.get("name"),t);if(0===this.el.scrollTop&&this.wasPopstate)this.broadcast("scrollable:advontop"),this.wasPopstate=!1;this.broadcast("scroll:end")}},handleAnimationFrame:function(){if(this._scrollingPid)this._scrollingFrames++,_(this.handleAnimationFrame)}},y=l().Block.extend(E);y.getScrollableBlock=function(e){return y.getInstances().find((function(t){return t.contains(e)}))},y.getScrollableElem=function(e){return y.getInstances().map((function(e){return e.el})).find((function(t){return t.contains(e)}))},t.Z=y},60319:function(e,t,n){"use strict";n.d(t,{Z:function(){return p},l:function(){return h}});var r,a,i=n(21211),o=n(18440),s=n.n(o),l=n(19658),c=n.n(l),d=n(61799),u=n(93286),f=n(51474),m=n(2581);!function(e){e.BLUR="search-panel:blur",e.FOCUS="search-panel:focus"}(r||(r={})),function(e){e.BLUR="searchpanel:blur",e.FOCUS="searchpanel:focus"}(a||(a={}));var h={name:"search-panel",template:c(),blocks:{"search-panel-button":m.Z,"react-async":f.Z},events:{expandSearchPanel:"expandSearchPanel"},defaults:{categories:i.SEARCH_CATEGORIES,colorTags:i.COLOR_TAGS},constructor:function(){s().Block.apply(this,arguments),this.handleSearchPanelBlur=this.handleSearchPanelBlur.bind(this)},getSearchInput:function(){return this.ids["search-panel"].getComponent()},expandSearchPanel:function(){var e=this.is("active");this.set("active",!0);var t=this.getSearchInput();if(t){if(e)t.focus();else t.focusAfterExpand();(0,u.ZP)("srch-expand"),this.broadcast(r.FOCUS)}},focus:function(){var e;this.set("active",!0),null===(e=this.getSearchInput())||void 0===e||e.focus()},handleSearchPanelBlur:function(){this.broadcast(r.BLUR)},reset:function(){var e;if(this.is("active"))null===(e=this.getSearchInput())||void 0===e||e.blur(),this.set("active",!1),this.broadcast(r.BLUR),this.get("store").search.clear()}},p=s().Block.extend((0,d.Z)()(h))},93185:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(78091),o=n.n(i),s=n(56302),l=n(95470),c=n(90557);t.Z=a().Block.extend({name:"select",template:o(),blocks:{list:s.Z,"list-item":l.Z},events:{"control-click":"onControlClick","item-click":"onItemClick","list-hide":"hide"},defaults:{autochange:!0,"default-selected-index":null,"disabled-index":null,expanded:!1,items:[],"selected-index":null,touch:!1},attrChanged:{"selected-index":function(e){this.broadcast("item-change",this.getItem(e))},expanded:function(e){var t=this;(0,c.BA)().then((0,c.qh)(this,(function(n){if(e)n("escape",t.onEscape);else n.unbind("escape",t.onEscape)}))),this.broadcast("toggle",e)}},userToggled:!1,onControlClick:function(){this.userToggled=!0,this.invert("expanded")},onOutsideClick:function(e){if(!this.el.contains(e.target))this.hide()},onItemClick:function(e){var t=e.details;if(this.hide(),this.is("autochange"))this.set("selected-index",this.indexOf(t));return!0},hide:function(){this.set("expanded",!1)},getItem:function(e){return this.get("items")[e]},getSelectedItem:function(){var e=this;if(this.get("multiple")){var t=[];return this.getSelectedIndex().forEach((function(n){t.push(e.get("items")[n])})),t}return this.get("items")[this.getSelectedIndex()]},indexOf:function(e){return this.get("items").indexOf(e)},getSelectedIndex:function(){var e=this.get("selected-index");if(null==e)return this.get("default-selected-index");else return e},getItemAttr:function(e,t){if(!e)if("text"===t)return i18n("Выберите элемент");else return null;if("function"!=typeof e.get)if("text"===t||"key"===t)return e[t]||e.text||String(e);else return e[t];if("key"===t)return e.get("key")||e.get("text");else return e.get(t)},didMount:function(){var e=this;this.set("selected-index",this.getSelectedIndex()),this.toggleOutsideListener(!0),this.onEscape=function(t){t.stopImmediatePropagation(),e.hide()}},didUnmount:function(){this.toggleOutsideListener(!1)},toggleOutsideListener:function(e){this[e?"$on":"$off"](this.el.ownerDocument,"click","onOutsideClick")}})},10154:function(e,t,n){"use strict";var r=n(18440),a=n.n(r),i=n(68385),o=n.n(i),s=n(61799);t.Z=a().Block.extend((0,s.Z)({events:[{name:"help:open",rename:"help_open"}]})({name:"settings-help-link",template:o()}))},59193:function(e,t,n){"use strict";var r=n(17717),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(12241),c=n.n(l),d=n(88255),u=n(61799),f=n(45114),m=a().get("security-checkup-link");t.Z=s().Block.extend((0,u.Z)({events:[{name:"threads:toggle",rename:"threads_toggle",immediate:!0},{name:"metathreads:toggle",rename:"metathreads_toggle",immediate:!0},{name:"ponymode:toggle",rename:"ponymode_click",immediate:!0},{name:"help:open",rename:"help_open"},{name:"notifications:click",rename:"notifications_click"},{name:"themes:panel",rename:"themes_panel"},{name:"layout:toggle",rename:"layout_toggle"},{name:"subscriptions:open",rename:"subscriptions_click"},{name:"settings:click",rename:"settings_click"},{name:"cleanmaster:click",rename:"cleanmaster_click"},{name:"language:click",rename:"language_click"},{name:"tomyself:toggle",rename:"tomyself_toggle",immediate:!0},{name:"paginator:toggle",rename:"paginator_toggle",immediate:!0},{name:d.tY,rename:"todo_toggle",immediate:!0},{name:"shortcuts:toggle",rename:"shortcuts_toggle",immediate:!0},{name:"settings:open",rename:"dock"}]})({name:"settings",template:c(),blocks:{button2:f.Z},defaults:{"open-as-page":i.WEBVIEW,"notification-badge":!i.IS_VK_MINI_APP&&!m.state&&i.SHOW_SECURITY_CHECKUP_LINK_IN_SETTINGS},events:{"settings-icon:click":"onSettingsClick"},onSettingsClick:function(){this.broadcast(this.get("open-as-page")?"settings:click":"settings:open")}}))},13839:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r=n(21211),a=n(18440),i=n.n(a),o=n(71745),s=n(6349),l=n.n(s),c=n(81690),d=n(67808),u=n(94738),f=n(47759),m=n(61799),h=n(93286),p=n(98039),g=n(75163),v=n.n(g),_=n(48250),b=n(12199),E=i().Block.extend((0,m.Z)({events:[{name:"click-radar",rename:"click"}]})({name:"compose-button",template:v(),defaults:{},blocks:{ico:b.Z},events:{"keydown:enter":"onKeydownEnter"},didMount:function(){this.onResize=this.onResize.bind(this),this.adaptiveHandler=new _.O({pureBreakpoints:!0,breakpoints:[{conditions:function(e){return e.width<150},props:{short:!0}},{props:{short:!1}}],onResize:this.onResize,element:this.el})},didUnmount:function(){this.adaptiveHandler.destroy()},onResize:function(e){this.set(e)},onKeydownEnter:function(){$(this.el).click()},focus:function(){this.refs.wrapper.focus()}})),y=n(92203),T=n(94993),A=n(37874),S=n(51474),O=n(59193),C=n(27853),w=n(21888),L=n(7958),k=n(93043),I=n(90557),R=i().Block.extend((0,m.Z)({explicit:"radar"})({name:"sidebar-folders",template:l(),blocks:{badge:p.Z,"compose-button":E,"compose-dropdown":y.Z,ico:b.Z,"nav-folders":A.Z,settings:O.Z,sidebar:C.Z,"sidebar-widgets":w.Z,widget:k.Z,dropdown:T.Z,"react-async":S.Z},lazyBlocks:{"themes-widget":I.Ll},events:{"folder:click":"onFolderClick","drag:over":"openSideBar","search:inbox:click":"onInboxClick","sidebar-resize-full":"onSidebarFullResize","sidebar-resize-short":"onSidebarShortResize","menu-settings:click":"onSettingsClick","reload:click":"onReloadClick"},defaults:{"folder-active":void 0,models:null,ponymode:!1,hideComposeBtn:!1,router:null,isExpandedWidth:!1,short:!1,"widget-enabled":!1,"is-pdd-user":!1,"invite-calls":r.CALLS&&!r.CALLS_DISABLE_COMPOSE_DROPDOWN,categories:r.SEARCH_CATEGORIES,colorTags:r.COLOR_TAGS,"css-vars-fallback":r.CSS_VARS_FALLBACK,webview:r.WEBVIEW,showUnsubscribeButton:r.SHOW_SIDEBAR_UNSUBSCRIBE_BUTTON,"show-reload-button":r.SHOW_RELOAD_BUTTON},attrChanged:{"folder-active":function(){this.closeSidebar()},short:function(e){if(e)f.default.update()}},constructor:function(){i().Block.prototype.constructor.apply(this,arguments),this.onResize=this.onResize.bind(this)},didMount:function(){var e=this,t=new c.h(this.onResize),n=new u.Z((function(e){t.requestDebouncedFrame(e)}));n.observe(this.el),this.resizeObserver=n,this.resizeDebouncer=t,this.el.dragHandleEvent=function(t){return e.onDrag(t)}},getWidgetsMinHeight:function(){return L.AB[this.is("ponymode")?"pony":"normal"]},onSidebarShortResize:function(e){var t=e.details;this.el.style.setProperty("--sidebar-short-folders-header-height","".concat(t.header,"px")),this.el.style.setProperty("--sidebar-short-widgets-min-height","".concat(t.footer,"px"))},onReloadClick:function(){location.reload()},onSidebarFullResize:function(e){var t=e.details;this.el.style.setProperty("--sidebar-folders-header-height","".concat(t.header,"px")),this.el.style.setProperty("--vkui--octavius_size_sidebar_widgets_height_min--regular","".concat(t.footer,"px"))},didUnmount:function(){this.el.dragHandleEvent=null,this.resizeObserver.disconnect(),this.resizeDebouncer.destroy()},pureSet:function(e,t){if(this.get("key")!==t)this.set(e,t)},onResize:function(e){if(e[0].contentRect.width<=d.tK)this.pureSet("short",!0);else this.pureSet("short",!1)},onFolderClick:function(e){if(e.details.id==this.get("folder-active")&&!e.isDefaultPrevented())this.closeSidebar()},onDrag:function(e){if("dragenter"==e.type)this.openSideBar()},onMouseDrop:function(){var e=this;this.dropTimeout=setTimeout((function(){e.closeSidebar(),e.$off(e.el,"mousemove","onMouseMove"),e.$off(e.el,"mouseleave","onMouseDrop"),e.$off(e.el,"mouseup","onMouseDrop")}),600),this.$one(this.el,"mouseenter",(function(){clearTimeout(e.dropTimeout)}))},onMouseMove:function(e){var t=this.el.getBoundingClientRect(),n=t.top,r=t.bottom,a=e.clientY<n+60,i=e.clientY>r-120,o=this.ids.sidebar.getFullScrollable();if((a||i)&&o){var s=o.getScrollPos().y+5*(a?-1:1);o.scrollTo(0,s,!0)}},getTotalUnread:function(){return(0,o.ig)(!0)},openSideBar:function(){this.ids.sidebar.open(),this.$on(this.el,"mouseleave","onMouseDrop"),this.$on(this.el,"mouseup","onMouseDrop"),this.$on(this.el,"mousemove","onMouseMove")},closeSidebar:function(){this.ids.sidebar.close()},onInboxClick:function(){(0,h.ZP)("search-direct-inbox_click")},getInboxUrl:function(){var e=this.get("router");return null==e?void 0:e.getUrl("#letters")},isHideHeadline:function(){return r.HIDE_HEADLINE},isWebView:function(){return r.WEBVIEW},useNewToolbar:function(){return r.NEW_TOOLBAR},onSettingsClick:function(){(0,h.ZP)("sidebar-menu_settings_click")}}))},7958:function(e,t,n){"use strict";n.d(t,{Di:function(){return r},dJ:function(){return a},K3:function(){return i},AB:function(){return o}});var r={deactivateNotifyBadge:"sidebarmenu:deactivatenotifybadge"},a={width:28,height:28},i={width:40,height:40},o={normal:{short:2*i.height+24,full:i.height+24},pony:{short:2*a.height+24,full:a.height+24}}},21888:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(93026),s=n.n(o),l=n(48250),c=n(61799),d=n(93286),u=n(94993),f=n(59193),m=n(7958),h=n(93043),p=r.SHOW_RELOAD_BUTTON?2:1,g=r.NEW_TOOLBAR?[]:r.SIDEBAR_MENU_LIST_CONFIG.filter((function(e){return!e.hidden})),v=g.length+p;t.Z=i().Block.extend((0,c.Z)({explicit:"radar"})({name:"sidebar-widgets",template:s(),blocks:{settings:f.Z,widget:h.Z,dropdown:u.Z},events:{"folder:click":"onFolderClick","drag:over":"openSideBar","menu-item:click":"onMenuItemClick","menu-settings:click":"onSettingsClick","search:inbox:click":"onInboxClick","reload:click":"onReloadClick"},defaults:{"pony-mode":!1,"vertical-list":!1,"menu-widget-list":[],"menu-dropdown-list":[],short:!1,"is-pay-widget-helper-active":!1,"is-pdd-user":!1,"css-vars-fallback":r.CSS_VARS_FALLBACK,"widget-sent-radars":{},"show-reload-button":r.SHOW_RELOAD_BUTTON},constructor:function(){i().Block.prototype.constructor.apply(this,arguments),this.onResize=this.onResize.bind(this)},getWidgetSizes:function(){return this.is("pony-mode")?m.dJ:m.K3},didMount:function(){var e=this;this.adaptiveHandler=new l.O({pureBreakpoints:!0,breakpoints:[{conditions:function(t){var n=t.height;if(t.width<165)return!1;var r=e.getWidgetSizes();return v*r.height<=n},props:{"vertical-list":!0,"menu-widget-list":g,"menu-dropdown-list":[]}},{conditions:function(t){var n=t.width,r=e.getWidgetSizes();return v*r.width<=n},props:{"vertical-list":!1,"menu-widget-list":g,"menu-dropdown-list":[]}},{conditions:function(t){return t.width<2*e.getWidgetSizes().width},props:function(t){var n=t.height,r=e.getWidgetSizes(),a=Math.floor(n/r.height)-p;if(a<g.length){var i=Math.max(a-1,0);return{"vertical-list":!0,"menu-widget-list":g.slice(0,i),"menu-dropdown-list":g.slice(i)}}return{"vertical-list":!0,"menu-widget-list":g,"menu-dropdown-list":[]}}},{props:function(t){var n=t.width,r=e.getWidgetSizes(),a=Math.floor(n/r.width)-p-1;return{"menu-widget-list":g.slice(0,a),"menu-dropdown-list":g.slice(a),"vertical-list":!1}}}],element:this.el,onResize:this.onResize})},sendWidgetRadars:function(e,t,n){var r=this;if(e)e.forEach((function(e){var a=e.type;if(!r.attrs["widget-sent-radars"][a])r.onSendRadar(a,t,n)}))},shouldUpdate:function(e){return this.sendWidgetRadars(e["menu-widget-list"],!1,"show"),this.sendWidgetRadars(e["menu-dropdown-list"],!0,"show"),Object.keys(e).length>0},isPayWidgetInDropdown:function(){return this.get("menu-dropdown-list").some((function(e){return"pay"===e.type}))},onResize:function(e){this.set(e)},didUnmount:function(){this.adaptiveHandler.destroy()},onSettingsClick:function(){this.onSendRadar("settings",!1,"click")},onReloadClick:function(){location.reload()},onMenuItemClick:function(e){var t=e.details,n=t.get("type"),r=t.get("dropDownMode");if(this.onSendRadar(n,r,"click"),"pay"===n&&this.get("is-pay-widget-helper-active"))this.broadcast(m.Di.deactivateNotifyBadge),this.set("is-pay-widget-helper-active",!1),(0,d.ZP)({type:"sidebar_pay_notif_click"})},onSendRadar:function(e,t,n){if(void 0===t)t=!1;var a={dropdown:t,isList:!!this.get("vertical-list")};if("pay"===e)a.payImage=r.PAY_IMAGE_VARIANT;var i="sidebar-menu_".concat(e,"_").concat(n);if((0,d.ZP)({type:i,dwh:a}),"show"===n)this.attrs["widget-sent-radars"][e]=!0},useNewToolbar:function(){return r.NEW_TOOLBAR}}))},27853:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(21211),o=n(18440),s=n.n(o),l=n(51828),c=n.n(l),d=n(81690),u=n(94738),f=n(47759),m=n(61799),h=n(12199),p=n(15045),g=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};function v(e,t){var n,r,a=parseInt(getComputedStyle(t).getPropertyValue("--vkui--octavius_size_sidebar_padding_top--regular"))||12,i=t.offsetHeight-a,o=e.header,s=e.content,l=e.footer,c=e.themesWidget,d=o.el.offsetHeight;i-=d,i-=l.minSize;var u=null!==(r=null===(n=null==c?void 0:c.el)||void 0===n?void 0:n.offsetHeight)&&void 0!==r?r:0;i-=u;var f=l.minSize,m=s.el.offsetHeight-i;if(m>0)return{header:d,themesWidget:u,footer:f};else{var h=-m;return{header:d,themesWidget:u,footer:l.minSize+h}}}t.Z=s().Block.extend((0,m.Z)({explicit:"radar"})({name:"sidebar",template:c(),blocks:{ico:h.Z,scrollable:p.Z},events:{"sidebar:toggle":"onToggleOpenState"},defaults:{open:!1,"open-left":!1,ponymode:!1,short:!1,isSearch:!1,"css-vars-fallback":i.CSS_VARS_FALLBACK},attrChanged:{open:function(e){this[e?"$on":"$off"](this.el.ownerDocument,"mousedown",this.onOutsideClick),e&&this.radar("open")},short:function(e){if(!e)this.close()}},constructor:function(){s().Block.prototype.constructor.apply(this,arguments),this.subscribeToResize=this.subscribeToResize.bind(this),this.onResizeFull=this.onResizeFull.bind(this),this.onResizeShort=this.onResizeShort.bind(this),this.onOutsideClick=this.onOutsideClick.bind(this);var e=new d.h(this.onResizeFull),t=new d.h(this.onResizeShort);this.resizeObserver=new u.Z((function(t){e.requestDebouncedFrame(t)})),this.shortResizeObserver=new u.Z((function(e){t.requestDebouncedFrame(e)})),this.resizeDebouncer=e,this.shortResizeDebouncer=e},onResizeFull:function(){if(!i.NEW_TOOLBAR&&this.hasFullMenu())this.broadcast("resize-full",v(this.getFullBlocks(),this.refs.full))},onResizeShort:function(e){if(this.isMounted()){if(!i.NEW_TOOLBAR&&this.hasShortMenu())this.broadcast("resize-short",v(this.getShortBlocks(),this.refs.short))}else a().send("sidebar-resize-after-unmount",{rlog:"octavius-sidebar-update-err",rlog_message:{name:"sidebar-resize-after-unmount",state:{zombie:this.zombie,destroyed:this.destroyed,mounted:this.mounted,unmountCalled:this.unmountCalled},entries:null==e?void 0:e.map((function(e){var t;return null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.className})),err:new Error("empty")}})},getShortBlocks:function(){return{header:{el:this.refs["top-menu-short"]},content:{el:this.refs["content-short"]},footer:{el:this.refs["bottom-menu-short"],minSize:this.get("short-footer-min-height")}}},getFullBlocks:function(){return{header:{el:this.refs["top-menu-full"]},content:{el:this.refs["content-full"]},footer:{el:this.refs["bottom-menu-full"],minSize:this.get("footer-min-height")}}},didMount:function(){this.subscribeToResize("mount")},didUpdate:function(){this.subscribeToResize("update")},didUnmount:function(){this.unmountCalled=!0,this.resizeDebouncer.destroy(),this.shortResizeDebouncer.destroy(),this.resizeObserver.disconnect(),this.shortResizeObserver.disconnect()},onToggleOpenState:function(){if(this.invert("open"),this.get("open"))setTimeout((function(){f.default.update()}),1e3)},onOutsideClick:function(e){var t=this;if(!this.el.contains(e.target))setTimeout((function(){t.close()}),300)},subscribeToResize:function(e){var t=this;if(!this.isMounted())a().send("sidebar-subscribe-after-unmount",{rlog:"octavius-sidebar-update-err",rlog_message:{name:"sidebar-subscribe-after-unmount",initiator:e,state:{zombie:this.zombie,destroyed:this.destroyed,mounted:this.mounted,unmountCalled:this.unmountCalled},err:new Error("empty")}});if(this.hasShortMenu())g([this.refs.short],Object.values(this.getShortBlocks()).map((function(e){return e.el})),!0).forEach((function(e){return t.shortResizeObserver.observe(e)}));if(this.hasFullMenu())g([this.refs.full],Object.values(this.getFullBlocks()).map((function(e){return e.el})),!0).forEach((function(e){return t.resizeObserver.observe(e)}))},hasShortMenu:function(){return this.is("short")},hasFullMenu:function(){return!this.is("short")||this.is("open")},open:function(){this.set("open",!0)},close:function(){this.set("open",!1)},getFullScrollable:function(){return this.ids.scrollFull}}))},39385:function(e,t,n){"use strict";n.d(t,{u:function(){return J},Z:function(){return $}});var r=n(21528),a=n(17717),i=n.n(a),o=n(50987),s=n(52532),l=n(21211),c=n(18440),d=n.n(c),u=n(19008),f=n(44438),m=n(16288),h=n.n(m),p=n(75705),g=n(83183),v=n(43845),_=n(73513),b=n(29404),E=n(56553),y=n.n(E),T=n(4872),A=n.n(T),S=n(33440),O=n(39783),C=n.n(O),w=n(75273),L=n(66225),k=n(74456),I=n(63062),R=n(47759),D=n(61799),M=n(93286),P=n(68275),N=n(77917),x=n(57045),F=n(98039),U=n(90926),H=n(53263),B=n(59574),Z=n(6119),G=n(91206),q=n(41026),j=n(22083),W=n(51474),V=n(15045),z=n(34975),Y=n.n(z),K=n(53785),X=d().Block.extend({name:"thread-subject",template:Y(),didMount:function(){(0,K.u)(this.el,"tr-subj")}}),Q=n(90557),J={name:"thread",template:h(),performanceTrace:"track",blocks:{delimeter:H.Z,"letter-list-item":Z.Z,"letter-list-item-placeholder":G.Z,"letter-category":B.Z,"letter-meta":q.Z,"category-feedback":U.Z,"promo-domain-die":j.Z,"thread-subject":X,badge:F.Z,"react-async":W.Z},lazyBlocks:{letter:Q.FV},events:{"draft:open":"onDraftOpen","letter:open":"onLetterOpen","letter:close":"onLetterClose","letter:rightclick":"onRightClick","letter-meta:render":"onLetterMetaRender","letter-meta:letterclick":"onLetterMetaClick","letter-meta:toggle-ics":"onToggleIcsAttach","translator:scrollto":"onTranslatorScrollTo"},defaults:{sticky:null,"sticky-disabled":!1,"disable-category":!1,"enable-amp":l.ENABLE_AMP,noDivider:!1,"category-feedback":l.CATEGORY_FEEDBACK,touch:l.TOUCH_MODE,"dark-mode":!1,kaspersky:l.KASPERSKY,senderEmail:"",isResendDropdownDisabled:l.IS_RESEND_DROPDOWN_DISABLED,actualReasonFeedback:l.ACTUAL_REASON_FEEDBACK,showOfficialSender:l.SHOW_OFFICIAL_SENDER_PROMO,showReliableSender:l.SHOW_RELIABLE_SENDER_PROMO,attachListHidden:!1,categoryFeedbackPlateShowed:!1,showSelectionContextMenuIntegration:l.SHOW_LETTER_BODY_SELECTION_INTEGRATION,sendSelectionTextIntegrationRadar:l.SEND_SELECTION_TEXT_LETTER_RADAR},attrChanged:{model:function(e,t){this.isModelFullyLoaded=e&&e.isDataFully(),this.unbindThread(t),this.bindThread(e)},"load-draft-disabled":function(e){if(!1===e)this._loadDraft(this.get("model"))},"expand-letter-id":function(e){if(e&&this.get("model"))this._setExpanded(this.get("model"),!0)}},constructor:function(){d().Block.apply(this,arguments),this.onKasperskyLogoClick=this.onKasperskyLogoClick.bind(this);var e=this.get("model");if(e)this.isModelFullyLoaded=e.isDataFully(),this._setExpanded(e)},didMount:function(){(0,v.PI)("readletter"),R.default.update()},didUnmount:function(){if(this.settedExpidAliexpress)this.settedExpidAliexpress=!1,(0,w.Gv)("exp_id"),(0,M.ZP)("aliexpress-resetting-exp-id");this.unbindThread(this.get("model"))},bindThread:function(e){var t=this;if(e){this._setExpandedBind=function(){if(t.isMounted())t._setExpanded(e)},this._onThreadLoaded=function(){if(t.isMounted())t._setExpanded(e,!1,!0),t._emitRecalcAfterUpdate=!0};var n=this.get("direction")||"next";this.el.classList.remove("thread_direction-prev","thread_direction-next"),this.el.offsetWidth,this.el.classList.add("thread_direction-".concat(n)),this._letterChangeBind=function(e){var n=e.target,r=e.changes;if(!t.destroyed&&r.includes("folder")){var a=n.getFolder();if(a&&!a.isSpam()&&!a.isTrashLike())t._closeLetter(n)}},e.meta("unread-on-open",e.get("flags.unread")),e.on("change",this._setExpandedBind),e.on("loaded-changes",this._onThreadLoaded),e.get("messages").on("change",this._letterChangeBind),this._setExpandedBind(),this._emitRecalcAfterUpdate=!0,this._loadDraft(e)}},usePortalSearchPanel:function(){return l.SEARCH_PANEL_PORTAL},getSenderEmail:function(e){var t;return null!==(t=(0,u.WE)(e,"from",".0.email"))&&void 0!==t?t:""},getReceivers:function(e){return(0,u.WE)(e,"to")},unbindThread:function(e){if(e)this._letterChangeBind&&e.get("messages").off("change",this._letterChangeBind),this._setExpandedBind&&e.off("change",this._setExpandedBind),this._setExpandedForceBind&&e.off("loaded-changes",this._onThreadLoaded),this._letterChangeBind=null,this._setExpandedBind=null,this._setExpandedForceBind=null,delete this._showCategoryFeedback,this.set("noDivider",!1,!0)},isOfficialSender:function(e){var t=e.get("messages.0");return t.is("headers.X-Mailru-Bimi-Organization")&&(t.is("flags.official")||t.is("flags.official_newsletter"))},isReliableSender:function(e){var t=e.get("messages.0");return t.is("headers.X-Mailru-Bimi-Organization")&&(t.is("flags.bimi_msg")||t.is("flags.bimi_important_msg"))},isFakeDoorFmail18333Visible:function(e){return"ru_RU"===o.Z.get("LANG")&&!x.ZP.get("fake-door-header-fmail-18333",{email:!1})&&"tomyself"===e.getFolder().get("type")},isTrackingStatusPlate:function(){return l.TRACKING_STATUS_PLATE&&this.get("model").get("transaction_metadata").get("statement_status")},isCollapsed:function(e){return!this._expandedLetters[e]},isStickyEnabled:function(){return!this.is("sticky-disabled")},isSticky:function(e){var t=this.get("sticky");return t&&t.id===e},isNextCollapsed:function(e){var t=this.get("model").get("messages")[e+1];return t&&this.isCollapsed(t.id)},isPrevCollapsed:function(e){var t=this.get("model").get("messages")[e-1];return t&&this.isCollapsed(t.id)},isHideCategory:function(e){var t=e.get("transaction_category");return this.get("noDivider")&&("event"===t||"fees"===t||"order"===t||"travel"===t)},hasCategory:function(e){var t=e.get("transaction_category"),n=e.getFolder().isMetathread(),r=t||n;if(void 0===this._showCategoryFeedback&&r)this._showCategoryFeedback=r;return r||this._showCategoryFeedback},actualLettersEnabled:function(){var e,t,n;return(0,s.E)(this.get("router"),null===(e=this.get("model"))||void 0===e?void 0:e.getFolder(),null===(t=this.get("model"))||void 0===t?void 0:t.get("flags.newsletter"),null===(n=this.get("model"))||void 0===n?void 0:n.get("transaction_category"))},onShowCategoryFeedbackPlate:function(){this.set("categoryFeedbackPlateShowed",!0,!1)},isShowCategoryFeedbackPlate:function(){var e,t,n=this.get("model"),r=null===(e=n.getFolder())||void 0===e?void 0:e.isSpam(),a=l.SHOW_CATEGORY_FEEDBACK_PLATE&&!r&&n.get("messages.0").is("user_feedback");if(l.USE_QUEUE_CATEGORY_FEEDBACK_PLATE&&a){var i=null===(t=n.get("messages.0").get("user_feedback"))||void 0===t?void 0:t.category,o=x.ZP.get("letter.meta-category-feedback-shows")||{},s=this.get("categoryFeedbackPlateShowed");if(!o.hasOwnProperty(i))return a;if(o[i].countShows>=l.MAX_COUNT_SHOW_CATEGORY_FEEDBACK_PLATE&&!s)return!1;if((0,p.V)()-o[i].time<l.DELAY_CATEGORY_FEEDBACK_PLATE&&!s)return!1}return a},isShowPromoPush:function(){var e=this.get("model"),t=e.getFolder(),n=l.SHOW_PROMO_PUSH_PLATE&&!t.isSpam()&&!t.isTrash()&&!i().get("relevant-messages-push-promo").state&&!i().get("relevant-messages-push-promo").getCount("close")&&e.get("flags.is_relevant");if(l.USE_QUEUE_PROMO_PUSH_PLATE){var r=+x.ZP.get("letter.meta-promo-push-show")||0,a=i().get("relevant-messages-push-promo").getTimeDelta((0,p.V)());if(r>=l.COUNT_SHOW_PROMO_PUSH_PLATE_BEFORE_DELAY)if(a<l.DELAY_PROMO_PUSH_PLATE)return!1;else x.ZP.set("letter.meta-promo-push-show",0)}return n},isShowPlateMailingSubscribe:function(){if(!l.SHOW_PLATE_NEWSLETTER_MAILING_SUBCRIBE)return!1;var e=this.get("model"),t=(x.ZP.get("newsletter-mailing-choiced-list")||"").split(","),n=e.get("correspondents.from.0.email");return e.get("flags.newsletter")&&!t.includes(n)},getMessageFolder:function(){return A().get(this.get("model").getFolder())},setExpId:function(e){this.settedExpidAliexpress=!0,(0,w.Fz)("exp_id",e),(0,M.ZP)("aliexpress-set-exp-id_"+e)},_setExpanded:function(e,t,n){var a=this;if(void 0===t)t=!1;if(void 0===n)n=!1;var i=e.get("messages")||[],o=this.get("expand-letter-id"),s=e.get("transaction_metadata"),l=e.get("messages.0"),c=l&&l.get("correspondents.from.0");if(e.id!==this._threadId||!this._expandedLetters||t||n){if(this._threadId=e.id,!n)this._expandedLetters={};if(i.forEach((function(t){if(!n||!a._expandedLetters.hasOwnProperty(t.id)){var r=!a.get("preview-mode"),i=e.canUnfoldMessage(t),s=r&&i;if(o){var l=t.id.split(";")[0];s=o===t.id||o===l}if(t&&!t.isDataFully())s=void 0;a._expandedLetters[t.id]=s}})),o&&void 0===this._expandedLetters[o]){var d=i.get(o);if(!d)(0,M.ZP)("search_letter_too_far");this._loadLetter(d,{behavior:"auto"})}}if(r.default.has("aliexpress-exp-id")&&c){var u=r.default.getAsArray("aliexpress-exp-id"),f=r.default.getAsArray("aliexpress-exp-id-emails");if(s&&"aliexpress"===s.type||c.email===f[0])this.setExpId(u[0]);else if(c.email===f[1])this.setExpId(u[1]);else if(c.email===f[2])this.setExpId(u[2]);else if(/aliexpress.com$/.test(c.email))this.setExpId(u[3])}},_loadDraft:function(e){var t=this,n=e.get("messages")[0];if(this.set("hasDraft",!1),n&&n.get("id")===e.get("expand")){var r=n.get("drafts.last_type");if(r){var a=n.get("drafts.".concat(r));if(a){this.set("hasDraft",!0);var i=n.get("folder");C().fetchData({id:a,folder_id:i,remove_emoji_opts:g.Y},!0,!0).then((function(e){t.set("draft",new(C())(e)),t.set("draft-source",{id:n.get("id"),mode:r})}),(function(){t.set("hasDraft",!1),n.set("drafts.".concat(r),"")}))}}}},onTranslatorScrollTo:function(e){this.scrollLetterIntoView(e.target)},scrollLetterIntoView:function(e,t){if(void 0===t)t={behavior:"smooth"};if(!this.isMounted())return!1;var n=e;if("string"==typeof e)n=this.el.querySelector((0,N.selector)('[data-id="'.concat(e,'"]')));var r=V.Z.getScrollableBlock(this);if(!n||!r)return!1;var a=this.el.getBoundingClientRect().top,i=n.getBoundingClientRect().top-a,o=r.get("silent");r.set({silent:!0});try{r.el.scrollTo({top:i,behavior:t.behavior||"smooth"})}catch(e){r.el.scrollTop=i}return r.set({silent:o}),!0},scheduleScrollLetterIntoView:function(e){this._scrollToIdAfterUpdate=e},didUpdate:function(){var e,t=this;if((0,_.i)(null===(e=this.get("model"))||void 0===e?void 0:e.get("id")),this._scrollToIdAfterUpdate)this.scrollLetterIntoView(this._scrollToIdAfterUpdate),this._scrollToIdAfterUpdate=null;if(this._emitRecalcAfterUpdate)this._emitRecalcAfterUpdate=!1,this.broadcast("force:recalc");if(l.THREAD_SWITCH_RACE_FIX){var n=this.get("model");if(!this.isModelFullyLoaded&&n&&n.isDataFully())this.isModelFullyLoaded=!0,this._setExpanded(n,!0),window.setTimeout((function(){if(t.isMounted())t.render()}))}},_loadLetter:function(e,t){var n=this;if(e){var r=e.is("flags.unread"),a=e.get("id"),i=e.get("folder");if(r)y().execute({flag:"unread",state:!1,models:[e]});e.fetch({id:a,folder_id:i,use_color_scheme:l.DARK_MODE_MEDIA_QUERY?1:0}).then((function(){if(n._expandedLetters[a]=!0,n.update(),null!==t)n.scrollLetterIntoView(a,t)})).catch((function(e){if(console.log(e),e&&!e.body)(0,k.Z)("trackJS").then((function(t){return t.addErrorFromApp(e,"octavius_smth_wrong")})),I.default.error({unique:!0})}))}},_closeLetter:function(e){this._expandedLetters[e.get("id")]=void 0},update:function(){this.render()},onDraftOpen:function(e){var t=this.get("draft"),n=this.get("draft-source");if(!e.isDefaultPrevented())this.broadcast("compose:draft",{model:t,source:n});return!0},onLetterOpen:function(e){var t=e.details;if(!e.isDefaultPrevented())this._loadLetter(t,null);return!0},onLetterClose:function(e){if(this.get("preview-mode"))return!0;var t=window.getSelection(),n=e.details,r=this.get("model").get("messages").length;if(!e.isDefaultPrevented()&&!t.toString().length&&r>1)this.broadcast("letter:collapse",n),e.preventDefault(),this._closeLetter(n),this.update();return!0},onRightClick:function(e){e.details.folders=this.get("folders"),e.details.selectable=!1;var t={parentThread:this.get("model")};L.Z.show(e,t)},onLetterMetaRender:function(e){this.set("noDivider",!!e.details.showed)},onLetterMetaClick:function(e){var t=(e.details||{}).uidl,n=this.get("model").get("messages").find((function(e){return e.get("id")===t}));this._loadLetter(n)},getFirstCalendarAttach:function(){var e=this.get("model").getExpandMessage(),t=e.getCalendarFromAttach();if(t.length)return{messageId:e.get("id"),calendarInfo:t[0]}},isEngKasperskyLogo:function(){return l.KASPERSKY_ENG_LOGO_LANGS.includes(l.USER_LANG)},onKasperskyLogoClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.broadcast("click-kaspersky")},_formDatesMetadata:function(){var e=this.get("model"),t=e.get("dates_metadata.priority_date");if(l.DATES_METADATA&&t.timestamp&&1===e.get("messages").length)return t;else return null},getResendData:function(){var e,t,n=this.get("model").getExpandMessage();if(!n)return null;var r=n.get("resend");if(!r||!(null===(e=r.from)||void 0===e?void 0:e.length)&&!(null===(t=r.to)||void 0===t?void 0:t.length))return null;var a=n.get("date"),i=r.from,o=void 0===i?[]:i,s=r.to,l=void 0===s?[]:s,c=r.date;return{from:o,to:l,date:c?(0,f.BY)(c,!1):null,receivedDate:(0,f.BY)(a,!1)}},parentalControlDieEnabled:function(){return this.getMessageFolder().isParentalControl()||l.FORCE_PARENTAL_CONTROL_DIE},needLetterMeta:function(){var e=this.get("model"),t=e.get("transaction_metadata");return!!(e.getJsonLdInfo()||t.getAttributes()||(0,S.getCalendarIcsEvent)(e)||(0,S.getCalendarMLEvent)(e))},needLetterMetaSkeleton:function(){var e=this.get("model"),t=l.SMART_CARD_ICS&&!!(0,S.getCalendarIcsEvent)(e),n=this.isTrackingStatusPlate(),r=l.SMART_CARD_ML&&!!(0,S.getCalendarMLEvent)(e);return l.LETTER_META_SKELETON_ENABLE&&(t||n||r)},onToggleIcsAttach:function(e){this.set("showAttachList",e.details.isOpen)},needHideAttachList:function(){var e=this.get("model");if(!l.SMART_CARD_ICS||!(0,S.getCalendarIcsEvent)(e))return!1;var t=e.get("messages.0");if(1!==(null==t?void 0:t.get("attaches.list.length")))return!1;var n=t.get("correspondents.from.0.email");if(l.SHOW_ICS_ATTACH_CALENDAR_LETTER&&l.CALENDAR_EMAIL_LIST.includes(n))return!1;var r=t.get("attaches.list.0").get("name"),a=(0,P.a_)(r);return l.HIDE_ICS_ATTACH&&"ics"===a}},$=d().Block.extend((0,D.Z)({events:[{name:"mount",data:b.fo},{name:"unmount",data:b.tA},{name:"click-kaspersky",rename:"kaspersky_click"}]})(J))},35108:function(e,t,n){"use strict";var r=n(60033),a=n.n(r),i=n(20799),o=n(82010),s=n(21211),l=n(18440),c=n.n(l),d=n(71745),u=n(95250),f=n.n(u),m=n(14077),h=n(78267),p=n(45114),g=n(53485),v=n(70757),_={name:"webview-mobile-header",template:f(),blocks:{button2:p.Z,"portal-menu-element":v.Z},events:{"move:click":"onMoveToClick","folders:open":"onOpenFolders",search:"onSearchClick"},defaults:{searchMode:!1,"hide-webview-title":s.HIDE_WEBVIEW_TITLE,"disable-footer-app-toolbar":s.DISABLE_FOOTER_APP_TOOLBAR,"enable-mobile-search-button":s.ENABLE_MOBILE_SEARCH_BUTTON},attrChanged:{selected:function(){if(this.isMounted())this.set("selectedStats",this.getSelectedStats())},models:function(){if(s.USE_NEW_MOBILE_FOLDERS_MODAL)(0,i.v3)({id:o.H.folders,data:{folderActive:this.attrs.folderActive,models:this.attrs.models,router:this.attrs.router}})}},constructor:function(){c().Block.apply(this,arguments),this.setSearchMode=this.setSearchMode.bind(this)},getSelectedStats:g.u7.getSelectedStats,getSelectedCount:function(){return(0,g.Nw)({folder:this.attrs.folder,selectFolder:this.attrs.selectFolder,selected:this.attrs.selected},{searchRoute:this.attrs.route.is("#search #search-letter")})},searchMode:!1,getUnreadCount:function(){return(0,d._V)(this.attrs.folder,!1)},getReadActions:function(){var e,t,n=(null===(t=null===(e=this.attrs)||void 0===e?void 0:e.route)||void 0===t?void 0:t.is("#read-letter #search-letter"))&&!this.selectMode&&!this.attrs.letterNotFound,r=n&&this.attrs.route.params.part,a=this.attrs.selectedStats||Object.create(null),i=n&&!this.attrs.folder.isSpam()||a.nospam>0,o=n&&this.attrs.folder.isSpam(),l=this.attrs.letter,c=l&&l.get("messages").first();return[{type:"remove",short:!0,disabled:r},{type:"reply",short:!0,letter:l,disabled:r},{type:"reply-all",if:(0,m.gA)(c),short:!0,letter:l,disabled:r},{type:"forward",short:!0,letter:l,disabled:r},{type:"more",short:!0,spam:i,unspam:o,read:l.is("flags.unread"),unread:!l.is("flags.unread"),flag:!l.is("flags.flagged"),unflag:l.is("flags.flagged"),archive:!l.getFolder().isArchive()&&!s.ARCHIVE_DISABLED,"create-filter":!0,forward:!a.metathread&&!this.attrs.deselectAll,move:!0}]},onOpenFolders:function(){if(s.USE_NEW_MOBILE_FOLDERS_MODAL)(0,i.Ll)({id:o.H.folders,data:{folderActive:this.attrs.folderActive,models:this.attrs.models,router:this.attrs.router}});else this.broadcast("mobilesidebar:open")},onMoveToClick:function(){var e=this.get("model");h.default.open("move-to-folder",{folder:e.folder,folders:e.folders},{dimmer:!0,mobile:!0,resolvable:!1})},onSearchClick:function(){a().send("mobile-search_open"),this.set("searchMode",!0),this.searchMode=!0},setSearchMode:function(e){this.set("searchMode",e)}};t.Z=c().Block.extend(_)},93043:function(e,t,n){"use strict";var r=n(21211),a=n(18440),i=n.n(a),o=n(96937),s=n.n(o),l=n(72727),c=n(61799),d=n(12199),u=n(90557);t.Z=i().Block.extend((0,c.Z)({events:[{name:"click-on-link",rename:function(e){return e.get("type")+"_click"}}]})({events:{"click-on-link":"onClickLink"},name:"widget",template:s(),blocks:{ico:d.Z},lazyBlocks:{"widget-calendar":u.hj},types:{calls:{title:i18n("Видеозвонки"),link:r.WIDGET_CALLS_URL,imageVariant:r.WIDGET_ICONS_VARIANT,target:"_blank"},cloud:{title:i18n("Облако"),link:r.WIDGET_CLOUD_URL,imageVariant:r.WIDGET_ICONS_VARIANT,target:"_blank"},contacts:{title:i18n("Адресная книга"),shortcut:"g,c",link:r.WIDGET_ADDRESSBOOK_URL,imageVariant:r.WIDGET_ICONS_VARIANT,target:"_blank",ico:r.ADDRESSBOOK_ICO,dataQaId:"addressbook-open-button",promoId:"menu-item_addressbook"},bonus:{title:i18n("Бонус"),link:"https://r.mail.ru/n279211045",target:"_blank"},club:{title:i18n("Бизнес-клуб"),link:"https://r.mail.ru/n236907368",target:"_blank"},calendar:{title:i18n("Календарь"),imageVariant:r.WIDGET_ICONS_VARIANT},pay:{title:i18n("Оплаты"),link:r.WIDGET_PAYMENT_URL,target:"_blank",imageVariant:r.PAY_IMAGE_VARIANT,dataQaId:"pay-open-button_".concat(r.PAY_IMAGE_VARIANT),promoId:"menu-item_pay"},todo:{title:i18n("Задачи"),link:r.WIDGET_TODO_URL,imageVariant:r.WIDGET_ICONS_VARIANT,target:"_blank",dataQaId:"todo-open-button"}},getIcoByType:function(e){var t=this.types[e];return(null==t?void 0:t.ico)||""},getImageVariantByType:function(e){var t=this.types[e];if(t&&t.imageVariant)return"_".concat(t.imageVariant);else return""},getLinkByType:function(e){var t=this.types[e];if(t&&t.link)return t.link;else return""},getTargetByType:function(e){var t=this.types[e];if("contacts"===e)return"_self";else return t.target},getTitleByType:function(e){var t=this.types[e];if(t&&t.title)return t.title;else return""},getShortcutByType:function(e){var t=this.types[e];return t.shortcut?t.shortcut:void 0},getQaIdByType:function(e){var t=this.types[e];return t.dataQaId?t.dataQaId:void 0},getPromoIdByType:function(e){var t=this.types[e];return t.promoId?t.promoId:void 0},onClickLink:function(e){var t=this.get("type");if("contacts"===t)this.broadcast("addressbook:open"),e.preventDefault();if("pay"===t)(0,l.default)(this.getLinkByType(t)),e.preventDefault();if("todo"===t)(0,l.default)(this.getLinkByType(t)),e.preventDefault()},getTooltipTitle:function(e,t){var n=this.get("billsCount");if("pay"===e&&r.SIDEBAR_PAY_NOTIFICATION_BADGE_SMART&&n){var a=n.unpaidFines,i=n.unpaidBills,o=n.total,s=i18n("Оплаты"),l={count:a},c=a>r.BILLS_COUNTER_MAX?i18n("{count}+ штрафов",{count:r.BILLS_COUNTER_MAX}):i18n.plural(a,[i18n("{count} штрафов",l),i18n("{count} штраф",l),i18n("{count} штрафа",l)]),d={count:i},u=i>r.BILLS_COUNTER_MAX?i18n("{count}+ счетов",{count:r.BILLS_COUNTER_MAX}):i18n.plural(i,[i18n("{count} счетов",d),i18n("{count} счет",d),i18n("{count} счета",d)]),f="";switch(!0){case!o:f=i18n("Нет счетов к оплате");break;case void 0===a:f=u;break;case!a:f="".concat(i18n("Нет штрафов"),", ").concat(u);break;case!i:f=c;break;default:f="".concat(c,", ").concat(u)}return"".concat(s,", ").concat(f)}if(t)return null;else return this.getTitleByType(e)},getTotalBillsCount:function(){var e=this.get("billsCount");if(!e||!r.SIDEBAR_PAY_NOTIFICATION_BADGE_SMART)return null;else return e.total>r.BILLS_COUNTER_MAX?"".concat(r.BILLS_COUNTER_MAX,"+"):e.total}}))},89746:function(e,t,n){"use strict";var r=n(81171),a=n(62387),i=n(21211),o=n(63745),s=n.n(o),l=function(e,t,n){var r=null===i.TAGS_COLORS||void 0===i.TAGS_COLORS?void 0:i.TAGS_COLORS[e],a={"--2kit-chip-height":n?"var(--vkui--x5)":"var(--vkui--x6)","--2kit-chip-background-color":r?"var(--vkui--color_tag_background_".concat(r,")"):"var(--vkui--color_background_secondary_alpha)","--2kit-chip-background-color--hover":r?"var(--vkui--color_tag_background_".concat(r,"--hover)"):"var(--vkui--color_background_secondary_alpha--hover)","--2kit-chip-background-color--active":r?"var(--vkui--color_tag_background_".concat(r,"--active)"):"var(--vkui--color_background_secondary_alpha--active)","--2kit-chip-icon-color":r?"var(--vkui--color_tag_text_".concat(r,")"):"var(--vkui--color_icon_primary)","--2kit-chip-icon-color--active":r?"var(--vkui--color_tag_text_".concat(r,"--active)"):"var(--vkui--color_icon_primary--active)","--2kit-text-color":r?"var(--vkui--color_tag_text_".concat(r,")"):"var(--vkui--color_text_secondary)"};if(t)a["--2kit-chip-text-padding"]="0 var(--vkui--x1) 0 var(--vkui--x2)";return a};t.Z=function(e){var t=e.tag,n=e.empty,i=e.compact,c=e.onCloseClick,d=e.onClick,u=t?a.UB[t]:i18n("Добавить метку"),f=t?"color-tag:".concat(t):"color-tag:add",m=(0,o.useCallback)((function(){return d(t)}),[d,t]),h=(0,o.useCallback)((function(){return c(t)}),[c,t]);return s().createElement("span",{style:l(t,!!c,i)},s().createElement(r.Chip,{text:n?"":u,textProps:{mode:"small"},onClick:d?m:null,onCloseClick:c?h:null,testId:f}))}},42339:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r,a=n(52745),i=n(63745),o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function l(e,t){var n,r,i=this.props.errTag,o="rct-".concat(this.props.id);if(i)r={category:o,tag:this.props.errTag};(0,a.coreLoggerDispatchReactError)(e,s(s(s({},t),{source:o}),null!==(n=this.props.logData)&&void 0!==n?n:{}),r)}var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.componentDidCatch=l,t}return o(t,e),t.prototype.render=function(){return this.props.children},t}(i.Component);t.Z=c},78381:function(e,t,n){"use strict";var r,a=n(52745),i=n(21211),o=n(18440),s=n.n(o),l=n(63745),c=n.n(l),d=n(54908),u=n(30178),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function h(e,t,n){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var i=0;i<r.length;i++)if(!((null==n?void 0:n[r[i]])||Object.hasOwnProperty.call(t,r[i])&&Object.is(e[r[i]],t[r[i]])))return!1;return!0}var p={};if(i.IS_DEBUG)window.__feastBlockCache=p;var g=function(e){function t(t){var n=e.call(this,t)||this;if(n.elementRef=c().createRef(),n.innerElRef=c().createRef(),n.isInitedComponent=null,n.componentMountState=null,n.separatelyCheckedKeys={remitDetails:!0,useMediators:!0,remitEvents:!0},n.reBroadcast=function(e){var t=n.props,r=t.broadcastEvent,a=t.remitEvents,i=t.remitDetails;if(t.updateRemitEventsName)Object.keys(a).forEach((function(e){a[(0,d.Co)(e)]=a[e]}));var o=a[e.type];if(o){var s=(0,d.RV)(o);(0,d.eP)(e,s),r((0,d.BU)(s.name,i,e))}},t.useMixin)s().tags.$mixins[t.useMixin](null,t);var r=t.component;if("function"==typeof r&&!r.getInstances)r().then((function(e){n.initComponent(e,t.useContext)}));else n.initComponent(r,t.useContext);return n}return f(t,e),t.clearCache=function(e){if(p[e])Object.values(p[e]).forEach((function(e){e.component.destroy()})),delete p[e]},t.clearLetterListItemAdvCache=function(){var e="letter-list-item-adv";if(p[e])Object.values(p[e]).forEach((function(e){var t=e.component;if(!t.el||!t.el.offsetParent)t.destroy()})),delete p[e]},t.prototype.initComponent=function(e,t){var n,r,a;if("unmount"!==this.componentMountState&&!this.isInitedComponent){this.isInitedComponent=!0,this.componentName=function(e){return"string"==typeof e?e:e.blockName||e.name}(e);var i=this.props.cacheKey,o=i?null===(n=p[this.componentName])||void 0===n?void 0:n[i]:null;if(!o){var s=void 0;if("string"==typeof e){var l=window.require("ui-block/".concat(e,"/").concat(e));s=null!==(r=null==l?void 0:l.default)&&void 0!==r?r:l}else s=e;this.component=new s(m({},this.props),t)}else this.component=o.component,this.cachedBlock=o;if(!this.component)this.logMissingComponent("constructor");if(!(null===(a=this.component)||void 0===a?void 0:a.on))this.logMissingComponent("constructor.prop");if("mount"===this.componentMountState)this.componentDidMount()}},t.prototype.componentDidMount=function(){var e,t=this;if(this.componentMountState="mount",this.isInitedComponent){var n=this.props,r=n.useMediators,a=n.remitEvents,i=n.broadcastEvent,o=n.cacheKey,l=null!==(e=null==r?void 0:r.map(s().Mediator.get))&&void 0!==e?e:[];if(!this.component)this.logMissingComponent("mount");if(!this.cachedBlock)l.forEach((function(e){e.register(t.component)}));if(Object.keys(a||{}).map((function(e){return t.component.on(e,t.reBroadcast,!0)})),o)if(this.cachedBlock)this.elementRef.current.appendChild(this.cachedBlock.el);else{var c=document.createElement("div");this.elementRef.current.appendChild(c),this.component.renderTo(c)}else this.component.renderTo(this.elementRef.current);if(a&&!i)throw new TypeError("You passed events to remit, but did not pass the broadcastEvent function to block '".concat(this.componentName,"'"))}},t.prototype.shouldComponentUpdate=function(e){return!h(e,this.props,this.separatelyCheckedKeys)||!h(e.remitDetails,this.props.remitDetails)},t.prototype.componentDidUpdate=function(e){if(this.isInitedComponent)this.component.set(m(m({},Object.fromEntries(Object.keys(e).map((function(e){return[e,void 0]})))),this.props))},t.prototype.componentWillUnmount=function(){var e=this;if(this.componentMountState="unmount",this.isInitedComponent){var t=this.props,n=t.cacheKey,r=t.remitEvents;if(n){Object.keys(r||{}).map((function(t){return e.component.off(t,e.reBroadcast,!0)}));var a=this.componentName,i=this.elementRef.current.removeChild(this.elementRef.current.firstChild);if(i.innerHTML){if(!p[a])p[a]={};p[a][n]={el:i,component:this.component}}}else this.component.destroy()}},t.prototype.logMissingComponent=function(e){var t,n,r=this.props.cacheKey,i=null===(n=null===(t=this.component)||void 0===t?void 0:t.__proto__)||void 0===n?void 0:n.__proto__;(0,a.coreLoggerDispatchSelfError)("fstblck",new Error("missing created component"),{id:e,cacheKey:r,component:this.componentName,shape:this.component&&Object.keys(this.component),protoShape:i&&Object.keys(i)})},t.prototype.render=function(){var e=this.props,t=e.className,n=e.qaIndex,r=e["data-qa-id"],a=e.inlineRoot,i={};if(e.fluid)i.width="100%";if(a)i.display="inline";return c().createElement("div",{"data-qa-id":(0,u.qa)(r),style:i,className:t,ref:this.elementRef,"data-qa-index":(0,u.qa)(n)})},t}(c().Component);t.Z=g},91480:function(e,t,n){"use strict";n.d(t,{wD:function(){return s},Br:function(){return l},X2:function(){return c}});var r=n(77159),a=n(48853),i=n(41027),o=[a.U.archive,a.U.unread,a.U.remove],s=function(e,t){var n=a.U.archive;if(e===a.U.unread)n="read";if(e===a.U.remove)n="delete";return"https://img.imgsmail.ru/hb/e.mail.ru/static/settings/letters-fast-action-settings/"+n+(i.Z.getSelectedModel().isDarkMode()?"_dark":"")+(t?"-hidpi":"")+".png"},l=function(e){var t=e;if(!t){var n=(0,r.Ir)();if(!n||n===a.U.settings)t=a.U.unread;else t=n}var i=new Image;i.src=s(t),i.srcset="".concat(s(t,!0)," 2x")},c=function(){o.forEach((function(e){return l(e)}))}},8745:function(e,t,n){"use strict";n.d(t,{E:function(){return M}});var r,a,i,o,s,l,c,d,u,f,m,h,p,g=n(63745),v=n.n(g),_=n(40070),b=n(21211),E=n(53485),y=n(50987);!function(e){e.more="more",e.remove="remove",e.archive="archive",e.spam="spam",e.unsubscribe="unsubscribe",e.unspam="unspam",e.move="move",e.read="read",e.replyAll="reply-all",e.reply="reply",e.forward="forward"}(h||(h={})),function(e){e.ru="ru_RU",e.uk="uk_UA",e.be="be_BY",e.hy="hy_AM",e.kk="kk_KZ",e.uz="uz_UZ",e.mo="mo_MD",e.ro="ro_RO",e.en="en_US",e.es="es_ES"}(p||(p={}));var T=((r={})[p.ru]=((a={})[h.remove]=[60,52],a[h.archive]=[55,48],a[h.spam]=[38,33],a[h.unsubscribe]=[83,72],a[h.unspam]=[58,50],a[h.move]=[55,48],a[h.read]=[75,65],a[h.replyAll]=[105,91],a[h.reply]=[67,58],a[h.forward]=[75,65],a),r[p.uk]=((i={})[h.remove]=[70,61],i[h.archive]=[66,57],i[h.spam]=[38,33],i[h.unsubscribe]=[87,76],i[h.unspam]=[58,50],i[h.move]=[55,48],i[h.read]=[76,66],i[h.replyAll]=[108,93],i[h.reply]=[74,64],i[h.forward]=[77,66],i),r[p.be]=((o={})[h.remove]=[66,57],o[h.archive]=[49,43],o[h.spam]=[38,33],o[h.unsubscribe]=[72,63],o[h.unspam]=[58,50],o[h.move]=[53,46],o[h.read]=[78,68],o[h.replyAll]=[100,87],o[h.reply]=[68,59],o[h.forward]=[76,66],o),r[p.hy]=((s={})[h.remove]=[39,34],s[h.archive]=[98,85],s[h.spam]=[83,72],s[h.unsubscribe]=[73,63],s[h.unspam]=[78,67],s[h.move]=[114,98],s[h.read]=[70,60],s[h.replyAll]=[50,44],s[h.reply]=[112,97],s[h.forward]=[79,69],s),r[p.kk]=((l={})[h.remove]=[35,30],l[h.archive]=[74,64],l[h.spam]=[38,33],l[h.unsubscribe]=[69,60],l[h.unspam]=[76,66],l[h.move]=[106,92],l[h.read]=[27,23],l[h.replyAll]=[132,114],l[h.reply]=[84,73],l[h.forward]=[95,82],l),r[p.uz]=((c={})[h.remove]=[58,50],c[h.archive]=[50,43],c[h.spam]=[39,34],c[h.unsubscribe]=[117,101],c[h.unspam]=[80,69],c[h.move]=[39,34],c[h.read]=[43,37],c[h.replyAll]=[156,135],c[h.reply]=[40,35],c[h.forward]=[101,87],c),r[p.mo]=((d={})[h.remove]=[52,45],d[h.archive]=[58,50],d[h.spam]=[39,34],d[h.unsubscribe]=[82,71],d[h.unspam]=[93,80],d[h.move]=[54,47],d[h.read]=[29,25],d[h.replyAll]=[123,107],d[h.reply]=[76,66],d[h.forward]=[92,79],d),r[p.ro]=((u={})[h.remove]=[52,45],u[h.archive]=[58,50],u[h.spam]=[39,34],u[h.unsubscribe]=[82,71],u[h.unspam]=[93,80],u[h.move]=[54,47],u[h.read]=[29,25],u[h.replyAll]=[123,107],u[h.reply]=[76,66],u[h.forward]=[92,79],u),r[p.en]=((f={})[h.remove]=[43,38],f[h.archive]=[50,43],f[h.spam]=[39,34],f[h.unsubscribe]=[83,72],f[h.unspam]=[64,56],f[h.move]=[53,46],f[h.read]=[36,31],f[h.replyAll]=[58,50],f[h.reply]=[38,33],f[h.forward]=[55,48],f),r[p.es]=((m={})[h.remove]=[54,47],m[h.archive]=[88,76],m[h.spam]=[39,34],m[h.unsubscribe]=[93,81],m[h.unspam]=[80,69],m[h.move]=[79,69],m[h.read]=[30,26],m[h.replyAll]=[127,110],m[h.reply]=[73,64],m[h.forward]=[60,52],m),r),A=T[y.Z.get("LANG")]||T[p.ru],S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},O=function(e,t){var n=t.ponyMode;return t.short||e===h.more?n?28:36:A[e][+n]+48},C={order:Array.from(new Set(b.ORDER_BUTTONS.concat([h.remove,h.move,h.spam,h.unsubscribe,h.unspam,h.archive,h.read,h.more,h.replyAll,h.reply,h.forward]))).slice(0,11)},w=function(e,t,n){return t.selectMode?function(e,t,n){var r=e.deselectAll,a=e.folder,i=t.selectedStats,o=t.isSpam,s=t.isDisableEdit,l=t.isUnspam,c=t.hasSuperSpam,d=t.readMode,u=t.selectMode,f=n.unsubscribeInsteadSpam,m=n.unsubscribeInMoreDropdown;return{if:d||u,read:i.unread>0,unread:i.read>0,flag:i.noflagged>0,unflag:i.flagged>0,print:1===i.all,archive:!!(null==a?void 0:a.isArchive())&&i.noarchive&&!b.ARCHIVE_DISABLED,spam:!b.FORBID_SPAM&&o&&!i.metathread,spamDisabled:s||r||i.metathread,spamAbovePrint:!b.FORBID_SPAM&&!i.metathread&&f,unsubscribeAbovePrint:m,unspam:l,superspam:c&&!i.metathread&&!r,forward:!i.metathread&&!r,"create-filter":!b.FORBID_FILTERS&&!i.metathread&&!r}}(e,t,n):t.readMode?function(e,t,n){var r=t.isNewsletter,a=t.isSpam,i=t.isDisableEdit,o=t.letter,s=t.hasSuperSpam,l=t.readMode,c=t.selectMode,d=n.unsubscribeInsteadSpam,u=n.unsubscribeInMoreDropdown;return{if:l||c,readletter:!0,print:!0,"invite-call":b.CALLS&&!b.CALLS_DISABLE_LETTER_CALL&&!(r&&b.CALLS_DISABLE_LETTER_CALL_NEWSLETTERS),"create-event":!(b.DISABLE_CREATE_EVENT||r&&b.DISABLE_LETTER_CALENDAR_NEWSLETTERS),"create-filter":!b.FORBID_FILTERS,translate:!b.DISABLE_TRANSLATE,"disable-edit":i,read:null==o?void 0:o.is("flags.unread"),unread:!(null==o?void 0:o.is("flags.unread")),flag:!(null==o?void 0:o.is("flags.flagged")),unflag:null==o?void 0:o.is("flags.flagged"),archive:!1,spam:!b.FORBID_SPAM&&!!d&&a,spamAbovePrint:!b.FORBID_SPAM&&d,unsubscribeAbovePrint:u,unspam:!1,superspam:s}}(0,t,n):{}},L=function(e,t,n){var r;if(void 0===n)n=function(e,t){if(void 0===t)t=(0,E.wM)(e);return{unsubscribeInMoreDropdown:t&&b.UNSUBSCRIBE_IN_MORE_DROPDOWN,unsubscribeInsteadSpam:t&&b.UNSUBSCRIBE_INSTEAD_SPAM}}(t);var a=e.folder,i=e.folders,o=t.selectMode,s=t.selectedStats,l=t.isDisableEdit,c=t.letter,d=t.isReplyAll,u=t.readMode,f=t.isRemoveVisible,m=t.isSpam,p=t.isUnspam,g=n.unsubscribeInsteadSpam;return(r={})[h.archive]={if:!(null==a?void 0:a.isArchive())&&!b.ARCHIVE_DISABLED,disabled:l},r[h.forward]={if:u,letter:c,disabled:l},r[h.move]={if:!0,"radar-id":o?"selected":"letter-header",folders:i,disabled:l},r[h.remove]={if:f,disabled:l},r[h.read]={if:o&&s.unread>0,"radar-id":o?"selected":"letter-header"},r[h.reply]={if:u,letter:c,short:d,disabled:l},r[h.replyAll]={if:u&&d,letter:c,disabled:l},r[h.spam]={if:!b.FORBID_SPAM&&m&&!g,disabled:l||o&&(e.deselectAll||s.metathread)},r[h.unsubscribe]={if:g,letter:c,disabled:l||o&&(e.deselectAll||s.metathread)},r[h.unspam]={if:p,disabled:l||o&&e.deselectAll},r[h.more]=w(e,t,n),r},k=function(e,t){return t.order.filter((function(t){return!1!==e[t].if})).map((function(t){return{button:t,short:e[t].short}}))},I=n(25654),R=n(56934),D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},M=function(e){var t=e.attrs,n=e.globals,r=e.selectedLettersInfo,a=e.globalEnv,i=e.displayMode,o=v().useState(null),s=o[0],l=o[1],c=function(e,t){var n=e.folder,r=e.folders,a=e.deselectAll,i=t.isRemoveVisible,o=t.isReplyAll,s=t.isNewsletter,l=t.letter,c=t.selectedStats,d=t.isSpam,u=t.isDisableEdit,f=t.isUnspam,m=t.hasSuperSpam,h=t.readMode,p=t.selectMode;return v().useMemo((function(){return L({folder:n,folders:r,deselectAll:a},{isRemoveVisible:i,isReplyAll:o,isNewsletter:s,letter:l,selectedStats:c,isSpam:d,isDisableEdit:u,isUnspam:f,hasSuperSpam:m,readMode:h,selectMode:p})}),[a,n,r,m,u,s,i,o,d,f,l,h,p,c])}(t,n),d=n.ponyMode,u=n.letterId,f=n.store,m=n.isDisableEdit,h=v().useMemo((function(){var e,t=k(c,C),n=t.reduce((function(e,t){var n=t.button,r=t.short;return e+O(n,{ponyMode:d,short:r})+1}),36),r=[{minWidth:n,countShort:0}];return t.reduceRight((function(e,n,a){var i=n.button,o=n.short;if(!o)e+=36-O(i,{ponyMode:d,short:o}),r.push({minWidth:e,countShort:t.length-a});return e}),n),r.map((e=function(e,t){return t.minWidth<=e.width},function(t,n,r){return{props:t,conditions:n===r.length-1?null:function(a){return e(a,t,n,r)}}}))}),[c,d]),p=(0,_.k)({element:s,breakpoints:h,pureBreakpoints:!0,initialState:function(){return h.at(-1).props}}),g=v().useMemo((function(){return function(e,t,n){return k(e,n).map((function(n,r,a){var i=n.button,o=n.short;return S(S({},e[i]),{type:i,short:o||a.length-r<=t.countShort})}))}(c,p,C)}),[p,c]);return v().createElement("div",{className:R.Z.read_letter,ref:l},g.map((function(e){return v().createElement(I.l,D({},a,{key:e.type,"letter-id":u,selectedLettersIds:r.ids,selectedLettersSenders:r.senders,store:f,hidden:!i,"radar-id":null,disabled:m},e))})))}},25654:function(e,t,n){"use strict";n.d(t,{l:function(){return f}});var r=n(28266),a=n.n(r),i=n(21211),o=n(63745),s=n.n(o),l=n(70757),c=n(78381),d=n(56934),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},f=function(e){var t,n="back"===e.type||"backToParentFolder"===e.type||"deselect-back"===e.type,r=a()(((t={})[d.Z.deselectButtonContainer]="deselect"===e.type,t[d.Z.space_after_more]=i.SPACE_AFTER_MORE&&"more"===e.type,t[d.Z.back]=n,t[d.Z.hidden]=e.hidden,t));return e.hidden&&!e.notDelete?null:s().createElement(c.Z,u({},e,{className:r,useMediators:["letters-selection"],component:l.Z}))}},99648:function(e,t,n){"use strict";n.d(t,{b:function(){return f}});var r=n(60033),a=n.n(r),i=n(16458),o=n(53485),s=n(63745),l=n.n(s),c=n(51422),d=n(10476),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},f=function(e){var t=(0,d.C)({name:"portal-menu",mediators:["compose-manager","filter-manager","layout-manager","letters-actions","letters-selection","pony-mode","progress-bar-manager","search-manager","themes-manager","translator-manager","user-info","folders-navigation"],forRadar:{radar:o._I,syntheticBlock:function(){return{is:c.zf}}}}),n=t[0],r=t[1],s=t[2],f=l().useCallback((function(e){return Object.entries(e).map((function(e){return[e[0],typeof e[1]]}))}),[]);l().useEffect((function(){if(!e.folder||!e.route)a().send("crossnav-upme-no-val-err",{rlog:"crossnav-upme-no-val-err",rlog_message:{props:f(e),state:f(e)}})}),[e.folder,e.route]);var m=n.selected,h=function(e){var t=l().useRef(0);function n(){t.current++}return l().useEffect((function(){return e.forEach((function(e){return e.on("change",n)})),function(){e.forEach((function(e){return e.off("change",n)}))}}),[e]),t.current}(m),p=l().useMemo((function(){return(0,i.Z)(m)}),[h,m]),g=l().useMemo((function(){return u(u(u({},e),n),{selectedStats:p})}),[e,p,n]),v=l().useMemo((function(){return(0,o.r1)(g)}),[g]),_=l().useMemo((function(){return(0,o.RP)(v,{selected:m})}),[v,m]);return{state:n,broadcast:r,selectedLettersInfo:_,attrs:g,props:e,globals:v,syntheticBlock:s}}},56498:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var r=n(81171),a=n(28266),i=n.n(a),o=n(63745),s=n.n(o),l=n(91044),c=n(40520),d=n(30178),u=function(e){var t=e.text,n=e.icon,a=e.iconElement,o=e.className,u=e.onClick,f=e.qaId;return s().createElement(c.Z,null,(function(e){var c=e.Caption;return s().createElement("div",{className:i()(o,l.Z.element),onMouseDown:function(e){e.preventDefault(),u(e)},"data-qa-id":(0,d.qa)(f)},null!=a?a:s().createElement(r.Icon,{icon:n}),s().createElement(c,{level:"2",className:l.Z.text},t))}))}},23314:function(e,t,n){"use strict";n.d(t,{q:function(){return f},Y:function(){return m}});var r=n(78267),a=n(28266),i=n.n(a),o=n(79929),s=n(63745),l=n.n(s),c=n(10476),d=n(56498),u=n(91044),f=470,m=function(e){var t,n=e.model,a=e.common,f=(0,c.C)({name:"letter-swipe-actions",mediators:["letters-actions"]}),m=(f[0],f[1]),h=(0,s.useState)(n.is("flags.flagged"))[0],p=(0,s.useState)(n.is("flags.unread"))[0],g=(0,s.useState)(n.getFolder().isSpam())[0],v=(0,s.useCallback)((function(){r.default.open("move-to-folder",{letter:n},{dimmer:!0,mobile:!0,resolvable:!1})}),[]),_=function(e){return function(){return m({type:e,details:{model:n}})}};return l().createElement("div",{className:i()(u.Z.LetterSwipeActions,(t={},t[u.Z.common]=a,t)),onClick:function(e){return e.preventDefault()}},l().createElement("div",{className:u.Z.block},p?l().createElement(d.E,{onClick:_("togglestatus:unread"),text:i18n("Прочитано"),iconElement:l().createElement("div",{className:u.Z.unread}),qaId:"unread"}):l().createElement(d.E,{onClick:_("togglestatus:unread"),text:i18n("Не прочитано"),iconElement:l().createElement("div",{className:i()(u.Z.unread,u.Z.unreadFill)}),qaId:"unread"}),h?l().createElement(d.E,{onClick:_("togglestatus:flagged"),text:i18n("Снять флаг"),icon:o.ACTIONS_FAVORITE_ON,className:u.Z.textDanger,qaId:"unflag"}):l().createElement(d.E,{onClick:_("togglestatus:flagged"),text:i18n("Флаг"),icon:o.ACTIONS_FAVORITE_OFF,qaId:"flag"}),l().createElement(d.E,{onClick:v,text:i18n("Перенести"),icon:o.ACTION_FOLDER_MOVE,qaId:"move"}),g?l().createElement(d.E,{onClick:_("unspam"),text:i18n("Не спам"),icon:o.ACTIONS_LIKE,qaId:"unspam"}):l().createElement(d.E,{onClick:_("spam"),text:i18n("Спам"),icon:o.ACTIONS_DISLIKE,qaId:"spam"})),l().createElement("div",{className:i()(u.Z.block,u.Z.blockDanger)},l().createElement(d.E,{onClick:_("remove"),text:i18n("Удалить"),icon:o.ACTIONS_DELETE,className:u.Z.textDanger,qaId:"remove"})))}},34684:function(e,t,n){"use strict";n.d(t,{N:function(){return v},h:function(){return _}});var r=n(67377),a=n(77159),i=n(48853),o=n(28266),s=n.n(o),l=n(63745),c=n.n(l),d=n(91480),u=n(41027),f=n(79929),m=n(91044),h=n(43008),p=n(56498),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},v=110,_=function(e){var t,n=e.model,o=e.onFastAction,v=e.common,_=(0,r.useGlobalStateSelector)(a.sR),b=(0,l.useContext)(h.Z),E=function(e,t,n){var o=(0,r.useGlobalStateSelector)(a.sR),d=u.Z.getSelectedModel().isDarkMode(),h=(0,l.useState)(t.is("flags.unread"))[0];return(0,l.useMemo)((function(){var t;if(o===i.U.remove)return{className:m.Z.remove,actionProps:{onClick:n,icon:e?f.STATUS_DONE:f.ACTIONS_DELETE,text:i18n("Удалить"),qaId:"remove"}};if(o===i.U.archive)return{className:m.Z.archive,actionProps:{onClick:n,icon:e?f.STATUS_DONE:f.ACTIONS_ARCHIVE,text:i18n("В архив"),qaId:"archive"}};if(o===i.U.unread){var r=h?i18n("Прочитано"):i18n("Не прочитано");if(e)return{className:m.Z.unreadStatus,actionProps:{onClick:n,text:r,icon:f.STATUS_DONE,qaId:"unread"}};else return{className:m.Z.unreadStatus,actionProps:{onClick:n,text:r,iconElement:c().createElement("div",{className:h?m.Z.unread:s()(m.Z.unread,m.Z.unreadFill)}),qaId:"unread"}}}return{className:s()(m.Z.settings,(t={},t[m.Z.settingsDark]=d,t)),actionProps:{onClick:n,icon:e?f.STATUS_DONE:f.NAVIGATION_SETTINGS,text:i18n("Настроить"),qaId:"settings"}}}),[e,o,d,h,n])}(b,n,o),y=E.className,T=E.actionProps;return(0,l.useEffect)((function(){if(_===i.U.settings)(0,d.Br)()}),[_]),(0,l.useEffect)((function(){var e;if(b)null===(e=navigator.vibrate)||void 0===e||e.call(navigator,10)}),[b]),c().createElement("div",{className:s()(m.Z.LetterSwipeActions,(t={},t[m.Z.common]=v,t)),onClick:function(e){return e.preventDefault()}},c().createElement("div",{className:s()(m.Z.rightBlock,m.Z.fastBlock,y)},c().createElement(p.E,g({},T))))}},24880:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(81171),a=n(60033),i=n.n(a),o=n(25191),s=n(28266),l=n.n(s),c=n(63745),d=n.n(c),u=n(30178),f="_13g9TwPADGlVYjejUp8ylL",m="_1ejZpbKssklxkVV-RWwRM8",h="_1MOB49N0M6vLY2he1ovt8h",p="_1sMVyod4jfYEzh0YFImyIu",g="_3v8nLxqBPulORxXkBPr8b_",v=function(e){var t,n;t=function(){var t,n,r,a,s,l;if(e){var c,d=(0,o.p)(),u={folder_id:+(null===(r=null===(n=null===(t=null==d?void 0:d.model)||void 0===t?void 0:t.folder)||void 0===n?void 0:n.attributes)||void 0===r?void 0:r.id),folder_name:null===(l=null===(s=null===(a=null==d?void 0:d.model)||void 0===a?void 0:a.folder)||void 0===s?void 0:s.attributes)||void 0===l?void 0:l.name};switch(e.type){case"latest":c=e.when;break;case"month":c="month",u.month="".concat(e.date.month+1),u.year="".concat(e.date.year);break;case"alpha_to":case"alpha_from":case"alpha_subj":c="alphabet",u.alphabet=e.alpha||"empty",u.sorting="alpha_subj"===e.type?"subject":"account";break;default:return}i().send("divider_".concat(c,"_show"),{dwh:u})}},n=[e],(0,c.useEffect)(t,n)},_=function(e){var t,n=e.title,a=e.counter,i=e.ponyMode,o=e.compact,s=e.fit,c=e.meta,_=e.id;return v(c),d().createElement("div",{className:l()(f,(t={},t[p]=i,t[h]=o,t[m]=s,t)),"data-test-id":(0,u.qa)("letters-".concat(_))},d().createElement(r.Text,{mode:"h6"},n),null!=a&&d().createElement("div",{className:g},d().createElement(r.Text,{mode:"h6",secondary:!0},a)))}},5910:function(e,t,n){"use strict";n.d(t,{wg:function(){return N},Ek:function(){return M},Ty:function(){return P},EA:function(){return w},ZP:function(){return x}});var r,a,i=n(81171),o=n(28266),s=n.n(o),l=n(21211),c=n(79929),d=n(63745),u=n.n(d),f=n(40393),m=n(93258),h=n(86334),p={container:"_2RFvbHgredzb598qxf1fIY",transparent:"_2INdw9pFkG3afhYXuc-Vss",text:"_3fswF9vDhtM556nP7vBolq",large:"_25jN64TaI9cAha83XnvuFW"},g=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e.NORMAL="normal",e.LARGE="large"}(a||(a={}));var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.className,i=n.size,o=void 0===i?a.LARGE:i,l=n.text,c=n.transparent,d=s()(((e={})[p.container]=!0,e[p[o]]=!0,e[p.transparent]=c,e[r]=void 0!==r,e)),f=s()(((t={})[p.text]=!0,t));return u().createElement("span",{className:d},u().createElement(h.Z,{className:f,type:h.y.BADGE},l))},t}(u().PureComponent),_="_26Dn0F1HkeaVuJNtmK_38S",b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.render=function(){var e,t=this.props.themeClassName,n=s()(((e={})[_]=!0,e[t]=void 0!==t,e));return u().createElement("hr",{className:n})},t=E([(0,m.Z)("r-hr")],t)}(u().PureComponent),T=n(73928),A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o},O=Object.values(T.ColouredIconTypes);function C(e){return O.includes(e)?e:void 0}var w,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.renderIcon=function(e){var t,n=this.props,r=n.isColoured,a=n.className,i=n.name,o=n.themeClassName,l=e[i],c=s()(((t={})[o]=void 0!==o,t[a]=void 0!==a,t));return u().createElement(u().Fragment,null,r&&u().createElement(T.ColouredIcon,{className:c,icon:l,type:C(i)}),!r&&u().createElement(T.Icon,{className:c,icon:l}))},t.prototype.render=function(){var e=this;return u().createElement(T.ColouredIconContext.Consumer,null,(function(t){return e.renderIcon(t)}))},t=S([(0,m.Z)("r-icon")],t)}(u().PureComponent),k={container:"XMGeM4f3_MAG3PtguoT0T",caption:"_1die4XfSHVyoGk-M9nYcXP",hr:"_38kbG8uq4y7IpVq0wnYUOY",compact:"XgYUmxJVRD2SkPdz7_RDh",markable:"jSmtsIDaNP9CighrQD6k9",normal:"cWMu0sJX7XUaHwjeTRW3w",nano:"_3sG86eq-T3iVswnMtaedIn",list:"enirazkQzjhqKqTY-aRDs",selected:"_7b0DcIQXtCY6SzNUmJkef",filters:"_3k_JYURSSx8BBy00lttuxQ",navigation:"_1Uh_X8Tg3l3dZcpNJUTDV6",text:"_3nnq1GzHyeR6tFzK4c4mHp",short:"_3c-zpB4-3qRxROXAgsCEvf",icon:"_1Dk2FFsjYLDLlZc3gRvOtK",badge:"_3t9W7qqi94ywHeV8deEkLI",iconRight:"MH7q6wOUz9tmXGh_cCWQn",iconEmpty:"_247_-RBUJ2om6fZqqJQcE0",hr_list:"_2EymLWvLTXASUALXCv7wYR",touch:"_1AB5kt9TP5e61Li0_Kf32M"},I=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},D=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o};function M(e){var t,n,r,a,i,o=e.badgeText,l=e.contentText,c=e.contentTextType,d=e.iconName,f=e.iconEmpty,m=e.rightIconName,p=!!d,g=!!m,_=s()(((t={})[k.icon]=!0,t)),b=s()(((n={})[k.iconRight]=!0,n)),E=s()(((r={})[k.iconEmpty]=!0,r[k.icon]=!0,r)),y=s()(((a={})[k.text]=!0,a)),T=s()(((i={})[k.badge]=!0,i));return u().createElement(u().Fragment,null,p&&u().createElement(L,{className:_,name:d,isColoured:!0}),f&&u().createElement("span",{className:E}),l&&u().createElement(h.Z,{className:y,text:l,type:c}),o&&u().createElement(v,{className:T,text:o,transparent:!0}),g&&u().createElement(L,{className:b,name:m,isColoured:!0}))}function P(e){var t,n,r=e.iconEmpty,a=e.short,i=e.type,o=void 0===i?w.LIST:i,l=s()(((t={})[k.hr]=!0,t[k.hr_short]=a,t[k["hr_"+o]]=void 0!==o,t)),c=s()(((n={})[k.iconEmpty]=!0,n[k.icon]=!0,n));return u().createElement("div",{className:l},r&&u().createElement("span",{className:c}),u().createElement(y,null))}function N(e){var t,n=e.text,r=e.testId,a=s()(((t={})[k.caption]=!0,t));return u().createElement("div",{"data-test-id":r,className:a},u().createElement(h.Z,{text:n,type:h.y.CAPTION}))}!function(e){e.LIST="list",e.NAVIGATION="navigation"}(w||(w={}));var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.render=function(){var e,t=this.props,n=t.children,r=t.contentProps,a=t.mode,o=t.navigationIndex,d=t.onMouseDown,f=t.onClick,m=t.onKeyDown,h=t.onMouseEnter,p=t.selected,g=t.isFilter,v=t.short,_=t.themeClassName,b=t.title,E=t.type,y=void 0===E?w.LIST:E,T=t.testId,A=t.markable,S=t.marked,O=s()(((e={})[k.filters]=g,e[k.container]=!0,e[k.selected]=p,e[k.short]=v,e[k[y]]=void 0!==y,e[k[a]]=void 0!==a,e[_]=void 0!==_,e[k.safe]=!0,e[k.touch]=l.TOUCH_MODE,e[k.markable]=A,e));return u().createElement("div",R({className:O,"data-navigation-index":o,onClick:f,onMouseDown:d,onKeyDown:m,onMouseEnter:h,title:b},T?{"data-test-id":T,"data-test-selected":p}:{}),n||u().createElement(M,R({},r,{short:v})),S&&u().createElement(i.Icon,{icon:c.STATUS_DONE}))},t=D([f.R,(0,m.Z)((function(e){var t="r-list-item";if(e.selected)t+=" ".concat("r-list-item","_selected");return t}))],t)}(u().PureComponent)},65120:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(60033),a=n.n(r),i=n(28266),o=n.n(i),s=n(21211),l=n(63745),c=n.n(l),d=n(40520),u=n(54908),f="_37J-vCOZWtwN-4gYmCSm54",m="_24rgKrnXmhmqEzAGVG0a-D",h="_3FbQ1z6Mr3ycTGwulQfcaI",p="_1jRagkd_B1UWNQ-Kp_4oIJ",g={approve:i18n("Одобрить"),block:i18n("Заблокировать")},v=function(e){var t,n=e.broadcastEvent,r=e.model,i=e.ponyMode,l=e.compact,v=c().useCallback((function(e){e.preventDefault(),n((0,u.BU)("move",{id:s.PARENTAL_CONTROL_APPROVE_FOLDER_ID,model:r},e)),a().send("ll_btn_approve")}),[n,r]),_=c().useCallback((function(e){e.preventDefault(),n((0,u.BU)("move",{id:s.PARENTAL_CONTROL_DENY_FOLDER_ID,model:r},e)),a().send("ll_btn_block")}),[n,r]),b=o()(f,((t={})[h]=!!l,t[m]=!!i,t));return c().createElement("div",{className:b,"data-test-id":"ll-actions-wrap"},c().createElement(d.Z,null,(function(e){var t=e.ConfigProvider,n=e.Button;return c().createElement(t,null,c().createElement(n,{size:"s",onClick:v,mode:"tertiary",className:p,"data-test-id":"ll-action-approve"},g.approve),c().createElement(n,{size:"s",onClick:_,mode:"tertiary","data-test-id":"ll-action-block"},g.block))})))}},58203:function(e,t,n){"use strict";n.d(t,{j:function(){return b}});var r,a=n(81171),i=n(21211),o=n(79929),s=n(63745),l=n.n(s),c=n(59333),d=n.n(c),u=n(94005),f=n(78381),m=n(73794),h=n(51422),p=n(30178),g=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=new m.k("ll-av"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.renderAvatar=function(){var e,t,n,r=this.props,s=r.state,c=r.disabledHover,d=r.disabled,m=r.centered,g=r.isTouch,_=r.imgUrl,b=r.darkMode,E=r.verified,y=r.official,T=r.size;return l().createElement(l().Fragment,null,l().createElement("button",{"data-qa-id":(0,p.qa)("selected:".concat(!!s)),className:v.root((e={"is-active":s,"disable-hover":c,disabled:d,centered:m},e["size_".concat(T)]=!0,e)),onClick:(0,h.CH)(this,{stop:!0,name:"toggle"})},l().createElement("div",{className:v.elem("container",{touch:g})},!g&&l().createElement("span",{className:v.elem("checkbox")},l().createElement(f.Z,{checked:s,component:u.Z})),l().createElement("div",{className:v.elem("img-container")},l().createElement("span",{className:v.elem("img"),style:{backgroundImage:"url(".concat(_||i.DEFAULT_AVATAR_SRC,")")}}),E&&l().createElement("span",{className:v.elem("reliable-icon",(t={},t["size_".concat(T)]=!0,t))},l().createElement(a.Icon,{icon:b?o.STATUS_RELIABLE_SENDER_DARK:o.STATUS_RELIABLE_SENDER_LIGHT,testId:"reliable-icon"})),y&&l().createElement("span",{className:v.elem("official-icon",(n={},n["size_".concat(T)]=!0,n))},l().createElement(a.Icon,{icon:b?o.STATUS_OFFICIAL_SENDER_DARK:o.STATUS_OFFICIAL_SENDER_LIGHT,testId:"official-icon"}))))))},t.prototype.didMount=function(){d().findDOMNode(this).classList.add("stop-animate")},t.prototype.render=function(){return l().createElement("div",null,this.renderAvatar())},t}(l().PureComponent),b=(0,h.v$)("list-letter-avatar",_)},1267:function(e,t,n){"use strict";n.d(t,{Z:function(){return fe}});var r=n(60033),a=n.n(r),i=n(71603),o=n(53785),s=n(93286),l=n(21211),c=n(44438),d=n(63745),u=n.n(d),f=n(72727),m=n(6703),h=n(59626),p=n(41861),g=n(26694),v=n(11726),_=n(37587),b=n(54908),E=n(51422),y=n(14077),T=n(53263),A=n(59574),S=n(34734),O=n(95159),C=n(19274),w=n(47576),L=n(88488),k=n(62733),I=n(48597),R=n(427),D=n(42350),M=n(84893),P=n(93441),N=n(92323),x=n(30240),F=n(81171),U=n(40132),H=n.n(U),B=n(16945),Z=n.n(B),G="_2nVkkL5WytgHi8ovh_pjlB",q="_3hxd8TqOPQeFWZ3I06ZLau",j="_3tiVqriDld6BvnRzDqR5LD",W=function(e){e.stopPropagation(),e.preventDefault()},V=function(e){var t=e.handleCalendarButtonClick,n=e.handleNoteButtonClick;return u().createElement("div",{className:G,onClick:W,onMouseDown:W},u().createElement("div",{className:q},u().createElement("div",{className:j,"data-title":i18n("Создать событие"),onClick:t},u().createElement(F.Icon,{icon:H()})),u().createElement("div",{className:j,"data-title":i18n("Создать заметку"),onClick:n},u().createElement(F.Icon,{icon:Z()}))))},z=n(65120),Y=n(58203),K=n(97082),X=n(41535),Q=n(65390),J=n(68246),$=n(82021),ee=n(71147),te=n(30178),ne=n(78381),re=n(73794),ae=n(59710),ie=new re.k("llc");function oe(){var e,t,n,r,a,o,s=this.props,d=s.model,f=s.model,m=this.getSubject(),h=this.getSnippetValue(),p=this.getGoToActionDisplayMode(),g="none"===p?this.getPaymentDieDisplayMode():"none",_=s["pony-mode"],b=this.getTransactionMetadata(),F="none"===p&&this.showOrder(s.model,b),U=this.getUnsubscribeSender(),H="none"===p&&this.shouldShowUniversalPaymentDie(),B=(0,y.sD)(d,s.search),Z=l.ENABLE_TAGS&&!this.getCounter(),G=l.ENABLE_TAGS&&d.is("flags.tags")&&!!d.get("flags.tags").length,q=!!(null===(t=null==d?void 0:d.isSchedule)||void 0===t?void 0:t.call(d)),j=this.letterDate(d.get("date"),q),W=d.getFolder(),re=this.getSearchAttaches(),oe=this.getAllAttaches(),se=this.getAttachesModes(!1,oe,re),le=null===(n=this.getAttaches(se,oe,re))||void 0===n?void 0:n.attachesList,ce=null===(r=this.getAttaches(se,oe,re))||void 0===r?void 0:r.moreAttachesList,de=this.state.messagesAttaches,ue=s["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===p,fe=this.getAttachesModes(!1,de),me=this.getAttaches(fe,de),he=this.getCategory(),pe=l.SHOW_INVOLVEMENT_LETTER_LIST_INTEGRATION&&!l.ENABLE_TAGS&&!d.is("flags.attach")&&!U&&!(0,v.Ml)(f,!1)&&"none"===v.OY.call(this)&&"none"===(0,i.Y)(f,!1,!1);return u().createElement("a",{style:s.style,"data-qa-id":(0,te.qa)(this.rootQaId()),"data-qa-index":(0,te.qa)(f.meta("_ui-index")),"data-qa-safe":(0,te.qa)(String(s.isReliable)),"data-qa-official":(0,te.qa)(String(s.isOfficial)),className:ie.root({"enable-user-select":s["enable-user-select"],"pony-mode":_,"has-indent":s.indent,normal:!s.indent,active:s.selected,firstSelected:s.isFirstSelected,lastSelected:s.isLastSelected,first:s.first,last:s.last,new:!0,"new-selection":!0,reliable:s.isImportantReliable,official:s.isOfficialGreen},{addClass:["js-letter-list-item","js-tooltip-direction_letter-bottom"]}),onDragStart:(0,E.CH)(this,{name:"unused",prevent:!0}),onClick:(0,E.CH)(this,"click"),onContextMenu:(0,E.CH)(this,"contextmenu"),href:s.href?s.href:null,tabIndex:-1,"data-id":d.get("id"),"data-draggable-id":d.get("id"),"data-uidl-id":d.get("last")},u().createElement("div",{className:ie.elem("background",{active:s.selected})}),u().createElement("div",{"data-qa-id":(0,te.qa)("unread"),className:ie.elem("read-status",{"pony-mode":_,small:!0})},u().createElement($.Z,{state:d.is("flags.unread"),"is-forwarded":d.is("flags.forward"),"is-replied":d.is("flags.reply"),model:d,remitEvents:{toggle:{prevent:!0,name:ae.m.unread}},remitDetails:{model:d},broadcastEvent:(0,E.Yv)(this)})),u().createElement("div",{"data-qa-id":(0,te.qa)("avatar"),className:ie.elem("avatar",{"pony-mode":_,unread:d.is("flags.unread")})},u().createElement(Y.j,{state:s.selected,disabledHover:s["disable-avatar-hover"],disabled:s["disable-select"],centered:!0,imgUrl:this.getImageSrc(),verified:s.isReliable,official:s.isOfficial,darkMode:s.darkMode,size:"common",remitEvents:{toggle:{prevent:!0,name:ae.m.clickAvatar}},broadcastEvent:(0,E.Yv)(this)})),u().createElement("div",{className:ie.elem("container")},u().createElement("div",{className:ie.elem("content",{"pony-mode":_})},u().createElement("div",{className:ie.elem("item",{correspondent:!0,unread:d.is("flags.unread")})},u().createElement(K.A,{"qa-id":(0,te.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),u().createElement("div",{"data-qa-id":(0,te.qa)("flagged"),className:ie.elem("item",{flag:!0})},u().createElement(X.Z,{priority:s.priority,important:this.isImportant(),state:d.is("flags.flagged"),remitEvents:{toggle:{prevent:!0,name:ae.m.flagged}},remitDetails:{model:d},broadcastEvent:(0,E.Yv)(this)})),this.hasBadge()&&u().createElement("div",{"data-qa-id":(0,te.qa)("letter:badge"),className:ie.elem("item",{badge:!0})},u().createElement(ne.Z,{counter:this.getCounter(),unread:d.is("flags.unread"),component:O.Z})),u().createElement("div",{ref:this.subjectRef,className:ie.elem("item",{title:!0})},!s["disable-subject"]&&u().createElement("span",{className:ie.elem("subject",{unread:d.is("flags.unread")})},u().createElement(ne.Z,{key:m,inlineRoot:!0,subject:m,color:s.search?d.meta("search_subject.color"):null,search:s.search,component:N.Z})),u().createElement("span",{"data-qa-id":(0,te.qa)("snippet"),className:ie.elem("snippet")},u().createElement(ne.Z,{key:h,inlineRoot:!0,value:h,color:s.search?d.meta("search_snippet.color"):null,search:s.search,component:P.Z})),u().createElement("div",null)),(Z||G)&&u().createElement("div",{className:ie.elem("item",{tags:!0})},u().createElement(ee.Z,{model:d,tags:d.get("flags.tags"),folder:s.showfolder&&W.get("name"),readonly:!Z})),"compact"===g&&u().createElement("div",{className:ie.elem("item")},u().createElement(ne.Z,{model:s.model,standalone:!0,"layout-mode":"2pane","pony-mode":s["pony-mode"],component:L.Z})),U&&u().createElement(ne.Z,{"layout-mode":"2pane","pony-mode":_,unsubscribeSender:U,model:d,useMediators:["unsubscribe-actions","themes-manager"],component:x.Z}),s.showfolder&&!G&&u().createElement("div",{className:ie.elem("item",(e={folder:!0},e["hide-on-hover"]=Z,e))},(null===(a=null==d?void 0:d.isSchedule)||void 0===a?void 0:a.call(d))?u().createElement(u().Fragment,null,u().createElement(ne.Z,{title:(0,c.ye)(d.get("send_date")),text:W.get("name"),"data-qa-id":(0,te.qa)("folder"),component:C.Z})):u().createElement(ne.Z,{title:W.get("name"),text:W.get("name"),"data-qa-id":(0,te.qa)("folder"),component:C.Z})),u().createElement("div",{className:ie.elem("secondary-data")},pe&&u().createElement(V,{handleCalendarButtonClick:this.handleCalendarButtonClick,handleNoteButtonClick:this.handleNoteButtonClick}),!!he&&u().createElement("div",{className:ie.elem("item",{category:!0})},u().createElement(ne.Z,{flat:!0,short:!0,name:he,component:A.Z})),l.ENABLE_MENTIONS&&(d.is("flags.mention")||d.is("flags.mention_unread"))&&u().createElement("div",{className:ie.elem("item",{mention:!0})},u().createElement(J.Z,{unread:d.is("flags.mention_unread")})),!s["disable-attach"]&&d.is("flags.attach")&&u().createElement("div",{className:ie.elem("item",{"attach-status":!0})},u().createElement(ne.Z,{component:S.Z,small:!0,model:s.model,useMediators:["attachments-manager","pony-mode"]})),!s.showfolder&&!!(null===(o=null==d?void 0:d.isSchedule)||void 0===o?void 0:o.call(d))&&u().createElement("div",{className:ie.elem("item")},u().createElement(ne.Z,{date:d.get("send_date"),component:M.Z}))),u().createElement("div",{title:this.getDateTooltip(q),"data-qa-id":(0,te.qa)("time:".concat(j)),className:ie.elem("item",{date:!0})},j)),"full"===g&&u().createElement("div",{className:ie.elem("payment-die-container")},u().createElement(ne.Z,{fluid:!0,model:s.model,"layout-mode":"2pane",component:k.Z})),le&&oe&&u().createElement(ne.Z,{fluid:!0,model:s.model,"attaches-list":le,"more-attaches-list":ce,"layout-mode":"2pane","all-count":oe.length,vertical:se.vertical,"pony-mode":_,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,E.Yv)(this),component:R.Z}),ue&&u().createElement(u().Fragment,null,de?u().createElement(ne.Z,{fluid:!0,key:"list-letter-preview-attaches",component:R.Z,model:s.model,"attaches-list":me.attachesList,"more-attaches-list":me.moreAttachesList,"layout-mode":"2pane","all-count":de.length,vertical:fe.vertical,"pony-mode":_,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,E.Yv)(this)}):u().createElement(u().Fragment,null,u().createElement(ne.Z,{fluid:!0,key:"list-letter-preview-stub",attachesCount:d.get("attachments_count"),isCompact:!1,"pony-mode":_,component:D.Z}))),b&&F&&u().createElement(ne.Z,{fluid:!0,component:w.Z,useMediators:["orders-manager"],metadata:b,"pony-mode":_}),H&&u().createElement(ne.Z,{fluid:!0,component:I.Z,model:s.model,"layout-type":s["layout-mode"],"pony-mode":_}),"none"!==p&&u().createElement(Q.Z,{model:d,meta:this.goToActionMetadata,layoutMode:"2pane",mode:p}),B&&u().createElement(z.Z,{model:d,ponyMode:_,broadcastEvent:(0,E.Yv)(this)})),s.fromThread||!s.hideDelimeter&&u().createElement(ne.Z,{component:T.Z,full:s["full-delimiter"],ponymode:_,indent:s.indent,indentRight:!0}),u().createElement(ne.Z,{component:T.Z,ponymode:_,indent:s.indent,indentRight:!0,last:!0}))}var se,le=(se=function(e,t){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}se(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ce="calendar",de="note",ue=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.subjectRef=u().createRef(),n.getSubject=g.kB,n.getImageSrc=g.Q4,n.isProbablyPhishing=g.R5,n.isCorrespondentDangerous=g.if,n.getCorrespondent=g.dy,n.getCorrespondentTooltip=g.Mg,n.getDateTooltip=g.lB,n.getCounter=g.g,n.getCategory=g.n3,n.getAllAttaches=h.Ef,n.getSearchAttaches=h.hj,n.getAttaches=m.UN,n.getAttachesModes=p.O,n.isImportant=g.RD,n.getSnippetValue=g.dP,n.getPaymentDieDisplayMode=v.OY,n.getGoToActionDisplayMode=i.Y,n.shouldShowUniversalPaymentDie=v.Ml,n.shouldHideTransactionCategory=v.Wv,n.showOrder=_.D,n.getTransactionMetadata=_.S,n.rootQaId=g.oV,n.letterDate=c.Zm,n.getUnsubscribeSender=g.V_,n.handleIntersectViewport=g.a0,n.render=oe,n.meta=t.model.getPaymentMeta(),n.goToActionMetadata=t.model.getGoToActionMeta(),n.handleCalendarButtonClick=n.handleCalendarButtonClick.bind(n),n.handleNoteButtonClick=n.handleNoteButtonClick.bind(n),n}return le(t,e),t.prototype.componentDidUpdate=function(){var e;(0,o.u)(null===(e=this.subjectRef)||void 0===e?void 0:e.current,"r-ll-cmn")},t.prototype.didMount=function(){var e;this.handleIntersectViewport(),(0,o.u)(null===(e=this.subjectRef)||void 0===e?void 0:e.current,"r-ll-cmn")},t.prototype.handleInnerEvent=function(e){var t=this.props.model;switch(e.type){case ae.m.flagged:return void(0,s.ZP)(["letters_letter-item","toggle_flagged_".concat(!t.get("flags.flagged"))]);case ae.m.unread:return void(0,s.ZP)(["letters_letter-item","toggle_unread_".concat(!t.get("flags.unread"))]);case ae.m.clickAvatar:(0,s.ZP)(["letters_letter-item",this.props.selected?"deselect":"select"])}},t.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},t.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===v.OY.call(this)},t.prototype.handleCalendarButtonClick=function(){var e=this.props.model.get("last");a().send("click_productivity_button",{dwh:{type:ce,letterid:e},i:ce}),(0,E.Yv)(this)((0,b.BU)("calendar:create",{model:this.props.model,createContent:"letter-list"}))},t.prototype.handleNoteButtonClick=function(){var e=this.props.model.get("last");a().send("click_productivity_button",{dwh:{type:de,letterid:e},i:de}),(0,f.default)("".concat(l.NOTES_URL,"/create-note-from-letter/?letter-id=").concat(e,"&source=letter-list"))},t.defaultProps={"layout-mode":"2pane"},t}(u().Component),fe=(0,E.v$)("list-letter-common",ue,{syncMediatorsOnRender:!1})},59710:function(e,t,n){"use strict";var r;n.d(t,{m:function(){return r}}),function(e){e.unread="togglestatus:unread",e.flagged="togglestatus:flagged",e.clickAvatar="clickavatar"}(r||(r={}))},1229:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=n(71603),a=n(53785),i=n(93286),o=n(44438),s=n(63745),l=n.n(s),c=n(6703),d=n(59626),u=n(41861),f=n(26694),m=n(11726),h=n(37587),p=n(51422),g=n(59710),v=n(78243),_=n(78594),b=n(77159),E=n(48853),y=n(14077),T=n(21211),A=n(53263),S=n(59574),O=n(34734),C=n(95159),w=n(19274),L=n(47576),k=n(88488),I=n(62733),R=n(48597),D=n(427),M=n(42350),P=n(84893),N=n(93441),x=n(92323),F=n(30240),U=n(23314),H=n(34684),B=n(65120),Z=n(58203),G=n(97082),q=n(41535),j=n(65390),W=n(68246),V=n(82021),z=n(71147),Y=n(28915),K=n(30178),X=n(78381),Q=new(n(73794).k)("llc-t");function J(e){var t=e.model,n=e["pony-mode"];return l().createElement(l().Fragment,null,l().createElement("div",{"data-qa-id":(0,K.qa)("unread"),className:Q.elem("read-status",{"pony-mode":n,small:!0,react:!0})},l().createElement(V.Z,{state:t.is("flags.unread"),"is-forwarded":t.is("flags.forward"),"is-replied":t.is("flags.reply"),model:t,remitEvents:{toggle:{prevent:!0,name:g.m.unread}},remitDetails:{model:t},broadcastEvent:(0,p.Yv)(this)})),l().createElement("div",{"data-qa-id":(0,K.qa)("avatar"),className:Q.elem("avatar",{"pony-mode":n,unread:t.is("flags.unread")})},l().createElement(Z.j,{state:e.selected,disabledHover:e["disable-avatar-hover"],disabled:e["disable-select"],centered:!0,isTouch:!0,imgUrl:this.getImageSrc(),verified:e.isReliable,official:e.isOfficial,darkMode:e.darkMode,size:"common",remitEvents:{toggle:{prevent:!0,name:g.m.clickAvatar}},broadcastEvent:(0,p.Yv)(this)})))}function $(e){var t,n,r,a,i,s,c=e.model,d=this.getSubject(),u=this.getSnippetValue(),f=this.getGoToActionDisplayMode(),m="none"===f?this.getPaymentDieDisplayMode():"none",h=e["pony-mode"],v=this.getTransactionMetadata(),_="none"===f&&this.showOrder(e.model,v),b=this.getUnsubscribeSender(),E="none"===f&&this.shouldShowUniversalPaymentDie(),A=(0,y.sD)(c,e.search),U=T.ENABLE_TAGS&&!this.getCounter(),H=T.ENABLE_TAGS&&c.is("flags.tags")&&!!c.get("flags.tags").length,Z=!!(null===(n=null==c?void 0:c.isSchedule)||void 0===n?void 0:n.call(c)),V=this.letterDate(c.get("date"),Z),Y=c.getFolder(),J=this.getSearchAttaches(),$=this.getAllAttaches(),ee=this.getAttachesModes(!1,$,J),te=null===(r=this.getAttaches(ee,$,J))||void 0===r?void 0:r.attachesList,ne=null===(a=this.getAttaches(ee,$,J))||void 0===a?void 0:a.moreAttachesList,re=this.state.messagesAttaches,ae=e["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===f,ie=this.getAttachesModes(!1,re),oe=this.getAttaches(ie,re),se=this.getCategory();return l().createElement("div",{className:Q.elem("main-content")},l().createElement("div",{className:Q.elem("container",{react:!0})},l().createElement("div",{className:Q.elem("content",{"pony-mode":h,react:!0})},l().createElement("div",{className:Q.elem("item",{correspondent:!0,unread:c.is("flags.unread")})},l().createElement(G.A,{"qa-id":(0,K.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),l().createElement("div",{"data-qa-id":(0,K.qa)("flagged"),className:Q.elem("item",{flag:!0})},l().createElement(q.Z,{priority:e.priority,important:this.isImportant(),state:c.is("flags.flagged"),remitEvents:{toggle:{prevent:!0,name:g.m.flagged}},remitDetails:{model:c},broadcastEvent:(0,p.Yv)(this)})),this.hasBadge()&&l().createElement("div",{"data-qa-id":(0,K.qa)("letter:badge"),className:Q.elem("item",{badge:!0})},l().createElement(X.Z,{counter:this.getCounter(),unread:c.is("flags.unread"),component:C.Z})),l().createElement("div",{ref:this.subjectRef,className:Q.elem("item",{title:!0})},!e["disable-subject"]&&l().createElement("span",{className:Q.elem("subject",{unread:c.is("flags.unread")})},l().createElement(X.Z,{key:d,inlineRoot:!0,subject:d,color:e.search?c.meta("search_subject.color"):null,search:e.search,component:x.Z})),l().createElement("span",{"data-qa-id":(0,K.qa)("snippet"),className:Q.elem("snippet")},l().createElement(X.Z,{key:u,inlineRoot:!0,value:u,color:e.search?c.meta("search_snippet.color"):null,search:e.search,component:N.Z})),l().createElement("div",null)),H&&T.ENABLE_ADD_TAGS_TOUCH&&l().createElement("div",{className:Q.elem("item",{tags:!0})},l().createElement(z.Z,{model:c,tags:c.get("flags.tags"),folder:e.showfolder&&Y.get("name"),readonly:!U})),"compact"===m&&l().createElement("div",{className:Q.elem("item")},l().createElement(X.Z,{model:e.model,standalone:!0,"layout-mode":"2pane","pony-mode":e["pony-mode"],component:k.Z})),b&&l().createElement(X.Z,{"layout-mode":"2pane","pony-mode":h,unsubscribeSender:b,model:c,useMediators:["unsubscribe-actions","themes-manager"],component:F.Z}),e.showfolder&&!H&&l().createElement("div",{className:Q.elem("item",(t={folder:!0},t["hide-on-hover"]=U,t))},(null===(i=null==c?void 0:c.isSchedule)||void 0===i?void 0:i.call(c))?l().createElement(l().Fragment,null,l().createElement(X.Z,{title:(0,o.ye)(c.get("send_date")),text:Y.get("name"),"data-qa-id":(0,K.qa)("folder"),component:w.Z})):l().createElement(X.Z,{title:Y.get("name"),text:Y.get("name"),"data-qa-id":(0,K.qa)("folder"),component:w.Z})),l().createElement("div",{className:Q.elem("secondary-data")},!!se&&l().createElement("div",{className:Q.elem("item",{category:!0})},l().createElement(X.Z,{flat:!0,short:!0,name:se,component:S.Z})),T.ENABLE_MENTIONS&&(c.is("flags.mention")||c.is("flags.mention_unread"))&&l().createElement("div",{className:Q.elem("item",{mention:!0})},l().createElement(W.Z,{unread:c.is("flags.mention_unread")})),!e["disable-attach"]&&c.is("flags.attach")&&l().createElement("div",{className:Q.elem("item",{"attach-status":!0})},l().createElement(X.Z,{component:O.Z,small:!0,model:e.model,useMediators:["attachments-manager","pony-mode"]})),!e.showfolder&&!!(null===(s=null==c?void 0:c.isSchedule)||void 0===s?void 0:s.call(c))&&l().createElement("div",{className:Q.elem("item")},l().createElement(X.Z,{date:c.get("send_date"),component:P.Z}))),l().createElement("div",{title:this.getDateTooltip(Z),"data-qa-id":(0,K.qa)("time:".concat(V)),className:Q.elem("item",{date:!0})},V)),"full"===m&&l().createElement("div",{className:Q.elem("payment-die-container")},l().createElement(X.Z,{fluid:!0,model:e.model,"layout-mode":"2pane",component:I.Z})),te&&$&&l().createElement(X.Z,{fluid:!0,model:e.model,"attaches-list":te,"more-attaches-list":ne,"layout-mode":"2pane","all-count":$.length,vertical:ee.vertical,"pony-mode":h,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,p.Yv)(this),component:D.Z}),ae&&l().createElement(l().Fragment,null,re?l().createElement(X.Z,{fluid:!0,key:"list-letter-preview-attaches",component:D.Z,model:e.model,"attaches-list":oe.attachesList,"more-attaches-list":oe.moreAttachesList,"layout-mode":"2pane","all-count":re.length,vertical:ie.vertical,"pony-mode":h,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,p.Yv)(this)}):l().createElement(l().Fragment,null,l().createElement(X.Z,{fluid:!0,key:"list-letter-preview-stub",attachesCount:c.get("attachments_count"),isCompact:!1,"pony-mode":h,component:M.Z}))),v&&_&&l().createElement(X.Z,{fluid:!0,component:L.Z,useMediators:["orders-manager"],metadata:v,"pony-mode":h}),E&&l().createElement(X.Z,{fluid:!0,component:R.Z,model:e.model,"layout-type":e["layout-mode"],"pony-mode":h}),"none"!==f&&l().createElement(j.Z,{model:c,meta:this.goToActionMetadata,layoutMode:"2pane",mode:f}),A&&l().createElement(B.Z,{model:c,ponyMode:h,broadcastEvent:(0,p.Yv)(this)})))}function ee(){var e=this.props,t=(0,b.pJ)(),n=e.model,r=e.model,a=e["pony-mode"];return l().createElement("a",{style:e.style,"data-qa-id":(0,K.qa)(this.rootQaId()),"data-qa-index":(0,K.qa)(r.meta("_ui-index")),"data-qa-safe":(0,K.qa)(String(e.isReliable)),"data-qa-official":(0,K.qa)(String(e.isOfficial)),className:Q.root({"enable-user-select":e["enable-user-select"],"pony-mode":a,"has-indent":e.indent,normal:!e.indent,active:e.selected,firstSelected:e.isFirstSelected,lastSelected:e.isLastSelected,first:e.first,last:e.last,new:!0,"new-selection":!0,reliable:e.isImportantReliable,official:e.isOfficialGreen},{addClass:["js-letter-list-item","js-tooltip-direction_letter-bottom"]}),onDragStart:(0,p.CH)(this,{name:"unused",prevent:!0}),onClick:(0,p.CH)(this,"click"),onContextMenu:(0,p.CH)(this,"contextmenu"),href:e.href?e.href:null,tabIndex:-1,"data-id":n.get("id"),"data-draggable-id":n.get("id"),"data-uidl-id":n.get("last")},l().createElement("div",{className:Q.elem("background",{active:e.selected,react:!0})}),l().createElement(Y.Z,{swipeUnderlay:this.swipeUnderlay(e["pony-mode"],e.search,e.model),swipeUnderlayRight:this.swipeUnderlayRight(e.model),swipeContent:this.content(e),swipeHeader:this.header(e),"max-offset":String(U.q),canFullSwipe:t!==E.U.unread,maxOffsetPartLeft:H.N,onRightAction:function(){return(0,_.A)(e.model)},useMediators:["swipe-manager"]}),e.fromThread||!e.hideDelimeter&&l().createElement(X.Z,{component:A.Z,full:e["full-delimiter"],ponymode:a,indent:e.indent,indentRight:!0}),l().createElement(X.Z,{component:A.Z,ponymode:a,indent:e.indent,indentRight:!0,last:!0}))}var te,ne=(te=function(e,t){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),re=function(){return(re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},ae=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.subjectRef=l().createRef(),n.compact=!1,n.content=$,n.swipeUnderlay=v.zq,n.header=J,n.swipeUnderlayRight=v.b1,n.getSubject=f.kB,n.getImageSrc=f.Q4,n.isProbablyPhishing=f.R5,n.isCorrespondentDangerous=f.if,n.getCorrespondent=f.dy,n.getCorrespondentTooltip=f.Mg,n.getDateTooltip=f.lB,n.getCounter=f.g,n.getCategory=f.n3,n.getAllAttaches=d.Ef,n.getSearchAttaches=d.hj,n.getAttaches=c.UN,n.getAttachesModes=u.O,n.isImportant=f.RD,n.getSnippetValue=f.dP,n.getPaymentDieDisplayMode=m.OY,n.getGoToActionDisplayMode=r.Y,n.shouldShowUniversalPaymentDie=m.Ml,n.shouldHideTransactionCategory=m.Wv,n.showOrder=h.D,n.getTransactionMetadata=h.S,n.rootQaId=f.oV,n.letterDate=o.Zm,n.getUnsubscribeSender=f.V_,n.handleIntersectViewport=f.a0,n.attrs=re(re({},n.props),n.state),n.render=ee,n.meta=t.model.getPaymentMeta(),n.goToActionMetadata=t.model.getGoToActionMeta(),n}return ne(t,e),t.prototype.componentDidUpdate=function(){var e;(0,a.u)(null===(e=this.subjectRef)||void 0===e?void 0:e.current,"r-ll-cmn")},t.prototype.didMount=function(){var e;this.handleIntersectViewport(),(0,a.u)(null===(e=this.subjectRef)||void 0===e?void 0:e.current,"r-ll-cmn")},t.prototype.handleInnerEvent=function(e){var t=this.props.model;switch(e.type){case g.m.flagged:return void(0,i.ZP)(["letters_letter-item","toggle_flagged_".concat(!t.get("flags.flagged"))]);case g.m.unread:return void(0,i.ZP)(["letters_letter-item","toggle_unread_".concat(!t.get("flags.unread"))]);case g.m.clickAvatar:(0,i.ZP)(["letters_letter-item",this.props.selected?"deselect":"select"])}},t.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},t.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===m.OY.call(this)},t.defaultProps={"layout-mode":"2pane"},t}(l().Component),ie=(0,p.v$)("list-letter-common-touch",ae)},78243:function(e,t,n){"use strict";n.d(t,{Fs:function(){return Z},zq:function(){return G},b1:function(){return q},kQ:function(){return j},sY:function(){return W}});var r=n(78594),a=n(77159),i=n(48853),o=n(14077),s=n(21211),l=n(44438),c=n(63745),d=n.n(c),u=n(53263),f=n(59574),m=n(59787),h=n(95159),p=n(19274),g=n(88488),v=n(62733),_=n(48597),b=n(84893),E=n(93441),y=n(92323),T=n(30240),A=n(78381),S=n(23314),O=n(34684),C=n(58203),w=n(59710),L=n(97082),k=n(41535),I=n(65390),R=n(68246),D=n(82021),M=n(71147),P=n(28915),N=n(73794),x=n(51422),F=n(30178),U=function(){return(U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},H=new N.k("llct-t"),B=function(e){var t=e.children,n=e.enabled,r=e.className;return n?d().createElement("div",{className:r},t):d().createElement(d().Fragment,null,t)};function Z(e){var t=e.model,n=e["pony-mode"];return d().createElement(d().Fragment,null,!s.REDESIGN_OCTAVIUS_M_LETTER_LIST&&d().createElement("div",{"data-qa-id":(0,F.qa)("unread"),className:H.elem("read-status",{react:!0})},d().createElement(D.Z,{state:t.is("flags.unread"),"is-forwarded":t.is("flags.forward"),"is-replied":t.is("flags.reply"),model:t,shift:n,remitEvents:{toggle:{prevent:!0,name:w.m.unread}},remitDetails:{model:t},broadcastEvent:(0,x.Yv)(this)})),d().createElement("div",{"data-qa-id":(0,F.qa)("avatar"),className:H.elem("avatar",{unread:t.is("flags.unread")})},d().createElement(C.j,{state:e.selected,imgUrl:this.getImageSrc(),darkMode:this.props.darkMode,verified:e.isReliable,official:e.isOfficial,isTouch:!0,size:n?"common":"compact",remitEvents:{toggle:{prevent:!0,name:w.m.clickAvatar}},broadcastEvent:(0,x.Yv)(this)})))}function G(e,t,n){var r=s.ENABLE_TAGS&&!this.getCounter();return d().createElement("div",{className:H.elem("underlay-actions")},r&&s.ENABLE_ADD_TAGS_TOUCH&&d().createElement("div",{className:H.elem("tags")},d().createElement(M.Z,{model:n,tags:n.get("flags.tags"),rightSideDropdown:!0,compact:e&&!t,readonly:!r,active:!0})),d().createElement(S.Y,{model:n,common:!this.compact}))}function q(e){return d().createElement("div",{className:H.elem("underlay-actions-right")},d().createElement(O.h,{model:e,onFastAction:function(){return(0,r.A)(e)},common:!this.compact}))}function j(e){var t,n,r,a,i=e.model,c=e["pony-mode"],u=this.getSubject(),S=this.getGoToActionDisplayMode(),O="none"===S?this.getPaymentDieDisplayMode():"none",C=this.getUnsubscribeSender(),P="none"===S&&this.shouldShowUniversalPaymentDie(),N=(0,o.sD)(i,e.search),U="full"===O?e["payment-die-with-indent"]:"",Z=!!(null===(a=null==i?void 0:i.isSchedule)||void 0===a?void 0:a.call(i)),G=i.getFolder(),q=Z?(0,l.ye)(i.get("send_date")):G.get("name"),j=i.is("flags.attach"),W=i.is("flags.flagged"),V=s.ENABLE_TAGS&&!this.getCounter(),z=s.ENABLE_TAGS&&i.is("flags.tags")&&!!i.get("flags.tags").length,Y=z&&!e.showfolder,K=C&&!P&&"none"===O,X=!("none"!==S||z&&!e.search||P||(e.search||K)&&c),Q=c||N||z||s.ENABLE_TAGS,J=this.getCategory(),$=this.isImportant(),ee=this.hasBadge()&&d().createElement("div",{"data-qa-id":(0,F.qa)("letter:badge"),className:H.elem("badge")},d().createElement(A.Z,{counter:this.getCounter(),compact:!0,unread:i.is("flags.unread"),component:h.Z})),te=this.getSnippetValue();return d().createElement("div",{className:H.elem("content",{unread:i.is("flags.unread"),react:!0})},d().createElement("div",{className:H.elem("row",{top:!0})},s.REDESIGN_OCTAVIUS_M_LETTER_LIST&&d().createElement("div",{"data-qa-id":(0,F.qa)("unread"),className:H.elem("read-status",{react:!0})},d().createElement(D.Z,{state:i.is("flags.unread"),"is-forwarded":i.is("flags.forward"),"is-replied":i.is("flags.reply"),model:i,shift:c,remitDetails:{model:i},broadcastEvent:(0,x.Yv)(this)})),d().createElement("div",{className:H.elem("correspondent",{new:!0})},d().createElement(L.A,{"qa-id":(0,F.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),d().createElement("div",{className:H.elem("secondary-data")},!!J&&d().createElement("div",{className:H.elem("panel-item",{category:!0})},d().createElement(A.Z,{flat:!0,short:!0,name:J,size:"m",component:f.Z})),Z&&d().createElement("div",{className:H.elem("panel-item")},d().createElement(A.Z,{date:i.get("send_date"),component:b.Z,key:"list-letter-schedule-status"})),s.ENABLE_MENTIONS&&(i.is("flags.mention")||i.is("flags.mention_unread"))&&d().createElement("div",{className:H.elem("panel-item")},d().createElement(R.Z,{unread:i.is("flags.mention_unread")})),j&&!e["disable-attach"]&&d().createElement("div",{className:H.elem("panel-item",{"attach-status":!0})},d().createElement(A.Z,{component:m.Z,compact:!0,key:"list-letter-attach-status"})),d().createElement("div",{title:this.getDateTooltip(Z),className:H.elem("date",{new:!0,react:!0})},(0,l.Zm)(i.get("date"),Z)),d().createElement("div",{className:H.elem("flag",{new:!0,react:!0,nonActive:!W&&!$})},d().createElement(k.Z,{hideInactive:!0,priority:e.priority,important:$,state:W,remitEvents:{toggle:{prevent:!0,name:w.m.flagged}},remitDetails:{model:i},broadcastEvent:(0,x.Yv)(this)})))),d().createElement("div",{className:H.elem("row",{middle:!0,search:e.search,columns:Q}),ref:this.contentRowRef},!Q&&ee,d().createElement(B,{enabled:Q,className:H.elem("main-content")},!e["disable-subject"]&&d().createElement("div",{"data-qa-id":(0,F.qa)("subject"),title:this.getSubjectTooltip(),className:H.elem("subject")},d().createElement(A.Z,{key:u,inlineRoot:!0,subject:u,color:e.search?i.meta("search_subject.color"):null,search:e.search,component:y.Z})),X&&d().createElement("div",{"data-qa-id":(0,F.qa)("snippet"),className:H.elem("snippet",(t={search:e.search,overflow:K},t["hide-on-hover"]=V&&!e.search,t))},d().createElement(A.Z,{key:te,inlineRoot:!0,value:te,color:e.search?i.meta("search_snippet.color"):null,search:e.search,component:E.Z})),d().createElement("div",{className:H.elem("content-buttons")},P&&d().createElement(A.Z,{className:H.elem("content-button-wrapper"),fluid:!0,model:e.model,"layout-type":e["layout-mode"],"pony-mode":c,component:_.Z,"pud-fluid":!0}),"none"!==S&&d().createElement(I.Z,{model:i,meta:this.goToActionMetadata,layoutMode:"3pane",mode:S}),K&&d().createElement(A.Z,{className:H.elem("content-button-wrapper"),fluid:!0,"layout-mode":"3pane","pony-mode":c,unsubscribeSender:C,model:i,useMediators:["unsubscribe-actions","themes-manager"],component:T.Z}),Y&&s.ENABLE_ADD_TAGS_TOUCH&&d().createElement("div",{className:H.elem("tags")},d().createElement(M.Z,{model:i,tags:i.get("flags.tags"),rightSideDropdown:!0,compact:c&&!e.search,readonly:!V})))),Q&&ee),O&&"none"!==O&&d().createElement("div",{className:H.elem("payment-die-container",{noindent:!1===U,"pony-mode":c,compact:"compact"===O,metathread:e["in-metathread"]})},"compact"===O&&d().createElement(A.Z,{model:e.model,standalone:!0,"layout-mode":"3pane","pony-mode":c,component:g.Z}),"full"===O&&d().createElement(A.Z,{model:e.model,"layout-mode":"3pane","icon-container-mode":!1===U?"wide":"narrow",component:v.Z})),e.showfolder&&!z&&d().createElement("div",{className:H.elem("folder",(n={},n["hide-on-hover"]=V&&!z,n))},d().createElement(A.Z,{title:q,text:G.get("name"),"data-qa-id":(0,F.qa)("folder"),component:p.Z})),e.showfolder&&d().createElement("div",{className:H.elem("folder-tags",(r={hidden:!z},r["show-on-hover"]=V&&!z,r))},d().createElement(M.Z,{model:i,tags:i.get("flags.tags"),folder:G.get("name"),rightSideDropdown:!0})))}function W(){var e=U(U({},this.props),this.state),t=(0,a.pJ)(),n=e.model,l=e.indent,c=e["pony-mode"],f=this.getGoToActionDisplayMode(),m="none"===f?this.getPaymentDieDisplayMode():"none",h=this.getUnsubscribeSender(),p="none"===f&&this.shouldShowUniversalPaymentDie(),g=(0,o.sD)(n,e.search),v="full"!==f&&(c||!p&&!(h&&!p&&"none"===m)&&g);return d().createElement("a",{style:e.style,"data-qa-id":(0,F.qa)(this.rootQaId()),"data-qa-safe":(0,F.qa)(String(e.isReliable)),"data-qa-official":(0,F.qa)(String(e.isOfficial)),"data-qa-index":(0,F.qa)(n.meta("_ui-index")),onClick:(0,x.CH)(this,"click"),onDragStart:(0,x.CH)(this,{prevent:!0,name:"unused"}),onContextMenu:(0,x.CH)(this,"contextmenu"),className:H.root({"enable-user-select":e["enable-user-select"],"pony-mode":c,"has-indent":l,active:e.selected||e.active,selected:e.selected,open:e.active,first:e.first,last:e.last,firstSelected:e.isFirstSelected,lastSelected:e.isLastSelected,new:!0,"new-selection":!0,reliable:e.isImportantReliable,official:e.isOfficialGreen,"small-snippet":v,redesign:s.REDESIGN_OCTAVIUS_M_LETTER_LIST},{addClass:["js-letter-list-item"]}),href:e.href,tabIndex:-1,"data-id":n.get("id"),"data-draggable-id":n.get("id"),"data-uidl-id":n.get("last")},d().createElement("div",{className:H.elem("background",{active:e.selected||e.active,react:!0})}),d().createElement(P.Z,{swipeUnderlay:this.swipeUnderlay(e["pony-mode"],e.search,e.model),swipeUnderlayRight:this.swipeUnderlayRight(e.model),swipeContent:this.content(e),swipeHeader:this.header(e),canFullSwipe:t!==i.U.unread,"max-offset":String(S.q),maxOffsetPartLeft:O.N,onRightAction:function(){return(0,r.A)(e.model)},useMediators:["swipe-manager"]}),!e.hideDelimeter&&d().createElement(A.Z,{compact:!0,full:e["full-delimiter"],ponymode:c,indent:e.indent,indentRight:!0,component:u.Z}),d().createElement(A.Z,{last:!0,compact:!0,ponymode:c,indent:e.indent,indentRight:!0,component:u.Z}))}},36:function(e,t,n){"use strict";var r,a=n(71603),i=n(53785),o=n(93286),s=n(6703),l=n(41861),c=n(26694),d=n(11726),u=n(44438),f=n(63745),m=n.n(f),h=n(59710),p=n(51422),g=n(78243),v=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.contentRowRef=m().createRef(),n.compact=!0,n.content=g.kQ,n.header=g.Fs,n.swipeUnderlay=g.zq,n.swipeUnderlayRight=g.b1,n.getSubject=c.kB,n.getImageSrc=c.Q4,n.isProbablyPhishing=c.R5,n.isCorrespondentDangerous=c.if,n.getCorrespondent=c.dy,n.getCorrespondentTooltip=c.Mg,n.getDateTooltip=c.lB,n.getSubjectTooltip=c.JP,n.getSnippetValue=c.dP,n.getCounter=c.g,n.getCategory=c.n3,n.getAttaches=s.UN,n.getAttachesModes=l.O,n.isImportant=c.RD,n.getGoToActionDisplayMode=a.Y,n.getPaymentDieDisplayMode=d.OY,n.shouldShowUniversalPaymentDie=d.Ml,n.shouldHideTransactionCategory=d.Wv,n.getUnsubscribeSender=c.V_,n.handleIntersectViewport=c.a0,n.rootQaId=c.oV,n.letterDate=u.Zm,n.render=g.sY,n.meta=t.model.getPaymentMeta(),n.goToActionMetadata=t.model.getGoToActionMeta(),n}return v(t,e),t.prototype.componentDidUpdate=function(){var e;(0,i.u)(null===(e=this.contentRowRef)||void 0===e?void 0:e.current,"r-ll-cmp")},t.prototype.didMount=function(){var e;this.handleIntersectViewport(),(0,i.u)(null===(e=this.contentRowRef)||void 0===e?void 0:e.current,"r-ll-cmp")},t.prototype.handleInnerEvent=function(e){var t=this.props.model;switch(e.type){case h.m.flagged:return void(0,o.ZP)(["letters_letter-item","toggle_flagged_".concat(!t.get("flags.flagged"))]);case h.m.unread:return void(0,o.ZP)(["letters_letter-item","toggle_unread_".concat(!t.get("flags.unread"))]);case h.m.clickAvatar:(0,o.ZP)(["letters_letter-item",this.props.selected?"deselect":"select"])}},t.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===d.OY.call(this)},t.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},t.prototype.getAvatarIndent=function(){if(this.props["pony-mode"])if(this.props.indent)return"left";else return"right";return!1},t.defaultProps={"layout-mode":"3pane"},t}(m().Component);t.Z=(0,p.v$)("list-letter-compact-touch",_,{syncMediatorsOnRender:!1})},97082:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var r=n(63745),a=n.n(r),i=n(19008),o=n(73794),s=n(30178),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},c=new o.k("ll-crpt");function d(){var e=l(l({},this.props),this.state);return a().createElement("span",{title:e.title,"data-qa-id":(0,s.qa)(e["qa-id"]),className:c.root({dangerous:e.dangerous}),"data-qa-state":(0,s.qa)(e.dangerous?"dangerous":"")},(0,i.k0)(e.state))}var u,f=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=d,t}return f(t,e),t}(a().Component)},41535:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(63745),a=n.n(r),i=n(51422),o=n(81171),s=n(79929),l=n(12199),c=n(78381),d=n(73794),u=n(30178),f=new d.k("ll-fs"),m={lightning:{icon:s.STATUS_BREAKING,mod:"auto"},important:{icon:s.STATUS_ERROR,mod:"important"}};function h(){var e,t=this.props,n=t.state,r=t["disable-hover"],s=t.priority,d=t.important,h=t.hideInactive,p=!n&&(s||d),g=d?m.important:m.lightning,v=p||n;return a().createElement("button",{type:"button","data-qa-id":(0,u.qa)("flagged:".concat(n)),title:this.getTitle(),disabled:r,onClick:(0,i.CH)(this,{stop:!0,name:"toggle"}),className:f.root({"is-active":n,"disabled-hover":r,new:!0,hidden:!v&&h})},p&&a().createElement("span",{"data-qa-id":(0,u.qa)("priority:".concat(g.mod)),className:f.elem("priority",(e={},e[g.mod]=!0,e))},a().createElement(o.Icon,{icon:g.icon})),a().createElement("span",{className:f.elem("icon")},a().createElement(c.Z,{component:l.Z,name:n?"actions:favorite_on":"actions:favorite_off"})))}var p,g=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=h,t}return g(t,e),t.prototype.getTitle=function(){return this.props.state?i18n("Снять флажок"):i18n("Пометить флажком")},t}(a().Component),_=(0,i.v$)("list-letter-flag-status",v)},65390:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(72727),a=n(57579),i=n(93286),o=n(28266),s=n.n(o),l=n(63745),c=n.n(l),d=n(30178),u="_2CLP5EDizFXFzke5NvcyKs",f="_1mPquQiMTAd3lfdW_MXt8e",m="bImaDXqmj5mh5ErK3gX3d",h="_2rgVbU6Vu_-2prCkAp6qQl",p="_3Tqi3OGe3Nrsykdxa0E5y-",g="G5yeOQbBym7C0cp0xuzuR",v=function(e){var t,n,o=e.model,v=e.layoutMode,_=e.meta,b=e.mode,E=_||{},y=E.description,T=E.potentialAction,A=(0,l.useRef)(null),S=o.id;(0,l.useEffect)((function(){(0,i.ZP)({type:"show_go_to_action",rlog:"show_go_to_action-log",rlog_message:{senderEmail:o.get("correspondents.from.0.email"),letterId:S,description:y,buttonText:T.name},dwh:{letterId:S,mode:b}})}),[S,b]),(0,l.useEffect)((function(){A.current&&a.Z.getNodeInfo(A.current)}),[]);var O=(0,l.useCallback)((function(e){if(e.target instanceof HTMLAnchorElement)e.preventDefault(),(0,i.ZP)({type:"click_go_to_action",rlog:"click_go_to_action-log",rlog_message:{senderEmail:o.get("correspondents.from.0.email"),letterId:S,description:y,buttonText:T.name},dwh:{letterId:S,mode:b}}),(0,r.default)(e.target.href)}),[S,b]),C=(0,l.useCallback)((function(e){if(function(e){return 0===e.button}(e))if(e.target)a.Z.revertUrl(e.target)}),[]),w=c().createElement("span",{className:s()(m,p,(t={},t[h]="3pane"===v,t)),"data-test-id":(0,d.qa)("description")},y),L=s()(((n={})[u]=!0,n[f]="3pane"===v,n)),k=s()(g,p);return c().createElement("div",{className:L,"data-test-id":(0,d.qa)("go-to-action")},"full"===b&&y&&w,T&&c().createElement("a",{ref:A,className:k,href:T.url,onClick:O,onMouseDown:C,"data-test-id":(0,d.qa)("link")},T.name))}},62313:function(e,t,n){"use strict";n.r(t),n.d(t,{ListLetterHeaderActions:function(){return A}});var r=n(81320),a=n(70614),i=n(67808),o=n(28266),s=n.n(o),l=n(21211),c=n(63745),d=n.n(c),u=n(53485),f=n(40070),m=n(30178),h=n(8745),p=n(25654),g=n(99648),v=n(56934),_=n(62336),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},E=function(e,t,n){return"3pane"===n?t:e};function y(e){return e.width+24<=4*this.props}var T=[{props:i.wJ,conditions:y},{props:i.gG,conditions:y},{props:1/0}],A=function(e){var t=(0,g.b)(e),n=t.broadcast,i=t.attrs,o=t.globals,c=t.selectedLettersInfo,y=t.syntheticBlock,A=i.filter,S=i.folder,O=i.folders,C=i.selectFolder,w=i.selected,L=i.sortingType,k=i.hasLetters,I=i.deselectAll,R=i.readAllInProgress,D=i.mobile,M=i.showBackToParentFolder,P=i.advTopLine,N=o.ponyMode,x=o.layoutType,F=o.selectMode,U=o.is2Pane,H=o.letter,B=o.searchRoute,Z=o.filterRoute,G=o.readMode,q=d().useMemo((function(){return(0,u.Nw)({folder:S,selectFolder:C,selected:w},{searchRoute:B})}),[S,B,C,w]),j=d().useState(null),W=j[0],V=j[1],z=(0,f.k)({element:W,breakpoints:T,pureBreakpoints:!0,initialState:function(){return T.at(-1).props}}),Y=F&&!!q,K=Y&&U,X=d().useMemo((function(){return!Y&&!G&&M?(0,a.g)(S,O):null}),[Y,S,O,G,M]),Q={"touch-nav":D,letter:H,ponymode:N,remitEvents:_.j,broadcastEvent:n,useContext:y.radarContext};return e._node.classList[!k&&!Z?"add":"remove"](v.Z.display_none),d().createElement("div",{"data-qa-id":(0,m.qa)("portal"),"data-qa-type":(0,m.qa)("list-letter-actions"),className:s()(v.Z.display_mode,P?v.Z.not_border:v.Z.border,k?v.Z.not_single:v.Z.single,l.ENABLE_LETTERS_DIVIDERS&&(U?v.Z.middle_padding:v.Z.short_padding)),ref:V},d().createElement("div",{className:v.Z.read_letter},d().createElement(p.l,b({},Q,{hidden:!Y&&!X,type:X?"backToParentFolder":F?"deselect-back":"back",parentFolder:X,folder:S,folders:O,short:!0})),d().createElement(p.l,b({},Q,{type:I?"deselect":"select",disabled:!k,"has-explanation":!0,short:(0,u.$U)({selectedCount:q,sidebarColumn:z+(B?25:0)},{filter:A,sortingType:L},{is2Pane:U}),text:q})),d().createElement(p.l,b({},Q,{type:"all-read",hidden:E(Y||R||!(0,r.R)(A,{folder:S}),!0,x),shortText:(0,u.Jj)(o)})),U&&d().createElement(h.E,b({},{attrs:i,globalEnv:Q,globals:o,selectedLettersInfo:c,displayMode:K}))),d().createElement(p.l,b({},Q,{type:"filters",short:!0,hidden:Y||B,folder:S})))}},68246:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(81171),a=n(28266),i=n.n(a),o=n(79929),s=n(63745),l=n.n(s),c=n(30178),d="Q3j19R3rSmXoGe5COVsXj",u="_3IiDTCqKsEQVOKpAwhE1FW",f=function(e){var t;return l().createElement("div",{className:i()(d,(t={},t[u]=e.unread,t)),"data-qa-id":(0,c.qa)("list-letter-mention"),"data-qa-state":(0,c.qa)(e.unread?"unread":"read")},l().createElement(r.Icon,{icon:o.STATUS_MENTION,sizeX:4}))}},82021:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(63745),a=n.n(r),i=n(51422),o=n(24871),s=n(12199),l=n(78381),c=n(73794),d=n(30178),u=new c.k("ll-rs");function f(){var e,t=this.props,n=this.getIconName();return a().createElement("span",{"data-qa-id":(0,d.qa)("unread:".concat(t.state)),title:this.getTitle(),onClickCapture:(0,i.CH)(this,{stop:!0,name:"toggle"}),className:u.root((e={"is-active":t.state,"disabled-hover":t["disable-hover"],shift:t.shift},e["dotSize_".concat(t.dotSize)]=!0,e))},n&&a().createElement("span",{className:u.elem("ico")},a().createElement(l.Z,{component:s.Z,name:n})))}var m,h=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=f,t.getIconName=o.p.getIconName,t.getTitle=o.p.getTitle,t}return h(t,e),t.defaultProps={dotSize:"small"},t}(a().Component),g=(0,i.v$)("list-letter-read-status",p)},71147:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(81171),a=n(60033),i=n.n(a),o=n(28266),s=n.n(o),l=n(21211),c=n(15907),d=n(63745),u=n.n(d),f=n(89746),m=n(3754),h=n(30178),p="s5n59zaNPp54dj77xFK2a",g="_1A2UxpwAMeuU4_yQMQ5Wop",v="_1lm5U1dZ5cVA37X8RV1CuC",_="_2uuSUYl5qUQDmbrOxOrH8",b="_1MCWuJ4OOiOswf0JvFeDoj",E=function(e){var t=e.model,n=e.tags,a=e.active,o=e.rightSideDropdown,d=e.compact,E=e.folder,y=function(){var e,t;if(!(null==n?void 0:n.length))return u().createElement("div",{className:s()(_,(e={},e[b]=a,e))},u().createElement(f.Z,{compact:d}));var i=l.TAGS_ORDER.filter((function(e){return null==n?void 0:n.includes(e)})).map((function(e,t){var r,a=t===n.length-1&&!E,i=null===l.TAGS_COLORS||void 0===l.TAGS_COLORS?void 0:l.TAGS_COLORS[e];return u().createElement("div",{key:e,style:{"--octavius-list-letter-tags-indent":"".concat(10*t,"px"),"--2kit-chip-width":a?"auto":"30px","--2kit-chip-background-color":i?"var(--vkui--color_tag_background_".concat(i,")"):"var(--vkui--color_background_secondary_alpha)",backgroundColor:"var(--2kit-chip-background-color)"},className:s()(g,(r={},r[v]=a,r))},u().createElement(f.Z,{tag:e,empty:!a,compact:d}))}));if(E)i.push(u().createElement("div",{key:"search_folder_name",style:{"--octavius-list-letter-tags-indent":"".concat(10*n.length,"px"),"--2kit-chip-width":"auto","--2kit-chip-height":d?"var(--vkui--x5)":"var(--vkui--x6)","--2kit-chip-background-color":"var(--vkui--color_background_secondary)","--2kit-chip-background-color--hover":"var(--2kit-chip-background-color)","--2kit-chip-background-color--active":"var(--2kit-chip-background-color)",backgroundColor:"var(--2kit-chip-background-color)"},className:s()(g,(t={},t[v]=!0,t))},u().createElement(r.Chip,{text:E,textProps:{mode:"small"},testId:"list-letter-tag-folder"})));return i};if(e.readonly)return u().createElement("div",{"data-qa-id":(0,h.qa)("list-letter-tags"),className:p},y());else return u().createElement(r.Dropdown,{overlay:u().createElement(m.Z,{model:t,tags:n,xrayFrom:"message_list"}),pureOverlay:!0,placement:o?"bottomLeft":"bottomRight",reservePlacement:o?"topLeft":"topRight",overlayContainer:document.body,onClick:function(e){e.preventDefault()}},u().createElement("div",{"data-qa-id":(0,h.qa)("list-letter-tags"),className:p,onClick:function(e){var n;e.preventDefault();var r=null===(n=null==t?void 0:t.getFolder())||void 0===n?void 0:n.id;i().send("click_on_add_label_button",{dwh:{folder_id:Number(r),from:"message_change_menu",letter_id:null==t?void 0:t.get("last"),mode:c.default.getType(),is_compact:c.default.getUiLayout().ponyMode}})}},y()))}},35760:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r,a=n(81171),i=n(63745),o=n.n(i),s=n(21211),l=n(60033),c=n.n(l),d=n(28266),u=n.n(d),f=n(4872),m=n.n(f),h=n(36889),p=n.n(h),g=n(54901),v=n(32707),_=function(e){return{wrapper:{position:"relative",padding:"18px 16px 16px",margin:"0px 16px 16px 0px"},wrapperShort:{width:"268px",height:"184px",boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.08)",borderRadius:"12px"},wrapperBackground:{backgroundColor:"var(--vkui--color_background_secondary, #3A3A3B)"},itemWrapper:{display:"flex"},itemWrapperDisabled:{opacity:"0.5"},infoWrapper:{display:"flex",flexDirection:"column",flex:"auto"},metathreadInfo:{marginTop:"14px",marginBottom:"9px"},loaderWrapper:{position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"calc(100% - 16px)"},social:{fill:"var(--vkui--octavius_color_icon_social)"},newsLetters:{fill:"var(--vkui--octavius_color_icon_mailings)"},toMyself:{fill:"var(--vkui--octavius_color_icon_to_myself)"},news:{fill:"var(--vkui--octavius_color_icon_news)"},official:{fill:"var(--vkui--octavius_color_icon_official)"},school:{fill:"var(--vkui--octavius_color_icon_school)"},games:{fill:"var(--vkui--octavius_color_icon_games)"},receipts:{fill:"var(--vkui--octavius_color_icon_receipts)"},headerWrapper:{display:"flex",justifyContent:"space-between",marginBottom:e.x05.value},folderWrapper:{display:"flex",alignItems:"flex-end"},iconWrapper:{display:"flex",alignSelf:"center",marginRight:"12px"},iconOff:{fill:"var(--vkui--color_icon_secondary, #A5A7AD)"}}},b=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o},y=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.element=null,r.handleSubSettingChange=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=e.onChange(t[0]);if(a)r.setState({settingsInProgress:!0}),a.catch((function(){})).then((function(){r.setState({settingsInProgress:!1})}))}};var a=t.metathreadSettings.state;return r.state={settingsInProgress:!1,metathreadState:a},r}return b(t,e),t.prototype.setFolderInProgress=function(e,t){this.setState({settingsInProgress:t})},t.prototype.getMetathreadsData=function(){return[{type:"inbox",folderId:m().INBOX},{type:"toMyself",folderId:m().TOMYSELF},{type:"newsLetters",folderId:m().NEWSLETTERS},{type:"social",folderId:m().SOCIAL},{type:"news",folderId:m().NEWS},{type:"official",folderId:m().OFFICIAL},{type:"receipts",folderId:m().RECEIPTS},{type:"school",folderId:m().SCHOOL},{type:"games",folderId:m().GAMES}]},t.prototype.onSettingsEdit=function(e,t){var n,r=this,a=this.props.onSettingsEdit;this.setState({settingsInProgress:!0}),a((n={},n[e]=t,n)).then((function(){c().send("tggl_metahread_sttng_".concat(e,"_").concat(t));var n=r.getMetathreadsData().find((function(t){return t.folderId===e})).type;if(c().send("metathread_select",{dwh:{category:e,name:n,state:t}}),t===p().METATHREADS_STATES.OFF&&s.METATHREADS_FORCED_EXP){var a=r.getMetathreadsData().find((function(t){return t.folderId===e})).type,i=s.METATHREADS_FORCED_EXP.split("|")[0];c().send("metathreads-forced-exp-off",{dwh:{group:i,folder:a}})}if(t===p().METATHREADS_STATES.ON&&s.METATHREADS_FORCED_EXP){a=r.getMetathreadsData().find((function(t){return t.folderId===e})).type,i=s.METATHREADS_FORCED_EXP.split("|")[0];c().send("metathreads-forced-exp-on",{dwh:{group:i,folder:a}})}})).finally((function(){return r.setState({settingsInProgress:!1,metathreadState:t})}))},t.prototype.onMetathreadToggle=function(e,t){var n=e?p().METATHREADS_STATES.ON:p().METATHREADS_STATES.OFF;this.onSettingsEdit(t,n)},t.prototype.onHideMetathreadOnLetterList=function(e,t){var n=e?p().METATHREADS_STATES.HIDDEN:p().METATHREADS_STATES.ON;this.onSettingsEdit(t,n)},t.prototype.renderHideMetathreadOnLetterList=function(){var e=this,t=this.state.metathreadState,n=this.props.metathreadSettings.folderId,r=(0,g.Sv)(t),i=r.isOn,s=r.isHiddenOnLetterList;return void 0!==t?o().createElement(o().Fragment,null,o().createElement(a.Margin,{desktopX:1,mobileX:1}),o().createElement(a.Checkbox,{label:o().createElement(a.Text,{mode:"small",secondary:!0,text:i18n("Показывать только в списке папок")}),checked:s,onChange:function(t){return e.onHideMetathreadOnLetterList(t,n)},testId:"metathread-hidden",disabled:!i})):null},t.prototype.renderSubSettings=function(){var e=this,t=this.props.metathreadSettings.subSettings,n=this.state.metathreadState,r=(0,g.Sv)(n).isOn;if(!t||!t.length)return null;else return o().createElement(o().Fragment,null,t.filter(Boolean).map((function(t,i){return o().createElement(o().Fragment,null,o().createElement(a.Margin,{key:"margin_".concat(i),desktopX:1,mobileX:1}),o().createElement(a.Checkbox,{key:"input_".concat(i),label:o().createElement(a.Text,{mode:"small",secondary:!0,text:t.text}),checked:t.value,onChange:e.handleSubSettingChange(t),testId:t.testId,disabled:!r&&void 0!==n}))})))},t.prototype.render=function(){var e,t,n,r=this,i=this.props,l=i.metathreadSettings,c=l.type,d=l.title,f=l.folderId,h=l.text,p=l.icon,_=i.classes,b=i.layerMode,E=i.ponymode,y=i.darkMode,T=this.state,A=T.metathreadState,S=T.settingsInProgress,O=(0,g.Sv)(A),C=O.isOn,w=O.isHiddenOnLetterList,L=f===m().INBOX?!1:!C,k=u()(((e={})[_.wrapper]=!0,e[_.wrapperShort]=!b,e[_.wrapperBackground]=y,e)),I=u()(((t={})[_.itemWrapper]=!0,t[_.itemWrapperDisabled]=S,t)),R=u()(((n={})[_.iconWrapper]=!0,n[_[c]]=!0,n[_.iconOff]=!s.ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM&&L,n));return o().createElement("div",{className:k,"data-test-id":"metathread-setting-".concat(c),"data-qa-state":"".concat(C?"on":"off",":").concat(w?"hidden":"shown")},o().createElement("div",{className:I},o().createElement("div",{className:_.infoWrapper},o().createElement("div",{className:_.headerWrapper},o().createElement("div",{className:_.folderWrapper},v.yk[p]&&o().createElement(o().Fragment,null,o().createElement("div",{className:R},o().createElement(a.Icon,{icon:v.yk[p],testId:"metathread-icon"}))),o().createElement(a.Text,{text:d,secondary:!s.ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM&&L,bold:!0,testId:"metathread-title",mode:E?"small":"base"})),void 0!==A&&o().createElement(a.Switch,{compact:!0,checked:C,onChange:function(e){return r.onMetathreadToggle(e,f)},testId:"metathread-switch"})),h&&o().createElement("div",{className:_.metathreadInfo},o().createElement(a.Margin,{desktopX:.5,mobileX:.5}),o().createElement(a.Text,{text:h,mode:"small",secondary:!0,testId:"metathread-info"})),this.renderHideMetathreadOnLetterList(),this.renderSubSettings(),o().createElement(a.Margin,{mobileX:E?3:6,desktopX:E?3:6}))),S&&o().createElement("div",{className:_.loaderWrapper},o().createElement(a.Progress,{size:16,primary:!0,testId:"metathread-loader"})))},t=E([(0,a.withStyles)(_)],t)}(o().Component),T=n(79929),A=n(30178),S=function(){return{wrapper:{position:"relative",margin:"0px 16px 16px 0px"},wrapperLoading:{display:"flex"},wrapperNotLoading:{cursor:"pointer"},wrapperShort:{width:"300px",height:"216px",boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.08)",borderRadius:"12px",overflow:"hidden"},wrapperEmpty:{width:"268px",padding:"18px 16px 0",height:"200px",overflow:"hidden","&:hover":{boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.12)"}},wrapperBackground:{backgroundColor:"var(--vkui--color_background_secondary, #3A3A3B)"},infoWrapperNotEmpty:{"&:hover $divider":{borderBottomColor:"var(--vkui--color_background_modal)"}},infoWrapper:{display:"flex",flexDirection:"column",flex:"auto",height:"100%"},metathreadInfo:{marginTop:"4px"},titleWrapper:{display:"flex",justifyContent:"space-between",width:"100%",boxSizing:"border-box",color:"var(--vkui--color_text_primary, #333333)",fill:"var(--vkui--color_text_primary, #333333)","&:hover":{color:"inherit"}},titleWrapperNotEmpty:{padding:"16px",height:"100%",alignItems:"center","&:hover":{background:"var(--vkui--color_transparent--hover)"}},imgClass:{width:"100%",height:"100%",objectFit:"contain"},divider:{width:"calc(100% - 32px)",margin:"0 16px",borderBottom:"1px solid var(--vkui--color_separator_primary_alpha)"},loader:{margin:"auto"}}},O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o},w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.onFiltersClick=function(){c().send("metathreads_filters-shortcut_link_click")},t.prototype.onOpenFilterClick=function(){c().send("metathreads_filters-shortcut_add_click"),this.props.onCreateFilter()},t.prototype.render=function(){var e,t=this,n=this.props,r=n.classes,i=n.layerMode,l=n.ponymode,c=n.darkMode,d=n.filtersCount,f=n.filtersCountLoading,m=!d&&!f,h=u()(((e={})[r.wrapper]=!0,e[r.wrapperShort]=!i,e[r.wrapperBackground]=c,e[r.wrapperEmpty]=m,e[r.wrapperLoading]=f,e[r.wrapperNotLoading]=!f,e)),p=u()([r.titleWrapper,r.titleWrapperNotEmpty]),g=u()([r.infoWrapper,r.infoWrapperNotEmpty]),v="".concat(s.PACKAGES_URL,"/static.promo/octavius/metathread/filters/net_with_letter_").concat(c?"dark":"light",".png");return o().createElement("div",{className:h,"data-test-id":"metathread-filters-all"},f?o().createElement("div",{className:r.loader},o().createElement(a.Progress,{secondary:!0})):m?o().createElement("div",{className:r.infoWrapper,onClick:function(){return t.onOpenFilterClick()},"data-test-id":(0,A.qa)("metathread-filters-add")},o().createElement("div",{className:r.titleWrapper},o().createElement(a.Text,{text:i18n("Добавить фильтр"),bold:!0,testId:"metathread-add-title",mode:l?"small":"base"}),o().createElement(a.Icon,{icon:T.ACTIONS_ADD_BIG})),o().createElement("img",{src:v,className:r.imgClass})):o().createElement("div",{className:g},o().createElement("a",{href:s.FILTERS_URL,target:"_blank",className:p,onClick:this.onFiltersClick,rel:"noreferrer","data-test-id":(0,A.qa)("metathread-filters-link")},o().createElement("div",null,o().createElement(a.Text,{text:i18n("Посмотреть все фильтры"),bold:!0,testId:"metathread-filters-title",mode:l?"small":"base"}),o().createElement("div",{className:r.metathreadInfo},o().createElement(a.Text,{text:i18n.plural(d,[i18n("{filtersCount} фильтров создано",{filtersCount:d}),i18n("{filtersCount} фильтр создан",{filtersCount:d}),i18n("{filtersCount} фильтра создано",{filtersCount:d})]),mode:"small",secondary:!0,testId:"metathread-filters-info"}))),o().createElement(a.Icon,{icon:T.NAVIGATION_ARROW_LIST_NEXT})),o().createElement("div",{className:r.divider}),o().createElement("div",{className:p,onClick:function(){return t.onOpenFilterClick()},"data-test-id":(0,A.qa)("metathread-filters-add")},o().createElement(a.Text,{text:i18n("Добавить фильтр"),bold:!0,testId:"metathread-add-title",mode:l?"small":"base"}),o().createElement(a.Icon,{icon:T.ACTIONS_ADD_BIG}))))},t=C([(0,a.withStyles)(S)],t)}(o().Component),L=a.TwoKitTheming.createUseStyles((function(){return{header:{paddingRight:38},metathreadsData:{display:"flex",flexDirection:"row",flexWrap:"wrap"},description:{maxWidth:600}}})),k=function(e){var t=e.metathreadsData,n=e.onClose,r=e.onSettingsEdit,l=e.onHelpClick,c=e.onCreateFilter,d=e.updateFilters,u=e.filtersCount,f=e.filtersCountLoading,m=e.layer,h=e.ponymode,p=e.darkMode;(0,i.useEffect)((function(){if(s.ENABLE_METATHREAD_FILTERS_SHORTCUT)d()}),[]);var g=L(e),v=t.filter((function(e){return!e.isHidden}));v.sort((function(e,t){return e.sortOrder-t.sortOrder}));var _=function(){return o().createElement(o().Fragment,null,!m&&o().createElement(a.Margin,{desktopX:h?5:6.5,mobileX:h?5:6.5}),o().createElement(a.Text,{mode:h?"small":"base",text:i18n("Умная сортировка автоматически распределяет по папкам некоторые категории писем. Можно группировать рассылки, письма себе, уведомления от соцсетей, новости и другие категории."),testId:"metathreads-subtitle"}),m?o().createElement(o().Fragment,null," ",o().createElement(a.Link,{small:h,onClick:function(){return l()},testId:"metathreads-help-link"},i18n("Всё об умной сортировке"))):o().createElement(o().Fragment,null,o().createElement("br",null),o().createElement(a.Link,{small:h,onClick:function(){return l()},testId:"metathreads-help-link"},i18n("Всё об умной сортировке"))),o().createElement(a.Margin,{desktopX:h?3:5,mobileX:h?3:5}))},b=function(){return o().createElement(o().Fragment,null,v.map((function(e){return o().createElement(y,{key:e.folderId,metathreadSettings:e,onSettingsEdit:r,layerMode:m,ponymode:h,darkMode:p})})))};return o().createElement(o().Fragment,null,m?o().createElement(a.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)",testId:"metathread-settings-popup"},o().createElement(a.Panel,{popup:!0,onClose:n,mobileCross:!0},o().createElement("div",null,o().createElement(o().Fragment,null,o().createElement(a.Text,{mode:"h1",bold:!0,text:i18n("Умная сортировка"),testId:"metathreads-title"}),o().createElement(a.Margin,{desktopX:h?3:5,mobileX:h?3:5})),_(),b()))):o().createElement("div",{className:g.header},o().createElement("div",{className:g.description},_()),o().createElement("div",{className:g.metathreadsData},b(),s.ENABLE_METATHREAD_FILTERS_SHORTCUT&&o().createElement(w,{layerMode:m,ponymode:h,darkMode:p,onCreateFilter:c,filtersCount:u,filtersCountLoading:f}))))}},62336:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var r=["remove","compose:reply","compose:replyall","compose:forward","remove","archive","spam","unspam","mark:allreaded","mark:readed","select:all","select:drop","select:drop","letter:prev","letter:next","letter:back","move:click","ctrl-click","ctrl-click","search","dropdown-change","compose:reply","compose:replyall","compose:forward","remove","archive","spam","click:unsubscribe","unspam","superspam","mark:readed","mark:unreaded","mark:flagged","mark:unflagged","calls:invite","calendar:create","spam","click:unsubscribe","print","settingsfilters:create","translator:show","forward","search:from","redirect","forward","headers","download","newtab","move","clear"].reduce((function(e,t){return e[t]=t,e}),{})},70357:function(e,t,n){"use strict";n.d(t,{f:function(){return a},Z:function(){return S}});var r,a,i=n(73928),o=n(28266),s=n.n(o),l=n(21211),c=n(4872),d=n(15907),u=n(93974),f=n(63745),m=n.n(f),h=n(9783),p=n(30178),g=n(68021),v=n(5378),_=n(93258),b=n(26510),E={content:"_1P-oiOHEg-7UG9V2zQ4DfD",contentRow:"_2z6zZwl0J3e39TB06hFMc",suggestLine:"_2ORPOPCCGymswJ4AuatjfS",suggestLine__children:"_9QtkC7e5LlEiUk9_Ljx1u",searchSuggestMobile:"_3ioWJT0qqGdOvrIEA3ft5C"},y=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},A=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.Suggest="Suggest",e.Filters="Filters"}(a||(a={}));var S=function(e){function t(t){var n=e.call(this,t)||this;return n.handleDateClick=n.handleDateClick.bind(n),n.handleMessageClick=n.handleMessageClick.bind(n),n.handleColorTagClick=n.handleColorTagClick.bind(n),n.handleFolderClick=n.handleFolderClick.bind(n),n.handleRequestClick=n.handleRequestClick.bind(n),n}return y(t,e),t.prototype.handleFolderClick=function(e){var t=this.props,n=t.search,r=t.onAppendSuggest;if(r){var a=n.folders.map((function(e){return e.idNumber})),i=n.in_excluded_folders?c.TRASH:c.INBOX,o=a.length?a[0]:i;r(e,g.q.FOLDER,void 0,o)}},t.prototype.handleDateClick=function(e){var t=this.props.onAppendSuggest;if(t)t(e,g.q.DATE,void 0,{date:Date.now(),lapse:0})},t.prototype.handleColorTagClick=function(e){var t=this.props.onAppendSuggest;if(t)t(e,g.q.CATEGORY,i.ColorTagTypes.TAGGED_URGENT,void 0)},t.prototype.handleMessageClick=function(e,t){var n=this.props.onAppendSuggest;if(n)n(e,g.q.MESSAGE,void 0,t)},t.prototype.handleRequestClick=function(e,t){var n=this.props.onAppendSuggestQuery;if(n)n(e,t)},t.prototype.renderRecent=function(e){var t=this,n=this.props.search,r=n.selectedSuggest,a=n.suggests.requests;if(!a.length)return[null,e];else return[m().createElement(m().Fragment,null,m().createElement(b.Z,{text:i18n("Вы недавно искали"),caption:!0}),a.map((function(a,i){return m().createElement(b.Z,{key:i,search:n,requestSuggest:a,onAppendSuggestQuery:t.handleRequestClick,selected:e+i===r,navigationIndex:e+i})}))),e+a.length]},t.prototype.renderContacts=function(e){var t=this.props,n=t.search,r=t.onAppendSuggest,a=n.selectedSuggest,o=n.suggests.contacts;if(!o.length||!n.hiddenSuggestMap[i.OperandQueryTypes.FROM]&&!n.hiddenSuggestMap[i.OperandQueryTypes.TO])return[null,e];var s=o.slice();return s=s.slice(0,d.default.searchSuggestCount),[m().createElement("div",{key:"renderContacts","data-test-id":(0,p.qa)("suggest-contacts"),className:E.contacts},m().createElement(b.Z,{text:i18n("Люди"),caption:!0}),s.map((function(t,i){return m().createElement(b.Z,{key:i,search:n,contactSuggest:t,onAppendSuggest:r,selected:e+i===a,navigationIndex:e+i,testId:"suggest-contact-".concat(t.email)})}))),e+s.length]},t.prototype.renderWords=function(e){var t=this.props,n=t.search,r=t.onAppendSuggest,a=t.qaEnabled,o=n.selectedSuggest,s=n.suggests.words;if(!s.length||!n.hiddenSuggestMap[i.OperandQueryTypes.QUERY])return[null,e];else return[m().createElement(m().Fragment,null,s.map((function(t,i){return m().createElement("span",{key:t.word,className:E.suggestLine__children},m().createElement(b.Z,{search:n,wordSuggest:t,onAppendSuggest:r,selected:e+i===o,navigationIndex:e+i,operandType:"query",qaEnabled:a}))}))),e+s.length]},t.prototype.renderLetters=function(e){var t=this,n=this.props.search,r=n.selectedSuggest,a=n.suggests.messages;if(!a.length)return[null,e];var i=a.slice();return i=i.slice(0,d.default.searchSuggestCount),[m().createElement("div",{key:"renderLetters",className:E.letters,"data-test-id":(0,p.qa)("suggest-messages")},m().createElement(b.Z,{text:i18n("Письма"),caption:!0}),i.map((function(a,i){return m().createElement(b.Z,{key:i,search:n,messageSuggest:a,onSuggestClick:t.handleMessageClick,selected:e+i===r,navigationIndex:e+i})}))),e+i.length]},t.prototype.getOperandData=function(e,t){switch(e){case i.OperandSuggestAddTypes.FROM:return{contactSuggest:{email:t}};default:return{}}},t.prototype.renderOperands=function(e){var t=this,n=this.props,r=n.search,a=n.onAppendSuggestOperand,i=n.qaEnabled,o=r.suggests.operands;if(!o.length)return[null,e];else return[m().createElement(m().Fragment,null,o.map((function(n,o){var s=n.type,l=n.value;return m().createElement("span",{key:l,className:E.suggestLine__children},m().createElement(b.Z,T({qaEnabled:i,search:r,onAppendSuggest:a,operandType:s,navigationIndex:e+o,selected:e+o===r.selectedSuggest},t.getOperandData(s,l))))}))),e+o.length]},t.prototype.renderSuggestLine=function(e){if(this.props.search.hasOperands)return[null,e];var t=this.renderWords(e),n=t[0],r=t[1],a=this.renderOperands(r),i=a[0],o=a[1];if(!n&&!i)return[null,e];else return[m().createElement("div",{key:"renderSuggestLine",className:E.suggestLine},n,i),o]},t.prototype.renderSuggests=function(e){var t,n=this.props.search,r=n.suggests,a=r.requests,i=r.words,o=r.messages,l=r.contacts,c=r.operands;if(!i.length&&!c.length&&!l.length&&!o.length&&(!a.length||n.hasOperands))return[null,e];var d=this.renderSuggestLine(e),u=d[0],f=d[1],h=this.renderContacts(f),p=h[0],g=h[1],v=this.renderRecent(g),_=v[0],b=v[1],y=this.renderLetters(b),T=y[0];if(e=y[1],!(_||p||u||T))return[null,e];var A=s()(((t={})[E.contentRow]=!0,t));return[m().createElement("div",{key:"renderSuggests",className:A},u,_,p,T),e]},t.prototype.renderFilters=function(e){var t,n,r,a,o,c,d=this.props,u=d.search,f=d.onAppendSuggest,_=d.qaEnabled,y=d.darkMode,T=d.mobileView,A=d.onSuggestClick;if(e>0&&u.smartInput.operands.length&&!T)return[null,e];var S=u.hiddenSuggestMap,O=u.displayedFilter,C=u.query,w=u.selectedSuggest,L=s()(((t={})[E.contentRow]=!0,t)),k=function(e){return function(t,n){return A(t,{addressee:e})}};return[m().createElement("div",{key:"renderFilters",className:L,"data-test-id":(0,p.qa)("suggest-operands")},Boolean(S[g.q.MAILBOX])&&m().createElement(m().Fragment,null,m().createElement(b.Z,{testId:_?"category-mailboxes":void 0,text:i18n("Ящики"),caption:!0}),S[g.q.MAILBOX].map((function(t,n){return m().createElement(b.Z,{key:n,mailboxSuggest:t,navigationIndex:e++,selected:!T&&e-1===w,onAppendSuggest:f,testId:_?"".concat(g.q.MAILBOX,":").concat(t.email):void 0})}))),T&&O===g.q.ADDRESSEE&&m().createElement(m().Fragment,null,m().createElement(b.Z,{onSuggestClick:k(v.tW.FROM),testId:_?"addressee:".concat(v.tW.FROM):void 0,search:u,text:h.Ek[v.tW.FROM],rightIconName:void 0!==(null===(n=C.correspondents)||void 0===n?void 0:n.from)&&v.tW.STATUS_DONE}),m().createElement(b.Z,{onSuggestClick:k(v.tW.TO),testId:_?"addressee:".concat(v.tW.TO):void 0,search:u,text:h.Ek[v.tW.TO],rightIconName:void 0!==(null===(r=C.correspondents)||void 0===r?void 0:r.to)&&v.tW.STATUS_DONE}),m().createElement(b.Z,{onSuggestClick:k(v.tW.SUBJECT),testId:_?"addressee:".concat(v.tW.SUBJECT):void 0,search:u,text:h.Ek[v.tW.SUBJECT],rightIconName:void 0!==C.subject&&v.tW.STATUS_DONE}),m().createElement(b.Z,{onSuggestClick:k(v.tW.QUERY),testId:_?"addressee:".concat(v.tW.QUERY):void 0,search:u,text:h.Ek[v.tW.QUERY],rightIconName:void 0!==C.query&&v.tW.STATUS_DONE})),T&&O===g.q.FOLDER&&u.folders.map((function(e){return m().createElement(b.Z,{key:e.idNumber,onSuggestClick:(t=e.idNumber,function(e,n){return A(e,{folder:t})}),testId:_?"folder:".concat(e.idNumber):void 0,search:u,text:e.folderName,rightIconName:u.query.folder===e.idNumber&&v.tW.STATUS_DONE});var t})),(S[g.q.FILTER]||S[g.q.CATEGORY]||S[g.q.DATE]||S[g.q.FOLDER])&&!T&&m().createElement(b.Z,{text:i18n("Фильтры"),caption:!0}),S[g.q.FILTER]&&m().createElement(m().Fragment,null,S[i.OperandFilterTypes.UNREAD]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.UNREAD,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:(null===(a=C.flags)||void 0===a?void 0:a.unread)&&v.tW.STATUS_DONE,testId:_?"filter:".concat(i.OperandFilterTypes.UNREAD):void 0}),S[i.OperandFilterTypes.FLAGGED]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.FLAGGED,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:(null===(o=C.flags)||void 0===o?void 0:o.flagged)&&v.tW.STATUS_DONE,testId:_?"filter:".concat(i.OperandFilterTypes.FLAGGED):void 0}),S[i.OperandFilterTypes.ATTACH]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.ATTACH,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:(null===(c=C.flags)||void 0===c?void 0:c.attach)&&v.tW.STATUS_DONE,testId:_?"filter:".concat(i.OperandFilterTypes.ATTACH):void 0})),S[g.q.FILTER]&&S[g.q.CATEGORY]&&m().createElement(b.Z,{iconEmpty:!0,hr:!0}),S[g.q.CATEGORY]&&m().createElement(m().Fragment,null,S[i.CategoryTypes.DOCUMENT_SCANS]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.DOCUMENT_SCANS,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.DOCUMENT_SCANS&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.DOCUMENT_SCANS):void 0}),S[i.CategoryTypes.ORDER]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.ORDER,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.ORDER&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.ORDER):void 0}),S[i.CategoryTypes.FINANCE]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.FINANCE,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.FINANCE&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.FINANCE):void 0}),S[i.CategoryTypes.REGISTRATION]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.REGISTRATION,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.REGISTRATION&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.REGISTRATION):void 0}),S[i.CategoryTypes.TRAVEL]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.TRAVEL,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.TRAVEL&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.TRAVEL):void 0}),S[i.CategoryTypes.EVENT]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.EVENT,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.EVENT&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.EVENT):void 0}),S[i.CategoryTypes.FEES]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.FEES,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.FEES&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.FEES):void 0}),S[i.CategoryTypes.OFFICIAL]&&m().createElement(b.Z,{onAppendSuggest:f,type:i.ColouredIconTypes.OFFICIAL,search:u,navigationIndex:e++,selected:!T&&e-1===w,rightIconName:C.transaction_category===i.ColouredIconTypes.OFFICIAL&&v.tW.STATUS_DONE,testId:_?"category:".concat(i.CategoryTypes.OFFICIAL):void 0})),(S[g.q.FILTER]||S[g.q.CATEGORY])&&S[g.q.DATE]&&m().createElement(b.Z,{iconEmpty:!0,hr:!0}),S[g.q.DATE]&&m().createElement(b.Z,{text:i18n("Указать дату"),iconName:v.tW.CALENDAR,search:u,onClick:this.handleDateClick,navigationIndex:e++,selected:!T&&e-1===w}),l.ENABLE_COLOR_TAGS_SEARCH&&S.COLOR_TAG_CUSTOM&&m().createElement(b.Z,{text:i18n("Метки"),iconName:v.tW.STATUS_TAG,rightIconName:y?v.tW.COLOR_TAG_SUGGEST_DARK:v.tW.COLOR_TAG_SUGGEST_LIGHT,search:u,onClick:this.handleColorTagClick,navigationIndex:e++,selected:!T&&e-1===w}),(S[g.q.FILTER]||S[g.q.CATEGORY]||S[g.q.DATE])&&S[g.q.FOLDER]&&!T&&m().createElement(b.Z,{iconEmpty:!0,hr:!0}),S[g.q.FOLDER]&&!T&&m().createElement(b.Z,{testId:_?"".concat(g.q.FOLDER):void 0,text:i18n("В папке"),iconName:v.tW.FOLDER,search:u,onClick:this.handleFolderClick,navigationIndex:e++,selected:!T&&e-1===w})),e]},t.prototype.render=function(){var e,t=this.props,n=t.themeClassName,r=t.onItemsCounted,i=t.mobileView,o=s()(((e={})[E.content]=!i,e[E.searchSuggestMobile]=i,e[n]=!0,e)),l=this.renderSuggests(0),c=l[0],d=l[1],u=this.renderFilters(d),f=u[0],h=u[1];if(r)r(h);return m().createElement("div",{className:o,"data-test-id":(0,p.qa)("search-suggest")},(!i||i===a.Suggest)&&c,(!i||i===a.Filters)&&f)},t=A([(0,_.Z)("r-search-suggest"),u.observer],t)}(m().Component)},26510:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(73928),a=n(60033),i=n.n(a),o=n(28266),s=n.n(o),l=n(21211),c=n(63745),d=n.n(c),u=n(4673),f=n(72727),m=n(68021),h=n(32707),p=n(81171),g=n(98957),v=function(e){var t=void 0===e?{}:e,n=t.height,r=t.width,a=t.name,i=void 0===a?"":a,o=t.email,s=void 0===o?"":o;if(r<32||n<32)r=32,n=32;return(0,g.Z)({email:s,name:i,width:r,height:n})},_=function(e){var t=e.children,n=(0,c.useMemo)((function(){return{createUrl:v}}),[]);return d().createElement(r.AvatarContext.Provider,{value:n},t)},b=n(86334),E="_3UG8ECLkpwEU8l49f--EUt",y="xIuO6wSw8nezfbcMvMfaq",T="_2xkD24AINYqp-cRCPutgfJ",A="_2Hrpw6lvdrwls5u2yLix4x",S="_3k0V5nFgoxSjmsqBX8ypFg",O="_2e6OsQnv4_rgm5F8dE7ldQ",C="e1vNIzlBa6UApOLrnaQMY",w="_3z8wuQW-6-G865YKdF3iCO",L="_30NfWRY8h2ACt23xLycfYl",k="_1hQ5Wi0Sf8XxCReuoM6Z_v";function I(e){var t,n,a,i,o=e.contact,l=e.text,c=e.subject,u=e.found,f=e.onlyEmailText,m=e.avatarSmall,h=e.tooltip,g=e.boldText,v=e.avatarSize,I=void 0===v?r.AvatarSizes.s32x32:v,R=s()(((t={})[T]=!0,t[A]=!!l,t[S]=m,t)),D=s()(((n={})[w]=!0,n)),M=s()(((a={})[L]=!0,a)),P=f||!o.name,N=s()(((i={})[O]=!0,i[C]=P,i)),x=P?o.email:o.name,F=null!==(null!=u?u:null),U=d().createElement("div",{className:y},l&&d().createElement(b.Z,{className:D,text:c||l}),d().createElement(_,null,d().createElement(r.Avatar,{className:R,model:o,size:I})),d().createElement("div",{className:N},d().createElement(b.Z,{className:M,text:x,bold:g}),!P&&d().createElement(b.Z,{className:M,text:o.email,type:b.y.SECONDARY,bold:g})),F&&d().createElement(b.Z,{className:k,text:u.toString()}));return d().createElement("div",{className:E},function(e,t){if(t)return d().createElement(p.Tooltip,{placement:"rightTop",overlay:t,overlayContainer:document.body},e);else return e}(U,h))}var R=n(5910),D="_17BcqoINrJbfoEjkhS70b_",M="uWr0PMvnWHgtSeD5bZ7oc",P="_3A2PW_lqyMdSgl6JP7IYz5",N="_1zYbF-t1YYgeSvkGivHBSO",x=i18n("<Без темы>");function F(e){var t,n,a,i=e.message,o=s()(((t={})[M]=!0,t)),l=s()(((n={})[N]=!0,n)),c=s()(((a={})[P]=!0,a));return d().createElement("div",{className:D},d().createElement(_,null,d().createElement(r.Avatar,{className:o,model:i,size:r.AvatarSizes.s32x32})),d().createElement("div",{className:c},d().createElement(b.Z,{className:l,text:i.subject||x}),d().createElement(b.Z,{className:l,text:i.name||i.email,type:b.y.SECONDARY})))}var U,H="_2WVqp2iHOmm4cSPJ2JOofx",B="_36GwOVrRcJV4f6ql7FCTLr",Z=(U=function(e,t){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function q(e){var t=String(e);if(1===t.length)return"0".concat(t);else return t}var j=function(e){function t(t){var n=e.call(this,t)||this;return n.handleGenericClick=n.handleGenericClick.bind(n),n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseDown=n.handleMouseDown.bind(n),n.handleClick=n.handleClick.bind(n),n}return Z(t,e),t.renderRequest=function(e,t){var n,a,i,o,l,c,f,m,h=[],p=[];if(void 0!==e.query)h.push(d().createElement(d().Fragment,null,e.query)),p.push(e.query);if(void 0!==e.subject)h.push(d().createElement(d().Fragment,null,e.subject)),p.push(e.subject);if(e.flags){if(e.flags.unread)h.push(t[r.OperandFilterTypes.UNREAD]),p.push(null===(o=null===(i=t[r.OperandFilterTypes.UNREAD])||void 0===i?void 0:i.toLowerCase)||void 0===o?void 0:o.call(i));if(e.flags.flagged)h.push(t[r.OperandFilterTypes.FLAGGED]),p.push(null===(c=null===(l=t[r.OperandFilterTypes.FLAGGED])||void 0===l?void 0:l.toLowerCase)||void 0===c?void 0:c.call(l));if(e.flags.attach)h.push(t[r.OperandFilterTypes.ATTACH]),p.push(null===(m=null===(f=t[r.OperandFilterTypes.ATTACH])||void 0===f?void 0:f.toLowerCase)||void 0===m?void 0:m.call(f))}if(void 0!==e.transaction_category)h.push(i18n("в категории"),d().createElement(d().Fragment,null,"«",t[e.transaction_category],"»")),p.push("".concat(i18n("в категории")," «").concat(t[e.transaction_category],"»"));if(e.correspondents){if(void 0!==e.correspondents.to)h.push("".concat(i18n("кому"),":"),d().createElement(I,{avatarSize:20,contact:{email:e.correspondents.to}})),p.push("".concat(i18n("кому"),": ").concat(e.correspondents.to));if(void 0!==e.correspondents.from)h.push("".concat(i18n("от кого"),":"),d().createElement(I,{avatarSize:20,contact:{email:e.correspondents.from}})),p.push("".concat(i18n("от кого"),": ").concat(e.correspondents.from))}if(void 0!==e.folder)h.push("".concat(i18n("в папке")),d().createElement(d().Fragment,null,"«",e.folder,"»")),p.push("".concat(i18n("в папке")," «").concat(e.folder,"»"));if(void 0!==e.interval){var g=u.ZP.fromRPCInterval(e.interval).toDateAndDateEnd(),v=g.date,_=g.dateEnd;if(h.push(i18n("за"),d().createElement(d().Fragment,null,q(v.getDate()),".",q(v.getMonth()+1),".",v.getFullYear())),p.push("".concat(i18n("за")," ").concat(q(v.getDate()),".").concat(q(v.getMonth()+1),".").concat(v.getFullYear())),_)h.push("—",d().createElement(d().Fragment,null,q(_.getDate()),".",q(_.getMonth()+1),".",_.getFullYear())),p.push("— ".concat(q(_.getDate()),".").concat(q(_.getMonth()+1),".").concat(_.getFullYear()))}var E=s()(((n={})[B]=!0,n)),y=p.join(" ");y=y[0].toUpperCase()+y.slice(1);var T=h.map((function(e,t){if("string"==typeof e)if(0===t)e=e[0].toUpperCase()+e.slice(1).toLowerCase();else e=e.toLowerCase();if(0!==t)e=d().createElement(d().Fragment,null," ",e);return d().createElement(b.Z,{className:E,key:t},e)})),A=s()(((a={})[H]=!0,a));return{contentText:y,isFilter:!1,component:d().createElement("span",{className:A},T)}},t.prototype.applyOperand=function(e,t,n,r){var a=this.props,i=a.selected,o=a.onAppendSuggest;if(o)o(e,t,n,r,i)},t.prototype.addMailboxOperand=function(e,t){this.applyOperand(e,m.q.MAILBOX,void 0,t)},t.prototype.addFolderOperand=function(e,t){this.applyOperand(e,m.q.FOLDER,void 0,t.idNumber)},t.prototype.addDateOperand=function(e,t){this.applyOperand(e,m.q.DATE,void 0,u.ZP.fromRPCInterval(t).toDateAndDateEnd())},t.prototype.addFilterOperand=function(e,t){this.applyOperand(e,m.q.FILTER,t)},t.prototype.addCategoryOperand=function(e,t){this.applyOperand(e,m.q.CATEGORY,t)},t.prototype.addQueryOperand=function(e,t,n){this.applyOperand(e,m.q.QUERY,t,n)},t.prototype.addRequestSuggest=function(e,t){var n=this.props.onAppendSuggestQuery;if(n)n(e,t)},t.prototype.handleSearchInternetClick=function(e){i().send("suggest_".concat(r.OperandSuggestAddTypes.SEARCH_INTERNET,"_click")),(0,f.default)("".concat(l.SUGGEST_SEARCH_INTERNET_URL,"&q=").concat(encodeURIComponent(e)))},t.prototype.handleGenericClick=function(e){var t=this.props,n=t.search,a=t.type,i=t.operandType,o=t.contactSuggest,s=t.requestSuggest,l=t.messageSuggest,c=t.wordSuggest,d=t.folderSuggest,u=t.dateSuggest,f=t.mailboxSuggest,m=t.onClick,h=t.onSuggestClick;if(i!==r.OperandSuggestAddTypes.SEARCH_INTERNET)if(!h)if(!m){if(o)if(!n.hiddenSuggestMap[r.OperandQueryTypes.FROM])return void this.addQueryOperand(e,r.OperandQueryTypes.TO,o.email);else return void this.addQueryOperand(e,r.OperandQueryTypes.FROM,o.email);if(!c)if(!s)if(!d)if(!u){if(f)this.addMailboxOperand(e,f);switch(a){case r.ColouredIconTypes.UNREAD:case r.ColouredIconTypes.FLAGGED:case r.ColouredIconTypes.ATTACH:return void this.addFilterOperand(e,a);case r.ColouredIconTypes.ORDER:case r.ColouredIconTypes.EVENT:case r.ColouredIconTypes.FEES:case r.ColouredIconTypes.FINANCE:case r.ColouredIconTypes.REGISTRATION:case r.ColouredIconTypes.DOCUMENT_SCANS:case r.ColouredIconTypes.OFFICIAL:case r.ColouredIconTypes.TRAVEL:case r.ColouredIconTypes.TAGGED_PERSONAL:case r.ColouredIconTypes.TAGGED_URGENT:case r.ColouredIconTypes.TAGGED_NEEDS_REPLY:case r.ColouredIconTypes.TAGGED_IMPORTANT:case r.ColouredIconTypes.TAGGED_DOCUMENTS:this.addCategoryOperand(e,a)}}else this.addDateOperand(e,u);else this.addFolderOperand(e,d);else this.addRequestSuggest(e,s);else this.addQueryOperand(e,r.OperandQueryTypes.QUERY,c.word)}else m(e);else h(e,l);else this.handleSearchInternetClick(n.value)},t.prototype.handleMouseDown=function(e){var t=this.props.onMouseDown;if(!t)this.handleGenericClick(e);else t(e)},t.prototype.handleClick=function(e){var t=this.props.onClick;if(t)t(e)},t.prototype.handleMouseEnter=function(){var e=this.props,t=e.search,n=e.navigationIndex;t&&t.setSuggestsInfo({selectedSuggest:n})},t.prototype.renderData=function(e,n){var r=this.props,a=r.iconName,i=r.rightIconName,o=r.type,s=r.contactSuggest,l=r.messageSuggest,c=r.requestSuggest,u=r.wordSuggest,f=r.folderSuggest,m=r.mailboxSuggest,p=r.dateSuggest,g=r.forceFilter,v=e;if(s)return{contentText:v,isFilter:g,component:d().createElement(I,{avatarSize:s.avatarSize,contact:s,text:e})};if(m)return{contentText:v,isFilter:g,component:d().createElement(I,{contact:m,onlyEmailText:!0,avatarSmall:!0,found:m.found,tooltip:m.tooltip,boldText:m.boldText})};if(l)return{contentText:v,isFilter:g,component:d().createElement(F,{message:l})};if(f)return{contentText:v=e||f.folderName,isFilter:g,component:d().createElement(R.Ek,{badgeText:f.found.toString(),contentText:v,iconName:(0,h.Co)(f.folderModel)})};if(p)return{contentText:v=n.intervalText(p),isFilter:g,component:d().createElement(R.Ek,{badgeText:p.found,contentText:v,iconEmpty:!0})};if(c)return t.renderRequest(c.query,n);if(u)return{contentText:v=e||u.word,isFilter:g,component:d().createElement(b.Z,{text:e||u.word,type:b.y.NORMAL})};else return{contentText:v,isFilter:!0,component:d().createElement(R.Ek,{iconName:a||o,rightIconName:i,contentText:v})}},t.prototype.renderOperand=function(e){var t=this.props,n=t.operandType,a=t.navigationIndex,i=t.selected,o=t.qaEnabled;switch(n){case"query":return d().createElement(r.OperandSuggestQuery,{qaEnabled:o,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,value:e,active:i,dataCustom:{"data-navigation-index":a}});default:return d().createElement(r.OperandSuggestAdd,{qaEnabled:o,type:n,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,active:i,dataCustom:{"data-navigation-index":a}})}},t.prototype.renderContent=function(e){var t=this.props,n=t.caption,r=t.hr,a=t.iconEmpty,i=t.listType,o=t.navigationIndex,s=t.selected,l=t.short,c=t.text,u=t.title,f=t.type,m=t.testId,h=t.mode,p=t.operandType,g=c||e[f];if(r)return d().createElement(R.Ty,{iconEmpty:a,type:i});if(n)return d().createElement(R.wg,{testId:m,text:g});var v=this.renderData(g,e),_=v.contentText,b=v.isFilter,E=v.component,y=l?{title:u||_}:{};if(p)return this.renderOperand(_);else return d().createElement(R.ZP,G({navigationIndex:o,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,selected:s,short:l,type:i,isFilter:b,testId:m,mode:h},y),E)},t.prototype.render=function(){var e=this;return d().createElement(r.LocalizationContext.Consumer,null,(function(t){return e.renderContent(t)}))},t}(d().PureComponent)},43008:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},s:function(){return c}});var r=n(63745),a=n.n(r),i=n(73794),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},s=new i.k("swipeable"),l=a().createContext(!1);function c(){var e=o(o({},this.props),this.state);return a().createElement("div",{ref:this.swipeableRef,className:s.root({react:!0,animated:e.animated,swiped:e.underlay})},!!e.underlay&&a().createElement(a().Fragment,null,a().createElement("div",{className:s.elem("underlay"),ref:this.swipeUnderlayRef},e.swipeUnderlay),a().createElement("div",{className:s.elem("underlay-right"),ref:this.swipeUnderlayRightRef},a().createElement(l.Provider,{value:e.rightActive},e.swipeUnderlayRight))),a().createElement("div",{className:s.elem("content-wrapper",{react:!0})},a().createElement("div",{ref:this.swipeableContentRef,className:s.elem("content")},a().createElement("div",{className:s.elem("header",{react:!0})},e.swipeHeader),a().createElement("div",{className:s.elem("content-element",{react:!0})},e.swipeContent))))}},28915:function(e,t,n){"use strict";var r,a=n(54844),i=n(90557),o=n(42629),s=n(21211),l=n(63745),c=n.n(l),d=n(51422),u=n(43008),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},h=a.Z.capabilities["touch-support"],p=function(e){return e.SUPPORT_POINTER_EVENTS?"pointerdown":"touchstart"},g=function(e){function t(t){var n=e.call(this,t)||this;return n.reactComponent=!0,n.swipeableMounted=!1,n.touchEventsReady=!1,n.swipeWidthLessElWidth=!1,n.elWidth=0,n.currentPos=o.ez.CENTER,n.watchSwipe=o.u7.watchSwipe,n.onOutsideClick=o.u7.onOutsideClick,n.activateTouchEvents=o.u7.activateTouchEvents,n.onSwipe=o.u7.onSwipe,n.onPanStart=o.u7.onPanStart,n.onPan=o.u7.onPan,n.onPanEnd=o.u7.onPanEnd,n.swipe=o.u7.swipe,n.moveContainerX=o.u7.moveContainerX,n.setContainerPos=o.u7.setContainerPos,n.getSwipeWidth=o.u7.getSwipeWidth,n.watchOutsideClick=o.u7.watchOutsideClick,n.addInsideTarget=o.u7.addInsideTarget,n.swipeWidthLessElWidthFunc=o.u7.swipeWidthLessElWidthFunc,n.reset=o.u7.reset,n.render=u.s,n.attrs=m(m({},n.props),n.state),n.swipeableRef=c().createRef(),n.swipeableContentRef=c().createRef(),n.swipeUnderlayRef=c().createRef(),n.swipeUnderlayRightRef=c().createRef(),n.timeouts={},n}return f(t,e),Object.defineProperty(t.prototype,"el",{get:function(){return this.swipeableRef.current},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;if(this.swipeableMounted=!0,this._insiders=[],this._pos={x:0,y:0},this.addInsideTarget(this.el),h)(0,i.dU)().then((0,i.qh)(this,(function(t){if(e.swipeableMounted&&!s.DISABLE_LETTER_SWIPE)e.Hammer=t,e.handleTouchStart=function(){e.activateTouchEvents()},e.el.addEventListener(p(t),e.handleTouchStart,!0)})))},t.prototype.componentDidUpdate=function(e,t){var n=this,r=m(m({},this.props),this.state);this.attrs=r;var a=m(m({},e),t);if(r.disabled!==a.disabled)this.touchEventsReady&&this.watchSwipe(!r.disabled);if(r.animated!==a.animated)if(clearTimeout(this.timeouts.animated),(0,d.CH)(this,{name:"animation-changed",details:{value:r.animated}}),r.animated)this.timeouts.animated=setTimeout((function(){return n.setState({animated:!1})}),350);if(r.underlay!==a.underlay)(0,d.CH)(this,{name:"underlay-changed",details:{value:r.underlay}})},t.prototype.componentWillUnmount=function(){if(this.swipeableMounted=!1,h&&this.Hammer&&this.el.removeEventListener(p(this.Hammer),this.handleTouchStart,!0),Object.values(this.timeouts).forEach((function(e){window.clearTimeout(e)})),this.touchEventsReady)this.watchOutsideClick(!1),this.watchSwipe(!1),this._insiders=[]},t}(c().Component),v=(0,d.v$)("swipeable",g,{syncMediatorsOnRender:!1});t.Z=v},3754:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(81171),a=n(60033),i=n.n(a),o=n(62387),s=n(21211),l=n(79929),c=n(92042),d=n.n(c),u=n(15907),f=n(63745),m=n.n(f),h=n(5910),p=n(30178),g="_20AOs9Rzki2pykeqGTgJWi",v="_1xMWOID8S2qMMRlJ35VpJ5",_="_2vjeQtsPLruSIi8mhWeCO5",b=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},E=function(e){var t,n=e.model,a=e.tags,c=e.xrayFrom,E=null===(t=null==n?void 0:n.getFolder())||void 0===t?void 0:t.id,y=u.default.getUiLayout().ponyMode,T=(0,f.useCallback)((function(e){if(null==a?void 0:a.includes(e))return i().send("click_delete_label",{dwh:{folder_id:Number(E),from:c,label_name:e,letter_id:n instanceof d()?n.get("last"):null==n?void 0:n.id,mode:u.default.getType(),is_compact:y}}),(0,o.dB)(n,e);else return i().send("click_add_label",{dwh:{folder_id:Number(E),from:c,label_name:e,letter_id:n instanceof d()?n.get("last"):null==n?void 0:n.id,mode:u.default.getType(),is_compact:y}}),(0,o.pV)({model:n,tags:b(b([],null!=a?a:[],!0),[e],!1)})}),[E,n,a,c]),A=Object.entries(o.UB).map((function(e){var t=e[0],n=e[1],i=null==a?void 0:a.includes(t);return m().createElement(h.ZP,{key:t,mode:"nano",markable:!0,marked:i,onClick:function(){return T(t)},testId:"tags-picker-item:".concat(t,":").concat(i?"marked":"not_marked")},m().createElement("div",{className:g},m().createElement("div",{className:v,style:{backgroundColor:"var(--vkui--color_tag_background_".concat(null===s.TAGS_COLORS||void 0===s.TAGS_COLORS?void 0:s.TAGS_COLORS[t],")")}}),m().createElement("div",{className:_},m().createElement(r.Text,{mode:y?"small":"base",text:n}))))}));if(null==a?void 0:a.length)A.unshift(m().createElement(h.ZP,{key:"no_tag",mode:"nano",markable:!0,onClick:function(){i().send("click_delete_all_label",{dwh:{labels:null==a?void 0:a.join(","),folder_id:Number(E),from:c,letter_id:n instanceof d()?n.get("last"):null==n?void 0:n.id}}),(0,o.pV)({model:n,tags:[]})},testId:"tags-picker-item:no_tag"},m().createElement("div",{className:g},m().createElement(r.Icon,{icon:l.ACTIONS_CLOSE}),m().createElement("div",{className:_},m().createElement(r.Text,{mode:y?"small":"base"},i18n("Без меток"))))));return m().createElement("div",{"data-qa-id":(0,p.qa)("tags-picker")},A)}},86334:function(e,t,n){"use strict";n.d(t,{y:function(){return a},Z:function(){return h}});var r,a,i=n(28266),o=n.n(i),s=n(63745),l=n.n(s),c=n(40393),d=n(93258),u={text:"LG-qpXXxvyWu6jdl5Gi7J",normal:"_2gKLkbexHGxTQZD1QZ1Rjy",compact:"_2QZhjTImYCoGipR10q4egR",type_normal:"RoFgOx4FtYsE75MGCG1F0",type_badge:"_3oebx2fsA1-fiPatjmNyF",type_secondary:"zeOwucwyESXoqO1hsz6dT",bold:"_2FBZnr8QOI7cn9pMLgkRAm",type_caption:"_2xV0XYI8vqnpAY3D78_2HI",contactName:"_2XFqcqPMFWHtYaXVX5gpnP"},f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.NORMAL="type_normal",e.CAPTION="type_caption",e.BADGE="type_badge",e.SECONDARY="type_secondary"}(a||(a={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.render=function(){var e,t=this.props,n=t.children,r=t.className,a=t.mode,i=t.text,s=t.themeClassName,c=t.type,d=t.bold,f=t.testId,m=o()(((e={})[u.text]=!0,e[u[c]]=void 0!==c,e[u[a]]=void 0!==a,e[u.bold]=d,e[r]=void 0!==r,e[s]=void 0!==s,e));return l().createElement("span",{"data-test-id":f,className:m},i||n)},t=m([c.R,(0,d.Z)((function(e){if(e.type!==a.SECONDARY)return"r-text";else return"ll-pd__text_subtitle"}))],t)}(l().PureComponent)},19465:function(e,t,n){"use strict";n.r(t);var r=n(63745),a=n(10476);t.default=function(){var e=(0,r.useRef)(null),t=(0,r.useRef)(!1),i=(0,a.C)({name:"vk-messenger-provider",mediators:["layout-manager","themes-manager"]})[0];return(0,r.useEffect)((function(){if((r=i).hasOwnProperty("offset")&&r.hasOwnProperty("darkMode")){var r;if(!t.current)t.current=!0,Promise.resolve().then(n.bind(n,84627)).then((function(t){var n,r;e.current=t.vkMessengerLoader,null===(n=e.current)||void 0===n||n.setThemeMode(i.darkMode),null===(r=e.current)||void 0===r||r.setOffset(i.offset),e.current.restoreOnReload()}))}}),[i.darkMode,i.offset]),(0,r.useEffect)((function(){var t;null===(t=e.current)||void 0===t||t.setThemeMode(i.darkMode)}),[i.darkMode]),(0,r.useEffect)((function(){var t;null===(t=e.current)||void 0===t||t.setOffset(i.offset)}),[i.offset]),null}},40520:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var r,a,i=n(63745),o=n.n(i),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};var l={},c=new Proxy((function(e){var t=e.children,n=o().useReducer((function(e){return e+1}),0)[1];if(o().useEffect((function(){if(!r)(function(){if(a)return a;var e=new Promise((function(e,t){try{window.require(["@mail/vkui"],(function(t){r=t,e(t)}),(function(e){t(e)}))}catch(e){t(e)}}));return a=e,e.catch((function(e){throw a=void 0,e}))})().then((function(){n()}))}),[]),r)return t(r);else return null}),{get:function(e,t){var n,a;if(t in e)return e[t];else return null!==(n=l[t])&&void 0!==n?n:l[t]=null!==(a=null==r?void 0:r[t])&&void 0!==a?a:function(n){return o().createElement(e,null,(function(e){var r=e[t];return o().createElement(r,s({},n))}))}}});t.Z=c;var d=c},47299:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r,a=n(81171),i=n(60033),o=n.n(i),s=n(81242),l=n(39939),c=n(28266),d=n.n(c),u=n(21211),f=n(63745),m=n.n(f),h=n(40520),p="_2RmxAnLvfdCONYhg4uASIf",g="JZUMXmQX649DIKHpQSe7P",v="_3xVk8IMvuYe6etg3ZNbk0W",_="_3FrMJYgxbHv8h3cUyxUEgS",b="_3OINeirREm-bk3ahtRWEx-",E="_2PA5M7Vw6eLWI_Xh1G00HN",y="_2iFfScYRkHGPXQXvhEXbxg",T="pkNVAYT5C1iX5E_P-x9h",A="NJc1CT41GjaL5VUtO8oa3",S="qi2vTYbjfjF14skBLdynk",O="_3pugQ5TZxOSiRThKhkpekw",C=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=h.j.Radio,L=h.j.Footnote,k=h.j.Paragraph,I=h.j.Button,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={checked:t.props.currentLang,submitSeen:!1},t.saveBtnRef=m().createRef(),t.handleSaveBtnClick=function(){var e=t.props.currentLang,n=t.state.checked;if(e!==n)l.default.user.save("lang",n).then((function(){o().send("settings_save_lang_".concat(n)),window.location.reload()})).catch((function(){o().send("settings_save_lang_error")}))},t}return C(t,e),t.prototype.componentDidMount=function(){var e,t;null===(t=null===(e=this.props.saveButtonRef)||void 0===e?void 0:e.current)||void 0===t||t.addEventListener("click",this.handleSaveBtnClick)},t.prototype.onRadioBtnClick=function(e){var t,n=this.props.onChangeLang,r=this.state,a=r.checked,i=r.submitSeen;if(e.key!==a){if(n)n(e.key);if(o().send("settings_change_lang_".concat(e.key)),!(i||(s=this.saveBtnRef.current,(null==s?void 0:s.getBoundingClientRect().top)<window.innerHeight)))null===(t=this.saveBtnRef.current)||void 0===t||t.scrollIntoView();var s;this.setState({checked:e.key,submitSeen:!0})}},t.prototype.getRadioButtons=function(e){var t=this,n=this.props,r=n.currentLang,i=n.ponymode,o=n.modalMode,s=this.state.checked;return e.map((function(e){var n,l=e.index,c=e.key,f=e.label,h=e.src;if(o||u.NEW_RADIO_BUTTON_CHANGE_LOCALES)return m().createElement(w,{key:l,name:"languageRadioBtn",defaultChecked:r===c,checked:s===c,className:d()(b,(n={},n[v]=o,n)),"data-test-id":"checkbox-".concat(c),onClick:t.onRadioBtnClick.bind(t,e)},m().createElement("div",{className:g},m().createElement("div",{className:A,style:{backgroundImage:'url("'.concat(h,'")')}}),i?m().createElement(L,null,f):m().createElement(k,null,f)));else return m().createElement("div",{key:l,className:E,onClick:t.onRadioBtnClick.bind(t,e)},m().createElement("div",{className:S},m().createElement(a.Radio,{name:"languageRadioBtn",defaultChecked:r===c,checked:s===c,testId:"checkbox-".concat(c)})),m().createElement("div",{className:A,style:{backgroundImage:'url("'.concat(h,'")')}}),m().createElement(a.Text,{mode:i?"small":"base"},f))}))},t.prototype.render=function(){var e,t,n=this.props,r=n.popupMode,i=n.ponymode;if(n.modalMode)return this.getRadioButtons(s.M);else return m().createElement("div",{className:d()(p,(e={},e[O]=i,e))},!r&&m().createElement(m().Fragment,null,m().createElement(a.Text,{mode:i?"small":"base"},i18n("Изменить язык")),m().createElement(a.Margin,{mobileX:i?3:5,desktopX:i?3:5})),m().createElement("div",{className:y},m().createElement("div",{className:d()(T,(t={},t[_]=u.NEW_RADIO_BUTTON_CHANGE_LOCALES,t))},this.getRadioButtons(s.M.slice(0,5))),m().createElement("div",{className:T},this.getRadioButtons(s.M.slice(5)))),!r&&m().createElement(m().Fragment,null,m().createElement(a.Margin,{mobile:20,desktop:20}),m().createElement("div",{ref:this.saveBtnRef},m().createElement(I,{"data-test-id":"submit",size:i?"s":"l",onClick:this.handleSaveBtnClick},i18n("Выбрать язык")))))},t}(m().PureComponent)},57092:function(e,t,n){"use strict";n.d(t,{c:function(){return L},Z:function(){return k}});var r=n(21528),a=n(81171),i=n(60033),o=n.n(i),s=n(28266),l=n.n(s),c=n(21211),d=n(79929),u=n(63745),f=n(40520),m=n(72727),h=n(88695),p=n(63062),g="_2uqdjvSFv7cHce9SPj0I7-",v="_3WuqRCVixmmFEnJF0wGK5p",_="_13gG6nrNmY4lHT3E-EILBL",b="_33XbOvfjRmoSVb6Qt-DIuy",E="_2G6WBaqPBUMFji5qlaCPsX",y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},T=f.j.ModalPage,A=f.j.Button,S=function(){},O=function(e){var t=e.text,n=e.qa;p.default.add({text:t,qa:n,duration:c.SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION,inline:!1})},C=function(e){var t=e.text,n=e.qa;p.default.error({text:t,qa:n,duration:c.SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION,inline:!1})},w=function(e){var t=e.onPopupShow,n=void 0===t?S:t,a=e.compact,i=void 0===a?!1:a,s=e.isModalView,l=void 0===s?!1:s,c=u.useRef();return u.useEffect((function(){window.require(["cleanmaster"],(function(e){var t=e.default(c.current,{features:r.default,septima:!1,app:!1,touch:!1,octavius:!0,headerMode:"hidden",isDockSettings:!0,compact:i,isModalView:l,onModalVisibilityChange:function(e){n(e)}}),a={"@stat/radar":function(e){var t=e.name,n=e.params,r=e.dwh,a=void 0===r?{}:r;o().send(t,{i:n,v:1,dwh:y({},a)})},"@search/open":function(e){var t=e.from,n=e.onlyNewsletters;(0,m.default)((0,h.Z)(r.default.getAsString("searchUrl","/search"),{q_from:t,q_newsletters_exclude_transactions:n}))},"@notify/success":O,"@notify/info":O,"@notify/error":C};Object.keys(a).forEach((function(e){t.on(e,a[e])})),t.create()}))}),[]),u.createElement("div",{ref:c,className:g})},L=function(e){var t;return u.createElement(T,y({},e,{hideCloseButton:!0}),u.createElement("div",{"data-test-id":"cleanmaster-modal",className:l()(v,(t={},t[b]=e.mobile,t))},u.createElement("div",{className:E,"data-test-id":"cross"},u.createElement(a.Tooltip,{placement:"bottomRight",overlay:u.createElement(a.Text,{mode:"small"},i18n("Закрыть")),onlyDesktop:!0},u.createElement(A,{"data-test-id":"cross",mode:"tertiary",size:"l",before:u.createElement("div",{style:{display:"flex"}},u.createElement(a.Icon,{icon:d.ACTIONS_CLOSE_BIG})),onClick:e.onClose}))),u.createElement(a.Text,{mode:"h3",text:i18n("Отписаться от рассылок")}),u.createElement("div",{className:_},u.createElement(w,{isModalView:!0}))))},k=w},32707:function(e,t,n){"use strict";n.d(t,{U2:function(){return u},_i:function(){return f},yk:function(){return m},h_:function(){return h},mx:function(){return p},Co:function(){return g}});var r,a,i,o,s,l=n(79929),c=n(5378),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},u=((r={})[c.qg.ATTACH_ARCHIVE]=l.ATTACH_ARCHIVE,r[c.qg.ATTACH_ANDROID]=l.ATTACH_ANDROID,r[c.qg.ATTACH_AUDIO]=l.ATTACH_AUDIO,r[c.qg.ATTACH_CALENDAR]=l.ATTACH_CALENDAR,r[c.qg.ATTACH_CHART]=l.ATTACH_CHART,r[c.qg.ATTACH_DOC]=l.ATTACH_DOC,r[c.qg.ATTACH_EBOOK]=l.ATTACH_EBOOK,r[c.qg.ATTACH_EXE]=l.ATTACH_EXE,r[c.qg.ATTACH_VIRUS]=l.ATTACH_VIRUS,r[c.qg.ATTACH_HTML]=l.ATTACH_HTML,r[c.qg.ATTACH_JSON]=l.ATTACH_JSON,r[c.qg.ATTACH_MAIL]=l.ATTACH_MAIL,r[c.qg.ATTACH_MARKDOWN]=l.ATTACH_MARKDOWN,r[c.qg.ATTACH_PICTURE]=l.ATTACH_PICTURE,r[c.qg.ATTACH_PLAYLIST]=l.ATTACH_PLAYLIST,r[c.qg.ATTACH_PRESENTATION]=l.ATTACH_PRESENTATION,r[c.qg.ATTACH_PDF]=l.ATTACH_PDF,r[c.qg.ATTACH_PSD]=l.ATTACH_PSD,r[c.qg.ATTACH_SKETCH]=l.ATTACH_SKETCH,r[c.qg.ATTACH_SOURCE]=l.ATTACH_SOURCE,r[c.qg.ATTACH_SPREADSHEET]=l.ATTACH_SPREADSHEET,r[c.qg.ATTACH_TEXT]=l.ATTACH_TEXT,r[c.qg.ATTACH_UNKNOWN]=l.ATTACH_UNKNOWN,r[c.qg.ATTACH_VCARD]=l.ATTACH_VCARD,r[c.qg.ATTACH_VIDEO]=l.ATTACH_VIDEO,r[c.qg.ATTACH_WEBFEED]=l.ATTACH_WEBFEED,r),f=((a={})[c.OX.EMPTY_FOLDER]=l.EMPTY_FOLDER_PLACEHOLDER,a[c.OX.TRASH]=l.TRASH_PLACEHOLDER,a[c.OX.SPAM]=l.SPAM_PLACEHOLDER,a[c.OX.LOCK]=l.LOCK_PLACEHOLDER,a[c.OX.NO_SEARCH]=l.NO_SEARCH_PLACEHOLDER,a[c.OX.NO_TEMPLATES]=l.NO_TEMPLATES_PLACEHOLDER,a[c.OX.NO_SELECT]=l.NO_SELECT_PLACEHOLDER,a[c.OX.NO_LETTER]=l.NO_LETTER_PLACEHOLDER,a),m=((i={})[c.tW.UNREAD]=l.STATUS_UNREAD,i[c.tW.FLAGGED]=l.ACTIONS_FAVORITE_ON,i[c.tW.ATTACH]=l.STATUS_ATTACH,i[c.tW.DOCUMENT_SCANS]=l.CATEGORIES_SCAN,i[c.tW.ORDER]=l.NAVIGATION_CART,i[c.tW.FINANCE]=l.CATEGORIES_CURRENCY_ROUBLE,i[c.tW.REGISTRATION]=l.CATEGORIES_ACCESS,i[c.tW.TRAVEL]=l.CATEGORIES_FLIGHT,i[c.tW.EVENT]=l.CATEGORIES_TICKET,i[c.tW.FEES]=l.CATEGORIES_GOVERNMENT,i[c.tW.OFFICIAL_LETTERS]=l.CATEGORIES_GOVERNMENT,i[c.tW.SCHOOL_LETTERS]=l.CATEGORIES_SCHOOL,i[c.tW.GAMES_LETTERS]=l.CATEGORIES_GAMES,i[c.tW.TAGGED_DOCUMENTS]=l.COLOR_TAG,i[c.tW.TAGGED_IMPORTANT]=l.COLOR_TAG,i[c.tW.TAGGED_NEEDS_REPLY]=l.COLOR_TAG,i[c.tW.TAGGED_PERSONAL]=l.COLOR_TAG,i[c.tW.TAGGED_URGENT]=l.COLOR_TAG,i[c.tW.CALENDAR]=l.NAVIGATION_CALENDAR_MONTH,i[c.tW.STATUS_TAG]=l.STATUS_TAG,i[c.tW.COLOR_TAG_SUGGEST_LIGHT]=l.COLOR_TAG_SUGGEST_LIGHT,i[c.tW.COLOR_TAG_SUGGEST_DARK]=l.COLOR_TAG_SUGGEST_DARK,i[c.tW.FOLDER]=l.NAVIGATION_FOLDER,i[c.tW.FOLDER_INBOX]=l.CATEGORIES_MAIL,i[c.tW.FOLDER_USER]=l.NAVIGATION_FOLDER,i[c.tW.FOLDER_TEMPLATES]=l.NAVIGATION_FOLDER,i[c.tW.FOLDER_SECRET_CLOSED]=l.STATUS_LOCK_OFF,i[c.tW.FOLDER_ARCHIVE]=l.NAVIGATION_ARCHIVE,i[c.tW.FOLDER_SENT]=l.ACTIONS_REPLY,i[c.tW.FOLDER_DRAFTS]=l.CATEGORIES_DRAFTS,i[c.tW.FOLDER_SPAM]=l.ACTIONS_DISLIKE,i[c.tW.FOLDER_TRASH]=l.ACTIONS_DELETE,i[c.tW.COMPOSE]=l.ACTIONS_COMPOSE,i[c.tW.FOLDER_SECRET_OPEN]=l.STATUS_LOCK_ON,i[c.tW.FOLDER_SOCIAL]=l.NAVIGATION_USERS,i[c.tW.FOLDER_NEWSLETTERS]=l.CATEGORIES_MAILINGS,i[c.tW.FOLDER_OUTBOX]=l.STATUS_TIME,i[c.tW.FOLDER_TOMYSELF]=l.CATEGORIES_SELF_MAIL,i[c.tW.FOLDER_NEWS]=l.CATEGORIES_SUBSCRIPTIONS,i[c.tW.FOLDER_OFFICIAL]=l.CATEGORIES_GOVERNMENT,i[c.tW.FOLDER_RECEIPTS]=l.CATEGORIES_RECEIPTS,i[c.tW.FOLDER_SCHOOL]=l.CATEGORIES_SCHOOL,i[c.tW.FOLDER_GAMES]=l.CATEGORIES_GAMES,i[c.tW.FOLDER_PARENTAL_CONTROL]=l.NAVIGATION_TIP,i[c.tW.FOLDER_CHILD_TRASH]=l.ACTIONS_DELETE,i[c.tW.KASPERSKY_LOGO_RUS]=l.KASPERSKY_LOGO_RUS,i[c.tW.KASPERSKY_LOGO_ENG]=l.KASPERSKY_LOGO_ENG,i[c.tW.KASPERSKY_LOGO_ALTER_RUS]=l.KASPERSKY_LOGO_ALTER_RUS,i[c.tW.KASPERSKY_LOGO_ALTER_ENG]=l.KASPERSKY_LOGO_ALTER_ENG,i[c.tW.NAVIGATION_MORE]=l.NAVIGATION_MORE,i[c.tW.NAVIGATION_MORE_VERTICAL]=l.NAVIGATION_MORE_VERTICAL,i[c.tW.NAVIGATION_ARROW_LIST_PREVIOUS]=l.NAVIGATION_ARROW_LIST_PREVIOUS,i[c.tW.ACTIONS_CLOSE_BIG]=l.ACTIONS_CLOSE_BIG,i[c.tW.STATUS_DONE]=l.STATUS_DONE,i),h=d(d({},m),((o={})[c.tW.FLAGGED]=l.ACTIONS_FAVORITE_S,o[c.tW.ATTACH]=l.STATUS_ATTACH_S,o[c.tW.DOCUMENT_SCANS]=l.CATEGORIES_SCAN_S,o[c.tW.ORDER]=l.NAVIGATION_CART_S,o[c.tW.REGISTRATION]=l.CATEGORIES_ACCESS_S,o[c.tW.TRAVEL]=l.CATEGORIES_FLIGHT_S,o[c.tW.EVENT]=l.CATEGORIES_TICKET_S,o[c.tW.FEES]=l.CATEGORIES_GOVERNMENT_S,o[c.tW.OFFICIAL_LETTERS]=l.CATEGORIES_GOVERNMENT_S,o[c.tW.SCHOOL_LETTERS]=l.CATEGORIES_SCHOOL_S,o[c.tW.GAMES_LETTERS]=l.CATEGORIES_GAMES_S,o[c.tW.FOLDER]=l.NAVIGATION_FOLDER_S,o[c.tW.FOLDER_INBOX]=l.CATEGORIES_MAIL_S,o[c.tW.FOLDER_USER]=l.NAVIGATION_FOLDER_S,o[c.tW.FOLDER_TEMPLATES]=l.NAVIGATION_FOLDER_S,o[c.tW.FOLDER_SECRET_CLOSED]=l.STATUS_LOCK_OFF,o[c.tW.FOLDER_ARCHIVE]=l.NAVIGATION_ARCHIVE_S,o[c.tW.FOLDER_SENT]=l.ACTIONS_REPLY_S,o[c.tW.FOLDER_DRAFTS]=l.CATEGORIES_DRAFTS_S,o[c.tW.FOLDER_SPAM]=l.ACTIONS_DISLIKE_S,o[c.tW.FOLDER_TRASH]=l.ACTIONS_DELETE_S,o[c.tW.FOLDER_SECRET_OPEN]=l.STATUS_LOCK_ON,o[c.tW.FOLDER_SOCIAL]=l.NAVIGATION_USERS_S,o[c.tW.FOLDER_NEWSLETTERS]=l.CATEGORIES_MAILINGS_S,o[c.tW.FOLDER_NEWS]=l.CATEGORIES_SUBSCRIPTIONS_S,o[c.tW.FOLDER_OFFICIAL]=l.CATEGORIES_GOVERNMENT_S,o[c.tW.FOLDER_RECEIPTS]=l.CATEGORIES_RECEIPTS,o[c.tW.FOLDER_SCHOOL]=l.CATEGORIES_SCHOOL_S,o[c.tW.FOLDER_GAMES]=l.CATEGORIES_GAMES_S,o[c.tW.FOLDER_OUTBOX]=l.STATUS_TIME_S,o[c.tW.FOLDER_PARENTAL_CONTROL]=l.NAVIGATION_TIP_S,o[c.tW.FOLDER_CHILD_TRASH]=l.ACTIONS_DELETE_S,o)),p=((s={})[c.BD.THUMB_ANDROID_PACKAGE]=l.THUMB_ANDROID_PACKAGE,s[c.BD.THUMB_ARCHIVE]=l.THUMB_ARCHIVE,s[c.BD.THUMB_AUDIO]=l.THUMB_AUDIO,s[c.BD.THUMB_CALEDAR]=l.THUMB_CALEDAR,s[c.BD.THUMB_CARD]=l.THUMB_CARD,s[c.BD.THUMB_CHART]=l.THUMB_CHART,s[c.BD.THUMB_DOCUMENT]=l.THUMB_DOCUMENT,s[c.BD.THUMB_EBOOK]=l.THUMB_EBOOK,s[c.BD.THUMB_EMAIL]=l.THUMB_EMAIL,s[c.BD.THUMB_EXCEL_ONLINE]=l.THUMB_EXCEL_ONLINE,s[c.BD.THUMB_EXE]=l.THUMB_EXE,s[c.BD.THUMB_FOLDER_CAMERA]=l.THUMB_FOLDER_CAMERA,s[c.BD.THUMB_FOLDER_SHARED]=l.THUMB_FOLDER_SHARED,s[c.BD.THUMB_FOLDER_VIRUS]=l.THUMB_FOLDER_VIRUS,s[c.BD.THUMB_FOLDER]=l.THUMB_FOLDER,s[c.BD.THUMB_HTML]=l.THUMB_HTML,s[c.BD.THUMB_JSON]=l.THUMB_JSON,s[c.BD.THUMB_MARKDOWN]=l.THUMB_MARKDOWN,s[c.BD.THUMB_PDF]=l.THUMB_PDF,s[c.BD.THUMB_PHOTOSHOP]=l.THUMB_PHOTOSHOP,s[c.BD.THUMB_PICTURE]=l.THUMB_PICTURE,s[c.BD.THUMB_PLAIN_TEXT]=l.THUMB_PLAIN_TEXT,s[c.BD.THUMB_PLAYLIST]=l.THUMB_PLAYLIST,s[c.BD.THUMB_POWERPOINT_ONLINE]=l.THUMB_POWERPOINT_ONLINE,s[c.BD.THUMB_PRESENTATION]=l.THUMB_PRESENTATION,s[c.BD.THUMB_SOURCE]=l.THUMB_SOURCE,s[c.BD.THUMB_SPREADSHEET]=l.THUMB_SPREADSHEET,s[c.BD.THUMB_UNKNOWN]=l.THUMB_UNKNOWN,s[c.BD.THUMB_VIDEO]=l.THUMB_VIDEO,s[c.BD.THUMB_WEB_FEED]=l.THUMB_WEB_FEED,s[c.BD.THUMB_VIRUS]=l.THUMB_VIRUS,s[c.BD.THUMB_WORD_ONLINE]=l.THUMB_WORD_ONLINE,s[c.BD.ACTIONS_TO_CLOUD]=l.ACTIONS_CLOUD_UPLOAD,s[c.BD.ACTIONS_DOWNLOAD_ALT]=l.ACTIONS_DOWNLOAD_ALT,s[c.BD.LINK]=l.STATUS_LINK,s[c.BD.WARNING]=l.STATUS_WARNING_ROUND,s);function g(e){var t="FOLDER_"+e.get("type").toUpperCase(),n=c.tW[t];if("archive"===n&&!e.isArchive())n=c.tW.FOLDER_USER;if(e.isArchive())n=c.tW.FOLDER_ARCHIVE;return n||c.tW.FOLDER}},5378:function(e,t,n){"use strict";n.d(t,{tW:function(){return i},qg:function(){return o},BD:function(){return s},OX:function(){return l}});var r=n(73928),a=n(32704),i={TODAY:a.mc.TODAY,YESTERDAY:a.mc.YESTERDAY,WEEK:a.mc.WEEK,MONTH:a.mc.MONTH,MONTHS:a.mc.MONTHS,YEARS:a.mc.YEARS,UNREAD:r.OperandFilterTypes.UNREAD,FLAGGED:r.OperandFilterTypes.FLAGGED,ATTACH:r.OperandFilterTypes.ATTACH,FROM:r.OperandQueryTypes.FROM,TO:r.OperandQueryTypes.TO,SUBJECT:r.OperandQueryTypes.SUBJECT,QUERY:r.OperandQueryTypes.QUERY,STATUS_DONE:"STATUS_DONE",DOCUMENT_SCANS:r.CategoryTypes.DOCUMENT_SCANS,ORDER:r.CategoryTypes.ORDER,FINANCE:r.CategoryTypes.FINANCE,REGISTRATION:r.CategoryTypes.REGISTRATION,TRAVEL:r.CategoryTypes.TRAVEL,EVENT:r.CategoryTypes.EVENT,FEES:r.CategoryTypes.FEES,OFFICIAL_LETTERS:r.CategoryTypes.OFFICIAL,SCHOOL_LETTERS:r.CategoryTypes.SCHOOL,GAMES_LETTERS:r.CategoryTypes.GAMES,TAGGED_PERSONAL:r.ColorTagTypes.TAGGED_PERSONAL,TAGGED_DOCUMENTS:r.ColorTagTypes.TAGGED_DOCUMENTS,TAGGED_IMPORTANT:r.ColorTagTypes.TAGGED_IMPORTANT,TAGGED_URGENT:r.ColorTagTypes.TAGGED_URGENT,TAGGED_NEEDS_REPLY:r.ColorTagTypes.TAGGED_NEEDS_REPLY,STATUS_TAG:"STATUS_TAG",COLOR_TAG_SUGGEST_LIGHT:"COLOR_TAG_SUGGEST_LIGHT",COLOR_TAG_SUGGEST_DARK:"COLOR_TAG_SUGGEST_DARK",CALENDAR:"CALENDAR",FOLDER:"FOLDER",FOLDER_ARCHIVE:"FOLDER_ARCHIVE",FOLDER_SENT:"FOLDER_SENT",FOLDER_DRAFTS:"FOLDER_DRAFTS",FOLDER_TEMPLATES:"FOLDER_TEMPLATES",FOLDER_SPAM:"FOLDER_SPAM",FOLDER_TRASH:"FOLDER_TRASH",FOLDER_USER:"FOLDER_USER",FOLDER_INBOX:"FOLDER_INBOX",FOLDER_SECRET_CLOSED:"FOLDER_SECRET_CLOSED",FOLDER_SECRET_OPEN:"FOLDER_SECRET_OPEN",FOLDER_SOCIAL:"FOLDER_SOCIAL",FOLDER_NEWSLETTERS:"FOLDER_NEWSLETTERS",FOLDER_TOMYSELF:"FOLDER_TOMYSELF",FOLDER_NEWS:"FOLDER_NEWS",FOLDER_OFFICIAL:"FOLDER_OFFICIAL",FOLDER_RECEIPTS:"FOLDER_RECEIPTS",FOLDER_SCHOOL:"FOLDER_SCHOOL",FOLDER_GAMES:"FOLDER_GAMES",FOLDER_OUTBOX:"FOLDER_OUTBOX",COMPOSE:"COMPOSE",FOLDER_PARENTAL_CONTROL:"FOLDER_PARENTAL_CONTROL",FOLDER_CHILD_TRASH:"FOLDER_CHILD_TRASH",SEARCH_IN:"search",KASPERSKY_LOGO_RUS:"KASPERSKY_LOGO_RUS",KASPERSKY_LOGO_ENG:"KASPERSKY_LOGO_ENG",KASPERSKY_LOGO_ALTER_RUS:"KASPERSKY_LOGO_ALTER_RUS",KASPERSKY_LOGO_ALTER_ENG:"KASPERSKY_LOGO_ALTER_ENG",NAVIGATION_MORE:"NAVIGATION_MORE",NAVIGATION_MORE_VERTICAL:"NAVIGATION_MORE_VERTICAL",ACTIONS_CLOSE_BIG:"ACTIONS_CLOSE_BIG",NAVIGATION_ARROW_LIST_PREVIOUS:"NAVIGATION_ARROW_LIST_PREVIOUS"},o={ATTACH_ARCHIVE:"ATTACH_ARCHIVE",ATTACH_ANDROID:"ATTACH_ANDROID",ATTACH_AUDIO:"ATTACH_AUDIO",ATTACH_CALENDAR:"ATTACH_CALENDAR",ATTACH_CHART:"ATTACH_CHART",ATTACH_DOC:"ATTACH_DOC",ATTACH_EBOOK:"ATTACH_EBOOK",ATTACH_EXE:"ATTACH_EXE",ATTACH_VIRUS:"ATTACH_VIRUS",ATTACH_HTML:"ATTACH_HTML",ATTACH_JSON:"ATTACH_JSON",ATTACH_MAIL:"ATTACH_MAIL",ATTACH_MARKDOWN:"ATTACH_MARKDOWN",ATTACH_PICTURE:"ATTACH_PICTURE",ATTACH_PLAYLIST:"ATTACH_PLAYLIST",ATTACH_PRESENTATION:"ATTACH_PRESENTATION",ATTACH_PDF:"ATTACH_PDF",ATTACH_PSD:"ATTACH_PSD",ATTACH_SKETCH:"ATTACH_SKETCH",ATTACH_SOURCE:"ATTACH_SOURCE",ATTACH_SPREADSHEET:"ATTACH_SPREADSHEET",ATTACH_TEXT:"ATTACH_TEXT",ATTACH_UNKNOWN:"ATTACH_UNKNOWN",ATTACH_VCARD:"ATTACH_VCARD",ATTACH_VIDEO:"ATTACH_VIDEO",ATTACH_WEBFEED:"ATTACH_WEBFEED"},s={THUMB_ANDROID_PACKAGE:"THUMB_ANDROID_PACKAGE",THUMB_ARCHIVE:"THUMB_ARCHIVE",THUMB_AUDIO:"THUMB_AUDIO",THUMB_CALEDAR:"THUMB_CALEDAR",THUMB_CARD:"THUMB_CARD",THUMB_CHART:"THUMB_CHART",THUMB_DOCUMENT:"THUMB_DOCUMENT",THUMB_EBOOK:"THUMB_EBOOK",THUMB_EMAIL:"THUMB_EMAIL",THUMB_EXCEL_ONLINE:"THUMB_EXCEL_ONLINE",THUMB_EXE:"THUMB_EXE",THUMB_FOLDER_CAMERA:"THUMB_FOLDER_CAMERA",THUMB_FOLDER_SHARED:"THUMB_FOLDER_SHARED",THUMB_FOLDER_VIRUS:"THUMB_FOLDER_VIRUS",THUMB_FOLDER:"THUMB_FOLDER",THUMB_HTML:"THUMB_HTML",THUMB_JSON:"THUMB_JSON",THUMB_MARKDOWN:"THUMB_MARKDOWN",THUMB_PDF:"THUMB_PDF",THUMB_PHOTOSHOP:"THUMB_PHOTOSHOP",THUMB_PICTURE:"THUMB_PICTURE",THUMB_PLAIN_TEXT:"THUMB_PLAIN_TEXT",THUMB_PLAYLIST:"THUMB_PLAYLIST",THUMB_POWERPOINT_ONLINE:"THUMB_POWERPOINT_ONLINE",THUMB_PRESENTATION:"THUMB_PRESENTATION",THUMB_SOURCE:"THUMB_SOURCE",THUMB_SPREADSHEET:"THUMB_SPREADSHEET",THUMB_UNKNOWN:"THUMB_UNKNOWN",THUMB_VIDEO:"THUMB_VIDEO",THUMB_WEB_FEED:"THUMB_WEB_FEED",THUMB_VIRUS:"THUMB_VIRUS",THUMB_WORD_ONLINE:"THUMB_WORD_ONLINE",ACTIONS_TO_CLOUD:"ACTIONS_TO_CLOUD",ACTIONS_DOWNLOAD_ALT:"ACTIONS_DOWNLOAD_ALT",LINK:"LINK",WARNING:"WARNING"},l={EMPTY_FOLDER:"EMPTY_FOLDER",TRASH:"TRASH",SPAM:"SPAM",LOCK:"LOCK",NO_SEARCH:"NO_SEARCH",NO_TEMPLATES:"NO_TEMPLATES",NO_SELECT:"NO_SELECT",NO_LETTER:"NO_LETTER"}},9783:function(e,t,n){"use strict";n.d(t,{Ek:function(){return s},sK:function(){return l},V9:function(){return c},zR:function(){return d},F4:function(){return u}});var r,a=n(73928),i=n(5378),o=[i18n("январь"),i18n("февраль"),i18n("март"),i18n("апрель"),i18n("май"),i18n("июнь"),i18n("июль"),i18n("август"),i18n("сентябрь"),i18n("октябрь"),i18n("ноябрь"),i18n("декабрь")],s=((r={})[i.tW.TODAY]=i18n("cегодня"),r[i.tW.YESTERDAY]=i18n("вчера"),r[i.tW.WEEK]=i18n("за эту неделю"),r[i.tW.MONTH]=i18n("за этот месяц"),r[i.tW.UNREAD]=i18n("Непрочитанные"),r[i.tW.FLAGGED]=i18n("С флагом"),r[i.tW.ATTACH]=i18n("С вложениями"),r[i.tW.FROM]=i18n("От"),r[i.tW.TO]=i18n("Кому"),r[i.tW.SUBJECT]=i18n("Тема"),r[i.tW.QUERY]=i18n("Везде"),r[i.tW.ORDER]=i18n("Заказы"),r[i.tW.FINANCE]=i18n("Финансы"),r[i.tW.REGISTRATION]=i18n("Учётные записи"),r[i.tW.TRAVEL]=i18n("Путешествия"),r[i.tW.EVENT]=i18n("Билеты"),r[i.tW.FEES]=i18n("Штрафы и налоги"),r[i.tW.OFFICIAL_LETTERS]=i18n("Госписьма"),r[i.tW.DOCUMENT_SCANS]=i18n("Сканы документов"),r[i.tW.SEARCH_IN]=i18n("искать"),r[i.tW.TAGGED_PERSONAL]=i18n("Личное"),r[i.tW.TAGGED_DOCUMENTS]=i18n("Документы"),r[i.tW.TAGGED_IMPORTANT]=i18n("Важно"),r[i.tW.TAGGED_URGENT]=i18n("Срочно"),r[i.tW.TAGGED_NEEDS_REPLY]=i18n("Ответить"),r);function l(e){var t=e.type,n="";if(s[t])n=s[t];var r=new Date(1e3*e.from);if(t===i.tW.MONTHS)n=o[r.getMonth()]||"";if(t===i.tW.YEARS)n=i18n("за {year}",{year:r.getFullYear()});return n=n[0].toUpperCase()+n.slice(1)}function c(e){return i18n("и ещё {n}",{n:e})}function d(e){return i18n.plural(e,[i18n("{n} дней",{n:e}),i18n("{n} день",{n:e}),i18n("{n} дня",{n:e})])}function u(e){switch(e){case a.OperandSuggestAddTypes.FROM:return i18n("по отправителю");case a.OperandSuggestAddTypes.SEARCH_INTERNET:return i18n("в интернете");default:return""}}},53595:function(e,t,n){"use strict";n.d(t,{Z:function(){return Qt}});var r=n(60033),a=n.n(r),i=n(52745),o=n(52532),s=n(70235),l=n(21211),c=n(75273),d=!1;var u=n(22469),f=n(71603),m=n(547),h=n(43845),p=n(14077),g=n(54901),v=n(53381),_=n(87623),b=n(84118),E=n(95218),y=n(36332),T=n(30618),A=n(73173),S=n(9125),O=n(10849),C=n(8109),w=n(7202),L=n(3333),k=n(39057),I=n(66225),R=n(93286),D=n(59626),M=n(41861),P=n(96384),N=n(77917),x=n(45114),F=n(56706),U=n(34734),H=n(11726),B=n(37587),Z=n(28266),G=n.n(Z),q=n(18440),j=n.n(q),W=n(83183),V=n(96596),z=n.n(V),Y=n(4872),K=n.n(Y),X=n(39783),Q=n.n(X),J=n(92042),$=n.n(J),ee=n(63745),te=n.n(ee),ne=n(59333),re=n.n(ne),ae=n(86502),ie=n(4066),oe=n(77676),se=n(14596),le=n(50949),ce=n(26578),de=n(21963),ue=n(95579),fe=n.n(ue),me=n(26694),he=j().Block.extend((0,me.OA)({name:"list-letter-bait",template:fe(),immutable:!0})),pe=n(18108),ge=n.n(pe),ve=j().Block.extend({name:"list-letter-height-compensation",template:ge(),immutable:!0,defaults:{height:0}}),_e=n(57986),be=n(56313),Ee=n.n(be),ye=n(27642),Te=ye.Z.randomSeed(),Ae=j().Block.extend({name:"list-letter-skeleton",template:Ee(),immutable:!0,defaults:{index:0,compact:!1,"pony-mode":!1},getRandomSize(e){var t=this.get("index"),n=[...Te];n[0]%=e*t,n[1]%=e*t,n[2]%=e*t,n[3]%=e*t;var r=new ye.Z(n);return Math.floor(9007199*r.random())%3+1}}),Se=n(54415),Oe=n(9842),Ce=n(35056),we=n(59921),Le=n(82609),ke=n(58049),Ie=n(13209),Re=n(42339),De=n(78381),Me=n(24880),Pe=n(1267),Ne=n(1229),xe=n(53785),Fe=n(6703),Ue=n(44438),He=n(59710),Be=n(51422),Ze=n(53263),Ge=n(59574),qe=n(59787),je=n(95159),We=n(19274),Ve=n(88488),ze=n(62733),Ye=n(48597),Ke=n(427),Xe=n(42350),Qe=n(84893),Je=n(93441),$e=n(92323),et=n(30240),tt=n(65120),nt=n(58203),rt=n(97082),at=n(41535),it=n(65390),ot=n(68246),st=n(82021),lt=n(71147),ct=n(73794),dt=n(30178),ut=function(){return(ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},ft=new ct.k("llct"),mt=function(e){var t=e.children,n=e.enabled,r=e.className;return n?te().createElement("div",{className:r},t):te().createElement(te().Fragment,null,t)};function ht(){var e,t,n,r,a=ut(ut({},this.props),this.state),i=a.model,o=a.indent,s=a["pony-mode"],c=a.messagesAttaches,d=this.getSubject(),u=this.getGoToActionDisplayMode(),f="none"===u?this.getPaymentDieDisplayMode():"none",m=this.getUnsubscribeSender(),h="none"===u&&this.shouldShowUniversalPaymentDie(),g=this.getAttachesModes(!0,c),v=this.getAttaches(g,c),_=(0,p.sD)(i,a.search),b=!!(null===(r=null==i?void 0:i.isSchedule)||void 0===r?void 0:r.call(i)),E=i.getFolder(),y=b?(0,Ue.ye)(i.get("send_date")):E.get("name"),T=i.is("flags.attach"),A=i.is("flags.flagged"),S=l.ENABLE_TAGS&&!this.getCounter(),O=l.ENABLE_TAGS&&i.is("flags.tags")&&!!i.get("flags.tags").length,C=(S||O)&&!a.showfolder,w=m&&!h&&"none"===f,L=a["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===u;a["show-attaches"]&&this.getAttachesPreviewCondition();var k=!("none"!==u||O&&!a.search||h||(a.search||w)&&s),I="full"===f?a["payment-die-with-indent"]:"",R=s||_||O||l.ENABLE_TAGS,D="full"!==u&&(s||!h&&!w&&_),M=this.getCategory(),P=this.hasBadge()&&te().createElement("div",{"data-qa-id":(0,dt.qa)("letter:badge"),className:ft.elem("badge")},te().createElement(De.Z,{counter:this.getCounter(),compact:!0,unread:i.is("flags.unread"),component:je.Z})),N=this.getSnippetValue();return te().createElement("a",{style:a.style,"data-qa-id":(0,dt.qa)(this.rootQaId()),"data-qa-safe":(0,dt.qa)(String(a.isReliable)),"data-qa-official":(0,dt.qa)(String(a.isOfficial)),"data-qa-index":(0,dt.qa)(i.meta("_ui-index")),onClick:(0,Be.CH)(this,"click"),onDragStart:(0,Be.CH)(this,{prevent:!0,name:"unused"}),onContextMenu:(0,Be.CH)(this,"contextmenu"),className:ft.root({"enable-user-select":a["enable-user-select"],"pony-mode":s,"has-indent":o,active:a.selected||a.active,selected:a.selected,open:a.active,first:a.first,last:a.last,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected,new:!0,"new-selection":!0,reliable:a.isImportantReliable,official:a.isOfficialGreen,"small-snippet":D},{addClass:["js-letter-list-item"]}),href:a.href,tabIndex:-1,"data-id":i.get("id"),"data-draggable-id":i.get("id"),"data-uidl-id":i.get("last")},te().createElement("div",{className:ft.elem("container",{"pony-mode":s,"small-snippet-container":D})},te().createElement("div",{className:ft.elem("background",{active:a.selected||a.active})}),te().createElement("div",{className:ft.elem("header")},te().createElement("div",{"data-qa-id":(0,dt.qa)("unread"),className:ft.elem("read-status")},te().createElement(st.Z,{state:i.is("flags.unread"),"is-forwarded":i.is("flags.forward"),"is-replied":i.is("flags.reply"),model:i,shift:s,remitEvents:{toggle:{prevent:!0,name:He.m.unread}},remitDetails:{model:i},broadcastEvent:(0,Be.Yv)(this)})),te().createElement("div",{"data-qa-id":(0,dt.qa)("avatar"),className:ft.elem("avatar",{unread:i.is("flags.unread")})},te().createElement(nt.j,{state:a.selected,imgUrl:this.getImageSrc(),darkMode:this.props.darkMode,verified:a.isReliable,official:a.isOfficial,size:s?"common":"compact",remitEvents:{toggle:{prevent:!0,name:He.m.clickAvatar}},broadcastEvent:(0,Be.Yv)(this)}))),te().createElement("div",{className:ft.elem("content",{unread:i.is("flags.unread")})},te().createElement("div",{className:ft.elem("row",{top:!0})},te().createElement("div",{className:ft.elem("correspondent",{new:!0})},te().createElement(rt.A,{"qa-id":(0,dt.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),te().createElement("div",{className:ft.elem("secondary-data")},!!M&&te().createElement("div",{className:ft.elem("panel-item",{category:!0})},te().createElement(De.Z,{flat:!0,short:!0,name:M,size:"m",component:Ge.Z})),b&&te().createElement("div",{className:ft.elem("panel-item")},te().createElement(De.Z,{date:i.get("send_date"),component:Qe.Z,key:"list-letter-schedule-status"})),l.ENABLE_MENTIONS&&(i.is("flags.mention")||i.is("flags.mention_unread"))&&te().createElement("div",{className:ft.elem("panel-item")},te().createElement(ot.Z,{unread:i.is("flags.mention_unread")})),T&&!a["disable-attach"]&&te().createElement("div",{className:ft.elem("panel-item",{"attach-status":!0})},te().createElement(De.Z,{component:qe.Z,compact:!0,key:"list-letter-attach-status"})),te().createElement("div",{title:this.getDateTooltip(b),className:ft.elem("date",{new:!0})},(0,Ue.Zm)(i.get("date"),b)),te().createElement("div",{className:ft.elem("flag",{new:!0})},te().createElement(at.Z,{hideInactive:!0,priority:a.priority,important:this.isImportant(),state:A,remitEvents:{toggle:{prevent:!0,name:He.m.flagged}},remitDetails:{model:i},broadcastEvent:(0,Be.Yv)(this)})))),te().createElement("div",{className:ft.elem("row",{middle:!0,search:a.search,columns:R}),ref:this.contentRowRef},!R&&P,te().createElement(mt,{enabled:R,className:ft.elem("main-content")},!a["disable-subject"]&&te().createElement("div",{"data-qa-id":(0,dt.qa)("subject"),title:this.getSubjectTooltip(),className:ft.elem("subject")},te().createElement(De.Z,{key:d,inlineRoot:!0,subject:d,color:a.search?i.meta("search_subject.color"):null,search:a.search,component:$e.Z})),k&&te().createElement("div",{"data-qa-id":(0,dt.qa)("snippet"),className:ft.elem("snippet",(e={search:a.search,overflow:w},e["hide-on-hover"]=S&&!a.search,e))},te().createElement(De.Z,{key:N,inlineRoot:!0,value:N,color:a.search?i.meta("search_snippet.color"):null,search:a.search,component:Je.Z})),te().createElement("div",{className:ft.elem("content-buttons")},h&&te().createElement(De.Z,{className:ft.elem("content-button-wrapper"),fluid:!0,model:a.model,"layout-type":a["layout-mode"],"pony-mode":s,component:Ye.Z,"pud-fluid":!0}),"none"!==u&&te().createElement("div",{className:ft.elem("content-button-wrapper",{fluid:!0})},te().createElement(it.Z,{model:i,meta:this.goToActionMetadata,layoutMode:"3pane",mode:u})),w&&te().createElement(De.Z,{className:ft.elem("content-button-wrapper"),fluid:!0,"layout-mode":"3pane","pony-mode":s,unsubscribeSender:m,model:i,useMediators:["unsubscribe-actions","themes-manager"],component:et.Z}),C&&te().createElement("div",{className:ft.elem("tags")},te().createElement(lt.Z,{model:i,tags:i.get("flags.tags"),rightSideDropdown:!0,compact:s&&!a.search,readonly:!S})))),R&&P),a.showfolder&&!O&&te().createElement("div",{className:ft.elem("folder",(t={},t["hide-on-hover"]=S&&!O,t))},te().createElement(De.Z,{title:y,text:E.get("name"),"data-qa-id":(0,dt.qa)("folder"),component:We.Z})),a.showfolder&&te().createElement("div",{className:ft.elem("folder-tags",(n={hidden:!O},n["show-on-hover"]=S&&!O,n))},te().createElement(lt.Z,{model:i,tags:i.get("flags.tags"),folder:E.get("name"),rightSideDropdown:!0})))),f&&"none"!==f&&te().createElement("div",{className:ft.elem("payment-die-container",{noindent:!1===I,"pony-mode":s,compact:"compact"===f,metathread:a["in-metathread"]})},"compact"===f&&te().createElement(De.Z,{model:a.model,standalone:!0,"layout-mode":"3pane","pony-mode":s,component:Ve.Z}),"full"===f&&te().createElement(De.Z,{model:a.model,"layout-mode":"3pane","icon-container-mode":!1===I?"wide":"narrow",component:ze.Z})),L&&te().createElement(te().Fragment,null,c?te().createElement(De.Z,{fluid:!0,model:a.model,"attaches-list":v.attachesList,"more-attaches-list":v.moreAttachesList,"layout-mode":"3pane","all-count":c.length,vertical:g.vertical,"pony-mode":s,metathread:a["in-metathread"],remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,Be.Yv)(this),key:"list-letter-preview-attaches",component:Ke.Z}):te().createElement(te().Fragment,null,te().createElement(De.Z,{fluid:!0,attachesCount:i.get("attachments_count"),isCompact:!0,"pony-mode":s,metathread:a["in-metathread"],key:"list-letter-preview-stub",component:Xe.Z}))),_&&te().createElement(tt.Z,{compact:!0,model:i,ponyMode:s,broadcastEvent:(0,Be.Yv)(this)}),!a.hideDelimeter&&te().createElement(De.Z,{compact:!0,full:a["full-delimiter"],ponymode:s,indent:a.indent,indentRight:!0,component:Ze.Z}),te().createElement(De.Z,{last:!0,compact:!0,ponymode:s,indent:a.indent,indentRight:!0,component:Ze.Z}))}var pt,gt=(pt=function(e,t){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}pt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),vt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.contentRowRef=te().createRef(),n.getSubject=me.kB,n.getImageSrc=me.Q4,n.isProbablyPhishing=me.R5,n.isCorrespondentDangerous=me.if,n.getCorrespondent=me.dy,n.getCorrespondentTooltip=me.Mg,n.getDateTooltip=me.lB,n.getSubjectTooltip=me.JP,n.getSnippetValue=me.dP,n.getCounter=me.g,n.getCategory=me.n3,n.getAttaches=Fe.UN,n.getAttachesModes=M.O,n.isImportant=me.RD,n.getGoToActionDisplayMode=f.Y,n.getPaymentDieDisplayMode=H.OY,n.shouldShowUniversalPaymentDie=H.Ml,n.shouldHideTransactionCategory=H.Wv,n.getUnsubscribeSender=me.V_,n.handleIntersectViewport=me.a0,n.rootQaId=me.oV,n.letterDate=Ue.Zm,n.render=ht,n.meta=t.model.getPaymentMeta(),n.goToActionMetadata=t.model.getGoToActionMeta(),n}return gt(t,e),t.prototype.componentDidUpdate=function(){var e;(0,xe.u)(null===(e=this.contentRowRef)||void 0===e?void 0:e.current,"r-ll-cmp")},t.prototype.didMount=function(){var e;this.handleIntersectViewport(),(0,xe.u)(null===(e=this.contentRowRef)||void 0===e?void 0:e.current,"r-ll-cmp")},t.prototype.handleInnerEvent=function(e){var t=this.props.model;switch(e.type){case He.m.flagged:return void(0,R.ZP)(["letters_letter-item","toggle_flagged_".concat(!t.get("flags.flagged"))]);case He.m.unread:return void(0,R.ZP)(["letters_letter-item","toggle_unread_".concat(!t.get("flags.unread"))]);case He.m.clickAvatar:(0,R.ZP)(["letters_letter-item",this.props.selected?"deselect":"select"])}},t.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===H.OY.call(this)},t.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},t.prototype.getAvatarIndent=function(){if(this.props["pony-mode"])if(this.props.indent)return"left";else return"right";return!1},t.defaultProps={"layout-mode":"3pane"},t}(te().Component),_t=(0,Be.v$)("list-letter-compact",vt,{syncMediatorsOnRender:!1}),bt=n(36),Et=n(12043),yt=n(94716),Tt=n(20450),At=n(16730);function St(e){var t=this.props,n=t.model,r=t.ponymode,a=t.first,i=t.last,o=t.compact,s=t.selected,c=t.router,d=n.isExpanded(),u=this.state["short-dropdown"],f=this.state["short-text"];switch(!0){case!o:return te().createElement(De.Z,{expanded:d,first:a,last:i,model:n,"pony-mode":r,selected:s,isFirstSelected:t.isFirstSelected,isLastSelected:t.isLastSelected,"has-selected":t["has-selected"],"short-text":f,sticky:e,touch:t.touch,newSelection:t.newSelection,smallUnreadBtn:!0,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself",disable:"click:disable"},broadcastEvent:(0,Be.Yv)(this),remitDetails:n,component:yt.Z,router:c,redirectUrl:l.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-common"});case o&&d:return te().createElement(De.Z,{first:a,last:i,model:n,"pony-mode":r,selected:s,isFirstSelected:t.isFirstSelected,isLastSelected:t.isLastSelected,"has-selected":t["has-selected"],"short-dropdown":u,sticky:e,touch:t.touch,newSelection:t.newSelection,smallUnreadBtn:!0,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself",disable:"click:disable"},broadcastEvent:(0,Be.Yv)(this),remitDetails:n,component:At.Z,router:c,redirectUrl:l.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-compact-expanded"});default:return te().createElement(De.Z,{first:a,last:i,model:n,"pony-mode":r,selected:s,isFirstSelected:t.isFirstSelected,isLastSelected:t.isLastSelected,"short-dropdown":u,newSelection:t.newSelection,redesign:l.REDESIGN_OCTAVIUS_M_LETTER_LIST,smallUnreadBtn:!0,touch:t.touch,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself"},broadcastEvent:(0,Be.Yv)(this),remitDetails:n,component:Tt.Z,router:c,redirectUrl:l.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-compact"})}}var Ot=new ct.k("metathread");function Ct(){var e=this.props,t=e.model,n=e.ponymode,r=e.first,a=e.last,i=e.compact,o=e.selected,s=e.disableSpacer,l=t.isExpanded(),c=this.isStickyEnabled()&&l&&e.sticky;return te().createElement("div",{style:e.style,className:Ot.root({first:r,last:a,expanded:l,collapsed:!l,sticky:c,"first-sticky":r&&c,active:o,"new-selection":e.newSelection,firstSelected:e.isFirstSelected,lastSelected:e.isLastSelected}),onContextMenu:(0,Be.CH)(this,"contextmenu")},!r&&!s&&te().createElement("div",{className:Ot.elem("spacer")}),te().createElement("div",{className:Ot.elem("contain"),ref:this.containRef},this.renderMetathreadBlock(c),!e.hideDelimeter&&te().createElement(De.Z,{full:l,compact:i,ponymode:n,"data-qa-id":(0,dt.qa)("qqq1"),indentRight:e.newSelection,component:Ze.Z}),!e.newSelection&&te().createElement(De.Z,{last:!0,compact:i,ponymode:n,"data-qa-id":(0,dt.qa)("qqq2"),indentRight:e.newSelection,component:Ze.Z})))}var wt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.containRef=te().createRef(),t.events={"click:metathread-item":"onMetathreadItemClick",scrollintoself:"scrollIntoSelf"},t.state={},t.getUrl=Et.G.getUrl.bind(t),t.onMetathreadItemClickRedirect=Et.G.onMetathreadItemClickRedirect.bind(t),t.onMetathreadItemClick=Et.G.onMetathreadItemClick.bind(t),t.scrollIntoSelf=Et.G.scrollIntoSelf.bind(t),t.isStickyEnabled=Et.G.isStickyEnabled,t.renderMetathreadBlock=St,t.render=Ct,t}return wt(t,e),t.prototype.componentDidMount=function(){var e;(0,xe.u)(null===(e=this.containRef)||void 0===e?void 0:e.current,"r-mtr")},t.prototype.componentDidUpdate=function(){var e;(0,xe.u)(null===(e=this.containRef)||void 0===e?void 0:e.current,"r-mtr")},t}(te().Component),kt=(0,Be.v$)("metathread",Lt),It=!(!window.performance||"function"!=typeof performance.now||"function"!=typeof requestAnimationFrame),Rt=function(e,t,n){if(void 0===n)n={measureFps:!0,silent:!1};var r=this;this.component=e,this.name=t,this.options=n,this.mounted=function(){(0,Be.pd)(r.component).broadcast("scrollable:mount",{scrollableElement:r.component.getScrollableEl(),name:r.name})},this.unmounted=function(){(0,Be.pd)(r.component).broadcast("scrollable:unmount",{scrollableElement:r.component.getScrollableEl(),name:r.name}),delete r.component,window.clearTimeout(r._scrollingPid)},this.handleScroll=function(){if(!r.options.silent)(0,Be.pd)(r.component).broadcast("scroll:change");if(It&&r.options.measureFps){if(!r._scrollingPid)r._scrollingFrames=0,r._scrollingStartTs=performance.now(),requestAnimationFrame(r.handleAnimationFrame);window.clearTimeout(r._scrollingPid),r._scrollingPid=window.setTimeout(r.handleScrollEnd,200)}},this.handleScrollEnd=function(){delete r._scrollingPid;var e=(performance.now()-r._scrollingStartTs)/1e3,t=Math.round(r._scrollingFrames/e);if((0,R.ZP)({type:"fps_scroll_".concat(r.name),value:t,intervals:[["new",t]]}),l.IS_DEBUG)console.log("FPS",r.name,t);(0,Be.pd)(r.component).broadcast("scroll:end")},this.handleAnimationFrame=function(){if(r._scrollingPid)r._scrollingFrames++,requestAnimationFrame(r.handleAnimationFrame)}},Dt=n(83260),Mt=n.n(Dt),Pt="_1m5uryaWr_PmTQwTKgydf_",Nt="_29RYYLK9KxqKFihwIfEQr_",xt="_3Sjr0E9K1fxOKRTJZ7iy6-",Ft="JCa22DvD8NGFYyrDy_3k0",Ut="_22oo5Jw76aH7Lp2x0dkTaj",Ht="VYmG5ahAslUPGaE0E2k2X",Bt="_2DJwXZy25x4HEF_r6bIjiG",Zt="_1qD1jUuUWka8LTJXa3_2qk",Gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(){return(qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},jt={preparedragelement:"onPrepareDragElement","click:letter":"onLetterClick","click:avatar":"onAvatarClick","click:metathreadavatar":"onAvatarClick","click:previewattach":"onPreviewAttachClick",rightclick:"onRightClick",scrollintomodel:"onScrollIntoModelByIndex"},Wt=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))}([],Object.values(jt),!0),Vt=z().getScope("dataset-letters");var zt=new ct.k("dataset-letters"),Yt=function(e){var t=e.enabled,n=e.children;if(!t)return te().createElement(te().Fragment,null,n);else return te().createElement("div",{className:Ft},n)},Kt=function(e){var t,n=e.ponyMode,r=e.compact,i=e.withScrollbar,o=e.overEmpty,s=e.folder,l=e.parentFolder,c=e.broadcastEvent;return te().useEffect((function(){a().send("back-to-parent-show",{dwh:{pos:"letters",folder:s.id,parentFolder:l.id}})}),[s.id,l.id]),te().createElement("span",{className:G()(xt,(t={},t[Zt]=n,t[Bt]=r,t[Ut]=i,t[Ht]=o,t))},te().createElement(De.Z,{component:x.Z,remitEvents:{click:{name:"back:to:parent:folder"}},remitDetails:{pos:"letters"},broadcastEvent:c,text:l.get("name"),title:l.get("name"),annotation:l.get("name"),ico:"arrow-back","data-qa-id":"letter_back_to_parent_folder",compact:n,pure:!0,"ico-text-top":!0,size:"m",nowrap:!0,useMediator:["folders-navigation"]}))},Xt=function(e){function t(t){var n,r=e.call(this,t)||this;if(r.state={name:"dataset-letters",darkMode:!1,withScrollbar:!1,selected:{},"select-folder":!1,threadsEnabled:!1},r.list=te().createRef(),r.lastScrollTop=0,r.wasSmokescreenEnabled=!1,r.mountScrollPassed=!1,r.rootRef=te().createRef(),r.getScrollableEl=function(){return re().findDOMNode(r).querySelector(".ReactVirtualized__List")},r.scrollable=new Rt(r,"dataset-letters"),r.events=qt(qt({},jt),((n={})[u.X.heightChange]="updateHeights",n[u.X.heightChangeClearCache]="updateHeightsWithClear",n[u.X.heightChangeImmediate]="onRecalculateFromItem",n)),r._modelHeights={},r.detectScrollbar=Mt().debounce((function(){var e=r.props.showBackToParentFolder;if(l.METATHREAD_BACK_TO_INBOX&&l.BACK_TO_PARENT_AT_LETTERS&&e){var t=r.rootRef.current;if(t){var n=t.querySelector((0,N.selector)(".ReactVirtualized__Grid")),a=t.querySelector((0,N.selector)(".ReactVirtualized__Grid__innerScrollContainer"));if(n&&a){var i=window.getComputedStyle(n).width,o=window.getComputedStyle(a).width;if(i.endsWith("px")&&o.endsWith("px")){var s=+i.slice(0,i.length-2)-+o.slice(0,o.length-2)>6;if(r.state.withScrollbar!==s)r.setState({withScrollbar:s})}}}}}),100,r),r.getEl=function(){return re().findDOMNode(r)},r.updateHeightsWithClear=function(e){r.updateHeights(e,!0)},r.overscanIndicesGetter=function(e){var t,n=(0,oe.X7)(e);if(n.overscanStartIndex>0){for(var a=n.overscanStartIndex-1;a>0&&(null===(t=r.props.models[a])||void 0===t?void 0:t.is("datasetModel"));a--);n.overscanStartIndex=a}return n},r.updateHeights=function(e,t){var n,a;if(void 0===t)t=!1;var o=e.details.index;if("number"==typeof o){if(null===(n=r.list.current)||void 0===n||n.invalidateCellSizeAfterRender({columnIndex:0,rowIndex:o}),t)r.cache.clear(o,0),null===(a=r.list.current)||void 0===a||a.recomputeRowHeights(o)}else(0,i.coreLoggerDispatchSelfError)("rlist-update",new Error("index should be a number"))},r.onRecalculateFromItem=function(e){var t=e.details.index;if("number"==typeof t)r.recalculateItemsFromIndex(t);else(0,i.coreLoggerDispatchSelfError)("rlist-update",new Error("index should be a number"))},r.shouldShowLetterPreview=D.nF,r.letterMediators=["letters-actions","letter-attaches-preview","layout-manager","unsubscribe-actions","calendar-manager"],r.remitEvents={clickavatar:"click:avatar",click:"click:letter",contextmenu:"rightclick",previewattach:"click:previewattach"},r.getKey=function(e){var t,n=r.props.models[e];if(!n)return(0,i.coreLoggerDispatchSelfError)("rlist",new Error("no model for index")),"invalid";var a=n.id;if(null===(t=n.isInMetathread)||void 0===t?void 0:t.call(n))return"".concat(n.get("folder"),":").concat(a);if(w.Z.isSpinner(n))return"".concat(n.is("visible"),":").concat(a);else return a},r.hasAdsBefore=function(e){for(var t=r.props.models,n=0;n<e;n+=1)if(t[n].is(v.P))return!0;return!1},r.getRowHeight=function(e){var t=e.index,n=r.props,a=n.models,i=n.compact,o=n["pony-mode"],c=a[t];if(c.is(T.U)){var d=8,u=0;if(0===c.get("idx")&&!r.hasAdsBefore(t))d=0;if(!i&&!o)u=32;else if(!i&&o)u=30;else if(i&&!o)u=28;else u=26;return u+d}if(w.Z.isSpinner(c)){var f=0;if(c.is("visible"))f=(0,s.U0)(i,o);return r.cache.set(t,0,0,f),f}if((null==c?void 0:c.is("datasetModel"))||(null==c?void 0:c.is(O.N)))return(null==c?void 0:c.is(v.P))&&l.REDESIGN_OCTAVIUS_M_LETTER_LIST?r.cache.rowHeight({index:t})+4:r.cache.rowHeight({index:t});var m=A.Z.isMetathread(c)&&l.REDESIGN_OCTAVIUS_M_LETTER_LIST?84:r.getItemHeight(c);return r.cache.set(t,0,0,m),m},r.onScroll=function(e){if(r.lastScrollTop=e.scrollTop,r.mountScrollPassed)U.Z.resetAttachmentDropdown(),r.props.onScroll(e),r.scrollable.handleScroll();else r.mountScrollPassed=!0},r.renderRow=function(e){var t=r.props.models,n=e.index,a=r.getPrevModel(t,n),i=r.getNextModel(t,n),o=t[e.index],s=(null==a?void 0:a.is("flags.bimi_important_msg"))&&l.SHOW_RELIABLE_ON_LETTER_LIST&&!l.DISABLE_GREEN_RELIABLE_ON_LETTER_LIST,c=(null==a?void 0:a.is("flags.official"))&&l.SHOW_OFFICIAL_ON_LETTER_LIST&&!l.DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST,d=!1,f=!1,m=(0,p.x9)(o),h=(0,p.NL)(o);if(!m&&!h)d=(0,p.F9)(o),f=(0,p.JM)(o);var g,_=0===n||(null==a?void 0:a.is(S.M))||(null==a?void 0:a.is(C.p))||(null==a?void 0:a.is(v.P))||(null==a?void 0:a.is(L.G))||(null==a?void 0:a.is(T.U))||(null==a?void 0:a.is(O.N)),b={index:n,search:r.isSearch(),touch:r.isTouchDevice(),isFirst:_,hideDelimeter:_||s||c||f||m||l.HIDE_DELIMITER,isLast:!1,isReliable:d,isImportantReliable:f,isOfficialGreen:m,isOfficial:h,isPrevItemExpandedMetathread:null==a?void 0:a.is("metathreadFooter"),isNextItemExpandedMetathread:r.isModelExpandedMetathread(i),isNextSelected:i&&r.isLetterSelected(i),isPrevSelected:a&&r.isLetterSelected(a)},E={useMediators:r.letterMediators,remitDetails:{model:o,index:e.index},broadcastEvent:(0,Be.Yv)(r),style:e.style},y=function(e,t,n,r,a,i){var o,s,l;switch(!0){case e.is("heightCompensation"):return{component:ve};case e.is("skeletonLetter"):return{component:Ae};case e.is(T.U):return{skipWrapper:!1,el:te().createElement(Me.Z,{id:e.get("id"),title:e.get("title"),counter:e.get("counter"),compact:t.compact,ponyMode:t["pony-mode"],fit:i(),meta:e.get("meta")})};case e.is("promoBlockLetter"):return{component:ke.Z,useMediators:["layout-manager","advert-manager"],remitEvents:{"promoblockletter:render":u.X.heightChangeClearCache}};case e.is("welcomeBlockLetter"):return{component:Ce.Z,model:e,useMediators:["layout-manager","user-info","welcome-block-manager"]};case e.is("discountsBlockLetter"):return{component:ce.Z,discounts:t.router.model.discounts,"3pane":t.compact,search:a.search,threadsEnabled:n.threadsEnabled,router:t.router,folder:t.folder,useMediators:["layout-manager"]};case e.is("specProjectLetter"):return{skipWrapper:!1,el:te().createElement(De.Z,qt({},r,{style:null,cacheKey:e.id,component:Ie.Z,compact:t.compact,"no-delimeter":!0,uid:e.id,remitEvents:{"specline:render":u.X.heightChangeClearCache},useMediators:["letter-list-adv-optimizer","advert-manager"]}))};case e.is("advModel"):return{skipWrapper:!1,el:te().createElement(De.Z,{cacheKey:e.id,component:de.Z,rounded:!0,router:t.router,compact:t.compact,folder:t.folder.id,ponymode:t["pony-mode"],metathreadLastToggle:e.get("metathreadLastToggle"),uid:e.id,indent:e.is("inMetathread"),position:e.get("position"),index:e.get("index"),"no-delimeter":!0,"full-delimiter":a.isPrevItemExpandedMetathread,useMediators:["letter-list-adv-optimizer","advert-manager"]})};case e.is("baitLetter"):return{component:he};case e.is("spinnerLetter"):return{model:e,component:Se.Z,compact:t.compact,ponymode:t["pony-mode"],useMediators:["letters-loader"],remitEvents:{"state:toggle":u.X.heightChangeImmediate}};case e.is("searchActionLetter"):return{component:_e.Z,model:e,compact:t.compact,href:n["search-in-excluded-folders-url"],useMediators:["search-manager"]};case e.is("tipLetter")&&(null===(o=K().get(e.get("folder")))||void 0===o?void 0:o.isTrashLike()):return{component:Oe.Z,rounded:!0,borderless:!0,isNextSelected:a.isNextSelected,compact:t.compact,ponymode:t["pony-mode"],folder:t.folder,type:"trash:cleanup",useMediators:["folders-actions"]};case e.is("tipLetter")&&(null===(s=K().get(e.get("folder")))||void 0===s?void 0:s.isSpam()):return{component:Oe.Z,rounded:!0,borderless:!0,isNextSelected:a.isNextSelected,compact:t.compact,ponymode:t["pony-mode"],folder:t.folder,type:"spam:cleanup",useMediators:["folders-actions"]};case e.is("flags.metathread"):var c=n.selected[e.id];return{skipWrapper:!0,el:te().createElement(kt,qt({},r,{model:e,compact:t.compact,ponymode:t["pony-mode"],first:a.isFirst,last:a.isLast,touch:a.touch,selected:c,hideDelimeter:a.hideDelimeter,isLastSelected:c&&!a.isNextSelected,isFirstSelected:c&&!a.isPrevSelected,sticky:!1,"full-delimiter":a.isPrevItemExpandedMetathread,"has-selected":null===(l=n.metathreadsWithSelected)||void 0===l?void 0:l[e.id],newSelection:!0,disableSpacer:!0,remitEvents:{"expand:toggle":u.X.heightChange,contextmenu:"rightclick","click:metathreadavatar":"click:metathreadavatar","click-metathread-link":"click:metathread-link",scrollintoself:"scrollintoself"},useMediators:["metathreads-manager","letters-selection","layout-manager","folders-navigation"],router:t.router}))};case e.is("metathreadFooter"):return{component:we.Z,model:e,compact:t.compact,ponymode:t["pony-mode"],router:t.router,"hide-footer-spacer":a.isNextItemExpandedMetathread,useMediators:["layout-manager"]}}}(o,r.props,r.state,E,b,(function(){return o.is(T.U)&&0===o.get("idx")&&!r.hasAdsBefore(n)})),A=r.getKey(n);if(y&&"component"in y)return te().createElement(Re.Z,{id:"ltr-spec",key:A,logData:{key:A}},te().createElement(ie.Z8,{cache:r.cache,parent:e.parent,rowIndex:e.index,width:r._mostRecentWidth},te().createElement("div",{style:e.style,"data-debug-key":(0,dt.qa)(A)},te().createElement(De.Z,qt({key:y.component},E,y,{style:null})))));else if(y){var w=y;return g=w.skipWrapper?w.el:te().createElement("div",{style:e.style,"data-debug-key":(0,dt.qa)(A)},w.el),te().createElement(Re.Z,{id:"ltr-spec",key:A,logData:{key:A}},te().createElement(ie.Z8,{cache:r.cache,parent:e.parent,rowIndex:e.index,width:r._mostRecentWidth},g))}var k=r.getLetterType();switch(k){case"list-letter-compact":return te().createElement(Re.Z,{id:"ltr-cmp",key:A,logData:{key:A}},te().createElement(_t,qt({style:e.style,remitEvents:r.remitEvents},E,r.letterProps(t,n,b),r.letterPropsByType(k,o))));case"list-letter-common-touch":return te().createElement(Re.Z,{id:"llc-t",key:A,logData:{key:A}},te().createElement(Ne.Z,qt({style:e.style,remitEvents:r.remitEvents},E,r.letterProps(t,n,b),r.letterPropsByType(k,o))));case"list-letter-compact-touch":return te().createElement(Re.Z,{id:"llct-t",key:A,logData:{key:A}},te().createElement(bt.Z,qt({style:e.style,remitEvents:r.remitEvents},E,r.letterProps(t,n,b),r.letterPropsByType(k,o))));case"list-letter-common":default:return te().createElement(Re.Z,{id:"ltr-cmn",key:A,logData:{key:A}},te().createElement(Pe.Z,qt({style:e.style,remitEvents:r.remitEvents},E,r.letterProps(t,n,b),r.letterPropsByType(k,o))))}},r.renderNoLetters=function(e){var t=e.needShowBackToParentFolder,n=e.parentFolder,a=r.props,i=a.folder,o=a.router,s=a["letter-not-found"],c=a.search,d=a["search-letter"],u="empty-folder";switch(!0){case c&&!d:u="no-search";break;case s:u="no-letter"}return te().createElement("div",{className:G()(Pt,zt.root({empty:!0})),"data-qa-id":(0,dt.qa)("dataset-letters")},te().createElement("div",{className:G()(Pt,N.default.lookup("dataset__items"))},t&&l.BACK_TO_PARENT_AT_EMPTY_LETTERS&&te().createElement(Kt,{broadcastEvent:(0,Be.Yv)(r),folder:i,parentFolder:n,ponyMode:r.props["pony-mode"],compact:r.props.compact,overEmpty:!0}),te().createElement(De.Z,{component:Le.Z,"full-height":!0,type:u,folder:i,router:o,useMediators:["layout-manager","folders-navigation","filter-manager","settings-filters-manager","compose-manager","search-manager","themes-manager","pony-mode"],className:N.default.lookup("dataset-letters__empty")})))},r.cache=new ie.t1({fixedWidth:!0,keyMapper:r.getKey}),Wt.forEach((function(e){r[e]=r[e].bind(r)})),l.IS_DEBUG)window.DatasetLetters=r;return r}return Gt(t,e),t.prototype.componentDidMount=function(){var e=["scrollable-manager","advert-manager","letter-list-adv-optimizer"];(0,Be.Nh)("scrollable",this,e),(0,Be.Ce)(this,e),this.scrollable.mounted(),this.detectScrollbar();var t=this.props.folder;if(null==t?void 0:t.isMetathread())a().send("metathread_view",{dwh:{category:t.id,name:t.get("name")}});(0,h.PI)("letters"),function(){if(!d)d=!0,setTimeout((function(){Promise.resolve().then((function(){var e=[n(15907),n(29678)];(function(e,t){var n=e.default,r=t.locator;function i(){var e=null;if(document.hidden)e="tab_hidden";else if(r.isEnabled())e="mimic";else if(l.HIDE_TOYS===l.BL_PROP_NAME)e="profile";else if(!n.isMoreThen("xs"))e="layout";return e}var o=i();if(!o)a().send("adman-check",{i:"start"}),setTimeout((function(){var e=i();if(!e){var t=document.querySelector("#app-canvas .advert-column > .slot");try{var n=null;if(t)if(!t.firstChild)n="no_fchild";else if(!t.firstChild.firstChild)n="no_fchild2";else{if(t.getBoundingClientRect().top<-1e4)n="no_relative"}else n="no_node";if(n){var r=null;if(t)r=t.innerHTML.replace(/(\r\n|\n|\r)/gm,"").slice(0,500);if(l.ADVERT_VIS_LOG)a().send("adman-check",{i:["hidden",n],rlog:"octavius_adman_check_reason",rlog_message:{reason:n,html:r,blocker:(0,c.gU)()}});else a().send("adman-check",{i:["hidden",n]})}}catch(e){a().send("adman-check",{i:"catch"})}}else a().send("adman-check",{i:"a_disable_".concat(e)})}),l.ADVERT_VIS_CHECK);else a().send("adman-check",{i:"disable_".concat(o)})}).apply(null,e)})).catch(n.oe)}),1e3)}()},t.prototype.UNSAFE_componentWillUpdate=function(e){if(e.folder!==this.props.folder||e["pony-mode"]!==this.props["pony-mode"]||e.compact!==this.props.compact)De.Z.clearCache("letter-list-item-adv"),De.Z.clearCache("spec-project-letter")},t.prototype.componentDidUpdate=function(e){var t;if(e.folder!==this.props.folder){var n=this.props.folder;if(null==n?void 0:n.isMetathread())a().send("metathread_view",{dwh:{category:n.id,name:n.get("name")}})}if(e["pony-mode"]===this.props["pony-mode"]){if(e.models!==this.props.models)null===(t=this.list.current)||void 0===t||t.recomputeRowHeights();if(N.default.isEnabled()&&!this.wasSmokescreenEnabled)this.wasSmokescreenEnabled=!0,this.recomputeHeightsWithClear();this.detectScrollbar()}else this.recomputeHeightsWithClear()},t.prototype.componentWillUnmount=function(){this.scrollable.unmounted()},t.prototype.isMounted=function(){return!0},t.prototype.recalculateItemsFromIndex=function(e){var t;null===(t=this.list.current)||void 0===t||t.recomputeRowHeights(e)},t.prototype.onAvatarClick=function(e){var t=e.originalEvent&&e.originalEvent.details,n=e.details;if(e.details.model)n=e.details.model;if(!t||t&&!t.get("swipe-actions-visible"))(0,Be.pd)(this).broadcast("selected:toggle",n,e.originalEvent);e.preventDefault()},t.prototype.openDraft=function(e){var t=this;return Q().fetchData({id:e.get("expand")||e.get("id"),folder_id:e.get("folder"),remove_emoji_opts:W.Y},!0,!0).then((function(e){Q().set([e]),(0,Be.pd)(t).broadcast("compose:draft",new(Q())(e))})).catch((function(e){(0,R.ZP)({type:"open_draft_fail",rlog:"open_draft_fail",rlog_message:e})}))},t.prototype.isLetterSelected=function(e){var t,n,r,a=this.state["select-folder"],i=this.state.selected;if(L.Z.isTip(e))return!0;if(b.Z.isDatasetModel(e))return!1;else return(null==i?void 0:i[e.id])||!(null===(t=e.isInMetathread)||void 0===t?void 0:t.call(e))&&!(null===(n=e.is)||void 0===n?void 0:n.call(e,"flags.metathread"))&&a||(null===(r=e.isInMetathread)||void 0===r?void 0:r.call(e))&&e.getContainingMetathread()&&i[e.getContainingMetathread().id]},t.prototype.isEnableAttach=function(){return this.props.folder.checkGrant(K().SHARE_GRANTS.view_attachment)},t.prototype.getMainField=function(e){var t=K().get(e.get("folder"));if((null==t?void 0:t.isOutbox())||(null==t?void 0:t.isSent())||(null==t?void 0:t.isDrafts()))return"to";else return"from"},t.prototype.isSearch=function(){return this.props.search||this.props["search-letter"]},t.prototype.getLetterHref=function(e,t){return(0,p.fS)(e,t,{router:this.props.router,search:this.props.search,threads:this.state.threadsEnabled})},t.prototype.isPriorityMessage=function(e){var t,n=null===(t=e.getFolder)||void 0===t?void 0:t.call(e);if(!n)return!1;if(n.isSpam())return!1;var r=this.props.router;return(0,o.E)(r,n,e.get("flags.newsletter"),e.get("transaction_category"))&&e instanceof $()&&e.get("flags.is_relevant")&&e.get("flags.unread")},t.prototype.onPrepareDragElement=function(e){var t=e.details,n=j().Mediator.get("letters-selection"),r=document.createElement("div"),a=$().all.get(t.id)||A.Z.all.get(t.id);if(a)n.select(a),r.textContent=n.getModels().length+" items",r.style.cssText="padding: 5px 10px; background: #ccc;",t.el.appendChild(r);return!1},t.prototype.onRightClick=function(e){if(U.Z.resetAttachmentDropdown(),!this.props.touch&&!this.props.search)this.setDetailsForRightClick(e),I.Z.show(e)},t.prototype.onLetterClick=function(e){var t;if(!e.isDefaultPrevented()){var n=e.originalEvent;if(!n||!(0,m.c)(n)){e.preventDefault();var r=e.details.model,i=r.getFolder();if(this.props.compact&&this.props["select-mode"])(0,Be.pd)(this).broadcast("selected:toggle",r,e.originalEvent);else if(i.isOutbox())(0,Be.pd)(this).broadcast("compose:schedule",r);else if(i.isTemplates())(0,Be.pd)(this).broadcast("compose:template",r);else if(i.isDrafts())this.openDraft(r);else this.goToLetter(r);var s=(0,g.Zh)(r).id,c=this.props.search,d=this.props.router,u=qt(qt(qt(qt(qt({message_id:r.get("id"),uidl:r.get("last"),length_thread:r.get("length"),unread:r.get("flags.unread"),priority:+r.get("flags.is_relevant"),folder_id:s,need_hide_emoji_in_subject:r.get("flags.subject_has_emojis"),need_hide_emoji_in_snippet:r.get("flags.snippet_has_emojis"),need_hide_emoji_in_correspondent:r.get("flags.sender_has_emojis"),show_relevant:+(0,o.E)(d,i,r.get("flags.newsletter"),r.get("transaction_category"))},r.get("actual_probability")&&{ml_model:r.get("actual_probability").split(":")[0]}),r.get("flags.bimi_msg")&&{reliable:!0}),(r.get("flags.official")||r.get("flags.official_newsletter"))&&{official:!0}),r.get("flags.tags")&&{labels:null===(t=r.get("flags.tags"))||void 0===t?void 0:t.join(",")}),{maybe_phishing:r.get("flags.maybe_phishing")}),f=qt({unread:r.get("flags.unread"),ui_index:r.meta("_ui-index"),search:c},u);if(u.priority)a().send("thread_letter_open_priority");if(u.maybe_phishing)a().send("thread_letter_open_probable_phishing",{dwh:f});if((0,R.ZP)({chain:["thread","letter","open"],dwh:u,data:f}),l.DISCOUNTS_BLOCK&&d.model.uiThreadsSettings.discounts&&d.model.folder.isNewsletters()&&r.get("flags.pinned")&&r.get("discount"))(0,R.ZP)({chain:["open","discount","thread"],dwh:{from:"letter_list",threadId:r.get("id"),letterId:r.get("expand")||r.get("id"),unread:r.get("flags.unread"),jsonld:r.get("discount.from_jsonld"),relevant:r.get("flags.is_relevant")}})}}},t.prototype.onPreviewAttachClick=function(e){var t=e.details,n=e.originalEvent;if(t&&n&&n.details&&n.originalEvent){var r=t.index,a=n.details,i=a.hasSnippet,o=a.ext,s=n.originalEvent.type,l=[["letter_position",r+1],["hasSnippet",i]];if(o)l.push(["extension",o]);var c=this.props.router.model.search.search_id,d=Math.floor(Date.now()/1e3);(0,R.ZP)({chain:["search_attaches_click_".concat(s)],intervals:l,dwh:{search_id:c,timestamp:d}})}},t.prototype.setDetailsForRightClick=function(e){if(e.details.model)e.details=e.details.model;e.details.folders=this.props.folders,e.details.isLetterSelected=this.isLetterSelected(e.details)},t.prototype.goToLetter=function(e){var t=this,n=(0,g.Zh)(e);if(n.isSecureOpen()){var r=this.props.router,a=this.getLetterHref(e,n);r.nav(a,{initiator:"popstate"})}else(0,P.Z)(n).then((function(n){n&&t.goToLetter(e)}))},t.prototype.isTouchDevice=function(){return l.IS_TOUCH_DEVICE},t.prototype.isModelExpandedMetathread=function(e){return e&&A.Z.isMetathread(e)&&e.isExpanded()},t.prototype.getItemHeight=function(e){var t,n=this.props.compact,r=this.props["pony-mode"]||!(!n||!(null===(t=e.isInMetathread)||void 0===t?void 0:t.call(e))),a=this.isSearch(),i=e.get("id"),o=this._modelHeights[i];if(o)return o;if(y.Z.isHeightCompensation(e))return e.get("height");if(_.Z.isBait(e)||w.Z.isSpinner(e)||S.Z.isPromoBlock(e)||C.Z.isSpecProjectLetter(e)||k.Z.isWelcomeBlock(e)&&!e.is("visible"))return 0;if(k.Z.isWelcomeBlock(e))if(!n)return 74;else return 90;if(E.Z.isDiscountsBlock(e))if(n)return 224;else return 200;if(A.Z.isMetathread(e)&&e.isExpanded()&&n)if(r)return s.Au;else return s.kG;if(A.Z.isMetathreadFooter(e)){if(!n)if(r)return 52;else return 60;if(n)if(r)return 52;else return 60}var l=0,c=(0,p.sD)(e,a);if(c)if(n)l=r?24:12;else l=r?26:24;var d=(0,f.L)(e,r,a,n,c),u="none"===(0,f.Y)(e,a,!1),m=a?{}:this.props["hidden-payment-dies"]||{},h=u?(0,H.OY)(e,m,r,a,!1):"none",g=0;if("full"===h&&!n)g=e.getPaymentMeta().skin===H.RL.GIBDD?98:70;else if("none"!==h&&n)switch(h){case"compact":g=34;break;case"full":g=e.getPaymentMeta().skin===H.RL.GIBDD?98:70}var v=(0,D.nF)(e)?e.get("attachments_count"):0,b=!!v?{length:v}:(0,D.Ef)(e,a),T=!(a&&n),O=0;if(b&&b.length&&T&&u){var L=(0,D.hj)(e,a),I=(0,M.O)(n,b,L);O=(0,M.i)(I)}var R=(0,B.S)(e,a),P=0;if((0,B.D)(e,R)&&!n&&u)P=20;var N=0;if((0,H.Ml)(e,!1)&&u)if(!n)N=32;else if(c&&!r)N=20;var x=0;if(a&&n)x=r?6:10;return(0,s.U0)(n,r)+l+g+d+O+P+N+x},t.prototype.isLetterActive=function(e){return this.props.thread===e.id},t.prototype.onScrollIntoModelByIndex=function(){},t.prototype.scrollToTop=function(){this.list.current.scrollToPosition(0)},t.prototype.letterPropsByType=function(e,t){var n,r=null===(n=t.isInMetathread)||void 0===n?void 0:n.call(t);switch(e){case"list-letter-compact":return{active:this.isLetterActive(t),"pony-mode":this.props["pony-mode"]||r}}},t.prototype.getModelWithSkip=function(e,t,n){var r=n?1:-1,a=e[t+r];if(a&&!_.Z.isBait(a))return a;else return e[t+2*r]},t.prototype.getPrevModel=function(e,t){return this.getModelWithSkip(e,t,!1)},t.prototype.getNextModel=function(e,t){return this.getModelWithSkip(e,t,!0)},t.prototype.letterProps=function(e,t,n){var r,a=this.getPrevModel(e,t),i=this.getNextModel(e,t),o=e[t],s=e.length,l=null===(r=o.isInMetathread)||void 0===r?void 0:r.call(o),c=null==a?void 0:a.is("metathreadFooter"),d=this.isLetterSelected(o);return{model:o,last:t===s-1||t===s-2&&(null==i?void 0:i.is("spinnerLetter")),first:n.isFirst,hideDelimeter:n.hideDelimeter,isReliable:n.isReliable,isImportantReliable:n.isImportantReliable,isOfficialGreen:n.isOfficialGreen,isOfficial:n.isOfficial,router:this.props.router,"pony-mode":this.props["pony-mode"],darkMode:this.state.darkMode,"disable-attach":!this.isEnableAttach(),"main-field":this.getMainField(o),"show-attaches":this.shouldShowLetterPreview(o),selected:d,isLastSelected:d&&(!i||!this.isLetterSelected(i)),isFirstSelected:d&&(!a||!this.isLetterSelected(a)),folder:this.props.folder,search:this.isSearch(),showfolder:this.isSearch(),indent:l,priority:this.isPriorityMessage(o),"in-metathread":l,"full-delimiter":c,href:this.getLetterHref(o,this.props.folder),qaIndex:o.meta("_ui-index")}},t.prototype.recomputeHeightsWithClear=function(){var e;this.cache.clearAll(),null===(e=this.list.current)||void 0===e||e.recomputeRowHeights()},t.prototype.checkIfNeedsRecompute=function(e){var t=e.width;if(null!==this._mostRecentWidth&&this._mostRecentWidth!==t)this.recomputeHeightsWithClear();this._mostRecentWidth=t},t.prototype.scrollTo=function(e,t){var n;Vt.add("scrollTo",{_posX:e}),null===(n=this.list.current)||void 0===n||n.scrollToPosition(t)},t.prototype.reset=function(){this.scrollTo(0,0)},t.prototype.getScrollPos=function(){return{x:0,y:this.lastScrollTop}},t.prototype.getLetterType=function(){var e=this.props.compact;switch(!0){case this.isTouchDevice()&&e:return"list-letter-compact-touch";case this.isTouchDevice():return"list-letter-common-touch";case e:return"list-letter-compact";default:return"list-letter-common"}},t.prototype.onRowsRendered=function(e){this._lastRenderedRows=e;var t=this.props.models.slice(e.startIndex,e.stopIndex);(0,F.v)(t)},t.prototype.renderList=function(e){var t=this,n=e.needShowBackToParentFolder,r=e.parentFolder,a=this.props,i=a.models,o=a.onScrollToBottom,s=a.folder,l=qt({},this.state),c=this.state.withScrollbar;return te().createElement("div",{className:G()(Pt,zt.root({new:!0,withToolbar:n})),"data-qa-id":(0,dt.qa)("dataset-letters"),ref:this.rootRef},n&&te().createElement(Kt,{broadcastEvent:(0,Be.Yv)(this),folder:s,parentFolder:r,ponyMode:this.props["pony-mode"],compact:this.props.compact,withScrollbar:c}),te().createElement(Yt,{enabled:n},te().createElement(se.b,{isRowLoaded:function(e){var t=e.index;return!!i[t]},loadMoreRows:function(e){return o(e),Promise.resolve()},rowCount:1/0},(function(e){var n=e.onRowsRendered;return te().createElement(ae.q,null,(function(e){var r=e.width,a=e.height;return t.checkIfNeedsRecompute({width:r}),te().createElement(le.aV,qt({className:G()(N.default.lookup("dataset__items"),N.default.lookup("scrollable_styled"),N.default.lookup("scrollable_content"),Nt),overscanIndicesGetter:t.overscanIndicesGetter,deferredMeasurementCache:t.cache},l,{onRowsRendered:function(e){n(e),t.onRowsRendered(e)},onScroll:t.onScroll,ref:t.list,width:r,height:a,rowHeight:t.getRowHeight,rowCount:i.length,rowRenderer:t.renderRow}))}))}))))},t.prototype.render=function(){var e=this.props,t=e.folder,n=e.folders,r=e.showBackToParentFolder,a=null==n?void 0:n.find((function(e){return e.id===(null==t?void 0:t.get("parent"))})),i=!!(l.METATHREAD_BACK_TO_INBOX&&l.BACK_TO_PARENT_AT_LETTERS&&r&&a);if(!this.props.models.length||this.props["letter-not-found"])return this.renderNoLetters({needShowBackToParentFolder:i,parentFolder:a});else return this.renderList({needShowBackToParentFolder:i,parentFolder:a})},t}(te().Component),Qt=(0,Be.v$)("dataset-letters",Xt)},21943:function(e,t,n){"use strict";n.d(t,{s:function(){return O}});var r=n(28266),a=n.n(r),i=n(21211),o=n(63745),s=n.n(o),l=n(40520),c=n(29273),d=n(81171),u=n(79929),f=n(30178),m=n(63712),h=n(99141),p=n(16088),g=l.j.Headline,v=l.j.Subhead,_=l.j.Spacing,b=function(e){var t,n,r,i=e.isDarkMode,o=e.banner,l=(0,p.I)().position;return s().createElement("div",{className:a()(h.Z.item,(t={},t[h.Z.itemDark]=i,t)),"data-qa-id":(0,f.qa)("banner-bell")},s().createElement("a",{className:h.Z.itemLink,href:o.link,onClick:function(){return(0,m.io)(o.bannerid,l)},target:"_blank",rel:"noreferrer"},s().createElement("div",{className:h.Z.itemContent},s().createElement(g,{level:"1",weight:"2",className:h.Z.itemTitle},o.title),s().createElement(_,{size:4}),s().createElement(v,{className:h.Z.itemText},o.text),s().createElement(_,{size:8}),s().createElement("div",{className:h.Z.itemLearnMore},null!==(r=o.learnMoreText)&&void 0!==r?r:i18n("Узнать больше"),s().createElement("span",{className:a()(h.Z.itemArrow,(n={},n[h.Z.itemArrowDark]=i,n))},s().createElement(d.Icon,{icon:u.UNION_ARROW_RIGHT_OUTLINE_20})))),s().createElement("div",{className:h.Z.imageWrapper},s().createElement("img",{className:h.Z.image,src:i?o.imageDark:o.image,alt:o.title}))))},E=n(10476),y=n(79670),T=l.j.Title,A=l.j.Spacing,S=l.j.Headline,O=function(e){var t,n=e.hidden,r=(0,E.C)({name:"new-features-dropdown",mediators:["themes-manager"]})[0].darkMode,o=(0,p.I)(),l=o.position,d=o.inWidget,u=(0,y.U)().ponyMode;return!n&&s().createElement("div",{className:a()(h.Z.wrapper,(t={},t[h.Z.inWidget]=d,t[h.Z.ponyMode]=u,t)),"data-qa-id":(0,f.qa)("dropdown-new-features-bell")},s().createElement("div",{className:a()(h.Z.dropdownContainer,"scrollable_styled","application_new-toolbar")},s().createElement(T,{level:"2"},i18n("Что нового в Почте")),s().createElement(A,{size:8}),c.g.map((function(e){return s().createElement(b,{banner:e,key:e.bannerid,isDarkMode:r})}))),c.g.length===i.NEW_FEATURES_SHOW_COUNT&&s().createElement("div",{className:h.Z.linkWrapper},s().createElement("a",{className:h.Z.link,href:i.NEW_FEATURES_LANDING_HREF,onClick:function(){return(0,m.c)(c.g.map((function(e){return e.bannerid})),l)},target:"_blank",rel:"noreferrer"},s().createElement(S,{level:"1",weight:"2"},s().createElement("span",{className:h.Z.linkSeeAll},i18n("Посмотреть все"))))))}},63712:function(e,t,n){"use strict";n.d(t,{ne:function(){return i},io:function(){return o},c:function(){return s}});var r=n(60033),a=n.n(r),i=function(e,t){return a().send("bell-click",{dwh:{ids:e,position:t}})},o=function(e,t){return a().send("bell-click-point",{dwh:{id:e,position:t}})},s=function(e,t){return a().send("bell-click-show-more",{dwh:{ids:e,position:t}})}},29273:function(e,t,n){"use strict";n.d(t,{g:function(){return a},l:function(){return i}});var r=n(19275),a=r.Z.get("newFeatures")||[],i=r.Z.get("newFeaturesCount")||0},16088:function(e,t,n){"use strict";n.d(t,{i:function(){return a},I:function(){return i}});var r=n(63745),a=(0,r.createContext)(null),i=function(){var e=(0,r.useContext)(a).position;return{position:e,inWidget:"whiteline_widget"===e}}},21610:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r,a=n(21211),i=n(63745),o=n.n(i),s=n(45114),l=n(60319),c=n(2581),d=n(42339),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.componentDidCatch=d.s,t}return u(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.render=function(){var e=this.props.errorFallback,t=this.state.hasError;if(void 0!==e&&t)return o().createElement(o().Fragment,null,e);else return this.props.children},t}(o().Component),m=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.render=function(){var e=this.props,t=e.fallback,n=e.children,r=this.props.errorFallback,a=void 0===r?t:r;return o().createElement(f,h({},this.props,{errorFallback:a}),o().createElement(i.Suspense,{fallback:t},n))},t}(o().Component),g=n(78381),v=n(81171),_=n(60033),b=n.n(_),E=n(28266),y=n.n(E),T=n(79929),A=n(16088),S=n(21943),O=n(17717),C=n.n(O),w=n(73794),L=n(30178),k=n(63712),I=n(99141),R=n(29273),D=function(e){var t,n=e.className,r=e.isBottomRight,s=function(){var e=(0,i.useState)((function(){var e=C().get("octavius-bell-pimple");return!!e&&!e.state})),t=e[0],n=e[1],r=(0,i.useCallback)((function(){if(t)n(!1),C().get("octavius-bell-pimple").save({state:!0})}),[t]);return{isShowPimple:t,hidePimple:r}}(),l=s.isShowPimple,c=s.hidePimple,d=(0,i.useState)(!1),u=d[0],f=d[1];(0,i.useEffect)((function(){b().send("bell-shown")}),[]),(0,i.useEffect)((function(){if(l)b().send("pimple-shown")}),[l]);var m=(0,A.I)().position,h=(0,i.useCallback)((function(){c(),(0,k.ne)(R.g.map((function(e){return e.bannerid})),m)}),[c,m]);return o().createElement("div",{className:n},o().createElement(v.Dropdown,{placement:r?"bottomRight":"bottom",onChangeExpandState:f,pureOverlay:!0,overlay:function(){return o().createElement(S.s,null)}},o().createElement("div",{className:y()(I.Z.bellIcon,(0,w.d)("octavius-tooltip-mail-updates"),(t={},t[I.Z.active]=u,t)),onClick:h,"data-qa-id":(0,L.qa)("bell"),title:i18n("Последние обновления")},o().createElement(v.Icon,{icon:a.NEW_FEATURES_MEGAFON_ICON?T.UNION_ADVERTISING_OUTLINE_20:T.NAVIGATION_NOTIFICATION}),l&&o().createElement("div",{className:I.Z.pimple,"data-qa-id":(0,L.qa)("bell-pimple")}))))},M=n(42061),P=n(51422),N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=a.HEADLINE_CLASS,F=o().lazy((function(){return Promise.all([n.e(9308),n.e(9009)]).then(n.bind(n,33018))})),U=new w.k(l.l.name),H={position:"whiteline"},B=function(){},Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events=l.l.events,t.focus=l.l.focus,t.reset=l.l.reset,t.expandSearchPanel=l.l.expandSearchPanel.bind(t),t.handleSearchPanelBlur=l.l.handleSearchPanelBlur.bind(t),t.searchPanelRef=o().createRef(),t.overflowPortalProjects="none"===x?B:function(){var e=document.querySelector("#headline");if(e)e.classList.add(x),setTimeout((function(){e.classList.remove(x)}),100)},t.isMount=!1,t}return N(t,e),t.prototype.componentDidUpdate=function(e,t){if(a.SEARCH_PANEL_PORTAL&&t.active!==this.state.active)if(this.updatePortalHeader(),this.overflowPortalProjects(),this.state.active)this.broadcast("select:drop");if(a.SEARCH_PANEL_PORTAL&&t.onlyIcon!==this.state.onlyIcon)this.overflowPortalProjects()},t.prototype.updatePortalHeader=function(){var e,t,n=this.state.active?{eventName:"searchExtend",classAction:"add"}:{eventName:"searchCollapse",classAction:"remove"},r=n.eventName,a=n.classAction;__PH.emit(r),null===(e=document.querySelector(".ph-project_open"))||void 0===e||e.click(),null===(t=document.querySelector("#headline"))||void 0===t||t.classList[a]("search-extend")},t.prototype.getSearchInput=function(){return this.searchPanelRef.current},t.prototype.render=function(){var e,t=this.props,n=t.store,r=t.categories,i=t.colorTags,l=this.state,d=l.rightColumn,u=l.hide,f=l.darkMode,m=l.maxWidth,h=l.size,v=l.layoutType,_=l.active,b=l.onlyIcon,E=l.leftColumn,y=l.ponyMode&&a.HIDE_HEADLINE;if(!this.isMount){if(_)this.updatePortalHeader();this.overflowPortalProjects(),this.isMount=!0}var T=a.SEARCH_PANEL_PORTAL?a.SEARCH_PANEL_SIZE:d,S=E<=50;return o().createElement("div",{"data-qa-id":(0,L.qa)("portal"),"data-qa-type":(0,L.qa)("search-panel-wrapper"),className:U.root((e={active:_,"only-icon":b,hide:u},e["size_".concat(h)]=!0,e["type_".concat(v)]=!0,e["pony-mode"]=y,e.short=S,e.full=!S,e)),style:{maxWidth:m}},o().createElement("div",{"data-qa-id":(0,L.qa)("search-panel".concat(_?":active":"")),style:{width:_?"100%":"auto"},className:U.elem("wrapper",{active:_,inactive:!_})},o().createElement("div",{className:U.elem("left-col")},o().createElement(g.Z,{ico:"arrow-back",nowrap:!0,"radar-id":"back",text:i18n("Сбросить поиск"),compact:y,pure:!0,short:S,centered:!0,remitEvents:{mousedown:"back"},broadcastEvent:(0,P.Yv)(this),component:s.Z,key:"button2",updateRemitEventsName:!0})),!a.HAS_WIDGET_HEADER_TYPE&&a.NEW_FEATURES_BELL&&o().createElement(A.i.Provider,{value:H},o().createElement(D,{className:U.elem("bell"),isBottomRight:b})),o().createElement("div",{className:U.elem("right-col"),style:{width:!b&&T}},b?o().createElement(g.Z,{ico:"search",compact:y,pure:!0,centered:!0,remitEvents:{click:{stop:!0,name:"expandSearchPanel"}},broadcastEvent:(0,P.Yv)(this),component:s.Z,key:"button2",updateRemitEventsName:!0}):o().createElement(g.Z,{shortcut:"/",short:d<240,compact:y,useMixin:"shortcut-title",remitEvents:{click:{stop:!0,name:"expandSearchPanel"}},broadcastEvent:(0,P.Yv)(this),component:c.Z,key:"search-panel-button",updateRemitEventsName:!0})),o().createElement("div",{className:U.elem("layer")},o().createElement(M.Z,{ref:this.searchPanelRef,active:_,onBlur:this.handleSearchPanelBlur,search:n.search,size:h,ponyMode:y,categories:r,colorTags:i,darkMode:f})),a.HAS_WIDGET_HEADER_TYPE&&o().createElement("div",{className:U.elem("widget")},o().createElement(p,{id:"wid-h",fallback:null},o().createElement(F,{onlyIcon:b})))))},t.defaultProps=l.l.defaults,t}(o().Component),G=(0,P.v$)(l.l.name,Z)},42061:function(e,t,n){"use strict";n.d(t,{t:function(){return ie},Z:function(){return oe}});var r,a=n(73928),i=n(81171),o=n(60033),s=n.n(o),l=n(17177),c=n(93286),d=n(28266),u=n.n(d),f=n(21211),m=n(79929),h=n(52293),p=n(93974),g=n(63745),v=n.n(g),_=n(59333),b=n.n(_),E=n(12199),y=n(78381),T=n(30178),A=n(83260),S=n(68021),O=n(5910),C="_1SEcF0Q8NmDNoMXSpQHYm2",w="Fu2egnKshAdgPYYtf3iIU",L="_1bg0wx_JeuO_SqvEJRkdQx",k="_2ixMmj67tJABmCL-ZbSwIN",I=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),R=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o},D=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))},M=function(e){function t(t){var n=e.call(this,t)||this;return n.handleValueChange=n.handleValueChange.bind(n),n.handleValueApply=n.handleValueApply.bind(n),n.handleSubtypeChange=n.handleSubtypeChange.bind(n),n.handleClose=n.handleClose.bind(n),n.handleEditingStarted=n.handleEditingStarted.bind(n),n.handleEditingEnd=n.handleEditingEnd.bind(n),n.render2kitDatePicker=n.render2kitDatePicker.bind(n),n.operandRef=v().createRef(),n}return I(t,e),t.prototype.render2kitDatePicker=function(e,t){return v().createElement(i.DatePicker,{value:e,onChange:t})},t.prototype.handleValueChange=function(e,t){this.props.operand.setValue(t)},t.prototype.handleValueApply=function(e,t){var n=this.props,r=n.operand,a=n.onValueApply;if(r.setValue(t),r.applyChanges(),a)a(r)},t.prototype.handleSubtypeChange=function(e,t){var n=this.props,r=n.search,a=n.operand;if(s().send(t,{t_feature:"operand_selector"}),e&&"keydown"===e.type)r.updateOperandSubtypeAndFocus(a,t);else r.updateOperandSubtypeAndBlur(a,t)},t.prototype.handleClose=function(){var e=this.props,t=e.search,n=e.index;if(e.operand.type===S.q.MAILBOX)t.removeOperand(S.q.FOLDER);t.smartInput[l.SmartInputActions.REMOVE_AND_DEACTIVATE_ALL](n)},t.prototype.handleEditingStarted=function(){this.focus()},t.prototype.handleEditingEnd=function(){this.props.operand.applyChanges()},t.prototype.focus=function(){var e=this.operandRef.current;e.focus&&e.focus()},t.prototype.renderOperand=function(){var e=this.props,t=e.operand,n=e.search,r=e.active,i=e.editing,o=e.portalRef,s=e.categories,l=e.colorTags;switch(t.type){case S.q.FILTER:return v().createElement(a.OperandFilter,{active:r,type:t.subtype,testId:(0,T.qa)("".concat(S.q.FILTER,":").concat(t.subtype)),onClose:this.handleClose});case S.q.CATEGORY:if(!(f.ENABLE_COLOR_TAGS_SEARCH?D(D([],s,!0),l,!0):s).includes(t.subtype))return;var c=s.includes(t.subtype);return v().createElement(a.OperandCategory,{ref:this.operandRef,active:r,edit:i,type:t.subtype,onChange:this.handleSubtypeChange,onClose:this.handleClose,portal:o,portalOnly:!0,testId:(0,T.qa)("".concat(S.q.CATEGORY,":").concat(t.subtype)),qaEnabled:(0,T.U)(),categories:s,categoriesCaption:v().createElement(O.wg,{testId:"categories",text:i18n("Категория")}),colorTags:l,colorTagsCaption:v().createElement(O.wg,{testId:"colorTags",text:i18n("Метка")}),activeColumn:c?"category":"colorTag",hasColorTags:f.ENABLE_COLOR_TAGS_SEARCH});case S.q.QUERY:return v().createElement(a.OperandQuery,{ref:this.operandRef,active:r,edit:i,type:t.subtype,value:t.editing?t.next.value:t.value,options:n.enabledQueryOptions|a.OperandQueryOptions[t.subtype],onValueChange:this.handleValueChange,onTypeChange:this.handleSubtypeChange,onClose:this.handleClose,portal:o,portalOnly:!0,testId:(0,T.qa)("".concat(S.q.QUERY,":").concat(t.subtype)),qaEnabled:(0,T.U)()});case S.q.FOLDER:return v().createElement(a.OperandFolder,{ref:this.operandRef,testId:(0,T.qa)("".concat(S.q.FOLDER,":").concat(t.value)),qaEnabled:(0,T.U)(),active:r,edit:i,folders:n.folders.map((function(e){return{id:e.idNumber,name:e.folderName}})),folder:t.value,folderListClassName:k,onChange:this.handleValueApply,onClose:this.handleClose,portal:o,portalOnly:!0});case S.q.DATE:var d=t.value;return v().createElement(a.OperandCalendar,{ref:this.operandRef,active:r,edit:i,date:d.date,dateEnd:d.dateEnd,lapse:d.lapse,datePicker:this.render2kitDatePicker,onChange:this.handleValueApply,onClose:this.handleClose,portal:o,portalOnly:!0});case S.q.MAILBOX:var u=t.value;return v().createElement(a.OperandMailbox,{ref:this.operandRef,testId:(0,T.qa)("".concat(S.q.MAILBOX,":").concat(u.email)),qaEnabled:(0,T.U)(),mailbox:u,prefixText:i18n("В ящике"),onClose:this.handleClose})}},t.prototype.render=function(){var e,t=this.props,n=t.first,r=t.last,a=t.operand,i=t.SmartOperand,o=u()(((e={})[C]=!0,e[w]=n,e[L]=r,e));return v().createElement("span",{className:o},this.renderOperand(),i&&v().createElement(i,{editable:a.type!==S.q.FILTER,portal:!0,onEditingStarted:this.handleEditingStarted,onEditingEnd:this.handleEditingEnd}))},t=R([p.observer],t)}(v().Component),P=n(70357),N=n(78740),x="_3yyc668S45nbm2e_p3s6u7",F="_36095dscslW_jT6c3XD9Sn",U="qjkccY5fSKjR-EEl3clWJ",H="sIxCdzi8sUyUA4AFlh9C",B="_2ajszcoO292V4t_mDe2D_l",Z="_3d04684FcOlFUxXZ88FqWO",G="elRpivMputEG7xBpep9wM",q="_27_C7urvCgQfgdOXq-YkF3",j="_3CT2rIQA3H2c77_KeUpoIa",W="_1XeZVjWI3S6j3SYMYdnVbj",V="_1V_JAvJOg6UG9bdtsIgWBR",z="_2X_edotp2dvQ6hgewUsEiT",Y="rKjxwyqW3E2qnBQWNn-Fw",K="_1T55H2cA44INJYueGj74KP",X="_1RZoc6TqntWsBRAPwu80dM",Q="_3LyF0nmtnfsji64z95K44W",J="_38o2ji9dqz8gS6DjWj6bW5",$="_1UVl4UDVOlGiWZG9a-EAeO",ee="_26T7_Wh7ND6qcYBfXUUd76",te="_2U-voa2lJDe7WZJzWN5OFD",ne="CzzNiOhcrXFbRQkFwlcBo",re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ae=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o},ie=13;var oe=function(e){function t(t){var n=e.call(this,t)||this;return n.searchInputRef=v().createRef(),n.ignoreBlur=!1,n.fetchSearchModel=(0,h.Z)((function(e,t){if(void 0===t)t=!1;n.props.search.suggests.fetch({query:e,force:t})}),(function(e,t){if(e[0]!==t[0])return!1;else return!!e[1]==!!t[1]})),n.renderOperand=n.renderOperand.bind(n),n.renderInput=n.renderInput.bind(n),n.renderSuggest=n.renderSuggest.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleInputEditingStarted=n.handleInputEditingStarted.bind(n),n.handleAppendSuggest=n.handleAppendSuggest.bind(n),n.handleAppendSuggestQuery=n.handleAppendSuggestQuery.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleSuggestShow=n.handleSuggestShow.bind(n),n.handleSuggestItemsCounted=n.handleSuggestItemsCounted.bind(n),n.handleSuggestReposition=n.handleSuggestReposition.bind(n),n.handleSearchClick=n.handleSearchClick.bind(n),n.handlePageClick=n.handlePageClick.bind(n),n.handleOperandValueApply=n.handleOperandValueApply.bind(n),n.handleAppendSuggestOperand=n.handleAppendSuggestOperand.bind(n),n.fetchSearchModel=(0,A.debounce)(n.fetchSearchModel,200,[]),n.portalContainer=document.createElement("DIV"),document.body.appendChild(n.portalContainer),n}return re(t,e),Object.defineProperty(t.prototype,"searchInput",{get:function(){var e;return null===(e=this.searchInputRef)||void 0===e?void 0:e.current},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this.props.search;this.fetchSearchModel(e.value),window.addEventListener("click",this.handlePageClick),window.addEventListener("touchmove",this.handlePageClick)},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.search,r=t.active,a=r!==e.active;this.fetchSearchModel(n.value,a&&r)},t.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.handlePageClick),window.removeEventListener("touchmove",this.handlePageClick),document.body.removeChild(this.portalContainer)},t.prototype.handleInputChange=function(e,t){this.props.search.setValue(t),this.fetchSearchModel(t)},t.prototype.handleInputEditingStarted=function(){var e;null===(e=this.inputRef.current)||void 0===e||e.focus()},t.prototype.handleAppendSuggest=function(e,t,n,r){var a=n?"_".concat(n):"";s().send("".concat(t).concat(a),{t_feature:"operand_select"}),this.handleAppendSuggestCommon(e,t,n,r)},t.prototype.handleAppendSuggestOperand=function(e,t,n,r){var a=n?"_".concat(n):"";s().send("suggest_".concat(t).concat(a,"_click")),this.handleAppendSuggestCommon(e,t,n,r)},t.prototype.activeElementBlur=function(){var e;null===(e=document.activeElement)||void 0===e||e.blur()},t.prototype.handleAppendSuggestCommon=function(e,t,n,r){var a=this,i=this.props,o=i.search,s=i.onSuggestSelect;if(t!==S.q.MESSAGE){o.applyOperandAndFocus(t,n,r);var l=o.smartInput.operands.length,c=t===S.q.DATE||t===S.q.FOLDER;if(!c&&"keydown"!==e.type)return null==s||s(),void this.activeElementBlur();window.setTimeout((function(){if(c)a.focusAfterExpand(l-1)}),0)}else o.goToLetterAndClear(r)},t.prototype.handleAppendSuggestQuery=function(e,t){var n=this.props,r=n.search,a=n.onSuggestSelect;r.setQuery(t.query),s().send("recent",{t_feature:"operand_select"}),null==a||a(),this.activeElementBlur()},t.prototype.handleKeyDown=function(e){var t=this.props.search,n=t.selectedSuggest,r=t.totalSuggests;switch(e.keyCode){case ie:if(s().send("search",{t_feature:"operand_select"}),this.blur(),-1===n)return t.appendSearchQuery(e.target.value);var a=document.querySelector('[data-navigation-index="'.concat(n,'"]'));if(a)a.dispatchEvent(function(){var e;if("function"==typeof KeyboardEvent)e=new KeyboardEvent("keydown",{view:window,bubbles:!0,cancelable:!0});else(e=document.createEvent("KeyboardEvent")).initEvent("keydown",!0,!0);return e}());return;case 40:if(++n>=r)n=-1;return t.setSuggestsInfo({selectedSuggest:n});case 38:if(--n<-1)n=r-1;return t.setSuggestsInfo({selectedSuggest:n})}},t.prototype.handleSuggestShow=function(){this.props.search.setSuggestsInfo({selectedSuggest:-1})},t.prototype.handleSuggestItemsCounted=function(e){var t=this.props.search,n=t.selectedSuggest;if(n>=e)n=-1;t.setSuggestsInfo({totalSuggests:e,selectedSuggest:n})},t.prototype.handleSearchClick=function(e){e.stopPropagation(),this.ignoreBlur=!0,s().send("search",{t_feature:"operand_select"});var t=this.props.search,n=this.inputRef.current;if(null==n?void 0:n.value)t.appendSearchQuery(n.value),this.blur()},t.prototype.handleSuggestReposition=function(e,t){var n=this.props,r=n.search,a=n.ponyMode,i=r.smartInput;if(i.active!==i.operands.length)return{left:e+4,top:t};if(!i.operands.length)return{left:e-(a?30:37),top:t+2};else return{left:e,top:t+2}},t.prototype.handleOperandValueApply=function(e){var t=this;if(e.type===S.q.DATE)window.setTimeout((function(){t.blur()}),1)},t.prototype.renderOperand=function(e,t){var n=this.props,r=n.search,a=n.categories,i=void 0===a?[]:a,o=n.colorTags,s=void 0===o?[]:o,l=n.darkMode,c=r.smartInput.operands.length;return v().createElement(M,{ref:t.ref,active:t.active,editing:t.editing,first:0===t.index,last:t.index===c-1,SmartOperand:t.SmartOperand,operand:e,search:r,index:t.index,portalRef:t.portalRef,onValueApply:this.handleOperandValueApply,categories:i,colorTags:s,darkMode:l})},t.prototype.renderInput=function(e,t){var n,r,o,s=this.props.search,l=t.SmartOperand;this.inputRef=t.ref;var c=u()(((n={})[z]=!0,n)),d=u()(((r={})[W]=!0,r[V]=f.SEARCH_PANEL_PORTAL&&!f.HIDE_HEADLINE,r)),m=u()(((o={})[Y]=!0,o));return v().createElement("div",{className:c},s.progress&&v().createElement("span",{className:m},v().createElement(i.Progress,{size:20})),v().createElement(a.DynamicInput,{ref:t.ref,static:!0,className:d,value:s.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),v().createElement(l,{onEditingStarted:this.handleInputEditingStarted}))},t.prototype.renderSuggest=function(e,t){var n=this.props,r=n.search,a=n.darkMode;return v().createElement(P.Z,{search:r,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,T.U)(),darkMode:a})},t.prototype.sendClickRadar=function(){(0,c.ZP)("srch-input-clk")},t.prototype.renderSearchPanel=function(){var e,t,n,r,a=this,o=this.props,s=o.search,c=o.ponyMode,d=o.themeClassName,h=o.onBlur,p=u()(x,d,((e={})[ne]=c,e[Z]=f.SEARCH_PANEL_PORTAL&&!f.HIDE_HEADLINE,e)),g=u()(B),_=u()(G),b=u()(q,((t={})[j]=c,t)),A=u()($,ee,((n={})[te]=c,n)),S=u()(K,((r={})[J]=c,r[X]=f.SEARCH_PANEL_PORTAL&&f.SEARCH_CLEAR,r));return v().createElement("div",{className:p,onClick:this.sendClickRadar},v().createElement("div",{className:F},v().createElement("span",{className:A},v().createElement(i.Icon,{icon:c?m.NAVIGATION_SEARCH_S:m.NAVIGATION_SEARCH})),v().createElement("div",{"data-test-id":(0,T.qa)("search-input-container"),className:g},v().createElement(l.SmartInput,{className:_,placementClassName:b,ref:this.searchInputRef,model:s.smartInput,operandRenderer:this.renderOperand,inputRenderer:this.renderInput,suggestRenderer:this.renderSuggest,onBlur:function(){if(!a.ignoreBlur||!f.SEARCH_PANEL_PORTAL)h()},onSuggestShow:this.handleSuggestShow,onSuggestReposition:this.handleSuggestReposition,portal:this.portalContainer})),f.SEARCH_CLEAR&&v().createElement("span",{className:Q,onMouseDown:function(e){e.stopPropagation(),a.ignoreBlur=!0;var t=a.inputRef.current;if(s.empty&&!(null==t?void 0:t.value))h();s.clear()}},v().createElement(y.Z,{component:E.Z,className:$,name:"close","data-qa-id":"close"}))),f.SEARCH_PANEL_PORTAL&&f.SEARCH_CLEAR&&v().createElement("div",{className:H}),(!f.SEARCH_PANEL_PORTAL||f.SEARCH_CLEAR)&&v().createElement("div",{className:U},v().createElement("span",{"data-test-id":(0,T.qa)("search-button"),className:S,onMouseDown:this.handleSearchClick},i18n("Найти"))))},t.prototype.handlePageClick=function(e){var t,n=this.props,r=n.active,a=n.search;if(r){var i=b().findDOMNode(this.searchInput),o=a.smartInput.operands[a.smartInput.active],s=o&&o.type===S.q.DATE;if(!(i===e.target||(null===(t=null==i?void 0:i.contains)||void 0===t?void 0:t.call(i,e.target))||s&&this.portalContainer.contains(e.target))&&document.body.contains(e.target))this.blur()}},t.prototype.focus=function(){var e;null===(e=this.searchInput)||void 0===e||e.focus()},t.prototype.blur=function(){var e;null===(e=this.searchInput)||void 0===e||e.blur()},t.prototype.focusAfterExpand=function(e){var t=this.props.search;if(null!=e||(e=t.smartInput.operands.length),t.smartInput[l.SmartInputActions.SET_OPERAND_FLAGS](e,{active:!0,editing:!0}),e===t.smartInput.operands.length)this.handleInputEditingStarted();else this.focus()},t.prototype.render=function(){var e=this.props.ponyMode;return v().createElement(N.Z,{ponyMode:e},this.renderSearchPanel())},t.defaultProps={themeClassName:"r-search-panel"},t=ae([p.observer],t)}(v().Component)},56925:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ve}});var r=n(17717),a=n.n(r),i=n(81171),o=n(60033),s=n.n(o),l=n(28266),c=n.n(l),d=n(79929),u=n(63745),f=n.n(u),m=n(63062),h=n(96384),p=function(){s().send("settings_cleanmailbox_ready")},g=function(e){var t=e.text;if(s().send("settings_cleanmailbox_error"),!t)return m.default.error({unique:!0});m.default.error({text:t})},v=function(e){var t=e.darkMode,n=e.ponymode,r=e.onPopupShow,a=e.isFullheight,i=(0,u.useState)(null),o=i[0],s=i[1];(0,u.useEffect)((function(){window.require(["settings.cleanmailbox.page"],(function(e){s(e)}))}),[s]);if(!o)return null;else return f().createElement(o,{onContentReady:p,onError:g,onSecureFolder:function(e){var t=e.folder;return r(!0),(0,h.Z)(t).finally((function(){r(!1)}))},darkMode:t,ponymode:n,isFullheight:a})},_=n(40520),b=function(e){var t=e.activeItemIndex,n=e.setActiveItemIndex,r=e.startSection,a=e.availableNavigationItems;(0,u.useEffect)((function(){if(r){var e=(i=r,a.findIndex((function(e){return e.id===i})));if(s().send("settings-dock_sidebar_itemIndex_".concat(r)),t===e)return;if(a[e].handle)return a[e].handle(),void n(e);n(e)}var i}),[r])},E=n(21211),y=n(81242),T=n(72727),A=n(35760),S=n(88255),O="_1AXeFOZ6FZljClOyAmifSq",C="hy6wRqVbNmT8XkrDfKsMW",w="_1YkJIthKTnGWtAuG8-a_-V",L="VU2Vk_VHHt6WvmcSzjCW3",k="Gz5GjPuUWCsNUwx2wOggE",I="bJCxAsQ0eXX6wx01CQ7ux",R=function(e){var t=e.model,n=e.selectedId,r=e.onEvent,a=t.id,i=t.colorized,o=t.preview,l=t.title,d=i?{backgroundColor:i}:{backgroundImage:"url(".concat(o,")")};return f().createElement("div",{className:c()(O,i&&I),key:t.id},f().createElement("div",{className:c()(C,a===n&&k),onClick:function(){var e=new Event("theme:select");e.details={model:t},r(e),s().send("themes_select_".concat(t.id))},"data-test-id":"themes-item-"+t.id,style:d},f().createElement("div",{className:w}),f().createElement("span",{className:L},l)))},D={colorized:"_1eNsQPD4WYb6ZmExbjsyce"},M=function(e){var t=e.onEvent,n=e.themes,r=n.main,a=n.colorized,i=n.selected,o=null==i?void 0:i.id,s=function(e){return e.map((function(e){return f().createElement(R,{model:e,selectedId:o,onEvent:t,key:e.id})}))};return f().createElement(f().Fragment,null,f().createElement("div",{className:D.colorized,"data-test-id":"themes-container-colorized"},s(a)),f().createElement("div",{className:D.main,"data-test-id":"themes-container-main"},s(r)))},P="_3bobCcH2i6CjXBdV6jLbeC",N="_39cAq2mMwfkX5RH_UKKkws",x="_2x_046fMPXhKznJisMRJb8",F="_2jv2OImEVD-elNS7Sa7nh",U="_1fiT1m_S8jkHsPAapA5uSb",H="_1Lod0h7ryPD83RuYmN-ING",B="_3vEv928jeaEvb_gp1LHqxr",Z="_3WC4Upnrun59Z_LKACM-a0",G={header:i18n("Настройки внешнего вида вашей почты и темы оформления"),threePane:i18n("Список писем с колонкой письма"),ponymode:i18n("Компактный вид почты"),shortcuts:i18n("Свернуть список папок"),threads:i18n("Группировать письма одной темы"),todo:i18n("Список задач"),letterListDividers:i18n("Показывать разделители списка")},q=function(){},j=function(e){s().send("settings-dock_apprnce_tggl_".concat(e))},W=function(e){var t,n=e.onEvent,r=e.support3pane,a=e.layoutType,o=e.canTogglePonymode,s=e.ponymode,l=e.canToggleShortcuts,d=e.manualShortcuts,u=e.threads,m=e.themes,h=e.canToggleTodo,p=e.todo,g=e.lettersDividersEnabled,v=e.canToggleLettersDividers,_="3pane"===a;return f().createElement("div",{className:c()(P,(t={},t[Z]=s,t))},f().createElement("div",{className:N},f().createElement(i.Text,{mode:s?"small":"base"},G.header),f().createElement(i.Margin,{desktopX:s?3:5,mobileX:s?3:5})),f().createElement("div",{className:x},r&&f().createElement("div",{onClick:function(){n(new Event("layout:toggle")),j("layout")},className:F},f().createElement("div",{className:U},f().createElement(i.Switch,{checked:_,onChange:q,compact:!0,testId:_?"3pane-enabled":"3pane-disabled"})),f().createElement(i.Space,{inline:!0,large:!0}),f().createElement("div",{className:H},f().createElement(i.Text,{mode:s?"small":"base"},G.threePane))),o&&f().createElement("div",{onClick:function(){n(new Event("ponymode:toggle")),j("ponymode")},className:F},f().createElement("div",{className:U},f().createElement(i.Switch,{checked:s,onChange:q,compact:!0,testId:s?"ponymode-enabled":"ponymode-disabled"})),f().createElement(i.Space,{inline:!0,large:!0}),f().createElement("div",{className:H},f().createElement(i.Text,{mode:s?"small":"base"},G.ponymode))),l&&f().createElement("div",{onClick:function(){n(new Event("shortcuts:toggle")),j("shortcuts")},className:F},f().createElement("div",{className:U},f().createElement(i.Switch,{checked:d,onChange:q,compact:!0,testId:d?"shortcuts-enabled":"shortcuts-disabled"})),f().createElement(i.Space,{inline:!0,large:!0}),f().createElement("div",{className:H},f().createElement(i.Text,{mode:s?"small":"base"},G.shortcuts))),f().createElement("div",{onClick:function(){n(new Event("threads:toggle")),j("threads")},className:F},f().createElement("div",{className:U},f().createElement(i.Switch,{checked:u,onChange:q,compact:!0,testId:u?"threads-enabled":"threads-disabled"})),f().createElement(i.Space,{inline:!0,large:!0}),f().createElement("div",{className:H},f().createElement(i.Text,{mode:s?"small":"base"},G.threads))),v&&f().createElement("div",{onClick:function(){n(new Event("lettersdividers:toggle")),j("lettersdividers")},className:F},f().createElement("div",{className:U},f().createElement(i.Switch,{checked:g,onChange:q,compact:!0,testId:g?"latters-list-dividers-enabled":"latters-list-dividers-disabled"})),f().createElement(i.Space,{inline:!0,large:!0}),f().createElement("div",{className:H},f().createElement(i.Text,{mode:s?"small":"base"},G.letterListDividers))),h&&f().createElement("div",{onClick:function(){n(new Event(S.tY)),j("todo")},className:F},f().createElement("div",{className:U},f().createElement(i.Switch,{checked:p,onChange:q,compact:!0,testId:p?"todo-enabled":"todo-disabled"})),f().createElement(i.Space,{inline:!0,large:!0}),f().createElement("div",{className:H},f().createElement(i.Text,{mode:s?"small":"base"},G.todo)))),f().createElement("div",{className:B},f().createElement(M,{themes:m,onEvent:n})))},V=n(21528),z=n(19818),Y=n(74456),K={page:"_3yWjF-Af5XijT3-K4LlCUx",page_compact:"_3pwC2gcuhQKHxvvv2R49kR",prompt:"_3jb9hdaq_FemxP4g-zNZ1W",prompt_compact:"_2AcKxOEPr5zm826ii940bO",page_fullScreen:"_1G1N5xyOzosxFqjzmHCquL"};function X(){switch(V.default.getAsString("browser-settings-promo-type")){case"mailto":return"mailto";default:case"push":return"push"}}function Q(){var e,t;null===(e=a().get("octavius-letterblock-browser-settings"))||void 0===e||e.save({state:!0}),null===(t=a().get("octavius-notify-browser-settings"))||void 0===t||t.save({state:!0})}var J,$=function(e){var t=e.compact,n=e.darkMode,r=e.isFullScreen,o=(0,u.useState)(null),s=o[0],l=o[1],c=(0,u.useCallback)((function(e){m.default.add(e)}),[]),d=(0,u.useCallback)((function(){if("push"===X())Q()}),[]),h=(0,u.useCallback)((function(){var e;if("mailto"===X())Q();null===(e=a().get("from-mailto-handler-count"))||void 0===e||e.save({state:!0})}),[]);if((0,u.useEffect)((function(){(0,Y.Z)("settings.general.page/browser-settings").then((function(e){return l((function(){return e}))}))}),[]),!s)return null;else return f().createElement(i.Responsive,{mode:"desktopS"},f().createElement(s,{activeEmail:z.Z.getUser().attributes.email,onEvent:c,onMailToToggle:h,onPushToggle:d,ponymode:t,isDarkMode:n,className:[K.page,t&&K.page_compact,r&&K.page_fullScreen].filter(Boolean).join(" "),promptClassName:[K.prompt,t&&K.prompt_compact].filter(Boolean).join(" ")}))},ee=n(47299),te=n(57092),ne="_2NRfgzOvCQj8dfoA841zPJ",re="_33Wbz9kDCBjFoklUxhiy_r",ae="_29vsrPctlrfHWseJn5DkZw",ie="_1WZP8Y3Lv-7VdI23A7HwtP",oe=function(e){var t=e.text,n=e.isExternalLink,r=e.flag,a=e.hasPulsar;return f().createElement("span",{className:ne},f().createElement("span",{className:re},t),r&&f().createElement("span",{className:ae,style:{backgroundImage:'url("'.concat(r,'")')}}),n&&f().createElement(f().Fragment,null,f().createElement(i.Space,{small:!0,responsive:"desktopS"}),f().createElement(i.Space,{small:!0,responsive:"desktopS"}),f().createElement(i.Icon,{icon:d.NAVIGATION_ARROW_NEXT_S})),a&&f().createElement("div",{className:ie},f().createElement(i.Pulsar,{fixed:!0,sizeX:6})))},se="_3Cn-EmstXVr9LMQLvXQi3",le="_1gWJhJFtkaru-QhzvkexcZ",ce="DQ3TUvpE-8DYg0TVU-KL8",de="_1D_8UpQJRYEyyXCR_YRnpR",ue="_1gFBwYzu2iOBwpzNaoe91M",fe="_2Hah1-jSTlP39ja1gvmk5N";!function(e){e.Appearance="appearance",e.Metathreads="metathreads",e.Cleanmaster="cleanmaster",e.Cleanmailbox="cleanmailbox",e.BrowserSettings="browsersettings",e.Help="help",e.Security="security",e.Log="log",e.Lang="lang",e.More="more",e.HelpVK="support_vk",e.SecurityCheckup="securitycheckup"}(J||(J={}));var me=function(){return(me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},he="calc(100% - var(--vkui--octavius_size_headline_height--regular))",pe=a().get("security-checkup-link"),ge=function(e){if(!e)return{collapsed:"50%",expanded:he}},ve=function(e){var t=e.show,n=e.startSection,r=e.darkMode,a=e.ponymode,o=e.applicationElement,l=e.userLang,m=e.disableExpand,h=e.disableAutoExpand,p=e.startFullscreen,g=e.thirtyFiftyMode,S=e.metathreadsData,O=e.onMetathreadsSettingsEdit,C=e.onMetathreadsHelpClick,w=e.onEvent,L=e.metathreadsFiltersCount,k=e.metathreadsFiltersCountLoading,I=(0,u.useRef)(null),R=(0,u.useState)(0),D=R[0],M=R[1],P=(0,u.useState)(p),N=P[0],x=P[1],F=(0,u.useState)(!1),U=F[0],H=F[1],B=(0,u.useState)(!1),Z=B[0],G=B[1],q=(0,u.useState)(!0),j=q[0],V=q[1],z=(0,u.useCallback)((function(e){if(t)if(M(0),x(p),H(!1),G(!1),w(new Event("settings:close")),I.current)s().send("settings-dock_close_".concat(e))}),[t,M,x,p,H,G,I,w]),Y=(0,u.useCallback)((function(){z("outside")}),[z]),K=(0,u.useCallback)((function(){z("esc")}),[z]),X=(0,u.useCallback)((function(){z("cross")}),[z]),Q=function(){s().send("settings_dock_".concat(N?"collapse":"expand")),x(!N),H(!1),G(!0)},ne=f().useCallback((function(){z("support_vk"),w(new Event("support_vk:click"))}),[z,w]),re=[{id:J.Appearance,testId:J.Appearance,text:f().createElement(oe,{text:E.SETTINGS_DOCK_APPEARANCE_TITLE?i18n("Оформление"):i18n("Внешний вид")})},{id:J.SecurityCheckup,testId:J.SecurityCheckup,text:f().createElement(oe,{text:i18n("Проверка безопасности"),hasPulsar:!pe.state}),isHidden:!E.SHOW_SECURITY_CHECKUP_LINK_IN_SETTINGS,href:E.SECURITY_CHECKUP_URL,handle:function(){if(!1===pe.state)pe.save({state:!0})}},{id:J.Metathreads,testId:J.Metathreads,text:f().createElement(oe,{text:i18n("Умная сортировка")}),isHidden:E.HIDE_METATHREADS},{id:J.Cleanmaster,testId:J.Cleanmaster,text:f().createElement(oe,{text:E.SETTINGS_DOCK_CLEANMASTER_USE_UNSUBSCRIBE_TITLE?i18n("Отписаться от рассылок"):i18n("Управление рассылками"),isExternalLink:E.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED}),href:E.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED?E.CLEANMASTER_URL:null,isHidden:E.SETTINGS_DROPDOWN_HIDE_CLEANMASTER},{id:J.Cleanmailbox,testId:J.Cleanmailbox,text:f().createElement(oe,{text:E.SETTINGS_DOCK_CLEANMAILBOX_TITLE?i18n("Разобрать непрочитанные"):i18n("Разобрать почту")}),isHidden:E.SETTINGS_DOCK_HIDE_CLEANMAILBOX},{id:J.BrowserSettings,testId:J.BrowserSettings,text:f().createElement(oe,{text:E.SETTINGS_DOCK_BROWSER_SETTINGS_TITLE?i18n("Почта в браузере"):i18n("Работа в браузере")}),isHidden:!E.SETTINGS_DOCK_BROWSERSETTINGS_ENABLED},{id:J.Help,testId:J.Help,text:f().createElement(oe,{text:i18n("Помощь"),isExternalLink:!0}),href:E.HELP_URL,isHidden:E.SETTINGS_DROPDOWN_HIDE_HELP},{id:J.HelpVK,testId:J.HelpVK,text:f().createElement(oe,{text:i18n("Чат с поддержкой VK"),isExternalLink:!0}),handle:ne,isHidden:!E.SHOW_VK_HELP},{id:J.Security,testId:J.Security,text:f().createElement(oe,{text:i18n("Безопасность"),isExternalLink:!0}),href:E.SECURITY_URL,isHidden:E.SETTINGS_DROPDOWN_HIDE_SECURITY},{id:J.Log,testId:J.Log,text:f().createElement(oe,{text:i18n("Отправить логи")}),isHidden:!E.ENABLE_LOGGING,handle:function(){w(new Event("logs:click"))}},{id:J.Lang,testId:J.Lang,text:f().createElement(oe,{text:"".concat(i18n("Язык:")," ").concat(y.u[l].label),flag:y.u[l].src})},{id:J.More,testId:J.More,text:f().createElement(oe,{text:i18n("Все настройки"),isExternalLink:!0}),href:E.SETTINGS_URL,isHidden:E.SETTINGS_DROPDOWN_HIDE_SETTINGS}].filter((function(e){return!e.isHidden}));i.hooks.useOnESC({onEsc:K});var ae=function(e){V(!e)};b({activeItemIndex:D,setActiveItemIndex:M,startSection:n,availableNavigationItems:re}),(0,u.useEffect)((function(){if(t)if(s().send("settings-dock_sidebar_show_".concat(re[D].id)),I.current)I.current.scrollTop=0}),[t,D]),(0,u.useEffect)((function(){null==o||o.classList.toggle("g-app-scaled",t),document.body.classList.toggle(se,t)}),[t,o]),(0,u.useEffect)((function(){if(t&&!h&&!Z&&re[D].id!==J.Appearance)H(!0);else H(!1)}),[t,D,h]);var ie=function(e,t,n){var r=e.thirtyFiftyMode;if(t)return he;if(r||n)return i.DOCK_HEIGHT_MODES.AUTO_EXPAND;else return"50%"}(e,N,U);return f().createElement(i.Dock,{show:t,closeByBackdropClick:j,scaleElement:o,onHide:Y,testId:"settings-dock",height:ie,autoExpandHeights:ge(g),onExpand:function(){if(s().send("settings_dock_auto-expand"),U)x(!0),G(!0)}},f().createElement("div",{className:le,"data-test-id":N?"dock-expanded":"dock-collapsed"},f().createElement(_.Z,null,(function(e){var t=e.Button;return f().createElement("div",{className:ce},!m&&f().createElement(f().Fragment,null,f().createElement(i.Tooltip,{overlay:f().createElement(i.Text,null,N?i18n("Свернуть"):i18n("Развернуть"))},f().createElement(t,{"data-test-id":N?"collapse":"expand",mode:"tertiary",size:a?"s":"l",before:f().createElement("div",{style:{display:"flex"}},f().createElement(i.Icon,{icon:N?d.NAVIGATION_ZOOM_OUT_OVERLAY:d.NAVIGATION_ZOOM_OVERLAY})),onClick:Q})),f().createElement(i.Space,{responsive:"desktopS",small:!0}),f().createElement(i.Space,{responsive:"desktopS",small:!0})),f().createElement(i.Tooltip,{placement:"bottomRight",overlay:f().createElement(i.Text,null,i18n("Закрыть"))},f().createElement(t,{"data-test-id":"cross",mode:"tertiary",size:a?"s":"l",before:f().createElement("div",{style:{display:"flex"}},f().createElement(i.Icon,{icon:d.ACTIONS_CLOSE_BIG})),onClick:X})))})),f().createElement("div",{className:de},f().createElement("div",{className:fe},f().createElement(i.NavigationMenu,{activeItem:D,items:re,onClick:function(e,t){if(s().send("settings-dock_sidebar_click_".concat(re[e].id)),re[e].href)t.preventDefault(),(0,T.default)(re[e].href);if(re[e].handle)t.preventDefault(),re[e].handle();if(!re[e].href&&!re[e].handle)M(e)},size:a?"compact":"normal",noBorder:!0})),f().createElement("div",{className:c()(ue),ref:I,"data-test-id":"".concat(re[D].id,"-page")},re[D].id===J.Appearance&&f().createElement(W,me({},e)),re[D].id===J.Cleanmaster&&f().createElement(te.Z,{onPopupShow:ae,compact:a}),re[D].id===J.BrowserSettings&&f().createElement($,{compact:a,darkMode:r,isFullScreen:N}),re[D].id===J.Cleanmailbox&&f().createElement(v,{darkMode:r,ponymode:a,onPopupShow:ae,isFullheight:N}),re[D].id===J.Metathreads&&f().createElement(A.Z,{key:S.length,metathreadsData:S,onSettingsEdit:O,onHelpClick:C,onCreateFilter:function(){z("add-filter"),w(new Event("metathreads:filters:create"))},updateFilters:function(){w(new Event("metathreads:filters:update"))},filtersCount:L,filtersCountLoading:k,ponymode:a,darkMode:r}),re[D].id===J.Lang&&f().createElement(ee.Z,{currentLang:l,darkMode:r,ponymode:a})))))}},78740:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r,a,i=n(63745),o=n.n(i),s=n(9783),l=n(73928),c=n(32707),d=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.render=function(){var e=this.props.nanoMode?c.h_:c.yk;return o().createElement(l.ColouredIconContext.Provider,{value:e},this.props.children)},t}(o().PureComponent),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.render=function(){return o().createElement(l.LocalizationContext.Provider,{value:this.props.value},this.props.children)},t}(o().PureComponent);!function(e){e.NORMAL="normal",e.NORMAL_SMALL="normalSmall",e.COMPACT="compact"}(a||(a={}));var h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this.props.ponyMode;return o().createElement(l.ModeContext.Provider,{value:e?a.COMPACT:a.NORMAL},this.props.children)},t}(o().PureComponent),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},_=v(v({},s.Ek),{intervalText:s.sK,moreText:s.V9,daysText:s.zR,addText:s.F4}),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e=this.props,t=e.ponyMode,n=e.nanoMode;return o().createElement(u,{nanoMode:t&&n},o().createElement(m,{value:_},o().createElement(p,{ponyMode:t},this.props.children)))},t}(o().PureComponent)},40393:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var r=n(63745),a=n.n(r),i=n(73928).ModeContext.Consumer,o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function s(e){return function(t){return a().createElement(i,null,(function(n){var r=t.mode,i=void 0===r?n:r;return a().createElement(e,o({},t,{mode:i}))}))}}},93258:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(63745),a=n.n(r),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)};function o(e){return function(t){return function(n){var r;if("function"==typeof e)r=e(n);if("string"==typeof e)r=e;return a().createElement(t,i({themeClassName:r},n))}}}},73794:function(e,t,n){"use strict";n.d(t,{d:function(){return o},k:function(){return s}});var r=n(77917),a=n(28266),i=n.n(a);function o(e){return"".concat("js-promo-id_").concat(e)}var s=function(){function e(e){this.name=e}return e.prototype.getModsToElem=function(e,t){if(!t)return null;else return Object.entries(t).reduce((function(t,n){var r=n[0],a=n[1];return t["".concat(e,"_").concat(r)]=a,t}),{})},e.prototype.postProcess=function(e){return r.default.lookup(e)},e.prototype.root=function(e,t){return this.postProcess(i()(this.name,this.getModsToElem(this.name,e),null==t?void 0:t.addClass))},e.prototype.elem=function(e,t,n){var r="".concat(this.name,"__").concat(e);return this.postProcess(i()(r,this.getModsToElem(r,t),null==n?void 0:n.addClass))},e}()},54908:function(e,t,n){"use strict";n.d(t,{RV:function(){return i},eP:function(){return o},BU:function(){return s},BK:function(){return l},Co:function(){return d}});var r=n(89629),a=r.Event,i=function(e){return"string"==typeof e?{name:e}:e};function o(e,t){if(t.stop)e.stopPropagation();if(t.prevent)e.preventDefault()}function s(e,t,n){var r,i=new a(e);return i.target=null==n?void 0:n.target,i.details=null!=t?t:null==n?void 0:n.details,i.originalEvent=null!==(r=null==n?void 0:n.originalEvent)&&void 0!==r?r:n,i.stopPropagation=function(){var e,t;null===(t=null===(e=i.originalEvent)||void 0===e?void 0:e.stopPropagation)||void 0===t||t.call(e),a.prototype.stopPropagation.call(i)},i.preventDefault=function(){var e,t;null===(t=null===(e=i.originalEvent)||void 0===e?void 0:e.preventDefault)||void 0===t||t.call(e),a.prototype.preventDefault.call(i)},i.defaultPrevented=null==n?void 0:n.defaultPrevented,i.propagationStopped=null==n?void 0:n.propagationStopped,i}function l(e,t){if(null==t)throw new TypeError("Invalid object ".concat(t," provided"));if("function"!=typeof t.on)throw new TypeError('Invalid object with no "on" method provided');Object.entries(e).forEach((function(e){var n=e[0],r=e[1];if(null==t[r])throw new TypeError('Could not subscribe to "'.concat(n,'": class has no method named ').concat(r))})),function(e,t){Object.entries(e).forEach((function(e){var n=e[0],r=e[1];t.on(n,t[r])}))}(e,t)}var c=/-/g,d=function(e){return e.toLowerCase().replace(c,"")}},51422:function(e,t,n){"use strict";n.d(t,{zf:function(){return f},uN:function(){return h},hG:function(){return p},Yv:function(){return E},CH:function(){return y},Nh:function(){return A},_N:function(){return S},Ce:function(){return O},pd:function(){return I},v$:function(){return R}});var r,a=n(52745),i=n(18440),o=n.n(i),s=n(54908),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},d=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)if(r||!(a in t)){if(!r)r=Array.prototype.slice.call(t,0,a);r[a]=t[a]}return e.concat(r||Array.prototype.slice.call(t))};function u(e){var t,n;return null!==(n=null===(t=this.state)||void 0===t?void 0:t[e])&&void 0!==n?n:this.props[e]}function f(e){return!!u.call(this,e)}function m(e,t){var n;if("string"==typeof e)(n={})[e]=t,e=n;return this.setState(e),null}function h(e,t){var n=(0,s.Co)(e);if(this.eventsMap[n])this.eventsMap[n].push(t);else this.eventsMap[n]=[t]}function p(e,t){var n=(0,s.Co)(e);this.eventsMap[n]=this.eventsMap[n].filter((function(e){return e!==t}))}var g=function(){return!1};function v(e){var t=u.call(this,e),n=0===t?1:1===t?0:!t;m.call(this,e,n)}function _(e,t,n){var r;if("string"==typeof n&&void 0!==this[n])r=this["___"+n]||(this["___"+n]=function(e){return this[n].call(this,e)});else if("function"==typeof n)r=n;if(r&&!this.findDomListener(e,t,r))e.addEventListener(t,r.bind(this),!1),this.domListeners.push({element:e,eventName:t,handle:r})}function b(e,t,n){var r;if("string"==typeof n&&void 0!==this[n])r=this["___"+n]||(this["___"+n]=function(e){return this[n].call(this,e)});else if("function"==typeof n)r=n;var a=this.findDomListener(e,t,r);if(a)e.removeEventListener(t,r,!1),this.domListeners.splice(this.domListeners.indexOf(a),1)}function E(e){return e.broadcastEvent}function y(e,t){var n,r=(0,s.RV)(t);(n=e).__events||(n.__events={});var a=e.__events,i="".concat(r.name,":").concat(r.stop,":").concat(r.prevent);if(i in a&&!r.hasOwnProperty("details"))return a[i];var o=function(t){if(r.stop)null==t||t.stopPropagation(),null==t||t.nativeEvent.stopImmediatePropagation();if(r.prevent)null==t||t.preventDefault();E(e).call(e,(0,s.BU)(r.name,r.details||null,null==t?void 0:t.nativeEvent))};return a[i]=o,o}function T(e,t){e.forEach((function(e){var n=o().Mediator.get(e);if(n)t(n);else console.warn("[sync] No mediator found for name ".concat(e))}))}function A(e,t,n){T(n,(function(n){n.registerInstanceByName(e,t)}))}function S(e,t,n){var r=o().Block.prototype.broadcast;o().Block.prototype.broadcast=t,e(n),o().Block.prototype.broadcast=r}function O(e,t,n){if(void 0===n)n=!1;if(t)T(t,(function(t){var r,a=o().Mediator.updateAttributes(t.name,e);if(a)if(n)e.setState(a);else e.state=c(c({},null!==(r=e.state)&&void 0!==r?r:{}),a)}))}function C(e){if(e.remitEvents&&!e.broadcastEvent)throw new TypeError("You provided events to broadcast, but not the broadcast function");if(e.remitDetails&&!e.remitEvents)console.warn("You passed remitDetails with no events, this prop is unnecessary");return{mediators:e.useMediators,remit:e.remitEvents,broadcast:e.broadcastEvent,remitDetails:e.remitDetails,model:e.model,models:e.models,updateRemitEventsName:e.updateRemitEventsName}}var w="add remove sort reset update";function L(e,t,n){var r;null===(r=null==n?void 0:n.on)||void 0===r||r.call(n,e,t.forceUpdateFromModel)}function k(e,t,n){var r;null===(r=null==n?void 0:n.off)||void 0===r||r.call(n,e,t.forceUpdateFromModel)}var I=function(e){if(!e.feastReactMixin)throw new TypeError("castToFeastComponent called on component without a wrapper");return e};function R(e,t,n){var r;if(void 0===n)n={syncMediatorsOnRender:!1};return(r=function(t){function r(r,a){var i=t.call(this,r,a)||this;i.debug_wasMounted=!1,i.debug_wasUnmounted=!1,i.feastReactMixin=!0,i.syncMediatorsOnRender=n.syncMediatorsOnRender,i.eventsMap={},i.broadcast=function(e,t,n){if(void 0===t)t=i;i.broadcastEvent((0,s.BU)(e,t,n))},i.forceUpdateFromModel=function(e){if(i.debug)console.log("Updated from model: ",i.constructor.name,e);if(!i._debouncedRenderTimer)i._debouncedRenderTimer=window.setTimeout(i.debouncedRender,0)},i.debouncedRender=function(){i._debouncedRenderTimer=null,i.forceUpdate()},i.broadcastEvent=function(t){var n;if(i.handleInnerEvent)i.handleInnerEvent(t);if(i.debug)console.log("".concat(e," broadcast event: "),t);null===(n=i.eventsMap[t.type])||void 0===n||n.forEach((function(e){e(t)}))},i.reBroadcast=function(e){var t=C(I(i).props),n=t.broadcast,r=t.remit,a=t.remitDetails;if(t.updateRemitEventsName)Object.keys(r).forEach((function(e){r[(0,s.Co)(e)]=r[e]}));var o=(0,s.RV)(r[e.type]);(0,s.eP)(e,o),n((0,s.BU)(o.name,a,e))},i.domListeners=[],i.get=u,i.is=f,i.set=m,i.invert=v,i.$on=_,i.$off=b,i.vdomContains=g,i.on=h,i.off=p;var o=C(r),l=o.mediators,c=o.remit;if(l)A(e,i,l);if(i.events)(0,s.BK)(i.events,i);if(O(i,l),c)Object.keys(c).map((function(e){return i.on(e,i.reBroadcast)}));return i}return l(r,t),r.prototype.logError=function(e){(0,a.coreLoggerDispatchSelfError)("fst-rct",e,{name:r.displayName,wasMounted:this.debug_wasMounted,wasUnmounted:this.debug_wasUnmounted})},r.prototype.componentDidUpdate=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!n[0])this.logError(new Error("no prevProps"));var a=n[0],i=a.model,o=a.models,s=C(I(this).props),l=s.models,c=s.model;if(i!==c)k("change",this,i),L("change",this,c);if(o!==l)k(w,this,o),L(w,this,l);null===(e=t.prototype.componentDidUpdate)||void 0===e||e.call.apply(e,d([this],n,!1))},r.prototype.findDomListener=function(e,t,n){return this.domListeners.forEach((function(r){if(r.element===e&&r.eventName===t&&r.handle===n)return r})),null},r.prototype.render=function(){var e=C(I(this).props).mediators;if(this.syncMediatorsOnRender)O(this,e);return t.prototype.render.call(this)},r.prototype.componentDidMount=function(){var e,n=C(I(this).props),r=n.models;L("change",this,n.model),L(w,this,r),null===(e=t.prototype.componentDidMount)||void 0===e||e.call(this),this.debug_wasMounted=!0,this.broadcast("$mount",this)},r.prototype.componentWillUnmount=function(){var e;null===(e=t.prototype.componentWillUnmount)||void 0===e||e.call(this),window.clearTimeout(this._debouncedRenderTimer);var n=C(I(this).props),r=n.models;k("change",this,n.model),k(w,this,r),this.debug_wasUnmounted=!0,this.broadcast("$destroyed",this),this.domListeners=[]},r}(t)).displayName=e,r}},10476:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var r=n(63745),a=n(54908),i=n(51422),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a];return e}).apply(this,arguments)},s=function(){function e(e){var t=this;this.setMediatorProps=null,this.eventsMap={},this.vdomContains=function(){return!1},this.on=i.uN,this.off=i.hG,this.set=function(e,n){if("string"==typeof e)t.setMediatorProps((function(t){var r;return o(o({},t),((r={})[e]=n,r))}));else t.setMediatorProps((function(t){return o(o({},t),e)}));return t},this.broadcastEvent=function(e){var n;null===(n=t.eventsMap[e.type])||void 0===n||n.forEach((function(t){t(e)}))},this.render=function(){return null},this.setMediatorProps=e.setMediatorProps}return e.prototype.updateSetCallback=function(e){this.setMediatorProps=e},e}();var l=function(e){var t,n=e.name,o=e.mediators,l=e.forRadar,c=(t=(0,r.useRef)(!1),(0,r.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),t.current),d=(0,r.useMemo)((function(){return null==l?void 0:l.syntheticBlock()}),[]),u=(0,r.useMemo)((function(){return{}}),[]),f=(0,r.useCallback)((function(e){if("function"==typeof e)Object.assign(u,e(u));else Object.assign(u,e)}),[]),m=(0,r.useMemo)((function(){return new s({setMediatorProps:f})}),[]),h=(0,r.useState)(u),p=h[0],g=h[1];if(l)d.state=p;if(!c){if((0,i.Nh)(n,m,o),l)d.template="synthetic ".concat(n),d.name=n,(0,i._N)(l.radar,g,d);m.updateSetCallback(g)}if(l)Object.assign(d.radarContext||(d.radarContext={}),d.getChildContext());return(0,r.useEffect)((function(){return function(){m.broadcastEvent((0,a.BU)("$destroyed",m))}}),[]),[p,m.broadcastEvent,d]}},79670:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(10476),a=function(){return(0,r.C)({name:"usePonyMode",mediators:["pony-mode"]})[0]}},40070:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(48250),a=n(63745),i=function(e){var t=e.element,n=e.breakpoints,i=e.pureBreakpoints,o=e.initialState,s=(0,a.useState)(o),l=s[0],c=s[1];return(0,a.useLayoutEffect)((function(){if(t){var e="current"in t?t.current:t;if(e){var a=new r.O({element:e,pureBreakpoints:i,breakpoints:n,onResize:c});return function(){return a.destroy()}}}}),[n,t,i]),l}},30178:function(e,t,n){"use strict";n.d(t,{qa:function(){return a},U:function(){return i}});var r=n(19275);function a(e){if(r.Z.qa)return e;else return null}function i(){return r.Z.qa}},38868:function(t){"use strict";t.exports=e},81171:function(e){"use strict";e.exports=t},60033:function(e){"use strict";e.exports=n},7414:function(e){"use strict";e.exports=r},63745:function(e){"use strict";e.exports=a},59333:function(e){"use strict";e.exports=i}},m={};function h(e){var t=m[e];if(void 0!==t)return t.exports;var n=m[e]={id:e,loaded:!1,exports:{}};return f[e].call(n.exports,n,n.exports,h),n.loaded=!0,n.exports}h.m=f,h.amdD=function(){throw new Error("define cannot be used indirect")},h.amdO={jQuery:!0},o=[],h.O=function(e,t,n,r){if(!t){var a=1/0;for(c=0;c<o.length;c++){t=o[c][0],n=o[c][1],r=o[c][2];for(var i=!0,s=0;s<t.length;s++)if((!1&r||a>=r)&&Object.keys(h.O).every((function(e){return h.O[e](t[s])})))t.splice(s--,1);else if(i=!1,r<a)a=r;if(i){o.splice(c--,1);var l=n();if(void 0!==l)e=l}}return e}else{r=r||0;for(var c=o.length;c>0&&o[c-1][2]>r;c--)o[c]=o[c-1];o[c]=[t,n,r]}},h.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(t,{a:t}),t},l=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},h.t=function(e,t){if(1&t)e=this(e);if(8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);h.r(n);var r={};s=s||[null,l({}),l([]),l(l)];for(var a=2&t&&e;"object"==typeof a&&!~s.indexOf(a);a=l(a))Object.getOwnPropertyNames(a).forEach((function(t){r[t]=function(){return e[t]}}));return r.default=function(){return e},h.d(n,r),n},h.d=function(e,t){for(var n in t)if(h.o(t,n)&&!h.o(e,n))Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},h.f={},h.e=function(e){return Promise.all(Object.keys(h.f).reduce((function(t,n){return h.f[n](e,t),t}),[]))},h.u=function(e){return({923:"initial-async",1438:"attach-dropdown",5033:"widgets"}[e]||e)+"-"+{97:"4287d30c8cd1842f45a5",108:"4b07ecd7476dcccd01ec",222:"85ed7b7971b3a8055e71",319:"448d49064f1aac890585",336:"a1630de98d8c71555c2a",478:"5f71fd29d8e354bd06a9",664:"367c031ab9592bd7bd6a",923:"05dcee77f453ae8e910d",976:"a334c038f7206918651b",1254:"00f1e0e349d15eb01a27",1276:"92b099582b558cb4b35f",1321:"46356794b3531ea2d737",1438:"168e6c5f5dad087d2af2",1580:"f4d666f8dddc8adc314a",1616:"7dbd2d7e5e0b9769f16d",1759:"da7e515a4c776618f036",1836:"129c485985d5719dfddd",1924:"5b87c8d5cf43e6b9d91e",1937:"7af171b0bb12064e2807",2018:"8bb72063e96551c9e739",2048:"17f47882e9427c9b63c4",2070:"0664b426a17b719756a0",2106:"6f74750945fab6eb8e49",2375:"2e8fa50b96f9f53cfdb9",2387:"78ed061205caad95485c",2464:"b555038b9cdc358103a1",2503:"f2b3fcea2828e9c96508",2550:"e99a45c11ebd48916e45",2562:"63cbc7acc3c074614d31",2708:"ed24068d46978f42a59a",2790:"3d60c51ae69ab33b3c00",2826:"a632f804a9f428044bbc",2929:"2eabaf537727a1cc1eb9",3225:"14f1f04f68c44635f039",3386:"1a5a75b74da75ae18939",3390:"e3f9c099a9bcabf38d77",3541:"0b757417aa4a7ae53a96",3567:"9cbe9d30749835d03013",3626:"cf7006900c22c51c4df6",3686:"df8a33d23d16ec283a96",3778:"33c102bcbd142d255b77",4073:"d401981f9b97ae5ef8b6",4131:"4c945edfeb41ab97dc11",4143:"f3335105ea0938353a66",4260:"26c9f6c9d8dd22ae10cd",4359:"74d4d9eec5d68e132e8a",4709:"513a8902e005b0b56e0a",4794:"d43501ac2caf1e22675c",4824:"4c101ea0faad32199969",4834:"74f2ae6b90aeb50fef72",4957:"f824c54c85366ae18289",4958:"e68eecfb96bf5881b393",5033:"14446d3d73412e967b03",5043:"e190fccd79eb307bbadd",5048:"b7fe0c55c7793e8bd832",5061:"6b442e0e489ef761e212",5205:"69656860173ef0362405",5217:"4bbb0bfe11e122628035",5786:"17b7821280357613cc98",5841:"0374836b4adbb3ce2d61",5933:"ef4d0438067b3515b2c8",5962:"5eee9b9960568176584e",6090:"2eb2c8a521ad9e30f7cc",6157:"a48e3cb75d48ddd50953",6181:"4af56630262312b13666",6195:"f3c8dd4a13af987635d8",6318:"397899260690d2e6d079",6748:"4eab1556ccd649c2f883",6816:"489b6c61ee03f878b49b",7449:"876ba095ca54d27f2526",7477:"b63279acc5f393031e76",7550:"62678b1c429469c53e00",7604:"10462ec86db17b8f73fd",7622:"45ca16909aba0c3e96a9",7714:"fe3be5ca4459248dd1c7",7732:"c318888e4a1542f94edf",7877:"7d24ba6d67c747005fd3",8061:"d0b6516090f06d3f981e",8250:"73b288eb76d5ea626858",8524:"c3d70172084d88159641",8642:"29b9b1173fea7ab29bbc",8665:"8235ae98c55fcb7efdc5",8783:"0cf0a558652a99a6c853",8907:"b6204db03cb133e5acd6",9009:"6abcb497c302fc694ee1",9125:"4ab3b3d5ff7657cd71fc",9308:"d063be71650d24960dbb",9318:"9a7169ab91dbc1303b7e",9583:"07f2e7341ec450d71e5a",9651:"1390353d8a662e49e5ff",9899:"86c58a54220e26f88b7c"}[e]+".bundle.js"},h.miniCssF=function(e){return e+".css"},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c={},h.l=function(e,t,n,r){if(!c[e]){var a,i;if(void 0!==n)for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var l=o[s];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="@mail/octavius:"+n){a=l;break}}if(!a){if(i=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,h.nc)a.setAttribute("nonce",h.nc);a.setAttribute("data-webpack","@mail/octavius:"+n),a.src=e}c[e]=[t];var d=function(t,n){a.onerror=a.onload=null,clearTimeout(u);var r=c[e];if(delete c[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(n)})),t)return t(n)},u=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),i&&document.head.appendChild(a)}else c[e].push(t)},h.r=function(e){if("undefined"!=typeof Symbol&&Symbol.toStringTag)Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},h.nmd=function(e){if(e.paths=[],!e.children)e.children=[];return e},h.p="/dynamic-public-path-not-loaded",function(){if(void 0!==h){var e=h.u,t=h.e,n={},r={};h.u=function(t){return e(t)+(n.hasOwnProperty(t)?"?"+n[t]:"")},h.e=function(a){return t(a).catch((function(t){var i=r.hasOwnProperty(a)?r[a]:3;if(i<1){var o=e(a);throw t.message="Loading chunk "+a+" failed after 3 retries.\n("+o+")",t.request=o,"undefined"!=typeof xray&&xray.send("chunk-fallback-err"),t}return new Promise((function(e){var t=3-i+1;setTimeout((function(){var o="cache-bust=true"+("&retry-attempt="+t);n[a]=o,r[a]=i-1,e(h.e(a))}),function(e){return 2e3*(e-1)}(t))}))}))}}}(),void 0!==h&&Object.defineProperty(h,"p",{get:function(){try{if("string"!=typeof octaviusWebpackPublicPath)throw new Error("WebpackRequireFrom: 'octaviusWebpackPublicPath' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return octaviusWebpackPublicPath}catch(e){if(1)console.error(e);return"/dynamic-public-path-not-loaded"}},set:function(e){console.warn("WebpackRequireFrom: something is trying to override webpack public path. Ignoring the new value"+e+".")}}),d=function(e){return new Promise((function(t,n){var r=h.miniCssF(e),a=h.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var o;if((a=(o=i[r]).getAttribute("data-href"))===e||a===t)return o}}(r,a))return t();!function(e,t,n,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=function(i){if(a.onerror=a.onload=null,"load"===i.type)n();else{var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=s,a.parentNode.removeChild(a),r(l)}},a.href=t,document.head.appendChild(a)}(e,a,t,n)}))},u={2143:0},h.f.miniCss=function(e,t){if(u[e])t.push(u[e]);else if(0!==u[e]&&{2708:1,4834:1,7732:1,9009:1}[e])t.push(u[e]=d(e).then((function(){u[e]=0}),(function(t){throw delete u[e],t})))},function(){var e={2143:0};h.f.j=function(t,n){var r=h.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else if(4834!=t){var a=new Promise((function(n,a){r=e[t]=[n,a]}));n.push(r[2]=a);var i=h.p+h.u(t),o=new Error;h.l(i,(function(n){if(h.o(e,t)){if(0!==(r=e[t]))e[t]=void 0;if(r){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}}}),"chunk-"+t,t)}else e[t]=0},h.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,i=n[0],o=n[1],s=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)if(h.o(o,r))h.m[r]=o[r];if(s)var c=s(h)}if(t)t(n);for(;l<i.length;l++){if(a=i[l],h.o(e,a)&&e[a])e[a][0]();e[a]=0}return h.O(c)},n=self.webpackChunk_mail_octavius=self.webpackChunk_mail_octavius||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var p=h.O(void 0,[1933],(function(){return h(75063)}));return p=h.O(p)}()}));